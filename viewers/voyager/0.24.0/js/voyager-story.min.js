/*! For license information please see voyager-story.min.js.LICENSE.txt */
(()=>{var e={6616:(e,t,n)=>{var r={"./af":4749,"./af.js":4749,"./ar":6161,"./ar-dz":815,"./ar-dz.js":815,"./ar-kw":8261,"./ar-kw.js":8261,"./ar-ly":6264,"./ar-ly.js":6264,"./ar-ma":3501,"./ar-ma.js":3501,"./ar-sa":9344,"./ar-sa.js":9344,"./ar-tn":3182,"./ar-tn.js":3182,"./ar.js":6161,"./az":2381,"./az.js":2381,"./be":1868,"./be.js":1868,"./bg":6153,"./bg.js":6153,"./bm":8847,"./bm.js":8847,"./bn":7311,"./bn-bd":1703,"./bn-bd.js":1703,"./bn.js":7311,"./bo":4436,"./bo.js":4436,"./br":1166,"./br.js":1166,"./bs":1748,"./bs.js":1748,"./ca":369,"./ca.js":369,"./cs":8341,"./cs.js":8341,"./cv":443,"./cv.js":443,"./cy":1871,"./cy.js":1871,"./da":715,"./da.js":715,"./de":4961,"./de-at":5939,"./de-at.js":5939,"./de-ch":8234,"./de-ch.js":8234,"./de.js":4961,"./dv":63,"./dv.js":63,"./el":2553,"./el.js":2553,"./en-au":6992,"./en-au.js":6992,"./en-ca":517,"./en-ca.js":517,"./en-gb":9209,"./en-gb.js":9209,"./en-ie":7101,"./en-ie.js":7101,"./en-il":4342,"./en-il.js":4342,"./en-in":7692,"./en-in.js":7692,"./en-nz":7654,"./en-nz.js":7654,"./en-sg":943,"./en-sg.js":943,"./eo":1315,"./eo.js":1315,"./es":8023,"./es-do":4536,"./es-do.js":4536,"./es-mx":6937,"./es-mx.js":6937,"./es-us":6740,"./es-us.js":6740,"./es.js":8023,"./et":6443,"./et.js":6443,"./eu":9868,"./eu.js":9868,"./fa":53,"./fa.js":53,"./fi":4818,"./fi.js":4818,"./fil":2590,"./fil.js":2590,"./fo":354,"./fo.js":354,"./fr":6606,"./fr-ca":7628,"./fr-ca.js":7628,"./fr-ch":2760,"./fr-ch.js":2760,"./fr.js":6606,"./fy":8484,"./fy.js":8484,"./ga":9123,"./ga.js":9123,"./gd":7524,"./gd.js":7524,"./gl":3094,"./gl.js":3094,"./gom-deva":3531,"./gom-deva.js":3531,"./gom-latn":4675,"./gom-latn.js":4675,"./gu":6549,"./gu.js":6549,"./he":2875,"./he.js":2875,"./hi":4794,"./hi.js":4794,"./hr":8906,"./hr.js":8906,"./hu":1034,"./hu.js":1034,"./hy-am":6450,"./hy-am.js":6450,"./id":1109,"./id.js":1109,"./is":1247,"./is.js":1247,"./it":7350,"./it-ch":8825,"./it-ch.js":8825,"./it.js":7350,"./ja":7805,"./ja.js":7805,"./jv":8462,"./jv.js":8462,"./ka":716,"./ka.js":716,"./kk":4135,"./kk.js":4135,"./km":7600,"./km.js":7600,"./kn":5623,"./kn.js":5623,"./ko":4881,"./ko.js":4881,"./ku":6872,"./ku.js":6872,"./ky":9912,"./ky.js":9912,"./lb":6387,"./lb.js":6387,"./lo":9733,"./lo.js":9733,"./lt":6724,"./lt.js":6724,"./lv":9705,"./lv.js":9705,"./me":3972,"./me.js":3972,"./mi":2770,"./mi.js":2770,"./mk":5326,"./mk.js":5326,"./ml":648,"./ml.js":648,"./mn":7227,"./mn.js":7227,"./mr":2482,"./mr.js":2482,"./ms":3859,"./ms-my":5543,"./ms-my.js":5543,"./ms.js":3859,"./mt":355,"./mt.js":355,"./my":1980,"./my.js":1980,"./nb":3921,"./nb.js":3921,"./ne":6866,"./ne.js":6866,"./nl":1277,"./nl-be":6455,"./nl-be.js":6455,"./nl.js":1277,"./nn":3945,"./nn.js":3945,"./oc-lnc":6198,"./oc-lnc.js":6198,"./pa-in":441,"./pa-in.js":441,"./pl":1340,"./pl.js":1340,"./pt":8708,"./pt-br":2041,"./pt-br.js":2041,"./pt.js":8708,"./ro":3930,"./ro.js":3930,"./ru":5776,"./ru.js":5776,"./sd":5683,"./sd.js":5683,"./se":7447,"./se.js":7447,"./si":965,"./si.js":965,"./sk":2384,"./sk.js":2384,"./sl":1714,"./sl.js":1714,"./sq":6173,"./sq.js":6173,"./sr":4999,"./sr-cyrl":4148,"./sr-cyrl.js":4148,"./sr.js":4999,"./ss":5234,"./ss.js":5234,"./sv":2234,"./sv.js":2234,"./sw":6523,"./sw.js":6523,"./ta":8426,"./ta.js":8426,"./te":8430,"./te.js":8430,"./tet":7739,"./tet.js":7739,"./tg":118,"./tg.js":118,"./th":2054,"./th.js":2054,"./tk":8517,"./tk.js":8517,"./tl-ph":2953,"./tl-ph.js":2953,"./tlh":1920,"./tlh.js":1920,"./tr":8318,"./tr.js":8318,"./tzl":5742,"./tzl.js":5742,"./tzm":8830,"./tzm-latn":4344,"./tzm-latn.js":4344,"./tzm.js":8830,"./ug-cn":5892,"./ug-cn.js":5892,"./uk":4984,"./uk.js":4984,"./ur":665,"./ur.js":665,"./uz":1673,"./uz-latn":3457,"./uz-latn.js":3457,"./uz.js":1673,"./vi":5968,"./vi.js":5968,"./x-pseudo":2785,"./x-pseudo.js":2785,"./yo":3443,"./yo.js":3443,"./zh-cn":5206,"./zh-cn.js":5206,"./zh-hk":2258,"./zh-hk.js":2258,"./zh-mo":9759,"./zh-mo.js":9759,"./zh-tw":1730,"./zh-tw.js":1730};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=6616},3523:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n\n// #include <uv_pars_fragment>\n// replaced with\nvarying vec2 vUv;\n\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n    vec2 coords = vUv * 2.0 - 1.0;\n    float f = dot(coords, coords);\n\tgl_FragColor = vec4(outgoingLight, mix(diffuseColor.a, 0.0, f));\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n\n"},2001:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n\n// #include <uv_pars_vertex>\n// replaced with\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t// #include <uv_vertex>\n\t// replaced with\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n\n"},8669:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="//#define PHYSICAL\n//#define STANDARD\n\n#ifdef PHYSICAL\n    #define REFLECTIVITY\n    #define CLEARCOAT\n    #define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n    uniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n    uniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n    uniform float clearcoat;\n    uniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n    uniform vec3 sheen;\n#endif\n\n//#ifndef STANDARD\n//\tuniform float clearCoat;\n//\tuniform float clearCoatRoughness;\n//#endif\n\nvarying vec3 vViewPosition;\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n\n//#include <uv_pars_fragment>\n//#include <uv2_pars_fragment>\n// REPLACED WITH\n#if defined(USE_MAP) || defined(USE_BUMPMAP) || defined(USE_NORMALMAP) || defined(USE_SPECULARMAP) || defined(USE_ALPHAMAP) || defined(USE_EMISSIVEMAP) || defined(USE_ROUGHNESSMAP) || defined(USE_METALNESSMAP) || defined(USE_LIGHTMAP) || defined(USE_AOMAP)\n\tvarying vec2 vUv;\n#endif\n\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n//#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n#ifdef USE_ZONEMAP\n\tuniform sampler2D zoneMap;\n#endif\n\n#ifdef USE_AOMAP\n    uniform vec3 aoMapMix;\n#endif\n\n#ifdef MODE_XRAY\n    varying float vIntensity;\n#endif\n\n#ifdef CUT_PLANE\n    varying vec3 vWorldPosition;\n    uniform vec4 cutPlaneDirection;\n    uniform vec3 cutPlaneColor;\n#endif\n\nvoid main() {\n    #ifdef CUT_PLANE\n        if (dot(vWorldPosition, cutPlaneDirection.xyz) < -cutPlaneDirection.w) {\n            discard;\n        }\n    #endif\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n    #include <normal_fragment_maps>\n\n\t#ifdef CUT_PLANE\n\t    // on the cut surface (back facing fragments revealed), replace normal with cut plane direction\n        if (!gl_FrontFacing) {\n            normal = -cutPlaneDirection.xyz;\n            diffuseColor.rgb = cutPlaneColor.rgb;\n        }\n\t#endif\n\n    #include <clearcoat_normal_fragment_begin>\n    #include <clearcoat_normal_fragment_maps>\n    #include <emissivemap_fragment>\n\n\t// accumulation\n    #if defined(USE_LIGHTMAP) || defined(USE_AOMAP)\n        vec2 vUv2 = vUv;\n    #endif\n\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t//#include <aomap_fragment>\n\t// REPLACED WITH\n\t#ifdef USE_AOMAP\n\t    // if cut plane is enabled, disable ambient occlusion on back facing fragments\n\t    #ifdef CUT_PLANE\n            if (gl_FrontFacing) {\n\t    #endif\n\n    \t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n    \tvec3 aoSample = texture2D(aoMap, vUv).rgb;\n    \tvec3 aoFactors = mix(vec3(1.0), aoSample, clamp(aoMapMix * aoMapIntensity, 0.0, 1.0));\n    \tfloat ambientOcclusion = aoFactors.x * aoFactors.y * aoFactors.z;\n    \tfloat ambientOcclusion2 = ambientOcclusion * ambientOcclusion;\n    \treflectedLight.directDiffuse *= ambientOcclusion2;\n    \treflectedLight.directSpecular *= ambientOcclusion;\n    \t//reflectedLight.indirectDiffuse *= ambientOcclusion;\n\n    \t#if defined(USE_ENVMAP) && defined(PHYSICAL)\n    \t\tfloat dotNV = saturate(dot(geometry.normal, geometry.viewDir));\n    \t\treflectedLight.indirectSpecular *= computeSpecularOcclusion(dotNV, ambientOcclusion, material.specularRoughness);\n    \t#endif\n\n    \t#ifdef CUT_PLANE\n    \t    }\n    \t#endif\n    #endif\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n    // this is a stub for the transparency model\n    #ifdef TRANSPARENCY\n        diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n    #endif\n\n\t#ifdef CUT_PLANE\n\tif (!gl_FrontFacing) {\n\t\toutgoingLight = cutPlaneColor.rgb;\n\t}\n\t#endif\n\n\tgl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n\t#ifdef USE_ZONEMAP\n\t\tvec4 zoneColor = texture2D(zoneMap, vUv);\n\t\tgl_FragColor += vec4(zoneColor.rgb, 1.0);\n\t#endif\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n    #ifdef MODE_NORMALS\n        gl_FragColor = vec4(vec3(normal * 0.5 + 0.5), 1.0);\n    #endif\n\n    #ifdef MODE_XRAY\n        gl_FragColor = vec4(vec3(0.4, 0.7, 1.0) * vIntensity, 1.0);\n    #endif\n}\n"},9849:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="//#define PHYSICAL\n//#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#include <normal_pars_vertex>\n\n#include <common>\n\n//#include <uv_pars_vertex>\n//#include <uv2_pars_vertex>\n// REPLACED WITH\n#if defined(USE_MAP) || defined(USE_BUMPMAP) || defined(USE_NORMALMAP) || defined(USE_SPECULARMAP) || defined(USE_ALPHAMAP) || defined(USE_EMISSIVEMAP) || defined(USE_ROUGHNESSMAP) || defined(USE_METALNESSMAP) || defined(USE_LIGHTMAP) || defined(USE_AOMAP)\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n#ifdef MODE_XRAY\n    varying float vIntensity;\n#endif\n\n#ifdef CUT_PLANE\n    varying vec3 vWorldPosition;\n#endif\n\nvoid main() {\n\n//\t#include <uv_vertex>\n//\t#include <uv2_vertex>\n//  REPLACED WITH\n#if defined(USE_MAP) || defined(USE_BUMPMAP) || defined(USE_NORMALMAP) || defined(USE_SPECULARMAP) || defined(USE_ALPHAMAP) || defined(USE_EMISSIVEMAP) || defined(USE_ROUGHNESSMAP) || defined(USE_METALNESSMAP) || defined(USE_LIGHTMAP) || defined(USE_AOMAP)\n\tvUv = (uvTransform * vec3(uv, 1)).xy;\n#endif\n\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n#ifdef MODE_XRAY\n    vIntensity = pow(abs(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0)))), 3.0);\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = -mvPosition.xyz;\n\n\t// #include <worldpos_vertex>\n\t// REPLACED WITH\n\t#if defined(USE_ENVMAP) || defined(DISTANCE) || defined(USE_SHADOWMAP) || defined(CUT_PLANE)\n    \tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n    #endif\n\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n#ifdef CUT_PLANE\n    vWorldPosition = worldPosition.xyz / worldPosition.w;\n#endif\n\n#ifdef MODE_NORMALS\n    vNormal = normal;\n#endif\n}\n"},5310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=n(2206),s=n(610),i=n(3348),o=n(360),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),s.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=n(3750);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=n(6110);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}})},6657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class s extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function i(e,...t){const n=[e[0]];let r=0;for(;r<t.length;)l(n,t[r]),n.push(e[++r]);return new s(n)}t._Code=s,t.nil=new s(""),t._=i;const o=new s("+");function a(e,...t){const n=[d(e[0])];let r=0;for(;r<t.length;)n.push(o),l(n,t[r]),n.push(o,d(e[++r]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new s(n)}function l(e,t){var n;t instanceof s?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:d(Array.isArray(n)?n.join(","):n))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new s(d(e))},t.safeStringify=d,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new s(`.${e}`):i`[${e}]`},t.regexpCode=function(e){return new s(e.toString())}},6110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const r=n(6657),s=n(2715);var i=n(6657);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var o=n(2715);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),t.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const n=e?s.varKinds.var:this.varKind,r=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${r};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=D(this.rhs,e,t)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof r.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=D(this.rhs,e,t),this}get names(){return A(this.lhs instanceof r.Name?{}:{...this.lhs.names},this.rhs)}}class d extends c{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class m extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=D(this.code,e,t),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class f extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const s=n[r];s.optimizeNames(e,t)||(O(e,s.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>L(e,t.names)),{})}}class g extends f{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends f{}class y extends g{}y.kind="else";class _ extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new y(e):e}return t?!1===e?t instanceof _?t:t.nodes:this.nodes.length?this:new _(R(e),t instanceof _?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=D(this.condition,e,t),this}get names(){const e=super.names;return A(e,this.condition),this.else&&L(e,this.else.names),e}}_.kind="if";class b extends g{}b.kind="for";class w extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=D(this.iteration,e,t),this}get names(){return L(super.names,this.iteration.names)}}class x extends b{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:n,from:r,to:i}=this;return`for(${t} ${n}=${r}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){const e=A(super.names,this.from);return A(e,this.to)}}class M extends b{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=D(this.iterable,e,t),this}get names(){return L(super.names,this.iterable.names)}}class S extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}S.kind="func";class T extends f{render(e){return"return "+super.render(e)}}T.kind="return";class C extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&L(e,this.catch.names),this.finally&&L(e,this.finally.names),e}}class E extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}E.kind="catch";class k extends g{render(e){return"finally"+super.render(e)}}k.kind="finally";function L(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function A(e,t){return t instanceof r._CodeOrName?L(e,t.names):e}function D(e,t,n){return e instanceof r.Name?i(e):(s=e)instanceof r._Code&&s._items.some((e=>e instanceof r.Name&&1===t[e.str]&&void 0!==n[e.str]))?new r._Code(e._items.reduce(((e,t)=>(t instanceof r.Name&&(t=i(t)),t instanceof r._Code?e.push(...t._items):e.push(t),e)),[])):e;var s;function i(e){const r=n[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function O(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function R(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:r._`!${z(e)}`}t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const s=this._scope.toName(t);return void 0!==n&&r&&(this._constants[s.str]=n),this._leafNode(new l(e,s,n)),s}const(e,t,n){return this._def(s.varKinds.const,e,t,n)}let(e,t,n){return this._def(s.varKinds.let,e,t,n)}var(e,t,n){return this._def(s.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,n){return this._leafNode(new d(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==r.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[n,s]of e)t.length>1&&t.push(","),t.push(n),(n!==s||this.opts.es5)&&(t.push(":"),(0,r.addCodeArg)(t,s));return t.push("}"),new r._Code(t)}if(e,t,n){if(this._blockNode(new _(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new _(e))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(_,y)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new w(e),t)}forRange(e,t,n,r,i=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const o=this._scope.toName(e);return this._for(new x(i,o,t,n),(()=>r(o)))}forOf(e,t,n,i=s.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=t instanceof r.Name?t:this.var("_arr",t);return this.forRange("_i",0,r._`${e}.length`,(t=>{this.var(o,r._`${e}[${t}]`),n(o)}))}return this._for(new M("of",i,o,t),(()=>n(o)))}forIn(e,t,n,i=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,r._`Object.keys(${t})`,n);const o=this._scope.toName(e);return this._for(new M("in",i,o,t),(()=>n(o)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new T;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new C;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new E(e),t(e)}return n&&(this._currNode=r.finally=new k,this.code(n)),this._endBlockNode(E,k)}throw(e){return this._leafNode(new m(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=r.nil,n,s){return this._blockNode(new S(e,t,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=R;const P=I(t.operators.AND);t.and=function(...e){return e.reduce(P)};const N=I(t.operators.OR);function I(e){return(t,n)=>t===r.nil?n:n===r.nil?t:r._`${z(t)} ${e} ${z(n)}`}function z(e){return e instanceof r.Name?e:r._`(${e})`}t.or=function(...e){return e.reduce(N)}},2715:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const r=n(6657);class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var i;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(i=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof r.Name?e:this.name(e)}name(e){return new r.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=o;class a extends r.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=r._`.${new r.Name(t)}[${n}]`}}t.ValueScopeName=a;const l=r._`\n`;t.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:r.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:s}=r,i=null!==(n=t.key)&&void 0!==n?n:t.ref;let o=this._values[s];if(o){const e=o.get(i);if(e)return e}else o=this._values[s]=new Map;o.set(i,r);const a=this._scope[s]||(this._scope[s]=[]),l=a.length;return a[l]=t.ref,r.setValue(t,{property:s,itemIndex:l}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return r._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,n,o={},a){let l=r.nil;for(const c in e){const d=e[c];if(!d)continue;const u=o[c]=o[c]||new Map;d.forEach((e=>{if(u.has(e))return;u.set(e,i.Started);let o=n(e);if(o){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;l=r._`${l}${n} ${e} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(e)))throw new s(e);l=r._`${l}${o}${this.opts._n}`}u.set(e,i.Completed)}))}return l}}},6257:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const r=n(6110),s=n(530),i=n(7748);function o(e,t){const n=e.const("err",t);e.if(r._`${i.default.vErrors} === null`,(()=>e.assign(i.default.vErrors,r._`[${n}]`)),r._`${i.default.vErrors}.push(${n})`),e.code(r._`${i.default.errors}++`)}function a(e,t){const{gen:n,validateName:s,schemaEnv:i}=e;i.$async?n.throw(r._`new ${e.ValidationError}(${t})`):(n.assign(r._`${s}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>r.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?r.str`"${e}" keyword must be ${t} ($data)`:r.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,s,i){const{it:l}=e,{gen:d,compositeRule:u,allErrors:h}=l,m=c(e,n,s);(null!=i?i:u||h)?o(d,m):a(l,r._`[${m}]`)},t.reportExtraError=function(e,n=t.keywordError,r){const{it:s}=e,{gen:l,compositeRule:d,allErrors:u}=s;o(l,c(e,n,r)),d||u||a(s,i.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if(r._`${i.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(r._`${i.default.vErrors}.length`,t)),(()=>e.assign(i.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:s,errsCount:o,it:a}){if(void 0===o)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",o,i.default.errors,(o=>{e.const(l,r._`${i.default.vErrors}[${o}]`),e.if(r._`${l}.instancePath === undefined`,(()=>e.assign(r._`${l}.instancePath`,(0,r.strConcat)(i.default.instancePath,a.errorPath)))),e.assign(r._`${l}.schemaPath`,r.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(r._`${l}.schema`,n),e.assign(r._`${l}.data`,s))}))};const l={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function c(e,t,n){const{createErrors:s}=e.it;return!1===s?r._`{}`:function(e,t,n={}){const{gen:s,it:o}=e,a=[d(o,n),u(e,n)];return function(e,{params:t,message:n},s){const{keyword:o,data:a,schemaValue:c,it:d}=e,{opts:u,propertyName:h,topSchemaRef:m,schemaPath:p}=d;s.push([l.keyword,o],[l.params,"function"==typeof t?t(e):t||r._`{}`]),u.messages&&s.push([l.message,"function"==typeof n?n(e):n]);u.verbose&&s.push([l.schema,c],[l.parentSchema,r._`${m}${p}`],[i.default.data,a]);h&&s.push([l.propertyName,h])}(e,t,a),s.object(...a)}(e,t,n)}function d({errorPath:e},{instancePath:t}){const n=t?r.str`${e}${(0,s.getErrorPath)(t,s.Type.Str)}`:e;return[i.default.instancePath,(0,r.strConcat)(i.default.instancePath,n)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:i}){let o=i?t:r.str`${t}/${e}`;return n&&(o=r.str`${o}${(0,s.getErrorPath)(n,s.Type.Str)}`),[l.schemaPath,o]}},9336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const r=n(6110),s=n(7939),i=n(7748),o=n(6184),a=n(530),l=n(3750),c=n(5858);class d{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,o.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function u(e){const t=m.call(this,e);if(t)return t;const n=(0,o.getFullPath)(e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:d}=this.opts,u=new r.CodeGen(this.scope,{es5:a,lines:c,ownProperties:d});let h;e.$async&&(h=u.scopeValue("Error",{ref:s.default,code:r._`require("ajv/dist/runtime/validation_error").default`}));const p=u.scopeName("validate");e.validateName=p;const f={gen:u,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[r.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,r.stringify)(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:h,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:r.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:r._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,l.validateFunctionCode)(f),u.optimize(this.opts.code.optimize);const t=u.toString();g=`${u.scopeRefs(i.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${i.default.self}`,`${i.default.scope}`,g)(this,this.scope.get());if(this.scope.value(p,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:p,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=f;n.evaluated={props:e instanceof r.Name?void 0:e,items:t instanceof r.Name?void 0:t,dynamicProps:e instanceof r.Name,dynamicItems:t instanceof r.Name},n.source&&(n.source.evaluated=(0,r.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return(0,o.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:u.call(this,e)}function m(e){for(const r of this._compilations)if(n=e,(t=r).schema===n.schema&&t.root===n.root&&t.baseId===n.baseId)return r;var t,n}function p(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||f.call(this,e,t)}function f(e,t){const n=c.parse(t),r=(0,o._getFullPath)(n);let s=(0,o.getFullPath)(e.baseId);if(Object.keys(e.schema).length>0&&r===s)return v.call(this,n,e);const i=(0,o.normalizeId)(r),a=this.refs[i]||this.schemas[i];if("string"==typeof a){const t=f.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return v.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||u.call(this,a),i===(0,o.normalizeId)(t)){const{schema:t}=a,{schemaId:n}=this.opts,r=t[n];return r&&(s=(0,o.resolveUrl)(s,r)),new d({schema:t,schemaId:n,root:e,baseId:s})}return v.call(this,n,a)}}t.SchemaEnv=d,t.compileSchema=u,t.resolveRef=function(e,t,n){var r;n=(0,o.resolveUrl)(t,n);const s=e.refs[n];if(s)return s;let i=p.call(this,e,n);if(void 0===i){const s=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:o}=this.opts;s&&(i=new d({schema:s,schemaId:o,root:e,baseId:t}))}return void 0!==i?e.refs[n]=h.call(this,i):void 0},t.getCompilingSchema=m,t.resolveSchema=f;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(e,{baseId:t,schema:n,root:r}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,a.unescapeFragment)(r)];if(void 0===e)return;const s="object"==typeof(n=e)&&n[this.opts.schemaId];!g.has(r)&&s&&(t=(0,o.resolveUrl)(t,s))}let i;if("boolean"!=typeof n&&n.$ref&&!(0,a.schemaHasRulesButRef)(n,this.RULES)){const e=(0,o.resolveUrl)(t,n.$ref);i=f.call(this,r,e)}const{schemaId:l}=this.opts;return i=i||new d({schema:n,schemaId:l,root:r,baseId:t}),i.schema!==i.root.schema?i:void 0}},7748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s={data:new r.Name("data"),valCxt:new r.Name("valCxt"),instancePath:new r.Name("instancePath"),parentData:new r.Name("parentData"),parentDataProperty:new r.Name("parentDataProperty"),rootData:new r.Name("rootData"),dynamicAnchors:new r.Name("dynamicAnchors"),vErrors:new r.Name("vErrors"),errors:new r.Name("errors"),this:new r.Name("this"),self:new r.Name("self"),scope:new r.Name("scope"),json:new r.Name("json"),jsonPos:new r.Name("jsonPos"),jsonLen:new r.Name("jsonLen"),jsonPart:new r.Name("jsonPart")};t.default=s},3482:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6184);class s extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=(0,r.resolveUrl)(e,t),this.missingSchema=(0,r.normalizeId)((0,r.getFullPath)(this.missingRef))}}t.default=s},6184:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const r=n(530),s=n(8926),i=n(8125),o=n(5858),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&d(e)<=t)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(l.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function d(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&(0,r.eachItem)(e[n],(e=>t+=d(e))),t===1/0))return 1/0}return t}function u(e="",t){!1!==t&&(e=p(e));return h(o.parse(e))}function h(e){return o.serialize(e).split("#")[0]+"#"}t.getFullPath=u,t._getFullPath=h;const m=/#\/?$/;function p(e){return e?e.replace(m,""):""}t.normalizeId=p,t.resolveUrl=function(e,t){return t=p(t),o.resolve(e,t)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n}=this.opts,r=p(e[n]||t),a={"":r},l=u(r,!1),c={},d=new Set;return i(e,{allKeys:!0},((e,t,r,s)=>{if(void 0===s)return;const i=l+t;let u=a[s];function g(t){if(t=p(u?o.resolve(u,t):t),d.has(t))throw m(t);d.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?h(e,n.schema,t):t!==p(i)&&("#"===t[0]?(h(e,c[t],t),c[t]=e):this.refs[t]=i),t}function v(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);g.call(this,`#${e}`)}}"string"==typeof e[n]&&(u=g.call(this,e[n])),v.call(this,e.$anchor),v.call(this,e.$dynamicAnchor),a[t]=u})),c;function h(e,t,n){if(void 0!==t&&!s(e,t))throw m(n)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},6754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const r=n(6110),s=n(6657);function i(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const s=r.RULES.keywords;for(const n in t)s[n]||p(e,`unknown keyword: "${n}"`)}function o(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:s}){return(i,o,a,l)=>{const c=void 0===a?o:a instanceof r.Name?(o instanceof r.Name?e(i,o,a):t(i,o,a),a):o instanceof r.Name?(t(i,a,o),o):n(o,a);return l!==r.Name||c instanceof r.Name?c:s(i,c)}}function d(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",r._`{}`);return void 0!==t&&u(e,n,t),n}function u(e,t,n){Object.keys(n).forEach((n=>e.assign(r._`${t}${(0,r.getProperty)(n)}`,!0)))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(i(e,t),!o(t,e.self.RULES.all))},t.checkUnknownRules=i,t.schemaHasRules=o,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,s,i){if(!i){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return r._`${n}`}return r._`${e}${t}${(0,r.getProperty)(s)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>{e.if(r._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,r._`${n} || {}`).code(r._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,r._`${n} || {}`),u(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:c({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,r._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>e.assign(n,!0===t||r._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=u;const h={};var m;function p(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new s._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(m=t.Type||(t.Type={})),t.getErrorPath=function(e,t,n){if(e instanceof r.Name){const s=t===m.Num;return n?s?r._`"[" + ${e} + "]"`:r._`"['" + ${e} + "']"`:s?r._`"/" + ${e}`:r._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,r.getProperty)(e).toString():"/"+a(e)},t.checkStrictMode=p},7177:(e,t)=>{"use strict";function n(e,t){return t.rules.some((t=>r(e,t)))}function r(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},r){const s=t.RULES.types[r];return s&&!0!==s&&n(e,s)},t.shouldUseGroup=n,t.shouldUseRule=r},2971:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const r=n(6257),s=n(6110),i=n(7748),o={message:"boolean schema is false"};function a(e,t){const{gen:n,data:s}=e,i={gen:n,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,r.reportError)(i,o,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(i.default.data):(t.assign(s._`${r}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),a(e)):n.var(t,!0)}},7349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const r=n(6754),s=n(7177),i=n(6257),o=n(6110),a=n(530);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(r.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:i}=e,a=function(e,t){return t?e.filter((e=>d.has(e)||"array"===t&&"array"===e)):[]}(t,i.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(c){const s=h(t,r,i.strictNumbers,l.Wrong);n.if(s,(()=>{a.length?function(e,t,n){const{gen:r,data:s,opts:i}=e,a=r.let("dataType",o._`typeof ${s}`),l=r.let("coerced",o._`undefined`);"array"===i.coerceTypes&&r.if(o._`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,(()=>r.assign(s,o._`${s}[0]`).assign(a,o._`typeof ${s}`).if(h(t,s,i.strictNumbers),(()=>r.assign(l,s)))));r.if(o._`${l} !== undefined`);for(const e of n)(d.has(e)||"array"===e&&"array"===i.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void r.elseIf(o._`${a} == "number" || ${a} == "boolean"`).assign(l,o._`"" + ${s}`).elseIf(o._`${s} === null`).assign(l,o._`""`);case"number":return void r.elseIf(o._`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(l,o._`+${s}`);case"integer":return void r.elseIf(o._`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(l,o._`+${s}`);case"boolean":return void r.elseIf(o._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(l,!1).elseIf(o._`${s} === "true" || ${s} === 1`).assign(l,!0);case"null":return r.elseIf(o._`${s} === "" || ${s} === 0 || ${s} === false`),void r.assign(l,null);case"array":r.elseIf(o._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(l,o._`[${s}]`)}}r.else(),p(e),r.endIf(),r.if(o._`${l} !== undefined`,(()=>{r.assign(s,l),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(o._`${t} !== undefined`,(()=>e.assign(o._`${t}[${n}]`,r)))}(e,l)}))}(e,t,a):p(e)}))}return c};const d=new Set(["string","number","integer","boolean","null"]);function u(e,t,n,r=l.Correct){const s=r===l.Correct?o.operators.EQ:o.operators.NEQ;let i;switch(e){case"null":return o._`${t} ${s} null`;case"array":i=o._`Array.isArray(${t})`;break;case"object":i=o._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a(o._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return o._`typeof ${t} ${s} ${e}`}return r===l.Correct?i:(0,o.not)(i);function a(e=o.nil){return(0,o.and)(o._`typeof ${t} == "number"`,e,n?o._`isFinite(${t})`:o.nil)}}function h(e,t,n,r){if(1===e.length)return u(e[0],t,n,r);let s;const i=(0,a.toHash)(e);if(i.array&&i.object){const e=o._`typeof ${t} != "object"`;s=i.null?e:o._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else s=o.nil;i.number&&delete i.integer;for(const e in i)s=(0,o.and)(s,u(e,t,n,r));return s}t.checkDataType=u,t.checkDataTypes=h;const m={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?o._`{type: ${e}}`:o._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:n,schema:r}=e,s=(0,a.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:e}}(e);(0,i.reportError)(t,m)}t.reportTypeError=p},5944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const r=n(6110),s=n(530);function i(e,t,n){const{gen:i,compositeRule:o,data:a,opts:l}=e;if(void 0===n)return;const c=r._`${a}${(0,r.getProperty)(t)}`;if(o)return void(0,s.checkStrictMode)(e,`default is ignored for: ${c}`);let d=r._`${c} === undefined`;"empty"===l.useDefaults&&(d=r._`${d} || ${c} === null || ${c} === ""`),i.if(d,r._`${c} = ${(0,r.stringify)(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)i(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach(((t,n)=>i(e,n,t.default)))}},3750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const r=n(2971),s=n(7349),i=n(7177),o=n(7349),a=n(5944),l=n(2e3),c=n(5678),d=n(6110),u=n(7748),h=n(6184),m=n(530),p=n(6257);function f({gen:e,validateName:t,schema:n,schemaEnv:r,opts:s},i){s.code.es5?e.func(t,d._`${u.default.data}, ${u.default.valCxt}`,r.$async,(()=>{e.code(d._`"use strict"; ${g(n,s)}`),function(e,t){e.if(u.default.valCxt,(()=>{e.var(u.default.instancePath,d._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,d._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,d._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,d._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`${u.default.valCxt}.${u.default.dynamicAnchors}`)}),(()=>{e.var(u.default.instancePath,d._`""`),e.var(u.default.parentData,d._`undefined`),e.var(u.default.parentDataProperty,d._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`{}`)}))}(e,s),e.code(i)})):e.func(t,d._`${u.default.data}, ${function(e){return d._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?d._`, ${u.default.dynamicAnchors}={}`:d.nil}}={}`}(s)}`,r.$async,(()=>e.code(g(n,s)).code(i)))}function g(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?d._`/*# sourceURL=${n} */`:d.nil}function v(e,t){_(e)&&(b(e),y(e))?function(e,t){const{schema:n,gen:r,opts:s}=e;s.$comment&&n.$comment&&x(e);(function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const i=r.const("_errs",u.default.errors);w(e,i),r.var(t,d._`${i} === ${u.default.errors}`)}(e,t):(0,r.boolOrEmptySchema)(e,t)}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function _(e){return"boolean"!=typeof e.schema}function b(e){(0,m.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:s}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function w(e,t){if(e.opts.jtd)return M(e,[],!1,t);const n=(0,s.getSchemaTypes)(e.schema);M(e,n,!(0,s.coerceAndCheckDataType)(e,n),t)}function x({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(!0===s.$comment)e.code(d._`${u.default.self}.logger.log(${i})`);else if("function"==typeof s.$comment){const n=d.str`${r}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(d._`${u.default.self}.opts.$comment(${i}, ${n}, ${s}.schema)`)}}function M(e,t,n,r){const{gen:s,schema:a,data:l,allErrors:c,opts:h,self:p}=e,{RULES:f}=p;function g(m){(0,i.shouldUseGroup)(a,m)&&(m.type?(s.if((0,o.checkDataType)(m.type,l,h.strictNumbers)),S(e,m),1===t.length&&t[0]===m.type&&n&&(s.else(),(0,o.reportTypeError)(e)),s.endIf()):S(e,m),c||s.if(d._`${u.default.errors} === ${r||0}`))}!a.$ref||!h.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(a,f)?(h.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{C(e.dataTypes,t)||E(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>C(t,e)))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&E(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const n=e.self.RULES.all;for(const r in n){const s=n[r];if("object"==typeof s&&(0,i.shouldUseRule)(e.schema,s)){const{type:n}=s.definition;n.length&&!n.some((e=>T(t,e)))&&E(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes)}(e,t),s.block((()=>{for(const e of f.rules)g(e);g(f.post)}))):s.block((()=>L(e,"$ref",f.all.$ref.definition)))}function S(e,t){const{gen:n,schema:r,opts:{useDefaults:s}}=e;s&&(0,a.assignDefaults)(e,t.type),n.block((()=>{for(const n of t.rules)(0,i.shouldUseRule)(r,n)&&L(e,n.keyword,n.definition,t.type)}))}function T(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function C(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function E(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,m.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){_(e)&&(b(e),y(e))?function(e){const{schema:t,opts:n,gen:r}=e;f(e,(()=>{n.$comment&&t.$comment&&x(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,m.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(u.default.vErrors,null),r.let(u.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",d._`${n}.evaluated`),t.if(d._`${e.evaluated}.dynamicProps`,(()=>t.assign(d._`${e.evaluated}.props`,d._`undefined`))),t.if(d._`${e.evaluated}.dynamicItems`,(()=>t.assign(d._`${e.evaluated}.items`,d._`undefined`)))}(e),w(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=e;n.$async?t.if(d._`${u.default.errors} === 0`,(()=>t.return(u.default.data)),(()=>t.throw(d._`new ${s}(${u.default.vErrors})`))):(t.assign(d._`${r}.errors`,u.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof d.Name&&e.assign(d._`${t}.props`,n);r instanceof d.Name&&e.assign(d._`${t}.items`,r)}(e),t.return(d._`${u.default.errors} === 0`))}(e)}))}(e):f(e,(()=>(0,r.topBoolOrEmptySchema)(e)))};class k{constructor(e,t,n){if((0,l.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",O(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,n){this.failResult((0,d.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,d.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(d._`${t} !== undefined && (${(0,d.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=d.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=d.nil,t=d.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:s,def:i}=this;n.if((0,d.or)(d._`${r} === undefined`,t)),e!==d.nil&&n.assign(e,!0),(s.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==d.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:s}=this;return(0,d.or)(function(){if(n.length){if(!(t instanceof d.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return d._`${(0,o.checkDataTypes)(e,t,s.opts.strictNumbers,o.DataType.Wrong)}`}return d.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return d._`!${n}(${t})`}return d.nil}())}subschema(e,t){const n=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(n,this.it,e),(0,c.extendSubschemaMode)(n,e);const r={...this.it,...n,items:void 0,props:void 0};return v(r,t),r}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=m.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=m.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,(()=>this.mergeEvaluated(e,d.Name))),!0}}function L(e,t,n,r){const s=new k(e,n,t);"code"in n?n.code(s,r):s.$data&&n.validate?(0,l.funcKeywordCode)(s,n):"macro"in n?(0,l.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,l.funcKeywordCode)(s,n)}t.KeywordCxt=k;const A=/^\/(?:[^~]|~0|~1)*$/,D=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let s,i;if(""===e)return u.default.rootData;if("/"===e[0]){if(!A.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=u.default.rootData}else{const o=D.exec(e);if(!o)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+o[1];if(s=o[2],"#"===s){if(a>=t)throw new Error(l("property/index",a));return r[t-a]}if(a>t)throw new Error(l("data",a));if(i=n[t-a],!s)return i}let o=i;const a=s.split("/");for(const e of a)e&&(i=d._`${i}${(0,d.getProperty)((0,m.unescapeJsonPointer)(e))}`,o=d._`${o} && ${i}`);return o;function l(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=O},2e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const r=n(6110),s=n(7748),i=n(7111),o=n(6257);function a(e){const{gen:t,data:n,it:s}=e;t.if(s.parentData,(()=>t.assign(n,r._`${s.parentData}[${s.parentDataProperty}]`)))}function l(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,r.stringify)(n)})}t.macroKeywordCode=function(e,t){const{gen:n,keyword:s,schema:i,parentSchema:o,it:a}=e,c=t.macro.call(a.self,i,o,a),d=l(n,s,c);!1!==a.opts.validateSchema&&a.self.validateSchema(c,!0);const u=n.name("valid");e.subschema({schema:c,schemaPath:r.nil,errSchemaPath:`${a.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},u),e.pass(u,(()=>e.error(!0)))},t.funcKeywordCode=function(e,t){var n;const{gen:c,keyword:d,schema:u,parentSchema:h,$data:m,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const f=!m&&t.compile?t.compile.call(p.self,u,h,p):t.validate,g=l(c,d,f),v=c.let("valid");function y(n=(t.async?r._`await `:r.nil)){const o=p.opts.passContext?s.default.this:s.default.self,a=!("compile"in t&&!m||!1===t.schema);c.assign(v,r._`${n}${(0,i.callValidateCode)(e,g,o,a)}`,t.modifying)}function _(e){var n;c.if((0,r.not)(null!==(n=t.valid)&&void 0!==n?n:v),e)}e.block$data(v,(function(){if(!1===t.errors)y(),t.modifying&&a(e),_((()=>e.error()));else{const n=t.async?function(){const e=c.let("ruleErrs",null);return c.try((()=>y(r._`await `)),(t=>c.assign(v,!1).if(r._`${t} instanceof ${p.ValidationError}`,(()=>c.assign(e,r._`${t}.errors`)),(()=>c.throw(t))))),e}():function(){const e=r._`${g}.errors`;return c.assign(e,null),y(r.nil),e}();t.modifying&&a(e),_((()=>function(e,t){const{gen:n}=e;n.if(r._`Array.isArray(${t})`,(()=>{n.assign(s.default.vErrors,r._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`).assign(s.default.errors,r._`${s.default.vErrors}.length`),(0,o.extendErrors)(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:v)},t.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))},t.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(null==o?void 0:o.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema){if(!s.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}}},5678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const r=n(6110),s=n(530);t.getSubschema=function(e,{keyword:t,schemaProp:n,schema:i,schemaPath:o,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===n?{schema:i,schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[n],schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}${(0,r.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,s.escapeFragment)(n)}`}}if(void 0!==i){if(void 0===o||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:i,data:o,dataTypes:a,propertyName:l}){if(void 0!==o&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==n){const{errorPath:o,dataPathArr:a,opts:l}=t;d(c.let("data",r._`${t.data}${(0,r.getProperty)(n)}`,!0)),e.errorPath=r.str`${o}${(0,s.getErrorPath)(n,i,l.jsPropertySyntax)}`,e.parentDataProperty=r._`${n}`,e.dataPathArr=[...a,e.parentDataProperty]}if(void 0!==o){d(o instanceof r.Name?o:c.let("data",o,!0)),void 0!==l&&(e.propertyName=l)}function d(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){void 0!==r&&(e.compositeRule=r),void 0!==s&&(e.createErrors=s),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=n}},2206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var r=n(3750);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}});var s=n(6110);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const i=n(7939),o=n(3482),a=n(6754),l=n(9336),c=n(6110),d=n(6184),u=n(7349),h=n(530),m=n(338),p=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function y(e){var t,n,r,s,i,o,a,l,c,d,u,h,m,p,f,g,v,y,_,b,w,x;const M=e.strict,S=null===(t=e.code)||void 0===t?void 0:t.optimize,T=!0===S||void 0===S?1:S||0;return{strictSchema:null===(r=null!==(n=e.strictSchema)&&void 0!==n?n:M)||void 0===r||r,strictNumbers:null===(i=null!==(s=e.strictNumbers)&&void 0!==s?s:M)||void 0===i||i,strictTypes:null!==(a=null!==(o=e.strictTypes)&&void 0!==o?o:M)&&void 0!==a?a:"log",strictTuples:null!==(c=null!==(l=e.strictTuples)&&void 0!==l?l:M)&&void 0!==c?c:"log",strictRequired:null!==(u=null!==(d=e.strictRequired)&&void 0!==d?d:M)&&void 0!==u&&u,code:e.code?{...e.code,optimize:T}:{optimize:T},loopRequired:null!==(h=e.loopRequired)&&void 0!==h?h:200,loopEnum:null!==(m=e.loopEnum)&&void 0!==m?m:200,meta:null===(p=e.meta)||void 0===p||p,messages:null===(f=e.messages)||void 0===f||f,inlineRefs:null===(g=e.inlineRefs)||void 0===g||g,schemaId:null!==(v=e.schemaId)&&void 0!==v?v:"$id",addUsedSchema:null===(y=e.addUsedSchema)||void 0===y||y,validateSchema:null===(_=e.validateSchema)||void 0===_||_,validateFormats:null===(b=e.validateFormats)||void 0===b||b,unicodeRegExp:null===(w=e.unicodeRegExp)||void 0===w||w,int32range:null===(x=e.int32range)||void 0===x||x}}class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...y(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:f,es5:t,lines:n}),this.logger=function(e){if(!1===e)return C;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),b.call(this,g,e,"NOT SUPPORTED"),b.call(this,v,e,"DEPRECATED","warn"),this._metaOpts=T.call(this),e.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&S.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),x.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=m;"id"===n&&(r={...m},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await s.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||i.call(this,n)}async function s(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof o.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),i.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await s.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,d.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=w.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new l.SchemaEnv({schema:{},schemaId:n});if(t=l.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=w.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,d.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(k.call(this,n,t),!t)return(0,h.eachItem)(n,(e=>L.call(this,e))),this;D.call(this,t);const r={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(n,0===r.type.length?e=>L.call(this,e,r):e=>r.type.forEach((t=>L.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,i=s[e];r&&i&&(s[e]=R(i))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,s=this.opts.addUsedSchema){let i;const{schemaId:o}=this.opts;if("object"==typeof e)i=e[o];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;n=(0,d.normalizeId)(i||n);const c=d.getSchemaRefs.call(this,e,n);return a=new l.SchemaEnv({schema:e,schemaId:o,meta:t,baseId:n,localRefs:c}),this._cache.set(a.schema,a),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=a),r&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function b(e,t,n,r="error"){for(const s in e){const i=s;i in t&&this.logger[r](`${n}: option ${s}. ${e[i]}`)}}function w(e){return e=(0,d.normalizeId)(e),this.schemas[e]||this.refs[e]}function x(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function M(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function S(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function T(){const e={...this.opts};for(const t of p)delete e[t];return e}t.default=_,_.ValidationError=i.default,_.MissingRefError=o.default;const C={log(){},warn(){},error(){}};const E=/^[a-z_$][a-z0-9_$:-]*$/i;function k(e,t){const{RULES:n}=this;if((0,h.eachItem)(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!E.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function L(e,t,n){var r;const s=null==t?void 0:t.post;if(n&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let o=s?i.post:i.rules.find((({type:e})=>e===n));if(o||(o={type:n,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?A.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function A(e,t,n){const r=e.rules.findIndex((e=>e.keyword===n));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function D(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=R(t)),e.validateSchema=this.compile(t,!0))}const O={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function R(e){return{anyOf:[e,O]}}},8062:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8926);r.code='require("ajv/dist/runtime/equal").default',t.default=r},5842:(e,t)=>{"use strict";function n(e){const t=e.length;let n,r=0,s=0;for(;s<t;)r++,n=e.charCodeAt(s++),n>=55296&&n<=56319&&s<t&&(n=e.charCodeAt(s),56320==(64512&n)&&s++);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},7939:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=n},1600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const r=n(6110),s=n(530),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?o(e,r):(0,s.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function o(e,t){const{gen:n,schema:i,data:o,keyword:a,it:l}=e;l.items=!0;const c=n.const("len",r._`${o}.length`);if(!1===i)e.setParams({len:t.length}),e.pass(r._`${c} <= ${t.length}`);else if("object"==typeof i&&!(0,s.alwaysValidSchema)(l,i)){const i=n.var("valid",r._`${c} <= ${t.length}`);n.if((0,r.not)(i),(()=>function(i){n.forRange("i",t.length,c,(t=>{e.subschema({keyword:a,dataProp:t,dataPropType:s.Type.Num},i),l.allErrors||n.if((0,r.not)(i),(()=>n.break()))}))}(i))),e.ok(i)}}t.validateAdditionalItems=o,t.default=i},8183:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7111),s=n(6110),i=n(7748),o=n(530),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>s._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,errsCount:c,it:d}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=d;if(d.props=!0,"all"!==h.removeAdditional&&(0,o.alwaysValidSchema)(d,n))return;const m=(0,r.allSchemaProperties)(a.properties),p=(0,r.allSchemaProperties)(a.patternProperties);function f(e){t.code(s._`delete ${l}[${e}]`)}function g(r){if("all"===h.removeAdditional||h.removeAdditional&&!1===n)f(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(u||t.break());if("object"==typeof n&&!(0,o.alwaysValidSchema)(d,n)){const n=t.name("valid");"failing"===h.removeAdditional?(v(r,n,!1),t.if((0,s.not)(n),(()=>{e.reset(),f(r)}))):(v(r,n),u||t.if((0,s.not)(n),(()=>t.break())))}}}function v(t,n,r){const s={keyword:"additionalProperties",dataProp:t,dataPropType:o.Type.Str};!1===r&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,n)}t.forIn("key",l,(n=>{m.length||p.length?t.if(function(n){let i;if(m.length>8){const e=(0,o.schemaRefOrVal)(d,a.properties,"properties");i=(0,r.isOwnProperty)(t,e,n)}else i=m.length?(0,s.or)(...m.map((e=>s._`${n} === ${e}`))):s.nil;return p.length&&(i=(0,s.or)(i,...p.map((t=>s._`${(0,r.usePattern)(e,t)}.test(${n})`)))),(0,s.not)(i)}(n),(()=>g(n))):g(n)})),e.ok(s._`${c} === ${i.default.errors}`)}};t.default=a},8302:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(530),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach(((t,n)=>{if((0,r.alwaysValidSchema)(s,t))return;const o=e.subschema({keyword:"allOf",schemaProp:n},i);e.ok(i),e.mergeEvaluated(o)}))}};t.default=s},120:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(7111).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=r},7458:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?r.str`must contain at least ${e} valid item(s)`:r.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?r._`{minContains: ${e}}`:r._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:i,data:o,it:a}=e;let l,c;const{minContains:d,maxContains:u}=i;a.opts.next?(l=void 0===d?1:d,c=u):l=1;const h=t.const("len",r._`${o}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,s.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,s.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,s.alwaysValidSchema)(a,n)){let t=r._`${h} >= ${l}`;return void 0!==c&&(t=r._`${t} && ${h} <= ${c}`),void e.pass(t)}a.items=!0;const m=t.name("valid");function p(){const e=t.name("_valid"),n=t.let("count",0);f(e,(()=>t.if(e,(()=>function(e){t.code(r._`${e}++`),void 0===c?t.if(r._`${e} >= ${l}`,(()=>t.assign(m,!0).break())):(t.if(r._`${e} > ${c}`,(()=>t.assign(m,!1).break())),1===l?t.assign(m,!0):t.if(r._`${e} >= ${l}`,(()=>t.assign(m,!0))))}(n)))))}function f(n,r){t.forRange("i",0,h,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:s.Type.Num,compositeRule:!0},n),r()}))}void 0===c&&1===l?f(m,(()=>t.if(m,(()=>t.break())))):(t.let(m,!1),0===l?t.if(r._`${o}.length > 0`,p,(()=>t.assign(m,!0))):p()),e.result(m,(()=>e.reset()))}};t.default=i},2790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const r=n(6110),s=n(530),i=n(7111);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const s=1===t?"property":"properties";return r.str`must have ${s} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:s}})=>r._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${n}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e){if("__proto__"===r)continue;(Array.isArray(e[r])?t:n)[r]=e[r]}return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:s,it:o}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const d=(0,i.propertyInData)(n,s,l,o.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),o.allErrors?n.if(d,(()=>{for(const t of c)(0,i.checkReportMissingProp)(e,t)})):(n.if(r._`${d} && (${(0,i.checkMissingProp)(e,c,a)})`),(0,i.reportMissingProp)(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:r,keyword:o,it:a}=e,l=n.name("valid");for(const c in t)(0,s.alwaysValidSchema)(a,t[c])||(n.if((0,i.propertyInData)(n,r,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:o,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=o},7498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>r.str`must match "${e.ifClause}" schema`,params:({params:e})=>r._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:i}=e;void 0===n.then&&void 0===n.else&&(0,s.checkStrictMode)(i,'"if" without "then" and "else" is ignored');const a=o(i,"then"),l=o(i,"else");if(!a&&!l)return;const c=t.let("valid",!0),d=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(t)}(),e.reset(),a&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(d,u("then",n),u("else",n))}else a?t.if(d,u("then")):t.if((0,r.not)(d),u("else"));function u(n,s){return()=>{const i=e.subschema({keyword:n},d);t.assign(c,d),e.mergeValidEvaluated(i,c),s?t.assign(s,r._`${n}`):e.setParams({ifClause:n})}}e.pass(c,(()=>e.error(!0)))}};function o(e,t){const n=e.schema[t];return void 0!==n&&!(0,s.alwaysValidSchema)(e,n)}t.default=i},3698:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1600),s=n(3609),i=n(8223),o=n(2490),a=n(7458),l=n(2790),c=n(3796),d=n(8183),u=n(1935),h=n(8289),m=n(2514),p=n(120),f=n(6328),g=n(8302),v=n(7498),y=n(6105);t.default=function(e=!1){const t=[m.default,p.default,f.default,g.default,v.default,y.default,c.default,d.default,l.default,u.default,h.default];return e?t.push(s.default,o.default):t.push(r.default,i.default),t.push(a.default),t}},8223:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const r=n(6110),s=n(530),i=n(7111),o={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return a(e,"additionalItems",t);n.items=!0,(0,s.alwaysValidSchema)(n,t)||e.ok((0,i.validateArray)(e))}};function a(e,t,n=e.schema){const{gen:i,parentSchema:o,data:a,keyword:l,it:c}=e;!function(e){const{opts:r,errSchemaPath:i}=c,o=n.length,a=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(r.strictTuples&&!a){const e=`"${l}" is ${o}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;(0,s.checkStrictMode)(c,e,r.strictTuples)}}(o),c.opts.unevaluated&&n.length&&!0!==c.items&&(c.items=s.mergeEvaluated.items(i,n.length,c.items));const d=i.name("valid"),u=i.const("len",r._`${a}.length`);n.forEach(((t,n)=>{(0,s.alwaysValidSchema)(c,t)||(i.if(r._`${u} > ${n}`,(()=>e.subschema({keyword:l,schemaProp:n,dataProp:n},d))),e.ok(d))}))}t.validateTuple=a,t.default=o},2490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i=n(7111),o=n(1600),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:a}=n;r.items=!0,(0,s.alwaysValidSchema)(r,t)||(a?(0,o.validateAdditionalItems)(e,a):e.ok((0,i.validateArray)(e)))}};t.default=a},2514:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(530),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:s}=e;if((0,r.alwaysValidSchema)(s,n))return void e.fail();const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};t.default=s},6328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>r._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:i,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(o.opts.discriminator&&i.discriminator)return;const a=n,l=t.let("valid",!1),c=t.let("passing",null),d=t.name("_valid");e.setParams({passing:c}),t.block((function(){a.forEach(((n,i)=>{let a;(0,s.alwaysValidSchema)(o,n)?t.var(d,!0):a=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},d),i>0&&t.if(r._`${d} && ${l}`).assign(l,!1).assign(c,r._`[${c}, ${i}]`).else(),t.if(d,(()=>{t.assign(l,!0),t.assign(c,i),a&&e.mergeEvaluated(a,r.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}};t.default=i},8289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7111),s=n(6110),i=n(530),o=n(530),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:a,parentSchema:l,it:c}=e,{opts:d}=c,u=(0,r.allSchemaProperties)(n),h=u.filter((e=>(0,i.alwaysValidSchema)(c,n[e])));if(0===u.length||h.length===u.length&&(!c.opts.unevaluated||!0===c.props))return;const m=d.strictSchema&&!d.allowMatchingProperties&&l.properties,p=t.name("valid");!0===c.props||c.props instanceof s.Name||(c.props=(0,o.evaluatedPropsToName)(t,c.props));const{props:f}=c;function g(e){for(const t in m)new RegExp(e).test(t)&&(0,i.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){t.forIn("key",a,(i=>{t.if(s._`${(0,r.usePattern)(e,n)}.test(${i})`,(()=>{const r=h.includes(n);r||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:i,dataPropType:o.Type.Str},p),c.opts.unevaluated&&!0!==f?t.assign(s._`${f}[${i}]`,!0):r||c.allErrors||t.if((0,s.not)(p),(()=>t.break()))}))}))}!function(){for(const e of u)m&&g(e),c.allErrors?v(e):(t.var(p,!0),v(e),t.if(p))}()}};t.default=a},3609:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8223),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,r.validateTuple)(e,"items")};t.default=s},1935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3750),s=n(7111),i=n(530),o=n(8183),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&o.default.code(new r.KeywordCxt(c,o.default,"additionalProperties"));const d=(0,s.allSchemaProperties)(n);for(const e of d)c.definedProperties.add(e);c.opts.unevaluated&&d.length&&!0!==c.props&&(c.props=i.mergeEvaluated.props(t,(0,i.toHash)(d),c.props));const u=d.filter((e=>!(0,i.alwaysValidSchema)(c,n[e])));if(0===u.length)return;const h=t.name("valid");for(const n of u)m(n)?p(n):(t.if((0,s.propertyInData)(t,l,n,c.opts.ownProperties)),p(n),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(h);function m(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},3796:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>r._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:i,it:o}=e;if((0,s.alwaysValidSchema)(o,n))return;const a=t.name("valid");t.forIn("key",i,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if((0,r.not)(a),(()=>{e.error(!0),o.allErrors||t.break()}))})),e.ok(a)}};t.default=i},6105:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(530),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,r.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};t.default=s},7111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const r=n(6110),s=n(530),i=n(7748);function o(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:r._`Object.prototype.hasOwnProperty`})}function a(e,t,n){return r._`${o(e)}.call(${t}, ${n})`}function l(e,t,n,s){const i=r._`${t}${(0,r.getProperty)(n)} === undefined`;return s?(0,r.or)(i,(0,r.not)(a(e,t,n))):i}function c(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:s,it:i}=e;n.if(l(n,s,t,i.opts.ownProperties),(()=>{e.setParams({missingProperty:r._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},s,i){return(0,r.or)(...s.map((s=>(0,r.and)(l(e,t,s,n.ownProperties),r._`${i} = ${s}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=o,t.isOwnProperty=a,t.propertyInData=function(e,t,n,s){const i=r._`${t}${(0,r.getProperty)(n)} !== undefined`;return s?r._`${i} && ${a(e,t,n)}`:i},t.noPropertyInData=l,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter((n=>!(0,s.alwaysValidSchema)(e,t[n])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:s,schemaPath:o,errorPath:a},it:l},c,d,u){const h=u?r._`${e}, ${t}, ${s}${o}`:t,m=[[i.default.instancePath,(0,r.strConcat)(i.default.instancePath,a)],[i.default.parentData,l.parentData],[i.default.parentDataProperty,l.parentDataProperty],[i.default.rootData,i.default.rootData]];l.opts.dynamicRef&&m.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);const p=r._`${h}, ${n.object(...m)}`;return d!==r.nil?r._`${c}.call(${d}, ${p})`:r._`${c}(${p})`},t.usePattern=function({gen:e,it:{opts:t}},n){const s=t.unicodeRegExp?"u":"";return e.scopeValue("pattern",{key:n,ref:new RegExp(n,s),code:r._`new RegExp(${n}, ${s})`})},t.validateArray=function(e){const{gen:t,data:n,keyword:i,it:o}=e,a=t.name("valid");if(o.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(o){const l=t.const("len",r._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:i,dataProp:n,dataPropType:s.Type.Num},a),t.if((0,r.not)(a),o)}))}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:i,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>(0,s.alwaysValidSchema)(o,e)))&&!o.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,s)=>{const o=e.subschema({keyword:i,schemaProp:s,compositeRule:!0},l);t.assign(a,r._`${a} || ${l}`);e.mergeValidEvaluated(o,l)||t.if((0,r.not)(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},4874:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},9730:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4874),s=n(5403),i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",r.default,s.default];t.default=i},5403:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const r=n(3482),s=n(7111),i=n(6110),o=n(7748),a=n(9336),l=n(530),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:s}=e,{baseId:o,schemaEnv:l,validateName:c,opts:h,self:m}=s,{root:p}=l;if(("#"===n||"#/"===n)&&o===p.baseId)return function(){if(l===p)return u(e,c,l,l.$async);const n=t.scopeValue("root",{ref:p});return u(e,i._`${n}.validate`,p,p.$async)}();const f=a.resolveRef.call(m,p,o,n);if(void 0===f)throw new r.default(o,n);return f instanceof a.SchemaEnv?function(t){const n=d(e,t);u(e,n,t,t.$async)}(f):function(r){const s=t.scopeValue("schema",!0===h.code.source?{ref:r,code:(0,i.stringify)(r)}:{ref:r}),o=t.name("valid"),a=e.subschema({schema:r,dataTypes:[],schemaPath:i.nil,topSchemaRef:s,errSchemaPath:n},o);e.mergeEvaluated(a),e.ok(o)}(f)}};function d(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):i._`${n.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,n,r){const{gen:a,it:c}=e,{allErrors:d,schemaEnv:u,opts:h}=c,m=h.passContext?o.default.this:i.nil;function p(e){const t=i._`${e}.errors`;a.assign(o.default.vErrors,i._`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`),a.assign(o.default.errors,i._`${o.default.vErrors}.length`)}function f(e){var t;if(!c.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(r&&!r.dynamicProps)void 0!==r.props&&(c.props=l.mergeEvaluated.props(a,r.props,c.props));else{const t=a.var("props",i._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,i.Name)}if(!0!==c.items)if(r&&!r.dynamicItems)void 0!==r.items&&(c.items=l.mergeEvaluated.items(a,r.items,c.items));else{const t=a.var("items",i._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,i.Name)}}r?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(i._`await ${(0,s.callValidateCode)(e,t,m)}`),f(t),d||a.assign(n,!0)}),(e=>{a.if(i._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),p(e),d||a.assign(n,!1)})),e.ok(n)}():e.result((0,s.callValidateCode)(e,t,m),(()=>f(t)),(()=>p(t)))}t.getValidate=d,t.callRef=u,t.default=c},3348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(2997),i={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>r._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:i,parentSchema:o,it:a}=e,{oneOf:l}=o;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const c=i.propertyName;if("string"!=typeof c)throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const d=t.let("valid",!1),u=t.const("tag",r._`${n}${(0,r.getProperty)(c)}`);function h(n){const s=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:n},s);return e.mergeEvaluated(i,r.Name),s}t.if(r._`typeof ${u} == "string"`,(()=>function(){const n=function(){var e;const t={},n=s(o);let r=!0;for(let t=0;t<l.length;t++){const o=l[t],a=null===(e=o.properties)||void 0===e?void 0:e[c];if("object"!=typeof a)throw new Error(`discriminator: oneOf schemas must have "properties/${c}"`);r=r&&(n||s(o)),i(a,t)}if(!r)throw new Error(`discriminator: "${c}" must be required`);return t;function s({required:e}){return Array.isArray(e)&&e.includes(c)}function i(e,t){if(e.const)a(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`);for(const n of e.enum)a(n,t)}}function a(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${c}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(r._`${u} === ${e}`),t.assign(d,h(n[e]));t.else(),e.error(!1,{discrError:s.DiscrError.Mapping,tag:u,tagName:c}),t.endIf()}()),(()=>e.error(!1,{discrError:s.DiscrError.Tag,tag:u,tagName:c}))),e.ok(d)}};t.default=i},2997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))},610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9730),s=n(6020),i=n(3698),o=n(5036),a=n(9275),l=[r.default,s.default,(0,i.default)(),o.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},8997:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match format "${e}"`,params:({schemaCode:e})=>r._`{format: ${e}}`},code(e,t){const{gen:n,data:s,$data:i,schema:o,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:h}=l;c.validateFormats&&(i?function(){const i=n.scopeValue("formats",{ref:h.formats,code:c.code.formats}),o=n.const("fDef",r._`${i}[${a}]`),l=n.let("fType"),d=n.let("format");n.if(r._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,(()=>n.assign(l,r._`${o}.type || "string"`).assign(d,r._`${o}.validate`)),(()=>n.assign(l,r._`"string"`).assign(d,o))),e.fail$data((0,r.or)(!1===c.strictSchema?r.nil:r._`${a} && !${d}`,function(){const e=u.$async?r._`(${o}.async ? await ${d}(${s}) : ${d}(${s}))`:r._`${d}(${s})`,n=r._`(typeof ${d} == "function" ? ${e} : ${d}.test(${s}))`;return r._`${d} && ${d} !== true && ${l} === ${t} && !${n}`}()))}():function(){const i=h.formats[o];if(!i)return void function(){if(!1===c.strictSchema)return void h.logger.warn(e());throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${d}"`}}();if(!0===i)return;const[a,l,m]=function(e){const t=e instanceof RegExp?(0,r.regexpCode)(e):c.code.formats?r._`${c.code.formats}${(0,r.getProperty)(o)}`:void 0,s=n.scopeValue("formats",{key:o,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,r._`${s}.validate`];return["string",e,s]}(i);a===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!u.$async)throw new Error("async format in sync schema");return r._`await ${m}(${s})`}return"function"==typeof l?r._`${m}(${s})`:r._`${m}.test(${s})`}())}())}};t.default=s},5036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=[n(8997).default];t.default=r},9275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},3103:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i=n(8062),o={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>r._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:o,schemaCode:a,schema:l}=e;o||l&&"object"==typeof l?e.fail$data(r._`!${(0,s.useFunc)(t,i.default)}(${n}, ${a})`):e.fail(r._`${l} !== ${n}`)}};t.default=o},3139:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i=n(8062),o={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>r._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:o,schema:a,schemaCode:l,it:c}=e;if(!o&&0===a.length)throw new Error("enum must have non-empty array");const d=a.length>=c.opts.loopEnum,u=(0,s.useFunc)(t,i.default);let h;if(d||o)h=t.let("valid"),e.block$data(h,(function(){t.assign(h,!1),t.forOf("v",l,(e=>t.if(r._`${u}(${n}, ${e})`,(()=>t.assign(h,!0).break()))))}));else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);h=(0,r.or)(...a.map(((t,s)=>function(e,t){const s=a[t];return"object"==typeof s&&null!==s?r._`${u}(${n}, ${e}[${t}])`:r._`${n} === ${s}`}(e,s))))}e.pass(h)}};t.default=o},6020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(897),s=n(5162),i=n(4905),o=n(2508),a=n(82),l=n(6846),c=n(7569),d=n(5640),u=n(3103),h=n(3139),m=[r.default,s.default,i.default,o.default,a.default,l.default,c.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=m},7569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s}=e,i="maxItems"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`${n}.length ${i} ${s}`)}};t.default=s},4905:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=n(530),i=n(5842),o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:o,it:a}=e,l="maxLength"===t?r.operators.GT:r.operators.LT,c=!1===a.opts.unicode?r._`${n}.length`:r._`${(0,s.useFunc)(e.gen,i.default)}(${n})`;e.fail$data(r._`${c} ${l} ${o}`)}};t.default=o},897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s=r.operators,i={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},o={message:({keyword:e,schemaCode:t})=>r.str`must be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${i[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:o,code(e){const{keyword:t,data:n,schemaCode:s}=e;e.fail$data(r._`${n} ${i[t].fail} ${s} || isNaN(${n})`)}};t.default=a},82:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s}=e,i="maxProperties"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`Object.keys(${n}).length ${i} ${s}`)}};t.default=s},5162:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6110),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>r.str`must be multiple of ${e}`,params:({schemaCode:e})=>r._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:s,it:i}=e,o=i.opts.multipleOfPrecision,a=t.let("res"),l=o?r._`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:r._`${a} !== parseInt(${a})`;e.fail$data(r._`(${s} === 0 || (${a} = ${n}/${s}, ${l}))`)}};t.default=s},2508:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7111),s=n(6110),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match pattern "${e}"`,params:({schemaCode:e})=>s._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:i,schemaCode:o,it:a}=e,l=a.opts.unicodeRegExp?"u":"",c=n?s._`(new RegExp(${o}, ${l}))`:(0,r.usePattern)(e,i);e.fail$data(s._`!${c}.test(${t})`)}};t.default=i},6846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7111),s=n(6110),i=n(530),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>s.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>s._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:o,data:a,$data:l,it:c}=e,{opts:d}=c;if(!l&&0===n.length)return;const u=n.length>=d.loopRequired;if(c.allErrors?function(){if(u||l)e.block$data(s.nil,h);else for(const t of n)(0,r.checkReportMissingProp)(e,t)}():function(){const i=t.let("missing");if(u||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,i){e.setParams({missingProperty:n}),t.forOf(n,o,(()=>{t.assign(i,(0,r.propertyInData)(t,a,n,d.ownProperties)),t.if((0,s.not)(i),(()=>{e.error(),t.break()}))}),s.nil)}(i,n))),e.ok(n)}else t.if((0,r.checkMissingProp)(e,n,i)),(0,r.reportMissingProp)(e,i),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!r.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,i.checkStrictMode)(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",o,(n=>{e.setParams({missingProperty:n}),t.if((0,r.noPropertyInData)(t,a,n,d.ownProperties),(()=>e.error()))}))}}};t.default=o},5640:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7349),s=n(6110),i=n(530),o=n(8062),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>s.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>s._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:a,schema:l,parentSchema:c,schemaCode:d,it:u}=e;if(!a&&!l)return;const h=t.let("valid"),m=c.items?(0,r.getSchemaTypes)(c.items):[];function p(i,o){const a=t.name("item"),l=(0,r.checkDataTypes)(m,a,u.opts.strictNumbers,r.DataType.Wrong),c=t.const("indices",s._`{}`);t.for(s._`;${i}--;`,(()=>{t.let(a,s._`${n}[${i}]`),t.if(l,s._`continue`),m.length>1&&t.if(s._`typeof ${a} == "string"`,s._`${a} += "_"`),t.if(s._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(o,s._`${c}[${a}]`),e.error(),t.assign(h,!1).break()})).code(s._`${c}[${a}] = ${i}`)}))}function f(r,a){const l=(0,i.useFunc)(t,o.default),c=t.name("outer");t.label(c).for(s._`;${r}--;`,(()=>t.for(s._`${a} = ${r}; ${a}--;`,(()=>t.if(s._`${l}(${n}[${r}], ${n}[${a}])`,(()=>{e.error(),t.assign(h,!1).break(c)}))))))}e.block$data(h,(function(){const r=t.let("i",s._`${n}.length`),i=t.let("j");e.setParams({i:r,j:i}),t.assign(h,!0),t.if(s._`${r} > 1`,(()=>(m.length>0&&!m.some((e=>"object"===e||"array"===e))?p:f)(r,i)))}),s._`${d} === false`),e.ok(h)}};t.default=a},9981:e=>{var t=Object.prototype.toString;e.exports=function(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===t.call(e.buffer)||Array.isArray(e)}},1512:e=>{e.exports=function(e,t){return"number"==typeof e?e:"number"==typeof t?t:0}},7086:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=l(e),o=i[0],a=i[1],c=new s(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),d=0,u=a>0?o-4:o;for(n=0;n<u;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[d++]=255&t);1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,s=r%3,i=[],o=16383,a=0,l=r-s;a<l;a+=o)i.push(c(e,a,a+o>l?l:a+o));1===s?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===s&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=i.length;o<a;++o)n[o]=i[o],r[i.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var s,i,o=[],a=t;a<r;a+=3)s=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[(i=s)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8390:(e,t,n)=>{"use strict";const r=n(7086),s=n(8329),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let r=a(n);const s=r.write(e,t);s!==n&&(r=r.slice(0,s));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const s=function(e){if(l.isBuffer(e)){const t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return d(e),a(e<0?0:0|p(e))}function h(e){const t=e.length<0?0:0|p(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let s=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(s)return r?-1:W(e).length;t=(""+t).toLowerCase(),s=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,s){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=s?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(n<0){if(!s)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,s);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,s){let i,o=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(s){let r=-1;for(i=n;i<a;i++)if(c(e,i)===c(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===l)return r*o}else-1!==r&&(i-=i-r),r=-1}else for(n+l>a&&(n=a-l),i=n;i>=0;i--){let n=!0;for(let r=0;r<l;r++)if(c(e,i+r)!==c(t,r)){n=!1;break}if(n)return i}return-1}function b(e,t,n,r){n=Number(n)||0;const s=e.length-n;r?(r=Number(r))>s&&(r=s):r=s;const i=t.length;let o;for(r>i/2&&(r=i/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(K(r))return o;e[n+o]=r}return o}function w(e,t,n,r){return q(W(t,e.length-n),e,n,r)}function x(e,t,n,r){return q(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function M(e,t,n,r){return q(G(t),e,n,r)}function S(e,t,n,r){return q(function(e,t){let n,r,s;const i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,s=n%256,i.push(s),i.push(r);return i}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);const r=[];let s=t;for(;s<n;){const t=e[s];let i=null,o=t>239?4:t>223?3:t>191?2:1;if(s+o<=n){let n,r,a,l;switch(o){case 1:t<128&&(i=t);break;case 2:n=e[s+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(i=l));break;case 3:n=e[s+1],r=e[s+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:n=e[s+1],r=e[s+2],a=e[s+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(i=l))}}null===i?(i=65533,o=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),s+=o}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.kMaxLength=o,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let s=0,i=Math.min(n,r);s<i;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let s=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))s+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,s)):Uint8Array.prototype.set.call(r,t,s);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,s)}s+=t.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,s){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),t<0||n>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&t>=n)return 0;if(r>=s)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(s>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const a=Math.min(i,o),c=this.slice(r,s),d=e.slice(t,n);for(let e=0;e<a;++e)if(c[e]!==d[e]){i=c[e],o=d[e];break}return i<o?-1:o<i?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return M(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function k(e,t,n){let r="";n=Math.min(e.length,n);for(let s=t;s<n;++s)r+=String.fromCharCode(127&e[s]);return r}function L(e,t,n){let r="";n=Math.min(e.length,n);for(let s=t;s<n;++s)r+=String.fromCharCode(e[s]);return r}function A(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let s="";for(let r=t;r<n;++r)s+=J[e[r]];return s}function D(e,t,n){const r=e.slice(t,n);let s="";for(let e=0;e<r.length-1;e+=2)s+=String.fromCharCode(r[e]+256*r[e+1]);return s}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,s,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,s){U(t,r,s,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function N(e,t,n,r,s){U(t,r,s,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function I(e,t,n,r,s,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,4),s.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,8),s.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],s=1,i=0;for(;++i<t&&(s*=256);)r+=this[e+i]*s;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e+--t],s=1;for(;t>0&&(s*=256);)r+=this[e+--t]*s;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Z((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,s=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(s)<<BigInt(32))})),l.prototype.readBigUInt64BE=Z((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],s=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(s)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],s=1,i=0;for(;++i<t&&(s*=256);)r+=this[e+i]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=t,s=1,i=this[e+--r];for(;r>0&&(s*=256);)i+=this[e+--r]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Z((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Z((function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),s.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),s.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),s.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),s.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let s=1,i=0;for(this[t]=255&e;++i<n&&(s*=256);)this[t+i]=e/s&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let s=n-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Z((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Z((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let s=0,i=1,o=0;for(this[t]=255&e;++s<n&&(i*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,e,t,n,r-1,-r)}let s=n-1,i=1,o=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/i>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Z((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Z((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const s=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),s},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{const i=l.isBuffer(e)?e:l.from(e,r),o=i.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=i[s%o]}return this};const F={};function H(e,t,n){F[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function U(e,t,n,r,s,i){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let s;throw s=i>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new F.ERR_OUT_OF_RANGE("value",s,e)}!function(e,t,n){Y(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||V(t,e.length-(n+1))}(r,s,i)}function Y(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw Y(e,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}H("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),H("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),H("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,s=n;return Number.isInteger(n)&&Math.abs(n)>2**32?s=j(String(n)):"bigint"==typeof n&&(s=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(s=j(s)),s+="n"),r+=` It must be ${t}. Received ${s}`,r}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let s=null;const i=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!s){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}s=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){let s;for(s=0;s<r&&!(s+n>=t.length||s>=e.length);++s)t[s+n]=e[s];return s}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let s=0;s<16;++s)t[r+s]=e[n]+e[s]}return t}();function Z(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},4225:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function s(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function a(e,t,n){var s={};return n.isMergeableObject(e)&&i(e).forEach((function(t){s[t]=r(e[t],n)})),i(t).forEach((function(i){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(o(e,i)&&n.isMergeableObject(t[i])?s[i]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"==typeof n?n:l}(i,n)(e[i],t[i],n):s[i]=r(t[i],n))})),s}function l(e,n,i){(i=i||{}).arrayMerge=i.arrayMerge||s,i.isMergeableObject=i.isMergeableObject||t,i.cloneUnlessOtherwiseSpecified=r;var o=Array.isArray(n);return o===Array.isArray(e)?o?i.arrayMerge(e,n,i):a(e,n,i):r(n,i)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,t)}),{})};var c=l;e.exports=c},9194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),t.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])},9817:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(6947)),l=n(7860),c=n(9194),d=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);var u=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function h(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),r="",s=0;s<n.length;s++)r+=m(n[s],t);return r}function m(e,t){switch(e.type){case a.Root:return h(e.children,t);case a.Directive:case a.Doctype:return"<"+e.data+">";case a.Comment:return function(e){return"\x3c!--"+e.data+"--\x3e"}(e);case a.CDATA:return function(e){return"<![CDATA["+e.children[0].data+"]]>"}(e);case a.Script:case a.Style:case a.Tag:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=c.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&p.has(e.parent.name)&&(t=r(r({},t),{xmlMode:!1})));!t.xmlMode&&f.has(e.name)&&(t=r(r({},t),{xmlMode:"foreign"}));var s="<"+e.name,i=function(e,t){if(e)return Object.keys(e).map((function(n){var r,s,i=null!==(r=e[n])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(n=null!==(s=c.attributeNames.get(n))&&void 0!==s?s:n),t.emptyAttrs||t.xmlMode||""!==i?n+'="'+(!1!==t.decodeEntities?l.encodeXML(i):i.replace(/"/g,"&quot;"))+'"':n})).join(" ")}(e.attribs,t);i&&(s+=" "+i);0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&u.has(e.name))?(t.xmlMode||(s+=" "),s+="/>"):(s+=">",e.children.length>0&&(s+=h(e.children,t)),!t.xmlMode&&u.has(e.name)||(s+="</"+e.name+">"));return s}(e,t);case a.Text:return function(e,t){var n=e.data||"";!1===t.decodeEntities||!t.xmlMode&&e.parent&&d.has(e.parent.name)||(n=l.encodeXML(n));return n}(e,t)}}t.default=h;var p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),f=new Set(["svg","math"])},6947:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},7647:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var i=n(6947),o=n(4711);s(n(4711),t);var a=/\s+/g,l={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function e(e,t,n){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=l),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:l,this.elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?i.ElementType.Tag:void 0,r=new o.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.options.normalizeWhitespace,n=this.lastNode;if(n&&n.type===i.ElementType.Text)t?n.data=(n.data+e).replace(a," "):n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{t&&(e=e.replace(a," "));var r=new o.Text(e);this.addNode(r),this.lastNode=r}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment)this.lastNode.data+=e;else{var t=new o.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new o.Text(""),t=new o.NodeWithChildren(i.ElementType.CDATA,[e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new o.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=c,t.default=c},4711:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var o=n(6947),a=new Map([[o.ElementType.Tag,1],[o.ElementType.Script,1],[o.ElementType.Style,1],[o.ElementType.Directive,1],[o.ElementType.Text,3],[o.ElementType.CDATA,4],[o.ElementType.Comment,8],[o.ElementType.Root,9]]),l=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=a.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),x(this,e)},e}();t.Node=l;var c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return s(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(l);t.DataNode=c;var d=function(e){function t(t){return e.call(this,o.ElementType.Text,t)||this}return s(t,e),t}(c);t.Text=d;var u=function(e){function t(t){return e.call(this,o.ElementType.Comment,t)||this}return s(t,e),t}(c);t.Comment=u;var h=function(e){function t(t,n){var r=e.call(this,o.ElementType.Directive,n)||this;return r.name=t,r}return s(t,e),t}(c);t.ProcessingInstruction=h;var m=function(e){function t(t,n){var r=e.call(this,t)||this;return r.children=n,r}return s(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(l);t.NodeWithChildren=m;var p=function(e){function t(t){return e.call(this,o.ElementType.Root,t)||this}return s(t,e),t}(m);t.Document=p;var f=function(e){function t(t,n,r,s){void 0===r&&(r=[]),void 0===s&&(s="script"===t?o.ElementType.Script:"style"===t?o.ElementType.Style:o.ElementType.Tag);var i=e.call(this,s,r)||this;return i.name=t,i.attribs=n,i}return s(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(m);function g(e){return(0,o.isTag)(e)}function v(e){return e.type===o.ElementType.CDATA}function y(e){return e.type===o.ElementType.Text}function _(e){return e.type===o.ElementType.Comment}function b(e){return e.type===o.ElementType.Directive}function w(e){return e.type===o.ElementType.Root}function x(e,t){var n;if(void 0===t&&(t=!1),y(e))n=new d(e.data);else if(_(e))n=new u(e.data);else if(g(e)){var r=t?M(e.children):[],s=new f(e.name,i({},e.attribs),r);r.forEach((function(e){return e.parent=s})),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]=i({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]=i({},e["x-attribsPrefix"])),n=s}else if(v(e)){r=t?M(e.children):[];var a=new m(o.ElementType.CDATA,r);r.forEach((function(e){return e.parent=a})),n=a}else if(w(e)){r=t?M(e.children):[];var l=new p(r);r.forEach((function(e){return e.parent=l})),e["x-mode"]&&(l["x-mode"]=e["x-mode"]),n=l}else{if(!b(e))throw new Error("Not implemented yet: "+e.type);var c=new h(e.name,e.data);null!=e["x-name"]&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),n=c}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,n}function M(e){for(var t=e.map((function(e){return x(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=f,t.isTag=g,t.isCDATA=v,t.isText=y,t.isComment=_,t.isDirective=b,t.isDocument=w,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=x},4800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var r=n(8766),s=n(9590);t.getFeed=function(e){var t=l(u,e);return t?"feed"===t.name?function(e){var t,n=e.children,r={type:"atom",items:(0,s.getElementsByTagName)("entry",n).map((function(e){var t,n=e.children,r={media:a(n)};d(r,"id","id",n),d(r,"title","title",n);var s=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;s&&(r.link=s);var i=c("summary",n)||c("content",n);i&&(r.description=i);var o=c("updated",n);return o&&(r.pubDate=new Date(o)),r}))};d(r,"id","id",n),d(r,"title","title",n);var i=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i);d(r,"description","subtitle",n);var o=c("updated",n);o&&(r.updated=new Date(o));return d(r,"author","email",n,!0),r}(t):function(e){var t,n,r=null!==(n=null===(t=l("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],i={type:e.name.substr(0,3),id:"",items:(0,s.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,n={media:a(t)};d(n,"id","guid",t),d(n,"title","title",t),d(n,"link","link",t),d(n,"description","description",t);var r=c("pubDate",t);return r&&(n.pubDate=new Date(r)),n}))};d(i,"title","title",r),d(i,"link","link",r),d(i,"description","description",r);var o=c("lastBuildDate",r);o&&(i.updated=new Date(o));return d(i,"author","managingEditor",r,!0),i}(t):null};var i=["url","type","lang"],o=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(e){return(0,s.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,s=i;r<s.length;r++){t[c=s[r]]&&(n[c]=t[c])}for(var a=0,l=o;a<l.length;a++){var c;t[c=l[a]]&&(n[c]=parseInt(t[c],10))}return t.expression&&(n.expression=t.expression),n}))}function l(e,t){return(0,s.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,n){return void 0===n&&(n=!1),(0,r.textContent)((0,s.getElementsByTagName)(e,t,n,1)).trim()}function d(e,t,n,r,s){void 0===s&&(s=!1);var i=c(n,r,s);i&&(e[t]=i)}function u(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},3167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.removeSubsets=void 0;var r=n(7647);function s(e,t){var n=[],s=[];if(e===t)return 0;for(var i=(0,r.hasChildren)(e)?e:e.parent;i;)n.unshift(i),i=i.parent;for(i=(0,r.hasChildren)(t)?t:t.parent;i;)s.unshift(i),i=i.parent;for(var o=Math.min(n.length,s.length),a=0;a<o&&n[a]===s[a];)a++;if(0===a)return 1;var l=n[a-1],c=l.children,d=n[a],u=s[a];return c.indexOf(d)>c.indexOf(u)?l===t?20:4:l===e?10:2}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e},t.compareDocumentPosition=s,t.uniqueSort=function(e){return(e=e.filter((function(e,t,n){return!n.includes(e,t+1)}))).sort((function(e,t){var n=s(e,t);return 2&n?-1:4&n?1:0})),e}},2641:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,s(n(8766),t),s(n(8701),t),s(n(4526),t),s(n(3778),t),s(n(9590),t),s(n(3167),t),s(n(4800),t);var i=n(7647);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})},9590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var r=n(7647),s=n(3778),i={tag_name:function(e){return"function"==typeof e?function(t){return(0,r.isTag)(t)&&e(t.name)}:"*"===e?r.isTag:function(t){return(0,r.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,r.isText)(t)&&e(t.data)}:function(t){return(0,r.isText)(t)&&t.data===e}}};function o(e,t){return"function"==typeof t?function(n){return(0,r.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,r.isTag)(n)&&n.attribs[e]===t}}function a(e,t){return function(n){return e(n)||t(n)}}function l(e){var t=Object.keys(e).map((function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(i,t)?i[t](n):o(t,n)}));return 0===t.length?null:t.reduce(a)}t.testElement=function(e,t){var n=l(e);return!n||n(t)},t.getElements=function(e,t,n,r){void 0===r&&(r=1/0);var i=l(e);return i?(0,s.filter)(i,t,n,r):[]},t.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,s.findOne)(o("id",e),t,n)},t.getElementsByTagName=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,s.filter)(i.tag_name(e),t,n,r)},t.getElementsByTagType=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,s.filter)(i.tag_type(e),t,n,r)}},4526:(e,t)=>{"use strict";function n(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=n,t.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var s=t.parent=e.parent;if(s){var i=s.children;i[i.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(n(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null},t.append=function(e,t){n(t);var r=e.parent,s=e.next;if(t.next=s,t.prev=e,e.next=t,t.parent=r,s){if(s.prev=t,r){var i=r.children;i.splice(i.lastIndexOf(s),0,t)}}else r&&r.children.push(t)},t.prependChild=function(e,t){if(n(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var r=e.children[1];r.prev=t,t.next=r}else t.next=null},t.prepend=function(e,t){n(t);var r=e.parent;if(r){var s=r.children;s.splice(s.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}},3778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var r=n(7647);function s(e,t,n,i){for(var o=[],a=0,l=t;a<l.length;a++){var c=l[a];if(e(c)&&(o.push(c),--i<=0))break;if(n&&(0,r.hasChildren)(c)&&c.children.length>0){var d=s(e,c.children,n,i);if(o.push.apply(o,d),(i-=d.length)<=0)break}}return o}t.filter=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),Array.isArray(t)||(t=[t]),s(e,t,n,r)},t.find=s,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,n,s){void 0===s&&(s=!0);for(var i=null,o=0;o<n.length&&!i;o++){var a=n[o];(0,r.isTag)(a)&&(t(a)?i=a:s&&a.children.length>0&&(i=e(t,a.children)))}return i},t.existsOne=function e(t,n){return n.some((function(n){return(0,r.isTag)(n)&&(t(n)||n.children.length>0&&e(t,n.children))}))},t.findAll=function(e,t){for(var n,s,i=[],o=t.filter(r.isTag);s=o.shift();){var a=null===(n=s.children)||void 0===n?void 0:n.filter(r.isTag);a&&a.length>0&&o.unshift.apply(o,a),e(s)&&i.push(s)}return i}},8766:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var s=n(7647),i=r(n(9817)),o=n(6947);function a(e,t){return(0,i.default)(e,t)}t.getOuterHTML=a,t.getInnerHTML=function(e,t){return(0,s.hasChildren)(e)?e.children.map((function(e){return a(e,t)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,s.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,s.isCDATA)(t)?e(t.children):(0,s.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,s.hasChildren)(t)&&!(0,s.isComment)(t)?e(t.children):(0,s.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,s.hasChildren)(t)&&(t.type===o.ElementType.Tag||(0,s.isCDATA)(t))?e(t.children):(0,s.isText)(t)?t.data:""}},8701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var r=n(7647),s=[];function i(e){var t;return null!==(t=e.children)&&void 0!==t?t:s}function o(e){return e.parent||null}t.getChildren=i,t.getParent=o,t.getSiblings=function(e){var t=o(e);if(null!=t)return i(t);for(var n=[e],r=e.prev,s=e.next;null!=r;)n.unshift(r),r=r.prev;for(;null!=s;)n.push(s),s=s.next;return n},t.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,r.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,r.isTag)(t);)t=t.prev;return t}},984:e=>{e.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},6164:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHTML=t.decodeHTMLStrict=t.decodeXML=void 0;var s=r(n(2059)),i=r(n(2184)),o=r(n(1542)),a=r(n(8485)),l=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function c(e){var t=u(e);return function(e){return String(e).replace(l,t)}}t.decodeXML=c(o.default),t.decodeHTMLStrict=c(s.default);var d=function(e,t){return e<t?1:-1};function u(e){return function(t){if("#"===t.charAt(1)){var n=t.charAt(2);return"X"===n||"x"===n?a.default(parseInt(t.substr(3),16)):a.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}t.decodeHTML=function(){for(var e=Object.keys(i.default).sort(d),t=Object.keys(s.default).sort(d),n=0,r=0;n<t.length;n++)e[r]===t[n]?(t[n]+=";?",r++):t[n]+=";";var o=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),a=u(s.default);function l(e){return";"!==e.substr(-1)&&(e+=";"),a(e)}return function(e){return String(e).replace(o,l)}}()},8485:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(9388)),i=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};t.default=function(e){return e>=55296&&e<=57343||e>1114111?"�":(e in s.default&&(e=s.default[e]),i(e))}},3049:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=void 0;var s=d(r(n(1542)).default),i=u(s);t.encodeXML=g(s);var o,a,l=d(r(n(2059)).default),c=u(l);function d(e){return Object.keys(e).sort().reduce((function(t,n){return t[e[n]]="&"+n+";",t}),{})}function u(e){for(var t=[],n=[],r=0,s=Object.keys(e);r<s.length;r++){var i=s[r];1===i.length?t.push("\\"+i):n.push(i)}t.sort();for(var o=0;o<t.length-1;o++){for(var a=o;a<t.length-1&&t[a].charCodeAt(1)+1===t[a+1].charCodeAt(1);)a+=1;var l=1+a-o;l<3||t.splice(o,l,t[o]+"-"+t[a])}return n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}t.encodeHTML=(o=l,a=c,function(e){return e.replace(a,(function(e){return o[e]})).replace(h,p)}),t.encodeNonAsciiHTML=g(l);var h=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,m=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function p(e){return"&#x"+(e.length>1?m(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var f=new RegExp(i.source+"|"+h.source,"g");function g(e){return function(t){return t.replace(f,(function(t){return e[t]||p(t)}))}}t.escape=function(e){return e.replace(f,p)},t.escapeUTF8=function(e){return e.replace(i,p)}},7860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.encodeHTML5=t.encodeHTML4=t.escapeUTF8=t.escape=t.encodeNonAsciiHTML=t.encodeHTML=t.encodeXML=t.encode=t.decodeStrict=t.decode=void 0;var r=n(6164),s=n(3049);t.decode=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?s.encodeXML:s.encodeHTML)(e)};var i=n(3049);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return i.encodeXML}}),Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return i.encodeNonAsciiHTML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return i.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return i.escapeUTF8}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return i.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return i.encodeHTML}});var o=n(6164);Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})},8651:e=>{"use strict";var t=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(t,"\\$&")}},7725:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function s(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",s),n([].slice.call(arguments))}f(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,n)}(e,s,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var s,i,o,c;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(s=l(e))>0&&o.length>s&&!o.warned){o.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=o.length,c=d,console&&console.warn&&console.warn(c)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=d.bind(r);return s.listener=n,r.wrapFn=s,s}function h(e,t,n){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(s):p(s,s.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function s(i){r.once&&e.removeEventListener(t,s),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var s="error"===e,i=this._events;if(void 0!==i)s=s&&void 0===i.error;else if(!s)return!1;if(s){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,d=p(l,c);for(n=0;n<c;++n)r(d[n],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,s,i,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,s=i;break}if(s<0)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var s,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(s=i[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return h(this,e,!0)},i.prototype.rawListeners=function(e){return h(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},i.prototype.listenerCount=m,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},8926:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!=s--;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;0!=s--;){var o=i[s];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},9347:e=>{"use strict";e.exports=()=>/[<>:"\/\\|?*\x00-\x1F]/g,e.exports.windowsNames=()=>/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$/i},8570:(e,t,n)=>{"use strict";const r=n(3266),s=n(266);e.exports=(e,t)=>(e=r.resolve(e),r.join(r.dirname(e),s(r.basename(e),t)))},266:(e,t,n)=>{"use strict";const r=n(7658),s=n(9347),i=n(9803),o=/[\u0000-\u001f\u0080-\u009f]/g,a=/^\.+/,l=/\.+$/;e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");const n=void 0===t.replacement?"!":t.replacement;if(s().test(n)&&o.test(n))throw new Error("Replacement string cannot contain reserved filename characters");return e=(e=(e=(e=e.replace(s(),n)).replace(o,n)).replace(a,n)).replace(l,""),n.length>0&&(e=(e=r(e,n)).length>1?i(e,n):e),e=(e=s.windowsNames().test(e)?e+n:e).slice(0,"number"==typeof t.maxLength?t.maxLength:100)}},9499:(e,t,n)=>{"use strict";const r=n(266),s=n(8570);r.path=s,e.exports=r},7355:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeed=t.FeedHandler=void 0;var c,d,u=l(n(7647)),h=a(n(2641)),m=n(8752);!function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable"}(c||(c={})),function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop"}(d||(d={}));var p=function(e){function t(t,n){return"object"==typeof t&&(n=t=void 0),e.call(this,t,n)||this}return s(t,e),t.prototype.onend=function(){var e,t,n=v(w,this.dom);if(n){var r={};if("feed"===n.name){var s=n.children;r.type="atom",b(r,"id","id",s),b(r,"title","title",s);var i=_("href",v("link",s));i&&(r.link=i),b(r,"description","subtitle",s),(o=y("updated",s))&&(r.updated=new Date(o)),b(r,"author","email",s,!0),r.items=g("entry",s).map((function(e){var t={},n=e.children;b(t,"id","id",n),b(t,"title","title",n);var r=_("href",v("link",n));r&&(t.link=r);var s=y("summary",n)||y("content",n);s&&(t.description=s);var i=y("updated",n);return i&&(t.pubDate=new Date(i)),t.media=f(n),t}))}else{var o;s=null!==(t=null===(e=v("channel",n.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[];r.type=n.name.substr(0,3),r.id="",b(r,"title","title",s),b(r,"link","link",s),b(r,"description","description",s),(o=y("lastBuildDate",s))&&(r.updated=new Date(o)),b(r,"author","managingEditor",s,!0),r.items=g("item",n.children).map((function(e){var t={},n=e.children;b(t,"id","guid",n),b(t,"title","title",n),b(t,"link","link",n),b(t,"description","description",n);var r=y("pubDate",n);return r&&(t.pubDate=new Date(r)),t.media=f(n),t}))}this.feed=r,this.handleCallback(null)}else this.handleCallback(new Error("couldn't find root of feed"))},t}(u.default);function f(e){return g("media:content",e).map((function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t}))}function g(e,t){return h.getElementsByTagName(e,t,!0)}function v(e,t){return h.getElementsByTagName(e,t,!0,1)[0]}function y(e,t,n){return void 0===n&&(n=!1),h.getText(h.getElementsByTagName(e,t,n,1)).trim()}function _(e,t){return t?t.attribs[e]:null}function b(e,t,n,r,s){void 0===s&&(s=!1);var i=y(n,r,s);i&&(e[t]=i)}function w(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}t.FeedHandler=p,t.parseFeed=function(e,t){void 0===t&&(t={xmlMode:!0});var n=new p(t);return new m.Parser(n,t).end(e),n.feed}},8752:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var s=r(n(4555)),i=new Set(["input","option","optgroup","select","button","datalist","textarea"]),o=new Set(["p"]),a={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:o,h1:o,h2:o,h3:o,h4:o,h5:o,h6:o,select:i,input:i,output:i,button:i,datalist:i,textarea:i,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:o,article:o,aside:o,blockquote:o,details:o,div:o,dl:o,fieldset:o,figcaption:o,figure:o,footer:o,form:o,header:o,hr:o,main:o,nav:o,ol:o,pre:o,section:o,table:o,ul:o,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),c=new Set(["math","svg"]),d=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),u=/\s|\//,h=function(){function e(e,t){var n,r,i,o,a;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:s.default)(this.options,this),null===(a=(o=this.cbs).onparserinit)||void 0===a||a.call(o,this)}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(e){var t,n;this.updatePosition(1),this.endIndex--,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,e)},e.prototype.onopentagname=function(e){var t,n;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(a,e))for(var r=void 0;this.stack.length>0&&a[e].has(r=this.stack[this.stack.length-1]);)this.onclosetag(r);!this.options.xmlMode&&l.has(e)||(this.stack.push(e),c.has(e)?this.foreignContext.push(!0):d.has(e)&&this.foreignContext.push(!1)),null===(n=(t=this.cbs).onopentagname)||void 0===n||n.call(t,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&l.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(c.has(e)||d.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&l.has(e))this.options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this.closeCurrentTag());else{var t=this.stack.lastIndexOf(e);if(-1!==t)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else"p"!==e||this.options.xmlMode||(this.onopentagname(e),this.closeCurrentTag())}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var e,t,n=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===n&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,n),this.stack.pop())},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},e.prototype.onattribdata=function(e){this.attribvalue+=e},e.prototype.onattribend=function(e){var t,n;null===(n=(t=this.cbs).onattribute)||void 0===n||n.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(u),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},e.prototype.oncomment=function(e){var t,n,r,s;this.updatePosition(4),null===(n=(t=this.cbs).oncomment)||void 0===n||n.call(t,e),null===(s=(r=this.cbs).oncommentend)||void 0===s||s.call(r)},e.prototype.oncdata=function(e){var t,n,r,s,i,o;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(n=(t=this.cbs).oncdatastart)||void 0===n||n.call(t),null===(s=(r=this.cbs).ontext)||void 0===s||s.call(r,e),null===(o=(i=this.cbs).oncdataend)||void 0===o||o.call(i)):this.oncomment("[CDATA["+e+"]]")},e.prototype.onerror=function(e){var t,n;null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,e)},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n]));null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this)},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.write=function(e){this.tokenizer.write(e)},e.prototype.end=function(e){this.tokenizer.end(e)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=h},4555:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(8485)),i=r(n(2059)),o=r(n(2184)),a=r(n(1542));function l(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function c(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function d(e,t,n){var r=e.toLowerCase();return e===r?function(e,s){s===r?e._state=t:(e._state=n,e._index--)}:function(s,i){i===r||i===e?s._state=t:(s._state=n,s._index--)}}function u(e,t){var n=e.toLowerCase();return function(r,s){s===n||s===e?r._state=t:(r._state=3,r._index--)}}var h=d("C",24,16),m=d("D",25,16),p=d("A",26,16),f=d("T",27,16),g=d("A",28,16),v=u("R",35),y=u("I",36),_=u("P",37),b=u("T",38),w=d("R",40,1),x=d("I",41,1),M=d("P",42,1),S=d("T",43,1),T=u("Y",45),C=u("L",46),E=u("E",47),k=d("Y",49,1),L=d("L",50,1),A=d("E",51,1),D=u("I",54),O=u("T",55),R=u("L",56),P=u("E",57),N=d("I",58,1),I=d("T",59,1),z=d("L",60,1),B=d("E",61,1),F=d("#",63,64),H=d("X",66,65),j=function(){function e(e,t){var n;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!(null==e?void 0:e.xmlMode),this.decodeEntities=null===(n=null==e?void 0:e.decodeEntities)||void 0===n||n}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):!this.decodeEntities||"&"!==e||1!==this.special&&4!==this.special||(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.isTagStartChar=function(e){return c(e)||this.xmlMode&&!l(e)&&"/"!==e&&">"!==e},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||l(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(e){("/"===e||">"===e||l(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(e){l(e)||(">"===e?this._state=1:1!==this.special?4===this.special||"s"!==e&&"S"!==e?4!==this.special||"t"!==e&&"T"!==e?(this._state=1,this._index--):this._state=53:this._state=33:this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(e){(">"===e||l(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:l(e)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):l(e)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||l(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):l(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):l(e)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},e.prototype.stateInAttributeValueNoQuotes=function(e){l(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21)},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30)},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||l(e))&&(this.special=t),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||l(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?a.default:i.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var n=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(o.default,n))return this.emitPartial(o.default[n]),void(this.sectionStart+=t+1);t--}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!c(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(o.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(e,t,n){var r=this.sectionStart+e;if(r!==this._index){var i=this.buffer.substring(r,this._index),o=parseInt(i,t);this.emitPartial(s.default(o)),this.sectionStart=n?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?N(this,e):39===this._state?w(this,e):40===this._state?x(this,e):41===this._state?M(this,e):34===this._state?v(this,e):35===this._state?y(this,e):36===this._state?_(this,e):37===this._state?b(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?S(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?T(this,e):29===this._state?this.stateInCdata(e):45===this._state?C(this,e):46===this._state?E(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?k(this,e):49===this._state?L(this,e):50===this._state?A(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?D(this,e):54===this._state?O(this,e):55===this._state?R(this,e):56===this._state?P(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?I(this,e):59===this._state?z(this,e):60===this._state?B(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?h(this,e):62===this._state?F(this,e):24===this._state?m(this,e):25===this._state?p(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?f(this,e):27===this._state?g(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?H(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()))},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e)},e}();t.default=j},226:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RssHandler=t.DefaultHandler=t.DomUtils=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DomHandler=t.Parser=void 0;var l=n(8752);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return l.Parser}});var c=n(7647);function d(e,t){var n=new c.DomHandler(void 0,t);return new l.Parser(n,t).end(e),n.root}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}}),t.parseDocument=d,t.parseDOM=function(e,t){return d(e,t).children},t.createDomStream=function(e,t,n){var r=new c.DomHandler(e,t,n);return new l.Parser(r,t)};var u=n(4555);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return a(u).default}});var h=i(n(6947));t.ElementType=h,o(n(7355),t),t.DomUtils=i(n(2641));var m=n(7355);Object.defineProperty(t,"RssHandler",{enumerable:!0,get:function(){return m.FeedHandler}})},8329:(e,t)=>{t.read=function(e,t,n,r,s){var i,o,a=8*s-r-1,l=(1<<a)-1,c=l>>1,d=-7,u=n?s-1:0,h=n?-1:1,m=e[t+u];for(u+=h,i=m&(1<<-d)-1,m>>=-d,d+=a;d>0;i=256*i+e[t+u],u+=h,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=256*o+e[t+u],u+=h,d-=8);if(0===i)i=1-c;else{if(i===l)return o?NaN:1/0*(m?-1:1);o+=Math.pow(2,r),i-=c}return(m?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,s,i){var o,a,l,c=8*i-s-1,d=(1<<c)-1,u=d>>1,h=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:i-1,p=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=d?(a=0,o=d):o+u>=1?(a=(t*l-1)*Math.pow(2,s),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;e[n+m]=255&a,m+=p,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;e[n+m]=255&o,m+=p,o/=256,c-=8);e[n+m-p]|=128*f}},9105:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},6186:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},1494:(e,t,n)=>{"use strict";var r=n(3224);function s(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==s(e)&&("function"==typeof(t=e.constructor)&&(!1!==s(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},3224:e=>{"use strict";e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},8125:e=>{"use strict";var t=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,r,s,i,o,a,l,c,d,u){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var h in r(i,o,a,l,c,d,u),i){var m=i[h];if(Array.isArray(m)){if(h in t.arrayKeywords)for(var p=0;p<m.length;p++)n(e,r,s,m[p],o+"/"+h+"/"+p,a,o,h,i,p)}else if(h in t.propsKeywords){if(m&&"object"==typeof m)for(var f in m)n(e,r,s,m[f],o+"/"+h+"/"+f.replace(/~/g,"~0").replace(/\//g,"~1"),a,o,h,i,f)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&n(e,r,s,m,o+"/"+h,a,o,h,i)}s(i,o,a,l,c,d,u)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},1952:(e,t,n)=>{var r=n(1516),s=n(139),i=n(1512),o=["x","e","a","o","n","s","r","c","u","m","v","w","z"],a=["m","w"],l=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],c="\t".charCodeAt(0),d=" ".charCodeAt(0);function u(e){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}function h(e){return new Function(["return function "+e+"() {","  return this._"+e,"}"].join("\n"))()}function m(e,t){if(!e.chars||0===e.chars.length)return null;var n=f(e.chars,t);return n>=0?e.chars[n]:null}function p(e,t,n){if(!e.kernings||0===e.kernings.length)return 0;for(var r=e.kernings,s=0;s<r.length;s++){var i=r[s];if(i.first===t&&i.second===n)return i.amount}return 0}function f(e,t,n){for(var r=n=n||0;r<e.length;r++)if(e[r].id===t)return r;return-1}e.exports=function(e){return new u(e)},u.prototype.update=function(e){if(e=s({measure:this._measure},e),this._opt=e,this._opt.tabSize=i(this._opt.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,n=e.text||"",a=e.font;this._setupSpaceGlyphs(a);var c=r.lines(n,e),d=e.width||0;t.length=0;var u=c.reduce((function(e,t){return Math.max(e,t.width,d)}),0),h=0,m=0,g=i(e.lineHeight,a.common.lineHeight),v=a.common.base,y=g-v,_=e.letterSpacing||0,b=g*c.length-y,w=function(e){if("center"===e)return 1;if("right"===e)return 2;return 0}(this._opt.align);m-=b,this._width=u,this._height=b,this._descender=g-v,this._baseline=v,this._xHeight=function(e){for(var t=0;t<o.length;t++){var n=o[t].charCodeAt(0),r=f(e.chars,n);if(r>=0)return e.chars[r].height}return 0}(a),this._capHeight=function(e){for(var t=0;t<l.length;t++){var n=l[t].charCodeAt(0),r=f(e.chars,n);if(r>=0)return e.chars[r].height}return 0}(a),this._lineHeight=g,this._ascender=g-y-this._xHeight;var x=this;c.forEach((function(e,r){for(var s,i=e.start,o=e.end,l=e.width,c=i;c<o;c++){var d=n.charCodeAt(c),f=x.getGlyph(a,d);if(f){s&&(h+=p(a,s.id,f.id));var v=h;1===w?v+=(u-l)/2:2===w&&(v+=u-l),t.push({position:[v,m],data:f,index:c,line:r}),h+=f.xadvance+_,s=f}}m+=g,h=0})),this._linesTotal=c.length},u.prototype._setupSpaceGlyphs=function(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,e.chars&&0!==e.chars.length){var t=m(e,d)||function(e){for(var t=0;t<a.length;t++){var n=a[t].charCodeAt(0),r=f(e.chars,n);if(r>=0)return e.chars[r]}return 0}(e)||e.chars[0],n=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=s(t,{x:0,y:0,xadvance:n,id:c,xoffset:0,yoffset:0,width:0,height:0})}},u.prototype.getGlyph=function(e,t){var n=m(e,t);return n||(t===c?this._fallbackTabGlyph:t===d?this._fallbackSpaceGlyph:null)},u.prototype.computeMetrics=function(e,t,n,r){var s,i=this._opt.letterSpacing||0,o=this._opt.font,a=0,l=0,c=0;if(!o.chars||0===o.chars.length)return{start:t,end:t,width:0};n=Math.min(e.length,n);for(var d=t;d<n;d++){var u,h=e.charCodeAt(d);if(u=this.getGlyph(o,h)){u.xoffset;var m=(a+=s?p(o,s.id,u.id):0)+u.xadvance+i,f=a+u.width;if(f>=r||m>=r)break;a=m,l=f,s=u}c++}return s&&(l+=s.xoffset),{start:t,end:t+c,width:l}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach((function(e){Object.defineProperty(u.prototype,e,{get:h(e),configurable:!0})}))},4749:function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(8787))},815:function(e,t,n){!function(e){"use strict";var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},r=function(e){return function(r,s,i,o){var a=t(r),l=n[e][t(r)];return 2===a&&(l=l[s?0:1]),l.replace(/%d/i,r)}},s=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-dz",{months:s,monthsShort:s,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:0,doy:4}})}(n(8787))},8261:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})}(n(8787))},6264:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},s=function(e){return function(t,s,i,o){var a=n(t),l=r[e][n(t)];return 2===a&&(l=l[s?0:1]),l.replace(/%d/i,t)}},i=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-ly",{months:i,monthsShort:i,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:s("s"),ss:s("s"),m:s("m"),mm:s("m"),h:s("h"),hh:s("h"),d:s("d"),dd:s("d"),M:s("M"),MM:s("M"),y:s("y"),yy:s("y")},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(8787))},3501:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(8787))},9344:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};e.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:0,doy:6}})}(n(8787))},3182:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(8787))},6161:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},s={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},i=function(e){return function(t,n,i,o){var a=r(t),l=s[e][r(t)];return 2===a&&(l=l[n?0:1]),l.replace(/%d/i,t)}},o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(8787))},2381:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"bir neçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var n=e%10,r=e%100-n,s=e>=100?100:null;return e+(t[n]||t[r]||t[s])},week:{dow:1,doy:7}})}(n(8787))},1868:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){return"m"===r?n?"хвіліна":"хвіліну":"h"===r?n?"гадзіна":"гадзіну":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:n?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[r],+e)}e.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:n,mm:n,h:n,hh:n,d:"дзень",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}})}(n(8787))},6153:function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Миналата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[Миналия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",w:"седмица",ww:"%d седмици",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(8787))},8847:function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(8787))},1703:function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn-bd",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|ভোর|সকাল|দুপুর|বিকাল|সন্ধ্যা|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t?e<4?e:e+12:"ভোর"===t||"সকাল"===t?e:"দুপুর"===t?e>=3?e:e+12:"বিকাল"===t||"সন্ধ্যা"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"রাত":e<6?"ভোর":e<12?"সকাল":e<15?"দুপুর":e<18?"বিকাল":e<20?"সন্ধ্যা":"রাত"},week:{dow:0,doy:6}})}(n(8787))},7311:function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t&&e>=4||"দুপুর"===t&&e<5||"বিকাল"===t?e+12:e},meridiem:function(e,t,n){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(8787))},4436:function(e,t,n){!function(e){"use strict";var t={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};e.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12".split("_"),monthsShortRegex:/^(ཟླ་\d{1,2})/,monthsParseExact:!0,weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(e,t){return 12===e&&(e=0),"མཚན་མོ"===t&&e>=4||"ཉིན་གུང"===t&&e<5||"དགོང་དག"===t?e+12:e},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(8787))},1166:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+s({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){switch(r(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function r(e){return e>9?r(e%10):e}function s(e,t){return 2===t?i(e):e}function i(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}var o=[/^gen/i,/^c[ʼ\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],a=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,l=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,c=/^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,d=[/^sul/i,/^lun/i,/^meurzh/i,/^merc[ʼ\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],u=[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],h=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:h,fullWeekdaysParse:d,shortWeekdaysParse:u,minWeekdaysParse:h,monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:l,monthsShortStrictRegex:c,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warcʼhoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Decʼh da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s ʼzo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(8787))},1748:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(8787))},369:function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(8787))},8341:function(e,t,n){!function(e){"use strict";var t={format:"leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),standalone:"ledna_února_března_dubna_května_června_července_srpna_září_října_listopadu_prosince".split("_")},n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),r=[/^led/i,/^úno/i,/^bře/i,/^dub/i,/^kvě/i,/^(čvn|červen$|června)/i,/^(čvc|červenec|července)/i,/^srp/i,/^zář/i,/^říj/i,/^lis/i,/^pro/i],s=/^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;function i(e){return e>1&&e<5&&1!=~~(e/10)}function o(e,t,n,r){var s=e+" ";switch(n){case"s":return t||r?"pár sekund":"pár sekundami";case"ss":return t||r?s+(i(e)?"sekundy":"sekund"):s+"sekundami";case"m":return t?"minuta":r?"minutu":"minutou";case"mm":return t||r?s+(i(e)?"minuty":"minut"):s+"minutami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?s+(i(e)?"hodiny":"hodin"):s+"hodinami";case"d":return t||r?"den":"dnem";case"dd":return t||r?s+(i(e)?"dny":"dní"):s+"dny";case"M":return t||r?"měsíc":"měsícem";case"MM":return t||r?s+(i(e)?"měsíce":"měsíců"):s+"měsíci";case"y":return t||r?"rok":"rokem";case"yy":return t||r?s+(i(e)?"roky":"let"):s+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:o,ss:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},443:function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/ҫул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(8787))},1871:function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(8787))},715:function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},5939:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?s[n][0]:s[n][1]}e.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},8234:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?s[n][0]:s[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},4961:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?s[n][0]:s[n][1]}e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},63:function(e,t,n){!function(e){"use strict";var t=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(e){return"މފ"===e},meridiem:function(e,t,n){return e<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(8787))},2553:function(e,t,n){!function(e){"use strict";function t(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}e.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){return 6===this.day()?"[το προηγούμενο] dddd [{}] LT":"[την προηγούμενη] dddd [{}] LT"},sameElse:"L"},calendar:function(e,n){var r=this._calendarEl[e],s=n&&n.hours();return t(r)&&(r=r.apply(n)),r.replace("{}",s%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(8787))},6992:function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(8787))},517:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(8787))},9209:function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(8787))},7101:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(8787))},4342:function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(8787))},7692:function(e,t,n){!function(e){"use strict";e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(8787))},7654:function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(8787))},943:function(e,t,n){!function(e){"use strict";e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(8787))},1315:function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(8787))},4536:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(8787))},6937:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:4},invalidDate:"Fecha inválida"})}(n(8787))},6740:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})}(n(8787))},8023:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],s=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha inválida"})}(n(8787))},6443:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?s[n][2]?s[n][2]:s[n][1]:r?s[n][0]:s[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},9868:function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(8787))},53:function(e,t,n){!function(e){"use strict";var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};e.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"%d ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(8787))},4818:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",t[7],t[8],t[9]];function r(e,t,n,r){var i="";switch(n){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"ss":i=r?"sekunnin":"sekuntia";break;case"m":return r?"minuutin":"minuutti";case"mm":i=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":i=r?"tunnin":"tuntia";break;case"d":return r?"päivän":"päivä";case"dd":i=r?"päivän":"päivää";break;case"M":return r?"kuukauden":"kuukausi";case"MM":i=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":i=r?"vuoden":"vuotta"}return i=s(e,r)+" "+i}function s(e,r){return e<10?r?n[e]:t[e]:e}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},2590:function(e,t,n){!function(e){"use strict";e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(8787))},354:function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaður",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},7628:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(8787))},2760:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(8787))},6606:function(e,t,n){!function(e){"use strict";var t=/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,n=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,r=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,s=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i];e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:t,monthsShortStrictRegex:n,monthsParse:s,longMonthsParse:s,shortMonthsParse:s,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(8787))},8484:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(8787))},9123:function(e,t,n){!function(e){"use strict";var t=["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig"],n=["Ean","Feabh","Márt","Aib","Beal","Meith","Iúil","Lún","M.F.","D.F.","Samh","Noll"],r=["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],s=["Domh","Luan","Máirt","Céad","Déar","Aoine","Sath"],i=["Do","Lu","Má","Cé","Dé","A","Sa"];e.defineLocale("ga",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:r,weekdaysShort:s,weekdaysMin:i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amárach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inné ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s ó shin",s:"cúpla soicind",ss:"%d soicind",m:"nóiméad",mm:"%d nóiméad",h:"uair an chloig",hh:"%d uair an chloig",d:"lá",dd:"%d lá",M:"mí",MM:"%d míonna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(8787))},7524:function(e,t,n){!function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],n=["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],r=["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],s=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],i=["Dò","Lu","Mà","Ci","Ar","Ha","Sa"];e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:r,weekdaysShort:s,weekdaysMin:i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(8787))},3094:function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(8787))},3531:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:["थोडया सॅकंडांनी","थोडे सॅकंड"],ss:[e+" सॅकंडांनी",e+" सॅकंड"],m:["एका मिणटान","एक मिनूट"],mm:[e+" मिणटांनी",e+" मिणटां"],h:["एका वरान","एक वर"],hh:[e+" वरांनी",e+" वरां"],d:["एका दिसान","एक दीस"],dd:[e+" दिसांनी",e+" दीस"],M:["एका म्हयन्यान","एक म्हयनो"],MM:[e+" म्हयन्यानी",e+" म्हयने"],y:["एका वर्सान","एक वर्स"],yy:[e+" वर्सांनी",e+" वर्सां"]};return r?s[n][0]:s[n][1]}e.defineLocale("gom-deva",{months:{standalone:"जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),format:"जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार".split("_"),weekdaysShort:"आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.".split("_"),weekdaysMin:"आ_सो_मं_बु_ब्रे_सु_शे".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [वाजतां]",LTS:"A h:mm:ss [वाजतां]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [वाजतां]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [वाजतां]",llll:"ddd, D MMM YYYY, A h:mm [वाजतां]"},calendar:{sameDay:"[आयज] LT",nextDay:"[फाल्यां] LT",nextWeek:"[फुडलो] dddd[,] LT",lastDay:"[काल] LT",lastWeek:"[फाटलो] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s आदीं",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(वेर)/,ordinal:function(e,t){return"D"===t?e+"वेर":e},week:{dow:0,doy:3},meridiemParse:/राती|सकाळीं|दनपारां|सांजे/,meridiemHour:function(e,t){return 12===e&&(e=0),"राती"===t?e<4?e:e+12:"सकाळीं"===t?e:"दनपारां"===t?e>12?e:e+12:"सांजे"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"राती":e<12?"सकाळीं":e<16?"दनपारां":e<20?"सांजे":"राती"}})}(n(8787))},4675:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return r?s[n][0]:s[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){return"D"===t?e+"er":e},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(8787))},6549:function(e,t,n){!function(e){"use strict";var t={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},n={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};e.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પહેલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(e){return e.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(e,t){return 12===e&&(e=0),"રાત"===t?e<4?e:e+12:"સવાર"===t?e:"બપોર"===t?e>=10?e:e+12:"સાંજ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"રાત":e<10?"સવાર":e<17?"બપોર":e<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})}(n(8787))},2875:function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(e){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(e)},meridiem:function(e,t,n){return e<5?"לפנות בוקר":e<10?"בבוקר":e<12?n?'לפנה"צ':"לפני הצהריים":e<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(8787))},4794:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},r=[/^जन/i,/^फ़र|फर/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सितं|सित/i,/^अक्टू/i,/^नव|नवं/i,/^दिसं|दिस/i],s=[/^जन/i,/^फ़र/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सित/i,/^अक्टू/i,/^नव/i,/^दिस/i];e.defineLocale("hi",{months:{format:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),standalone:"जनवरी_फरवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितंबर_अक्टूबर_नवंबर_दिसंबर".split("_")},monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},monthsParse:r,longMonthsParse:r,shortMonthsParse:s,monthsRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsShortRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsStrictRegex:/^(जनवरी?|फ़रवरी|फरवरी?|मार्च?|अप्रैल?|मई?|जून?|जुलाई?|अगस्त?|सितम्बर|सितंबर|सित?\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर?|दिसम्बर|दिसंबर?)/i,monthsShortStrictRegex:/^(जन\.?|फ़र\.?|मार्च?|अप्रै\.?|मई?|जून?|जुल\.?|अग\.?|सित\.?|अक्टू\.?|नव\.?|दिस\.?)/i,calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(8787))},8906:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prošlu] [nedjelju] [u] LT";case 3:return"[prošlu] [srijedu] [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(8787))},1034:function(e,t,n){!function(e){"use strict";var t="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(e,t,n,r){var s=e;switch(n){case"s":return r||t?"néhány másodperc":"néhány másodperce";case"ss":return s+(r||t)?" másodperc":" másodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return s+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" óra":" órája");case"hh":return s+(r||t?" óra":" órája");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return s+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hónap":" hónapja");case"MM":return s+(r||t?" hónap":" hónapja");case"y":return"egy"+(r||t?" év":" éve");case"yy":return s+(r||t?" év":" éve")}return""}function r(e){return(e?"":"[múlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan._feb._márc._ápr._máj._jún._júl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return r.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return r.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},6450:function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}})}(n(8787))},1109:function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(8787))},1247:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,r,s){var i=e+" ";switch(r){case"s":return n||s?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return t(e)?i+(n||s?"sekúndur":"sekúndum"):i+"sekúnda";case"m":return n?"mínúta":"mínútu";case"mm":return t(e)?i+(n||s?"mínútur":"mínútum"):n?i+"mínúta":i+"mínútu";case"hh":return t(e)?i+(n||s?"klukkustundir":"klukkustundum"):i+"klukkustund";case"d":return n?"dagur":s?"dag":"degi";case"dd":return t(e)?n?i+"dagar":i+(s?"daga":"dögum"):n?i+"dagur":i+(s?"dag":"degi");case"M":return n?"mánuður":s?"mánuð":"mánuði";case"MM":return t(e)?n?i+"mánuðir":i+(s?"mánuði":"mánuðum"):n?i+"mánuður":i+(s?"mánuð":"mánuði");case"y":return n||s?"ár":"ári";case"yy":return t(e)?i+(n||s?"ár":"árum"):i+(n||s?"ár":"ári")}}e.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},8825:function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(8787))},7350:function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(8787))},7805:function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(e,t){return"元"===t[1]?1:parseInt(t[1]||e,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(e){return e.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(e){return this.week()!==e.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(e,t){switch(t){case"y":return 1===e?"元年":e+"年";case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(8787))},8462:function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(8787))},716:function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/,(function(e,t,n){return"ი"===n?t+"ში":t+n+"ში"}))},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(e)?e.replace(/წელი$/,"წლის წინ"):e},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}})}(n(8787))},4135:function(e,t,n){!function(e){"use strict";var t={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};e.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})}(n(8787))},7600:function(e,t,n){!function(e){"use strict";var t={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},n={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};e.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ព្រឹក|ល្ងាច/,isPM:function(e){return"ល្ងាច"===e},meridiem:function(e,t,n){return e<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/ទី\d{1,2}/,ordinal:"ទី%d",preparse:function(e){return e.replace(/[១២៣៤៥៦៧៨៩០]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(8787))},5623:function(e,t,n){!function(e){"use strict";var t={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},n={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};e.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(e){return e.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ರಾತ್ರಿ"===t?e<4?e:e+12:"ಬೆಳಿಗ್ಗೆ"===t?e:"ಮಧ್ಯಾಹ್ನ"===t?e>=10?e:e+12:"ಸಂಜೆ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ರಾತ್ರಿ":e<10?"ಬೆಳಿಗ್ಗೆ":e<17?"ಮಧ್ಯಾಹ್ನ":e<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(e){return e+"ನೇ"},week:{dow:0,doy:6}})}(n(8787))},4881:function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"일";case"M":return e+"월";case"w":case"W":return e+"주";default:return e}},meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}})}(n(8787))},6872:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},r=["کانونی دووەم","شوبات","ئازار","نیسان","ئایار","حوزەیران","تەمموز","ئاب","ئەیلوول","تشرینی یەكەم","تشرینی دووەم","كانونی یەکەم"];e.defineLocale("ku",{months:r,monthsShort:r,weekdays:"یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌".split("_"),weekdaysShort:"یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌".split("_"),weekdaysMin:"ی_د_س_چ_پ_ه_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ئێواره‌|به‌یانی/,isPM:function(e){return/ئێواره‌/.test(e)},meridiem:function(e,t,n){return e<12?"به‌یانی":"ئێواره‌"},calendar:{sameDay:"[ئه‌مرۆ كاتژمێر] LT",nextDay:"[به‌یانی كاتژمێر] LT",nextWeek:"dddd [كاتژمێر] LT",lastDay:"[دوێنێ كاتژمێر] LT",lastWeek:"dddd [كاتژمێر] LT",sameElse:"L"},relativeTime:{future:"له‌ %s",past:"%s",s:"چه‌ند چركه‌یه‌ك",ss:"چركه‌ %d",m:"یه‌ك خوله‌ك",mm:"%d خوله‌ك",h:"یه‌ك كاتژمێر",hh:"%d كاتژمێر",d:"یه‌ك ڕۆژ",dd:"%d ڕۆژ",M:"یه‌ك مانگ",MM:"%d مانگ",y:"یه‌ك ساڵ",yy:"%d ساڵ"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(8787))},9912:function(e,t,n){!function(e){"use strict";var t={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};e.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кечээ саат] LT",lastWeek:"[Өткөн аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})}(n(8787))},6387:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?s[n][0]:s[n][1]}function n(e){return s(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function r(e){return s(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function s(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return s(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return s(e)}return s(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:r,s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Méint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},9733:function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(e){return"ຕອນແລງ"===e},meridiem:function(e,t,n){return e<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(e){return"ທີ່"+e}})}(n(8787))},6724:function(e,t,n){!function(e){"use strict";var t={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(e,t,n,r){return t?"kelios sekundės":r?"kelių sekundžių":"kelias sekundes"}function r(e,t,n,r){return t?i(n)[0]:r?i(n)[1]:i(n)[2]}function s(e){return e%10==0||e>10&&e<20}function i(e){return t[e].split("_")}function o(e,t,n,o){var a=e+" ";return 1===e?a+r(e,t,n[0],o):t?a+(s(e)?i(n)[1]:i(n)[0]):o?a+i(n)[1]:a+(s(e)?i(n)[1]:i(n)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:n,ss:o,m:r,mm:o,h:r,hh:o,d:r,dd:o,M:r,MM:o,y:r,yy:o},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(8787))},9705:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function r(e,r,s){return e+" "+n(t[s],e,r)}function s(e,r,s){return n(t[s],e,r)}function i(e,t){return t?"dažas sekundes":"dažām sekundēm"}e.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:i,ss:r,m:s,mm:r,h:s,hh:r,d:s,dd:r,M:s,MM:r,y:s,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},3972:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var s=t.words[r];return 1===r.length?n?s[0]:s[1]:e+" "+t.correctGrammaticalCase(e,s)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(8787))},2770:function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(8787))},5326:function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"за %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"една минута",mm:"%d минути",h:"еден час",hh:"%d часа",d:"еден ден",dd:"%d дена",M:"еден месец",MM:"%d месеци",y:"една година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(8787))},648:function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(e,t){return 12===e&&(e=0),"രാത്രി"===t&&e>=4||"ഉച്ച കഴിഞ്ഞ്"===t||"വൈകുന്നേരം"===t?e+12:e},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(8787))},7227:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){switch(n){case"s":return t?"хэдхэн секунд":"хэдхэн секундын";case"ss":return e+(t?" секунд":" секундын");case"m":case"mm":return e+(t?" минут":" минутын");case"h":case"hh":return e+(t?" цаг":" цагийн");case"d":case"dd":return e+(t?" өдөр":" өдрийн");case"M":case"MM":return e+(t?" сар":" сарын");case"y":case"yy":return e+(t?" жил":" жилийн");default:return e}}e.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/ҮӨ|ҮХ/i,isPM:function(e){return"ҮХ"===e},meridiem:function(e,t,n){return e<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} өдөр/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" өдөр";default:return e}}})}(n(8787))},2482:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function r(e,t,n,r){var s="";if(t)switch(n){case"s":s="काही सेकंद";break;case"ss":s="%d सेकंद";break;case"m":s="एक मिनिट";break;case"mm":s="%d मिनिटे";break;case"h":s="एक तास";break;case"hh":s="%d तास";break;case"d":s="एक दिवस";break;case"dd":s="%d दिवस";break;case"M":s="एक महिना";break;case"MM":s="%d महिने";break;case"y":s="एक वर्ष";break;case"yy":s="%d वर्षे"}else switch(n){case"s":s="काही सेकंदां";break;case"ss":s="%d सेकंदां";break;case"m":s="एका मिनिटा";break;case"mm":s="%d मिनिटां";break;case"h":s="एका तासा";break;case"hh":s="%d तासां";break;case"d":s="एका दिवसा";break;case"dd":s="%d दिवसां";break;case"M":s="एका महिन्या";break;case"MM":s="%d महिन्यां";break;case"y":s="एका वर्षा";break;case"yy":s="%d वर्षां"}return s.replace(/%d/i,e)}e.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,meridiemHour:function(e,t){return 12===e&&(e=0),"पहाटे"===t||"सकाळी"===t?e:"दुपारी"===t||"सायंकाळी"===t||"रात्री"===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"पहाटे":e<12?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(8787))},5543:function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(8787))},3859:function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(8787))},355:function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(8787))},1980:function(e,t,n){!function(e){"use strict";var t={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};e.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(8787))},3921:function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},6866:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(e,t){return 12===e&&(e=0),"राति"===t?e<4?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राति":e<12?"बिहान":e<16?"दिउँसो":e<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(8787))},6455:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],s=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(8787))},1277:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],s=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",w:"één week",ww:"%d weken",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(8787))},3945:function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._må._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_må_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},6198:function(e,t,n){!function(e){"use strict";e.defineLocale("oc-lnc",{months:{standalone:"genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre".split("_"),format:"de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[uèi a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ièr a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(8787))},441:function(e,t,n){!function(e){"use strict";var t={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};e.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(e){return e.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ਰਾਤ"===t?e<4?e:e+12:"ਸਵੇਰ"===t?e:"ਦੁਪਹਿਰ"===t?e>=10?e:e+12:"ਸ਼ਾਮ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ਰਾਤ":e<10?"ਸਵੇਰ":e<17?"ਦੁਪਹਿਰ":e<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(8787))},1340:function(e,t,n){!function(e){"use strict";var t="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),r=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^paź/i,/^lis/i,/^gru/i];function s(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function i(e,t,n){var r=e+" ";switch(n){case"ss":return r+(s(e)?"sekundy":"sekund");case"m":return t?"minuta":"minutę";case"mm":return r+(s(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return r+(s(e)?"godziny":"godzin");case"ww":return r+(s(e)?"tygodnie":"tygodni");case"MM":return r+(s(e)?"miesiące":"miesięcy");case"yy":return r+(s(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,r){return e?/D MMMM/.test(r)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:i,m:i,mm:i,h:i,hh:i,d:"1 dzień",dd:"%d dni",w:"tydzień",ww:i,M:"miesiąc",MM:i,y:"rok",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},2041:function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"do_2ª_3ª_4ª_5ª_6ª_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",invalidDate:"Data inválida"})}(n(8787))},8708:function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(8787))},3930:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=" ";return(e%100>=20||e>=100&&e%100==0)&&(r=" de "),e+r+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"săptămâni",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:t,m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,w:"o săptămână",ww:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(8787))},5776:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){return"m"===r?n?"минута":"минуту":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[r],+e)}var r=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:n,m:n,mm:n,h:"час",hh:n,d:"день",dd:n,w:"неделя",ww:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}})}(n(8787))},5683:function(e,t,n){!function(e){"use strict";var t=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],n=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(8787))},7447:function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},965:function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(e){return e+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(e){return"ප.ව."===e||"පස් වරු"===e},meridiem:function(e,t,n){return e>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(8787))},2384:function(e,t,n){!function(e){"use strict";var t="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function r(e){return e>1&&e<5}function s(e,t,n,s){var i=e+" ";switch(n){case"s":return t||s?"pár sekúnd":"pár sekundami";case"ss":return t||s?i+(r(e)?"sekundy":"sekúnd"):i+"sekundami";case"m":return t?"minúta":s?"minútu":"minútou";case"mm":return t||s?i+(r(e)?"minúty":"minút"):i+"minútami";case"h":return t?"hodina":s?"hodinu":"hodinou";case"hh":return t||s?i+(r(e)?"hodiny":"hodín"):i+"hodinami";case"d":return t||s?"deň":"dňom";case"dd":return t||s?i+(r(e)?"dni":"dní"):i+"dňami";case"M":return t||s?"mesiac":"mesiacom";case"MM":return t||s?i+(r(e)?"mesiace":"mesiacov"):i+"mesiacmi";case"y":return t||s?"rok":"rokom";case"yy":return t||s?i+(r(e)?"roky":"rokov"):i+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:case 4:case 5:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s,ss:s,m:s,mm:s,h:s,hh:s,d:s,dd:s,M:s,MM:s,y:s,yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},1714:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"ss":return s+=1===e?t?"sekundo":"sekundi":2===e?t||r?"sekundi":"sekundah":e<5?t||r?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return s+=1===e?t?"minuta":"minuto":2===e?t||r?"minuti":"minutama":e<5?t||r?"minute":"minutami":t||r?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return s+=1===e?t?"ura":"uro":2===e?t||r?"uri":"urama":e<5?t||r?"ure":"urami":t||r?"ur":"urami";case"d":return t||r?"en dan":"enim dnem";case"dd":return s+=1===e?t||r?"dan":"dnem":2===e?t||r?"dni":"dnevoma":t||r?"dni":"dnevi";case"M":return t||r?"en mesec":"enim mesecem";case"MM":return s+=1===e?t||r?"mesec":"mesecem":2===e?t||r?"meseca":"mesecema":e<5?t||r?"mesece":"meseci":t||r?"mesecev":"meseci";case"y":return t||r?"eno leto":"enim letom";case"yy":return s+=1===e?t||r?"leto":"letom":2===e?t||r?"leti":"letoma":e<5?t||r?"leta":"leti":t||r?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(8787))},6173:function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},4148:function(e,t,n){!function(e){"use strict";var t={words:{ss:["секунда","секунде","секунди"],m:["један минут","једног минута"],mm:["минут","минута","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],d:["један дан","једног дана"],dd:["дан","дана","дана"],M:["један месец","једног месеца"],MM:["месец","месеца","месеци"],y:["једну годину","једне године"],yy:["годину","године","година"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,r,s){var i,o=t.words[r];return 1===r.length?"y"===r&&n?"једна година":s||n?o[0]:o[1]:(i=t.correctGrammaticalCase(e,o),"yy"===r&&n&&"годину"===i?e+" година":e+" "+i)}};e.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(8787))},4999:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],d:["jedan dan","jednog dana"],dd:["dan","dana","dana"],M:["jedan mesec","jednog meseca"],MM:["mesec","meseca","meseci"],y:["jednu godinu","jedne godine"],yy:["godinu","godine","godina"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,r,s){var i,o=t.words[r];return 1===r.length?"y"===r&&n?"jedna godina":s||n?o[0]:o[1]:(i=t.correctGrammaticalCase(e,o),"yy"===r&&n&&"godinu"===i?e+" godina":e+" "+i)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(8787))},5234:function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(8787))},2234:function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t||2===t?":a":":e")},week:{dow:1,doy:4}})}(n(8787))},6523:function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(8787))},8426:function(e,t,n){!function(e){"use strict";var t={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};e.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},preparse:function(e){return e.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t||"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(8787))},8430:function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(e,t){return 12===e&&(e=0),"రాత్రి"===t?e<4?e:e+12:"ఉదయం"===t?e:"మధ్యాహ్నం"===t?e>=10?e:e+12:"సాయంత్రం"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"రాత్రి":e<10?"ఉదయం":e<17?"మధ్యాహ్నం":e<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(8787))},7739:function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(8787))},118:function(e,t,n){!function(e){"use strict";var t={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};e.defineLocale("tg",{months:{format:"январи_феврали_марти_апрели_майи_июни_июли_августи_сентябри_октябри_ноябри_декабри".split("_"),standalone:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_")},monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Фардо соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/шаб|субҳ|рӯз|бегоҳ/,meridiemHour:function(e,t){return 12===e&&(e=0),"шаб"===t?e<4?e:e+12:"субҳ"===t?e:"рӯз"===t?e>=11?e:e+12:"бегоҳ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"шаб":e<11?"субҳ":e<16?"рӯз":e<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(ум|юм)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})}(n(8787))},2054:function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(8787))},8517:function(e,t,n){!function(e){"use strict";var t={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'ünji",4:"'ünji",100:"'ünji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"Ýanwar_Fewral_Mart_Aprel_Maý_Iýun_Iýul_Awgust_Sentýabr_Oktýabr_Noýabr_Dekabr".split("_"),monthsShort:"Ýan_Few_Mar_Apr_Maý_Iýn_Iýl_Awg_Sen_Okt_Noý_Dek".split("_"),weekdays:"Ýekşenbe_Duşenbe_Sişenbe_Çarşenbe_Penşenbe_Anna_Şenbe".split("_"),weekdaysShort:"Ýek_Duş_Siş_Çar_Pen_Ann_Şen".split("_"),weekdaysMin:"Ýk_Dş_Sş_Çr_Pn_An_Şn".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[düýn] LT",lastWeek:"[geçen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s soň",past:"%s öň",s:"birnäçe sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gün",dd:"%d gün",M:"bir aý",MM:"%d aý",y:"bir ýyl",yy:"%d ýyl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var r=e%10,s=e%100-r,i=e>=100?100:null;return e+(t[r]||t[s]||t[i])}},week:{dow:1,doy:7}})}(n(8787))},2953:function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(8787))},1920:function(e,t,n){!function(e){"use strict";var t="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"}function r(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu’":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"}function s(e,t,n,r){var s=i(e);switch(n){case"ss":return s+" lup";case"mm":return s+" tup";case"hh":return s+" rep";case"dd":return s+" jaj";case"MM":return s+" jar";case"yy":return s+" DIS"}}function i(e){var n=Math.floor(e%1e3/100),r=Math.floor(e%100/10),s=e%10,i="";return n>0&&(i+=t[n]+"vatlh"),r>0&&(i+=(""!==i?" ":"")+t[r]+"maH"),s>0&&(i+=(""!==i?" ":"")+t[s]),""===i?"pagh":i}e.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:r,s:"puS lup",ss:s,m:"wa’ tup",mm:s,h:"wa’ rep",hh:s,d:"wa’ jaj",dd:s,M:"wa’ jar",MM:s,y:"wa’ DIS",yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},8318:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};e.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_Çar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"öö":"ÖÖ":n?"ös":"ÖS"},meridiemParse:/öö|ÖÖ|ös|ÖS/,isPM:function(e){return"ös"===e||"ÖS"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'ıncı";var r=e%10,s=e%100-r,i=e>=100?100:null;return e+(t[r]||t[s]||t[i])}},week:{dow:1,doy:7}})}(n(8787))},5742:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var s={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts",e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras",e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return r||t?s[n][0]:s[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(8787))},4344:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(8787))},8830:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(8787))},5892:function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,meridiemHour:function(e,t){return 12===e&&(e=0),"يېرىم كېچە"===t||"سەھەر"===t||"چۈشتىن بۇرۇن"===t?e:"چۈشتىن كېيىن"===t||"كەچ"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"يېرىم كېچە":r<900?"سەھەر":r<1130?"چۈشتىن بۇرۇن":r<1230?"چۈش":r<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-كۈنى";case"w":case"W":return e+"-ھەپتە";default:return e}},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:7}})}(n(8787))},4984:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){return"m"===r?n?"хвилина":"хвилину":"h"===r?n?"година":"годину":e+" "+t({ss:n?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:n?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:n?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[r],+e)}function r(e,t){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative}function s(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}e.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:r,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:s("[Сьогодні "),nextDay:s("[Завтра "),lastDay:s("[Вчора "),nextWeek:s("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return s("[Минулої] dddd [").call(this);case 1:case 2:case 4:return s("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:n,m:n,mm:n,h:"годину",hh:n,d:"день",dd:n,M:"місяць",MM:n,y:"рік",yy:n},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}(n(8787))},665:function(e,t,n){!function(e){"use strict";var t=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],n=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(8787))},3457:function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(8787))},1673:function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(8787))},5968:function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần trước lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",w:"một tuần",ww:"%d tuần",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(8787))},2785:function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(8787))},3443:function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})}(n(8787))},5206:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(e){return e.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(e){return this.week()!==e.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(8787))},2258:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1200?"上午":1200===r?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(8787))},9759:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-mo",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"D/M/YYYY",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(8787))},1730:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(8787))},8787:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,r;function s(){return t.apply(null,arguments)}function i(e){t=e}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(l(e,t))return!1;return!0}function d(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function m(e,t){var n,r=[],s=e.length;for(n=0;n<s;++n)r.push(t(e[n],n));return r}function p(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return Xn(e,t,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=g()),e._pf}function y(e){if(null==e._isValid){var t=v(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function _(e){var t=f(NaN);return null!=e?p(v(t),e):v(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=s.momentProperties=[],w=!1;function x(e,t){var n,r,s,i=b.length;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=v(t)),d(t._locale)||(e._locale=t._locale),i>0)for(n=0;n<i;n++)d(s=t[r=b[n]])||(e[r]=s);return e}function M(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,s.updateOffset(this),w=!1)}function S(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function T(e){!1===s.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var n=!0;return p((function(){if(null!=s.deprecationHandler&&s.deprecationHandler(null,e),n){var r,i,o,a=[],c=arguments.length;for(i=0;i<c;i++){if(r="","object"==typeof arguments[i]){for(o in r+="\n["+i+"] ",arguments[0])l(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[i];a.push(r)}T(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var E,k={};function L(e,t){null!=s.deprecationHandler&&s.deprecationHandler(e,t),k[e]||(T(t),k[e]=!0)}function A(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e){var t,n;for(n in e)l(e,n)&&(A(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var n,r=p({},e);for(n in t)l(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},p(r[n],e[n]),p(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)l(e,n)&&!l(t,n)&&a(e[n])&&(r[n]=p({},r[n]));return r}function R(e){null!=e&&this.set(e)}s.suppressDeprecationWarnings=!1,s.deprecationHandler=null,E=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var P={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function N(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return A(r)?r.call(t,n):r}function I(e,t,n){var r=""+Math.abs(e),s=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},H={};function j(e,t,n,r){var s=r;"string"==typeof r&&(s=function(){return this[r]()}),e&&(H[e]=s),t&&(H[t[0]]=function(){return I(s.apply(this,arguments),t[1],t[2])}),n&&(H[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Y(e){var t,n,r=e.match(z);for(t=0,n=r.length;t<n;t++)H[r[t]]?r[t]=H[r[t]]:r[t]=U(r[t]);return function(t){var s,i="";for(s=0;s<n;s++)i+=A(r[s])?r[s].call(t,e):r[s];return i}}function V(e,t){return e.isValid()?(t=$(t,e.localeData()),F[t]=F[t]||Y(t),F[t](e)):e.localeData().invalidDate()}function $(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(B.lastIndex=0;n>=0&&B.test(e);)e=e.replace(B,r),B.lastIndex=0,n-=1;return e}var W={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(z).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var q="Invalid date";function X(){return this._invalidDate}var K="%d",J=/\d{1,2}/;function Z(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ee(e,t,n,r){var s=this._relativeTime[n];return A(s)?s(e,t,n,r):s.replace(/%d/i,e)}function te(e,t){var n=this._relativeTime[e>0?"future":"past"];return A(n)?n(t):n.replace(/%s/i,t)}var ne={};function re(e,t){var n=e.toLowerCase();ne[n]=ne[n+"s"]=ne[t]=e}function se(e){return"string"==typeof e?ne[e]||ne[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)l(e,n)&&(t=se(n))&&(r[t]=e[n]);return r}var oe={};function ae(e,t){oe[e]=t}function le(e){var t,n=[];for(t in e)l(e,t)&&n.push({unit:t,priority:oe[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function ce(e){return e%4==0&&e%100!=0||e%400==0}function de(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=de(t)),n}function he(e,t){return function(n){return null!=n?(pe(this,e,n),s.updateOffset(this,t),this):me(this,e)}}function me(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function pe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ce(e.year())&&1===e.month()&&29===e.date()?(n=ue(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),et(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function fe(e){return A(this[e=se(e)])?this[e]():this}function ge(e,t){if("object"==typeof e){var n,r=le(e=ie(e)),s=r.length;for(n=0;n<s;n++)this[r[n].unit](e[r[n].unit])}else if(A(this[e=se(e)]))return this[e](t);return this}var ve,ye=/\d/,_e=/\d\d/,be=/\d{3}/,we=/\d{4}/,xe=/[+-]?\d{6}/,Me=/\d\d?/,Se=/\d\d\d\d?/,Te=/\d\d\d\d\d\d?/,Ce=/\d{1,3}/,Ee=/\d{1,4}/,ke=/[+-]?\d{1,6}/,Le=/\d+/,Ae=/[+-]?\d+/,De=/Z|[+-]\d\d:?\d\d/gi,Oe=/Z|[+-]\d\d(?::?\d\d)?/gi,Re=/[+-]?\d+(\.\d{1,3})?/,Pe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Ne(e,t,n){ve[e]=A(t)?t:function(e,r){return e&&n?n:t}}function Ie(e,t){return l(ve,e)?ve[e](t._strict,t._locale):new RegExp(ze(e))}function ze(e){return Be(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,s){return t||n||r||s})))}function Be(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ve={};var Fe={};function He(e,t){var n,r,s=t;for("string"==typeof e&&(e=[e]),u(t)&&(s=function(e,n){n[t]=ue(e)}),r=e.length,n=0;n<r;n++)Fe[e[n]]=s}function je(e,t){He(e,(function(e,n,r,s){r._w=r._w||{},t(e,r._w,r,s)}))}function Ue(e,t,n){null!=t&&l(Fe,e)&&Fe[e](t,n._a,n,e)}var Ye,Ve=0,$e=1,We=2,Ge=3,qe=4,Xe=5,Ke=6,Je=7,Ze=8;function Qe(e,t){return(e%t+t)%t}function et(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Qe(t,12);return e+=(t-n)/12,1===n?ce(e)?29:28:31-n%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},j("M",["MM",2],"Mo",(function(){return this.month()+1})),j("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),j("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),re("month","M"),ae("month",8),Ne("M",Me),Ne("MM",Me,_e),Ne("MMM",(function(e,t){return t.monthsShortRegex(e)})),Ne("MMMM",(function(e,t){return t.monthsRegex(e)})),He(["M","MM"],(function(e,t){t[$e]=ue(e)-1})),He(["MMM","MMMM"],(function(e,t,n,r){var s=n._locale.monthsParse(e,r,n._strict);null!=s?t[$e]=s:v(n).invalidMonth=e}));var tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,st=Pe,it=Pe;function ot(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function at(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var r,s,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(s=Ye.call(this._shortMonthsParse,o))?s:null:-1!==(s=Ye.call(this._longMonthsParse,o))?s:null:"MMM"===t?-1!==(s=Ye.call(this._shortMonthsParse,o))||-1!==(s=Ye.call(this._longMonthsParse,o))?s:null:-1!==(s=Ye.call(this._longMonthsParse,o))||-1!==(s=Ye.call(this._shortMonthsParse,o))?s:null}function ct(e,t,n){var r,s,i;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function dt(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=ue(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),et(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ut(e){return null!=e?(dt(this,e),s.updateOffset(this,!0),this):me(this,"Month")}function ht(){return et(this.year(),this.month())}function mt(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ft.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=st),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function pt(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ft.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ft(){function e(e,t){return t.length-e.length}var t,n,r=[],s=[],i=[];for(t=0;t<12;t++)n=f([2e3,t]),r.push(this.monthsShort(n,"")),s.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),s.sort(e),i.sort(e),t=0;t<12;t++)r[t]=Be(r[t]),s[t]=Be(s[t]);for(t=0;t<24;t++)i[t]=Be(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function gt(e){return ce(e)?366:365}j("Y",0,0,(function(){var e=this.year();return e<=9999?I(e,4):"+"+e})),j(0,["YY",2],0,(function(){return this.year()%100})),j(0,["YYYY",4],0,"year"),j(0,["YYYYY",5],0,"year"),j(0,["YYYYYY",6,!0],0,"year"),re("year","y"),ae("year",1),Ne("Y",Ae),Ne("YY",Me,_e),Ne("YYYY",Ee,we),Ne("YYYYY",ke,xe),Ne("YYYYYY",ke,xe),He(["YYYYY","YYYYYY"],Ve),He("YYYY",(function(e,t){t[Ve]=2===e.length?s.parseTwoDigitYear(e):ue(e)})),He("YY",(function(e,t){t[Ve]=s.parseTwoDigitYear(e)})),He("Y",(function(e,t){t[Ve]=parseInt(e,10)})),s.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var vt=he("FullYear",!0);function yt(){return ce(this.year())}function _t(e,t,n,r,s,i,o){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,s,i,o),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,s,i,o),a}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wt(e,t,n){var r=7+t-n;return-(7+bt(e,0,r).getUTCDay()-t)%7+r-1}function xt(e,t,n,r,s){var i,o,a=1+7*(t-1)+(7+n-r)%7+wt(e,r,s);return a<=0?o=gt(i=e-1)+a:a>gt(e)?(i=e+1,o=a-gt(e)):(i=e,o=a),{year:i,dayOfYear:o}}function Mt(e,t,n){var r,s,i=wt(e.year(),t,n),o=Math.floor((e.dayOfYear()-i-1)/7)+1;return o<1?r=o+St(s=e.year()-1,t,n):o>St(e.year(),t,n)?(r=o-St(e.year(),t,n),s=e.year()+1):(s=e.year(),r=o),{week:r,year:s}}function St(e,t,n){var r=wt(e,t,n),s=wt(e+1,t,n);return(gt(e)-r+s)/7}function Tt(e){return Mt(e,this._week.dow,this._week.doy).week}j("w",["ww",2],"wo","week"),j("W",["WW",2],"Wo","isoWeek"),re("week","w"),re("isoWeek","W"),ae("week",5),ae("isoWeek",5),Ne("w",Me),Ne("ww",Me,_e),Ne("W",Me),Ne("WW",Me,_e),je(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=ue(e)}));var Ct={dow:0,doy:6};function Et(){return this._week.dow}function kt(){return this._week.doy}function Lt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function At(e){var t=Mt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Dt(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Ot(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rt(e,t){return e.slice(t,7).concat(e.slice(0,t))}j("d",0,"do","day"),j("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),j("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),j("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),j("e",0,0,"weekday"),j("E",0,0,"isoWeekday"),re("day","d"),re("weekday","e"),re("isoWeekday","E"),ae("day",11),ae("weekday",11),ae("isoWeekday",11),Ne("d",Me),Ne("e",Me),Ne("E",Me),Ne("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Ne("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Ne("dddd",(function(e,t){return t.weekdaysRegex(e)})),je(["dd","ddd","dddd"],(function(e,t,n,r){var s=n._locale.weekdaysParse(e,r,n._strict);null!=s?t.d=s:v(n).invalidWeekday=e})),je(["d","e","E"],(function(e,t,n,r){t[r]=ue(e)}));var Pt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Nt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),It="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),zt=Pe,Bt=Pe,Ft=Pe;function Ht(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Rt(n,this._week.dow):e?n[e.day()]:n}function jt(e){return!0===e?Rt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ut(e){return!0===e?Rt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Yt(e,t,n){var r,s,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(s=Ye.call(this._weekdaysParse,o))?s:null:"ddd"===t?-1!==(s=Ye.call(this._shortWeekdaysParse,o))?s:null:-1!==(s=Ye.call(this._minWeekdaysParse,o))?s:null:"dddd"===t?-1!==(s=Ye.call(this._weekdaysParse,o))||-1!==(s=Ye.call(this._shortWeekdaysParse,o))||-1!==(s=Ye.call(this._minWeekdaysParse,o))?s:null:"ddd"===t?-1!==(s=Ye.call(this._shortWeekdaysParse,o))||-1!==(s=Ye.call(this._weekdaysParse,o))||-1!==(s=Ye.call(this._minWeekdaysParse,o))?s:null:-1!==(s=Ye.call(this._minWeekdaysParse,o))||-1!==(s=Ye.call(this._weekdaysParse,o))||-1!==(s=Ye.call(this._shortWeekdaysParse,o))?s:null}function Vt(e,t,n){var r,s,i;if(this._weekdaysParseExact)return Yt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function $t(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Dt(e,this.localeData()),this.add(e-t,"d")):t}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Gt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ot(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function qt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=zt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Xt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Kt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Jt(){function e(e,t){return t.length-e.length}var t,n,r,s,i,o=[],a=[],l=[],c=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=Be(this.weekdaysMin(n,"")),s=Be(this.weekdaysShort(n,"")),i=Be(this.weekdays(n,"")),o.push(r),a.push(s),l.push(i),c.push(r),c.push(s),c.push(i);o.sort(e),a.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Zt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function en(e,t){j(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function tn(e,t){return t._meridiemParse}function nn(e){return"p"===(e+"").toLowerCase().charAt(0)}j("H",["HH",2],0,"hour"),j("h",["hh",2],0,Zt),j("k",["kk",2],0,Qt),j("hmm",0,0,(function(){return""+Zt.apply(this)+I(this.minutes(),2)})),j("hmmss",0,0,(function(){return""+Zt.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),j("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),j("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),en("a",!0),en("A",!1),re("hour","h"),ae("hour",13),Ne("a",tn),Ne("A",tn),Ne("H",Me),Ne("h",Me),Ne("k",Me),Ne("HH",Me,_e),Ne("hh",Me,_e),Ne("kk",Me,_e),Ne("hmm",Se),Ne("hmmss",Te),Ne("Hmm",Se),Ne("Hmmss",Te),He(["H","HH"],Ge),He(["k","kk"],(function(e,t,n){var r=ue(e);t[Ge]=24===r?0:r})),He(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),He(["h","hh"],(function(e,t,n){t[Ge]=ue(e),v(n).bigHour=!0})),He("hmm",(function(e,t,n){var r=e.length-2;t[Ge]=ue(e.substr(0,r)),t[qe]=ue(e.substr(r)),v(n).bigHour=!0})),He("hmmss",(function(e,t,n){var r=e.length-4,s=e.length-2;t[Ge]=ue(e.substr(0,r)),t[qe]=ue(e.substr(r,2)),t[Xe]=ue(e.substr(s)),v(n).bigHour=!0})),He("Hmm",(function(e,t,n){var r=e.length-2;t[Ge]=ue(e.substr(0,r)),t[qe]=ue(e.substr(r))})),He("Hmmss",(function(e,t,n){var r=e.length-4,s=e.length-2;t[Ge]=ue(e.substr(0,r)),t[qe]=ue(e.substr(r,2)),t[Xe]=ue(e.substr(s))}));var rn=/[ap]\.?m?\.?/i,sn=he("Hours",!0);function on(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,ln={calendar:P,longDateFormat:W,invalidDate:q,ordinal:K,dayOfMonthOrdinalParse:J,relativeTime:Q,months:tt,monthsShort:nt,week:Ct,weekdays:Pt,weekdaysMin:It,weekdaysShort:Nt,meridiemParse:rn},cn={},dn={};function un(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function mn(e){for(var t,n,r,s,i=0;i<e.length;){for(t=(s=hn(e[i]).split("-")).length,n=(n=hn(e[i+1]))?n.split("-"):null;t>0;){if(r=fn(s.slice(0,t).join("-")))return r;if(n&&n.length>=t&&un(s,n)>=t-1)break;t--}i++}return an}function pn(e){return null!=e.match("^[^/\\\\]*$")}function fn(t){var r=null;if(void 0===cn[t]&&e&&e.exports&&pn(t))try{r=an._abbr,n(6616)("./"+t),gn(r)}catch(e){cn[t]=null}return cn[t]}function gn(e,t){var n;return e&&((n=d(t)?_n(e):vn(e,t))?an=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function vn(e,t){if(null!==t){var n,r=ln;if(t.abbr=e,null!=cn[e])L("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])r=cn[t.parentLocale]._config;else{if(null==(n=fn(t.parentLocale)))return dn[t.parentLocale]||(dn[t.parentLocale]=[]),dn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return cn[e]=new R(O(r,t)),dn[e]&&dn[e].forEach((function(e){vn(e.name,e.config)})),gn(e),cn[e]}return delete cn[e],null}function yn(e,t){if(null!=t){var n,r,s=ln;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(O(cn[e]._config,t)):(null!=(r=fn(e))&&(s=r._config),t=O(s,t),null==r&&(t.abbr=e),(n=new R(t)).parentLocale=cn[e],cn[e]=n),gn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===gn()&&gn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function _n(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!o(e)){if(t=fn(e))return t;e=[e]}return mn(e)}function bn(){return E(cn)}function wn(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[$e]<0||n[$e]>11?$e:n[We]<1||n[We]>et(n[Ve],n[$e])?We:n[Ge]<0||n[Ge]>24||24===n[Ge]&&(0!==n[qe]||0!==n[Xe]||0!==n[Ke])?Ge:n[qe]<0||n[qe]>59?qe:n[Xe]<0||n[Xe]>59?Xe:n[Ke]<0||n[Ke]>999?Ke:-1,v(e)._overflowDayOfYear&&(t<Ve||t>We)&&(t=We),v(e)._overflowWeeks&&-1===t&&(t=Je),v(e)._overflowWeekday&&-1===t&&(t=Ze),v(e).overflow=t),e}var xn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,Tn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Cn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],En=/^\/?Date\((-?\d+)/i,kn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ln={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function An(e){var t,n,r,s,i,o,a=e._i,l=xn.exec(a)||Mn.exec(a),c=Tn.length,d=Cn.length;if(l){for(v(e).iso=!0,t=0,n=c;t<n;t++)if(Tn[t][1].exec(l[1])){s=Tn[t][0],r=!1!==Tn[t][2];break}if(null==s)return void(e._isValid=!1);if(l[3]){for(t=0,n=d;t<n;t++)if(Cn[t][1].exec(l[3])){i=(l[2]||" ")+Cn[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(l[4]){if(!Sn.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=s+(i||"")+(o||""),Un(e)}else e._isValid=!1}function Dn(e,t,n,r,s,i){var o=[On(e),nt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(s,10)];return i&&o.push(parseInt(i,10)),o}function On(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Rn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Pn(e,t,n){return!e||Nt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Nn(e,t,n){if(e)return Ln[e];if(t)return 0;var r=parseInt(n,10),s=r%100;return(r-s)/100*60+s}function In(e){var t,n=kn.exec(Rn(e._i));if(n){if(t=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!Pn(n[1],t,e))return;e._a=t,e._tzm=Nn(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function zn(e){var t=En.exec(e._i);null===t?(An(e),!1===e._isValid&&(delete e._isValid,In(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:s.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Bn(e,t,n){return null!=e?e:null!=t?t:n}function Fn(e){var t=new Date(s.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Hn(e){var t,n,r,s,i,o=[];if(!e._d){for(r=Fn(e),e._w&&null==e._a[We]&&null==e._a[$e]&&jn(e),null!=e._dayOfYear&&(i=Bn(e._a[Ve],r[Ve]),(e._dayOfYear>gt(i)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=bt(i,0,e._dayOfYear),e._a[$e]=n.getUTCMonth(),e._a[We]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ge]&&0===e._a[qe]&&0===e._a[Xe]&&0===e._a[Ke]&&(e._nextDay=!0,e._a[Ge]=0),e._d=(e._useUTC?bt:_t).apply(null,o),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ge]=24),e._w&&void 0!==e._w.d&&e._w.d!==s&&(v(e).weekdayMismatch=!0)}}function jn(e){var t,n,r,s,i,o,a,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(i=1,o=4,n=Bn(t.GG,e._a[Ve],Mt(Kn(),1,4).year),r=Bn(t.W,1),((s=Bn(t.E,1))<1||s>7)&&(l=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,c=Mt(Kn(),i,o),n=Bn(t.gg,e._a[Ve],c.year),r=Bn(t.w,c.week),null!=t.d?((s=t.d)<0||s>6)&&(l=!0):null!=t.e?(s=t.e+i,(t.e<0||t.e>6)&&(l=!0)):s=i),r<1||r>St(n,i,o)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(a=xt(n,r,s,i,o),e._a[Ve]=a.year,e._dayOfYear=a.dayOfYear)}function Un(e){if(e._f!==s.ISO_8601)if(e._f!==s.RFC_2822){e._a=[],v(e).empty=!0;var t,n,r,i,o,a,l,c=""+e._i,d=c.length,u=0;for(l=(r=$(e._f,e._locale).match(z)||[]).length,t=0;t<l;t++)i=r[t],(n=(c.match(Ie(i,e))||[])[0])&&((o=c.substr(0,c.indexOf(n))).length>0&&v(e).unusedInput.push(o),c=c.slice(c.indexOf(n)+n.length),u+=n.length),H[i]?(n?v(e).empty=!1:v(e).unusedTokens.push(i),Ue(i,n,e)):e._strict&&!n&&v(e).unusedTokens.push(i);v(e).charsLeftOver=d-u,c.length>0&&v(e).unusedInput.push(c),e._a[Ge]<=12&&!0===v(e).bigHour&&e._a[Ge]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[Ge]=Yn(e._locale,e._a[Ge],e._meridiem),null!==(a=v(e).era)&&(e._a[Ve]=e._locale.erasConvertYear(a,e._a[Ve])),Hn(e),wn(e)}else In(e);else An(e)}function Yn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Vn(e){var t,n,r,s,i,o,a=!1,l=e._f.length;if(0===l)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<l;s++)i=0,o=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],Un(t),y(t)&&(o=!0),i+=v(t).charsLeftOver,i+=10*v(t).unusedTokens.length,v(t).score=i,a?i<r&&(r=i,n=t):(null==r||i<r||o)&&(r=i,n=t,o&&(a=!0));p(e,n||t)}function $n(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=m([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Hn(e)}}function Wn(e){var t=new M(wn(Gn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Gn(e){var t=e._i,n=e._f;return e._locale=e._locale||_n(e._l),null===t||void 0===n&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new M(wn(t)):(h(t)?e._d=t:o(n)?Vn(e):n?Un(e):qn(e),y(e)||(e._d=null),e))}function qn(e){var t=e._i;d(t)?e._d=new Date(s.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?zn(e):o(t)?(e._a=m(t.slice(0),(function(e){return parseInt(e,10)})),Hn(e)):a(t)?$n(e):u(t)?e._d=new Date(t):s.createFromInputFallback(e)}function Xn(e,t,n,r,s){var i={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&c(e)||o(e)&&0===e.length)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=s,i._l=n,i._i=e,i._f=t,i._strict=r,Wn(i)}function Kn(e,t,n,r){return Xn(e,t,n,r,!1)}s.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),s.ISO_8601=function(){},s.RFC_2822=function(){};var Jn=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()})),Zn=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}));function Qn(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Kn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function er(){return Qn("isBefore",[].slice.call(arguments,0))}function tr(){return Qn("isAfter",[].slice.call(arguments,0))}var nr=function(){return Date.now?Date.now():+new Date},rr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function sr(e){var t,n,r=!1,s=rr.length;for(t in e)if(l(e,t)&&(-1===Ye.call(rr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<s;++n)if(e[rr[n]]){if(r)return!1;parseFloat(e[rr[n]])!==ue(e[rr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function or(){return Lr(NaN)}function ar(e){var t=ie(e),n=t.year||0,r=t.quarter||0,s=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=sr(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*a*60*60,this._days=+o+7*i,this._months=+s+3*r+12*n,this._data={},this._locale=_n(),this._bubble()}function lr(e){return e instanceof ar}function cr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function dr(e,t,n){var r,s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0;for(r=0;r<s;r++)(n&&e[r]!==t[r]||!n&&ue(e[r])!==ue(t[r]))&&o++;return o+i}function ur(e,t){j(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+I(~~(e/60),2)+t+I(~~e%60,2)}))}ur("Z",":"),ur("ZZ",""),Ne("Z",Oe),Ne("ZZ",Oe),He(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=mr(Oe,e)}));var hr=/([\+\-]|\d\d)/gi;function mr(e,t){var n,r,s=(t||"").match(e);return null===s?null:0===(r=60*(n=((s[s.length-1]||[])+"").match(hr)||["-",0,0])[1]+ue(n[2]))?0:"+"===n[0]?r:-r}function pr(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(S(e)||h(e)?e.valueOf():Kn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),s.updateOffset(n,!1),n):Kn(e).local()}function fr(e){return-Math.round(e._d.getTimezoneOffset())}function gr(e,t,n){var r,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=mr(Oe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=fr(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!t||this._changeInProgress?Pr(this,Lr(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,s.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:fr(this)}function vr(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function yr(e){return this.utcOffset(0,e)}function _r(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(fr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=mr(De,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function wr(e){return!!this.isValid()&&(e=e?Kn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function xr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Mr(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=Gn(t))._a?(e=t._isUTC?f(t._a):Kn(t._a),this._isDSTShifted=this.isValid()&&dr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sr(){return!!this.isValid()&&!this._isUTC}function Tr(){return!!this.isValid()&&this._isUTC}function Cr(){return!!this.isValid()&&this._isUTC&&0===this._offset}s.updateOffset=function(){};var Er=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Lr(e,t){var n,r,s,i=e,o=null;return lr(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(o=Er.exec(e))?(n="-"===o[1]?-1:1,i={y:0,d:ue(o[We])*n,h:ue(o[Ge])*n,m:ue(o[qe])*n,s:ue(o[Xe])*n,ms:ue(cr(1e3*o[Ke]))*n}):(o=kr.exec(e))?(n="-"===o[1]?-1:1,i={y:Ar(o[2],n),M:Ar(o[3],n),w:Ar(o[4],n),d:Ar(o[5],n),h:Ar(o[6],n),m:Ar(o[7],n),s:Ar(o[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(s=Or(Kn(i.from),Kn(i.to)),(i={}).ms=s.milliseconds,i.M=s.months),r=new ar(i),lr(e)&&l(e,"_locale")&&(r._locale=e._locale),lr(e)&&l(e,"_isValid")&&(r._isValid=e._isValid),r}function Ar(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Dr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Or(e,t){var n;return e.isValid()&&t.isValid()?(t=pr(t,e),e.isBefore(t)?n=Dr(e,t):((n=Dr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Rr(e,t){return function(n,r){var s;return null===r||isNaN(+r)||(L(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),Pr(this,Lr(n,r),e),this}}function Pr(e,t,n,r){var i=t._milliseconds,o=cr(t._days),a=cr(t._months);e.isValid()&&(r=null==r||r,a&&dt(e,me(e,"Month")+a*n),o&&pe(e,"Date",me(e,"Date")+o*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&s.updateOffset(e,o||a))}Lr.fn=ar.prototype,Lr.invalid=or;var Nr=Rr(1,"add"),Ir=Rr(-1,"subtract");function zr(e){return"string"==typeof e||e instanceof String}function Br(e){return S(e)||h(e)||zr(e)||u(e)||Hr(e)||Fr(e)||null==e}function Fr(e){var t,n,r=a(e)&&!c(e),s=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],o=i.length;for(t=0;t<o;t+=1)n=i[t],s=s||l(e,n);return r&&s}function Hr(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!u(t)&&zr(e)})).length),t&&n}function jr(e){var t,n,r=a(e)&&!c(e),s=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<i.length;t+=1)n=i[t],s=s||l(e,n);return r&&s}function Ur(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Yr(e,t){1===arguments.length&&(arguments[0]?Br(arguments[0])?(e=arguments[0],t=void 0):jr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Kn(),r=pr(n,this).startOf("day"),i=s.calendarFormat(this,r)||"sameElse",o=t&&(A(t[i])?t[i].call(this,n):t[i]);return this.format(o||this.localeData().calendar(i,this,Kn(n)))}function Vr(){return new M(this)}function $r(e,t){var n=S(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=se(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Wr(e,t){var n=S(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=se(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Gr(e,t,n,r){var s=S(e)?e:Kn(e),i=S(t)?t:Kn(t);return!!(this.isValid()&&s.isValid()&&i.isValid())&&("("===(r=r||"()")[0]?this.isAfter(s,n):!this.isBefore(s,n))&&(")"===r[1]?this.isBefore(i,n):!this.isAfter(i,n))}function qr(e,t){var n,r=S(e)?e:Kn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=se(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Xr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Kr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Jr(e,t,n){var r,s,i;if(!this.isValid())return NaN;if(!(r=pr(e,this)).isValid())return NaN;switch(s=6e4*(r.utcOffset()-this.utcOffset()),t=se(t)){case"year":i=Zr(this,r)/12;break;case"month":i=Zr(this,r);break;case"quarter":i=Zr(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-s)/864e5;break;case"week":i=(this-r-s)/6048e5;break;default:i=this-r}return n?i:de(i)}function Zr(e,t){if(e.date()<t.date())return-Zr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Qr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function es(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?V(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(n,"Z")):V(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ts(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=i+'[")]',this.format(e+t+n+r)}function ns(e){e||(e=this.isUtc()?s.defaultFormatUtc:s.defaultFormat);var t=V(this,e);return this.localeData().postformat(t)}function rs(e,t){return this.isValid()&&(S(e)&&e.isValid()||Kn(e).isValid())?Lr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ss(e){return this.from(Kn(),e)}function is(e,t){return this.isValid()&&(S(e)&&e.isValid()||Kn(e).isValid())?Lr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function os(e){return this.to(Kn(),e)}function as(e){var t;return void 0===e?this._locale._abbr:(null!=(t=_n(e))&&(this._locale=t),this)}s.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",s.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ls=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function cs(){return this._locale}var ds=1e3,us=60*ds,hs=60*us,ms=3506328*hs;function ps(e,t){return(e%t+t)%t}function fs(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ms:new Date(e,t,n).valueOf()}function gs(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ms:Date.UTC(e,t,n)}function vs(e){var t,n;if(void 0===(e=se(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gs:fs,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ps(t+(this._isUTC?0:this.utcOffset()*us),hs);break;case"minute":t=this._d.valueOf(),t-=ps(t,us);break;case"second":t=this._d.valueOf(),t-=ps(t,ds)}return this._d.setTime(t),s.updateOffset(this,!0),this}function ys(e){var t,n;if(void 0===(e=se(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gs:fs,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hs-ps(t+(this._isUTC?0:this.utcOffset()*us),hs)-1;break;case"minute":t=this._d.valueOf(),t+=us-ps(t,us)-1;break;case"second":t=this._d.valueOf(),t+=ds-ps(t,ds)-1}return this._d.setTime(t),s.updateOffset(this,!0),this}function _s(){return this._d.valueOf()-6e4*(this._offset||0)}function bs(){return Math.floor(this.valueOf()/1e3)}function ws(){return new Date(this.valueOf())}function xs(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ms(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ss(){return this.isValid()?this.toISOString():null}function Ts(){return y(this)}function Cs(){return p({},v(this))}function Es(){return v(this).overflow}function ks(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ls(e,t){var n,r,i,o=this._eras||_n("en")._eras;for(n=0,r=o.length;n<r;++n)switch("string"==typeof o[n].since&&(i=s(o[n].since).startOf("day"),o[n].since=i.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":i=s(o[n].until).startOf("day").valueOf(),o[n].until=i.valueOf()}return o}function As(e,t,n){var r,s,i,o,a,l=this.eras();for(e=e.toUpperCase(),r=0,s=l.length;r<s;++r)if(i=l[r].name.toUpperCase(),o=l[r].abbr.toUpperCase(),a=l[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[r];break;case"NNNN":if(i===e)return l[r];break;case"NNNNN":if(a===e)return l[r]}else if([i,o,a].indexOf(e)>=0)return l[r]}function Ds(e,t){var n=e.since<=e.until?1:-1;return void 0===t?s(e.since).year():s(e.since).year()+(t-e.offset)*n}function Os(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Rs(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Ps(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Ns(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return(this.year()-s(i[e].since).year())*n+i[e].offset;return this.year()}function Is(e){return l(this,"_erasNameRegex")||Ys.call(this),e?this._erasNameRegex:this._erasRegex}function zs(e){return l(this,"_erasAbbrRegex")||Ys.call(this),e?this._erasAbbrRegex:this._erasRegex}function Bs(e){return l(this,"_erasNarrowRegex")||Ys.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fs(e,t){return t.erasAbbrRegex(e)}function Hs(e,t){return t.erasNameRegex(e)}function js(e,t){return t.erasNarrowRegex(e)}function Us(e,t){return t._eraYearOrdinalRegex||Le}function Ys(){var e,t,n=[],r=[],s=[],i=[],o=this.eras();for(e=0,t=o.length;e<t;++e)r.push(Be(o[e].name)),n.push(Be(o[e].abbr)),s.push(Be(o[e].narrow)),i.push(Be(o[e].name)),i.push(Be(o[e].abbr)),i.push(Be(o[e].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}function Vs(e,t){j(0,[e,e.length],0,t)}function $s(e){return Js.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ws(e){return Js.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Gs(){return St(this.year(),1,4)}function qs(){return St(this.isoWeekYear(),1,4)}function Xs(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function Ks(){var e=this.localeData()._week;return St(this.weekYear(),e.dow,e.doy)}function Js(e,t,n,r,s){var i;return null==e?Mt(this,r,s).year:(t>(i=St(e,r,s))&&(t=i),Zs.call(this,e,t,n,r,s))}function Zs(e,t,n,r,s){var i=xt(e,t,n,r,s),o=bt(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Qs(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}j("N",0,0,"eraAbbr"),j("NN",0,0,"eraAbbr"),j("NNN",0,0,"eraAbbr"),j("NNNN",0,0,"eraName"),j("NNNNN",0,0,"eraNarrow"),j("y",["y",1],"yo","eraYear"),j("y",["yy",2],0,"eraYear"),j("y",["yyy",3],0,"eraYear"),j("y",["yyyy",4],0,"eraYear"),Ne("N",Fs),Ne("NN",Fs),Ne("NNN",Fs),Ne("NNNN",Hs),Ne("NNNNN",js),He(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var s=n._locale.erasParse(e,r,n._strict);s?v(n).era=s:v(n).invalidEra=e})),Ne("y",Le),Ne("yy",Le),Ne("yyy",Le),Ne("yyyy",Le),Ne("yo",Us),He(["y","yy","yyy","yyyy"],Ve),He(["yo"],(function(e,t,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ve]=n._locale.eraYearOrdinalParse(e,s):t[Ve]=parseInt(e,10)})),j(0,["gg",2],0,(function(){return this.weekYear()%100})),j(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Vs("gggg","weekYear"),Vs("ggggg","weekYear"),Vs("GGGG","isoWeekYear"),Vs("GGGGG","isoWeekYear"),re("weekYear","gg"),re("isoWeekYear","GG"),ae("weekYear",1),ae("isoWeekYear",1),Ne("G",Ae),Ne("g",Ae),Ne("GG",Me,_e),Ne("gg",Me,_e),Ne("GGGG",Ee,we),Ne("gggg",Ee,we),Ne("GGGGG",ke,xe),Ne("ggggg",ke,xe),je(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=ue(e)})),je(["gg","GG"],(function(e,t,n,r){t[r]=s.parseTwoDigitYear(e)})),j("Q",0,"Qo","quarter"),re("quarter","Q"),ae("quarter",7),Ne("Q",ye),He("Q",(function(e,t){t[$e]=3*(ue(e)-1)})),j("D",["DD",2],"Do","date"),re("date","D"),ae("date",9),Ne("D",Me),Ne("DD",Me,_e),Ne("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),He(["D","DD"],We),He("Do",(function(e,t){t[We]=ue(e.match(Me)[0])}));var ei=he("Date",!0);function ti(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}j("DDD",["DDDD",3],"DDDo","dayOfYear"),re("dayOfYear","DDD"),ae("dayOfYear",4),Ne("DDD",Ce),Ne("DDDD",be),He(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=ue(e)})),j("m",["mm",2],0,"minute"),re("minute","m"),ae("minute",14),Ne("m",Me),Ne("mm",Me,_e),He(["m","mm"],qe);var ni=he("Minutes",!1);j("s",["ss",2],0,"second"),re("second","s"),ae("second",15),Ne("s",Me),Ne("ss",Me,_e),He(["s","ss"],Xe);var ri,si,ii=he("Seconds",!1);for(j("S",0,0,(function(){return~~(this.millisecond()/100)})),j(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),j(0,["SSS",3],0,"millisecond"),j(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),j(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),j(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),j(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),j(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),j(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),re("millisecond","ms"),ae("millisecond",16),Ne("S",Ce,ye),Ne("SS",Ce,_e),Ne("SSS",Ce,be),ri="SSSS";ri.length<=9;ri+="S")Ne(ri,Le);function oi(e,t){t[Ke]=ue(1e3*("0."+e))}for(ri="S";ri.length<=9;ri+="S")He(ri,oi);function ai(){return this._isUTC?"UTC":""}function li(){return this._isUTC?"Coordinated Universal Time":""}si=he("Milliseconds",!1),j("z",0,0,"zoneAbbr"),j("zz",0,0,"zoneName");var ci=M.prototype;function di(e){return Kn(1e3*e)}function ui(){return Kn.apply(null,arguments).parseZone()}function hi(e){return e}ci.add=Nr,ci.calendar=Yr,ci.clone=Vr,ci.diff=Jr,ci.endOf=ys,ci.format=ns,ci.from=rs,ci.fromNow=ss,ci.to=is,ci.toNow=os,ci.get=fe,ci.invalidAt=Es,ci.isAfter=$r,ci.isBefore=Wr,ci.isBetween=Gr,ci.isSame=qr,ci.isSameOrAfter=Xr,ci.isSameOrBefore=Kr,ci.isValid=Ts,ci.lang=ls,ci.locale=as,ci.localeData=cs,ci.max=Zn,ci.min=Jn,ci.parsingFlags=Cs,ci.set=ge,ci.startOf=vs,ci.subtract=Ir,ci.toArray=xs,ci.toObject=Ms,ci.toDate=ws,ci.toISOString=es,ci.inspect=ts,"undefined"!=typeof Symbol&&null!=Symbol.for&&(ci[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ci.toJSON=Ss,ci.toString=Qr,ci.unix=bs,ci.valueOf=_s,ci.creationData=ks,ci.eraName=Os,ci.eraNarrow=Rs,ci.eraAbbr=Ps,ci.eraYear=Ns,ci.year=vt,ci.isLeapYear=yt,ci.weekYear=$s,ci.isoWeekYear=Ws,ci.quarter=ci.quarters=Qs,ci.month=ut,ci.daysInMonth=ht,ci.week=ci.weeks=Lt,ci.isoWeek=ci.isoWeeks=At,ci.weeksInYear=Xs,ci.weeksInWeekYear=Ks,ci.isoWeeksInYear=Gs,ci.isoWeeksInISOWeekYear=qs,ci.date=ei,ci.day=ci.days=$t,ci.weekday=Wt,ci.isoWeekday=Gt,ci.dayOfYear=ti,ci.hour=ci.hours=sn,ci.minute=ci.minutes=ni,ci.second=ci.seconds=ii,ci.millisecond=ci.milliseconds=si,ci.utcOffset=gr,ci.utc=yr,ci.local=_r,ci.parseZone=br,ci.hasAlignedHourOffset=wr,ci.isDST=xr,ci.isLocal=Sr,ci.isUtcOffset=Tr,ci.isUtc=Cr,ci.isUTC=Cr,ci.zoneAbbr=ai,ci.zoneName=li,ci.dates=C("dates accessor is deprecated. Use date instead.",ei),ci.months=C("months accessor is deprecated. Use month instead",ut),ci.years=C("years accessor is deprecated. Use year instead",vt),ci.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vr),ci.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Mr);var mi=R.prototype;function pi(e,t,n,r){var s=_n(),i=f().set(r,t);return s[n](i,e)}function fi(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return pi(e,t,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=pi(e,r,n,"month");return s}function gi(e,t,n,r){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var s,i=_n(),o=e?i._week.dow:0,a=[];if(null!=n)return pi(t,(n+o)%7,r,"day");for(s=0;s<7;s++)a[s]=pi(t,(s+o)%7,r,"day");return a}function vi(e,t){return fi(e,t,"months")}function yi(e,t){return fi(e,t,"monthsShort")}function _i(e,t,n){return gi(e,t,n,"weekdays")}function bi(e,t,n){return gi(e,t,n,"weekdaysShort")}function wi(e,t,n){return gi(e,t,n,"weekdaysMin")}mi.calendar=N,mi.longDateFormat=G,mi.invalidDate=X,mi.ordinal=Z,mi.preparse=hi,mi.postformat=hi,mi.relativeTime=ee,mi.pastFuture=te,mi.set=D,mi.eras=Ls,mi.erasParse=As,mi.erasConvertYear=Ds,mi.erasAbbrRegex=zs,mi.erasNameRegex=Is,mi.erasNarrowRegex=Bs,mi.months=ot,mi.monthsShort=at,mi.monthsParse=ct,mi.monthsRegex=pt,mi.monthsShortRegex=mt,mi.week=Tt,mi.firstDayOfYear=kt,mi.firstDayOfWeek=Et,mi.weekdays=Ht,mi.weekdaysMin=Ut,mi.weekdaysShort=jt,mi.weekdaysParse=Vt,mi.weekdaysRegex=qt,mi.weekdaysShortRegex=Xt,mi.weekdaysMinRegex=Kt,mi.isPM=nn,mi.meridiem=on,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ue(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),s.lang=C("moment.lang is deprecated. Use moment.locale instead.",gn),s.langData=C("moment.langData is deprecated. Use moment.localeData instead.",_n);var xi=Math.abs;function Mi(){var e=this._data;return this._milliseconds=xi(this._milliseconds),this._days=xi(this._days),this._months=xi(this._months),e.milliseconds=xi(e.milliseconds),e.seconds=xi(e.seconds),e.minutes=xi(e.minutes),e.hours=xi(e.hours),e.months=xi(e.months),e.years=xi(e.years),this}function Si(e,t,n,r){var s=Lr(t,n);return e._milliseconds+=r*s._milliseconds,e._days+=r*s._days,e._months+=r*s._months,e._bubble()}function Ti(e,t){return Si(this,e,t,1)}function Ci(e,t){return Si(this,e,t,-1)}function Ei(e){return e<0?Math.floor(e):Math.ceil(e)}function ki(){var e,t,n,r,s,i=this._milliseconds,o=this._days,a=this._months,l=this._data;return i>=0&&o>=0&&a>=0||i<=0&&o<=0&&a<=0||(i+=864e5*Ei(Ai(a)+o),o=0,a=0),l.milliseconds=i%1e3,e=de(i/1e3),l.seconds=e%60,t=de(e/60),l.minutes=t%60,n=de(t/60),l.hours=n%24,o+=de(n/24),a+=s=de(Li(o)),o-=Ei(Ai(s)),r=de(a/12),a%=12,l.days=o,l.months=a,l.years=r,this}function Li(e){return 4800*e/146097}function Ai(e){return 146097*e/4800}function Di(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=se(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Li(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ai(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Oi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ue(this._months/12):NaN}function Ri(e){return function(){return this.as(e)}}var Pi=Ri("ms"),Ni=Ri("s"),Ii=Ri("m"),zi=Ri("h"),Bi=Ri("d"),Fi=Ri("w"),Hi=Ri("M"),ji=Ri("Q"),Ui=Ri("y");function Yi(){return Lr(this)}function Vi(e){return e=se(e),this.isValid()?this[e+"s"]():NaN}function $i(e){return function(){return this.isValid()?this._data[e]:NaN}}var Wi=$i("milliseconds"),Gi=$i("seconds"),qi=$i("minutes"),Xi=$i("hours"),Ki=$i("days"),Ji=$i("months"),Zi=$i("years");function Qi(){return de(this.days()/7)}var eo=Math.round,to={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function no(e,t,n,r,s){return s.relativeTime(t||1,!!n,e,r)}function ro(e,t,n,r){var s=Lr(e).abs(),i=eo(s.as("s")),o=eo(s.as("m")),a=eo(s.as("h")),l=eo(s.as("d")),c=eo(s.as("M")),d=eo(s.as("w")),u=eo(s.as("y")),h=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=r,no.apply(null,h)}function so(e){return void 0===e?eo:"function"==typeof e&&(eo=e,!0)}function io(e,t){return void 0!==to[e]&&(void 0===t?to[e]:(to[e]=t,"s"===e&&(to.ss=t-1),!0))}function oo(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,s=!1,i=to;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(s=e),"object"==typeof t&&(i=Object.assign({},to,t),null!=t.s&&null==t.ss&&(i.ss=t.s-1)),r=ro(this,!s,i,n=this.localeData()),s&&(r=n.pastFuture(+this,r)),n.postformat(r)}var ao=Math.abs;function lo(e){return(e>0)-(e<0)||+e}function co(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,s,i,o,a,l=ao(this._milliseconds)/1e3,c=ao(this._days),d=ao(this._months),u=this.asSeconds();return u?(e=de(l/60),t=de(e/60),l%=60,e%=60,n=de(d/12),d%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",s=u<0?"-":"",i=lo(this._months)!==lo(u)?"-":"",o=lo(this._days)!==lo(u)?"-":"",a=lo(this._milliseconds)!==lo(u)?"-":"",s+"P"+(n?i+n+"Y":"")+(d?i+d+"M":"")+(c?o+c+"D":"")+(t||e||l?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(l?a+r+"S":"")):"P0D"}var uo=ar.prototype;return uo.isValid=ir,uo.abs=Mi,uo.add=Ti,uo.subtract=Ci,uo.as=Di,uo.asMilliseconds=Pi,uo.asSeconds=Ni,uo.asMinutes=Ii,uo.asHours=zi,uo.asDays=Bi,uo.asWeeks=Fi,uo.asMonths=Hi,uo.asQuarters=ji,uo.asYears=Ui,uo.valueOf=Oi,uo._bubble=ki,uo.clone=Yi,uo.get=Vi,uo.milliseconds=Wi,uo.seconds=Gi,uo.minutes=qi,uo.hours=Xi,uo.days=Ki,uo.weeks=Qi,uo.months=Ji,uo.years=Zi,uo.humanize=oo,uo.toISOString=co,uo.toString=co,uo.toJSON=co,uo.locale=as,uo.localeData=cs,uo.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",co),uo.lang=ls,j("X",0,0,"unix"),j("x",0,0,"valueOf"),Ne("x",Ae),Ne("X",Re),He("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),He("x",(function(e,t,n){n._d=new Date(ue(e))})),s.version="2.29.4",i(Kn),s.fn=ci,s.min=er,s.max=tr,s.now=nr,s.utc=f,s.unix=di,s.months=vi,s.isDate=h,s.locale=gn,s.invalid=_,s.duration=Lr,s.isMoment=S,s.weekdays=_i,s.parseZone=ui,s.localeData=_n,s.isDuration=lr,s.monthsShort=yi,s.weekdaysMin=wi,s.defineLocale=vn,s.updateLocale=yn,s.locales=bn,s.weekdaysShort=bi,s.normalizeUnits=se,s.relativeTimeRounding=so,s.relativeTimeThreshold=io,s.calendarFormat=Ur,s.prototype=ci,s.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},s}()},4439:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,a,l=s(e),c=1;c<arguments.length;c++){for(var d in o=Object(arguments[c]))n.call(o,d)&&(l[d]=o[d]);if(t){a=t(o);for(var u=0;u<a.length;u++)r.call(o,a[u])&&(l[a[u]]=o[a[u]])}}return l}},8718:function(e,t){var n,r,s;r=[],void 0===(s="function"==typeof(n=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function n(t){var n,r=t.exec(e.substring(f));if(r)return n=r[0],f+=n.length,n}for(var r,s,i,o,a,l=e.length,c=/^[ \t\n\r\u000c]+/,d=/^[, \t\n\r\u000c]+/,u=/^[^ \t\n\r\u000c]+/,h=/[,]+$/,m=/^\d+$/,p=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,f=0,g=[];;){if(n(d),f>=l)return g;r=n(u),s=[],","===r.slice(-1)?(r=r.replace(h,""),y()):v()}function v(){for(n(c),i="",o="in descriptor";;){if(a=e.charAt(f),"in descriptor"===o)if(t(a))i&&(s.push(i),i="",o="after descriptor");else{if(","===a)return f+=1,i&&s.push(i),void y();if("("===a)i+=a,o="in parens";else{if(""===a)return i&&s.push(i),void y();i+=a}}else if("in parens"===o)if(")"===a)i+=a,o="in descriptor";else{if(""===a)return s.push(i),void y();i+=a}else if("after descriptor"===o)if(t(a));else{if(""===a)return void y();o="in descriptor",f-=1}f+=1}}function y(){var t,n,i,o,a,l,c,d,u,h=!1,f={};for(o=0;o<s.length;o++)l=(a=s[o])[a.length-1],c=a.substring(0,a.length-1),d=parseInt(c,10),u=parseFloat(c),m.test(c)&&"w"===l?((t||n)&&(h=!0),0===d?h=!0:t=d):p.test(c)&&"x"===l?((t||n||i)&&(h=!0),u<0?h=!0:n=u):m.test(c)&&"h"===l?((i||n)&&(h=!0),0===d?h=!0:i=d):h=!0;h?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(f.url=r,t&&(f.w=t),n&&(f.d=n),i&&(f.h=i),g.push(f))}}})?n.apply(t,r):n)||(e.exports=s)},3046:e=>{var t=String,n=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t}};e.exports=n(),e.exports.createColors=n},630:(e,t,n)=>{"use strict";let r=n(4562);class s extends r{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=s,s.default=s,r.registerAtRule(s)},1803:(e,t,n)=>{"use strict";let r=n(5840);class s extends r{constructor(e){super(e),this.type="comment"}}e.exports=s,s.default=s},4562:(e,t,n)=>{"use strict";let r,s,i,{isClean:o,my:a}=n(4681),l=n(4688),c=n(1803),d=n(5840);function u(e){return e.map((e=>(e.nodes&&(e.nodes=u(e.nodes)),delete e.source,e)))}function h(e){if(e[o]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)h(t)}class m extends d{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t,n,r=this.getIterator();for(;this.indexes[r]<this.proxyOf.nodes.length&&(t=this.indexes[r],n=e(this.proxyOf.nodes[t],t),!1!==n);)this.indexes[r]+=1;return delete this.indexes[r],n}walk(e){return this.each(((t,n)=>{let r;try{r=e(t,n)}catch(e){throw t.addToError(e)}return!1!==r&&t.walk&&(r=t.walk(e)),r}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((n,r)=>{if("decl"===n.type&&e.test(n.prop))return t(n,r)})):this.walk(((n,r)=>{if("decl"===n.type&&n.prop===e)return t(n,r)})):(t=e,this.walk(((e,n)=>{if("decl"===e.type)return t(e,n)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((n,r)=>{if("rule"===n.type&&e.test(n.selector))return t(n,r)})):this.walk(((n,r)=>{if("rule"===n.type&&n.selector===e)return t(n,r)})):(t=e,this.walk(((e,n)=>{if("rule"===e.type)return t(e,n)})))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((n,r)=>{if("atrule"===n.type&&e.test(n.name))return t(n,r)})):this.walk(((n,r)=>{if("atrule"===n.type&&n.name===e)return t(n,r)})):(t=e,this.walk(((e,n)=>{if("atrule"===e.type)return t(e,n)})))}walkComments(e){return this.walk(((t,n)=>{if("comment"===t.type)return e(t,n)}))}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){let n,r=0===(e=this.index(e))&&"prepend",s=this.normalize(t,this.proxyOf.nodes[e],r).reverse();for(let t of s)this.proxyOf.nodes.splice(e,0,t);for(let t in this.indexes)n=this.indexes[t],e<=n&&(this.indexes[t]=n+s.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let n,r=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let t of r)this.proxyOf.nodes.splice(e+1,0,t);for(let t in this.indexes)n=this.indexes[t],e<n&&(this.indexes[t]=n+r.length);return this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls((r=>{t.props&&!t.props.includes(r.prop)||t.fast&&!r.value.includes(t.fast)||(r.value=r.value.replace(e,n))})),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if("string"==typeof e)e=u(r(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new l(e)]}else if(e.selector)e=[new s(e)];else if(e.name)e=[new i(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new c(e)]}return e.map((e=>(e[a]||m.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[o]&&h(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this,e)))}getProxyProcessor(){return{set:(e,t,n)=>(e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...n)=>e[t](...n.map((e=>"function"==typeof e?(t,n)=>e(t.toProxy(),n):e))):"every"===t||"some"===t?n=>e[t](((e,...t)=>n(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}m.registerParse=e=>{r=e},m.registerRule=e=>{s=e},m.registerAtRule=e=>{i=e},e.exports=m,m.default=m,m.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,i.prototype):"rule"===e.type?Object.setPrototypeOf(e,s.prototype):"decl"===e.type?Object.setPrototypeOf(e,l.prototype):"comment"===e.type&&Object.setPrototypeOf(e,c.prototype),e[a]=!0,e.nodes&&e.nodes.forEach((e=>{m.rebuild(e)}))}},1063:(e,t,n)=>{"use strict";let r=n(3046),s=n(764);class i extends Error{constructor(e,t,n,r,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),r&&(this.source=r),o&&(this.plugin=o),void 0!==t&&void 0!==n&&(this.line=t,this.column=n),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,i)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=r.isColorSupported),s&&e&&(t=s(t));let n,i,o=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,o.length),c=String(l).length;if(e){let{bold:e,red:t,gray:s}=r.createColors(!0);n=n=>e(t(n)),i=e=>s(e)}else n=i=e=>e;return o.slice(a,l).map(((e,t)=>{let r=a+1+t,s=" "+(" "+r).slice(-c)+" | ";if(r===this.line){let t=i(s.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return n(">")+i(s)+e+"\n "+t+n("^")}return" "+i(s)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=i,i.default=i},4688:(e,t,n)=>{"use strict";let r=n(5840);class s extends r{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}e.exports=s,s.default=s},1133:(e,t,n)=>{"use strict";let r,s,i=n(4562);class o extends i{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new r(new s,this,e).stringify()}}o.registerLazyResult=e=>{r=e},o.registerProcessor=e=>{s=e},e.exports=o,o.default=o},9831:(e,t,n)=>{"use strict";let r=n(4688),s=n(3419),i=n(1803),o=n(630),a=n(1016),l=n(5166),c=n(706);function d(e,t){if(Array.isArray(e))return e.map((e=>d(e)));let{inputs:n,...u}=e;if(n){t=[];for(let e of n){let n={...e,__proto__:a.prototype};n.map&&(n.map={...n.map,__proto__:s.prototype}),t.push(n)}}if(u.nodes&&(u.nodes=e.nodes.map((e=>d(e,t)))),u.source){let{inputId:e,...n}=u.source;u.source=n,null!=e&&(u.source.input=t[e])}if("root"===u.type)return new l(u);if("decl"===u.type)return new r(u);if("rule"===u.type)return new c(u);if("comment"===u.type)return new i(u);if("atrule"===u.type)return new o(u);throw new Error("Unknown node type: "+e.type)}e.exports=d,d.default=d},1016:(e,t,n)=>{"use strict";let{SourceMapConsumer:r,SourceMapGenerator:s}=n(1464),{fileURLToPath:i,pathToFileURL:o}=n(3653),{resolve:a,isAbsolute:l}=n(8635),{nanoid:c}=n(8864),d=n(764),u=n(1063),h=n(3419),m=Symbol("fromOffsetCache"),p=Boolean(r&&s),f=Boolean(a&&l);class g{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!f||/^\w+:\/\//.test(t.from)||l(t.from)?this.file=t.from:this.file=a(t.from)),f&&p){let e=new h(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+c(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,n;if(this[m])n=this[m];else{let e=this.css.split("\n");n=new Array(e.length);let t=0;for(let r=0,s=e.length;r<s;r++)n[r]=t,t+=e[r].length+1;this[m]=n}t=n[n.length-1];let r=0;if(e>=t)r=n.length-1;else{let t,s=n.length-2;for(;r<s;)if(t=r+(s-r>>1),e<n[t])s=t-1;else{if(!(e>=n[t+1])){r=t;break}r=t+1}}return{line:r+1,col:e-n[r]+1}}error(e,t,n,r={}){let s;if(!n){let e=this.fromOffset(t);t=e.line,n=e.col}let i=this.origin(t,n);return s=i?new u(e,i.line,i.column,i.source,i.file,r.plugin):new u(e,t,n,this.css,this.file,r.plugin),s.input={line:t,column:n,source:this.css},this.file&&(o&&(s.input.url=o(this.file).toString()),s.input.file=this.file),s}origin(e,t){if(!this.map)return!1;let n,r=this.map.consumer(),s=r.originalPositionFor({line:e,column:t});if(!s.source)return!1;n=l(s.source)?o(s.source):new URL(s.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let a={url:n.toString(),line:s.line,column:s.column};if("file:"===n.protocol){if(!i)throw new Error("file: protocol is not available in this PostCSS build");a.file=i(n)}let c=r.sourceContentFor(s.source);return c&&(a.source=c),a}mapResolve(e){return/^\w+:\/\//.test(e)?e:a(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}e.exports=g,g.default=g,d&&d.registerInput&&d.registerInput(g)},789:(e,t,n)=>{"use strict";let{isClean:r,my:s}=n(4681),i=n(5306),o=n(6344),a=n(4562),l=n(1133),c=(n(2361),n(6800)),d=n(558),u=n(5166);const h={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},m={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},p={postcssPlugin:!0,prepare:!0,Once:!0};function f(e){return"object"==typeof e&&"function"==typeof e.then}function g(e){let t=!1,n=h[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function v(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:g(e),{node:e,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function y(e){return e[r]=!1,e.nodes&&e.nodes.forEach((e=>y(e))),e}let _={};class b{constructor(e,t,n){let r;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof b||t instanceof c)r=y(t.root),t.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let e=d;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{r=e(t,n)}catch(e){this.processed=!0,this.error=e}r&&!r[s]&&a.rebuild(r)}else r=y(t);this.result=new c(e,r,n),this.helpers={..._,result:this.result,postcss:_},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(f(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[r];)e[r]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=o;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new i(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}walkSync(e){e[r]=!0;let t=g(e);for(let n of t)if(0===n)e.nodes&&e.each((e=>{e[r]||this.walkSync(e)}));else{let t=this.listeners[n];if(t&&this.visitSync(t,e.toProxy()))return}}visitSync(e,t){for(let[n,r]of e){let e;this.result.lastPlugin=n;try{e=r(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(f(e))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return f(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?n.postcssVersion:(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(f(n))try{await n}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[r];){e[r]=!0;let t=[v(e)];for(;t.length>0;){let e=this.visitTick(t);if(f(e))try{await e}catch(e){let n=t[t.length-1].node;throw this.handleError(e,n)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>n(e,this.helpers)));await Promise.all(t)}else await n(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(e,t,n)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,n])};for(let t of this.plugins)if("object"==typeof t)for(let n in t){if(!m[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!p[n])if("object"==typeof t[n])for(let r in t[n])e(t,"*"===r?n:n+"-"+r.toLowerCase(),t[n][r]);else"function"==typeof t[n]&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:n,visitors:s}=t;if("root"!==n.type&&"document"!==n.type&&!n.parent)return void e.pop();if(s.length>0&&t.visitorIndex<s.length){let[e,r]=s[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===s.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return r(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){let s,i=t.iterator;for(;s=n.nodes[n.indexes[i]];)if(n.indexes[i]+=1,!s[r])return s[r]=!0,void e.push(v(s));t.iterator=0,delete n.indexes[i]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e)return void(n.nodes&&n.nodes.length&&(n[r]=!0,t.iterator=n.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}}b.registerPostcss=e=>{_=e},e.exports=b,b.default=b,u.registerLazyResult(b),l.registerLazyResult(b)},1194:e=>{"use strict";let t={split(e,t,n){let r=[],s="",i=!1,o=0,a=!1,l=!1;for(let n of e)l?l=!1:"\\"===n?l=!0:a?n===a&&(a=!1):'"'===n||"'"===n?a=n:"("===n?o+=1:")"===n?o>0&&(o-=1):0===o&&t.includes(n)&&(i=!0),i?(""!==s&&r.push(s.trim()),s="",i=!1):s+=n;return(n||""!==s)&&r.push(s.trim()),r},space:e=>t.split(e,[" ","\n","\t"]),comma:e=>t.split(e,[","],!0)};e.exports=t,t.default=t},5306:(e,t,n)=>{"use strict";let{SourceMapConsumer:r,SourceMapGenerator:s}=n(1464),{dirname:i,resolve:o,relative:a,sep:l}=n(8635),{pathToFileURL:c}=n(3653),d=Boolean(r&&s),u=Boolean(i&&o&&a&&l);e.exports=class{constructor(e,t,n){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}previous(){return this.previousMaps||(this.previousMaps=[],this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}))),this.previousMaps}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}clearAnnotation(){if(!1===this.mapOpts.annotation)return;let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}setSourcesContent(){let e={};this.root.walk((t=>{if(t.source){let n=t.source.input.from;n&&!e[n]&&(e[n]=!0,this.map.setSourceContent(this.toUrl(this.path(n)),t.source.input.css))}}))}applyPrevMaps(){for(let e of this.previous()){let t,n=this.toUrl(this.path(e.file)),s=e.root||i(e.file);!1===this.mapOpts.sourcesContent?(t=new r(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map((()=>null)))):t=e.consumer(),this.map.applySourceMap(t,n,this.toUrl(this.path(s)))}}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(0===e.indexOf("<"))return e;if(/^\w+:\/\//.test(e))return e;if(this.mapOpts.absolute)return e;let t=this.opts.to?i(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(t=i(o(t,this.mapOpts.annotation))),e=a(t,e)}toUrl(e){return"\\"===l&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(c)return c(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new s({file:this.outputFile()});let e,t,n=1,r=1,i="<no source>",o={source:"",generated:{line:0,column:0},original:{line:0,column:0}};this.stringify(this.root,((s,a,l)=>{if(this.css+=s,a&&"end"!==l&&(o.generated.line=n,o.generated.column=r-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=s.match(/\n/g),e?(n+=e.length,t=s.lastIndexOf("\n"),r=s.length-t):r+=s.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"!==a.type||a!==e.last||e.raws.semicolon)&&(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=n,o.generated.column=r-2,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,o.generated.line=n,o.generated.column=r-1,this.map.addMapping(o)))}}))}generate(){if(this.clearAnnotation(),u&&d&&this.isMap())return this.generateMap();let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}},5840:(e,t,n)=>{"use strict";let{isClean:r,my:s}=n(4681),i=n(1063),o=n(1164),a=n(6344);function l(e,t){let n=new e.constructor;for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;if("proxyCache"===r)continue;let s=e[r],i=typeof s;"parent"===r&&"object"===i?t&&(n[r]=t):"source"===r?n[r]=s:Array.isArray(s)?n[r]=s.map((e=>l(e,n))):("object"===i&&null!==s&&(s=l(s)),n[r]=s)}return n}class c{constructor(e={}){this.raws={},this[r]=!1,this[s]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let n of e[t])"function"==typeof n.clone?this.append(n.clone()):this.append(n)}else this[t]=e[t]}error(e,t={}){if(this.source){let n=this.positionBy(t);return this.source.input.error(e,n.line,n.column,t)}return new i(e)}warn(e,t,n){let r={node:this};for(let e in n)r[e]=n[e];return e.warn(t,r)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=a){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=l(this);for(let n in e)t[n]=e[n];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let r of e)r===this?n=!0:n?(this.parent.insertAfter(t,r),t=r):this.parent.insertBefore(t,r);n||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}raw(e,t){return(new o).raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let n={},r=null==t;t=t||new Map;let s=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let r=this[e];if(Array.isArray(r))n[e]=r.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof r&&r.toJSON)n[e]=r.toJSON(null,t);else if("source"===e){let i=t.get(r.input);null==i&&(i=s,t.set(r.input,s),s++),n[e]={inputId:i,start:r.start,end:r.end}}else n[e]=r}return r&&(n.inputs=[...t.keys()].map((e=>e.toJSON()))),n}positionInside(e){let t=this.toString(),n=this.source.start.column,r=this.source.start.line;for(let s=0;s<e;s++)"\n"===t[s]?(n=1,r+=1):n+=1;return{line:r,column:n}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n=this.toString().indexOf(e.word);-1!==n&&(t=this.positionInside(n))}return t}getProxyProcessor(){return{set:(e,t,n)=>(e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t]}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[r]){this[r]=!1;let e=this;for(;e=e.parent;)e[r]=!1}}get proxyOf(){return this}}e.exports=c,c.default=c},558:(e,t,n)=>{"use strict";let r=n(4562),s=n(3681),i=n(1016);function o(e,t){let n=new i(e,t),r=new s(n);try{r.parse()}catch(e){throw e}return r.root}e.exports=o,o.default=o,r.registerParse(o)},3681:(e,t,n)=>{"use strict";let r=n(4688),s=n(1466),i=n(1803),o=n(630),a=n(5166),l=n(706);e.exports=class{constructor(e){this.input=e,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=s(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}comment(e){let t=new i;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let e=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}emptyRule(e){let t=new l;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,n=null,r=!1,s=null,i=[],o=e[1].startsWith("--"),a=[],l=e;for(;l;){if(n=l[0],a.push(l),"("===n||"["===n)s||(s=l),i.push("("===n?")":"]");else if(o&&r&&"{"===n)s||(s=l),i.push("}");else if(0===i.length){if(";"===n){if(r)return void this.decl(a,o);break}if("{"===n)return void this.rule(a);if("}"===n){this.tokenizer.back(a.pop()),t=!0;break}":"===n&&(r=!0)}else n===i[i.length-1]&&(i.pop(),0===i.length&&(s=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),i.length>0&&this.unclosedBracket(s),t&&r){for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}rule(e){e.pop();let t=new l;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let n=new r;this.init(n,e[0][2]);let s,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]);"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(s=e.shift(),":"===s[0]){n.raws.between+=s[1];break}"word"===s[0]&&/\w/.test(s[1])&&this.unknownWord([s]),n.raws.between+=s[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let o=this.spacesAndCommentsFromStart(e);this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(s=e[t],"!important"===s[1].toLowerCase()){n.important=!0;let r=this.stringFrom(e,t);r=this.spacesFromEnd(e)+r," !important"!==r&&(n.raws.important=r);break}if("important"===s[1].toLowerCase()){let r=e.slice(0),s="";for(let e=t;e>0;e--){let t=r[e][0];if(0===s.trim().indexOf("!")&&"space"!==t)break;s=r.pop()[1]+s}0===s.trim().indexOf("!")&&(n.important=!0,n.raws.important=s,e=r)}if("space"!==s[0]&&"comment"!==s[0])break}let a=e.some((e=>"space"!==e[0]&&"comment"!==e[0]));this.raw(n,"value",e),a?n.raws.between+=o:n.value=o+n.value,n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t,n,r,s=new o;s.name=e[1].slice(1),""===s.name&&this.unnamedAtrule(s,e),this.init(s,e[2]);let i=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){s.source.end=this.getPosition(e[2]),this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){for(r=l.length-1,n=l[r];n&&"space"===n[0];)n=l[--r];n&&(s.source.end=this.getPosition(n[3]||n[2]))}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){i=!0;break}}s.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(s.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(s,"params",l),i&&(e=l[l.length-1],s.source.end=this.getPosition(e[3]||e[2]),this.spaces=s.raws.between,s.raws.between="")):(s.raws.afterName="",s.params=""),a&&(s.nodes=[],this.current=s)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}raw(e,t,n){let r,s,i,o,a=n.length,l="",c=!0,d=/^([#.|])?(\w)+/i;for(let t=0;t<a;t+=1)r=n[t],s=r[0],"comment"!==s||"rule"!==e.type?"comment"===s||"space"===s&&t===a-1?c=!1:l+=r[1]:(o=n[t-1],i=n[t+1],"space"!==o[0]&&"space"!==i[0]&&d.test(o[1])&&d.test(i[1])?l+=r[1]:c=!1);if(!c){let r=n.reduce(((e,t)=>e+t[1]),"");e.raws[t]={value:l,raw:r}}e[t]=l}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let r=t;r<e.length;r++)n+=e[r][1];return e.splice(t,e.length-t),n}colon(e){let t,n,r,s=0;for(let[i,o]of e.entries()){if(t=o,n=t[0],"("===n&&(s+=1),")"===n&&(s-=1),0===s&&":"===n){if(r){if("word"===r[0]&&"progid"===r[1])continue;return i}this.doubleColon(t)}r=t}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",e[2])}unknownWord(e){throw this.input.error("Unknown word",e[0][2])}unexpectedClose(e){throw this.input.error("Unexpected }",e[2])}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",e[2])}unnamedAtrule(e,t){throw this.input.error("At-rule without name",t[2])}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let n,r=0;for(let s=t-1;s>=0&&(n=e[s],"space"===n[0]||(r+=1,2!==r));s--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}}},3410:(e,t,n)=>{"use strict";let r=n(1063),s=n(4688),i=n(789),o=n(4562),a=n(2086),l=n(6344),c=n(9831),d=n(1133),u=n(582),h=n(1803),m=n(630),p=n(6800),f=n(1016),g=n(558),v=n(1194),y=n(706),_=n(5166),b=n(5840);function w(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new a(e)}w.plugin=function(e,t){function n(...n){let r=t(...n);return r.postcssPlugin=e,r.postcssVersion=(new a).version,r}let r;return console&&console.warn&&(console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226")),Object.defineProperty(n,"postcss",{get:()=>(r||(r=n()),r)}),n.process=function(e,t,r){return w([n(r)]).process(e,t)},n},w.stringify=l,w.parse=g,w.fromJSON=c,w.list=v,w.comment=e=>new h(e),w.atRule=e=>new m(e),w.decl=e=>new s(e),w.rule=e=>new y(e),w.root=e=>new _(e),w.document=e=>new d(e),w.CssSyntaxError=r,w.Declaration=s,w.Container=o,w.Document=d,w.Comment=h,w.Warning=u,w.AtRule=m,w.Result=p,w.Input=f,w.Rule=y,w.Root=_,w.Node=b,i.registerPostcss(w),e.exports=w,w.default=w},3419:(e,t,n)=>{"use strict";let{SourceMapConsumer:r,SourceMapGenerator:s}=n(1464),{existsSync:i,readFileSync:o}=n(5158),{dirname:a,join:l}=n(8635);class c{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,r=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=a(this.mapFile)),r&&(this.text=r)}consumer(){return this.consumerCache||(this.consumerCache=new r(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return!!e&&e.substr(0,t.length)===t}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let n=e.lastIndexOf(t.pop()),r=e.indexOf("*/",n);n>-1&&r>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,r)))}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}loadFile(e){if(this.root=a(e),i(e))return this.mapFile=e,o(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof r)return s.fromSourceMap(t).toString();if(t instanceof s)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let n=t(e);if(n){let e=this.loadFile(n);if(!e)throw new Error("Unable to load previous source map: "+n.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=l(a(e),t)),this.loadFile(t)}}}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}}e.exports=c,c.default=c},2086:(e,t,n)=>{"use strict";let r=n(789),s=n(1133),i=n(5166);class o{constructor(e=[]){this.version="8.3.11",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return 0!==this.plugins.length||void 0!==t.parser||void 0!==t.stringifier||void 0!==t.syntax||t.hideNothingWarning,new r(this,e,t)}normalize(e){let t=[];for(let n of e)if(!0===n.postcss?n=n():n.postcss&&(n=n.postcss),"object"==typeof n&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if("object"==typeof n&&n.postcssPlugin)t.push(n);else if("function"==typeof n)t.push(n);else{if("object"!=typeof n||!n.parse&&!n.stringify)throw new Error(n+" is not a PostCSS plugin")}return t}}e.exports=o,o.default=o,i.registerProcessor(o),s.registerProcessor(o)},6800:(e,t,n)=>{"use strict";let r=n(582);class s{constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new r(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}}e.exports=s,s.default=s},5166:(e,t,n)=>{"use strict";let r,s,i=n(4562);class o extends i{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let n=this.index(e);return!t&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}normalize(e,t,n){let r=super.normalize(e);if(t)if("prepend"===n)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of r)e.raws.before=t.raws.before;return r}toResult(e={}){return new r(new s,this,e).stringify()}}o.registerLazyResult=e=>{r=e},o.registerProcessor=e=>{s=e},e.exports=o,o.default=o},706:(e,t,n)=>{"use strict";let r=n(4562),s=n(1194);class i extends r{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return s.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}}e.exports=i,i.default=i,r.registerRule(i)},1164:e=>{"use strict";const t={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};e.exports=class{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),r=e.prop+n+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let n="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?n+=e.raws.afterName:r&&(n+=" "),e.nodes)this.block(e,n+r);else{let s=(e.raws.between||"")+(t?";":"");this.builder(n+r+s,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let n=this.raw(e,"semicolon");for(let r=0;r<e.nodes.length;r++){let s=e.nodes[r],i=this.raw(s,"before");i&&this.builder(i),this.stringify(s,t!==r||n)}}block(e,t){let n,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}raw(e,n,r){let s;if(r||(r=n),n&&(s=e.raws[n],void 0!==s))return s;let i=e.parent;if("before"===r){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return t[r];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let t="raw"+((a=r)[0].toUpperCase()+a.slice(1));this[t]?s=this[t](o,e):o.walk((e=>{if(s=e.raws[n],void 0!==s)return!1}))}var a;return void 0===s&&(s=t[r]),o.rawCache[r]=s,s}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((n=>{let r=n.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==n.raws.before){let e=n.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawBeforeComment(e,t){let n;return e.walkComments((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls((e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1})),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeRule(e){let t;return e.walk((n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return t=n.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}beforeAfter(e,t){let n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let r=e.parent,s=0;for(;r&&"root"!==r.type;)s+=1,r=r.parent;if(n.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<s;e++)n+=t}return n}rawValue(e,t){let n=e[t],r=e.raws[t];return r&&r.value===n?r.raw:n}}},6344:(e,t,n)=>{"use strict";let r=n(1164);function s(e,t){new r(t).stringify(e)}e.exports=s,s.default=s},4681:e=>{"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},1466:e=>{"use strict";const t="'".charCodeAt(0),n='"'.charCodeAt(0),r="\\".charCodeAt(0),s="/".charCodeAt(0),i="\n".charCodeAt(0),o=" ".charCodeAt(0),a="\f".charCodeAt(0),l="\t".charCodeAt(0),c="\r".charCodeAt(0),d="[".charCodeAt(0),u="]".charCodeAt(0),h="(".charCodeAt(0),m=")".charCodeAt(0),p="{".charCodeAt(0),f="}".charCodeAt(0),g=";".charCodeAt(0),v="*".charCodeAt(0),y=":".charCodeAt(0),_="@".charCodeAt(0),b=/[\t\n\f\r "#'()/;[\\\]{}]/g,w=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,x=/.[\n"'(/\\]/,M=/[\da-f]/i;e.exports=function(e,S={}){let T,C,E,k,L,A,D,O,R,P,N=e.css.valueOf(),I=S.ignoreErrors,z=N.length,B=0,F=[],H=[];function j(t){throw e.error("Unclosed "+t,B)}return{back:function(e){H.push(e)},nextToken:function(e){if(H.length)return H.pop();if(B>=z)return;let S=!!e&&e.ignoreUnclosed;switch(T=N.charCodeAt(B),T){case i:case o:case l:case c:case a:C=B;do{C+=1,T=N.charCodeAt(C)}while(T===o||T===i||T===l||T===c||T===a);P=["space",N.slice(B,C)],B=C-1;break;case d:case u:case p:case f:case y:case g:case m:{let e=String.fromCharCode(T);P=[e,e,B];break}case h:if(O=F.length?F.pop()[1]:"",R=N.charCodeAt(B+1),"url"===O&&R!==t&&R!==n&&R!==o&&R!==i&&R!==l&&R!==a&&R!==c){C=B;do{if(A=!1,C=N.indexOf(")",C+1),-1===C){if(I||S){C=B;break}j("bracket")}for(D=C;N.charCodeAt(D-1)===r;)D-=1,A=!A}while(A);P=["brackets",N.slice(B,C+1),B,C],B=C}else C=N.indexOf(")",B+1),k=N.slice(B,C+1),-1===C||x.test(k)?P=["(","(",B]:(P=["brackets",k,B,C],B=C);break;case t:case n:E=T===t?"'":'"',C=B;do{if(A=!1,C=N.indexOf(E,C+1),-1===C){if(I||S){C=B+1;break}j("string")}for(D=C;N.charCodeAt(D-1)===r;)D-=1,A=!A}while(A);P=["string",N.slice(B,C+1),B,C],B=C;break;case _:b.lastIndex=B+1,b.test(N),C=0===b.lastIndex?N.length-1:b.lastIndex-2,P=["at-word",N.slice(B,C+1),B,C],B=C;break;case r:for(C=B,L=!0;N.charCodeAt(C+1)===r;)C+=1,L=!L;if(T=N.charCodeAt(C+1),L&&T!==s&&T!==o&&T!==i&&T!==l&&T!==c&&T!==a&&(C+=1,M.test(N.charAt(C)))){for(;M.test(N.charAt(C+1));)C+=1;N.charCodeAt(C+1)===o&&(C+=1)}P=["word",N.slice(B,C+1),B,C],B=C;break;default:T===s&&N.charCodeAt(B+1)===v?(C=N.indexOf("*/",B+2)+1,0===C&&(I||S?C=N.length:j("comment")),P=["comment",N.slice(B,C+1),B,C],B=C):(w.lastIndex=B+1,w.test(N),C=0===w.lastIndex?N.length-1:w.lastIndex-2,P=["word",N.slice(B,C+1),B,C],F.push(P),B=C)}return B++,P},endOfFile:function(){return 0===H.length&&B>=z},position:function(){return B}}}},2361:e=>{"use strict";let t={};e.exports=function(e){t[e]||(t[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},582:e=>{"use strict";class t{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.positionBy(t);this.line=e.line,this.column=e.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=t,t.default=t},8910:(e,t,n)=>{var r=n(984),s=n(9981),i=n(6186),o=[0,2,3],a=[2,1,3];e.exports=function(e,t){e&&(s(e)||i(e))||(t=e||{},e=null);for(var n="string"==typeof(t="number"==typeof t?{count:t}:t||{}).type?t.type:"uint16",l="number"==typeof t.count?t.count:1,c=t.start||0,d=!1!==t.clockwise?o:a,u=d[0],h=d[1],m=d[2],p=6*l,f=e||new(r(n))(p),g=0,v=0;g<p;g+=6,v+=4){var y=g+c;f[y+0]=v+0,f[y+1]=v+1,f[y+2]=v+2,f[y+3]=v+u,f[y+4]=v+h,f[y+5]=v+m}return f}},3388:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var s=function(e){var t,r;function s(t,r,s){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,s))||this}return r=e,(t=s).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,s}(r);s.prototype.name=r.name,s.prototype.code=e,t[e]=s}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var s,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(s="must not be",t=t.replace(/^not /,"")):s="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(s," ").concat(r(t,"type"));else{var l=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(l," ").concat(s," ").concat(r(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},5101:(e,t,n)=>{"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var s=n(6246),i=n(609);n(9105)(c,s);for(var o=r(i.prototype),a=0;a<o.length;a++){var l=o[a];c.prototype[l]||(c.prototype[l]=i.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||process.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},7153:(e,t,n)=>{"use strict";e.exports=s;var r=n(6889);function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}n(9105)(s,r),s.prototype._transform=function(e,t,n){n(null,e)}},6246:(e,t,n)=>{"use strict";var r;e.exports=S,S.ReadableState=M;n(7725).EventEmitter;var s=function(e,t){return e.listeners(t).length},i=n(8774),o=n(8390).Buffer,a=n.g.Uint8Array||function(){};var l,c=n(6602);l=c&&c.debuglog?c.debuglog("stream"):function(){};var d,u,h,m=n(33),p=n(6946),f=n(824).getHighWaterMark,g=n(3388).q,v=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(9105)(S,i);var w=p.errorOrDestroy,x=["error","close","destroy","pause","resume"];function M(e,t,s){r=r||n(5101),e=e||{},"boolean"!=typeof s&&(s=t instanceof r),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=f(this,e,"readableHighWaterMark",s),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(8842).s),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function S(e){if(r=r||n(5101),!(this instanceof S))return new S(e);var t=this instanceof r;this._readableState=new M(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function T(e,t,n,r,s){l("readableAddChunk",t);var i,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?L(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,c);else if(s||(i=function(e,t){var n;r=t,o.isBuffer(r)||r instanceof a||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(c,t)),i)w(e,i);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)c.endEmitted?w(e,new b):C(e,c,t,!0);else if(c.ended)w(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?C(e,c,t,!1):D(e,c)):C(e,c,t,!1)}else r||(c.reading=!1,D(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&L(e)),D(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},S.prototype.unshift=function(e){return T(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){d||(d=n(8842).s);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,s="";null!==r;)s+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var E=1073741824;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(A,e))}function A(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,I(e)}function D(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function R(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function P(e){l("readable nexttick read 0"),e.read(0)}function N(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function z(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(F,t,e))}function F(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function H(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):L(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,s=t.needReadable;return l("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",s=!0),t.ended||t.reading?l("reading or ended",s=!1):s&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?z(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){w(this,new _("_read()"))},S.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,l("pipe count=%d opts=%j",r.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:f;function o(t,s){l("onunpipe"),t===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,l("cleanup"),e.removeListener("close",m),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",h),e.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",f),n.removeListener("data",u),d=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function a(){l("onend"),e.end()}r.endEmitted?process.nextTick(i):n.once("end",i),e.on("unpipe",o);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,I(e))}}(n);e.on("drain",c);var d=!1;function u(t){l("ondata");var s=e.write(t);l("dest.write",s),!1===s&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==H(r.pipes,e))&&!d&&(l("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(t){l("onerror",t),f(),e.removeListener("error",h),0===s(e,"error")&&w(e,t)}function m(){e.removeListener("finish",p),f()}function p(){l("onfinish"),e.removeListener("close",m),f()}function f(){l("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",m),e.once("finish",p),e.emit("pipe",n),r.flowing||(l("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<s;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=H(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var n=i.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,l("on readable",r.length,r.reading),r.length?L(this):r.reading||process.nextTick(P,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=i.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(R,this),n},S.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(R,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(N,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var s in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(l("wrapped data"),n.decoder&&(s=n.decoder.write(s)),n.objectMode&&null==s)||(n.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause()))})),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var i=0;i<x.length;i++)e.on(x[i],this.emit.bind(this,x[i]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=n(2326)),u(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=z,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(e,t){return void 0===h&&(h=n(9990)),h(S,e,t)})},6889:(e,t,n)=>{"use strict";e.exports=d;var r=n(3388).q,s=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(5101);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new i);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}n(9105)(d,l),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,n){n(new s("_transform()"))},d.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},609:(e,t,n)=>{"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var s=r.callback;t.pendingcb--,s(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var s;e.exports=S,S.WritableState=M;var i={deprecate:n(1741)},o=n(8774),a=n(8390).Buffer,l=n.g.Uint8Array||function(){};var c,d=n(6946),u=n(824).getHighWaterMark,h=n(3388).q,m=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,f=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,b=h.ERR_UNKNOWN_ENCODING,w=d.errorOrDestroy;function x(){}function M(e,t,i){s=s||n(5101),e=e||{},"boolean"!=typeof i&&(i=t instanceof s),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,s=n.writecb;if("function"!=typeof s)throw new f;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,s){--t.pendingcb,n?(process.nextTick(s,r),process.nextTick(A,e,t),e._writableState.errorEmitted=!0,w(e,r)):(s(r),e._writableState.errorEmitted=!0,w(e,r),A(e,t))}(e,n,r,t,s);else{var i=k(n)||e.destroyed;i||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?process.nextTick(C,e,n,i,s):C(e,n,i,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(e){var t=this instanceof(s=s||n(5101));if(!t&&!c.call(S,this))return new S(e);this._writableState=new M(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function T(e,t,n,r,s,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(s,t.onwrite):e._write(s,i,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var s=t.bufferedRequestCount,i=new Array(s),o=t.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)i[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;i.allBuffers=l,T(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,d=n.encoding,u=n.callback;if(T(e,t,!1,t.objectMode?1:c.length,c,d,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function L(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=k(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(L,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(9105)(S,o),M.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(M.prototype,"buffer",{get:i.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof M)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new g)},S.prototype.write=function(e,t,n){var r,s=this._writableState,i=!1,o=!s.objectMode&&(r=e,a.isBuffer(r)||r instanceof l);return o&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=x),s.ending?function(e,t){var n=new _;w(e,n),process.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var s;return null===n?s=new y:"string"==typeof n||t.objectMode||(s=new m("chunk",["string","Buffer"],n)),!s||(w(e,s),process.nextTick(r,s),!1)}(this,s,e,n))&&(s.pendingcb++,i=function(e,t,n,r,s,i){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,s);r!==o&&(n=!0,s="buffer",r=o)}var l=t.objectMode?1:r.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:n,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,l,r,s,i);return c}(this,s,o,e,t,n)),i},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=d.destroy,S.prototype._undestroy=d.undestroy,S.prototype._destroy=function(e,t){t(e)}},2326:(e,t,n)=>{"use strict";var r;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(4781),o=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function m(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var n=e[h].read();null!==n&&(e[d]=null,e[o]=null,e[a]=null,t(m(n,!1)))}}function f(e){process.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((s(r={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(m(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[l]?n(e[l]):t(m(void 0,!0))}))}));var n,r=this[d];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(m(void 0,!0)):t[u](n,r)}),r)}}(r,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(m(s,!1));n=new Promise(this[u])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(m(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(v,(s(t={},h,{value:e,writable:!0}),s(t,o,{value:null,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,l,{value:null,writable:!0}),s(t,c,{value:e._readableState.endEmitted,writable:!0}),s(t,u,{value:function(e,t){var r=n[h].read();r?(n[d]=null,n[o]=null,n[a]=null,e(m(r,!1))):(n[o]=e,n[a]=t)},writable:!0}),t));return n[d]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[d]=null,n[o]=null,n[a]=null,t(e)),void(n[l]=e)}var r=n[o];null!==r&&(n[d]=null,n[o]=null,n[a]=null,r(m(void 0,!0))),n[c]=!0})),e.on("readable",f.bind(null,n)),n}},33:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(8390).Buffer,a=n(4854).inspect,l=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,c;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,n,r,s=o.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,n=s,r=a,o.prototype.copy.call(t,n,r),a+=i.data.length,i=i.next;return s}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var s=t.data,i=e>s.length?s.length:e;if(i===s.length?r+=s:r+=s.slice(0,e),0==(e-=i)){i===s.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(i));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var s=n.data,i=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,i),0==(e-=i)){i===s.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(i));break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&i(t.prototype,n),c&&i(t,c),e}()},6946:e=>{"use strict";function t(e,t){r(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,s){var i=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(s?s(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,e)):process.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!s&&e?i._writableState?i._writableState.errorEmitted?process.nextTick(n,i):(i._writableState.errorEmitted=!0,process.nextTick(t,i,e)):process.nextTick(t,i,e):s?(process.nextTick(n,i),s(e)):process.nextTick(n,i)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},4781:(e,t,n)=>{"use strict";var r=n(3388).q.ERR_STREAM_PREMATURE_CLOSE;function s(){}e.exports=function e(t,n,i){if("function"==typeof n)return e(t,null,n);n||(n={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r)}}}(i||s);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||d()},c=t._writableState&&t._writableState.finished,d=function(){a=!1,c=!0,o||i.call(t)},u=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,u=!0,a||i.call(t)},m=function(e){i.call(t,e)},p=function(){var e;return o&&!u?(t._readableState&&t._readableState.ended||(e=new r),i.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),i.call(t,e)):void 0},f=function(){t.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",d),t.on("abort",p),t.req?f():t.on("request",f)),t.on("end",h),t.on("finish",d),!1!==n.error&&t.on("error",m),t.on("close",p),function(){t.removeListener("complete",d),t.removeListener("abort",p),t.removeListener("request",f),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",h),t.removeListener("error",m),t.removeListener("close",p)}}},9990:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},9635:(e,t,n)=>{"use strict";var r;var s=n(3388).q,i=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e,t,s,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(4781)),r(e,{readable:t,writable:s},(function(e){if(e)return i(e);a=!0,i()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new o("pipe"))}}function c(e){e()}function d(e,t){return e.pipe(t)}function u(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s=u(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var o=t.map((function(e,n){var i=n<t.length-1;return l(e,i,n>0,(function(e){r||(r=e),e&&o.forEach(c),i||(o.forEach(c),s(r))}))}));return t.reduce(d)}},824:(e,t,n)=>{"use strict";var r=n(3388).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,s){var i=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new r(s?n:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},8774:(e,t,n)=>{e.exports=n(7725).EventEmitter},8577:(e,t,n)=>{var r=n(8390),s=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return s(e,t,n)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),i(s,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},3294:(e,t,n)=>{const r=n(226),s=n(8651),{isPlainObject:i}=n(1494),o=n(4225),a=n(8718),{parse:l}=n(3410),c=["img","audio","video","picture","svg","object","map","iframe","embed"],d=["script","style"];function u(e,t){e&&Object.keys(e).forEach((function(n){t(e[n],n)}))}function h(e,t){return{}.hasOwnProperty.call(e,t)}function m(e,t){const n=[];return u(e,(function(e){t(e)&&n.push(e)})),n}e.exports=f;const p=/^[^\0\t\n\f\r /<=>]+$/;function f(e,t,n){if(null==e)return"";let v="",y="";function _(e,t){const n=this;this.tag=e,this.attribs=t||{},this.tagPosition=v.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(k.length){k[k.length-1].text+=n.text}},this.updateParentNodeMediaChildren=function(){if(k.length&&c.includes(this.tag)){k[k.length-1].mediaChildren.push(this.tag)}}}(t=Object.assign({},f.defaults,t)).parser=Object.assign({},g,t.parser),d.forEach((function(e){t.allowedTags&&t.allowedTags.indexOf(e)>-1&&!t.allowVulnerableTags&&console.warn(`\n\n⚠️ Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const b=t.nonTextTags||["script","style","textarea","option"];let w,x;t.allowedAttributes&&(w={},x={},u(t.allowedAttributes,(function(e,t){w[t]=[];const n=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(s(e).replace(/\\\*/g,".*")):w[t].push(e)})),n.length&&(x[t]=new RegExp("^("+n.join("|")+")$"))})));const M={},S={};u(t.allowedClasses,(function(e,t){w&&(h(w,t)||(w[t]=[]),w[t].push("class")),M[t]=[];const n=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(s(e).replace(/\\\*/g,".*")):M[t].push(e)})),n.length&&(S[t]=new RegExp("^("+n.join("|")+")$"))}));const T={};let C,E,k,L,A,D,O;u(t.transformTags,(function(e,t){let n;"function"==typeof e?n=e:"string"==typeof e&&(n=f.simpleTransform(e)),"*"===t?C=n:T[t]=n}));let R=!1;N();const P=new r.Parser({onopentag:function(e,n){if(t.enforceHtmlBoundary&&"html"===e&&N(),D)return void O++;const r=new _(e,n);k.push(r);let s=!1;const c=!!r.text;let d;if(h(T,e)&&(d=T[e](e,n),r.attribs=n=d.attribs,void 0!==d.text&&(r.innerText=d.text),e!==d.tagName&&(r.name=e=d.tagName,A[E]=d.tagName)),C&&(d=C(e,n),r.attribs=n=d.attribs,e!==d.tagName&&(r.name=e=d.tagName,A[E]=d.tagName)),(t.allowedTags&&-1===t.allowedTags.indexOf(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(h(e,t))return!1;return!0}(L)||null!=t.nestingLimit&&E>=t.nestingLimit)&&(s=!0,L[E]=!0,"discard"===t.disallowedTagsMode&&-1!==b.indexOf(e)&&(D=!0,O=1),L[E]=!0),E++,s){if("discard"===t.disallowedTagsMode)return;y=v,v=""}v+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(r.innerText=""),(!w||h(w,e)||w["*"])&&u(n,(function(n,s){if(!p.test(s))return void delete r.attribs[s];let c,d=!1;if(!w||h(w,e)&&-1!==w[e].indexOf(s)||w["*"]&&-1!==w["*"].indexOf(s)||h(x,e)&&x[e].test(s)||x["*"]&&x["*"].test(s))d=!0;else if(w&&w[e])for(const t of w[e])if(i(t)&&t.name&&t.name===s){d=!0;let e="";if(!0===t.multiple){const r=n.split(" ");for(const n of r)-1!==t.values.indexOf(n)&&(""===e?e=n:e+=" "+n)}else t.values.indexOf(n)>=0&&(e=n);n=e}if(d){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(s)&&z(e,n))return void delete r.attribs[s];if("script"===e&&"src"===s){let e=!0;try{const r=new URL(n);if(t.allowedScriptHostnames||t.allowedScriptDomains){const n=(t.allowedScriptHostnames||[]).find((function(e){return e===r.hostname})),s=(t.allowedScriptDomains||[]).find((function(e){return r.hostname===e||r.hostname.endsWith(`.${e}`)}));e=n||s}}catch(t){e=!1}if(!e)return void delete r.attribs[s]}if("iframe"===e&&"src"===s){let e=!0;try{if((n=n.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let r="relative://relative-site";for(let e=0;e<100;e++)r+=`/${e}`;const s=new URL(n,r);if(s&&"relative-site"===s.hostname&&"relative:"===s.protocol)e=h(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const n=(t.allowedIframeHostnames||[]).find((function(e){return e===s.hostname})),r=(t.allowedIframeDomains||[]).find((function(e){return s.hostname===e||s.hostname.endsWith(`.${e}`)}));e=n||r}}catch(t){e=!1}if(!e)return void delete r.attribs[s]}if("srcset"===s)try{if(c=a(n),c.forEach((function(e){z("srcset",e.url)&&(e.evil=!0)})),c=m(c,(function(e){return!e.evil})),!c.length)return void delete r.attribs[s];n=m(c,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", "),r.attribs[s]=n}catch(e){return void delete r.attribs[s]}if("class"===s){const t=M[e],i=M["*"],a=[S[e],S["*"]].filter((function(e){return e}));if(!(n=B(n,t&&i?o(t,i):t||i,a)).length)return void delete r.attribs[s]}if("style"===s)try{const i=function(e,t){if(!t)return e;const n=e.nodes[0];let r;r=t[n.selector]&&t["*"]?o(t[n.selector],t["*"]):t[n.selector]||t["*"];r&&(e.nodes[0].nodes=n.nodes.reduce(function(e){return function(t,n){if(h(e,n.prop)){e[n.prop].some((function(e){return e.test(n.value)}))&&t.push(n)}return t}}(r),[]));return e}(l(e+" {"+n+"}"),t.allowedStyles);if(0===(n=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(t.prop+":"+t.value),e}),[]).join(";")}(i)).length)return void delete r.attribs[s]}catch(e){return void delete r.attribs[s]}v+=" "+s,n&&n.length&&(v+='="'+I(n,!0)+'"')}else delete r.attribs[s]})),-1!==t.selfClosing.indexOf(e)?v+=" />":(v+=">",!r.innerText||c||t.textFilter||(v+=I(r.innerText),R=!0)),s&&(v=y+I(v),y="")},ontext:function(e){if(D)return;const n=k[k.length-1];let r;if(n&&(r=n.tag,e=void 0!==n.innerText?n.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==r&&"style"!==r){const n=I(e,!1);t.textFilter&&!R?v+=t.textFilter(n,r):R||(v+=n)}else v+=e;if(k.length){k[k.length-1].text+=e}},onclosetag:function(e){if(D){if(O--,O)return;D=!1}const n=k.pop();if(!n)return;D=!!t.enforceHtmlBoundary&&"html"===e,E--;const r=L[E];if(r){if(delete L[E],"discard"===t.disallowedTagsMode)return void n.updateParentNodeText();y=v,v=""}A[E]&&(e=A[E],delete A[E]),t.exclusiveFilter&&t.exclusiveFilter(n)?v=v.substr(0,n.tagPosition):(n.updateParentNodeMediaChildren(),n.updateParentNodeText(),-1===t.selfClosing.indexOf(e)?(v+="</"+e+">",r&&(v=y+I(v),y="")):r&&(v=y,y=""))}},t.parser);return P.write(e),P.end(),v;function N(){v="",E=0,k=[],L={},A={},D=!1,O=0}function I(e,n){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;")),e}function z(e,n){const r=(n=(n=n.replace(/[\x00-\x20]+/g,"")).replace(/<!--.*?-->/g,"")).match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!r)return!!n.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const s=r[1].toLowerCase();return h(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(s):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(s)}function B(e,t,n){return t?(e=e.split(/\s+/)).filter((function(e){return-1!==t.indexOf(e)||n.some((function(t){return t.test(e)}))})).join(" "):e}}const g={decodeEntities:!0};f.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1},f.simpleTransform=function(e,t,n){return n=void 0===n||n,t=t||{},function(r,s){let i;if(n)for(i in t)s[i]=t[i];else s=t;return{tagName:e,attribs:s}}}},9871:(e,t,n)=>{!function(e){e.parser=function(e,t){return new s(e,t)},e.SAXParser=s,e.SAXStream=o,e.createStream=function(e,t){return new o(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function s(t,n){if(!(this instanceof s))return new s(t,n);var i=this;!function(e){for(var t=0,n=r.length;t<n;t++)e[r[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=n||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=x.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(c)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),S(i,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),s.prototype={end:function(){L(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return k(n,"Cannot write after close. Assign an onready handler.");if(null===t)return L(n);"object"==typeof t&&(t=t.toString());var s=0,i="";for(;i=B(t,s++),n.c=i,i;)switch(n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++),n.state){case x.BEGIN:if(n.state=x.BEGIN_WHITESPACE,"\ufeff"===i)continue;z(n,i);continue;case x.BEGIN_WHITESPACE:z(n,i);continue;case x.TEXT:if(n.sawRoot&&!n.closedRoot){for(var o=s-1;i&&"<"!==i&&"&"!==i;)(i=B(t,s++))&&n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(o,s-1)}"<"!==i||n.sawRoot&&n.closedRoot&&!n.strict?(p(i)||n.sawRoot&&!n.closedRoot||A(n,"Text data outside of root node."),"&"===i?n.state=x.TEXT_ENTITY:n.textNode+=i):(n.state=x.OPEN_WAKA,n.startTagPosition=n.position);continue;case x.SCRIPT:"<"===i?n.state=x.SCRIPT_ENDING:n.script+=i;continue;case x.SCRIPT_ENDING:"/"===i?n.state=x.CLOSE_TAG:(n.script+="<"+i,n.state=x.SCRIPT);continue;case x.OPEN_WAKA:if("!"===i)n.state=x.SGML_DECL,n.sgmlDecl="";else if(p(i));else if(v(d,i))n.state=x.OPEN_TAG,n.tagName=i;else if("/"===i)n.state=x.CLOSE_TAG,n.tagName="";else if("?"===i)n.state=x.PROC_INST,n.procInstName=n.procInstBody="";else{if(A(n,"Unencoded <"),n.startTagPosition+1<n.position){var a=n.position-n.startTagPosition;i=new Array(a).join(" ")+i}n.textNode+="<"+i,n.state=x.TEXT}continue;case x.SGML_DECL:"[CDATA["===(n.sgmlDecl+i).toUpperCase()?(T(n,"onopencdata"),n.state=x.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+i==="--"?(n.state=x.COMMENT,n.comment="",n.sgmlDecl=""):"DOCTYPE"===(n.sgmlDecl+i).toUpperCase()?(n.state=x.DOCTYPE,(n.doctype||n.sawRoot)&&A(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===i?(T(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=x.TEXT):f(i)?(n.state=x.SGML_DECL_QUOTED,n.sgmlDecl+=i):n.sgmlDecl+=i;continue;case x.SGML_DECL_QUOTED:i===n.q&&(n.state=x.SGML_DECL,n.q=""),n.sgmlDecl+=i;continue;case x.DOCTYPE:">"===i?(n.state=x.TEXT,T(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=i,"["===i?n.state=x.DOCTYPE_DTD:f(i)&&(n.state=x.DOCTYPE_QUOTED,n.q=i));continue;case x.DOCTYPE_QUOTED:n.doctype+=i,i===n.q&&(n.q="",n.state=x.DOCTYPE);continue;case x.DOCTYPE_DTD:n.doctype+=i,"]"===i?n.state=x.DOCTYPE:f(i)&&(n.state=x.DOCTYPE_DTD_QUOTED,n.q=i);continue;case x.DOCTYPE_DTD_QUOTED:n.doctype+=i,i===n.q&&(n.state=x.DOCTYPE_DTD,n.q="");continue;case x.COMMENT:"-"===i?n.state=x.COMMENT_ENDING:n.comment+=i;continue;case x.COMMENT_ENDING:"-"===i?(n.state=x.COMMENT_ENDED,n.comment=E(n.opt,n.comment),n.comment&&T(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+i,n.state=x.COMMENT);continue;case x.COMMENT_ENDED:">"!==i?(A(n,"Malformed comment"),n.comment+="--"+i,n.state=x.COMMENT):n.state=x.TEXT;continue;case x.CDATA:"]"===i?n.state=x.CDATA_ENDING:n.cdata+=i;continue;case x.CDATA_ENDING:"]"===i?n.state=x.CDATA_ENDING_2:(n.cdata+="]"+i,n.state=x.CDATA);continue;case x.CDATA_ENDING_2:">"===i?(n.cdata&&T(n,"oncdata",n.cdata),T(n,"onclosecdata"),n.cdata="",n.state=x.TEXT):"]"===i?n.cdata+="]":(n.cdata+="]]"+i,n.state=x.CDATA);continue;case x.PROC_INST:"?"===i?n.state=x.PROC_INST_ENDING:p(i)?n.state=x.PROC_INST_BODY:n.procInstName+=i;continue;case x.PROC_INST_BODY:if(!n.procInstBody&&p(i))continue;"?"===i?n.state=x.PROC_INST_ENDING:n.procInstBody+=i;continue;case x.PROC_INST_ENDING:">"===i?(T(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=x.TEXT):(n.procInstBody+="?"+i,n.state=x.PROC_INST_BODY);continue;case x.OPEN_TAG:v(u,i)?n.tagName+=i:(D(n),">"===i?P(n):"/"===i?n.state=x.OPEN_TAG_SLASH:(p(i)||A(n,"Invalid character in tag name"),n.state=x.ATTRIB));continue;case x.OPEN_TAG_SLASH:">"===i?(P(n,!0),N(n)):(A(n,"Forward-slash in opening tag not followed by >"),n.state=x.ATTRIB);continue;case x.ATTRIB:if(p(i))continue;">"===i?P(n):"/"===i?n.state=x.OPEN_TAG_SLASH:v(d,i)?(n.attribName=i,n.attribValue="",n.state=x.ATTRIB_NAME):A(n,"Invalid attribute name");continue;case x.ATTRIB_NAME:"="===i?n.state=x.ATTRIB_VALUE:">"===i?(A(n,"Attribute without value"),n.attribValue=n.attribName,R(n),P(n)):p(i)?n.state=x.ATTRIB_NAME_SAW_WHITE:v(u,i)?n.attribName+=i:A(n,"Invalid attribute name");continue;case x.ATTRIB_NAME_SAW_WHITE:if("="===i)n.state=x.ATTRIB_VALUE;else{if(p(i))continue;A(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",T(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===i?P(n):v(d,i)?(n.attribName=i,n.state=x.ATTRIB_NAME):(A(n,"Invalid attribute name"),n.state=x.ATTRIB)}continue;case x.ATTRIB_VALUE:if(p(i))continue;f(i)?(n.q=i,n.state=x.ATTRIB_VALUE_QUOTED):(A(n,"Unquoted attribute value"),n.state=x.ATTRIB_VALUE_UNQUOTED,n.attribValue=i);continue;case x.ATTRIB_VALUE_QUOTED:if(i!==n.q){"&"===i?n.state=x.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=i;continue}R(n),n.q="",n.state=x.ATTRIB_VALUE_CLOSED;continue;case x.ATTRIB_VALUE_CLOSED:p(i)?n.state=x.ATTRIB:">"===i?P(n):"/"===i?n.state=x.OPEN_TAG_SLASH:v(d,i)?(A(n,"No whitespace between attributes"),n.attribName=i,n.attribValue="",n.state=x.ATTRIB_NAME):A(n,"Invalid attribute name");continue;case x.ATTRIB_VALUE_UNQUOTED:if(!g(i)){"&"===i?n.state=x.ATTRIB_VALUE_ENTITY_U:n.attribValue+=i;continue}R(n),">"===i?P(n):n.state=x.ATTRIB;continue;case x.CLOSE_TAG:if(n.tagName)">"===i?N(n):v(u,i)?n.tagName+=i:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=x.SCRIPT):(p(i)||A(n,"Invalid tagname in closing tag"),n.state=x.CLOSE_TAG_SAW_WHITE);else{if(p(i))continue;y(d,i)?n.script?(n.script+="</"+i,n.state=x.SCRIPT):A(n,"Invalid tagname in closing tag."):n.tagName=i}continue;case x.CLOSE_TAG_SAW_WHITE:if(p(i))continue;">"===i?N(n):A(n,"Invalid characters in closing tag");continue;case x.TEXT_ENTITY:case x.ATTRIB_VALUE_ENTITY_Q:case x.ATTRIB_VALUE_ENTITY_U:var l,c;switch(n.state){case x.TEXT_ENTITY:l=x.TEXT,c="textNode";break;case x.ATTRIB_VALUE_ENTITY_Q:l=x.ATTRIB_VALUE_QUOTED,c="attribValue";break;case x.ATTRIB_VALUE_ENTITY_U:l=x.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===i?(n[c]+=I(n),n.entity="",n.state=l):v(n.entity.length?m:h,i)?n.entity+=i:(A(n,"Invalid character in entity name"),n[c]+="&"+n.entity+i,n.entity="",n.state=l);continue;default:throw new Error(n,"Unknown state: "+n.state)}n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),s=0,i=0,o=r.length;i<o;i++){var a=t[r[i]].length;if(a>n)switch(r[i]){case"textNode":C(t);break;case"cdata":T(t,"oncdata",t.cdata),t.cdata="";break;case"script":T(t,"onscript",t.script),t.script="";break;default:k(t,"Max buffer length exceeded: "+r[i])}s=Math.max(s,a)}var l=e.MAX_BUFFER_LENGTH-s;t.bufferCheckPosition=l+t.position}(n);return n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;C(e=this),""!==e.cdata&&(T(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(T(e,"onscript",e.script),e.script="")}};try{t=n(8672).Stream}catch(e){t=function(){}}var i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,n){if(!(this instanceof o))return new o(e,n);t.apply(this),this._parser=new s(e,n),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,i.forEach((function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(t.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(8842).s;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,n){var r=this;return r._parser["on"+e]||-1===i.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),t.prototype.on.call(r,e,n)};var a="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",c={xml:a,xmlns:l},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function f(e){return'"'===e||"'"===e}function g(e){return">"===e||p(e)}function v(e,t){return e.test(t)}function y(e,t){return!v(e,t)}var _,b,w,x=0;for(var M in e.STATE={BEGIN:x++,BEGIN_WHITESPACE:x++,TEXT:x++,TEXT_ENTITY:x++,OPEN_WAKA:x++,SGML_DECL:x++,SGML_DECL_QUOTED:x++,DOCTYPE:x++,DOCTYPE_QUOTED:x++,DOCTYPE_DTD:x++,DOCTYPE_DTD_QUOTED:x++,COMMENT_STARTING:x++,COMMENT:x++,COMMENT_ENDING:x++,COMMENT_ENDED:x++,CDATA:x++,CDATA_ENDING:x++,CDATA_ENDING_2:x++,PROC_INST:x++,PROC_INST_BODY:x++,PROC_INST_ENDING:x++,OPEN_TAG:x++,OPEN_TAG_SLASH:x++,ATTRIB:x++,ATTRIB_NAME:x++,ATTRIB_NAME_SAW_WHITE:x++,ATTRIB_VALUE:x++,ATTRIB_VALUE_QUOTED:x++,ATTRIB_VALUE_CLOSED:x++,ATTRIB_VALUE_UNQUOTED:x++,ATTRIB_VALUE_ENTITY_Q:x++,ATTRIB_VALUE_ENTITY_U:x++,CLOSE_TAG:x++,CLOSE_TAG_SAW_WHITE:x++,SCRIPT:x++,SCRIPT_ENDING:x++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[M]]=M;function S(e,t,n){e[t]&&e[t](n)}function T(e,t,n){e.textNode&&C(e),S(e,t,n)}function C(e){e.textNode=E(e.opt,e.textNode),e.textNode&&S(e,"ontext",e.textNode),e.textNode=""}function E(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function k(e,t){return C(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,S(e,"onerror",t),e}function L(e){return e.sawRoot&&!e.closedRoot&&A(e,"Unclosed root tag"),e.state!==x.BEGIN&&e.state!==x.BEGIN_WHITESPACE&&e.state!==x.TEXT&&k(e,"Unexpected end"),C(e),e.c="",e.closed=!0,S(e,"onend"),s.call(e,e.strict,e.opt),e}function A(e,t){if("object"!=typeof e||!(e instanceof s))throw new Error("bad call to strictFail");e.strict&&k(e,t)}function D(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,T(e,"onopentagstart",n)}function O(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],s=n[1];return t&&"xmlns"===e&&(r="xmlns",s=""),{prefix:r,local:s}}function R(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=O(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==a)A(e,"xml: prefix must be bound to "+a+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==l)A(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var s=e.tag,i=e.tags[e.tags.length-1]||e;s.ns===i.ns&&(s.ns=Object.create(i.ns)),s.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,T(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function P(e,t){if(e.opt.xmlns){var n=e.tag,r=O(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(A(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var s=e.tags[e.tags.length-1]||e;n.ns&&s.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){T(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var i=0,o=e.attribList.length;i<o;i++){var a=e.attribList[i],l=a[0],c=a[1],d=O(l,!0),u=d.prefix,h=d.local,m=""===u?"":n.ns[u]||"",p={name:l,value:c,prefix:u,local:h,uri:m};u&&"xmlns"!==u&&!m&&(A(e,"Unbound namespace prefix: "+JSON.stringify(u)),p.uri=u),e.tag.attributes[l]=p,T(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),T(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=x.TEXT:e.state=x.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function N(e){if(!e.tagName)return A(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=x.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=x.SCRIPT);T(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){if(e.tags[t].name===r)break;A(e,"Unexpected close tag")}if(t<0)return A(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=x.TEXT);e.tagName=n;for(var s=e.tags.length;s-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,T(e,"onclosetag",e.tagName);var o={};for(var a in i.ns)o[a]=i.ns[a];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&i.ns!==l.ns&&Object.keys(i.ns).forEach((function(t){var n=i.ns[t];T(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=x.TEXT}function I(e){var t,n=e.entity,r=n.toLowerCase(),s="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),s=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),s=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||s.toLowerCase()!==n?(A(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function z(e,t){"<"===t?(e.state=x.OPEN_WAKA,e.startTagPosition=e.position):p(t)||(A(e,"Non-whitespace before first tag."),e.textNode=t,e.state=x.TEXT)}function B(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}x=e.STATE,String.fromCodePoint||(_=String.fromCharCode,b=Math.floor,w=function(){var e,t,n=16384,r=[],s=-1,i=arguments.length;if(!i)return"";for(var o="";++s<i;){var a=Number(arguments[s]);if(!isFinite(a)||a<0||a>1114111||b(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?r.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,r.push(e,t)),(s+1===i||r.length>n)&&(o+=_.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:w,configurable:!0,writable:!0}):String.fromCodePoint=w)}(t)},8672:(e,t,n)=>{e.exports=s;var r=n(7725).EventEmitter;function s(){r.call(this)}n(9105)(s,r),s.Readable=n(6246),s.Writable=n(609),s.Duplex=n(5101),s.Transform=n(6889),s.PassThrough=n(7153),s.finished=n(4781),s.pipeline=n(9635),s.Stream=s,s.prototype.pipe=function(e,t){var n=this;function s(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",s),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",l));var o=!1;function a(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",s),e.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",c),e.on("error",c),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},8842:(e,t,n)=>{"use strict";var r=n(8577).Buffer,s=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=h,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}t.s=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var s=o(t[r]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--r<n||-2===s)return 0;if((s=o(t[r]))>=0)return s>0&&(e.lastNeed=s-2),s;if(--r<n||-2===s)return 0;if((s=o(t[r]))>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},9803:(e,t,n)=>{"use strict";var r=n(8651);e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError;return t=r(t),e.replace(new RegExp("^"+t+"|"+t+"$","g"),"")}},2205:e=>{var t={min:[0,0],max:[0,0]};function n(e){var n=e.length/2;t.min[0]=e[0],t.min[1]=e[1],t.max[0]=e[0],t.max[1]=e[1];for(var r=0;r<n;r++){var s=e[2*r+0],i=e[2*r+1];t.min[0]=Math.min(s,t.min[0]),t.min[1]=Math.min(i,t.min[1]),t.max[0]=Math.max(s,t.max[0]),t.max[1]=Math.max(i,t.max[1])}}e.exports.computeBox=function(e,r){n(e),r.min.set(t.min[0],t.min[1],0),r.max.set(t.max[0],t.max[1],0)},e.exports.computeSphere=function(e,r){n(e);var s=t.min[0],i=t.min[1],o=t.max[0]-s,a=t.max[1]-i,l=Math.sqrt(o*o+a*a);r.center.set(s+o/2,i+a/2,0),r.radius=l/2}},2732:e=>{e.exports.pages=function(e){var t=new Float32Array(4*e.length*1),n=0;return e.forEach((function(e){var r=e.data.page||0;t[n++]=r,t[n++]=r,t[n++]=r,t[n++]=r})),t},e.exports.uvs=function(e,t,n,r){var s=new Float32Array(4*e.length*2),i=0;return e.forEach((function(e){var o=e.data,a=o.x+o.width,l=o.y+o.height,c=o.x/t,d=o.y/n,u=a/t,h=l/n;r&&(d=(n-o.y)/n,h=(n-l)/n),s[i++]=c,s[i++]=d,s[i++]=c,s[i++]=h,s[i++]=u,s[i++]=h,s[i++]=u,s[i++]=d})),s},e.exports.positions=function(e){var t=new Float32Array(4*e.length*2),n=0;return e.forEach((function(e){var r=e.data,s=e.position[0]+r.xoffset,i=e.position[1]+r.yoffset,o=r.width,a=r.height;t[n++]=s,t[n++]=i,t[n++]=s,t[n++]=i+a,t[n++]=s+o,t[n++]=i+a,t[n++]=s+o,t[n++]=i})),t}},7907:()=>{tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}})},9011:(e,t,n)=>{n(7907)},8010:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=s=e,r=(i=String).prototype,r.isPrototypeOf(n)||(null===(o=s.constructor)||void 0===o?void 0:o.name)===i.name)?"string":t;var n,r;var s,i,o})(t)===e,n=e=>t=>typeof t===e,r=t("string"),s=t("object"),i=t("array"),o=(a=null,e=>a===e);var a;const l=n("boolean"),c=e=>!(e=>null==e)(e),d=n("function"),u=n("number"),h=()=>{},m=e=>()=>e,p=e=>e,f=(e,t)=>e===t;function g(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const v=e=>t=>!e(t),y=e=>e(),_=m(!1),b=m(!0);class w{constructor(e,t){this.tag=e,this.value=t}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return c(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const x=Array.prototype.slice,M=Array.prototype.indexOf,S=Array.prototype.push,T=(e,t)=>((e,t)=>M.call(e,t))(e,t)>-1,C=(e,t)=>{for(let n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},E=(e,t)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r));return n},k=(e,t)=>{const n=e.length,r=new Array(n);for(let s=0;s<n;s++){const n=e[s];r[s]=t(n,s)}return r},L=(e,t)=>{for(let n=0,r=e.length;n<r;n++){t(e[n],n)}},A=(e,t)=>{const n=[],r=[];for(let s=0,i=e.length;s<i;s++){const i=e[s];(t(i,s)?n:r).push(i)}return{pass:n,fail:r}},D=(e,t)=>{const n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];t(s,r)&&n.push(s)}return n},O=(e,t,n)=>(((e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)})(e,((e,r)=>{n=t(n,e,r)})),n),R=(e,t,n)=>(L(e,((e,r)=>{n=t(n,e,r)})),n),P=(e,t)=>((e,t,n)=>{for(let r=0,s=e.length;r<s;r++){const s=e[r];if(t(s,r))return w.some(s);if(n(s,r))break}return w.none()})(e,t,_),N=(e,t)=>{for(let n=0,r=e.length;n<r;n++){if(t(e[n],n))return w.some(n)}return w.none()},I=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);S.apply(t,e[n])}return t},z=(e,t)=>I(k(e,t)),B=(e,t)=>{for(let n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},F=(e,t)=>{const n={};for(let r=0,s=e.length;r<s;r++){const s=e[r];n[String(s)]=t(s,r)}return n},H=(e,t)=>t>=0&&t<e.length?w.some(e[t]):w.none(),j=e=>H(e,0),U=e=>H(e,e.length-1),Y=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return w.none()},V=Object.keys,$=Object.hasOwnProperty,W=(e,t)=>{const n=V(e);for(let r=0,s=n.length;r<s;r++){const s=n[r];t(e[s],s)}},G=(e,t)=>q(e,((e,n)=>({k:n,v:t(e,n)}))),q=(e,t)=>{const n={};return W(e,((e,r)=>{const s=t(e,r);n[s.k]=s.v})),n},X=(e,t)=>{const n={};return((e,t,n,r)=>{W(e,((e,s)=>{(t(e,s)?n:r)(e,s)}))})(e,t,(e=>(t,n)=>{e[n]=t})(n),h),n},K=(e,t)=>{const n=[];return W(e,((e,r)=>{n.push(t(e,r))})),n},J=e=>K(e,p),Z=(e,t)=>$.call(e,t);"undefined"!=typeof window?window:Function("return this;")();const Q=e=>e.dom.nodeName.toLowerCase(),ee=e=>e.dom.nodeType,te=e=>t=>ee(t)===e,ne=e=>8===ee(e)||"#comment"===Q(e),re=te(1),se=te(3),ie=te(9),oe=te(11),ae=e=>t=>re(t)&&Q(t)===e,le=(e,t,n)=>{if(!(r(n)||l(n)||u(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ce=(e,t,n)=>{le(e.dom,t,n)},de=(e,t)=>{const n=e.dom;W(t,((e,t)=>{le(n,t,e)}))},ue=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},he=(e,t)=>w.from(ue(e,t)),me=(e,t)=>{e.dom.removeAttribute(t)},pe=e=>R(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),fe=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},ge={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return fe(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return fe(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return fe(n)},fromDom:fe,fromPoint:(e,t,n)=>w.from(e.dom.elementFromPoint(t,n)).map(fe)},ve=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ye=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,_e=(e,t)=>{const n=void 0===t?document:t.dom;return ye(n)?w.none():w.from(n.querySelector(e)).map(ge.fromDom)},be=(e,t)=>e.dom===t.dom,we=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},xe=ve,Me=e=>ge.fromDom(e.dom.ownerDocument),Se=e=>ie(e)?e:Me(e),Te=e=>w.from(e.dom.parentNode).map(ge.fromDom),Ce=(e,t)=>{const n=d(t)?t:_;let r=e.dom;const s=[];for(;null!==r.parentNode&&void 0!==r.parentNode;){const e=r.parentNode,t=ge.fromDom(e);if(s.push(t),!0===n(t))break;r=e}return s},Ee=e=>w.from(e.dom.previousSibling).map(ge.fromDom),ke=e=>w.from(e.dom.nextSibling).map(ge.fromDom),Le=e=>k(e.dom.childNodes,ge.fromDom),Ae=(e,t)=>{const n=e.dom.childNodes;return w.from(n[t]).map(ge.fromDom)},De=(e,t)=>{Te(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},Oe=(e,t)=>{ke(e).fold((()=>{Te(e).each((e=>{Pe(e,t)}))}),(e=>{De(e,t)}))},Re=(e,t)=>{const n=(e=>Ae(e,0))(e);n.fold((()=>{Pe(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Pe=(e,t)=>{e.dom.appendChild(t.dom)},Ne=(e,t)=>{De(e,t),Pe(t,e)},Ie=(e,t)=>{L(t,((n,r)=>{const s=0===r?e:t[r-1];Oe(s,n)}))},ze=(e,t)=>{L(t,(t=>{Pe(e,t)}))},Be=e=>{e.dom.textContent="",L(Le(e),(e=>{Fe(e)}))},Fe=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},He=e=>{const t=Le(e);t.length>0&&Ie(e,t),Fe(e)},je=(e,t)=>ge.fromDom(e.dom.cloneNode(t)),Ue=e=>je(e,!1),Ye=e=>je(e,!0),Ve=(e,t)=>{const n=ge.fromTag(t),r=pe(e);return de(n,r),n},$e=["tfoot","thead","tbody","colgroup"],We=(e,t,n)=>({element:e,rowspan:t,colspan:n}),Ge=(e,t,n)=>({element:e,cells:t,section:n}),qe=(e,t,n)=>({element:e,isNew:t,isLocked:n}),Xe=(e,t,n,r)=>({element:e,cells:t,section:n,isNew:r}),Ke=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),Je=m(Ke),Ze=Ke?e=>ge.fromDom(e.dom.getRootNode()):Se,Qe=e=>{const t=Ze(e);return oe(n=t)&&c(n.dom.host)?w.some(t):w.none();var n},et=e=>ge.fromDom(e.dom.host),tt=e=>c(e.dom.shadowRoot),nt=e=>{const t=se(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return Qe(ge.fromDom(t)).fold((()=>n.body.contains(t)),(r=nt,s=et,e=>r(s(e))));var r,s},rt=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return ge.fromDom(t)},st=(e,t)=>{let n=[];return L(Le(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(st(e,t))})),n},it=(e,t,n)=>((e,t,n)=>D(Ce(e,n),t))(e,(e=>ve(e,t)),n),ot=(e,t)=>((e,t)=>D(Le(e),t))(e,(e=>ve(e,t))),at=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return ye(n)?[]:k(n.querySelectorAll(e),ge.fromDom)})(t,e);var lt=(e,t,n,r,s)=>e(n,r)?w.some(n):d(s)&&s(n)?w.none():t(n,r,s);const ct=(e,t,n)=>{let r=e.dom;const s=d(n)?n:_;for(;r.parentNode;){r=r.parentNode;const e=ge.fromDom(r);if(t(e))return w.some(e);if(s(e))break}return w.none()},dt=(e,t,n)=>ct(e,(e=>ve(e,t)),n),ut=(e,t)=>((e,t)=>P(e.dom.childNodes,(e=>t(ge.fromDom(e)))).map(ge.fromDom))(e,(e=>ve(e,t))),ht=(e,t)=>_e(t,e),mt=(e,t,n)=>lt(((e,t)=>ve(e,t)),dt,e,t,n),pt=(e,t,n=f)=>e.exists((e=>n(e,t))),ft=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},gt=(e,t)=>e?w.some(t):w.none(),vt=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,yt=(e,t)=>-1!==e.indexOf(t),_t=(e,t)=>vt(e,t,0),bt=(e,t)=>vt(e,t,e.length-t.length),wt=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),xt=e=>e.length>0,Mt=e=>void 0!==e.style&&d(e.style.getPropertyValue),St=(e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Mt(e)&&e.style.setProperty(t,n)},Tt=(e,t,n)=>{const r=e.dom;St(r,t,n)},Ct=(e,t)=>{const n=e.dom;W(t,((e,t)=>{St(n,t,e)}))},Et=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||nt(e)?r:kt(n,t)},kt=(e,t)=>Mt(e)?e.style.getPropertyValue(t):"",Lt=(e,t)=>{const n=e.dom,r=kt(n,t);return w.from(r).filter((e=>e.length>0))},At=(e,t)=>{((e,t)=>{Mt(e)&&e.style.removeProperty(t)})(e.dom,t),pt(he(e,"style").map(wt),"")&&me(e,"style")},Dt=(e,t,n=0)=>he(e,t).map((e=>parseInt(e,10))).getOr(n),Ot=(e,t)=>Dt(e,t,1),Rt=e=>ae("col")(e)?Dt(e,"span",1)>1:Ot(e,"colspan")>1,Pt=e=>Ot(e,"rowspan")>1,Nt=(e,t)=>parseInt(Et(e,t),10),It=m(10),zt=m(10),Bt=(e,t)=>Ft(e,t,b),Ft=(e,t,n)=>z(Le(e),(e=>ve(e,t)?n(e)?[e]:[]:Ft(e,t,n))),Ht=(e,t)=>((e,t,n=_)=>n(t)?w.none():T(e,Q(t))?w.some(t):dt(t,e.join(","),(e=>ve(e,"table")||n(e))))(["td","th"],e,t),jt=e=>Bt(e,"th,td"),Ut=e=>ve(e,"colgroup")?ot(e,"col"):z($t(e),(e=>ot(e,"col"))),Yt=(e,t)=>mt(e,"table",t),Vt=e=>Bt(e,"tr"),$t=e=>Yt(e).fold(m([]),(e=>ot(e,"colgroup"))),Wt=(e,t)=>k(e,(e=>{if("colgroup"===Q(e)){const t=k(Ut(e),(e=>{const t=Dt(e,"span",1);return We(e,1,t)}));return Ge(e,t,"colgroup")}{const n=k(jt(e),(e=>{const t=Dt(e,"rowspan",1),n=Dt(e,"colspan",1);return We(e,t,n)}));return Ge(e,n,t(e))}})),Gt=e=>Te(e).map((e=>{const t=Q(e);return(e=>T($e,e))(t)?t:"tbody"})).getOr("tbody"),qt=e=>{const t=Vt(e),n=[...$t(e),...t];return Wt(n,Gt)},Xt=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},Kt=()=>Jt(0,0),Jt=(e,t)=>({major:e,minor:t}),Zt={nu:Jt,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Kt():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];if(r.test(t))return r}})(e,t);if(!n)return{major:0,minor:0};const r=e=>Number(t.replace(n,"$"+e));return Jt(r(1),r(2))})(e,n)},unknown:Kt},Qt=(e,t)=>{const n=String(t).toLowerCase();return P(e,(e=>e.search(n)))},en=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tn=e=>t=>yt(t,e),nn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>yt(e,"edge/")&&yt(e,"chrome")&&yt(e,"safari")&&yt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,en],search:e=>yt(e,"chrome")&&!yt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>yt(e,"msie")||yt(e,"trident")},{name:"Opera",versionRegexes:[en,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tn("firefox")},{name:"Safari",versionRegexes:[en,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(yt(e,"safari")||yt(e,"mobile/"))&&yt(e,"applewebkit")}],rn=[{name:"Windows",search:tn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>yt(e,"iphone")||yt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tn("linux"),versionRegexes:[]},{name:"Solaris",search:tn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],sn={browsers:m(nn),oses:m(rn)},on="Edge",an="Chromium",ln="Opera",cn="Firefox",dn="Safari",un=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(on),isChromium:r(an),isIE:r("IE"),isOpera:r(ln),isFirefox:r(cn),isSafari:r(dn)}},hn={unknown:()=>un({current:void 0,version:Zt.unknown()}),nu:un,edge:m(on),chromium:m(an),ie:m("IE"),opera:m(ln),firefox:m(cn),safari:m(dn)},mn="Windows",pn="Android",fn="Linux",gn="macOS",vn="Solaris",yn="FreeBSD",_n="ChromeOS",bn=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(mn),isiOS:r("iOS"),isAndroid:r(pn),isMacOS:r(gn),isLinux:r(fn),isSolaris:r(vn),isFreeBSD:r(yn),isChromeOS:r(_n)}},wn={unknown:()=>bn({current:void 0,version:Zt.unknown()}),nu:bn,windows:m(mn),ios:m("iOS"),android:m(pn),linux:m(fn),macos:m(gn),solaris:m(vn),freebsd:m(yn),chromeos:m(_n)},xn=(e,t,n)=>{const r=sn.browsers(),s=sn.oses(),i=t.bind((e=>((e,t)=>Y(t.brands,(t=>{const n=t.brand.toLowerCase();return P(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Zt.nu(parseInt(t.version,10),0)})))})))(r,e))).orThunk((()=>((e,t)=>Qt(e,t).map((e=>{const n=Zt.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e))).fold(hn.unknown,hn.nu),o=((e,t)=>Qt(e,t).map((e=>{const n=Zt.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(s,e).fold(wn.unknown,wn.nu),a=((e,t,n,r)=>{const s=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!s,o=e.isiOS()||e.isAndroid(),a=o||r("(pointer:coarse)"),l=s||!i&&o&&r("(min-device-width:768px)"),c=i||o&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:m(s),isiPhone:m(i),isTablet:m(l),isPhone:m(c),isTouch:m(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:m(d),isDesktop:m(u)}})(o,i,e,n);return{browser:i,os:o,deviceType:a}},Mn=e=>window.matchMedia(e).matches;let Sn=Xt((()=>xn(navigator.userAgent,w.from(navigator.userAgentData),Mn)));const Tn=()=>Sn(),Cn=(e,t)=>{const n=n=>{const r=t(n);if(r<=0||null===r){const t=Et(n,e);return parseFloat(t)||0}return r},r=(e,t)=>R(t,((t,n)=>{const r=Et(e,n),s=void 0===r?0:parseInt(r,10);return isNaN(s)?t:t+s}),0);return{set:(t,n)=>{if(!u(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const r=t.dom;Mt(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:(e,t,n)=>{const s=r(e,n);return t>s?t-s:0}}},En=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?w.none():w.some(t)})(e).getOr(t),kn=(e,t,n)=>En(Et(e,t),n),Ln=(e,t)=>{const n=e.dom,r=n.getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?r:((e,t,n,r)=>t-kn(e,`padding-${n}`,0)-kn(e,`padding-${r}`,0)-kn(e,`border-${n}-width`,0)-kn(e,`border-${r}-width`,0))(e,r,"left","right")},An=Cn("width",(e=>e.dom.offsetWidth)),Dn=e=>An.get(e),On=e=>An.getOuter(e),Rn=e=>Ln(e,"content-box"),Pn=e=>kn(e,"width",e.dom.offsetWidth),Nn=(e,t,n)=>{const r=e.cells,s=r.slice(0,t),i=r.slice(t),o=s.concat(n).concat(i);return Bn(e,o)},In=(e,t,n)=>Nn(e,t,[n]),zn=(e,t,n)=>{e.cells[t]=n},Bn=(e,t)=>Xe(e.element,t,e.section,e.isNew),Fn=(e,t)=>e.cells[t],Hn=(e,t)=>Fn(e,t).element,jn=e=>e.cells.length,Un=e=>{const t=A(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Yn=(e,t,n)=>{const r=k(e.cells,n);return Xe(t(e.element),r,e.section,!0)},Vn="data-snooker-locked-cols",$n=e=>he(e,Vn).bind((e=>w.from(e.match(/\d+/g)))).map((e=>F(e,b))),Wn=e=>{const t=R(Un(e).rows,((e,t)=>(L(t.cells,((t,n)=>{t.isLocked&&(e[n]=!0)})),e)),{}),n=K(t,((e,t)=>parseInt(t,10)));return((e,t)=>{const n=x.call(e,0);return n.sort(t),n})(n)},Gn=(e,t)=>e+","+t,qn=(e,t)=>{const n=z(e.all,(e=>e.cells));return D(n,t)},Xn=e=>{const t={},n=[],r=j(e).map((e=>e.element)).bind(Yt).bind($n).getOr({});let s=0,i=0,o=0;const{pass:a,fail:l}=A(e,(e=>"colgroup"===e.section));L(l,(e=>{const a=[];L(e.cells,(e=>{let n=0;for(;void 0!==t[Gn(o,n)];)n++;const s=((e,t)=>Z(e,t)&&void 0!==e[t]&&null!==e[t])(r,n.toString()),l=((e,t,n,r,s,i)=>({element:e,rowspan:t,colspan:n,row:r,column:s,isLocked:i}))(e.element,e.rowspan,e.colspan,o,n,s);for(let r=0;r<e.colspan;r++)for(let s=0;s<e.rowspan;s++){const e=n+r,a=Gn(o+s,e);t[a]=l,i=Math.max(i,e+1)}a.push(l)})),s++,n.push(Ge(e.element,a,e.section)),o++}));const{columns:c,colgroups:d}=U(a).map((e=>{const t=(e=>{const t={};let n=0;return L(e.cells,(e=>{const r=e.colspan;E(r,(s=>{const i=n+s;t[i]=((e,t,n)=>({element:e,colspan:t,column:n}))(e.element,r,i)})),n+=r})),t})(e),n=((e,t)=>({element:e,columns:t}))(e.element,J(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),u=((e,t)=>({rows:e,columns:t}))(s,i);return{grid:u,access:t,all:n,columns:c,colgroups:d}},Kn={fromTable:e=>{const t=qt(e);return Xn(t)},generate:Xn,getAt:(e,t,n)=>w.from(e.access[Gn(t,n)]),findItem:(e,t,n)=>{const r=qn(e,(e=>n(t,e.element)));return r.length>0?w.some(r[0]):w.none()},filterItems:qn,justCells:e=>z(e.all,(e=>e.cells)),justColumns:e=>J(e.columns),hasColumns:e=>V(e.columns).length>0,getColumnAt:(e,t)=>w.from(e.columns[t])},Jn=(e,t=b)=>{const n=e.grid,r=E(n.columns,p),s=E(n.rows,p);return k(r,(n=>Zn((()=>z(s,(t=>Kn.getAt(e,t,n).filter((e=>e.column===n)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>Kn.getAt(e,0,n)))))},Zn=(e,t,n)=>{const r=e();return P(r,t).orThunk((()=>w.from(r[0]).orThunk(n))).map((e=>e.element))},Qn=e=>{const t=e.grid,n=E(t.rows,p),r=E(t.columns,p);return k(n,(t=>Zn((()=>z(r,(n=>Kn.getAt(e,t,n).filter((e=>e.row===t)).fold(m([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>Kn.getAt(e,t,0)))))},er=(e,t)=>{if(t<0||t>=e.length-1)return w.none();const n=e[t].fold((()=>{const n=(e=>{const t=x.call(e,0);return t.reverse(),t})(e.slice(0,t));return Y(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>w.some({value:e,delta:0}))),r=e[t+1].fold((()=>{const n=e.slice(t+1);return Y(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>w.some({value:e,delta:1})));return n.bind((e=>r.map((t=>{const n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))))},tr=(e,t)=>n=>"rtl"===nr(n)?t:e,nr=e=>"rtl"===Et(e,"direction")?"rtl":"ltr",rr=Cn("height",(e=>{const t=e.dom;return nt(e)?t.getBoundingClientRect().height:t.offsetHeight})),sr=e=>rr.get(e),ir=e=>rr.getOuter(e),or=e=>kn(e,"height",e.dom.offsetHeight),ar=(e,t)=>({left:e,top:t,translate:(n,r)=>ar(e+n,t+r)}),lr=ar,cr=(e,t)=>void 0!==e?e:void 0!==t?t:0,dr=e=>{const t=e.dom.ownerDocument,n=t.body,r=t.defaultView,s=t.documentElement;if(n===e.dom)return lr(n.offsetLeft,n.offsetTop);const i=cr(null==r?void 0:r.pageYOffset,s.scrollTop),o=cr(null==r?void 0:r.pageXOffset,s.scrollLeft),a=cr(s.clientTop,n.clientTop),l=cr(s.clientLeft,n.clientLeft);return ur(e).translate(o-l,i-a)},ur=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?lr(n.offsetLeft,n.offsetTop):nt(e)?(e=>{const t=e.getBoundingClientRect();return lr(t.left,t.top)})(t):lr(0,0)},hr=(e,t)=>({row:e,y:t}),mr=(e,t)=>({col:e,x:t}),pr=e=>dr(e).left+On(e),fr=e=>dr(e).left,gr=(e,t)=>mr(e,fr(t)),vr=(e,t)=>mr(e,pr(t)),yr=e=>dr(e).top,_r=(e,t)=>hr(e,yr(t)),br=(e,t)=>hr(e,yr(t)+ir(t)),wr=(e,t,n)=>{if(0===n.length)return[];const r=k(n.slice(1),((t,n)=>t.map((t=>e(n,t))))),s=n[n.length-1].map((e=>t(n.length-1,e)));return r.concat([s])},xr={delta:p,positions:e=>wr(_r,br,e),edge:yr},Mr=tr({delta:p,edge:fr,positions:e=>wr(gr,vr,e)},{delta:e=>-e,edge:pr,positions:e=>wr(vr,gr,e)}),Sr={delta:(e,t)=>Mr(t).delta(e,t),positions:(e,t)=>Mr(t).positions(e,t),edge:e=>Mr(e).edge(e)},Tr={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Cr=(()=>{const e="[0-9]+",t="[eE][+-]?[0-9]+",n=e=>`(?:${e})?`,r=["Infinity","[0-9]+\\."+n(e)+n(t),"\\.[0-9]+"+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${r})`})(.*)$`)})(),Er=(e,t)=>w.from(Cr.exec(e)).bind((e=>{const n=Number(e[1]),r=e[2];return((e,t)=>C(t,(t=>C(Tr[t],(t=>e===t)))))(r,t)?w.some({value:n,unit:r}):w.none()})),kr=/(\d+(\.\d+)?)%/,Lr=/(\d+(\.\d+)?)px|em/,Ar=ae("col"),Dr=(e,t,n)=>{const r=(s=e,w.from(s.dom.parentElement).map(ge.fromDom)).getOrThunk((()=>rt(Me(e))));var s;return t(e)/n(r)*100},Or=(e,t)=>{Tt(e,"width",t+"px")},Rr=(e,t)=>{Tt(e,"width",t+"%")},Pr=(e,t)=>{Tt(e,"height",t+"px")},Nr=(e,t,n,r)=>{const s=parseFloat(e);return bt(e,"%")&&"table"!==Q(t)?((e,t,n,r)=>{const s=Yt(e).map((e=>{const r=n(e);return Math.floor(t/100*r)})).getOr(t);return r(e,s),s})(t,s,n,r):s},Ir=e=>{const t=(e=>or(e)+"px")(e);return t?Nr(t,e,sr,Pr):sr(e)},zr=(e,t)=>Lt(e,t).orThunk((()=>he(e,t).map((e=>e+"px")))),Br=e=>zr(e,"width"),Fr=e=>Dr(e,Dn,Rn),Hr=e=>Ar(e)?Dn(e):Pn(e),jr=e=>((e,t,n)=>n(e)/Ot(e,t))(e,"rowspan",Ir),Ur=(e,t,n)=>{Tt(e,"width",t+n)},Yr=e=>Dr(e,Dn,Rn)+"%",Vr=m(kr),$r=ae("col"),Wr=e=>Br(e).getOrThunk((()=>Hr(e)+"px")),Gr=e=>{return(t=e,zr(t,"height")).getOrThunk((()=>jr(e)+"px"));var t},qr=(e,t,n,r,s,i)=>e.filter(r).fold((()=>i(er(n,t))),(e=>s(e))),Xr=(e,t,n,r)=>{const s=Jn(e),i=Kn.hasColumns(e)?(e=>k(Kn.justColumns(e),(e=>w.from(e.element))))(e):s,o=[w.some(Sr.edge(t))].concat(k(Sr.positions(s,t),(e=>e.map((e=>e.x))))),a=v(Rt);return k(i,((e,t)=>qr(e,t,o,a,(e=>{if((e=>{const t=Tn().browser,n=t.isChromium()||t.isFirefox();return!$r(e)||n})(e))return n(e);{const e=(i=s[t],l=p,null!=i?l(i):w.none());return qr(e,t,o,a,(e=>r(w.some(Dn(e)))),r)}var i,l}),r)))},Kr=e=>e.map((e=>e+"px")).getOr(""),Jr=(e,t,n)=>Xr(e,t,Hr,(e=>e.getOrThunk(n.minCellWidth))),Zr=(e,t,n,r,s)=>{const i=Qn(e),o=[w.some(n.edge(t))].concat(k(n.positions(i,t),(e=>e.map((e=>e.y)))));return k(i,((e,t)=>qr(e,t,o,v(Pt),r,s)))},Qr=(e,t)=>()=>nt(e)?t(e):parseFloat(Lt(e,"width").getOr("0")),es=e=>{const t=Qr(e,Dn),n=m(0);return{width:t,pixelWidth:t,getWidths:(t,n)=>Jr(t,e,n),getCellDelta:n,singleColumnWidth:m([0]),minCellWidth:n,setElementWidth:h,adjustTableWidth:h,isRelative:!0,label:"none"}},ts=e=>{const t=Qr(e,(e=>parseFloat(Yr(e)))),n=Qr(e,Dn);return{width:t,pixelWidth:n,getWidths:(t,n)=>((e,t,n)=>Xr(e,t,Fr,(e=>e.fold((()=>n.minCellWidth()),(e=>e/n.pixelWidth()*100)))))(t,e,n),getCellDelta:e=>e/n()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>It()/n()*100,setElementWidth:Rr,adjustTableWidth:n=>{const r=t();Rr(e,r+n/100*r)},isRelative:!0,label:"percent"}},ns=e=>{const t=Qr(e,Dn);return{width:t,pixelWidth:t,getWidths:(t,n)=>Jr(t,e,n),getCellDelta:p,singleColumnWidth:(e,t)=>[Math.max(It(),e+t)-e],minCellWidth:It,setElementWidth:Or,adjustTableWidth:n=>{const r=t()+n;Or(e,r)},isRelative:!1,label:"pixel"}},rs=e=>Br(e).fold((()=>es(e)),(t=>((e,t)=>null!==Vr().exec(t)?ts(e):ns(e))(e,t))),ss=ns,is=ts,os=(e,t,n)=>{const r=e[n].element,s=ge.fromTag("td");Pe(s,ge.fromTag("br"));(t?Pe:Re)(r,s)},as=(e,t)=>{const n=e=>ve(e.element,t),r=Ye(e),s=qt(r),i=rs(e),o=Kn.generate(s),a=((e,t)=>{const n=e.grid.columns;let r=e.grid.rows,s=n,i=0,o=0;const a=[],l=[];return W(e.access,(e=>{if(a.push(e),t(e)){l.push(e);const t=e.row,n=t+e.rowspan-1,a=e.column,c=a+e.colspan-1;t<r?r=t:n>i&&(i=n),a<s?s=a:c>o&&(o=c)}})),((e,t,n,r,s,i)=>({minRow:e,minCol:t,maxRow:n,maxCol:r,allCells:s,selectedCells:i}))(r,s,i,o,a,l)})(o,n),l="th:not("+t+"),td:not("+t+")",c=Ft(r,"th,td",(e=>ve(e,l)));L(c,Fe),((e,t,n,r)=>{const s=D(e,(e=>"colgroup"!==e.section)),i=t.grid.columns,o=t.grid.rows;for(let e=0;e<o;e++){let o=!1;for(let a=0;a<i;a++)e<n.minRow||e>n.maxRow||a<n.minCol||a>n.maxCol||(Kn.getAt(t,e,a).filter(r).isNone()?os(s,o,e):o=!0)}})(s,o,a,n);const d=((e,t,n,r)=>{if(0===r.minCol&&t.grid.columns===r.maxCol+1)return 0;const s=Jr(t,e,n),i=R(s,((e,t)=>e+t),0),o=R(s.slice(r.minCol,r.maxCol+1),((e,t)=>e+t),0),a=o/i*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(a)})(e,Kn.fromTable(e),i,a);return((e,t,n,r)=>{W(n.columns,(e=>{(e.column<t.minCol||e.column>t.maxCol)&&Fe(e.element)}));const s=D(Bt(e,"tr"),(e=>0===e.dom.childElementCount));L(s,Fe),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||L(Bt(e,"th,td"),(e=>{me(e,"rowspan"),me(e,"colspan")})),me(e,Vn),me(e,"data-snooker-col-series"),rs(e).adjustTableWidth(r)})(r,a,o,d),r},ls=((e,t)=>{const n=t=>e(t)?w.from(t.dom.nodeValue):w.none();return{get:r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},getOption:n,set:(n,r)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}})(se,"text"),cs=e=>ls.get(e),ds=e=>ls.getOption(e),us=(e,t)=>ls.set(e,t),hs=e=>"img"===Q(e)?1:ds(e).fold((()=>Le(e).length),(e=>e.length)),ms=["img","br"],ps=e=>ds(e).filter((e=>0!==e.trim().length||e.indexOf(" ")>-1)).isSome()||T(ms,Q(e)),fs=e=>((e,t)=>{const n=e=>{for(let r=0;r<e.childNodes.length;r++){const s=ge.fromDom(e.childNodes[r]);if(t(s))return w.some(s);const i=n(e.childNodes[r]);if(i.isSome())return i}return w.none()};return n(e.dom)})(e,ps),gs=e=>vs(e,ps),vs=(e,t)=>{const n=e=>{const r=Le(e);for(let e=r.length-1;e>=0;e--){const s=r[e];if(t(s))return w.some(s);const i=n(s);if(i.isSome())return i}return w.none()};return n(e)},ys={scope:["row","col"]},_s=e=>()=>{const t=ge.fromTag("td",e.dom);return Pe(t,ge.fromTag("br",e.dom)),t},bs=e=>()=>ge.fromTag("col",e.dom),ws=e=>()=>ge.fromTag("colgroup",e.dom),xs=e=>()=>ge.fromTag("tr",e.dom),Ms=(e,t,n)=>{const r=((e,t)=>{const n=Ve(e,t),r=Le(Ye(e));return ze(n,r),n})(e,t);return W(n,((e,t)=>{null===e?me(r,t):ce(r,t,e)})),r},Ss=e=>e,Ts=(e,t,n)=>{const r=(e,t)=>{((e,t)=>{const n=e.dom,r=t.dom;Mt(n)&&Mt(r)&&(r.style.cssText=n.style.cssText)})(e.element,t),At(t,"height"),1!==e.colspan&&At(t,"width")};return{col:n=>{const s=ge.fromTag(Q(n.element),t.dom);return r(n,s),e(n.element,s),s},colgroup:ws(t),row:xs(t),cell:s=>{const i=ge.fromTag(Q(s.element),t.dom),o=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=o.length>0?((e,t,n)=>fs(e).map((r=>{const s=n.join(","),i=it(r,s,(t=>be(t,e)));return O(i,((e,t)=>{const n=Ue(t);return me(n,"contenteditable"),Pe(e,n),n}),t)})).getOr(t))(s.element,i,o):i;return Pe(a,ge.fromTag("br")),r(s,i),((e,t)=>{W(ys,((n,r)=>he(e,r).filter((e=>T(n,e))).each((e=>ce(t,r,e)))))})(s.element,i),e(s.element,i),i},replace:Ms,colGap:bs(t),gap:_s(t)}},Cs=e=>({col:bs(e),colgroup:ws(e),row:xs(e),cell:_s(e),replace:Ss,colGap:bs(e),gap:_s(e)}),Es=e=>ge.fromDom(e.getBody()),ks=e=>t=>be(t,Es(e)),Ls=e=>{me(e,"data-mce-style");const t=e=>me(e,"data-mce-style");L(jt(e),t),L(Ut(e),t),L(Vt(e),t)},As=e=>ge.fromDom(e.selection.getStart()),Ds=e=>e.getBoundingClientRect().width,Os=e=>e.getBoundingClientRect().height,Rs=(e,t)=>{const n=t.column,r=t.column+t.colspan-1,s=t.row,i=t.row+t.rowspan-1;return n<=e.finishCol&&r>=e.startCol&&s<=e.finishRow&&i>=e.startRow},Ps=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Ns=(e,t,n)=>{const r=Kn.findItem(e,t,be),s=Kn.findItem(e,n,be);return r.bind((e=>s.map((t=>{return n=e,r=t,s=Math.min(n.row,r.row),i=Math.min(n.column,r.column),o=Math.max(n.row+n.rowspan-1,r.row+r.rowspan-1),a=Math.max(n.column+n.colspan-1,r.column+r.colspan-1),{startRow:s,startCol:i,finishRow:o,finishCol:a};var n,r,s,i,o,a}))))},Is=(e,t,n)=>Ns(e,t,n).bind((t=>((e,t)=>{let n=!0;const r=g(Ps,t);for(let s=t.startRow;s<=t.finishRow;s++)for(let i=t.startCol;i<=t.finishCol;i++)n=n&&Kn.getAt(e,s,i).exists(r);return n?w.some(t):w.none()})(e,t))),zs=(e,t,n)=>Ns(e,t,n).map((t=>{const n=Kn.filterItems(e,g(Rs,t));return k(n,(e=>e.element))})),Bs=(e,t)=>Kn.findItem(e,t,((e,t)=>we(t,e))).map((e=>e.element)),Fs=(e,t,n)=>Yt(e).bind((r=>((e,t,n,r)=>Kn.findItem(e,t,be).bind((t=>{const s=n>0?t.row+t.rowspan-1:t.row,i=r>0?t.column+t.colspan-1:t.column;return Kn.getAt(e,s+n,i+r).map((e=>e.element))})))(Us(r),e,t,n))),Hs=(e,t,n)=>{const r=Us(e);return zs(r,t,n)},js=(e,t,n,r,s)=>{const i=Us(e),o=be(e,n)?w.some(t):Bs(i,t),a=be(e,s)?w.some(r):Bs(i,r);return o.bind((e=>a.bind((t=>zs(i,e,t)))))},Us=Kn.fromTable;var Ys=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Vs=()=>({up:m({selector:dt,closest:mt,predicate:ct,all:Ce}),down:m({selector:at,predicate:st}),styles:m({get:Et,getRaw:Lt,set:Tt,remove:At}),attrs:m({get:ue,set:ce,remove:me,copyTo:(e,t)=>{const n=pe(e);de(t,n)}}),insert:m({before:De,after:Oe,afterAll:Ie,append:Pe,appendAll:ze,prepend:Re,wrap:Ne}),remove:m({unwrap:He,remove:Fe}),create:m({nu:ge.fromTag,clone:e=>ge.fromDom(e.dom.cloneNode(!1)),text:ge.fromText}),query:m({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Ee,nextSibling:ke}),property:m({children:Le,name:Q,parent:Te,document:e=>Se(e).dom,isText:se,isComment:ne,isElement:re,isSpecial:e=>{const t=Q(e);return T(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>re(e)?he(e,"lang"):w.none(),getText:cs,setText:us,isBoundary:e=>!!re(e)&&("body"===Q(e)||T(Ys,Q(e))),isEmptyTag:e=>!!re(e)&&T(["br","img","hr","input"],Q(e)),isNonEditable:e=>re(e)&&"false"===ue(e,"contenteditable")}),eq:be,is:xe});const $s=(e,t,n,r)=>{const s=t(e,n);return O(r,((n,r)=>{const s=t(e,r);return Ws(e,n,s)}),s)},Ws=(e,t,n)=>t.bind((t=>n.filter(g(e.eq,t)))),Gs=(e,t,n)=>n.length>0?((e,t,n,r)=>r(e,t,n[0],n.slice(1)))(e,t,n,$s):w.none(),qs=(e,t,n,r=_)=>{const s=[t].concat(e.up().all(t)),i=[n].concat(e.up().all(n)),o=e=>N(e,r).fold((()=>e),(t=>e.slice(0,t+1))),a=o(s),l=o(i),c=P(a,(t=>C(l,((e,t)=>g(e.eq,t))(e,t))));return{firstpath:a,secondpath:l,shared:c}},Xs=Vs(),Ks=(e,t)=>Gs(Xs,((t,n)=>e(n)),t),Js=e=>dt(e,"table"),Zs=(e,t,n)=>{const r=e=>t=>void 0!==n&&n(t)||be(t,e);return be(e,t)?w.some({boxes:w.some([e]),start:e,finish:t}):Js(e).bind((s=>Js(t).bind((i=>{if(be(s,i))return w.some({boxes:Hs(s,e,t),start:e,finish:t});if(we(s,i)){const n=it(t,"td,th",r(s)),o=n.length>0?n[n.length-1]:t;return w.some({boxes:js(s,e,s,t,i),start:e,finish:o})}if(we(i,s)){const n=it(e,"td,th",r(i)),o=n.length>0?n[n.length-1]:e;return w.some({boxes:js(i,e,s,t,i),start:e,finish:o})}return((e,t,n)=>qs(Xs,e,t,n))(e,t).shared.bind((o=>mt(o,"table",n).bind((n=>{const o=it(t,"td,th",r(n)),a=o.length>0?o[o.length-1]:t,l=it(e,"td,th",r(n)),c=l.length>0?l[l.length-1]:e;return w.some({boxes:js(n,e,s,t,i),start:c,finish:a})}))))}))))},Qs=(e,t)=>{const n=at(e,t);return n.length>0?w.some(n):w.none()},ei=(e,t,n)=>ht(e,t).bind((t=>ht(e,n).bind((e=>Ks(Js,[t,e]).map((n=>({first:t,last:e,table:n}))))))),ti=(e,t,n,r,s)=>((e,t)=>P(e,(e=>ve(e,t))))(e,s).bind((e=>Fs(e,t,n).bind((e=>((e,t)=>dt(e,"table").bind((n=>ht(n,t).bind((t=>Zs(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,r))))),ni=(e,t)=>Qs(e,t),ri=(e,t,n)=>ei(e,t,n).bind((t=>{const n=t=>be(e,t),r="thead,tfoot,tbody,table",s=dt(t.first,r,n),i=dt(t.last,r,n);return s.bind((e=>i.bind((n=>be(e,n)?((e,t,n)=>{const r=Us(e);return Is(r,t,n)})(t.table,t.first,t.last):w.none()))))})),si=p,ii=e=>{const t=(e,t)=>he(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&B(e,(e=>t(e,"rowspan")||t(e,"colspan")))?w.some(e):w.none()},oi=(e,t,n)=>t.length<=1?w.none():ri(e,n.firstSelectedSelector,n.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),ai="data-mce-selected",li="data-mce-first-selected",ci="data-mce-last-selected",di={selected:ai,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:li,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:ci,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},ui=(e,t,n)=>({element:n,mergable:oi(t,e,di),unmergable:ii(e),selection:si(e)}),hi=e=>(t,n)=>{const r=Q(t),s="col"===r||"colgroup"===r?Yt(i=t).bind((e=>ni(e,di.firstSelectedSelector))).fold(m(i),(e=>e[0])):t;var i;return mt(s,e,n)},mi=hi("th,td,caption"),pi=hi("th,td"),fi=e=>{return t=e.model.table.getSelectedCells(),k(t,ge.fromDom);var t},gi=(e,t)=>{e.on("BeforeGetContent",(t=>{const n=n=>{t.preventDefault(),(e=>Yt(e[0]).map((e=>{const t=as(e,"[data-mce-selected]");return Ls(t),[t]})))(n).each((n=>{t.content="text"===t.format?(e=>k(e,(e=>e.dom.innerText)).join(""))(n):((e,t)=>k(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,n)}))};if(!0===t.selection){const t=(e=>D(fi(e),(e=>ve(e,di.selectedSelector))))(e);t.length>=1&&n(t)}})),e.on("BeforeSetContent",(n=>{if(!0===n.selection&&!0===n.paste){const r=fi(e);j(r).each((r=>{Yt(r).each((s=>{const i=D(((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Le(ge.fromDom(n))})(n.content),(e=>"meta"!==Q(e))),o=ae("table");if(1===i.length&&o(i[0])){n.preventDefault();const o=ge.fromDom(e.getDoc()),a=Cs(o),l=((e,t,n)=>({element:e,clipboard:t,generators:n}))(r,i[0],a);t.pasteCells(s,l).each((()=>{e.focus()}))}}))}))}}))},vi=(e,t)=>({element:e,offset:t}),yi=(e,t,n)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind((t=>yi(e,t,n).orThunk((()=>w.some(t))))):w.none(),_i=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;return e.property().children(t).length},bi=(e,t)=>{const n=yi(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return vi(n,_i(e,n));const r=e.property().children(n);return r.length>0?bi(e,r[r.length-1]):vi(n,_i(e,n))},wi=bi,xi=Vs(),Mi=(e,t)=>{if(!Rt(e)){const n=(e=>Br(e).bind((e=>Er(e,["fixed","relative","empty"]))))(e);n.each((n=>{const r=n.value/2;Ur(e,r,n.unit),Ur(t,r,n.unit)}))}},Si=e=>k(e,m(0)),Ti=(e,t,n,r,s)=>s(e.slice(0,t)).concat(r).concat(s(e.slice(n))),Ci=e=>(t,n,r,s)=>{if(e(r)){const e=Math.max(s,t[n]-Math.abs(r)),i=Math.abs(e-t[n]);return r>=0?i:-i}return r},Ei=Ci((e=>e<0)),ki=Ci(b),Li=()=>{const e=(e,t,n,r)=>{const s=(100+n)/100,i=Math.max(r,(e[t]+n)/s);return k(e,((e,n)=>(n===t?i:e/s)-e))},t=(t,n,r,s,i,o)=>o?e(t,n,s,i):((e,t,n,r,s)=>{const i=Ei(e,t,r,s);return Ti(e,t,n+1,[i,0],Si)})(t,n,r,s,i);return{resizeTable:(e,t)=>e(t),clampTableDelta:Ei,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,n,r,s,i,o,a)=>t(e,r,s,i,o,a),calcRightEdgeDeltas:(t,n,r,s,i,o)=>{if(o)return e(t,r,s,i);{const e=Ei(t,r,s,i);return Si(t.slice(0,r)).concat([e])}},calcRedestributedWidths:(e,t,n,r)=>{if(r){const r=(t+n)/t,s=k(e,(e=>e/r));return{delta:100*r-100,newSizes:s}}return{delta:n,newSizes:e}}}},Ai=()=>{const e=(e,t,n,r,s)=>{const i=ki(e,r>=0?n:t,r,s);return Ti(e,t,n+1,[i,-i],Si)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,r,s)=>{if(s){if(n>=0)return n;{const t=R(e,((e,t)=>e+t-r),0);return Math.max(-t,n)}}return Ei(e,t,n,r)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,r,s,i,o)=>e(t,r,s,i,o),calcRightEdgeDeltas:(e,t,n,r,s,i)=>{if(i)return Si(e);{const t=r/e.length;return k(e,m(t))}},calcRedestributedWidths:(e,t,n,r)=>({delta:0,newSizes:e})}},Di=e=>Kn.fromTable(e).grid,Oi=ae("th"),Ri=e=>B(e,(e=>Oi(e.element))),Pi=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Ni=e=>{const t="thead"===e.section,n=pt(Ii(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Pi(t,n)}:{type:"body"}},Ii=e=>{const t=D(e,(e=>Oi(e.element)));return 0===t.length?w.some("td"):t.length===e.length?w.some("th"):w.none()},zi=(e,t,n)=>qe(n(e.element,t),!0,e.isLocked),Bi=(e,t)=>e.section!==t?Xe(e.element,e.cells,t,e.isNew):e,Fi=()=>({transformRow:Bi,transformCell:(e,t,n)=>{const r=n(e.element,t),s="td"!==Q(r)?((e,t)=>{const n=Ve(e,t);Oe(e,n);const r=Le(e);return ze(n,r),Fe(e),n})(r,"td"):r;return qe(s,e.isNew,e.isLocked)}}),Hi=()=>({transformRow:Bi,transformCell:zi}),ji=()=>({transformRow:(e,t)=>Bi(e,"thead"===t?"tbody":t),transformCell:zi}),Ui=(e,t)=>{const n=(e=>Y(e.all,(e=>{const t=Ni(e);return"header"===t.type?w.from(t.subType):w.none()})))(Kn.fromTable(e)).getOr(t);switch(n){case"section":return Fi();case"sectionCells":return Hi();case"cells":return ji()}},Yi=Fi,Vi=Hi,$i=ji,Wi=()=>({transformRow:p,transformCell:zi}),Gi=e=>mt(e,"[contenteditable]"),qi=(e,t=!1)=>nt(e)?e.dom.isContentEditable:Gi(e).fold(m(t),(e=>"true"===Xi(e))),Xi=e=>e.dom.contentEditable,Ki=(e,t,n,r)=>{n===r?me(e,t):ce(e,t,n)},Ji=(e,t,n)=>{U(ot(e,t)).fold((()=>Re(e,n)),(e=>Oe(e,n)))},Zi=(e,t)=>{const n=[],r=[],s=e=>k(e,(e=>{e.isNew&&n.push(e.element);const t=e.element;return Be(t),L(e.cells,(e=>{e.isNew&&r.push(e.element),Ki(e.element,"colspan",e.colspan,1),Ki(e.element,"rowspan",e.rowspan,1),Pe(t,e.element)})),t})),i=e=>z(e,(e=>k(e.cells,(e=>(Ki(e.element,"span",e.colspan,1),e.element))))),o=(t,n)=>{const r=((e,t)=>{const n=ut(e,t).getOrThunk((()=>{const n=ge.fromTag(t,Me(e).dom);return"thead"===t?Ji(e,"caption,colgroup",n):"colgroup"===t?Ji(e,"caption",n):Pe(e,n),n}));return Be(n),n})(e,n),o=("colgroup"===n?i:s)(t);ze(r,o)},a=(t,n)=>{t.length>0?o(t,n):(t=>{ut(e,t).each(Fe)})(n)},l=[],c=[],d=[],u=[];return L(t,(e=>{switch(e.section){case"thead":l.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":u.push(e)}})),a(u,"colgroup"),a(l,"thead"),a(c,"tbody"),a(d,"tfoot"),{newRows:n,newCells:r}},Qi=(e,t)=>{if(0===e.length)return 0;const n=e[0];return N(e,(e=>!t(n.element,e.element))).getOr(e.length)},eo=(e,t,n,r)=>{const s=((e,t)=>e[t])(e,t),i="colgroup"===s.section,o=Qi(s.cells.slice(n),r),a=i?1:Qi(((e,t)=>k(e,(e=>Fn(e,t))))(e.slice(t),n),r);return{colspan:o,rowspan:a}},to=(e,t)=>{const n=k(e,(e=>k(e.cells,_)));return k(e,((r,s)=>{const i=z(r.cells,((r,i)=>{if(!1===n[s][i]){const d=eo(e,s,i,t);return((e,t,r,s)=>{for(let i=e;i<e+r;i++)for(let e=t;e<t+s;e++)n[i][e]=!0})(s,i,d.rowspan,d.colspan),[(o=r.element,a=d.rowspan,l=d.colspan,c=r.isNew,{element:o,rowspan:a,colspan:l,isNew:c})]}return[];var o,a,l,c}));return((e,t,n,r)=>({element:e,cells:t,section:n,isNew:r}))(r.element,i,r.section,r.isNew)}))},no=(e,t,n)=>{const r=[];L(e.colgroups,(s=>{const i=[];for(let r=0;r<e.grid.columns;r++){const s=Kn.getColumnAt(e,r).map((e=>qe(e.element,n,!1))).getOrThunk((()=>qe(t.colGap(),!0,!1)));i.push(s)}r.push(Xe(s.element,i,"colgroup",n))}));for(let s=0;s<e.grid.rows;s++){const i=[];for(let r=0;r<e.grid.columns;r++){const o=Kn.getAt(e,s,r).map((e=>qe(e.element,n,e.isLocked))).getOrThunk((()=>qe(t.gap(),!0,!1)));i.push(o)}const o=e.all[s],a=Xe(o.element,i,o.section,n);r.push(a)}return r},ro=e=>to(e,be),so=(e,t)=>Y(e.all,(e=>P(e.cells,(e=>be(t,e.element))))),io=(e,t,n)=>{const r=k(t.selection,(t=>Ht(t).bind((t=>so(e,t))).filter(n))),s=ft(r);return gt(s.length>0,s)},oo=(e,t,n,r,s)=>(i,o,a,l)=>{const c=Kn.fromTable(i),d=w.from(null==l?void 0:l.section).getOrThunk(Wi);return t(c,o).map((t=>{const n=((e,t)=>no(e,t,!1))(c,a),r=e(n,t,be,s(a),d),i=Wn(r.grid);return{info:t,grid:ro(r.grid),cursor:r.cursor,lockedColumns:i}})).bind((e=>{const t=Zi(i,e.grid),s=w.from(null==l?void 0:l.sizing).getOrThunk((()=>rs(i))),o=w.from(null==l?void 0:l.resize).getOrThunk(Ai);return n(i,e.grid,e.info,{sizing:s,resize:o,section:d}),r(i),me(i,Vn),e.lockedColumns.length>0&&ce(i,Vn,e.lockedColumns.join(",")),w.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},ao=(e,t)=>io(e,t,b).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),lo=(e,t)=>io(e,t,b),co=(e,t)=>io(e,t,(e=>!e.isLocked)),uo=(e,t)=>B(t,(t=>((e,t)=>so(e,t).exists((e=>!e.isLocked)))(e,t))),ho=(e,t,n,r)=>{const s=Un(e).rows;let i=!0;for(let e=0;e<s.length;e++)for(let o=0;o<jn(s[0]);o++){const a=s[e],l=Fn(a,o),c=n(l.element,t);c&&!i?zn(a,o,qe(r(),!0,l.isLocked)):c&&(i=!1)}return e},mo=(e,t,n,r)=>{const s=Un(e).rows;if(t>0&&t<s.length){const e=((e,t)=>R(e,((e,n)=>C(e,(e=>t(e.element,n.element)))?e:e.concat([n])),[]))(s[t-1].cells,n);L(e,(e=>{let i=w.none();for(let o=t;o<s.length;o++)for(let t=0;t<jn(s[0]);t++){const a=s[o],l=Fn(a,t);n(l.element,e.element)&&(i.isNone()&&(i=w.some(r())),i.each((e=>{zn(a,t,qe(e,!0,l.isLocked))})))}}))}return e},po=e=>{const t=t=>t(e),n=m(e),r=()=>s,s={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:b,isError:_,map:t=>go.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>w.some(e)};return s},fo=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:_,isError:b,map:t,mapError:t=>go.error(t(e)),bind:t,exists:_,forall:b,getOr:p,or:p,getOrThunk:y,orThunk:y,getOrDie:(r=String(e),()=>{throw new Error(r)}),each:h,toOptional:w.none};var r;return n},go={value:po,error:fo,fromOption:(e,t)=>e.fold((()=>fo(t)),po)},vo=(e,t)=>({rowDelta:0,colDelta:jn(e[0])-jn(t[0])}),yo=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),_o=(e,t,n,r)=>{const s="colgroup"===t.section?n.col:n.cell;return E(e,(e=>qe(s(),!0,r(e))))},bo=(e,t,n,r)=>{const s=e[e.length-1];return e.concat(E(t,(()=>{const e="colgroup"===s.section?n.colgroup:n.row,t=Yn(s,e,p),i=_o(t.cells.length,t,n,(e=>Z(r,e.toString())));return Bn(t,i)})))},wo=(e,t,n,r)=>k(e,(e=>{const s=_o(t,e,n,_);return Nn(e,r,s)})),xo=(e,t,n)=>{const r=t.colDelta<0?wo:p,s=t.rowDelta<0?bo:p,i=Wn(e),o=jn(e[0]),a=C(i,(e=>e===o-1)),l=r(e,Math.abs(t.colDelta),n,a?o-1:o),c=Wn(l);return s(l,Math.abs(t.rowDelta),n,F(c,b))},Mo=(e,t,n,r)=>{const s=g(r,Fn(e[t],n).element),i=e[t];return e.length>1&&jn(i)>1&&(n>0&&s(Hn(i,n-1))||n<i.cells.length-1&&s(Hn(i,n+1))||t>0&&s(Hn(e[t-1],n))||t<e.length-1&&s(Hn(e[t+1],n)))},So=(e,t,n)=>D(n,(n=>n>=e.column&&n<=jn(t[0])+e.column)),To=(e,t,n,r,s)=>{const i=Wn(t),o=((e,t,n)=>{const r=jn(t[0]),s=Un(t).cols.length+e.row,i=E(r-e.column,(t=>t+e.column)),o=P(i,(e=>B(n,(t=>t!==e)))).getOr(r-1);return{row:s,column:o}})(e,t,i),a=Un(n).rows,l=So(o,a,i),c=((e,t,n)=>{if(e.row>=t.length||e.column>jn(t[0]))return go.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const r=t.slice(e.row),s=r[0].cells.slice(e.column),i=jn(n[0]),o=n.length;return go.value({rowDelta:r.length-o,colDelta:s.length-i})})(o,t,a);return c.map((e=>{const n={...e,colDelta:e.colDelta-l.length},i=xo(t,n,r),c=Wn(i),d=So(o,a,c);return((e,t,n,r,s,i)=>{const o=e.row,a=e.column,l=o+n.length,c=a+jn(n[0])+i.length,d=F(i,b);for(let e=o;e<l;e++){let i=0;for(let l=a;l<c;l++){if(d[l]){i++;continue}Mo(t,e,l,s)&&ho(t,Hn(t[e],l),s,r.cell);const c=l-a-i,u=Fn(n[e-o],c),h=u.element,m=r.replace(h);zn(t[e],l,qe(m,!0,u.isLocked))}}return t})(o,i,a,r,s,d)}))},Co=(e,t,n,r,s)=>{((e,t,n,r)=>{t>0&&t<e[0].cells.length&&L(e,(e=>{const s=e.cells[t-1],i=e.cells[t];n(i.element,s.element)&&zn(e,t,qe(r(),!0,i.isLocked))}))})(t,e,s,r.cell);const i=yo(n,t),o=xo(n,i,r),a=yo(t,o),l=xo(t,a,r);return k(l,((t,n)=>Nn(t,e,o[n].cells)))},Eo=(e,t,n,r,s)=>{mo(t,e,s,r.cell);const i=Wn(t),o=vo(t,n),a={...o,colDelta:o.colDelta-i.length},l=xo(t,a,r),{cols:c,rows:d}=Un(l),u=Wn(l),h=vo(n,t),m={...h,colDelta:h.colDelta+u.length},p=((e,t,n)=>k(e,(e=>R(n,((n,r)=>{const s=_o(1,e,t,b)[0];return In(n,r,s)}),e))))(n,r,u),f=xo(p,m,r);return[...c,...d.slice(0,e),...f,...d.slice(e,d.length)]},ko=(e,t,n,r,s)=>{const{rows:i,cols:o}=Un(e),a=i.slice(0,t),l=i.slice(t),c=((e,t,n,r)=>Yn(e,(e=>r(e,n)),t))(i[n],((e,n)=>t>0&&t<i.length&&r(Hn(i[t-1],n),Hn(i[t],n))?Fn(i[t],n):qe(s(e.element,r),!0,e.isLocked)),r,s);return[...o,...a,c,...l]},Lo=(e,t,n,r,s)=>k(e,(e=>{const i=t>0&&t<jn(e)&&r(Hn(e,t-1),Hn(e,t)),o=((e,t,n,r,s,i,o)=>{if("colgroup"!==n&&r)return Fn(e,t);{const t=Fn(e,s);return qe(o(t.element,i),!0,!1)}})(e,t,e.section,i,n,r,s);return In(e,t,o)})),Ao=(e,t,n,r)=>((e,t,n,r)=>void 0!==Hn(e[t],n)&&t>0&&r(Hn(e[t-1],n),Hn(e[t],n)))(e,t,n,r)||((e,t,n)=>t>0&&n(Hn(e,t-1),Hn(e,t)))(e[t],n,r),Do=(e,t,n,r)=>{const s=e=>(e=>"row"===e?Pt(t):Rt(t))(e)?`${e}group`:e;if(e)return Oi(t)?s(n):null;if(r&&Oi(t)){return s("row"===n?"col":"row")}return null},Oo=(e,t,n)=>qe(n(e.element,t),!0,e.isLocked),Ro=(e,t,n,r,s,i,o)=>k(e,((e,a)=>((e,t)=>{const n=e.cells,r=k(n,t);return Xe(e.element,r,e.section,e.isNew)})(e,((e,l)=>{if((e=>C(t,(t=>n(e.element,t.element))))(e)){const t=o(e,a,l)?s(e,n,r):e;return i(t,a,l).each((e=>{var n,r;n=t.element,r={scope:w.from(e)},W(r,((e,t)=>{e.fold((()=>{me(n,t)}),(e=>{le(n.dom,t,e)}))}))})),t}return e})))),Po=(e,t,n)=>z(e,((r,s)=>Ao(e,s,t,n)?[]:[Fn(r,t)])),No=(e,t,n,r,s)=>{const i=Un(e).rows,o=z(t,(e=>Po(i,e,r))),a=k(i,(e=>Ri(e.cells))),l=((e,t)=>B(t,p)&&Ri(e)?b:(e,n,r)=>!("th"===Q(e.element)&&t[n]))(o,a),c=((e,t)=>(n,r)=>w.some(Do(e,n.element,"row",t[r])))(n,a);return Ro(e,o,r,s,Oo,c,l)},Io=(e,t,n,r,s,i,o)=>{const{cols:a,rows:l}=Un(e),c=l[t[0]],d=z(t,(e=>((e,t,n)=>{const r=e[t];return z(r.cells,((r,s)=>Ao(e,t,s,n)?[]:[r]))})(l,e,s))),u=k(c.cells,((e,t)=>Ri(Po(l,t,s)))),h=[...l];L(t,(e=>{h[e]=o.transformRow(l[e],n)}));const m=[...a,...h],f=((e,t)=>B(t,p)&&Ri(e.cells)?b:(e,n,r)=>!("th"===Q(e.element)&&t[r]))(c,u),g=((e,t)=>(n,r,s)=>w.some(Do(e,n.element,"col",t[s])))(r,u);return Ro(m,d,s,i,o.transformCell,g,f)},zo=(e,t,n,r)=>{const s=Un(e).rows,i=k(t,(e=>Fn(s[e.row],e.column)));return Ro(e,i,n,r,Oo,w.none,b)},Bo=e=>{if(!i(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return L(e,((r,s)=>{const o=V(r);if(1!==o.length)throw new Error("one and only one name per case");const a=o[0],l=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!i(l))throw new Error("case arguments must be an array");t.push(a),n[a]=(...n)=>{const r=n.length;if(r!==l.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+l.length+" ("+l+"), got "+r);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[s].apply(null,n)},match:e=>{const r=V(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!B(t,(e=>T(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:a,params:n})}}}})),n},Fo={...Bo([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Ho=(e,t,n,r,s)=>{const i=e.slice(0),o=((e,t)=>0===e.length?Fo.none():1===e.length?Fo.only(0):0===t?Fo.left(0,1):t===e.length-1?Fo.right(t-1,t):t>0&&t<e.length-1?Fo.middle(t-1,t,t+1):Fo.none())(e,t),a=m(k(i,m(0)));return o.fold(a,(e=>r.singleColumnWidth(i[e],n)),((e,t)=>s.calcLeftEdgeDeltas(i,e,t,n,r.minCellWidth(),r.isRelative)),((e,t,o)=>s.calcMiddleDeltas(i,e,t,o,n,r.minCellWidth(),r.isRelative)),((e,t)=>s.calcRightEdgeDeltas(i,e,t,n,r.minCellWidth(),r.isRelative)))},jo=(e,t,n)=>{let r=0;for(let s=e;s<t;s++)r+=void 0!==n[s]?n[s]:0;return r},Uo=(e,t)=>{const n=Kn.justCells(e);return k(n,(e=>{const n=jo(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}))},Yo=(e,t)=>Kn.hasColumns(e)?((e,t)=>{const n=Kn.justColumns(e);return k(n,((e,n)=>({element:e.element,width:t[n],colspan:e.colspan})))})(e,t):((e,t)=>{const n=Kn.justCells(e);return k(n,(e=>{const n=jo(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))})(e,t),Vo=(e,t,n)=>{const r=Yo(e,t);L(r,(e=>{n.setElementWidth(e.element,e.width)}))},$o=(e,t,n,r,s)=>{const i=Kn.fromTable(e),o=s.getCellDelta(t),a=s.getWidths(i,s),l=n===i.grid.columns-1,c=r.clampTableDelta(a,n,o,s.minCellWidth(),l),d=Ho(a,n,c,s,r),u=k(d,((e,t)=>e+a[t]));Vo(i,u,s),r.resizeTable(s.adjustTableWidth,c,l)},Wo=(e,t,n,r)=>{const s=Kn.fromTable(e),i=((e,t,n)=>Zr(e,t,n,jr,(e=>e.getOrThunk(zt))))(s,e,r),o=k(i,((e,r)=>n===r?Math.max(t+e,zt()):e)),a=Uo(s,o),l=((e,t)=>k(e.all,((e,n)=>({element:e.element,height:t[n]}))))(s,o);L(l,(e=>{Pr(e.element,e.height)})),L(a,(e=>{Pr(e.element,e.height)}));const c=O(o,((e,t)=>e+t),0);Pr(e,c)},Go=e=>R(e,((e,t)=>C(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),qo=ae("col"),Xo=ae("colgroup"),Ko=e=>"tr"===Q(e)||Xo(e),Jo=e=>({element:e,colspan:Dt(e,"colspan",1),rowspan:Dt(e,"rowspan",1)}),Zo=e=>he(e,"scope").map((e=>e.substr(0,3))),Qo=(e,t=Jo)=>{const n=n=>{if(Ko(n))return Xo((s={element:n}).element)?e.colgroup(s):e.row(s);{const s=n,i=(t=>qo(t.element)?e.col(t):e.cell(t))(t(s));return r=w.some({item:s,replacement:i}),i}var s};let r=w.none();return{getOrInit:(e,t)=>r.fold((()=>n(e)),(r=>t(e,r.item)?r.replacement:n(e)))}},ea=e=>t=>{const n=[],r=r=>{const s="td"===e?{scope:null}:{},i=t.replace(r,e,s);return n.push({item:r,sub:i}),i};return{replaceOrInit:(e,t)=>{if(Ko(e)||qo(e))return e;{const s=e;return((e,t)=>P(n,(n=>t(n.item,e))))(s,t).fold((()=>r(s)),(n=>t(e,n.item)?n.sub:r(s)))}}}},ta=e=>({unmerge:t=>{const n=Zo(t);return n.each((e=>ce(t,"scope",e))),()=>{const r=e.cell({element:t,colspan:1,rowspan:1});return At(r,"width"),At(t,"width"),n.each((e=>ce(r,"scope",e))),r}},merge:e=>(At(e[0],"width"),(()=>{const t=ft(k(e,Zo));if(0===t.length)return w.none();{const e=t[0],n=["row","col"];return C(t,(t=>t!==e&&T(n,t)))?w.none():w.from(e)}})().fold((()=>me(e[0],"scope")),(t=>ce(e[0],"scope",t+"group"))),m(e[0]))}),na=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ra=Vs(),sa=e=>((e,t)=>{const n=e.property().name(t);return T(na,n)})(ra,e),ia=e=>((e,t)=>{const n=e.property().name(t);return T(["ol","ul"],n)})(ra,e),oa=e=>((e,t)=>T(["br","img","hr","input"],e.property().name(t)))(ra,e),aa=e=>{const t=ae("br"),n=e=>gs(e).bind((n=>{const r=ke(n).map((e=>!!sa(e)||!!oa(e)&&"img"!==Q(e))).getOr(!1);return Te(n).map((s=>!0===r||(e=>"li"===Q(e)||ct(e,ia).isSome())(s)||t(n)||sa(s)&&!be(e,s)?[]:[ge.fromTag("br")]))})).getOr([]),r=(()=>{const r=z(e,(e=>{const r=Le(e);return(e=>B(e,(e=>t(e)||se(e)&&0===cs(e).trim().length)))(r)?[]:r.concat(n(e))}));return 0===r.length?[ge.fromTag("br")]:r})();Be(e[0]),ze(e[0],r)},la=e=>qi(e,!0),ca=e=>{0===jt(e).length&&Fe(e)},da=(e,t)=>({grid:e,cursor:t}),ua=(e,t,n)=>{var r,s;const i=Un(e).rows;return w.from(null===(s=null===(r=i[t])||void 0===r?void 0:r.cells[n])||void 0===s?void 0:s.element).filter(la).orThunk((()=>(e=>Y(e,(e=>Y(e.cells,(e=>{const t=e.element;return gt(la(t),t)})))))(i)))},ha=(e,t,n)=>{const r=ua(e,t,n);return da(e,r)},ma=e=>R(e,((e,t)=>C(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),pa=(e,t)=>(n,r,s,i,o)=>{const a=ma(r),l=k(a,(e=>e.row)),c=Io(n,l,e,t,s,i.replaceOrInit,o);return ha(c,r[0].row,r[0].column)},fa=pa("thead",!0),ga=pa("tbody",!1),va=pa("tfoot",!1),ya=(e,t,n)=>{const r=((e,t)=>Wt(e,(()=>t)))(e,n.section),s=Kn.generate(r);return no(s,t,!0)},_a=(e,t,n,r)=>((e,t,n,r)=>{const s=Kn.generate(t),i=r.getWidths(s,r);Vo(s,i,r)})(0,t,0,r.sizing),ba=(e,t,n,r)=>((e,t,n,r,s)=>{const i=Kn.generate(t),o=r.getWidths(i,r),a=r.pixelWidth(),{newSizes:l,delta:c}=s.calcRedestributedWidths(o,a,n.pixelDelta,r.isRelative);Vo(i,l,r),r.adjustTableWidth(c)})(0,t,n,r.sizing,r.resize),wa=(e,t)=>C(t,(e=>0===e.column&&e.isLocked)),xa=(e,t)=>C(t,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),Ma=(e,t)=>{const n=Jn(e),r=Go(t);return R(r,((e,t)=>e+n[t.column].map(On).getOr(0)),0)},Sa=e=>(t,n)=>lo(t,n).filter((n=>!(e?wa:xa)(t,n))).map((e=>({details:e,pixelDelta:Ma(t,e)}))),Ta=e=>(t,n)=>ao(t,n).filter((n=>!(e?wa:xa)(t,n.cells))),Ca=ea("th"),Ea=ea("td"),ka=oo(((e,t,n,r)=>{const s=t[0].row,i=ma(t),o=O(i,((e,t)=>({grid:ko(e.grid,s,t.row+e.delta,n,r.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return ha(o,s,t[0].column)}),lo,h,h,Qo),La=oo(((e,t,n,r)=>{const s=ma(t),i=s[s.length-1],o=i.row+i.rowspan,a=O(s,((e,t)=>ko(e,o,t.row,n,r.getOrInit)),e);return ha(a,o,t[0].column)}),lo,h,h,Qo),Aa=oo(((e,t,n,r)=>{const s=t.details,i=Go(s),o=i[0].column,a=O(i,((e,t)=>({grid:Lo(e.grid,o,t.column+e.delta,n,r.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return ha(a,s[0].row,o)}),Sa(!0),ba,h,Qo),Da=oo(((e,t,n,r)=>{const s=t.details,i=s[s.length-1],o=i.column+i.colspan,a=Go(s),l=O(a,((e,t)=>Lo(e,o,t.column,n,r.getOrInit)),e);return ha(l,s[0].row,o)}),Sa(!1),ba,h,Qo),Oa=oo(((e,t,n,r)=>{const s=Go(t.details),i=((e,t)=>z(e,(e=>{const n=e.cells,r=O(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),n);return r.length>0?[Xe(e.element,r,e.section,e.isNew)]:[]})))(e,k(s,(e=>e.column))),o=i.length>0?i[0].cells.length-1:0;return ha(i,s[0].row,Math.min(s[0].column,o))}),((e,t)=>co(e,t).map((t=>({details:t,pixelDelta:-Ma(e,t)})))),ba,ca,Qo),Ra=oo(((e,t,n,r)=>{const s=ma(t),i=((e,t,n)=>{const{rows:r,cols:s}=Un(e);return[...s,...r.slice(0,t),...r.slice(n+1)]})(e,s[0].row,s[s.length-1].row),o=i.length>0?i.length-1:0;return ha(i,Math.min(t[0].row,o),t[0].column)}),lo,h,ca,Qo),Pa=oo(((e,t,n,r)=>{const s=Go(t),i=k(s,(e=>e.column)),o=No(e,i,!0,n,r.replaceOrInit);return ha(o,t[0].row,t[0].column)}),co,h,h,Ca),Na=oo(((e,t,n,r)=>{const s=Go(t),i=k(s,(e=>e.column)),o=No(e,i,!1,n,r.replaceOrInit);return ha(o,t[0].row,t[0].column)}),co,h,h,Ea),Ia=oo(fa,co,h,h,Ca),za=oo(ga,co,h,h,Ea),Ba=oo(va,co,h,h,Ea),Fa=oo(((e,t,n,r)=>{const s=zo(e,t,n,r.replaceOrInit);return ha(s,t[0].row,t[0].column)}),co,h,h,Ca),Ha=oo(((e,t,n,r)=>{const s=zo(e,t,n,r.replaceOrInit);return ha(s,t[0].row,t[0].column)}),co,h,h,Ea),ja=oo(((e,t,n,r)=>{const s=t.cells;aa(s);const i=((e,t,n,r)=>{const s=Un(e).rows;if(0===s.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let n=t.startCol;n<=t.finishCol;n++){const t=s[e],i=Fn(t,n).isLocked;zn(t,n,qe(r(),!1,i))}return e})(e,t.bounds,0,r.merge(s));return da(i,w.from(s[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>uo(e,t.cells)))),_a,h,ta),Ua=oo(((e,t,n,r)=>{const s=O(t,((e,t)=>ho(e,t,n,r.unmerge(t))),e);return da(s,w.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>uo(e,t)))),_a,h,ta),Ya=oo(((e,t,n,r)=>{const s=((e,t)=>{const n=Kn.fromTable(e);return no(n,t,!0)})(t.clipboard,t.generators),i=((e,t)=>({row:e,column:t}))(t.row,t.column);return To(i,e,s,t.generators,n).fold((()=>da(e,w.some(t.element))),(e=>ha(e,t.row,t.column)))}),((e,t)=>Ht(t.element).bind((n=>so(e,n).map((e=>({...e,generators:t.generators,clipboard:t.clipboard})))))),_a,h,Qo),Va=oo(((e,t,n,r)=>{const s=Un(e).rows,i=t.cells[0].column,o=s[t.cells[0].row],a=ya(t.clipboard,t.generators,o),l=Co(i,e,a,t.generators,n);return ha(l,t.cells[0].row,t.cells[0].column)}),Ta(!0),h,h,Qo),$a=oo(((e,t,n,r)=>{const s=Un(e).rows,i=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,o=s[t.cells[0].row],a=ya(t.clipboard,t.generators,o),l=Co(i,e,a,t.generators,n);return ha(l,t.cells[0].row,t.cells[0].column)}),Ta(!1),h,h,Qo),Wa=oo(((e,t,n,r)=>{const s=Un(e).rows,i=t.cells[0].row,o=s[i],a=ya(t.clipboard,t.generators,o),l=Eo(i,e,a,t.generators,n);return ha(l,t.cells[0].row,t.cells[0].column)}),ao,h,h,Qo),Ga=oo(((e,t,n,r)=>{const s=Un(e).rows,i=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,o=s[t.cells[0].row],a=ya(t.clipboard,t.generators,o),l=Eo(i,e,a,t.generators,n);return ha(l,t.cells[0].row,t.cells[0].column)}),ao,h,h,Qo),qa=(e,t)=>{const n=Kn.fromTable(e);return lo(n,t).bind((e=>{const t=e[e.length-1],r=e[0].column,s=t.column+t.colspan,i=I(k(n.all,(e=>D(e.cells,(e=>e.column>=r&&e.column<s)))));return Ii(i)})).getOr("")},Xa=(e,t)=>{const n=Kn.fromTable(e);return lo(n,t).bind(Ii).getOr("")},Ka=(e,t)=>{const n=Kn.fromTable(e);return lo(n,t).bind((e=>{const t=e[e.length-1],r=e[0].row,s=t.row+t.rowspan;return(e=>{const t=k(e,(e=>Ni(e).type)),n=T(t,"header"),r=T(t,"footer");if(n||r){const e=T(t,"body");return!n||e||r?n||e||!r?w.none():w.some("footer"):w.some("header")}return w.some("body")})(n.all.slice(r,s))})).getOr("")},Ja=(e,t)=>e.dispatch("NewRow",{node:t}),Za=(e,t)=>e.dispatch("NewCell",{node:t}),Qa=(e,t,n)=>{e.dispatch("TableModified",{...n,table:t})},el={structure:!1,style:!0},tl={structure:!0,style:!1},nl={structure:!0,style:!0},rl=e=>t=>t.options.get(e),sl=e=>w.from(e.options.get("table_clone_elements")),il=rl("table_header_type"),ol=rl("table_column_resizing"),al=e=>"preservetable"===ol(e),ll=e=>"resizetable"===ol(e),cl=rl("table_sizing_mode"),dl=e=>"relative"===cl(e),ul=e=>"fixed"===cl(e),hl=e=>"responsive"===cl(e),ml=rl("table_resize_bars"),pl=rl("table_default_attributes"),fl=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>{var n;if(ul(e)){const r=e.dom,s=null!==(n=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==n?n:e.getBody(),i=Rn(ge.fromDom(s));return{...t,width:i+"px"}}return hl(e)?X(t,((e,t)=>"width"!==t)):t})(e,n)},gl=rl("table_use_colgroups"),vl=(e,t)=>dl(e)?is(t):ul(e)?ss(t):rs(t),yl=(e,t,n)=>{const r=e=>"table"===Q(Es(e)),s=sl(e),i=ll(e)?h:Mi,o=t=>{switch(il(e)){case"section":return Yi();case"sectionCells":return Vi();case"cells":return $i();default:return Ui(t,"section")}},a=(t,r)=>r.cursor.fold((()=>{const r=jt(t);return j(r).filter(nt).map((r=>{n.clearSelectedCells(t.dom);const s=e.dom.createRng();return s.selectNode(r.dom),e.selection.setRng(s),ce(r,"data-mce-selected","1"),s}))}),(r=>{const s=wi(xi,r);const i=e.dom.createRng();return i.setStart(s.element.dom,s.offset),i.setEnd(s.element.dom,s.offset),e.selection.setRng(i),n.clearSelectedCells(t.dom),w.some(i)})),l=(n,r,i,l)=>(c,d,u=!1)=>{Ls(c);const h=ge.fromDom(e.getDoc()),m=Ts(i,h,s),p={sizing:vl(e,c),resize:ll(e)?Li():Ai(),section:o(c)};return r(c)?n(c,d,m,p).bind((n=>{t.refresh(c.dom),L(n.newRows,(t=>{Ja(e,t.dom)})),L(n.newCells,(t=>{Za(e,t.dom)}));const r=a(c,n);return nt(c)&&(Ls(c),u||Qa(e,c.dom,l)),r.map((e=>({rng:e,effect:l})))})):w.none()},c=l(Ra,(t=>!1===r(e)||Di(t).rows>1),h,tl),d=l(Oa,(t=>!1===r(e)||Di(t).columns>1),h,tl);return{deleteRow:c,deleteColumn:d,insertRowsBefore:l(ka,b,h,tl),insertRowsAfter:l(La,b,h,tl),insertColumnsBefore:l(Aa,b,i,tl),insertColumnsAfter:l(Da,b,i,tl),mergeCells:l(ja,b,h,tl),unmergeCells:l(Ua,b,h,tl),pasteColsBefore:l(Va,b,h,tl),pasteColsAfter:l($a,b,h,tl),pasteRowsBefore:l(Wa,b,h,tl),pasteRowsAfter:l(Ga,b,h,tl),pasteCells:l(Ya,b,h,nl),makeCellsHeader:l(Fa,b,h,tl),unmakeCellsHeader:l(Ha,b,h,tl),makeColumnsHeader:l(Pa,b,h,tl),unmakeColumnsHeader:l(Na,b,h,tl),makeRowsHeader:l(Ia,b,h,tl),makeRowsBody:l(za,b,h,tl),makeRowsFooter:l(Ba,b,h,tl),getTableRowType:Ka,getTableCellType:Xa,getTableColType:qa}},_l=(e,t,n)=>{const r=Dt(e,t,1);1===n||r<=1?me(e,t):ce(e,t,Math.min(n,r))},bl=(e,t)=>{const n=Kn.fromTable(e);return co(n,t).map((e=>{const t=e[e.length-1],r=e[0].column,s=t.column+t.colspan,i=((e,t,n)=>{if(Kn.hasColumns(e)){const r=D(Kn.justColumns(e),(e=>e.column>=t&&e.column<n)),s=k(r,(e=>{const r=Ye(e.element);return _l(r,"span",n-t),r})),i=ge.fromTag("colgroup");return ze(i,s),[i]}return[]})(n,r,s),o=((e,t,n)=>k(e.all,(e=>{const r=D(e.cells,(e=>e.column>=t&&e.column<n)),s=k(r,(e=>{const r=Ye(e.element);return _l(r,"colspan",n-t),r})),i=ge.fromTag("tr");return ze(i,s),i})))(n,r,s);return[...i,...o]}))},wl=(e,t,n)=>{const r=Kn.fromTable(e);return lo(r,t).bind((e=>{const t=no(r,n,!1),s=Un(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),i=z(s,(e=>{const t=D(e.cells,(e=>!e.isLocked));return t.length>0?[{...e,cells:t}]:[]})),o=ro(i);return gt(o.length>0,o)})).map((e=>(e=>k(e,(e=>{const t=Ue(e.element);return L(e.cells,(e=>{const n=Ye(e.element);Ki(n,"colspan",e.colspan,1),Ki(n,"rowspan",e.rowspan,1),Pe(t,n)})),t})))(e)))},xl=Bo([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ml=(e,t,n)=>{const r=n.substring(0,n.length-e.length),s=parseFloat(r);return r===s.toString()?t(s):xl.invalid(n)},Sl={...xl,from:e=>bt(e,"%")?Ml("%",xl.percent,e):bt(e,"px")?Ml("px",xl.pixels,e):xl.invalid(e)},Tl=(e,t,n)=>e.fold((()=>t),(e=>((e,t,n)=>{const r=n/t;return k(e,(e=>Sl.from(e).fold((()=>e),(e=>e*r+"px"),(e=>e/100*n+"px"))))})(t,n,e)),(e=>((e,t)=>k(e,(e=>Sl.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,n))),Cl=(e,t,n)=>{const r=Sl.from(n),s=B(e,(e=>"0px"===e))?((e,t)=>{const n=e.fold((()=>m("")),(e=>m(e/t+"px")),(()=>m(100/t+"%")));return E(t,n)})(r,e.length):Tl(r,e,t);return Ll(s)},El=(e,t)=>0===e.length?t:O(e,((e,t)=>Sl.from(t).fold(m(0),p,p)+e),0),kl=(e,t)=>Sl.from(e).fold(m(e),(e=>e+t+"px"),(e=>e+t+"%")),Ll=e=>{if(0===e.length)return e;const t=O(e,((e,t)=>{const n=Sl.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{const n=Math.floor(e);return{value:n+t,remainder:e-n}})(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}}),{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([kl(n[n.length-1],Math.round(t.remainder))])},Al=Sl.from,Dl=e=>Al(e).fold(m("px"),m("px"),m("%")),Ol=(e,t,n)=>{const r=Kn.fromTable(e),s=r.all,i=Kn.justCells(r),o=Kn.justColumns(r);t.each((t=>{const n=Dl(t),s=Dn(e),a=((e,t)=>Xr(e,t,Wr,Kr))(r,e),l=Cl(a,s,t);Kn.hasColumns(r)?((e,t,n)=>{L(t,((t,r)=>{const s=El([e[r]],It());Tt(t.element,"width",s+n)}))})(l,o,n):((e,t,n)=>{L(t,(t=>{const r=e.slice(t.column,t.colspan+t.column),s=El(r,It());Tt(t.element,"width",s+n)}))})(l,i,n),Tt(e,"width",t)})),n.each((t=>{const n=Dl(t),o=sr(e),a=((e,t,n)=>Zr(e,t,n,Gr,Kr))(r,e,xr);((e,t,n,r)=>{L(n,(t=>{const n=e.slice(t.row,t.rowspan+t.row),s=El(n,zt());Tt(t.element,"height",s+r)})),L(t,((t,n)=>{Tt(t.element,"height",e[n])}))})(Cl(a,o,t),s,i,n),Tt(e,"height",t)}))},Rl=e=>Br(e).exists((e=>kr.test(e))),Pl=e=>Br(e).exists((e=>Lr.test(e))),Nl=e=>Br(e).isNone(),Il=e=>{me(e,"width")},zl=e=>{const t=Yr(e);Ol(e,w.some(t),w.none()),Il(e)},Bl=e=>{const t=(e=>Dn(e)+"px")(e);Ol(e,w.some(t),w.none()),Il(e)},Fl=e=>{At(e,"width");const t=Ut(e),n=t.length>0?t:jt(e);L(n,(e=>{At(e,"width"),Il(e)})),Il(e)},Hl={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},jl=e=>{const t=ge.fromTag("colgroup");return E(e,(()=>Pe(t,ge.fromTag("col")))),t},Ul=(e,t,n,r)=>E(e,(e=>((e,t,n,r)=>{const s=ge.fromTag("tr");for(let i=0;i<e;i++){const e=r<t||i<n?ge.fromTag("th"):ge.fromTag("td");i<n&&ce(e,"scope","row"),r<t&&ce(e,"scope","col"),Pe(e,ge.fromTag("br")),Pe(s,e)}return s})(t,n,r,e))),Yl=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},Vl=(e,t,n,s,i)=>{const o=fl(e),a={styles:o,attributes:pl(e),colGroups:gl(e)};return e.undoManager.ignore((()=>{const r=((e,t,n,r,s,i=Hl)=>{const o=ge.fromTag("table"),a="cells"!==s;Ct(o,i.styles),de(o,i.attributes),i.colGroups&&Pe(o,jl(t));const l=Math.min(e,n);if(a&&n>0){const e=ge.fromTag("thead");Pe(o,e);const i=Ul(n,t,"sectionCells"===s?l:0,r);ze(e,i)}const c=ge.fromTag("tbody");Pe(o,c);const d=Ul(a?e-l:e,t,a?0:n,r);return ze(c,d),o})(n,t,i,s,il(e),a);ce(r,"data-mce-id","__mce");const o=(e=>{const t=ge.fromTag("div"),n=ge.fromDom(e.dom.cloneNode(!0));return Pe(t,n),(e=>e.dom.innerHTML)(t)})(r);e.insertContent(o),e.addVisual()})),ht(Es(e),'table[data-mce-id="__mce"]').map((t=>(ul(e)?Bl(t):hl(e)?Fl(t):(dl(e)||(e=>r(e)&&-1!==e.indexOf("%"))(o.width))&&zl(t),Ls(t),me(t,"data-mce-id"),((e,t)=>{L(at(t,"tr"),(t=>{Ja(e,t.dom),L(at(t,"th,td"),(t=>{Za(e,t.dom)}))}))})(e,t),((e,t)=>{ht(t,"td,th").each(g(Yl,e))})(e,t),t.dom))).getOr(null)};var $l=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Wl="x-tinymce/dom-table-",Gl=Wl+"rows",ql=Wl+"columns",Xl=e=>{const t=$l.FakeClipboardItem(e);$l.write([t])},Kl=e=>{var t;const n=null!==(t=$l.read())&&void 0!==t?t:[];return Y(n,(t=>w.from(t.getType(e))))},Jl=e=>{Kl(e).isSome()&&$l.clear()},Zl=e=>{e.fold(ec,(e=>Xl({[Gl]:e})))},Ql=()=>Kl(Gl),ec=()=>Jl(Gl),tc=e=>{e.fold(rc,(e=>Xl({[ql]:e})))},nc=()=>Kl(ql),rc=()=>Jl(ql),sc=e=>mi(As(e),ks(e)),ic=(e,t)=>{const n=ks(e),i=e=>Yt(e,n),o=t=>(e=>pi(As(e),ks(e)))(e).bind((e=>i(e).map((n=>t(n,e))))),a=t=>{e.focus()},l=(t,n=!1)=>o(((r,s)=>{const i=ui(fi(e),r,s);t(r,i,n).each(a)})),c=()=>o(((t,n)=>{const r=ui(fi(e),t,n),s=Ts(h,ge.fromDom(e.getDoc()),w.none());return wl(t,r,s)})),d=()=>o(((t,n)=>{const r=ui(fi(e),t,n);return bl(t,r)})),m=(t,n)=>n().each((n=>{const r=k(n,(e=>Ye(e)));o(((n,s)=>{const i=Cs(ge.fromDom(e.getDoc())),o=((e,t,n,r)=>({selection:si(e),clipboard:n,generators:r}))(fi(e),0,r,i);t(n,o).each(a)}))})),p=e=>(t,n)=>((e,t)=>Z(e,t)?w.from(e[t]):w.none())(n,"type").each((t=>{l(e(t),n.no_events)}));W({mceTableSplitCells:()=>l(t.unmergeCells),mceTableMergeCells:()=>l(t.mergeCells),mceTableInsertRowBefore:()=>l(t.insertRowsBefore),mceTableInsertRowAfter:()=>l(t.insertRowsAfter),mceTableInsertColBefore:()=>l(t.insertColumnsBefore),mceTableInsertColAfter:()=>l(t.insertColumnsAfter),mceTableDeleteCol:()=>l(t.deleteColumn),mceTableDeleteRow:()=>l(t.deleteRow),mceTableCutCol:()=>d().each((e=>{tc(e),l(t.deleteColumn)})),mceTableCutRow:()=>c().each((e=>{Zl(e),l(t.deleteRow)})),mceTableCopyCol:()=>d().each((e=>tc(e))),mceTableCopyRow:()=>c().each((e=>Zl(e))),mceTablePasteColBefore:()=>m(t.pasteColsBefore,nc),mceTablePasteColAfter:()=>m(t.pasteColsAfter,nc),mceTablePasteRowBefore:()=>m(t.pasteRowsBefore,Ql),mceTablePasteRowAfter:()=>m(t.pasteRowsAfter,Ql),mceTableDelete:()=>sc(e).each((t=>{Yt(t,n).filter(v(n)).each((t=>{const n=ge.fromText("");if(Oe(t,n),Fe(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(n.dom,0),t.setEnd(n.dom,0),e.selection.setRng(t),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,n)=>{o((t=>{const r=fi(e),s=B(r,(t=>e.formatter.match("tablecellclass",{value:n},t.dom))),i=s?e.formatter.remove:e.formatter.apply;L(r,(e=>i("tablecellclass",{value:n},e.dom))),Qa(e,t.dom,el)}))},mceTableToggleClass:(t,n)=>{o((t=>{e.formatter.toggle("tableclass",{value:n},t.dom),Qa(e,t.dom,el)}))},mceTableToggleCaption:()=>{sc(e).each((t=>{Yt(t,n).each((n=>{ut(n,"caption").fold((()=>{const t=ge.fromTag("caption");Pe(t,ge.fromText("Caption")),((e,t,n)=>{Ae(e,n).fold((()=>{Pe(e,t)}),(e=>{De(e,t)}))})(n,t,0),e.selection.setCursorLocation(t.dom,0)}),(r=>{ae("caption")(t)&&_e("td",n).each((t=>e.selection.setCursorLocation(t.dom,0))),Fe(r)})),Qa(e,n.dom,tl)}))}))},mceTableSizingMode:(t,r)=>(t=>sc(e).each((r=>{hl(e)||ul(e)||dl(e)||Yt(r,n).each((n=>{"relative"!==t||Rl(n)?"fixed"!==t||Pl(n)?"responsive"!==t||Nl(n)||Fl(n):Bl(n):zl(n),Ls(n),Qa(e,n.dom,tl)}))})))(r),mceTableCellType:p((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:p((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:p((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,n)=>e.addCommand(n,t))),e.addCommand("mceInsertTable",((t,n)=>{((e,t,n,r={})=>{const s=e=>u(e)&&e>0;if(s(t)&&s(n)){const s=r.headerRows||0,i=r.headerColumns||0;return Vl(e,n,t,i,s)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(e,n.rows,n.columns,n.options)})),e.addCommand("mceTableApplyCellStyle",((t,n)=>{const o=e=>"tablecell"+e.toLowerCase().replace("-","");if(!s(n))return;const a=fi(e);if(0===a.length)return;const l=X(n,((t,n)=>e.formatter.has(o(n))&&r(t)));(e=>{for(const t in e)if($.call(e,t))return!1;return!0})(l)||(W(l,((t,n)=>{const r=o(n);L(a,(n=>{""===t?e.formatter.remove(r,{value:null},n.dom,!0):e.formatter.apply(r,{value:t},n.dom)}))})),i(a[0]).each((t=>Qa(e,t.dom,el))))}))},oc=Bo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ac={before:oc.before,on:oc.on,after:oc.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(p,p,p)},lc=(e,t)=>({selection:e,kill:t}),cc=(e,t)=>{const n=e.document.createRange();return n.selectNode(t.dom),n},dc=(e,t)=>{const n=e.document.createRange();return uc(n,t),n},uc=(e,t)=>e.selectNodeContents(t.dom),hc=(e,t,n)=>{const r=e.document.createRange();var s;return s=r,t.fold((e=>{s.setStartBefore(e.dom)}),((e,t)=>{s.setStart(e.dom,t)}),(e=>{s.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(r,n),r},mc=(e,t,n,r,s)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,s),i},pc=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),fc=Bo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gc=(e,t,n)=>t(ge.fromDom(n.startContainer),n.startOffset,ge.fromDom(n.endContainer),n.endOffset),vc=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:m(e),rtl:w.none}),relative:(t,n)=>({ltr:Xt((()=>hc(e,t,n))),rtl:Xt((()=>w.some(hc(e,n,t))))}),exact:(t,n,r,s)=>({ltr:Xt((()=>mc(e,t,n,r,s))),rtl:Xt((()=>w.some(mc(e,r,s,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>fc.rtl(ge.fromDom(e.endContainer),e.endOffset,ge.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>gc(0,fc.ltr,n)));return gc(0,fc.ltr,n)})(0,n)},yc=(e,t)=>vc(e,t).match({ltr:(t,n,r,s)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,s),i},rtl:(t,n,r,s)=>{const i=e.document.createRange();return i.setStart(r.dom,s),i.setEnd(t.dom,n),i}});fc.ltr,fc.rtl;const _c=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),bc=(e,t,n,r)=>({start:ac.on(e,t),finish:ac.on(n,r)}),wc=(e,t)=>{const n=yc(e,t);return _c(ge.fromDom(n.startContainer),n.startOffset,ge.fromDom(n.endContainer),n.endOffset)},xc=bc,Mc=(e,t,n,r,s)=>be(n,r)?w.none():Zs(n,r,t).bind((t=>{const r=t.boxes.getOr([]);return r.length>1?(s(e,r,t.start,t.finish),w.some(lc(w.some(xc(n,0,n,hs(n))),!0))):w.none()})),Sc=(e,t)=>({item:e,mode:t}),Tc=(e,t,n,r=Cc)=>e.property().parent(t).map((e=>Sc(e,r))),Cc=(e,t,n,r=Ec)=>n.sibling(e,t).map((e=>Sc(e,r))),Ec=(e,t,n,r=Ec)=>{const s=e.property().children(t);return n.first(s).map((e=>Sc(e,r)))},kc=[{current:Tc,next:Cc,fallback:w.none()},{current:Cc,next:Ec,fallback:w.some(Tc)},{current:Ec,next:Ec,fallback:w.some(Cc)}],Lc=(e,t,n,r,s=kc)=>P(s,(e=>e.current===n)).bind((n=>n.current(e,t,r,n.next).orThunk((()=>n.fallback.bind((n=>Lc(e,t,n,r))))))),Ac=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?w.some(e[e.length-1]):w.none()}),Dc=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?w.some(e[0]):w.none()}),Oc=(e,t,n,r,s,i)=>Lc(e,t,r,s).bind((t=>i(t.item)?w.none():n(t.item)?w.some(t.item):Oc(e,t.item,n,t.mode,s,i))),Rc=e=>t=>0===e.property().children(t).length,Pc=(e,t,n,r)=>Oc(e,t,n,Cc,Ac(),r),Nc=(e,t,n,r)=>Oc(e,t,n,Cc,Dc(),r),Ic=Vs(),zc=(e,t)=>((e,t,n)=>Pc(e,t,Rc(e),n))(Ic,e,t),Bc=(e,t)=>((e,t,n)=>Nc(e,t,Rc(e),n))(Ic,e,t),Fc=Bo([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Hc=e=>mt(e,"tr"),jc={...Fc,verify:(e,t,n,r,s,i,o)=>mt(r,"td,th",o).bind((n=>mt(t,"td,th",o).map((t=>be(n,t)?be(r,n)&&hs(n)===s?i(t):Fc.none("in same cell"):Ks(Hc,[n,t]).fold((()=>((e,t,n)=>{const r=e.getRect(t),s=e.getRect(n);return s.right>r.left&&s.left<r.right})(e,t,n)?Fc.success():i(t)),(e=>i(t))))))).getOr(Fc.none("default")),cata:(e,t,n,r,s)=>e.fold(t,n,r,s)},Uc=(e,t)=>N(e,g(be,t)),Yc=ae("br"),Vc=(e,t,n)=>t(e,n).bind((e=>se(e)&&0===cs(e).trim().length?Vc(e,t,n):w.some(e))),$c=(e,t,n,r)=>((e,t)=>Ae(e,t).filter(Yc).orThunk((()=>Ae(e,t-1).filter(Yc))))(t,n).bind((t=>r.traverse(t).fold((()=>Vc(t,r.gather,e).map(r.relative)),(e=>(e=>Te(e).bind((t=>{const n=Le(t);return Uc(n,e).map((r=>((e,t,n,r)=>({parent:e,children:t,element:n,index:r}))(t,n,e,r)))})))(e).map((e=>ac.on(e.parent,e.index))))))),Wc=(e,t,n,r)=>{const s=Yc(t)?((e,t,n)=>n.traverse(t).orThunk((()=>Vc(t,n.gather,e))).map(n.relative))(e,t,r):$c(e,t,n,r);return s.map((e=>({start:e,finish:e})))},Gc=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),qc=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Xc=(e,t,n)=>({left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}),Kc=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Jc=(e,t)=>w.some(e.getRect(t)),Zc=(e,t,n)=>re(t)?Jc(e,t).map(Kc):se(t)?((e,t,n)=>n>=0&&n<hs(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):w.none())(e,t,n).map(Kc):w.none(),Qc=(e,t)=>re(t)?Jc(e,t).map(Kc):se(t)?e.getRangedRect(t,0,t,hs(t)).map(Kc):w.none(),ed=Bo([{none:[]},{retry:["caret"]}]),td=(e,t,n)=>{return(r=t,s=sa,lt(((e,t)=>t(e)),ct,r,s,i)).fold(_,(t=>Qc(e,t).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(n,e)))));var r,s,i},nd={point:e=>e.bottom,adjuster:(e,t,n,r,s)=>{const i=Gc(s,5);return Math.abs(n.bottom-r.bottom)<1||n.top>s.bottom?ed.retry(i):n.top===s.bottom?ed.retry(Gc(s,1)):td(e,t,s)?ed.retry(Xc(i,5,0)):ed.none()},move:Gc,gather:Bc},rd=(e,t,n,r,s)=>0===s?w.some(r):((e,t,n)=>e.elementFromPoint(t,n).filter((e=>"table"===Q(e))).isSome())(e,r.left,t.point(r))?((e,t,n,r,s)=>rd(e,t,n,t.move(r,5),s))(e,t,n,r,s-1):e.situsFromPoint(r.left,t.point(r)).bind((i=>i.start.fold(w.none,(i=>Qc(e,i).bind((o=>t.adjuster(e,i,o,n,r).fold(w.none,(r=>rd(e,t,n,r,s-1))))).orThunk((()=>w.some(r)))),w.none))),sd=(e,t,n)=>{const r=e.move(n,5),s=rd(t,e,n,r,100).getOr(r);return((e,t,n)=>e.point(t)>n.getInnerHeight()?w.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?w.some(-e.point(t)):w.none())(e,s,t).fold((()=>t.situsFromPoint(s.left,e.point(s))),(n=>(t.scrollBy(0,n),t.situsFromPoint(s.left,e.point(s)-n))))},id={tryUp:g(sd,{point:e=>e.top,adjuster:(e,t,n,r,s)=>{const i=qc(s,5);return Math.abs(n.top-r.top)<1||n.bottom<s.top?ed.retry(i):n.bottom===s.top?ed.retry(qc(s,1)):td(e,t,s)?ed.retry(Xc(i,5,0)):ed.none()},move:qc,gather:zc}),tryDown:g(sd,nd),getJumpSize:m(5)},od=(e,t,n)=>e.getSelection().bind((r=>Wc(t,r.finish,r.foffset,n).fold((()=>w.some(vi(r.finish,r.foffset))),(s=>{const i=e.fromSitus(s);return(e=>jc.cata(e,(e=>w.none()),(()=>w.none()),(e=>w.some(vi(e,0))),(e=>w.some(vi(e,hs(e))))))(jc.verify(e,r.finish,r.foffset,i.finish,i.foffset,n.failure,t))})))),ad=(e,t,n,r,s,i)=>0===i?w.none():dd(e,t,n,r,s).bind((o=>{const a=e.fromSitus(o),l=jc.verify(e,n,r,a.finish,a.foffset,s.failure,t);return jc.cata(l,(()=>w.none()),(()=>w.some(o)),(o=>be(n,o)&&0===r?ld(e,n,r,qc,s):ad(e,t,o,0,s,i-1)),(o=>be(n,o)&&r===hs(o)?ld(e,n,r,Gc,s):ad(e,t,o,hs(o),s,i-1)))})),ld=(e,t,n,r,s)=>Zc(e,t,n).bind((t=>cd(e,s,r(t,id.getJumpSize())))),cd=(e,t,n)=>{const r=Tn().browser;return r.isChromium()||r.isSafari()||r.isFirefox()?t.retry(e,n):w.none()},dd=(e,t,n,r,s)=>Zc(e,n,r).bind((t=>cd(e,s,t))),ud=(e,t)=>{return ct(e,(e=>Te(e).exists((e=>be(e,t)))),n).isSome();var n},hd=(e,t,n,r,s)=>mt(r,"td,th",t).bind((r=>mt(r,"table",t).bind((i=>ud(s,i)?((e,t,n)=>od(e,t,n).bind((r=>ad(e,t,r.element,r.offset,n,20).map(e.fromSitus))))(e,t,n).bind((e=>mt(e.finish,"td,th",t).map((t=>({start:r,finish:t,range:e}))))):w.none())))),md=(e,t,n,r,s,i)=>i(r,t).orThunk((()=>hd(e,t,n,r,s).map((e=>{const t=e.range;return lc(w.some(xc(t.start,t.soffset,t.finish,t.foffset)),!0)})))),pd=(e,t)=>mt(e,"tr",t).bind((e=>mt(e,"table",t).bind((n=>{const r=at(n,"tr");return be(e,r[0])?((e,t,n)=>Pc(Ic,e,t,n))(n,(e=>gs(e).isSome()),t).map((e=>{const t=hs(e);return lc(w.some(xc(e,t,e,t)),!0)})):w.none()})))),fd=(e,t)=>mt(e,"tr",t).bind((e=>mt(e,"table",t).bind((n=>{const r=at(n,"tr");return be(e,r[r.length-1])?((e,t,n)=>Nc(Ic,e,t,n))(n,(e=>fs(e).isSome()),t).map((e=>lc(w.some(xc(e,0,e,0)),!0))):w.none()})))),gd=(e,t,n,r,s,i,o)=>hd(e,n,r,s,i).bind((e=>Mc(t,n,e.start,e.finish,o))),vd=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},yd=()=>{const e=(e=>{const t=vd(w.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(w.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(w.some(e))}}})(h);return{...e,on:t=>e.get().each(t)}},_d=(e,t)=>mt(e,"td,th",t),bd={traverse:ke,gather:Bc,relative:ac.before,retry:id.tryDown,failure:jc.failedDown},wd={traverse:Ee,gather:zc,relative:ac.before,retry:id.tryUp,failure:jc.failedUp},xd=e=>t=>t===e,Md=xd(38),Sd=xd(40),Td=e=>e>=37&&e<=40,Cd={isBackward:xd(37),isForward:xd(39)},Ed={isBackward:xd(39),isForward:xd(37)},kd=Bo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ld={domRange:kd.domRange,relative:kd.relative,exact:kd.exact,exactFromRange:e=>kd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>ge.fromDom(e.startContainer),relative:(e,t)=>ac.getStart(e),exact:(e,t,n,r)=>e}))(e);return n=t,ge.fromDom(Se(n).dom.defaultView);var n},range:_c},Ad=(e,t,n)=>{var r,s;return w.from(null===(s=(r=e.dom).caretPositionFromPoint)||void 0===s?void 0:s.call(r,t,n)).bind((t=>{if(null===t.offsetNode)return w.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),w.some(n)}))},Dd=(e,t,n)=>{var r,s;return w.from(null===(s=(r=e.dom).caretRangeFromPoint)||void 0===s?void 0:s.call(r,t,n))},Od=document.caretPositionFromPoint?Ad:document.caretRangeFromPoint?Dd:w.none,Rd=(e,t)=>{const n=Q(e);return"input"===n?ac.after(e):T(["br","img"],n)?0===t?ac.before(e):ac.after(e):ac.on(e,t)},Pd=(e,t,n,r)=>{const s=((e,t,n,r)=>{const s=Me(e).dom.createRange();return s.setStart(e.dom,t),s.setEnd(n.dom,r),s})(e,t,n,r),i=be(e,n)&&t===r;return s.collapsed&&!i},Nd=e=>w.from(e.getSelection()),Id=(e,t)=>{Nd(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},zd=(e,t,n,r,s)=>{const i=mc(e,t,n,r,s);Id(e,i)},Bd=(e,t)=>vc(e,t).match({ltr:(t,n,r,s)=>{zd(e,t,n,r,s)},rtl:(t,n,r,s)=>{Nd(e).each((i=>{if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom,n,r.dom,s);else if(i.extend)try{((e,t,n,r,s,i)=>{t.collapse(n.dom,r),t.extend(s.dom,i)})(0,i,t,n,r,s)}catch(i){zd(e,r,s,t,n)}else zd(e,r,s,t,n)}))}}),Fd=(e,t,n,r,s)=>{const i=((e,t,n,r)=>{const s=Rd(e,t),i=Rd(n,r);return Ld.relative(s,i)})(t,n,r,s);Bd(e,i)},Hd=(e,t,n)=>{const r=((e,t)=>{const n=e.fold(ac.before,Rd,ac.after),r=t.fold(ac.before,Rd,ac.after);return Ld.relative(n,r)})(t,n);Bd(e,r)},jd=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return w.some(_c(ge.fromDom(t.startContainer),t.startOffset,ge.fromDom(n.endContainer),n.endOffset))}return w.none()},Ud=e=>{if(null===e.anchorNode||null===e.focusNode)return jd(e);{const t=ge.fromDom(e.anchorNode),n=ge.fromDom(e.focusNode);return Pd(t,e.anchorOffset,n,e.focusOffset)?w.some(_c(t,e.anchorOffset,n,e.focusOffset)):jd(e)}},Yd=(e,t,n=!0)=>{const r=(n?dc:cc)(e,t);Id(e,r)},Vd=e=>(e=>Nd(e).filter((e=>e.rangeCount>0)).bind(Ud))(e).map((e=>Ld.exact(e.start,e.soffset,e.finish,e.foffset))),$d=(e,t)=>(e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?w.some(n).map(pc):w.none()})(yc(e,t)),Wd=(e,t,n)=>((e,t,n)=>{const r=ge.fromDom(e.document);return Od(r,t,n).map((e=>_c(ge.fromDom(e.startContainer),e.startOffset,ge.fromDom(e.endContainer),e.endOffset)))})(e,t,n),Gd=e=>({elementFromPoint:(t,n)=>ge.fromPoint(ge.fromDom(e.document),t,n),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,n,r,s)=>{const i=Ld.exact(t,n,r,s);return $d(e,i)},getSelection:()=>Vd(e).map((t=>wc(e,t))),fromSitus:t=>{const n=Ld.relative(t.start,t.finish);return wc(e,n)},situsFromPoint:(t,n)=>Wd(e,t,n).map((e=>bc(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{Nd(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:(t=!1)=>{Vd(e).each((n=>n.fold((e=>e.collapse(t)),((n,r)=>{const s=t?n:r;Hd(e,s,s)}),((n,r,s,i)=>{const o=t?n:s,a=t?r:i;Fd(e,o,a,o,a)}))))},setSelection:t=>{Fd(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,n)=>{Hd(e,t,n)},selectNode:t=>{Yd(e,t,!1)},selectContents:t=>{Yd(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return lr(n,r)})(ge.fromDom(e.document)).top,scrollBy:(t,n)=>{((e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollBy(e,t)})(t,n,ge.fromDom(e.document))}}),qd=(e,t)=>({rows:e,cols:t}),Xd=(e,t,n,r)=>{const s=((e,t,n,r)=>{const s=yd(),i=s.clear,o=i=>{s.on((s=>{r.clearBeforeUpdate(t),_d(i.target,n).each((o=>{Zs(s,o,n).each((n=>{const s=n.boxes.getOr([]);if(1===s.length){const n=s[0],o="false"===Xi(n),a=pt(Gi(i.target),n,be);o&&a&&(r.selectRange(t,s,n,n),e.selectContents(n))}else s.length>1&&(r.selectRange(t,s,n.start,n.finish),e.selectContents(o))}))}))}))};return{clearstate:i,mousedown:e=>{r.clear(t),_d(e.target,n).each(s.set)},mouseover:e=>{o(e)},mouseup:e=>{o(e),i()}}})(Gd(e),t,n,r);return{clearstate:s.clearstate,mousedown:s.mousedown,mouseover:s.mouseover,mouseup:s.mouseup}},Kd=(e,t,n,r)=>{const s=Gd(e),i=()=>(r.clear(t),w.none());return{keydown:(e,o,a,l,c,d)=>{const u=e.raw,h=u.which,m=!0===u.shiftKey,p=Qs(t,r.selectedSelector).fold((()=>(Td(h)&&!m&&r.clearBeforeUpdate(t),Sd(h)&&m?g(gd,s,t,n,bd,l,o,r.selectRange):Md(h)&&m?g(gd,s,t,n,wd,l,o,r.selectRange):Sd(h)?g(md,s,n,bd,l,o,fd):Md(h)?g(md,s,n,wd,l,o,pd):w.none)),(e=>{const n=n=>()=>{const i=Y(n,(n=>((e,t,n,r,s)=>ti(r,e,t,s.firstSelectedSelector,s.lastSelectedSelector).map((e=>(s.clearBeforeUpdate(n),s.selectRange(n,e.boxes,e.start,e.finish),e.boxes))))(n.rows,n.cols,t,e,r)));return i.fold((()=>ei(t,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>{const n=Sd(h)||d.isForward(h)?ac.after:ac.before;return s.setRelativeSelection(ac.on(e.first,0),n(e.table)),r.clear(t),lc(w.none(),!0)}))),(e=>w.some(lc(w.none(),!0))))};return Sd(h)&&m?n([qd(1,0)]):Md(h)&&m?n([qd(-1,0)]):d.isBackward(h)&&m?n([qd(0,-1),qd(-1,0)]):d.isForward(h)&&m?n([qd(0,1),qd(1,0)]):Td(h)&&!m?i:w.none}));return p()},keyup:(e,s,i,o,a)=>Qs(t,r.selectedSelector).fold((()=>{const l=e.raw,c=l.which;return!0===l.shiftKey&&Td(c)?((e,t,n,r,s,i,o)=>be(n,s)&&r===i?w.none():mt(n,"td,th",t).bind((n=>mt(s,"td,th",t).bind((r=>Mc(e,t,n,r,o))))))(t,n,s,i,o,a,r.selectRange):w.none()}),w.none)}},Jd=(e,t)=>{const n=ue(e,t);return void 0===n||""===n?[]:n.split(" ")},Zd=e=>void 0!==e.dom.classList,Qd=(e,t)=>((e,t,n)=>{const r=Jd(e,t).concat([n]);return ce(e,t,r.join(" ")),!0})(e,"class",t),eu=(e,t)=>{Zd(e)?e.dom.classList.add(t):Qd(e,t)},tu=(e,t)=>Zd(e)&&e.dom.classList.contains(t),nu=(e,t,n)=>{const r=t=>{me(t,e.selected),me(t,e.firstSelected),me(t,e.lastSelected)},s=t=>{ce(t,e.selected,"1")},i=e=>{o(e),n()},o=t=>{const n=at(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(n,r)};return{clearBeforeUpdate:o,clear:i,selectRange:(n,r,o,a)=>{i(n),L(r,s),ce(o,e.firstSelected,"1"),ce(a,e.lastSelected,"1"),t(r,o,a)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},ru=()=>({tag:"none"}),su=e=>({tag:"multiple",elements:e}),iu=e=>({tag:"single",element:e}),ou=(e,t,n)=>{const r=Kn.fromTable(e);return lo(r,t).map((e=>{const t=no(r,n,!1),{rows:s}=Un(t),i=((e,t)=>{const n=e.slice(0,t[t.length-1].row+1),r=ro(n);return z(r,(e=>{const n=e.cells.slice(0,t[t.length-1].column+1);return k(n,(e=>e.element))}))})(s,e),o=((e,t)=>{const n=e.slice(t[0].row+t[0].rowspan-1,e.length),r=ro(n);return z(r,(e=>{const n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return k(n,(e=>e.element))}))})(s,e);return{upOrLeftCells:i,downOrRightCells:o}}))},au=e=>{const t=ge.fromDom((e=>{if(Je()&&c(e.target)){const t=ge.fromDom(e.target);if(re(t)&&tt(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return j(t)}}return w.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),s=(i=r,o=n,(...e)=>i(o.apply(null,e)));var i,o;return((e,t,n,r,s,i,o)=>({target:e,x:t,y:n,stop:r,prevent:s,kill:i,raw:o}))(t,e.clientX,e.clientY,n,r,s,e)},lu=(e,t,n,r,s)=>{const i=((e,t)=>n=>{e(n)&&t(au(n))})(n,r);return e.dom.addEventListener(t,i,s),{unbind:g(cu,e,t,i,s)}},cu=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},du=b,uu=(e,t,n)=>((e,t,n,r)=>lu(e,t,n,r,!1))(e,t,du,n),hu=au,mu=e=>!1===tu(ge.fromDom(e.target),"ephox-snooker-resizer-bar"),pu=(e,t)=>{const n=((e,t,n)=>({get:()=>ni(e(),n).fold((()=>t().fold(ru,iu)),su)}))((()=>ge.fromDom(e.getBody())),(()=>pi(As(e),ks(e))),di.selectedSelector),r=nu(di,((t,n,r)=>{Yt(n).each((s=>{const i=sl(e),o=Ts(h,ge.fromDom(e.getDoc()),i),a=fi(e),l=ou(s,{selection:a},o);((e,t,n,r,s)=>{e.dispatch("TableSelectionChange",{cells:t,start:n,finish:r,otherCells:s})})(e,t,n,r,l)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));e.on("init",(n=>{const s=e.getWin(),i=Es(e),o=ks(e),a=Xd(s,i,o,r),l=Kd(s,i,o,r),c=((e,t,n,r)=>{const s=Gd(e);return(e,i)=>{r.clearBeforeUpdate(t),Zs(e,i,n).each((e=>{const n=e.boxes.getOr([]);r.selectRange(t,n,e.start,e.finish),s.selectContents(i),s.collapseSelection()}))}})(s,i,o,r);e.on("TableSelectorChange",(e=>c(e.start,e.finish)));const d=(t,n)=>{(e=>!0===e.raw.shiftKey)(t)&&(n.kill&&t.kill(),n.selection.each((t=>{const n=Ld.relative(t.start,t.finish),r=yc(s,n);e.selection.setRng(r)})))},u=e=>0===e.button,m=(()=>{const e=vd(ge.fromDom(i)),t=vd(0);return{touchEnd:n=>{const r=ge.fromDom(n.target);if(ae("td")(r)||ae("th")(r)){const s=e.get(),i=t.get();be(s,r)&&n.timeStamp-i<300&&(n.preventDefault(),c(r,r))}e.set(r),t.set(n.timeStamp)}}})();e.on("dragstart",(e=>{a.clearstate()})),e.on("mousedown",(e=>{u(e)&&mu(e)&&a.mousedown(hu(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!mu(e)||a.mouseover(hu(e))})),e.on("mouseup",(e=>{u(e)&&mu(e)&&a.mouseup(hu(e))})),e.on("touchend",m.touchEnd),e.on("keyup",(t=>{const n=hu(t);if(n.raw.shiftKey&&Td(n.raw.which)){const t=e.selection.getRng(),r=ge.fromDom(t.startContainer),s=ge.fromDom(t.endContainer);l.keyup(n,r,t.startOffset,s,t.endOffset).each((e=>{d(n,e)}))}})),e.on("keydown",(n=>{const r=hu(n);t.hide();const s=e.selection.getRng(),i=ge.fromDom(s.startContainer),o=ge.fromDom(s.endContainer),a=tr(Cd,Ed)(ge.fromDom(e.selection.getStart()));l.keydown(r,i,s.startOffset,o,s.endOffset,a).each((e=>{d(r,e)})),t.show()})),e.on("NodeChange",(()=>{const t=e.selection,n=ge.fromDom(t.getStart()),s=ge.fromDom(t.getEnd());Ks(Yt,[n,s]).fold((()=>r.clear(i)),h)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(di.firstSelected),e.serializer.addTempAttr(di.lastSelected)}));return{getSelectedCells:()=>((e,t,n,r)=>{switch(e.tag){case"none":return t();case"single":return r(e.element);case"multiple":return n(e.elements)}})(n.get(),m([]),(e=>k(e,(e=>e.dom))),(e=>[e.dom])),clearSelectedCells:e=>r.clear(ge.fromDom(e))}},fu=e=>{let t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=D(t,(t=>t!==e))},trigger:(...n)=>{const r={};L(e,((e,t)=>{r[e]=n[t]})),L(t,(e=>{e(r)}))}}},gu=e=>({registry:G(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:G(e,(e=>e.trigger))}),vu=e=>e.slice(0).sort(),yu=(e,t,n)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return((e,t)=>{if(!i(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");L(t,(t=>{if(!r(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))})("required",t),(e=>{const t=vu(e);P(t,((e,n)=>n<t.length-1&&e===t[n+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))})(t),r=>{const s=V(r);B(t,(e=>T(s,e)))||((e,t)=>{throw new Error("All required keys ("+vu(e).join(", ")+") were not specified. Specified keys were: "+vu(t).join(", ")+".")})(t,s),e(t,s);const i=D(t,(e=>!n.validate(r[e],e)));return i.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+vu(e).join(", ")+") were not.")})(i,n.label),r}},_u=(e,t)=>{const n=D(t,(t=>!T(e,t)));n.length>0&&(e=>{throw new Error("Unsupported keys for object: "+vu(e).join(", "))})(n)},bu=e=>((e,t)=>yu(e,t,{validate:d,label:"function"}))(_u,e),wu=bu(["compare","extract","mutate","sink"]),xu=bu(["element","start","stop","destroy"]),Mu=bu(["forceDrop","drop","move","delayDrop"]),Su=()=>{let e=w.none();const t=gu({move:fu(["info"])});return{onEvent:(n,r)=>{r.extract(n).each((n=>{const s=((t,n)=>{const r=e.map((e=>t.compare(e,n)));return e=w.some(n),r})(r,n);s.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=w.none()},events:t.registry}},Tu=()=>{const e=(()=>{const e=gu({move:fu(["info"])});return{onEvent:h,reset:h,events:e.registry}})(),t=Su();let n=e;return{on:()=>{n.reset(),n=t},off:()=>{n.reset(),n=e},isOn:()=>n===t,onEvent:(e,t)=>{n.onEvent(e,t)},events:t.events}},Cu=(e,t,n)=>{let r=!1;const s=gu({start:fu([]),stop:fu([])}),i=Tu(),a=()=>{d.stop(),i.isOn()&&(i.off(),s.trigger.stop())},l=((e,t)=>{let n=null;const r=()=>{o(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...s)=>{r(),n=setTimeout((()=>{n=null,e.apply(null,s)}),t)}}})(a,200);i.events.move.bind((n=>{t.mutate(e,n.info)}));const c=e=>(...t)=>{r&&e.apply(null,t)},d=t.sink(Mu({forceDrop:a,drop:c(a),move:c((e=>{l.cancel(),i.onEvent(e,t)})),delayDrop:c(l.throttle)}),n);return{element:d.element,go:e=>{d.start(e),i.on(),s.trigger.start()},on:()=>{r=!0},off:()=>{r=!1},destroy:()=>{d.destroy()},events:s.registry}},Eu=e=>{const t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},ku=Eu("ephox-dragster").resolve;var Lu=wu({compare:(e,t)=>lr(t.left-e.left,t.top-e.top),extract:e=>w.some(lr(e.x,e.y)),sink:(e,t)=>{const n=(e=>{const t={layerClass:ku("blocker"),...e},n=ge.fromTag("div");return ce(n,"role","presentation"),Ct(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),eu(n,ku("blocker")),eu(n,t.layerClass),{element:m(n),destroy:()=>{Fe(n)}}})(t),r=uu(n.element(),"mousedown",e.forceDrop),s=uu(n.element(),"mouseup",e.drop),i=uu(n.element(),"mousemove",e.move),o=uu(n.element(),"mouseout",e.delayDrop);return xu({element:n.element,start:e=>{Pe(e,n.element())},stop:()=>{Fe(n.element())},destroy:()=>{n.destroy(),s.unbind(),i.unbind(),o.unbind(),r.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const Au=Eu("ephox-snooker").resolve,Du=()=>{const e=gu({drag:fu(["xDelta","yDelta","target"])});let t=w.none();const n=(()=>{const e=gu({drag:fu(["xDelta","yDelta"])});return{mutate:(t,n)=>{e.trigger.drag(t,n)},events:e.registry}})();n.events.drag.bind((n=>{t.each((t=>{e.trigger.drag(n.xDelta,n.yDelta,t)}))}));return{assign:e=>{t=w.some(e)},get:()=>t,mutate:n.mutate,events:e.registry}},Ou=Au("resizer-bar"),Ru=Au("resizer-rows"),Pu=Au("resizer-cols"),Nu=e=>{const t=at(e.parent(),"."+Ou);L(t,Fe)},Iu=(e,t,n)=>{const r=e.origin();L(t,(t=>{t.each((t=>{const s=n(r,t);eu(s,Ou),Pe(e.parent(),s)}))}))},zu=(e,t,n,r)=>{Iu(e,t,((e,t)=>{const s=((e,t,n,r,s)=>{const i=ge.fromTag("div");return Ct(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:s+"px",width:r+"px"}),de(i,{"data-column":e,role:"presentation"}),i})(t.col,t.x-e.left,n.top-e.top,7,r);return eu(s,Pu),s}))},Bu=(e,t,n,r)=>{Iu(e,t,((e,t)=>{const s=((e,t,n,r,s)=>{const i=ge.fromTag("div");return Ct(i,{position:"absolute",left:t+"px",top:n-s/2+"px",height:s+"px",width:r+"px"}),de(i,{"data-row":e,role:"presentation"}),i})(t.row,n.left-e.left,t.y-e.top,r,7);return eu(s,Ru),s}))},Fu=(e,t,n,r,s)=>{const i=dr(n),o=t.isResizable,a=r.length>0?xr.positions(r,n):[],l=a.length>0?((e,t)=>z(e.all,((e,n)=>t(e.element)?[n]:[])))(e,o):[],c=D(a,((e,t)=>C(l,(e=>t===e))));Bu(t,c,i,On(n));const d=s.length>0?Sr.positions(s,n):[],u=d.length>0?((e,t)=>{const n=[];return E(e.grid.columns,(r=>{const s=Kn.getColumnAt(e,r).map((e=>e.element));s.forall(t)&&n.push(r)})),D(n,(n=>{const r=Kn.filterItems(e,(e=>e.column===n));return B(r,(e=>t(e.element)))}))})(e,o):[],h=D(d,((e,t)=>C(u,(e=>t===e))));zu(t,h,i,ir(n))},Hu=(e,t)=>{if(Nu(e),e.isResizable(t)){const n=Kn.fromTable(t),r=Qn(n),s=Jn(n);Fu(n,e,t,r,s)}},ju=(e,t)=>{const n=at(e.parent(),"."+Ou);L(n,t)},Uu=e=>{ju(e,(e=>{Tt(e,"display","none")}))},Yu=e=>{ju(e,(e=>{Tt(e,"display","block")}))},Vu=Au("resizer-bar-dragging"),$u=e=>{const t=Du(),n=((e,t={})=>{var n;const r=null!==(n=t.mode)&&void 0!==n?n:Lu;return Cu(e,r,t)})(t,{});let r=w.none();const s=(e,t)=>w.from(ue(e,t));t.events.drag.bind((e=>{s(e.target,"data-row").each((t=>{const n=Nt(e.target,"top");Tt(e.target,"top",n+e.yDelta+"px")})),s(e.target,"data-column").each((t=>{const n=Nt(e.target,"left");Tt(e.target,"left",n+e.xDelta+"px")}))}));const i=(e,t)=>Nt(e,t)-Dt(e,"data-initial-"+t,0);n.events.stop.bind((()=>{t.get().each((t=>{r.each((n=>{s(t,"data-row").each((e=>{const r=i(t,"top");me(t,"data-initial-top"),d.trigger.adjustHeight(n,r,parseInt(e,10))})),s(t,"data-column").each((e=>{const r=i(t,"left");me(t,"data-initial-left"),d.trigger.adjustWidth(n,r,parseInt(e,10))})),Hu(e,n)}))}))}));const o=(r,s)=>{d.trigger.startAdjust(),t.assign(r),ce(r,"data-initial-"+s,Nt(r,s)),eu(r,Vu),Tt(r,"opacity","0.2"),n.go(e.parent())},a=uu(e.parent(),"mousedown",(e=>{var t;t=e.target,tu(t,Ru)&&o(e.target,"top"),(e=>tu(e,Pu))(e.target)&&o(e.target,"left")})),l=t=>be(t,e.view()),c=uu(e.view(),"mouseover",(t=>{var n;(n=t.target,mt(n,"table",l).filter(qi)).fold((()=>{nt(t.target)&&Nu(e)}),(t=>{r=w.some(t),Hu(e,t)}))})),d=gu({adjustHeight:fu(["table","delta","row"]),adjustWidth:fu(["table","delta","column"]),startAdjust:fu([])});return{destroy:()=>{a.unbind(),c.unbind(),n.destroy(),Nu(e)},refresh:t=>{Hu(e,t)},on:n.on,off:n.off,hideBars:g(Uu,e),showBars:g(Yu,e),events:d.registry}},Wu=(e,t,n)=>{const r=xr,s=Sr,i=$u(e),o=gu({beforeResize:fu(["table","type"]),afterResize:fu(["table","type"]),startDrag:fu([])});return i.events.adjustHeight.bind((e=>{const t=e.table;o.trigger.beforeResize(t,"row");const n=r.delta(e.delta,t);Wo(t,n,e.row,r),o.trigger.afterResize(t,"row")})),i.events.startAdjust.bind((e=>{o.trigger.startDrag()})),i.events.adjustWidth.bind((e=>{const r=e.table;o.trigger.beforeResize(r,"col");const i=s.delta(e.delta,r),a=n(r);$o(r,i,e.column,t,a),o.trigger.afterResize(r,"col")})),{on:i.on,off:i.off,refreshBars:i.refresh,hideBars:i.hideBars,showBars:i.showBars,destroy:i.destroy,events:o.registry}},Gu=(e,t)=>{const n=ie(e)?(e=>ge.fromDom(Se(e).dom.documentElement))(e):e;return{parent:m(n),view:m(e),origin:m(lr(0,0)),isResizable:t}},qu=(e,t,n)=>({parent:m(t),view:m(e),origin:m(lr(0,0)),isResizable:n}),Xu=()=>{const e=ge.fromTag("div");return Ct(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Pe(rt(ge.fromDom(document)),e),e},Ku=e=>c(e)&&"TABLE"===e.tagName,Ju="bar-",Zu=e=>"false"!==ue(e,"data-mce-resize"),Qu=e=>{const t=yd(),n=yd(),r=yd();let s,i;const o=t=>vl(e,t),a=()=>al(e)?Ai():Li(),l=(t,n,r)=>{const l=bt(n,"e");if(""===i&&zl(t),r!==s&&""!==i){Tt(t,"width",i);const n=a(),c=o(t),d=al(e)||l?(e=>Di(e).columns)(t)-1:0;$o(t,r-s,d,n,c)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(i)){const e=parseFloat(i.replace("%",""));Tt(t,"width",r*e/s+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(i)&&(e=>{const t=Kn.fromTable(e);Kn.hasColumns(t)||L(jt(e),(e=>{const t=Et(e,"width");Tt(e,"width",t),me(e,"width")}))})(t)},c=()=>{n.on((e=>{e.destroy()})),r.on((t=>{((e,t)=>{e.inline&&Fe(t.parent())})(e,t)}))};e.on("init",(()=>{const s=((e,t)=>e.inline?qu(ge.fromDom(e.getBody()),Xu(),t):Gu(ge.fromDom(e.getDoc()),t))(e,Zu);if(r.set(s),(e=>{const t=e.options.get("object_resizing");return T(t.split(","),"table")})(e)&&ml(e)){const r=a(),i=Wu(s,r,o);i.on(),i.events.startDrag.bind((n=>{t.set(e.selection.getRng())})),i.events.beforeResize.bind((t=>{const n=t.table.dom;((e,t,n,r,s)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:r,origin:s})})(e,n,Ds(n),Os(n),Ju+t.type)})),i.events.afterResize.bind((n=>{const r=n.table,s=r.dom;Ls(r),t.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,n,r,s)=>{e.dispatch("ObjectResized",{target:t,width:n,height:r,origin:s})})(e,s,Ds(s),Os(s),Ju+n.type),e.undoManager.add()})),n.set(i)}})),e.on("ObjectResizeStart",(t=>{const n=t.target;if(Ku(n)){const r=ge.fromDom(n);L(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+ol(e)+"-columns")})),!Pl(r)&&ul(e)?Bl(r):!Rl(r)&&dl(e)&&zl(r),Nl(r)&&_t(t.origin,Ju)&&zl(r),s=t.width,i=hl(e)?"":((e,t)=>{const n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return w.from(n).filter(xt)})(e,n).getOr("")}})),e.on("ObjectResized",(t=>{const n=t.target;if(Ku(n)){const r=ge.fromDom(n),s=t.origin;_t(s,"corner-")&&l(r,s,t.width),Ls(r),Qa(e,r.dom,el)}})),e.on("SwitchMode",(()=>{n.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("remove",(()=>{c()}));return{refresh:e=>{n.on((t=>t.refreshBars(ge.fromDom(e))))},hide:()=>{n.on((e=>e.hideBars()))},show:()=>{n.on((e=>e.showBars()))}}},eh=e=>{(e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=T(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse",width:"100%"}}),t("table_column_resizing",{processor:e=>{const t=T(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0})})(e);const t=Qu(e),n=pu(e,t),r=yl(e,t,n);return ic(e,r),((e,t)=>{const n=ks(e),r=t=>pi(As(e)).bind((r=>Yt(r,n).map((n=>{const s=ui(fi(e),n,r);return t(n,s)})))).getOr("");W({mceTableRowType:()=>r(t.getTableRowType),mceTableCellType:()=>r(t.getTableCellType),mceTableColType:()=>r(t.getTableColType)},((t,n)=>e.addQueryValueHandler(n,t)))})(e,r),gi(e,r),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}},th=e=>({table:eh(e)});e.add("dom",th)}()},4114:(e,t,n)=>{n(1018)},1018:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=Object.getPrototypeOf,n=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},r=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&n(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,s=e=>t=>typeof t===e,i=r("string"),o=r("object"),a=e=>((e,r)=>o(e)&&n(e,r,((e,n)=>t(e)===n)))(e,Object),l=r("array"),c=(d=null,e=>d===e);var d;const u=s("boolean"),h=e=>!(e=>null==e)(e),m=s("function"),p=s("number"),f=()=>{};class g{constructor(e,t){this.tag=e,this.value=t}static some(e){return new g(!0,e)}static none(){return g.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?g.some(e(this.value)):g.none()}bind(e){return this.tag?e(this.value):g.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:g.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return h(e)?g.some(e):g.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}g.singletonNone=new g(!1);const v=Object.keys,y=Object.hasOwnProperty,_=(e,t,n,r)=>(((e,t)=>{const n=v(e);for(let r=0,s=n.length;r<s;r++){const s=n[r];t(e[s],s)}})(e,((e,s)=>{(t(e,s)?n:r)(e,s)})),{}),b=(e,t)=>y.call(e,t),w=Array.prototype.push,x=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!l(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);w.apply(t,e[n])}return t},M=e=>((e,t)=>t>=0&&t<e.length?g.some(e[t]):g.none())(e,0);"undefined"!=typeof window?window:Function("return this;")();const S=(e,t,n)=>{((e,t,n)=>{if(!(i(n)||u(n)||p(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(e.dom,t,n)},T=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},C={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return T(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return T(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return T(n)},fromDom:T,fromPoint:(e,t,n)=>g.from(e.dom.elementFromPoint(t,n)).map(T)};var E=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.util.URI");const L=e=>e.length>0,A=e=>t=>t.options.get(e),D=e=>{const t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:e=>{const t=!1===e||i(e)||((e,t)=>{if(l(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1})(e,o)||m(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},O=A("image_dimensions"),R=A("image_advtab"),P=A("image_uploadtab"),N=A("image_prepend_url"),I=A("image_class_list"),z=A("image_description"),B=A("image_title"),F=A("image_caption"),H=A("image_list"),j=A("a11y_advanced_options"),U=A("automatic_uploads"),Y=(e,t)=>Math.max(parseInt(e,10),parseInt(t,10)),V=e=>(e&&(e=e.replace(/px$/,"")),e),$=e=>(e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e),W=e=>"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),G=(e,t)=>{const n=e.options.get;return k.isDomSafe(t,"img",{allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")})},q=E.DOM,X=e=>e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?V(e.style.marginLeft):"",K=e=>e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?V(e.style.marginTop):"",J=e=>e.style.borderWidth?V(e.style.borderWidth):"",Z=(e,t)=>e.hasAttribute(t)?e.getAttribute(t):"",Q=(e,t)=>e.style[t]?e.style[t]:"",ee=e=>null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName,te=(e,t,n)=>{""===n?e.removeAttribute(t):e.setAttribute(t,n)},ne=e=>{ee(e)?(e=>{const t=e.parentNode;q.insertAfter(e,t),q.remove(t)})(e):(e=>{const t=q.create("figure",{class:"image"});q.insertAfter(t,e),t.appendChild(e),t.appendChild(q.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"})(e)},re=(e,t)=>{const n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},se=(e,t)=>(e,n,r)=>{e.style[n]?(e.style[n]=$(r),re(e,t)):te(e,n,r)},ie=(e,t)=>e.style[t]?V(e.style[t]):Z(e,t),oe=(e,t)=>{const n=$(t);e.style.marginLeft=n,e.style.marginRight=n},ae=(e,t)=>{const n=$(t);e.style.marginTop=n,e.style.marginBottom=n},le=(e,t)=>{const n=$(t);e.style.borderWidth=n},ce=(e,t)=>{e.style.borderStyle=t},de=e=>"FIGURE"===e.nodeName,ue=e=>0===q.getAttrib(e,"alt").length&&"presentation"===q.getAttrib(e,"role"),he=e=>ue(e)?"":Z(e,"alt"),me=(e,t)=>{const n=document.createElement("img");return te(n,"style",t.style),(X(n)||""!==t.hspace)&&oe(n,t.hspace),(K(n)||""!==t.vspace)&&ae(n,t.vspace),(J(n)||""!==t.border)&&le(n,t.border),((e=>Q(e,"borderStyle"))(n)||""!==t.borderStyle)&&ce(n,t.borderStyle),e(n.getAttribute("style"))},pe=(e,t)=>({src:Z(t,"src"),alt:he(t),title:Z(t,"title"),width:ie(t,"width"),height:ie(t,"height"),class:Z(t,"class"),style:e(Z(t,"style")),caption:ee(t),hspace:X(t),vspace:K(t),border:J(t),borderStyle:Q(t,"borderStyle"),isDecorative:ue(t)}),fe=(e,t,n,r,s)=>{n[r]!==t[r]&&s(e,r,n[r])},ge=(e,t,n)=>{if(n){q.setAttrib(e,"role","presentation");const t=C.fromDom(e);S(t,"alt","")}else{if(c(t)){const t=C.fromDom(e);r="alt",t.dom.removeAttribute(r)}else{const n=C.fromDom(e);S(n,"alt",t)}"presentation"===q.getAttrib(e,"role")&&q.setAttrib(e,"role","")}var r},ve=(e,t)=>(n,r,s)=>{e(n,s),re(n,t)},ye=(e,t,n)=>{const r=pe(e,n);fe(n,r,t,"caption",((e,t,n)=>ne(e))),fe(n,r,t,"src",te),fe(n,r,t,"title",te),fe(n,r,t,"width",se(0,e)),fe(n,r,t,"height",se(0,e)),fe(n,r,t,"class",te),fe(n,r,t,"style",ve(((e,t)=>te(e,"style",t)),e)),fe(n,r,t,"hspace",ve(oe,e)),fe(n,r,t,"vspace",ve(ae,e)),fe(n,r,t,"border",ve(le,e)),fe(n,r,t,"borderStyle",ve(ce,e)),((e,t,n)=>{n.alt===t.alt&&n.isDecorative===t.isDecorative||ge(e,n.alt,n.isDecorative)})(n,r,t)},_e=(e,t)=>{const n=(e=>{if(e.margin){const t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e})(e.dom.styles.parse(t)),r=e.dom.styles.parse(e.dom.styles.serialize(n));return e.dom.styles.serialize(r)},be=e=>{const t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||W(t))?null:t},we=(e,t)=>{const n=e.dom,r=((e,t)=>{const n={};var r;return _(e,t,(r=n,(e,t)=>{r[t]=e}),f),n})(e.schema.getTextBlockElements(),((t,n)=>!e.schema.isValidChild(n,"figure"))),s=n.getParent(t.parentNode,(e=>{return t=r,n=e.nodeName,b(t,n)&&void 0!==t[n]&&null!==t[n];var t,n}),e.getBody());return s?n.split(s,t):t},xe=(e,t)=>{const n=((e,t)=>{const n=document.createElement("img");if(ye(e,{...t,caption:!1},n),ge(n,t.alt,t.isDecorative),t.caption){const e=q.create("figure",{class:"image"});return e.appendChild(n),e.appendChild(q.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false",e}return n})((t=>_e(e,t)),t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);const r=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(r,"data-mce-id",null),de(r)){const t=we(e,r);e.selection.select(t)}else e.selection.select(r)},Me=(e,t)=>{const n=be(e);if(ye((t=>_e(e,t)),t,n),((e,t)=>{e.dom.setAttrib(t,"src",t.getAttribute("src"))})(e,n),de(n.parentNode)){const t=n.parentNode;we(e,t),e.selection.select(n.parentNode)}else e.selection.select(n),((e,t,n)=>{const r=()=>{n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())};n.onload=()=>{t.width||t.height||!O(e)||e.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),r()},n.onerror=r})(e,t,n)},Se=(e,t)=>{const n=be(e);if(n){const r={...pe((t=>_e(e,t)),n),...t},s=((e,t)=>{const n=t.src;return{...t,src:G(e,n)?n:""}})(e,r);r.src?Me(e,s):((e,t)=>{if(t){const n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})(e,n)}else t.src&&xe(e,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...t})},Te=(Ce=(e,t)=>a(e)&&a(t)?Te(e,t):t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)b(r,e)&&(t[e]=Ce(t[e],r[e]))}return t});var Ce,Ee=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ke=tinymce.util.Tools.resolve("tinymce.util.Tools");const Le=e=>i(e.value)?e.value:"",Ae=(e,t)=>{const n=[];return ke.each(e,(e=>{const r=(e=>i(e.text)?e.text:i(e.title)?e.title:"")(e);if(void 0!==e.menu){const s=Ae(e.menu,t);n.push({text:r,items:s})}else{const s=t(e);n.push({text:r,value:s})}})),n},De=(e=Le)=>t=>t?g.from(t).map((t=>Ae(t,e))):g.none(),Oe=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return g.none()})(e,(e=>(e=>b(e,"items"))(e)?Oe(e.items,t):e.value===t?g.some(e):g.none())),Re=De,Pe=e=>De(Le)(e),Ne=(e,t)=>e.bind((e=>Oe(e,t))),Ie=e=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}),ze=e=>{const t=Re((t=>e.convertURL(t.value||t.url,"src"))),n=new Promise((n=>{((e,t)=>{const n=H(e);i(n)?fetch(n).then((e=>{e.ok&&e.json().then(t)})):m(n)?n(t):t(n)})(e,(e=>{n(t(e).map((e=>x([[{text:"None",value:""}],e]))))}))})),r=Pe(I(e)),s=R(e),o=P(e),a=(e=>L(e.options.get("images_upload_url")))(e),l=(e=>h(e.options.get("images_upload_handler")))(e),c=(e=>{const t=be(e);return t?pe((t=>_e(e,t)),t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(e),d=z(e),u=B(e),p=O(e),f=F(e),v=j(e),y=U(e),_=g.some(N(e)).filter((e=>i(e)&&e.length>0));return n.then((e=>({image:c,imageList:e,classList:r,hasAdvTab:s,hasUploadTab:o,hasUploadUrl:a,hasUploadHandler:l,hasDescription:d,hasImageTitle:u,hasDimensions:p,hasImageCaption:f,prependURL:_,hasAccessibilityOptions:v,automaticUploads:y})))},Be=e=>{const t=e.imageList.map((e=>({name:"images",type:"listbox",label:"Image list",items:e}))),n={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},r=e.classList.map((e=>({name:"classes",type:"listbox",label:"Class",items:e})));return x([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(s=e.classList.isSome()&&e.hasImageCaption,s?{type:"grid",columns:2}:{type:"panel"}),items:x([r.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var s},Fe=e=>({title:"General",name:"general",items:Be(e)}),He=Be,je=e=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}),Ue=e=>({src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}),Ye=(e,t)=>({src:e.src.value,alt:0===e.alt.length&&t?null:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}),Ve=(e,t)=>{const n=t.getData();((e,t)=>/^(?:[a-zA-Z]+:)?\/\//.test(t)?g.none():e.prependURL.bind((e=>t.substring(0,e.length)!==e?g.some(e+t):g.none())))(e,n.src.value).each((e=>{t.setData({src:{value:e,meta:n.src.meta}})}))},$e=(e,t)=>{const n=t.getData(),r=n.src.meta;if(void 0!==r){const s=Te({},n);((e,t,n)=>{e.hasDescription&&i(n.alt)&&(t.alt=n.alt),e.hasAccessibilityOptions&&(t.isDecorative=n.isDecorative||t.isDecorative||!1),e.hasImageTitle&&i(n.title)&&(t.title=n.title),e.hasDimensions&&(i(n.width)&&(t.dimensions.width=n.width),i(n.height)&&(t.dimensions.height=n.height)),i(n.class)&&Ne(e.classList,n.class).each((e=>{t.classes=e.value})),e.hasImageCaption&&u(n.caption)&&(t.caption=n.caption),e.hasAdvTab&&(i(n.style)&&(t.style=n.style),i(n.vspace)&&(t.vspace=n.vspace),i(n.border)&&(t.border=n.border),i(n.hspace)&&(t.hspace=n.hspace),i(n.borderstyle)&&(t.borderstyle=n.borderstyle))})(e,s,r),t.setData(s)}},We=(e,t,n,r)=>{Ve(t,r),$e(t,r),((e,t,n,r)=>{const s=r.getData(),i=s.src.value,o=s.src.meta||{};o.width||o.height||!t.hasDimensions||(L(i)?e.imageSize(i).then((e=>{n.open&&r.setData({dimensions:e})})).catch((e=>console.error(e))):r.setData({dimensions:{width:"",height:""}}))})(e,t,n,r),((e,t,n)=>{const r=n.getData(),s=Ne(e.imageList,r.src.value);t.prevImage=s,n.setData({images:s.map((e=>e.value)).getOr("")})})(t,n,r)},Ge=(e,t,n,r)=>{const s=r.getData();r.block("Uploading image"),M(s.fileinput).fold((()=>{r.unblock()}),(s=>{const i=URL.createObjectURL(s),o=()=>{r.unblock(),URL.revokeObjectURL(i)},a=s=>{r.setData({src:{value:s,meta:{}}}),r.showTab("general"),We(e,t,n,r)};var l;(l=s,new Promise(((e,t)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=()=>{t(n.error.message)},n.readAsDataURL(l)}))).then((n=>{const l=e.createBlobCache(s,i,n);t.automaticUploads?e.uploadImage(l).then((e=>{a(e.url),o()})).catch((t=>{o(),e.alertErr(t)})):(e.addToBlobCache(l),a(l.blobUri()),r.unblock())}))}))},qe=(e,t,n)=>(r,s)=>{"src"===s.name?We(e,t,n,r):"images"===s.name?((e,t,n,r)=>{const s=r.getData(),i=Ne(t.imageList,s.images);i.each((e=>{const t=""===s.alt||n.prevImage.map((e=>e.text===s.alt)).getOr(!1);t?""===e.value?r.setData({src:e,alt:n.prevAlt}):r.setData({src:e,alt:e.text}):r.setData({src:e})})),n.prevImage=i,We(e,t,n,r)})(e,t,n,r):"alt"===s.name?n.prevAlt=r.getData().alt:"fileinput"===s.name?Ge(e,t,n,r):"isDecorative"===s.name&&r.setEnabled("alt",!r.getData().isDecorative)},Xe=e=>()=>{e.open=!1},Ke=e=>{if(e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler){return{type:"tabpanel",tabs:x([[Fe(e)],e.hasAdvTab?[Ie(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[je(e)]:[]])}}return{type:"panel",items:He(e)}},Je=(e,t,n)=>r=>{const s=Te(Ue(t.image),r.getData()),i={...s,style:me(n.normalizeCss,Ye(s,!1))};e.execCommand("mceUpdateImage",!1,Ye(i,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),r.close()},Ze=e=>t=>G(e,t)?(e=>new Promise((t=>{const n=document.createElement("img"),r=e=>{n.onload=n.onerror=null,n.parentNode&&n.parentNode.removeChild(n),t(e)};n.onload=()=>{const e={width:Y(n.width,n.clientWidth),height:Y(n.height,n.clientHeight)};r(Promise.resolve(e))},n.onerror=()=>{r(Promise.reject(`Failed to get image dimensions for: ${e}`))};const s=n.style;s.visibility="hidden",s.position="fixed",s.bottom=s.left="0px",s.width=s.height="auto",document.body.appendChild(n),n.src=e})))(e.documentBaseURI.toAbsolute(t)).then((e=>({width:String(e.width),height:String(e.height)}))):Promise.resolve({width:"",height:""}),Qe=e=>(t,n,r)=>e.editorUpload.blobCache.create({blob:t,blobUri:n,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,filename:t.name,base64:r.split(",")[1]}),et=e=>t=>{e.editorUpload.blobCache.add(t)},tt=e=>t=>{e.windowManager.alert(t)},nt=e=>t=>_e(e,t),rt=e=>t=>e.dom.parseStyle(t),st=e=>(t,n)=>e.dom.serializeStyle(t,n),it=e=>t=>Ee(e).upload([t],!1).then((e=>0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(e[0].error.message):e[0])),ot=e=>{const t={imageSize:Ze(e),addToBlobCache:et(e),createBlobCache:Qe(e),alertErr:tt(e),normalizeCss:nt(e),parseStyle:rt(e),serializeStyle:st(e),uploadImage:it(e)};return{open:()=>{ze(e).then((n=>{const r=(e=>({prevImage:Ne(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}))(n);return{title:"Insert/Edit Image",size:"normal",body:Ke(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ue(n.image),onSubmit:Je(e,n,t),onChange:qe(t,n,r),onClose:Xe(r)}})).then(e.windowManager.open)}}},at=e=>{const t=e.attr("class");return t&&/\bimage\b/.test(t)},lt=e=>t=>{let n=t.length;const r=t=>{t.attr("contenteditable",e?"true":null)};for(;n--;){const s=t[n];at(s)&&(s.attr("contenteditable",e?"false":null),ke.each(s.getAll("figcaption"),r))}};e.add("image",(e=>{D(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("figure",lt(!0)),e.serializer.addNodeFilter("figure",lt(!1))}))})(e),(e=>{e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ot(e).open,onSetup:t=>(t.setActive(h(be(e))),e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind)}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ot(e).open}),e.ui.registry.addContextMenu("image",{update:e=>de(e)||"IMG"===e.nodeName&&!W(e)?["image"]:[]})})(e),(e=>{e.addCommand("mceImage",ot(e).open),e.addCommand("mceUpdateImage",((t,n)=>{e.undoManager.transact((()=>Se(e,n)))}))})(e)}))}()},6363:(e,t,n)=>{n(9516)},9516:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.VK");const n=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=s=e,r=(i=String).prototype,r.isPrototypeOf(n)||(null===(o=s.constructor)||void 0===o?void 0:o.name)===i.name)?"string":t;var n,r;var s,i,o})(t)===e,r=e=>t=>typeof t===e,s=n("string"),i=n("object"),o=n("array"),a=(l=null,e=>l===e);var l;const c=r("boolean"),d=r("function"),u=(e,t)=>{if(o(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},h=()=>{},m=(e,t)=>e===t;class p{constructor(e,t){this.tag=e,this.value=t}static some(e){return new p(!0,e)}static none(){return p.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?p.some(e(this.value)):p.none()}bind(e){return this.tag?e(this.value):p.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:p.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(e=>null==e)(e)?p.none():p.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}p.singletonNone=new p(!1);const f=Array.prototype.indexOf,g=Array.prototype.push,v=(e,t)=>((e,t)=>f.call(e,t))(e,t)>-1,y=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!o(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);g.apply(t,e[n])}return t},_=(e,t)=>y(((e,t)=>{const n=e.length,r=new Array(n);for(let s=0;s<n;s++){const n=e[s];r[s]=t(n,s)}return r})(e,t)),b=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return p.none()},w=(e,t,n=m)=>e.exists((e=>n(e,t))),x=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},M=(e,t)=>e?p.some(t):p.none(),S=e=>t=>t.options.get(e),T=S("link_assume_external_targets"),C=S("link_context_toolbar"),E=S("link_list"),k=S("link_default_target"),L=S("link_default_protocol"),A=S("link_target_list"),D=S("link_rel_list"),O=S("link_class_list"),R=S("link_title"),P=S("allow_unsafe_link_target"),N=S("link_quicklink");var I=tinymce.util.Tools.resolve("tinymce.util.Tools");const z=e=>s(e.value)?e.value:"",B=(e,t)=>{const n=[];return I.each(e,(e=>{const r=(e=>s(e.text)?e.text:s(e.title)?e.title:"")(e);if(void 0!==e.menu){const s=B(e.menu,t);n.push({text:r,items:s})}else{const s=t(e);n.push({text:r,value:s})}})),n},F=(e=z)=>t=>p.from(t).map((t=>B(t,e))),H={sanitize:e=>F(z)(e),sanitizeWith:F,createUi:(e,t)=>n=>({name:e,type:"listbox",label:t,items:n}),getValue:z},j=Object.keys,U=Object.hasOwnProperty,Y=(e,t,n,r)=>(((e,t)=>{const n=j(e);for(let r=0,s=n.length;r<s;r++){const s=n[r];t(e[s],s)}})(e,((e,s)=>{(t(e,s)?n:r)(e,s)})),{}),V=(e,t)=>U.call(e,t);var $=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),W=tinymce.util.Tools.resolve("tinymce.util.URI");const G=e=>e&&"a"===e.nodeName.toLowerCase(),q=e=>G(e)&&!!J(e),X=(e,t)=>{if(e.collapsed)return[];{const n=e.cloneContents(),r=new $(n.firstChild,n),s=[];let i=n.firstChild;do{t(i)&&s.push(i)}while(i=r.next());return s}},K=e=>/^\w+:/i.test(e),J=e=>{const t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},Z=(e,t)=>{const n=["noopener"],r=e?e.split(/\s+/):[],s=e=>e.filter((e=>-1===I.inArray(n,e))),i=t?(e=>(e=s(e)).length>0?e.concat(n):n)(r):s(r);return i.length>0?(e=>I.trim(e.sort().join(" ")))(i):""},Q=(e,t)=>(t=t||e.selection.getNode(),re(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")),ee=(e,t)=>(e=>e.replace(/\uFEFF/g,""))(t?t.innerText||t.textContent:e.getContent({format:"text"})),te=e=>I.grep(e,q).length>0,ne=e=>{const t=e.schema.getTextInlineElements();return 0===X(e.selection.getRng(),(e=>1===e.nodeType&&!G(e)&&!V(t,e.nodeName.toLowerCase()))).length},re=e=>e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),se=(e,t)=>{const n={...t};if(0===D(e).length&&!P(e)){const e=Z(n.rel,"_blank"===n.target);n.rel=e||null}return p.from(n.target).isNone()&&!1===A(e)&&(n.target=k(e)),n.href=((e,t)=>"http"!==t&&"https"!==t||K(e)?e:t+"://"+e)(n.href,T(e)),n},ie=(e,t,n)=>{const r=e.selection.getNode(),s=Q(e,r),i=se(e,(e=>{return t=["title","rel","class","target"],n=(t,n)=>(e[n].each((e=>{t[n]=e.length>0?e:null})),t),r={href:e.href},((e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)})(t,((e,t)=>{r=n(r,e,t)})),r;var t,n,r})(n));e.undoManager.transact((()=>{n.href===t.href&&t.attach(),s?(e.focus(),((e,t,n,r)=>{n.each((e=>{V(t,"innerText")?t.innerText=e:t.textContent=e})),e.dom.setAttribs(t,r),e.selection.select(t)})(e,s,n.text,i)):((e,t,n,r)=>{re(t)?de(e,t,r):n.fold((()=>{e.execCommand("mceInsertLink",!1,r)}),(t=>{e.insertContent(e.dom.createHTML("a",r,e.dom.encode(t)))}))})(e,r,n.text,i)}))},oe=e=>{const{class:t,href:n,rel:r,target:s,text:i,title:o}=e;return((e,t)=>{const n={};var r;return Y(e,t,(r=n,(e,t)=>{r[t]=e}),h),n})({class:t.getOrNull(),href:n,rel:r.getOrNull(),target:s.getOrNull(),text:i.getOrNull(),title:o.getOrNull()},((e,t)=>!1===a(e)))},ae=(e,t,n)=>{const r=((e,t)=>{const n=e.options.get,r={allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")},s=t.href;return{...t,href:W.isDomSafe(s,"a",r)?s:""}})(e,n);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,oe(r)):ie(e,t,r)},le=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact((()=>{const t=e.selection.getNode();re(t)?ce(e,t):(e=>{const t=e.dom,n=e.selection,r=n.getBookmark(),s=n.getRng().cloneRange(),i=t.getParent(s.startContainer,"a[href]",e.getBody()),o=t.getParent(s.endContainer,"a[href]",e.getBody());i&&s.setStartBefore(i),o&&s.setEndAfter(o),n.setRng(s),e.execCommand("unlink"),n.moveToBookmark(r)})(e),e.focus()}))})(e)},ce=(e,t)=>{const n=e.dom.select("img",t)[0];if(n){const r=e.dom.getParents(n,"a[href]",t)[0];r&&(r.parentNode.insertBefore(n,r),e.dom.remove(r))}},de=(e,t,n)=>{const r=e.dom.select("img",t)[0];if(r){const t=e.dom.create("a",n);r.parentNode.insertBefore(t,r),t.appendChild(r)}},ue=e=>{return V(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n},he=(e,t)=>b(t,(t=>ue(t)?he(e,t.items):M(t.value===e,t))),me=(e,t,n,r)=>{const s=r[t],i=e.length>0;return void 0!==s?he(s,n).map((t=>({url:{value:t.value,meta:{text:i?e:t.text,attach:h}},text:i?e:t.text}))):p.none()},pe=(e,t)=>{const n={text:e.text,title:e.title},r=e=>{const t=(r=e.url,M(n.text.length<=0,p.from(r.meta.text).getOr(r.value)));var r;const s=(e=>M(n.title.length<=0,p.from(e.meta.title).getOr("")))(e.url);return t.isSome()||s.isSome()?p.some({...t.map((e=>({text:e}))).getOr({}),...s.map((e=>({title:e}))).getOr({})}):p.none()},s=(e,r)=>{const s=(i=t,o=r.name,"link"===o?i.link:"anchor"===o?i.anchor:p.none()).getOr([]);var i,o;return me(n.text,r.name,s,e)};return{onChange:(e,t)=>{const i=t.name;return"url"===i?r(e()):v(["anchor","link"],i)?s(e(),t):"text"===i||"title"===i?(n[i]=e()[i],p.none()):p.none()}}};var fe=tinymce.util.Tools.resolve("tinymce.util.Delay");const ge=e=>{const t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?p.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:e=>({...e,href:"mailto:"+t})}):p.none()},ve=(e,t)=>n=>{const r=n.href;return 1===e&&!K(r)||0===e&&/^\s*www(\.|\d\.)/i.test(r)?p.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+"://"+r})}):p.none()},ye=(e,t)=>b([ge,ve(T(e),L(e))],(e=>e(t))).fold((()=>Promise.resolve(t)),(n=>new Promise((r=>{((e,t,n)=>{const r=e.selection.getRng();fe.setEditorTimeout(e,(()=>{e.windowManager.confirm(t,(t=>{e.selection.setRng(r),n(t)}))}))})(e,n.message,(e=>{r(e?n.preprocess(t):t)}))})))),_e=e=>{const t=e.dom.select("a:not([href])"),n=_(t,(e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return n.length>0?p.some([{text:"None",value:""}].concat(n)):p.none()},be=e=>{const t=O(e);return t.length>0?H.sanitize(t):p.none()},we=e=>{try{return p.some(JSON.parse(e))}catch(e){return p.none()}},xe=e=>{const t=t=>e.convertURL(t.value||t.url,"href"),n=E(e);return new Promise((e=>{s(n)?fetch(n).then((e=>e.ok?e.text().then(we):Promise.reject())).then(e,(()=>e(p.none()))):d(n)?n((t=>e(p.some(t)))):e(p.from(n))})).then((e=>e.bind(H.sanitizeWith(t)).map((e=>{if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))))},Me=(e,t)=>{const n=D(e);if(n.length>0){const r=w(t,"_blank"),s=e=>Z(H.getValue(e),r);return(!1===P(e)?H.sanitizeWith(s):H.sanitize)(n)}return p.none()},Se=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Te=e=>{const t=A(e);return o(t)?H.sanitize(t).orThunk((()=>p.some(Se))):!1===t?p.none():p.some(Se)},Ce=(e,t,n)=>{const r=e.getAttrib(t,n);return null!==r&&r.length>0?p.some(r):p.none()},Ee=(e,t)=>xe(e).then((n=>{const r=((e,t)=>{const n=e.dom,r=ne(e)?p.some(ee(e.selection,t)):p.none(),s=t?p.some(n.getAttrib(t,"href")):p.none(),i=t?p.from(n.getAttrib(t,"target")):p.none(),o=Ce(n,t,"rel"),a=Ce(n,t,"class");return{url:s,text:r,title:Ce(n,t,"title"),target:i,rel:o,linkClass:a}})(e,t);return{anchor:r,catalogs:{targets:Te(e),rels:Me(e,r.target),classes:be(e),anchor:_e(e),link:n},optNode:p.from(t),flags:{titleEnabled:R(e)}}})),ke=e=>{const t=(e=>{const t=Q(e);return Ee(e,t)})(e);t.then((t=>{const n=((e,t)=>n=>{const r=n.getData();if(!r.url.value)return le(e),void n.close();const s=e=>p.from(r[e]).filter((n=>!w(t.anchor[e],n))),i={href:r.url.value,text:s("text"),target:s("target"),rel:s("rel"),class:s("linkClass"),title:s("title")},o={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:h};ye(e,i).then((t=>{ae(e,o,t)})),n.close()})(e,t);return((e,t,n)=>{const r=e.anchor.text.map((()=>({name:"text",type:"input",label:"Text to display"}))).toArray(),s=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=((e,t)=>{const n=e.anchor,r=n.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:r,link:r,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}})(e,p.from(k(n))),o=e.catalogs,a=pe(i,o);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:y([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,s,x([o.anchor.map(H.createUi("anchor","Anchors")),o.rels.map(H.createUi("rel","Rel")),o.targets.map(H.createUi("target","Open link in...")),o.link.map(H.createUi("link","Link list")),o.classes.map(H.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:(e,{name:t})=>{a.onChange(e.getData,{name:t}).each((t=>{e.setData(t)}))},onSubmit:t}})(t,n,e)})).then((t=>{e.windowManager.open(t)}))},Le=e=>{const t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((e,t)=>{document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)})(t,n)},Ae=(e,t)=>e.dom.getParent(t,"a[href]"),De=e=>Ae(e,e.selection.getStart()),Oe=(e,t)=>{if(t){const n=J(t);if(/^#/.test(n)){const t=e.dom.select(n);t.length&&e.selection.scrollIntoView(t[0],!0)}else Le(t.href)}},Re=e=>()=>{ke(e)},Pe=e=>()=>{Oe(e,De(e))},Ne=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),Ie=e=>t=>{const n=()=>t.setActive(!e.mode.isReadOnly()&&null!==Q(e,e.selection.getNode()));return n(),Ne(e,n)},ze=e=>t=>{const n=()=>t.setEnabled(null!==Q(e,e.selection.getNode()));return n(),Ne(e,n)},Be=e=>t=>{const n=t=>{return te(t)||(n=e.selection.getRng(),X(n,q).length>0);var n},r=e.dom.getParents(e.selection.getStart());return t.setEnabled(n(r)),Ne(e,(e=>t.setEnabled(n(e.parents))))},Fe=e=>{const t=t=>{const n=e.selection.getNode();return t.setEnabled(null!==Q(e,n)),h};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ie(e)},label:"Link",predicate:t=>!!Q(e,t)&&C(e),initValue:()=>{const t=Q(e);return t?J(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const n=e.selection.getNode();return t.setActive(!!Q(e,n)),Ie(e)(t)},onAction:t=>{const n=t.getValue(),r=(t=>{const n=Q(e),r=ne(e);if(!n&&r){const r=ee(e.selection,n);return p.some(r.length>0?r:t)}return p.none()})(n);ae(e,{href:n,attach:h},{href:n,text:r,title:p.none(),rel:p.none(),target:p.none(),class:p.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{le(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{Pe(e)(),t.hide()}}]})};e.add("link",(e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=s(e)||c(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>s(e)||d(e)||u(e,i)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>c(e)||u(e,i),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Re(e),onSetup:Ie(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Pe(e),onSetup:ze(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>le(e),onSetup:Be(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Pe(e),onSetup:ze(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Re(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>le(e),onSetup:Be(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:t=>te(e.dom.getParents(t,"a"))?"link unlink openlink":"link"})})(e),Fe(e),(e=>{e.on("click",(n=>{const r=Ae(e,n.target);r&&t.metaKeyPressed(n)&&(n.preventDefault(),Oe(e,r))})),e.on("keydown",(t=>{const n=De(e);n&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)&&(t.preventDefault(),Oe(e,n))}))})(e),(e=>{e.addCommand("mceLink",(()=>{N(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Re(e)()}))})(e),(e=>{e.addShortcut("Meta+K","",(()=>{e.execCommand("mceLink")}))})(e)}))}()},2161:(e,t,n)=>{n(5869)},5869:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=s=e,r=(i=String).prototype,r.isPrototypeOf(n)||(null===(o=s.constructor)||void 0===o?void 0:o.name)===i.name)?"string":t;var n,r;var s,i,o})(t)===e,n=e=>t=>typeof t===e,r=t("string"),s=t("object"),i=t("array"),o=n("boolean"),a=n("function"),l=n("number"),c=()=>{},d=(e,t)=>e===t,u=e=>t=>!e(t),h=(m=!1,()=>m);var m;class p{constructor(e,t){this.tag=e,this.value=t}static some(e){return new p(!0,e)}static none(){return p.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?p.some(e(this.value)):p.none()}bind(e){return this.tag?e(this.value):p.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:p.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(e=>null==e)(e)?p.none():p.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}p.singletonNone=new p(!1);const f=Array.prototype.slice,g=Array.prototype.indexOf,v=Array.prototype.push,y=(e,t)=>{return n=e,r=t,g.call(n,r)>-1;var n,r},_=(e,t)=>{const n=e.length,r=new Array(n);for(let s=0;s<n;s++){const n=e[s];r[s]=t(n,s)}return r},b=(e,t)=>{for(let n=0,r=e.length;n<r;n++){t(e[n],n)}},w=(e,t)=>{const n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];t(s,r)&&n.push(s)}return n},x=(e,t,n)=>(b(e,((e,r)=>{n=t(n,e,r)})),n),M=(e,t,n)=>{for(let r=0,s=e.length;r<s;r++){const s=e[r];if(t(s,r))return p.some(s);if(n(s,r))break}return p.none()},S=(e,t)=>M(e,t,h),T=(e,t)=>(e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);v.apply(t,e[n])}return t})(_(e,t)),C=e=>{const t=f.call(e,0);return t.reverse(),t},E=(e,t)=>t>=0&&t<e.length?p.some(e[t]):p.none(),k=e=>E(e,0),L=e=>E(e,e.length-1),A=(e,t)=>{const n=[],r=a(t)?e=>((e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1})(n,(n=>t(n,e))):e=>y(n,e);for(let t=0,s=e.length;t<s;t++){const s=e[t];r(s)||n.push(s)}return n},D=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},O={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return D(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return D(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return D(n)},fromDom:D,fromPoint:(e,t,n)=>p.from(e.dom.elementFromPoint(t,n)).map(D)},R=(e,t)=>e.dom===t.dom,P=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const N=e=>e.dom.nodeName.toLowerCase(),I=(z=1,e=>(e=>e.dom.nodeType)(e)===z);var z;const B=e=>t=>I(t)&&N(t)===e,F=e=>p.from(e.dom.parentNode).map(O.fromDom),H=e=>_(e.dom.childNodes,O.fromDom),j=(e,t)=>{const n=e.dom.childNodes;return p.from(n[t]).map(O.fromDom)},U=e=>j(e,0),Y=e=>j(e,e.dom.childNodes.length-1),V=(e,t)=>{F(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},$=(e,t)=>{const n=(e=>p.from(e.dom.nextSibling).map(O.fromDom))(e);n.fold((()=>{F(e).each((e=>{W(e,t)}))}),(e=>{V(e,t)}))},W=(e,t)=>{e.dom.appendChild(t.dom)},G=(e,t)=>{b(t,(t=>{W(e,t)}))},q=e=>{e.dom.textContent="",b(H(e),(e=>{X(e)}))},X=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var K=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),J=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Z=tinymce.util.Tools.resolve("tinymce.util.VK");const Q=Object.keys,ee=(e,t)=>{const n=Q(e);for(let r=0,s=n.length;r<s;r++){const s=n[r];t(e[s],s)}},te=(e,t)=>{const n={};var r;return((e,t,n,r)=>{ee(e,((e,s)=>{(t(e,s)?n:r)(e,s)}))})(e,t,(r=n,(e,t)=>{r[t]=e}),c),n},ne=(e,t)=>{const n=e.dom;ee(t,((e,t)=>{((e,t,n)=>{if(!(r(n)||o(n)||l(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(n,t,e)}))},re=e=>x(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),se=e=>((e,t)=>O.fromDom(e.dom.cloneNode(t)))(e,!0),ie=(e,t)=>{const n=((e,t)=>{const n=O.fromTag(t),r=re(e);return ne(n,r),n})(e,t);$(e,n);const r=H(e);return G(n,r),X(e),n};var oe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ae=tinymce.util.Tools.resolve("tinymce.util.Tools");const le=e=>t=>t&&t.nodeName.toLowerCase()===e,ce=e=>t=>t&&e.test(t.nodeName),de=e=>e&&3===e.nodeType,ue=ce(/^(OL|UL|DL)$/),he=ce(/^(OL|UL)$/),me=le("ol"),pe=ce(/^(LI|DT|DD)$/),fe=ce(/^(DT|DD)$/),ge=ce(/^(TH|TD)$/),ve=le("br"),ye=(e,t)=>t&&!!e.schema.getTextBlockElements()[t.nodeName],_e=(e,t)=>e&&e.nodeName in t,be=(e,t,n)=>{const r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},we=(e,t)=>e.isChildOf(t,e.getRoot()),xe=e=>t=>t.options.get(e),Me=xe("lists_indent_on_tab"),Se=xe("forced_root_block"),Te=xe("forced_root_block_attrs"),Ce=(e,t)=>{const n=e.dom,r=e.schema.getBlockElements(),s=n.createFragment(),i=Se(e),o=Te(e);let a,l,c;for(l=n.create(i,o),_e(t.firstChild,r)||s.appendChild(l);a=t.firstChild;){const e=a.nodeName;c||"SPAN"===e&&"bookmark"===a.getAttribute("data-mce-type")||(c=!0),_e(a,r)?(s.appendChild(a),l=null):(l||(l=n.create(i,o),s.appendChild(l)),l.appendChild(a))}return c||l.appendChild(n.create("br",{"data-mce-bogus":"1"})),s},Ee=oe.DOM,ke=(e,t,n)=>{const r=Ee.select('span[data-mce-type="bookmark"]',t),s=Ce(e,n),i=Ee.createRng();i.setStartAfter(n),i.setEndAfter(t);const o=i.extractContents();for(let t=o.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){Ee.remove(t);break}var a;e.dom.isEmpty(o)||Ee.insertAfter(o,t),Ee.insertAfter(s,t),be(e.dom,n.parentNode)&&(a=n.parentNode,ae.each(r,(e=>{a.parentNode.insertBefore(e,n.parentNode)})),Ee.remove(a)),Ee.remove(n),be(e.dom,t)&&Ee.remove(t)},Le=B("dd"),Ae=B("dt"),De=e=>{Ae(e)&&ie(e,"dd")},Oe=(e,t,n)=>{b(n,"Indent"===t?De:t=>((e,t)=>{Le(t)?ie(t,"dt"):Ae(t)&&F(t).each((n=>ke(e,n.dom,t.dom)))})(e,t))},Re=(e,t)=>{if(de(e))return{container:e,offset:t};const n=K.getNode(e,t);return de(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&de(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&de(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Pe=e=>{const t=e.cloneRange(),n=Re(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const r=Re(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},Ne=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,"OL,UL,DL",Be(e,n))},Ie=e=>{const t=Ne(e),n=e.selection.getSelectedBlocks();return((e,t)=>e&&1===t.length&&t[0]===e)(t,n)?(e=>w(e.querySelectorAll("ol,ul,dl"),ue))(t):w(n,(e=>ue(e)&&t!==e))},ze=e=>{const t=e.selection.getSelectedBlocks();return w(((e,t)=>{const n=ae.map(t,(t=>e.dom.getParent(t,"li,dd,dt",Be(e,t))||t));return A(n)})(e,t),pe)},Be=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},Fe=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",Be(e,t));return L(n)},He=e=>{const t=(e=>{const t=Fe(e,e.selection.getStart()),n=w(e.selection.getSelectedBlocks(),he);return t.toArray().concat(n)})(e);return je(e,t)},je=(e,t)=>{const n=_(t,(t=>Fe(e,t).getOr(t)));return A(n)},Ue=(e,t,n=d)=>e.exists((e=>n(e,t))),Ye=(e,t,n)=>e.isSome()&&t.isSome()?p.some(n(e.getOrDie(),t.getOrDie())):p.none(),Ve=(e,t,n)=>e.dispatch("ListMutation",{action:t,element:n}),$e=(We=/^\s+|\s+$/g,e=>e.replace(We,""));var We;const Ge=(e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);(e=>void 0!==e.style&&a(e.style.getPropertyValue))(e)&&e.style.setProperty(t,n)},qe=(e,t,n)=>{const r=e.dom;Ge(r,t,n)},Xe=(e,t)=>{W(e.item,t.list)},Ke=(e,t)=>{const n={list:O.fromTag(t,e),item:O.fromTag("li",e)};return W(n.list,n.item),n},Je=(e,t,n)=>{const r=t.slice(0,n.depth);return L(r).each((t=>{const r=((e,t,n)=>{const r=O.fromTag("li",e);return ne(r,t),G(r,n),r})(e,n.itemAttributes,n.content);((e,t)=>{W(e.list,t),e.item=t})(t,r),((e,t)=>{N(e.list)!==t.listType&&(e.list=ie(e.list,t.listType)),ne(e.list,t.listAttributes)})(t,n)})),r},Ze=(e,t,n)=>{const r=((e,t,n)=>{const r=[];for(let s=0;s<n;s++)r.push(Ke(e,t.listType));return r})(e,n,n.depth-t.length);var s;return(e=>{for(let t=1;t<e.length;t++)Xe(e[t-1],e[t])})(r),((e,t)=>{for(let t=0;t<e.length-1;t++)qe(e[t].item,"list-style-type","none");L(e).each((e=>{ne(e.list,t.listAttributes),ne(e.item,t.itemAttributes),G(e.item,t.content)}))})(r,n),s=r,Ye(L(t),k(s),Xe),t.concat(r)},Qe=e=>P(e,"OL,UL"),et=e=>U(e).exists(Qe),tt=e=>e.depth>0,nt=e=>e.isSelected,rt=e=>{const t=H(e),n=Y(e).exists(Qe)?t.slice(0,-1):t;return _(n,se)},st=e=>(b(e,((t,n)=>{((e,t)=>{const n=e[t].depth,r=e=>e.depth===n&&!e.dirty,s=e=>e.depth<n;return M(C(e.slice(0,t)),r,s).orThunk((()=>M(e.slice(t+1),r,s)))})(e,n).fold((()=>{t.dirty&&(e=>{e.listAttributes=te(e.listAttributes,((e,t)=>"start"!==t))})(t)}),(e=>{return r=e,(n=t).listType=r.listType,void(n.listAttributes={...r.listAttributes});var n,r}))})),e),it=(e,t,n,r)=>U(r).filter(Qe).fold((()=>{t.each((e=>{R(e.start,r)&&n.set(!0)}));const s=((e,t,n)=>F(e).filter(I).map((r=>({depth:t,dirty:!1,isSelected:n,content:rt(e),itemAttributes:re(e),listAttributes:re(r),listType:N(r)}))))(r,e,n.get());t.each((e=>{R(e.end,r)&&n.set(!1)}));const i=Y(r).filter(Qe).map((r=>ot(e,t,n,r))).getOr([]);return s.toArray().concat(i)}),(r=>ot(e,t,n,r))),ot=(e,t,n,r)=>T(H(r),(r=>(Qe(r)?ot:it)(e+1,t,n,r))),at=(e,t)=>{const n=st(t);return _(n,(t=>{const n=((e,t)=>{const n=(t||document).createDocumentFragment();return b(e,(e=>{n.appendChild(e.dom)})),O.fromDom(n)})(t.content);return O.fromDom(Ce(e,n.dom))}))},lt=(e,t)=>{const n=st(t);return((e,t)=>{const n=x(t,((t,n)=>n.depth>t.length?Ze(e,t,n):Je(e,t,n)),[]);return k(n).map((e=>e.list))})(e.contentDocument,n).toArray()},ct=(e,t,n)=>{const r=((e,t)=>{const n=(e=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();return _(e,(e=>({sourceList:e,entries:ot(0,t,n,e)})))})(t,(e=>{const t=_(ze(e),O.fromDom);return Ye(S(t,u(et)),S(C(t),u(et)),((e,t)=>({start:e,end:t})))})(e));b(r,(t=>{((e,t)=>{b(w(e,nt),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,n);const r=((e,t)=>T(((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const r=[];let s=[];for(let i=0,o=e.length;i<o;i++){const o=e[i],a=t(o);a!==n&&(r.push(s),s=[]),n=a,s.push(o)}return 0!==s.length&&r.push(s),r}})(t,tt),(t=>k(t).exists(tt)?lt(e,t):at(e,t))))(e,t.entries);var s;b(r,(t=>{Ve(e,"Indent"===n?"IndentList":"OutdentList",t.dom)})),s=t.sourceList,b(r,(e=>{V(s,e)})),X(t.sourceList)}))},dt=(e,t)=>{const n=_(He(e),O.fromDom),r=_((e=>w(ze(e),fe))(e),O.fromDom);let s=!1;if(n.length||r.length){const i=e.selection.getBookmark();ct(e,n,t),Oe(e,t,r),e.selection.moveToBookmark(i),e.selection.setRng(Pe(e.selection.getRng())),e.nodeChanged(),s=!0}return s},ut=e=>dt(e,"Indent"),ht=e=>dt(e,"Outdent"),mt=e=>dt(e,"Flatten");var pt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const ft=oe.DOM,gt=e=>{const t={},n=n=>{let r=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"];if(1===r.nodeType){const e=ft.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(s=Math.min(s,r.childNodes.length-1),n?r.insertBefore(e,r.childNodes[s]):ft.insertAfter(e,r.childNodes[s])):r.appendChild(e),r=e,s=0}t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=s};return n(!0),e.collapsed||n(),t},vt=e=>{const t=t=>{let n;let r=n=e[t?"startContainer":"endContainer"],s=e[t?"startOffset":"endOffset"];r&&(1===r.nodeType&&(s=(e=>{let t=e.parentNode.firstChild,n=0;for(;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1})(r),r=r.parentNode,ft.remove(n),!r.hasChildNodes()&&ft.isBlock(r)&&r.appendChild(ft.create("br"))),e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=s)};t(!0),t();const n=ft.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),Pe(n)},yt=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},_t=e=>/\btox\-/.test(e.className),bt=(e,t,n)=>{const r=e=>{const r=M(e.parents,ue,ge).filter((e=>e.nodeName===t&&!_t(e))).isSome();n(r)},s=e.dom.getParents(e.selection.getNode());return r({parents:s}),e.on("NodeChange",r),()=>e.off("NodeChange",r)},wt=(e,t)=>{ae.each(t,((t,n)=>{e.setAttribute(n,t)}))},xt=(e,t,n)=>{((e,t,n)=>{const r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)})(e,t,n),((e,t,n)=>{wt(t,n["list-attributes"]),ae.each(e.select("li",t),(e=>{wt(e,n["list-item-attributes"])}))})(e,t,n)},Mt=(e,t,n,r)=>{let s=t[n?"startContainer":"endContainer"];const i=t[n?"startOffset":"endOffset"];for(1===s.nodeType&&(s=s.childNodes[Math.min(i,s.childNodes.length-1)]||s),!n&&ve(s.nextSibling)&&(s=s.nextSibling);s.parentNode!==r;){if(ye(e,s))return s;if(/^(TD|TH)$/.test(s.parentNode.nodeName))return s;s=s.parentNode}return s},St=(e,t,n)=>{const r=e.selection.getRng();let s="LI";const i=Be(e,e.selection.getStart(!0)),o=e.dom;if("false"===o.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(s="DT");const a=gt(r),l=((e,t,n)=>{const r=[],s=e.dom,i=Mt(e,t,!0,n),o=Mt(e,t,!1,n);let a;const l=[];for(let e=i;e&&(l.push(e),e!==o);e=e.nextSibling);return ae.each(l,(t=>{if(ye(e,t))return r.push(t),void(a=null);if(s.isBlock(t)||ve(t))return ve(t)&&s.remove(t),void(a=null);const i=t.nextSibling;pt.isBookmarkNode(t)&&(ue(i)||ye(e,i)||!i&&t.parentNode===n)?a=null:(a||(a=s.create("p"),t.parentNode.insertBefore(a,t),r.push(a)),a.appendChild(t))})),r})(e,r,i);ae.each(l,(r=>{let i;const a=r.previousSibling,l=r.parentNode;pe(l)||(a&&ue(a)&&a.nodeName===t&&((e,t,n)=>{const r=e.getStyle(t,"list-style-type");let s=n?n["list-style-type"]:"";return s=null===s?"":s,r===s})(o,a,n)?(i=a,r=o.rename(r,s),a.appendChild(r)):(i=o.create(t),r.parentNode.insertBefore(i,r),i.appendChild(r),r=o.rename(r,s)),((e,t,n)=>{ae.each(n,(n=>e.setStyle(t,n,"")))})(o,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),xt(o,i,n),Ct(e.dom,i))})),e.selection.setRng(vt(a))},Tt=(e,t,n)=>{return((e,t)=>e&&t&&ue(e)&&e.nodeName===t.nodeName)(t,n)&&((e,t,n)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0))(e,t,n)&&(r=n,t.className===r.className);var r},Ct=(e,t)=>{let n,r;if(n=t.nextSibling,Tt(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,Tt(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},Et=(e,t,n,r,s)=>{const i=ue(t);if(i&&t.nodeName===r&&!kt(s))mt(e);else{St(e,r,s);const o=gt(e.selection.getRng()),a=i?[t,...n]:n;ae.each(a,(t=>{((e,t,n,r)=>{if(t.nodeName!==n){const s=e.dom.rename(t,n);xt(e.dom,s,r),Ve(e,yt(n),s)}else xt(e.dom,t,r),Ve(e,yt(n),t)})(e,t,r,s)})),e.selection.setRng(vt(o))}},kt=e=>"list-style-type"in e,Lt=(e,t,n)=>{const r=Ne(e),i=Ie(e),o=s(n)?n:{};i.length>0?Et(e,r,i,t,o):((e,t,n,r)=>{if(t!==e.getBody())if(t)if(t.nodeName!==n||kt(r)||_t(t)){const s=gt(e.selection.getRng());xt(e.dom,t,r);const i=e.dom.rename(t,n);Ct(e.dom,i),e.selection.setRng(vt(s)),St(e,n,r),Ve(e,yt(n),i)}else mt(e);else St(e,n,r),Ve(e,yt(n),t)})(e,r,t,o)},At=oe.DOM,Dt=(e,t)=>{const n=ae.grep(e.select("ol,ul",t));ae.each(n,(t=>{((e,t)=>{const n=t.parentNode;if("LI"===n.nodeName&&n.firstChild===t){const r=n.previousSibling;r&&"LI"===r.nodeName?(r.appendChild(t),be(e,n)&&At.remove(n)):At.setStyle(n,"listStyleType","none")}if(ue(n)){const e=n.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)}))},Ot=(e,t,n,r)=>{let s=t.startContainer;const i=t.startOffset;if(de(s)&&(n?i<s.data.length:i>0))return s;const o=e.schema.getNonEmptyElements();1===s.nodeType&&(s=K.getNode(s,i));const a=new J(s,r);for(n&&((e,t)=>!!ve(t)&&e.isBlock(t.nextSibling)&&!ve(t.previousSibling))(e.dom,s)&&a.next();s=a[n?"next":"prev2"]();){if("LI"===s.nodeName&&!s.hasChildNodes())return s;if(o[s.nodeName])return s;if(de(s)&&s.data.length>0)return s}},Rt=(e,t)=>{const n=t.childNodes;return 1===n.length&&!ue(n[0])&&e.isBlock(n[0])},Pt=(e,t,n)=>{let r;const s=Rt(e,n)?n.firstChild:n;if(((e,t)=>{Rt(e,t)&&e.remove(t.firstChild,!0)})(e,t),!be(e,t,!0))for(;r=t.firstChild;)s.appendChild(r)},Nt=(e,t,n)=>{let r;const s=t.parentNode;if(!we(e,t)||!we(e,n))return;ue(n.lastChild)&&(r=n.lastChild),s===n.lastChild&&ve(s.previousSibling)&&e.remove(s.previousSibling);const i=n.lastChild;i&&ve(i)&&t.hasChildNodes()&&e.remove(i),be(e,n,!0)&&q(O.fromDom(n)),Pt(e,t,n),r&&n.appendChild(r);const o=((e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)})(O.fromDom(n),O.fromDom(t))?e.getParents(t,ue,n):[];e.remove(t),b(o,(t=>{be(e,t)&&t!==e.getRoot()&&e.remove(t)}))},It=(e,t,n,r)=>{const s=e.dom;if(s.isEmpty(r))((e,t,n)=>{q(O.fromDom(n)),Nt(e.dom,t,n),e.selection.setCursorLocation(n,0)})(e,n,r);else{const i=gt(t);Nt(s,n,r),e.selection.setRng(vt(i))}},zt=(e,t)=>{const n=e.dom,r=e.selection,s=r.getStart(),i=Be(e,s),o=n.getParent(r.getStart(),"LI",i);if(o){const s=o.parentNode;if(s===e.getBody()&&be(n,s))return!0;const a=Pe(r.getRng()),l=n.getParent(Ot(e,a,t,i),"LI",i);if(l&&l!==o)return e.undoManager.transact((()=>{var n;t?It(e,a,l,o):(n=o).parentNode.firstChild===n?ht(e):((e,t,n,r)=>{const s=gt(t);Nt(e.dom,n,r);const i=vt(s);e.selection.setRng(i)})(e,a,o,l)})),!0;if(!l&&!t&&0===a.startOffset&&0===a.endOffset)return e.undoManager.transact((()=>{mt(e)})),!0}return!1},Bt=(e,t)=>zt(e,t)||((e,t)=>{const n=e.dom,r=e.selection.getStart(),s=Be(e,r),i=n.getParent(r,n.isBlock,s);if(i&&n.isEmpty(i)){const r=Pe(e.selection.getRng()),o=n.getParent(Ot(e,r,t,s),"LI",s);if(o)return e.undoManager.transact((()=>{((e,t,n)=>{const r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)})(n,i,s),Ct(n,o.parentNode),e.selection.select(o,!0),e.selection.collapse(t)})),!0}return!1})(e,t),Ft=(e,t)=>e.selection.isCollapsed()?Bt(e,t):(e=>{const t=e.selection.getStart(),n=Be(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||ze(e).length>0)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),Dt(e.dom,e.getBody())})),!0)})(e),Ht=e=>{const t=C($e(e).split("")),n=_(t,((e,t)=>{const n=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*n}));return x(n,((e,t)=>e+t),0)},jt=e=>{if(--e<0)return"";{const t=e%26,n=Math.floor(e/26);return jt(n)+String.fromCharCode("A".charCodeAt(0)+t)}},Ut=e=>{const t=parseInt(e.start,10);return Ue(e.listStyleType,"upper-alpha")?jt(t):Ue(e.listStyleType,"lower-alpha")?jt(t).toLowerCase():e.start},Yt=e=>{const t=Ne(e);me(t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ut({start:e.dom.getAttrib(t,"start","1"),listStyleType:p.some(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return p.some({listStyleType:p.none(),start:e});case 0:return p.some({listStyleType:p.some("upper-alpha"),start:Ht(e).toString()});case 1:return p.some({listStyleType:p.some("lower-alpha"),start:Ht(e).toString()});case 3:return p.some({listStyleType:p.none(),start:""});case 4:return p.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},Vt=(e,t)=>()=>{const n=Ne(e);return n&&n.nodeName===t},$t=e=>{e.addCommand("mceListProps",(()=>{Yt(e)}))},Wt=e=>{e.on("BeforeExecCommand",(t=>{const n=t.command.toLowerCase();"indent"===n?ut(e):"outdent"===n&&ht(e)})),e.addCommand("InsertUnorderedList",((t,n)=>{Lt(e,"UL",n)})),e.addCommand("InsertOrderedList",((t,n)=>{Lt(e,"OL",n)})),e.addCommand("InsertDefinitionList",((t,n)=>{Lt(e,"DL",n)})),e.addCommand("RemoveList",(()=>{mt(e)})),$t(e),e.addCommand("mceListUpdate",((t,n)=>{s(n)&&((e,t)=>{const n=Ne(e);e.undoManager.transact((()=>{s(t.styles)&&e.dom.setStyles(n,t.styles),s(t.attrs)&&ee(t.attrs,((t,r)=>e.dom.setAttrib(n,r,t)))}))})(e,n)})),e.addQueryStateHandler("InsertUnorderedList",Vt(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Vt(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Vt(e,"DL"))},Gt=e=>{Me(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==Z.TAB||Z.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?ht(e):ut(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("keydown",(t=>{t.keyCode===Z.BACKSPACE?Ft(e,!1)&&t.preventDefault():t.keyCode===Z.DELETE&&Ft(e,!0)&&t.preventDefault()}))})(e)};e.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),!1===e.hasPlugin("rtc",!0)?(Gt(e),Wt(e)):$t(e),(e=>{const t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:t=>bt(e,"OL",t.setActive)}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:t=>bt(e,"UL",t.setActive)}))})(e),(e=>{const t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:t=>bt(e,"OL",t.setEnabled)};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{const n=Ne(e,t);return me(n)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{Ft(e,t)}}))(e))))}()},1243:(e,t,n)=>{n(7102)},7102:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=s=e,r=(i=String).prototype,r.isPrototypeOf(n)||(null===(o=s.constructor)||void 0===o?void 0:o.name)===i.name)?"string":t;var n,r;var s,i,o})(t)===e,n=t("string"),r=t("object"),s=t("array"),i=e=>!(e=>null==e)(e);class o{constructor(e,t){this.tag=e,this.value=t}static some(e){return new o(!0,e)}static none(){return o.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?o.some(e(this.value)):o.none()}bind(e){return this.tag?e(this.value):o.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:o.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return i(e)?o.some(e):o.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}o.singletonNone=new o(!1);const a=Array.prototype.push,l=(e,t)=>{for(let n=0,r=e.length;n<r;n++){t(e[n],n)}},c=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!s(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);a.apply(t,e[n])}return t},d=Object.keys,u=Object.hasOwnProperty,h=(e,t)=>m(e,t)?o.from(e[t]):o.none(),m=(e,t)=>u.call(e,t),p=e=>t=>t.options.get(e),f=p("audio_template_callback"),g=p("video_template_callback"),v=p("media_live_embeds"),y=p("media_filter_html"),_=p("media_url_resolver"),b=p("media_alt_source"),w=p("media_poster"),x=p("media_dimensions");var M=tinymce.util.Tools.resolve("tinymce.util.Tools"),S=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),T=tinymce.util.Tools.resolve("tinymce.html.DomParser");const C=S.DOM,E=e=>e.replace(/px$/,""),k=e=>{const t=e.attr("style"),n=t?C.parseStyle(t):{};return{type:"ephox-embed-iri",source:e.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:h(n,"max-width").map(E).getOr(""),height:h(n,"max-height").map(E).getOr("")}},L=(e,t)=>{let n={};for(let r=T({validate:!1,forced_root_block:!1},t).parse(e);r;r=r.walk())if(1===r.type){const e=r.name;if(r.attr("data-ephox-embed-iri")){n=k(r);break}n.source||"param"!==e||(n.source=r.attr("movie")),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(n.type||(n.type=e),n=M.extend(r.attributes.map,n)),"script"===e&&(n={type:"script",source:r.attr("src")}),"source"===e&&(n.source?n.altsource||(n.altsource=r.attr("src")):n.source=r.attr("src")),"img"!==e||n.poster||(n.poster=r.attr("src"))}return n.source=n.source||n.src||n.data,n.altsource=n.altsource||"",n.poster=n.poster||"",n},A=e=>{const t={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()];return t||""};var D=tinymce.util.Tools.resolve("tinymce.html.Node"),O=tinymce.util.Tools.resolve("tinymce.html.Serializer");const R=(e,t={})=>T({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...t},e),P=S.DOM,N=e=>/^[0-9.]+$/.test(e)?e+"px":e,I=(e,t)=>{const n=t.attr("style"),r=n?P.parseStyle(n):{};r["max-width"]=N(e.width),r["max-height"]=N(e.height),t.attr("style",P.serializeStyle(r))},z=["source","altsource"],B=(e,t,n,r)=>{let s=0,i=0;const o=R(r);o.addNodeFilter("source",(e=>s=e.length));const a=o.parse(e);for(let e=a;e;e=e.walk())if(1===e.type){const r=e.name;if(e.attr("data-ephox-embed-iri")){I(t,e);break}switch(r){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&(e.attr("width",t.width),e.attr("height",t.height))}if(n)switch(r){case"video":e.attr("poster",t.poster),e.attr("src",null);for(let n=s;n<2;n++)if(t[z[n]]){const r=new D("source",1);r.attr("src",t[z[n]]),r.attr("type",t[z[n]+"mime"]||null),e.append(r)}break;case"iframe":e.attr("src",t.src);break;case"object":const n=e.getAll("img").length>0;if(t.poster&&!n){e.attr("src",t.poster);const n=new D("img",1);n.attr("src",t.poster),n.attr("width",t.width),n.attr("height",t.height),e.append(n)}break;case"source":if(i<2&&(e.attr("src",t[z[i]]),e.attr("type",t[z[i]+"mime"]||null),!t[z[i]])){e.remove();continue}i++;break;case"img":t.poster||e.remove()}}return O({},r).serialize(a)},F=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],H=(e,t)=>{const n=(e=>{const t=e.match(/^(https?:\/\/|www\.)(.+)$/i);return t&&t.length>1?"www."===t[1]?"https://":t[1]:"https://"})(t),r=e.regex.exec(t);let s=n+e.url;for(let e=0;e<r.length;e++)s=s.replace("$"+e,(()=>r[e]?r[e]:""));return s.replace(/\?$/,"")},j=(e,t)=>{const n=M.extend({},t);if(!n.source&&(M.extend(n,L(n.embed,e.schema)),!n.source))return"";n.altsource||(n.altsource=""),n.poster||(n.poster=""),n.source=e.convertURL(n.source,"source"),n.altsource=e.convertURL(n.altsource,"source"),n.sourcemime=A(n.source),n.altsourcemime=A(n.altsource),n.poster=e.convertURL(n.poster,"poster");const r=(e=>{const t=F.filter((t=>t.regex.test(e)));return t.length>0?M.extend({},t[0],{url:H(t[0],e)}):null})(n.source);if(r&&(n.source=r.url,n.type=r.type,n.allowfullscreen=r.allowFullscreen,n.width=n.width||String(r.w),n.height=n.height||String(r.h)),n.embed)return B(n.embed,n,!0,e.schema);{const t=f(e),r=g(e);return n.width=n.width||"300",n.height=n.height||"150",M.each(n,((t,r)=>{n[r]=e.dom.encode(""+t)})),"iframe"===n.type?(e=>{const t=e.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"})(n):"application/x-shockwave-flash"===n.sourcemime?(e=>{let t='<object data="'+e.source+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>",t})(n):-1!==n.sourcemime.indexOf("audio")?((e,t)=>t?t(e):'<audio controls="controls" src="'+e.source+'">'+(e.altsource?'\n<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</audio>")(n,t):"script"===n.type?(e=>'<script src="'+e.source+'"><\/script>')(n):((e,t)=>t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source+'"'+(e.sourcemime?' type="'+e.sourcemime+'"':"")+" />\n"+(e.altsource?'<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</video>")(n,r)}},U=e=>e.hasAttribute("data-mce-object")||e.hasAttribute("data-ephox-embed-iri"),Y={},V=e=>t=>j(e,t),$=(e,t)=>{const n=_(e);return n?((e,t,n)=>new Promise(((r,s)=>{const i=n=>(n.html&&(Y[e.source]=n),r({url:e.source,html:n.html?n.html:t(e)}));Y[e.source]?i(Y[e.source]):n({url:e.source},i,s)})))(t,V(e),n):((e,t)=>Promise.resolve({html:t(e),url:e.source}))(t,V(e))},W=(e,t)=>{const n={};return h(e,"dimensions").each((e=>{l(["width","height"],(r=>{h(t,r).orThunk((()=>h(e,r))).each((e=>n[r]=e))}))})),n},G=(e,t)=>{const n=t?((e,t)=>h(t,e).bind((e=>h(e,"meta"))))(t,e).getOr({}):{},s=((e,t,n)=>s=>{const i=()=>h(e,s),a=()=>h(t,s),l=e=>h(e,"value").bind((e=>e.length>0?o.some(e):o.none()));return{[s]:(s===n?i().bind((e=>r(e)?l(e).orThunk(a):a().orThunk((()=>o.from(e))))):a().orThunk((()=>i().bind((e=>r(e)?l(e):o.from(e)))))).getOr("")}})(e,n,t);return{...s("source"),...s("altsource"),...s("poster"),...s("embed"),...W(e,n)}},q=e=>{const t={...e,source:{value:h(e,"source").getOr("")},altsource:{value:h(e,"altsource").getOr("")},poster:{value:h(e,"poster").getOr("")}};return l(["width","height"],(n=>{h(e,n).each((e=>{const r=t.dimensions||{};r[n]=e,t.dimensions=r}))})),t},X=e=>t=>{const n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})},K=(e,t)=>r=>{if(n(r.url)&&r.url.trim().length>0){const n=r.html,s={...L(n,t.schema),source:r.url,embed:n};e.setData(q(s))}},J=(e,t)=>{const n=e.dom.select("*[data-mce-object]");e.insertContent(t),((e,t)=>{const n=e.dom.select("*[data-mce-object]");for(let e=0;e<t.length;e++)for(let r=n.length-1;r>=0;r--)t[e]===n[r]&&n.splice(r,1);e.selection.select(n[0])})(e,n),e.nodeChanged()},Z=(e,t,n)=>{var r;t.embed=B(t.embed,t,!1,n.schema),t.embed&&(e.source===t.source||(r=t.source,m(Y,r)))?J(n,t.embed):$(n,t).then((e=>{J(n,e.html)})).catch(X(n))},Q=e=>{const t=(e=>{const t=e.selection.getNode(),n=U(t)?e.serializer.serialize(t,{selection:!0}):"";return{embed:n,...L(n,e.schema)}})(e),n=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(t),r=q(t),s=x(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],i={title:"General",name:"general",items:c([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],s])},o={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},a=[];b(e)&&a.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),w(e)&&a.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const l={title:"Advanced",name:"advanced",items:a},d=[i,o];a.length>0&&d.push(l);const u={type:"tabpanel",tabs:d},h=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{const r=G(t.getData());Z(n.get(),r,e),t.close()},onChange:(t,r)=>{switch(r.name){case"source":((t,n)=>{const r=G(n.getData(),"source");t.source!==r.source&&(K(h,e)({url:r.source,html:""}),$(e,r).then(K(h,e)).catch(X(e)))})(n.get(),t);break;case"embed":(t=>{const n=G(t.getData()),r=L(n.embed,e.schema);t.setData(q(r))})(t);break;case"dimensions":case"altsource":case"poster":((t,n)=>{const r=G(t.getData(),n),s=j(e,r);t.setData(q({...r,embed:s}))})(t,r.name)}n.set(G(t.getData()))},initialData:r})};var ee=tinymce.util.Tools.resolve("tinymce.Env");const te=e=>{const t=e.name;return"iframe"===t||"video"===t||"audio"===t},ne=(e,t,n,r=null)=>{const s=e.attr(n);return i(s)?s:m(t,n)?null:r},re=(e,t,n)=>{const r="img"===t.name||"video"===e.name,s=r?"300":null,i="audio"===e.name?"30":"150",o=r?i:null;t.attr({width:ne(e,n,"width",s),height:ne(e,n,"height",o)})},se=(e,t)=>{const n=t.name,r=new D("img",1);return oe(e,t,r),re(t,r,{}),r.attr({style:t.attr("style"),src:ee.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},ie=(e,t)=>{const n=t.name,r=new D("span",1);r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),oe(e,t,r);const s=e.dom.parseStyle(t.attr("style")),o=new D(n,1);if(re(t,o,s),o.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===n)o.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0"});else{l(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(e=>{o.attr(e,t.attr(e))}));const s=r.attr("data-mce-html");i(s)&&((e,t,n,r)=>{const s=R(e.schema).parse(r,{context:t});for(;s.firstChild;)n.append(s.firstChild)})(e,n,o,unescape(s))}const a=new D("span",1);return a.attr("class","mce-shim"),r.append(o),r.append(a),r},oe=(e,t,n)=>{const r=t.attributes;let s=r.length;for(;s--;){const t=r[s].name;let i=r[s].value;"width"===t||"height"===t||"style"===t||((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"data-mce-",0)||("data"!==t&&"src"!==t||(i=e.convertURL(i,t)),n.attr("data-mce-p-"+t,i))}const i=O({inner:!0},e.schema),o=new D("div",1);l(t.children(),(e=>o.append(e)));const a=i.serialize(o);a&&(n.attr("data-mce-html",escape(a)),n.empty())},ae=e=>{const t=e.attr("class");return t&&/\btiny-pageembed\b/.test(t)},le=e=>{for(;e=e.parent;)if(e.attr("data-ephox-embed-iri")||ae(e))return!0;return!1},ce=(e,t,n)=>{const r=y(e);return R(e.schema,{validate:r}).parse(n,{context:t})},de=e=>{e.on("PreInit",(()=>{const{schema:t,serializer:n,parser:r}=e,s=t.getBoolAttrs();l("webkitallowfullscreen mozallowfullscreen".split(" "),(e=>{s[e]={}})),((e,t)=>{const n=d(e);for(let r=0,s=n.length;r<s;r++){const s=n[r];t(e[s],s)}})({embed:["wmode"]},((e,n)=>{const r=t.getElementRule(n);l(e,(e=>{r.attributes[e]={},r.attributesOrder.push(e)}))})),r.addNodeFilter("iframe,video,audio,object,embed,script",(e=>t=>{let n,r=t.length;for(;r--;)n=t[r],n.parent&&(n.parent.attr("data-mce-object")||(te(n)&&v(e)?le(n)||n.replace(ie(e,n)):le(n)||n.replace(se(e,n))))})(e)),n.addAttributeFilter("data-mce-object",((t,n)=>{let r=t.length;for(;r--;){const s=t[r];if(!s.parent)continue;const i=s.attr(n),o=new D(i,1);if("audio"!==i&&"script"!==i){const e=s.attr("class");e&&-1!==e.indexOf("mce-preview-object")?o.attr({width:s.firstChild.attr("width"),height:s.firstChild.attr("height")}):o.attr({width:s.attr("width"),height:s.attr("height")})}o.attr({style:s.attr("style")});const a=s.attributes;let c=a.length;for(;c--;){const e=a[c].name;0===e.indexOf("data-mce-p-")&&o.attr(e.substr(11),a[c].value)}"script"===i&&o.attr("type","text/javascript");const d=s.attr("data-mce-html");if(d){const t=ce(e,i,unescape(d));l(t.children(),(e=>o.append(e)))}s.replace(o)}}))})),e.on("SetContent",(()=>{const t=e.dom;l(t.select("span.mce-preview-object"),(e=>{0===t.select("span.mce-shim",e).length&&t.add(e,"span",{class:"mce-shim"})}))}))};e.add("media",(e=>((e=>{const t=e.options.register;t("audio_template_callback",{processor:"function"}),t("video_template_callback",{processor:"function"}),t("media_live_embeds",{processor:"boolean",default:!0}),t("media_filter_html",{processor:"boolean",default:!0}),t("media_url_resolver",{processor:"function"}),t("media_alt_source",{processor:"boolean",default:!0}),t("media_poster",{processor:"boolean",default:!0}),t("media_dimensions",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceMedia",(()=>{Q(e)}))})(e),(e=>{const t=()=>e.execCommand("mceMedia");e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:t,onSetup:t=>{const n=e.selection;return t.setActive(U(n.getNode())),n.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",t.setActive).unbind}}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:t})})(e),(e=>{e.on("ResolveName",(e=>{let t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))})(e),de(e),(e=>{e.on("click keyup touchend",(()=>{const t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectSelected",(e=>{"script"===e.target.getAttribute("data-mce-object")&&e.preventDefault()})),e.on("ObjectResized",(t=>{const n=t.target;if(n.getAttribute("data-mce-object")){let r=n.getAttribute("data-mce-html");r&&(r=unescape(r),n.setAttribute("data-mce-html",escape(B(r,{width:String(t.width),height:String(t.height)},!1,e.schema))))}}))})(e),(e=>({showDialog:()=>{Q(e)}}))(e))))}()},5336:(e,t,n)=>{n(5705)},5705:()=>{!function(){"use strict";const e=Object.getPrototypeOf,t=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},n=e=>n=>(e=>{const n=typeof e;return null===e?"null":"object"===n&&Array.isArray(e)?"array":"object"===n&&t(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":n})(n)===e,r=e=>t=>typeof t===e,s=e=>t=>e===t,i=n("string"),o=n("object"),a=n=>((n,r)=>o(n)&&t(n,r,((t,n)=>e(t)===n)))(n,Object),l=n("array"),c=s(null),d=r("boolean"),u=s(void 0),h=e=>null==e,m=e=>!h(e),p=r("function"),f=r("number"),g=(e,t)=>{if(l(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},v=()=>{},y=(e,t)=>(...n)=>e(t.apply(null,n)),_=e=>()=>e,b=e=>e,w=(e,t)=>e===t;function x(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const M=e=>t=>!e(t),S=e=>()=>{throw new Error(e)},T=e=>e(),C=_(!1),E=_(!0);var k=tinymce.util.Tools.resolve("tinymce.ThemeManager");class L{constructor(e,t){this.tag=e,this.value=t}static some(e){return new L(!0,e)}static none(){return L.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?L.some(e(this.value)):L.none()}bind(e){return this.tag?e(this.value):L.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:L.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?L.some(e):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}L.singletonNone=new L(!1);const A=Array.prototype.slice,D=Array.prototype.indexOf,O=Array.prototype.push,R=(e,t)=>D.call(e,t),P=(e,t)=>{const n=R(e,t);return-1===n?L.none():L.some(n)},N=(e,t)=>R(e,t)>-1,I=(e,t)=>{for(let n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},z=(e,t)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r));return n},B=(e,t)=>{const n=[];for(let r=0;r<e.length;r+=t){const s=A.call(e,r,r+t);n.push(s)}return n},F=(e,t)=>{const n=e.length,r=new Array(n);for(let s=0;s<n;s++){const n=e[s];r[s]=t(n,s)}return r},H=(e,t)=>{for(let n=0,r=e.length;n<r;n++){t(e[n],n)}},j=(e,t)=>{const n=[],r=[];for(let s=0,i=e.length;s<i;s++){const i=e[s];(t(i,s)?n:r).push(i)}return{pass:n,fail:r}},U=(e,t)=>{const n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];t(s,r)&&n.push(s)}return n},Y=(e,t,n)=>(((e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)})(e,((e,r)=>{n=t(n,e,r)})),n),V=(e,t,n)=>(H(e,((e,r)=>{n=t(n,e,r)})),n),$=(e,t)=>((e,t,n)=>{for(let r=0,s=e.length;r<s;r++){const s=e[r];if(t(s,r))return L.some(s);if(n(s,r))break}return L.none()})(e,t,C),W=(e,t)=>{for(let n=0,r=e.length;n<r;n++){if(t(e[n],n))return L.some(n)}return L.none()},G=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!l(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);O.apply(t,e[n])}return t},q=(e,t)=>G(F(e,t)),X=(e,t)=>{for(let n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},K=e=>{const t=A.call(e,0);return t.reverse(),t},J=(e,t)=>U(e,(e=>!N(t,e))),Z=(e,t)=>{const n={};for(let r=0,s=e.length;r<s;r++){const s=e[r];n[String(s)]=t(s,r)}return n},Q=e=>[e],ee=(e,t)=>{const n=A.call(e,0);return n.sort(t),n},te=(e,t)=>t>=0&&t<e.length?L.some(e[t]):L.none(),ne=e=>te(e,0),re=e=>te(e,e.length-1),se=p(Array.from)?Array.from:e=>A.call(e),ie=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return L.none()},oe=Object.keys,ae=Object.hasOwnProperty,le=(e,t)=>{const n=oe(e);for(let r=0,s=n.length;r<s;r++){const s=n[r];t(e[s],s)}},ce=(e,t)=>de(e,((e,n)=>({k:n,v:t(e,n)}))),de=(e,t)=>{const n={};return le(e,((e,r)=>{const s=t(e,r);n[s.k]=s.v})),n},ue=e=>(t,n)=>{e[n]=t},he=(e,t,n,r)=>(le(e,((e,s)=>{(t(e,s)?n:r)(e,s)})),{}),me=(e,t)=>{const n=[];return le(e,((e,r)=>{n.push(t(e,r))})),n},pe=(e,t)=>{const n=oe(e);for(let r=0,s=n.length;r<s;r++){const s=n[r],i=e[s];if(t(i,s,e))return L.some(i)}return L.none()},fe=e=>me(e,b),ge=(e,t)=>ve(e,t)?L.from(e[t]):L.none(),ve=(e,t)=>ae.call(e,t),ye=(e,t)=>ve(e,t)&&void 0!==e[t]&&null!==e[t],_e=(e,t,n=w)=>e.exists((e=>n(e,t))),be=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},we=(e,t,n)=>e.isSome()&&t.isSome()?L.some(n(e.getOrDie(),t.getOrDie())):L.none(),xe=(e,t)=>e?L.some(t):L.none(),Me=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Se=(e,t)=>-1!==e.indexOf(t),Te=(e,t)=>Me(e,t,0),Ce=(e,t)=>Me(e,t,e.length-t.length),Ee=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),ke=e=>e.length>0,Le=e=>void 0!==e.style&&p(e.style.getPropertyValue),Ae=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},De={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return Ae(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return Ae(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return Ae(n)},fromDom:Ae,fromPoint:(e,t,n)=>L.from(e.dom.elementFromPoint(t,n)).map(Ae)};"undefined"!=typeof window?window:Function("return this;")();const Oe=e=>e.dom.nodeName.toLowerCase(),Re=e=>t=>(e=>e.dom.nodeType)(t)===e,Pe=Re(1),Ne=Re(3),Ie=Re(9),ze=Re(11),Be=e=>t=>Pe(t)&&Oe(t)===e,Fe=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},He=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,je=(e,t)=>e.dom===t.dom,Ue=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Ye=e=>De.fromDom(e.dom.ownerDocument),Ve=e=>Ie(e)?e:Ye(e),$e=e=>De.fromDom(Ve(e).dom.documentElement),We=e=>De.fromDom(Ve(e).dom.defaultView),Ge=e=>L.from(e.dom.parentNode).map(De.fromDom),qe=e=>L.from(e.dom.parentElement).map(De.fromDom),Xe=e=>L.from(e.dom.offsetParent).map(De.fromDom),Ke=e=>F(e.dom.childNodes,De.fromDom),Je=(e,t)=>{const n=e.dom.childNodes;return L.from(n[t]).map(De.fromDom)},Ze=(e,t)=>({element:e,offset:t}),Qe=(e,t)=>{const n=Ke(e);return n.length>0&&t<n.length?Ze(n[t],0):Ze(e,t)},et=e=>ze(e)&&m(e.dom.host),tt=p(Element.prototype.attachShadow)&&p(Node.prototype.getRootNode),nt=_(tt),rt=tt?e=>De.fromDom(e.dom.getRootNode()):Ve,st=e=>et(e)?e:De.fromDom(Ve(e).dom.body),it=e=>{const t=rt(e);return et(t)?L.some(t):L.none()},ot=e=>De.fromDom(e.dom.host),at=e=>m(e.dom.shadowRoot),lt=e=>{const t=Ne(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return it(De.fromDom(t)).fold((()=>n.body.contains(t)),(r=lt,s=ot,e=>r(s(e))));var r,s},ct=()=>dt(De.fromDom(document)),dt=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return De.fromDom(t)},ut=(e,t,n)=>{if(!(i(n)||d(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ht=(e,t,n)=>{ut(e.dom,t,n)},mt=(e,t)=>{const n=e.dom;le(t,((e,t)=>{ut(n,t,e)}))},pt=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},ft=(e,t)=>L.from(pt(e,t)),gt=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},vt=(e,t)=>{e.dom.removeAttribute(t)},yt=(e,t,n)=>{if(!i(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Le(e)&&e.style.setProperty(t,n)},_t=(e,t)=>{Le(e)&&e.style.removeProperty(t)},bt=(e,t,n)=>{const r=e.dom;yt(r,t,n)},wt=(e,t)=>{const n=e.dom;le(t,((e,t)=>{yt(n,t,e)}))},xt=(e,t)=>{const n=e.dom;le(t,((e,t)=>{e.fold((()=>{_t(n,t)}),(e=>{yt(n,t,e)}))}))},Mt=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||lt(e)?r:St(n,t)},St=(e,t)=>Le(e)?e.style.getPropertyValue(t):"",Tt=(e,t)=>{const n=e.dom,r=St(n,t);return L.from(r).filter((e=>e.length>0))},Ct=e=>{const t={},n=e.dom;if(Le(n))for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t[r]=n.style[r]}return t},Et=(e,t,n)=>{const r=De.fromTag(e);bt(r,t,n);return Tt(r,t).isSome()},kt=(e,t)=>{const n=e.dom;_t(n,t),_e(ft(e,"style").map(Ee),"")&&vt(e,"style")},Lt=e=>e.dom.offsetWidth,At=(e,t)=>{const n=n=>{const r=t(n);if(r<=0||null===r){const t=Mt(n,e);return parseFloat(t)||0}return r},r=(e,t)=>V(t,((t,n)=>{const r=Mt(e,n),s=void 0===r?0:parseInt(r,10);return isNaN(s)?t:t+s}),0);return{set:(t,n)=>{if(!f(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const r=t.dom;Le(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:(e,t,n)=>{const s=r(e,n);return t>s?t-s:0}}},Dt=At("height",(e=>{const t=e.dom;return lt(e)?t.getBoundingClientRect().height:t.offsetHeight})),Ot=e=>Dt.get(e),Rt=e=>Dt.getOuter(e),Pt=(e,t)=>({left:e,top:t,translate:(n,r)=>Pt(e+n,t+r)}),Nt=Pt,It=(e,t)=>void 0!==e?e:void 0!==t?t:0,zt=e=>{const t=e.dom.ownerDocument,n=t.body,r=t.defaultView,s=t.documentElement;if(n===e.dom)return Nt(n.offsetLeft,n.offsetTop);const i=It(null==r?void 0:r.pageYOffset,s.scrollTop),o=It(null==r?void 0:r.pageXOffset,s.scrollLeft),a=It(s.clientTop,n.clientTop),l=It(s.clientLeft,n.clientLeft);return Bt(e).translate(o-l,i-a)},Bt=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Nt(n.offsetLeft,n.offsetTop):lt(e)?(e=>{const t=e.getBoundingClientRect();return Nt(t.left,t.top)})(t):Nt(0,0)},Ft=At("width",(e=>e.dom.offsetWidth)),Ht=e=>Ft.get(e),jt=e=>Ft.getOuter(e),Ut=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},Yt=()=>Vt(0,0),Vt=(e,t)=>({major:e,minor:t}),$t={nu:Vt,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Yt():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];if(r.test(t))return r}})(e,t);if(!n)return{major:0,minor:0};const r=e=>Number(t.replace(n,"$"+e));return Vt(r(1),r(2))})(e,n)},unknown:Yt},Wt=(e,t)=>{const n=String(t).toLowerCase();return $(e,(e=>e.search(n)))},Gt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qt=e=>t=>Se(t,e),Xt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Se(e,"edge/")&&Se(e,"chrome")&&Se(e,"safari")&&Se(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Gt],search:e=>Se(e,"chrome")&&!Se(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Se(e,"msie")||Se(e,"trident")},{name:"Opera",versionRegexes:[Gt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qt("firefox")},{name:"Safari",versionRegexes:[Gt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Se(e,"safari")||Se(e,"mobile/"))&&Se(e,"applewebkit")}],Kt=[{name:"Windows",search:qt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Se(e,"iphone")||Se(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:qt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qt("linux"),versionRegexes:[]},{name:"Solaris",search:qt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Jt={browsers:_(Xt),oses:_(Kt)},Zt="Edge",Qt="Chromium",en="Opera",tn="Firefox",nn="Safari",rn=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(Zt),isChromium:r(Qt),isIE:r("IE"),isOpera:r(en),isFirefox:r(tn),isSafari:r(nn)}},sn={unknown:()=>rn({current:void 0,version:$t.unknown()}),nu:rn,edge:_(Zt),chromium:_(Qt),ie:_("IE"),opera:_(en),firefox:_(tn),safari:_(nn)},on="Windows",an="Android",ln="Linux",cn="macOS",dn="Solaris",un="FreeBSD",hn="ChromeOS",mn=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(on),isiOS:r("iOS"),isAndroid:r(an),isMacOS:r(cn),isLinux:r(ln),isSolaris:r(dn),isFreeBSD:r(un),isChromeOS:r(hn)}},pn={unknown:()=>mn({current:void 0,version:$t.unknown()}),nu:mn,windows:_(on),ios:_("iOS"),android:_(an),linux:_(ln),macos:_(cn),solaris:_(dn),freebsd:_(un),chromeos:_(hn)},fn=(e,t,n)=>{const r=Jt.browsers(),s=Jt.oses(),i=t.bind((e=>((e,t)=>ie(t.brands,(t=>{const n=t.brand.toLowerCase();return $(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:$t.nu(parseInt(t.version,10),0)})))})))(r,e))).orThunk((()=>((e,t)=>Wt(e,t).map((e=>{const n=$t.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e))).fold(sn.unknown,sn.nu),o=((e,t)=>Wt(e,t).map((e=>{const n=$t.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(s,e).fold(pn.unknown,pn.nu),a=((e,t,n,r)=>{const s=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!s,o=e.isiOS()||e.isAndroid(),a=o||r("(pointer:coarse)"),l=s||!i&&o&&r("(min-device-width:768px)"),c=i||o&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:_(s),isiPhone:_(i),isTablet:_(l),isPhone:_(c),isTouch:_(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:_(d),isDesktop:_(u)}})(o,i,e,n);return{browser:i,os:o,deviceType:a}},gn=e=>window.matchMedia(e).matches;let vn=Ut((()=>fn(navigator.userAgent,L.from(navigator.userAgentData),gn)));const yn=()=>vn(),_n=e=>{const t=De.fromDom((e=>{if(nt()&&m(e.target)){const t=De.fromDom(e.target);if(Pe(t)&&at(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return ne(t)}}return L.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),s=y(r,n);return((e,t,n,r,s,i,o)=>({target:e,x:t,y:n,stop:r,prevent:s,kill:i,raw:o}))(t,e.clientX,e.clientY,n,r,s,e)},bn=(e,t,n,r,s)=>{const i=((e,t)=>n=>{e(n)&&t(_n(n))})(n,r);return e.dom.addEventListener(t,i,s),{unbind:x(wn,e,t,i,s)}},wn=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},xn=(e,t)=>{Ge(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},Mn=(e,t)=>{const n=(e=>L.from(e.dom.nextSibling).map(De.fromDom))(e);n.fold((()=>{Ge(e).each((e=>{Tn(e,t)}))}),(e=>{xn(e,t)}))},Sn=(e,t)=>{const n=(e=>Je(e,0))(e);n.fold((()=>{Tn(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Tn=(e,t)=>{e.dom.appendChild(t.dom)},Cn=(e,t)=>{H(t,(t=>{Tn(e,t)}))},En=e=>{e.dom.textContent="",H(Ke(e),(e=>{kn(e)}))},kn=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Ln=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Nt(n,r)},An=(e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Dn=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),On=e=>{const t=void 0===e?window:e,n=t.document,r=Ln(De.fromDom(n));return(e=>{const t=void 0===e?window:e;return yn().browser.isFirefox()?L.none():L.from(t.visualViewport)})(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,s=e.clientHeight;return Dn(r.left,r.top,n,s)}),(e=>Dn(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)))},Rn=()=>De.fromDom(document),Pn=(e,t)=>e.view(t).fold(_([]),(t=>{const n=e.owner(t),r=Pn(e,n);return[t].concat(r)}));var Nn=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?L.none():L.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(De.fromDom)},owner:e=>Ye(e)});const In=e=>{const t=Rn(),n=Ln(t),r=((e,t)=>{const n=t.owner(e),r=Pn(t,n);return L.some(r)})(e,Nn);return r.fold(x(zt,e),(t=>{const r=Bt(e),s=Y(t,((e,t)=>{const n=Bt(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return Nt(s.left+r.left+n.left,s.top+r.top+n.top)}))},zn=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),Bn=e=>{const t=zt(e),n=jt(e),r=Rt(e);return zn(t.left,t.top,n,r)},Fn=e=>{const t=In(e),n=jt(e),r=Rt(e);return zn(t.left,t.top,n,r)},Hn=()=>On(window),jn=e=>{const t=t=>t(e),n=_(e),r=()=>s,s={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:E,isError:C,map:t=>Yn.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>L.some(e)};return s},Un=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:C,isError:E,map:t,mapError:t=>Yn.error(t(e)),bind:t,exists:C,forall:E,getOr:b,or:b,getOrThunk:T,orThunk:T,getOrDie:S(String(e)),each:v,toOptional:L.none};return n},Yn={value:jn,error:Un,fromOption:(e,t)=>e.fold((()=>Un(t)),jn)};var Vn;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Vn||(Vn={}));const $n=(e,t,n)=>e.stype===Vn.Error?t(e.serror):n(e.svalue),Wn=e=>({stype:Vn.Value,svalue:e}),Gn=e=>({stype:Vn.Error,serror:e}),qn=e=>e.fold(Gn,Wn),Xn=e=>$n(e,Yn.error,Yn.value),Kn=Wn,Jn=e=>{const t=[],n=[];return H(e,(e=>{$n(e,(e=>n.push(e)),(e=>t.push(e)))})),{values:t,errors:n}},Zn=Gn,Qn=(e,t)=>e.stype===Vn.Value?t(e.svalue):e,er=(e,t)=>e.stype===Vn.Error?t(e.serror):e,tr=(e,t)=>e.stype===Vn.Value?{stype:Vn.Value,svalue:t(e.svalue)}:e,nr=(e,t)=>e.stype===Vn.Error?{stype:Vn.Error,serror:t(e.serror)}:e,rr=$n,sr=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),ir=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},or=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const s=t[r];for(const t in s)ve(s,t)&&(n[t]=e(n[t],s[t]))}return n},ar=or(((e,t)=>a(e)&&a(t)?ar(e,t):t)),lr=or(((e,t)=>t)),cr=e=>({tag:"defaultedThunk",process:e}),dr=e=>cr(_(e)),ur=e=>({tag:"mergeWithThunk",process:e}),hr=e=>y(Zn,G)(e),mr=e=>{const t=Jn(e);return t.errors.length>0?hr(t.errors):Kn(t.values)},pr=e=>o(e)&&oe(e).length>100?" removed due to size":JSON.stringify(e,null,2),fr=(e,t)=>Zn([{path:e,getErrorInfo:t}]),gr=e=>({extract:(t,n)=>er(e(n),(e=>((e,t)=>fr(e,_(t)))(t,e))),toString:_("val")}),vr=gr(Kn),yr=(e,t,n,r)=>ge(t,n).fold((()=>((e,t,n)=>fr(e,(()=>'Could not find valid *required* value for "'+t+'" in '+pr(n))))(e,n,t)),r),_r=(e,t,n,r)=>r(ge(e,t).getOrThunk((()=>n(e)))),br=(e,t,n,r,s)=>{const i=e=>s.extract(t.concat([r]),e),o=e=>e.fold((()=>Kn(L.none())),(e=>{const n=s.extract(t.concat([r]),e);return tr(n,L.some)}));switch(e.tag){case"required":return yr(t,n,r,i);case"defaultedThunk":return _r(n,r,e.process,i);case"option":return((e,t,n)=>n(ge(e,t)))(n,r,o);case"defaultedOptionThunk":return((e,t,n,r)=>r(ge(e,t).map((t=>!0===t?n(e):t))))(n,r,e.process,o);case"mergeWithThunk":return _r(n,r,_({}),(t=>{const r=ar(e.process(n),t);return i(r)}))}},wr=e=>({extract:(t,n)=>e().extract(t,n),toString:()=>e().toString()}),xr=e=>oe(((e,t)=>{const n={};return he(e,t,ue(n),v),n})(e,m)),Mr=e=>{const t=Sr(e),n=Y(e,((e,t)=>ir(t,(t=>ar(e,{[t]:!0})),_(e))),{});return{extract:(e,r)=>{const s=d(r)?[]:xr(r),i=U(s,(e=>!ye(n,e)));return 0===i.length?t.extract(e,r):((e,t)=>fr(e,(()=>"There are unsupported fields: ["+t.join(", ")+"] specified")))(e,i)},toString:t.toString}},Sr=e=>({extract:(t,n)=>((e,t,n)=>{const r={},s=[];for(const i of n)ir(i,((n,i,o,a)=>{const l=br(o,e,t,n,a);rr(l,(e=>{s.push(...e)}),(e=>{r[i]=e}))}),((e,n)=>{r[e]=n(t)}));return s.length>0?Zn(s):Kn(r)})(t,n,e),toString:()=>{const t=F(e,(e=>ir(e,((e,t,n,r)=>e+" -> "+r.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),Tr=e=>({extract:(t,n)=>{const r=F(n,((n,r)=>e.extract(t.concat(["["+r+"]"]),n)));return mr(r)},toString:()=>"array("+e.toString()+")"}),Cr=e=>({extract:(t,n)=>{const r=[];for(const s of e){const e=s.extract(t,n);if(e.stype===Vn.Value)return e;r.push(e)}return mr(r)},toString:()=>"oneOf("+F(e,(e=>e.toString())).join(", ")+")"}),Er=(e,t)=>({extract:(n,r)=>{const s=oe(r),i=((t,n)=>Tr(gr(e)).extract(t,n))(n,s);return Qn(i,(e=>{const s=F(e,(e=>sr(e,e,{tag:"required",process:{}},t)));return Sr(s).extract(n,r)}))},toString:()=>"setOf("+t.toString()+")"}),kr=y(Tr,Sr),Lr=_(vr),Ar=(e,t)=>gr((n=>{const r=typeof n;return e(n)?Kn(n):Zn(`Expected type: ${t} but got: ${r}`)})),Dr=Ar(f,"number"),Or=Ar(i,"string"),Rr=Ar(d,"boolean"),Pr=Ar(p,"function"),Nr=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>Nr(e[t])));default:return!1}},Ir=gr((e=>Nr(e)?Kn(e):Zn("Expected value to be acceptable for sending via postMessage"))),zr=(e,t,n,r)=>ge(n,r).fold((()=>((e,t,n)=>fr(e,(()=>'The chosen schema: "'+n+'" did not exist in branches: '+pr(t))))(e,n,r)),(n=>n.extract(e.concat(["branch: "+r]),t))),Br=(e,t)=>({extract:(n,r)=>ge(r,e).fold((()=>((e,t)=>fr(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(n,e)),(e=>zr(n,r,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+oe(t)}),Fr=e=>gr((t=>e(t).fold(Zn,Kn))),Hr=(e,t)=>Er((t=>qn(e(t))),t),jr=(e,t,n)=>Xn(((e,t,n)=>{const r=t.extract([e],n);return nr(r,(e=>({input:n,errors:e})))})(e,t,n)),Ur=e=>e.fold((e=>{throw new Error(Vr(e))}),b),Yr=(e,t,n)=>Ur(jr(e,t,n)),Vr=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:_("... (only showing first ten failures)")}]):e;return F(t,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))})(e.errors).join("\n")+"\n\nInput object: "+pr(e.input),$r=(e,t)=>Br(e,ce(t,Sr)),Wr=sr,Gr=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),qr=e=>Fr((t=>N(e,t)?Yn.value(t):Yn.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`))),Xr=e=>Wr(e,e,{tag:"required",process:{}},Lr()),Kr=(e,t)=>Wr(e,e,{tag:"required",process:{}},t),Jr=e=>Kr(e,Dr),Zr=e=>Kr(e,Or),Qr=(e,t)=>Wr(e,e,{tag:"required",process:{}},qr(t)),es=e=>Kr(e,Pr),ts=(e,t)=>Wr(e,e,{tag:"required",process:{}},Sr(t)),ns=(e,t)=>Wr(e,e,{tag:"required",process:{}},kr(t)),rs=(e,t)=>Wr(e,e,{tag:"required",process:{}},Tr(t)),ss=e=>Wr(e,e,{tag:"option",process:{}},Lr()),is=(e,t)=>Wr(e,e,{tag:"option",process:{}},t),os=e=>is(e,Dr),as=e=>is(e,Or),ls=(e,t)=>is(e,qr(t)),cs=e=>is(e,Pr),ds=(e,t)=>is(e,Tr(t)),us=(e,t)=>is(e,Sr(t)),hs=(e,t)=>Wr(e,e,dr(t),Lr()),ms=(e,t,n)=>Wr(e,e,dr(t),n),ps=(e,t)=>ms(e,t,Dr),fs=(e,t)=>ms(e,t,Or),gs=(e,t,n)=>ms(e,t,qr(n)),vs=(e,t)=>ms(e,t,Rr),ys=(e,t)=>ms(e,t,Pr),_s=(e,t,n)=>ms(e,t,Tr(n)),bs=(e,t,n)=>ms(e,t,Sr(n)),ws=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},xs=e=>{if(!l(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return H(e,((r,s)=>{const i=oe(r);if(1!==i.length)throw new Error("one and only one name per case");const o=i[0],a=r[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!l(a))throw new Error("case arguments must be an array");t.push(o),n[o]=(...n)=>{const r=n.length;if(r!==a.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+a.length+" ("+a+"), got "+r);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[s].apply(null,n)},match:e=>{const r=oe(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!X(t,(e=>N(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[o].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:o,params:n})}}}})),n};xs([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ms=(e,t)=>((e,t)=>{const n={};return le(e,((e,r)=>{N(t,r)||(n[r]=e)})),n})(e,t),Ss=(e,t)=>((e,t)=>({[e]:t}))(e,t),Ts=e=>(e=>{const t={};return H(e,(e=>{t[e.key]=e.value})),t})(e),Cs=(e,t)=>{const n=(e=>{const t=[],n=[];return H(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{n.push(e)}))})),{errors:t,values:n}})(e);return n.errors.length>0?(r=n.errors,Yn.error(G(r))):((e,t)=>0===e.length?Yn.value(t):Yn.value(ar(t,lr.apply(void 0,e))))(n.values,t);var r},Es=e=>p(e)?e:C,ks=(e,t,n)=>{let r=e.dom;const s=Es(n);for(;r.parentNode;){r=r.parentNode;const e=De.fromDom(r),n=t(e);if(n.isSome())return n;if(s(e))break}return L.none()},Ls=(e,t,n)=>{const r=t(e),s=Es(n);return r.orThunk((()=>s(e)?L.none():ks(e,t,s)))},As=(e,t)=>je(e.element,t.event.target),Ds={can:E,abort:C,run:v},Os=e=>{if(!ye(e,"can")&&!ye(e,"abort")&&!ye(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...Ds,...e}},Rs=e=>{const t=((e,t)=>(...n)=>V(e,((e,r)=>e&&t(r).apply(void 0,n)),!0))(e,(e=>e.can)),n=((e,t)=>(...n)=>V(e,((e,r)=>e||t(r).apply(void 0,n)),!1))(e,(e=>e.abort));return{can:t,abort:n,run:(...t)=>{H(e,(e=>{e.run.apply(void 0,t)}))}}},Ps=_,Ns=Ps("touchstart"),Is=Ps("touchmove"),zs=Ps("touchend"),Bs=Ps("touchcancel"),Fs=Ps("mousedown"),Hs=Ps("mousemove"),js=Ps("mouseout"),Us=Ps("mouseup"),Ys=Ps("mouseover"),Vs=Ps("focusin"),$s=Ps("focusout"),Ws=Ps("keydown"),Gs=Ps("keyup"),qs=Ps("input"),Xs=Ps("change"),Ks=Ps("click"),Js=Ps("transitioncancel"),Zs=Ps("transitionend"),Qs=Ps("transitionstart"),ei=Ps("selectstart"),ti=e=>_("alloy."+e),ni={tap:ti("tap")},ri=ti("focus"),si=ti("blur.post"),ii=ti("paste.post"),oi=ti("receive"),ai=ti("execute"),li=ti("focus.item"),ci=ni.tap,di=ti("longpress"),ui=ti("sandbox.close"),hi=ti("typeahead.cancel"),mi=ti("system.init"),pi=ti("system.touchmove"),fi=ti("system.touchend"),gi=ti("system.scroll"),vi=ti("system.resize"),yi=ti("system.attached"),_i=ti("system.detached"),bi=ti("system.dismissRequested"),wi=ti("system.repositionRequested"),xi=ti("focusmanager.shifted"),Mi=ti("slotcontainer.visibility"),Si=ti("change.tab"),Ti=ti("dismiss.tab"),Ci=ti("highlight"),Ei=ti("dehighlight"),ki=(e,t)=>{Oi(e,e.element,t,{})},Li=(e,t,n)=>{Oi(e,e.element,t,n)},Ai=e=>{ki(e,ai())},Di=(e,t,n)=>{Oi(e,t,n,{})},Oi=(e,t,n,r)=>{const s={target:t,...r};e.getSystem().triggerEvent(n,t,s)},Ri=(e,t,n,r)=>{e.getSystem().triggerEvent(n,t,r.event)},Pi=e=>Ts(e),Ni=(e,t)=>({key:e,value:Os({abort:t})}),Ii=e=>({key:e,value:Os({run:(e,t)=>{t.event.prevent()}})}),zi=(e,t)=>({key:e,value:Os({run:t})}),Bi=(e,t,n)=>({key:e,value:Os({run:(e,r)=>{t.apply(void 0,[e,r].concat(n))}})}),Fi=e=>t=>({key:e,value:Os({run:(e,n)=>{As(e,n)&&t(e,n)}})}),Hi=(e,t,n)=>((e,t)=>zi(e,((n,r)=>{n.getSystem().getByUid(t).each((t=>{Ri(t,t.element,e,r)}))})))(e,t.partUids[n]),ji=(e,t)=>zi(e,((e,n)=>{const r=n.event,s=e.getSystem().getByDom(r.target).getOrThunk((()=>Ls(r.target,(t=>e.getSystem().getByDom(t).toOptional()),C).getOr(e)));t(e,s,n)})),Ui=e=>zi(e,((e,t)=>{t.cut()})),Yi=e=>zi(e,((e,t)=>{t.stop()})),Vi=(e,t)=>Fi(e)(t),$i=Fi(yi()),Wi=Fi(_i()),Gi=Fi(mi()),qi=(e=>t=>zi(e,t))(ai()),Xi=e=>e.dom.innerHTML,Ki=(e,t)=>{const n=Ye(e).dom,r=De.fromDom(n.createDocumentFragment()),s=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Ke(De.fromDom(n))})(t,n);Cn(r,s),En(e),Tn(e,r)},Ji=e=>((e,t)=>De.fromDom(e.dom.cloneNode(t)))(e,!1),Zi=e=>{if(et(e))return"#shadow-root";return(e=>{const t=De.fromTag("div"),n=De.fromDom(e.dom.cloneNode(!0));return Tn(t,n),Xi(t)})(Ji(e))},Qi=e=>Zi(e),eo=Pi([((e,t)=>({key:e,value:Os({can:t})}))(ri(),((e,t)=>{const n=t.event,r=n.originator,s=n.target;return!((e,t,n)=>je(t,e.element)&&!je(t,n))(e,r,s)||(console.warn(ri()+" did not get interpreted by the desired target. \nOriginator: "+Qi(r)+"\nTarget: "+Qi(s)+"\nCheck the "+ri()+" event handlers"),!1)}))]);var to=Object.freeze({__proto__:null,events:eo});let no=0;const ro=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return no++,e+"_"+n+no+String(t)},so=_("alloy-id-"),io=_("data-alloy-id"),oo=so(),ao=io(),lo=(e,t)=>{Object.defineProperty(e.dom,ao,{value:t,writable:!0})},co=e=>{const t=Pe(e)?e.dom[ao]:null;return L.from(t)},uo=e=>ro(e),ho=b,mo=e=>{const t=t=>`The component must be in a context to execute: ${t}`+(e?"\n"+Qi(e().element)+" is not in context.":""),n=e=>()=>{throw new Error(t(e))},r=e=>()=>{console.warn(t(e))};return{debugInfo:_("fake"),triggerEvent:r("triggerEvent"),triggerFocus:r("triggerFocus"),triggerEscape:r("triggerEscape"),broadcast:r("broadcast"),broadcastOn:r("broadcastOn"),broadcastEvent:r("broadcastEvent"),build:n("build"),buildOrPatch:n("buildOrPatch"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:C}},po=mo(),fo=e=>F(e,(e=>Ce(e,"/*")?e.substring(0,e.length-"/*".length):e)),go=(e,t)=>{const n=e.toString(),r=n.indexOf(")")+1,s=n.indexOf("("),i=n.substring(s+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:fo(i)}),e},vo=ro("alloy-premade"),yo=e=>(Object.defineProperty(e.element.dom,vo,{value:e.uid,writable:!0}),Ss(vo,e)),_o=e=>ge(e,vo),bo=e=>((e,t)=>{const n=t.toString(),r=n.indexOf(")")+1,s=n.indexOf("("),i=n.substring(s+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:fo(i.slice(1))}),e})(((t,...n)=>e(t.getApis(),t,...n)),e),wo={init:()=>xo({readState:_("No State required")})},xo=e=>e,Mo=(e,t)=>{const n={};return le(e,((e,r)=>{le(e,((e,s)=>{const i=ge(n,s).getOr([]);n[s]=i.concat([t(r,e)])}))})),n},So=e=>({classes:u(e.classes)?[]:e.classes,attributes:u(e.attributes)?{}:e.attributes,styles:u(e.styles)?{}:e.styles}),To=e=>e.cHandler,Co=(e,t)=>({name:e,handler:t}),Eo=(e,t)=>{const n={};return H(e,(e=>{n[e.name()]=e.handlers(t)})),n},ko=(e,t,n,r)=>{const s=((e,t,n)=>{const r={...n,...Eo(t,e)};return Mo(r,Co)})(e,n,r);return Do(s,t)},Lo=e=>{const t=(e=>p(e)?{can:E,abort:C,run:e}:e)(e);return(e,n,...r)=>{const s=[e,n].concat(r);t.abort.apply(void 0,s)?n.stop():t.can.apply(void 0,s)&&t.run.apply(void 0,s)}},Ao=(e,t,n)=>{const r=t[n];return r?((e,t,n,r)=>{try{const s=ee(n,((n,s)=>{const i=n[t],o=s[t],a=r.indexOf(i),l=r.indexOf(o);if(-1===a)throw new Error("The ordering for "+e+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===l)throw new Error("The ordering for "+e+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(r,null,2));return a<l?-1:l<a?1:0}));return Yn.value(s)}catch(e){return Yn.error([e])}})("Event: "+n,"name",e,r).map((e=>{const t=F(e,(e=>e.handler));return Rs(t)})):((e,t)=>Yn.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(F(t,(e=>e.name)),null,2)]))(n,e)},Do=(e,t)=>{const n=me(e,((e,n)=>(1===e.length?Yn.value(e[0].handler):Ao(e,t,n)).map((r=>{const s=Lo(r),i=e.length>1?U(t[n],(t=>I(e,(e=>e.name===t)))).join(" > "):e[0].name;return Ss(n,((e,t)=>({handler:e,purpose:t}))(s,i))}))));return Cs(n,{})},Oo="alloy.base.behaviour",Ro=Sr([Wr("dom","dom",{tag:"required",process:{}},Sr([Xr("tag"),hs("styles",{}),hs("classes",[]),hs("attributes",{}),ss("value"),ss("innerHtml")])),Xr("components"),Xr("uid"),hs("events",{}),hs("apis",{}),Wr("eventOrder","eventOrder",(e=>ur(_(e)))({[ai()]:["disabling",Oo,"toggling","typeaheadevents"],[ri()]:[Oo,"focusing","keying"],[mi()]:[Oo,"disabling","toggling","representing"],[qs()]:[Oo,"representing","streaming","invalidating"],[_i()]:[Oo,"representing","item-events","tooltipping"],[Fs()]:["focusing",Oo,"item-type-events"],[Ns()]:["focusing",Oo,"item-type-events"],[Ys()]:["item-type-events","tooltipping"],[oi()]:["receiving","reflecting","tooltipping"]}),Lr()),ss("domModification")]),Po=e=>e.events,No=(e,t)=>{const n=pt(e,t);return void 0===n||""===n?[]:n.split(" ")},Io=e=>void 0!==e.dom.classList,zo=e=>No(e,"class"),Bo=(e,t)=>((e,t,n)=>{const r=No(e,t).concat([n]);return ht(e,t,r.join(" ")),!0})(e,"class",t),Fo=(e,t)=>((e,t,n)=>{const r=U(No(e,t),(e=>e!==n));return r.length>0?ht(e,t,r.join(" ")):vt(e,t),!1})(e,"class",t),Ho=(e,t)=>{Io(e)?e.dom.classList.add(t):Bo(e,t)},jo=(e,t)=>{if(Io(e)){e.dom.classList.remove(t)}else Fo(e,t);(e=>{0===(Io(e)?e.dom.classList:zo(e)).length&&vt(e,"class")})(e)},Uo=(e,t)=>Io(e)&&e.dom.classList.contains(t),Yo=(e,t)=>{H(t,(t=>{Ho(e,t)}))},Vo=(e,t)=>{H(t,(t=>{jo(e,t)}))},$o=e=>Io(e)?(e=>{const t=e.dom.classList,n=new Array(t.length);for(let e=0;e<t.length;e++){const r=t.item(e);null!==r&&(n[e]=r)}return n})(e):zo(e),Wo=e=>e.dom.value,Go=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},qo=(e,t,n)=>{n.fold((()=>Tn(e,t)),(e=>{je(e,t)||(xn(e,t),kn(e))}))},Xo=(e,t,n)=>{const r=F(t,n),s=Ke(e);return H(s.slice(r.length),kn),r},Ko=(e,t,n,r)=>{const s=Je(e,t),i=r(n,s),o=((e,t,n)=>Je(e,t).map((e=>{if(n.exists((t=>!je(t,e)))){const t=n.map(Oe).getOr("span"),r=De.fromTag(t);return xn(e,r),r}return e})))(e,t,s);return qo(e,i.element,o),i},Jo=(e,t)=>{const n=oe(e),r=oe(t),s=J(r,n),i=((e,t)=>{const n={},r={};return he(e,t,ue(n),ue(r)),{t:n,f:r}})(e,((e,n)=>!ve(t,n)||e!==t[n])).t;return{toRemove:s,toSet:i}},Zo=(e,t)=>{const{class:n,style:r,...s}=(e=>V(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))(t),{toSet:i,toRemove:o}=Jo(e.attributes,s),a=Ct(t),{toSet:l,toRemove:c}=Jo(e.styles,a),d=$o(t),u=J(d,e.classes),h=J(e.classes,d);return H(o,(e=>vt(t,e))),mt(t,i),Yo(t,h),Vo(t,u),H(c,(e=>kt(t,e))),wt(t,l),e.innerHtml.fold((()=>{const n=e.domChildren;((e,t)=>{Xo(e,t,((t,n)=>{const r=Je(e,n);return qo(e,t,r),t}))})(t,n)}),(e=>{Ki(t,e)})),(()=>{const n=t;e.value.filter((e=>e!==Wo(n))).each((e=>Go(n,e)))})(),t},Qo=(e,t)=>{const n=t.filter((t=>Oe(t)===e.tag&&!(e=>e.innerHtml.isSome()&&e.domChildren.length>0)(e)&&!(e=>ve(e.dom,vo))(t))).bind((t=>((e,t)=>{try{const n=Zo(e,t);return L.some(n)}catch(e){return L.none()}})(e,t))).getOrThunk((()=>(e=>{const t=De.fromTag(e.tag);mt(t,e.attributes),Yo(t,e.classes),wt(t,e.styles),e.innerHtml.each((e=>Ki(t,e)));const n=e.domChildren;return Cn(t,n),e.value.each((e=>{Go(t,e)})),t})(e)));return lo(n,e.uid),n},ea=(e,t)=>((e,t)=>{const n=F(t,(e=>us(e.name(),[Xr("config"),hs("state",wo)]))),r=jr("component.behaviours",Sr(n),e.behaviours).fold((t=>{throw new Error(Vr(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),b);return{list:t,data:ce(r,(e=>{const t=e.map((e=>({config:e.config,state:e.state.init(e.config)})));return _(t)}))}})(e,t),ta=e=>{const t=(e=>{const t=ge(e,"behaviours").getOr({});return q(oe(t),(e=>{const n=t[e];return m(n)?[n.me]:[]}))})(e);return ea(e,t)},na=(e,t,n)=>{const r={...(s=e).dom,uid:s.uid,domChildren:F(s.components,(e=>e.element))};var s;const i=(e=>e.domModification.fold((()=>So({})),So))(e),o={"alloy.base.modification":i},a=t.length>0?((e,t,n,r)=>{const s={...t};H(n,(t=>{s[t.name()]=t.exhibit(e,r)}));const i=Mo(s,((e,t)=>({name:e,modification:t}))),o=e=>Y(e,((e,t)=>({...t.modification,...e})),{}),a=Y(i.classes,((e,t)=>t.modification.concat(e)),[]),l=o(i.attributes),c=o(i.styles);return So({classes:a,attributes:l,styles:c})})(n,o,t,r):i;return l=r,c=a,{...l,attributes:{...l.attributes,...c.attributes},styles:{...l.styles,...c.styles},classes:l.classes.concat(c.classes)};var l,c},ra=(e,t)=>{const n=()=>h,r=ws(po),s=Ur((e=>jr("custom.definition",Ro,e))(e)),i=ta(e),o=(e=>e.list)(i),a=(e=>e.data)(i),l=na(s,o,a),c=Qo(l,t),d=((e,t,n)=>{const r={"alloy.base.behaviour":Po(e)};return ko(n,e.eventOrder,t,r).getOrDie()})(s,o,a),u=ws(s.components),h={uid:e.uid,getSystem:r.get,config:t=>{const n=a;return(p(n[t.name()])?n[t.name()]:()=>{throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:e=>p(a[e.name()]),spec:e,readState:e=>a[e]().map((e=>e.state.readState())).getOr("not enabled"),getApis:()=>s.apis,connect:e=>{r.set(e)},disconnect:()=>{r.set(mo(n))},element:c,syncComponents:()=>{const e=Ke(c),t=q(e,(e=>r.get().getByDom(e).fold((()=>[]),Q)));u.set(t)},components:u.get,events:d};return h},sa=(e,t)=>{const{events:n,...r}=ho(e),s=((e,t)=>{const n=ge(e,"components").getOr([]);return t.fold((()=>F(n,ca)),(e=>F(n,((t,n)=>la(t,Je(e,n))))))})(r,t),i={...r,events:{...to,...n},components:s};return Yn.value(ra(i,t))},ia=e=>{const t=De.fromText(e);return oa({element:t})},oa=e=>{const t=Yr("external.component",Mr([Xr("element"),ss("uid")]),e),n=ws(mo()),r=t.uid.getOrThunk((()=>uo("external")));lo(t.element,r);const s={uid:r,getSystem:n.get,config:L.none,hasConfigured:C,connect:e=>{n.set(e)},disconnect:()=>{n.set(mo((()=>s)))},getApis:()=>({}),element:t.element,spec:e,readState:_("No state"),syncComponents:v,components:_([]),events:{}};return yo(s)},aa=uo,la=(e,t)=>_o(e).getOrThunk((()=>{const n=(e=>ve(e,"uid"))(e)?e:{uid:aa(""),...e};return sa(n,t).getOrDie()})),ca=e=>la(e,L.none()),da=yo;var ua=(e,t,n,r,s)=>e(n,r)?L.some(n):p(s)&&s(n)?L.none():t(n,r,s);const ha=(e,t,n)=>{let r=e.dom;const s=p(n)?n:C;for(;r.parentNode;){r=r.parentNode;const e=De.fromDom(r);if(t(e))return L.some(e);if(s(e))break}return L.none()},ma=(e,t,n)=>ua(((e,t)=>t(e)),ha,e,t,n),pa=(e,t,n)=>ma(e,t,n).isSome(),fa=(e,t,n)=>ha(e,(e=>Fe(e,t)),n),ga=(e,t)=>((e,t)=>$(e.dom.childNodes,(e=>t(De.fromDom(e)))).map(De.fromDom))(e,(e=>Fe(e,t))),va=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return He(n)?L.none():L.from(n.querySelector(e)).map(De.fromDom)})(t,e),ya=(e,t,n)=>ua(((e,t)=>Fe(e,t)),fa,e,t,n),_a="aria-controls",ba=()=>{const e=ro(_a);return{id:e,link:t=>{ht(t,_a,e)},unlink:e=>{vt(e,_a)}}},wa=(e,t)=>(e=>ma(e,(e=>{if(!Pe(e))return!1;const t=pt(e,"id");return void 0!==t&&t.indexOf(_a)>-1})).bind((e=>{const t=pt(e,"id"),n=rt(e);return va(n,`[${_a}="${t}"]`)})))(t).exists((t=>xa(e,t))),xa=(e,t)=>pa(t,(t=>je(t,e.element)),C)||wa(e,t),Ma="unknown";var Sa;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(Sa||(Sa={}));const Ta=ws({}),Ca=(e,t,n)=>{switch(ge(Ta.get(),e).orThunk((()=>{const t=oe(Ta.get());return ie(t,(t=>e.indexOf(t)>-1?L.some(Ta.get()[t]):L.none()))})).getOr(Sa.NORMAL)){case Sa.NORMAL:return n(La());case Sa.LOGGING:{const r=((e,t)=>{const n=[],r=(new Date).getTime();return{logEventCut:(e,t,r)=>{n.push({outcome:"cut",target:t,purpose:r})},logEventStopped:(e,t,r)=>{n.push({outcome:"stopped",target:t,purpose:r})},logNoParent:(e,t,r)=>{n.push({outcome:"no-parent",target:t,purpose:r})},logEventNoHandlers:(e,t)=>{n.push({outcome:"no-handlers-left",target:t})},logEventResponse:(e,t,r)=>{n.push({outcome:"response",purpose:r,target:t})},write:()=>{const s=(new Date).getTime();N(["mousemove","mouseover","mouseout",mi()],e)||console.log(e,{event:e,time:s-r,target:t.dom,sequence:F(n,(e=>N(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+Qi(e.target)+")":e.outcome))})}}})(e,t),s=n(r);return r.write(),s}case Sa.STOP:return!0}},Ea=["alloy/data/Fields","alloy/debugging/Debugging"],ka=(e,t,n)=>Ca(e,t,n),La=_({logEventCut:v,logEventStopped:v,logNoParent:v,logEventNoHandlers:v,logEventResponse:v,write:v}),Aa=_([Xr("menu"),Xr("selectedMenu")]),Da=_([Xr("item"),Xr("selectedItem")]);_(Sr(Da().concat(Aa())));const Oa=_(Sr(Da())),Ra=ts("initSize",[Xr("numColumns"),Xr("numRows")]),Pa=()=>ts("markers",[Xr("backgroundMenu")].concat(Aa()).concat(Da())),Na=e=>ts("markers",F(e,Xr)),Ia=(e,t,n)=>((()=>{const e=new Error;if(void 0!==e.stack){const t=e.stack.split("\n");return $(t,(e=>e.indexOf("alloy")>0&&!I(Ea,(t=>e.indexOf(t)>-1)))).getOr(Ma)}})(),Wr(t,t,n,Fr((e=>Yn.value(((...t)=>e.apply(void 0,t))))))),za=e=>Ia(0,e,dr(v)),Ba=e=>Ia(0,e,dr(L.none)),Fa=e=>Ia(0,e,{tag:"required",process:{}}),Ha=e=>Ia(0,e,{tag:"required",process:{}}),ja=(e,t)=>Gr(e,_(t)),Ua=e=>Gr(e,b),Ya=_(Ra),Va=(e,t,n,r,s,i,o,a=!1)=>({x:e,y:t,bubble:n,direction:r,placement:s,restriction:i,label:`${o}-${s}`,alwaysFit:a}),$a=xs([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Wa=$a.southeast,Ga=$a.southwest,qa=$a.northeast,Xa=$a.northwest,Ka=$a.south,Ja=$a.north,Za=$a.east,Qa=$a.west,el=(e,t,n,r)=>{const s=e+t;return s>r?n:s<n?r:s},tl=(e,t,n)=>Math.min(Math.max(e,t),n),nl=(e,t)=>Z(["left","right","top","bottom"],(n=>ge(t,n).map((t=>((e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}})(e,t))))),rl="layout",sl=e=>e.x,il=(e,t)=>e.x+e.width/2-t.width/2,ol=(e,t)=>e.x+e.width-t.width,al=(e,t)=>e.y-t.height,ll=e=>e.y+e.height,cl=(e,t)=>e.y+e.height/2-t.height/2,dl=(e,t,n)=>Va(sl(e),ll(e),n.southeast(),Wa(),"southeast",nl(e,{left:1,top:3}),rl),ul=(e,t,n)=>Va(ol(e,t),ll(e),n.southwest(),Ga(),"southwest",nl(e,{right:0,top:3}),rl),hl=(e,t,n)=>Va(sl(e),al(e,t),n.northeast(),qa(),"northeast",nl(e,{left:1,bottom:2}),rl),ml=(e,t,n)=>Va(ol(e,t),al(e,t),n.northwest(),Xa(),"northwest",nl(e,{right:0,bottom:2}),rl),pl=(e,t,n)=>Va(il(e,t),al(e,t),n.north(),Ja(),"north",nl(e,{bottom:2}),rl),fl=(e,t,n)=>Va(il(e,t),ll(e),n.south(),Ka(),"south",nl(e,{top:3}),rl),gl=(e,t,n)=>Va((e=>e.x+e.width)(e),cl(e,t),n.east(),Za(),"east",nl(e,{left:0}),rl),vl=(e,t,n)=>Va(((e,t)=>e.x-t.width)(e,t),cl(e,t),n.west(),Qa(),"west",nl(e,{right:1}),rl),yl=()=>[dl,ul,hl,ml,fl,pl,gl,vl],_l=()=>[ul,dl,ml,hl,fl,pl,gl,vl],bl=()=>[hl,ml,dl,ul,pl,fl],wl=()=>[ml,hl,ul,dl,pl,fl],xl=()=>[dl,ul,hl,ml,fl,pl],Ml=()=>[ul,dl,ml,hl,fl,pl];var Sl=Object.freeze({__proto__:null,events:e=>Pi([zi(oi(),((t,n)=>{const r=e.channels,s=oe(r),i=n,o=((e,t)=>t.universal?e:U(e,(e=>N(t.channels,e))))(s,i);H(o,(e=>{const n=r[e],s=n.schema,o=Yr("channel["+e+"] data\nReceiver: "+Qi(t.element),s,i.data);n.onReceive(t,o)}))}))])}),Tl=[Kr("channels",Hr(Yn.value,Mr([Fa("onReceive"),hs("schema",Lr())])))];const Cl=(e,t,n)=>Gi(((r,s)=>{n(r,e,t)})),El=(e,t,n)=>((e,t,n)=>{const r=n.toString(),s=r.indexOf(")")+1,i=r.indexOf("("),o=r.substring(i+1,s-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:fo(o.slice(0,1).concat(o.slice(3)))}),e})(((r,...s)=>{const i=[r].concat(s);return r.config({name:_(e)}).fold((()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)}),(e=>{const n=Array.prototype.slice.call(i,1);return t.apply(void 0,[r,e.config,e.state].concat(n))}))}),n,t),kl=e=>({key:e,value:void 0}),Ll=(e,t,n,r,s,i,o)=>{const a=e=>ye(e,n)?e[n]():L.none(),l=ce(s,((e,t)=>El(n,e,t))),c={...ce(i,((e,t)=>go(e,t))),...l,revoke:x(kl,n),config:t=>{const r=Yr(n+"-config",e,t);return{key:n,value:{config:r,me:c,configAsRaw:Ut((()=>Yr(n+"-config",e,t))),initialConfig:t,state:o}}},schema:_(t),exhibit:(e,t)=>we(a(e),ge(r,"exhibit"),((e,n)=>n(t,e.config,e.state))).getOrThunk((()=>So({}))),name:_(n),handlers:e=>a(e).map((e=>ge(r,"events").getOr((()=>({})))(e.config,e.state))).getOr({})};return c},Al=e=>Ts(e),Dl=Mr([Xr("fields"),Xr("name"),hs("active",{}),hs("apis",{}),hs("state",wo),hs("extra",{})]),Ol=e=>{const t=Yr("Creating behaviour: "+e.name,Dl,e);return((e,t,n,r,s,i)=>{const o=Mr(e),a=us(t,[(l="config",c=e,is(l,Mr(c)))]);var l,c;return Ll(o,a,t,n,r,s,i)})(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Rl=Mr([Xr("branchKey"),Xr("branches"),Xr("name"),hs("active",{}),hs("apis",{}),hs("state",wo),hs("extra",{})]),Pl=e=>{const t=Yr("Creating behaviour: "+e.name,Rl,e);return((e,t,n,r,s,i)=>{const o=e,a=us(t,[is("config",e)]);return Ll(o,a,t,n,r,s,i)})($r(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Nl=_(void 0),Il=Ol({fields:Tl,name:"receiving",active:Sl});var zl=Object.freeze({__proto__:null,exhibit:(e,t)=>So({classes:[],styles:t.useFixed()?{}:{position:"relative"}})});const Bl=e=>e.dom.focus(),Fl=e=>{const t=rt(e).dom;return e.dom===t.activeElement},Hl=(e=Rn())=>L.from(e.dom.activeElement).map(De.fromDom),jl=e=>Hl(rt(e)).filter((t=>e.dom.contains(t.dom))),Ul=(e,t)=>{const n=rt(t),r=Hl(n).bind((e=>{const n=t=>je(e,t);return n(t)?L.some(t):((e,t)=>{const n=e=>{for(let r=0;r<e.childNodes.length;r++){const s=De.fromDom(e.childNodes[r]);if(t(s))return L.some(s);const i=n(e.childNodes[r]);if(i.isSome())return i}return L.none()};return n(e.dom)})(t,n)})),s=e(t);return r.each((e=>{Hl(n).filter((t=>je(t,e))).fold((()=>{Bl(e)}),v)})),s},Yl=(e,t,n,r,s)=>{const i=e=>e+"px";return{position:e,left:t.map(i),top:n.map(i),right:r.map(i),bottom:s.map(i)}},Vl=(e,t)=>{xt(e,(e=>({...e,position:L.some(e.position)}))(t))},$l=xs([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Wl=(e,t,n,r,s,i)=>{const o=t.rect,a=o.x-n,l=o.y-r,c=s-(a+o.width),d=i-(l+o.height),u=L.some(a),h=L.some(l),m=L.some(c),p=L.some(d),f=L.none();return((e,t,n,r,s,i,o,a,l)=>e.fold(t,n,r,s,i,o,a,l))(t.direction,(()=>Yl(e,u,h,f,f)),(()=>Yl(e,f,h,m,f)),(()=>Yl(e,u,f,f,p)),(()=>Yl(e,f,f,m,p)),(()=>Yl(e,u,h,f,f)),(()=>Yl(e,u,f,f,p)),(()=>Yl(e,u,h,f,f)),(()=>Yl(e,f,h,m,f)))},Gl=(e,t)=>e.fold((()=>{const e=t.rect;return Yl("absolute",L.some(e.x),L.some(e.y),L.none(),L.none())}),((e,n,r,s)=>Wl("absolute",t,e,n,r,s)),((e,n,r,s)=>Wl("fixed",t,e,n,r,s))),ql=(e,t)=>{const n=x(In,t),r=e.fold(n,n,(()=>{const e=Ln();return In(t).translate(-e.left,-e.top)})),s=jt(t),i=Rt(t);return zn(r.left,r.top,s,i)},Xl=(e,t)=>t.fold((()=>e.fold(Hn,Hn,zn)),(t=>e.fold(t,t,(()=>{const n=t(),r=Kl(e,n.x,n.y);return zn(r.left,r.top,n.width,n.height)})))),Kl=(e,t,n)=>{const r=Nt(t,n);return e.fold(_(r),_(r),(()=>{const e=Ln();return r.translate(-e.left,-e.top)}))};$l.none;const Jl=$l.relative,Zl=$l.fixed,Ql=(e,t)=>((e,t)=>({anchorBox:e,origin:t}))(e,t),ec="data-alloy-placement",tc=e=>ft(e,ec),nc=xs([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),rc=(e,t,n,r)=>{const s=e.bubble,i=s.offset,o=((e,t,n)=>{const r=(r,s)=>t[r].map((t=>{const i="top"===r||"bottom"===r,o=i?n.top:n.left,a=("left"===r||"top"===r?Math.max:Math.min)(t,s)+o;return i?tl(a,e.y,e.bottom):tl(a,e.x,e.right)})).getOr(s),s=r("left",e.x),i=r("top",e.y),o=r("right",e.right),a=r("bottom",e.bottom);return zn(s,i,o-s,a-i)})(r,e.restriction,i),a=e.x+i.left,l=e.y+i.top,c=zn(a,l,t,n),{originInBounds:d,sizeInBounds:u,visibleW:h,visibleH:m}=((e,t)=>{const{x:n,y:r,right:s,bottom:i}=t,{x:o,y:a,right:l,bottom:c,width:d,height:u}=e;return{originInBounds:o>=n&&o<=s&&a>=r&&a<=i,sizeInBounds:l<=s&&l>=n&&c<=i&&c>=r,visibleW:Math.min(d,o>=n?s-o:l-n),visibleH:Math.min(u,a>=r?i-a:c-r)}})(c,o),p=d&&u,f=p?c:((e,t)=>{const{x:n,y:r,right:s,bottom:i}=t,{x:o,y:a,width:l,height:c}=e,d=Math.max(n,s-l),u=Math.max(r,i-c),h=tl(o,n,d),m=tl(a,r,u),p=Math.min(h+l,s)-h,f=Math.min(m+c,i)-m;return zn(h,m,p,f)})(c,o),g=f.width>0&&f.height>0,{maxWidth:v,maxHeight:y}=((e,t,n)=>{const r=_(t.bottom-n.y),s=_(n.bottom-t.y),i=((e,t,n,r)=>e.fold(t,t,r,r,t,r,n,n))(e,s,s,r),o=_(t.right-n.x),a=_(n.right-t.x),l=((e,t,n,r)=>e.fold(t,r,t,r,n,n,t,r))(e,a,a,o);return{maxWidth:l,maxHeight:i}})(e.direction,f,r),b={rect:f,maxHeight:y,maxWidth:v,direction:e.direction,placement:e.placement,classes:{on:s.classesOn,off:s.classesOff},layout:e.label,testY:l};return p||e.alwaysFit?nc.fit(b):nc.nofit(b,h,m,g)},sc=e=>{const t=ws(L.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(L.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(L.some(e))}}},ic=()=>sc((e=>e.unbind())),oc=()=>{const e=sc(v);return{...e,on:t=>e.get().each(t)}},ac=E,lc=(e,t,n)=>((e,t,n,r)=>bn(e,t,n,r,!1))(e,t,ac,n),cc=(e,t,n)=>((e,t,n,r)=>bn(e,t,n,r,!0))(e,t,ac,n),dc=_n,uc=["top","bottom","right","left"],hc="data-alloy-transition-timer",mc=(e,t)=>((e,t)=>X(t,(t=>Uo(e,t))))(e,t.classes),pc=(e,t)=>{const n=e=>parseFloat(e).toFixed(3);return pe(t,((t,r)=>!((e,t,n=w)=>we(e,t,n).getOr(e.isNone()&&t.isNone()))(e[r].map(n),t.map(n)))).isSome()},fc=(e,t)=>{const n=ic(),r=ic();let s;const o=t=>{var n;const r=null!==(n=t.raw.pseudoElement)&&void 0!==n?n:"";return je(t.target,e)&&!ke(r)&&N(uc,t.raw.propertyName)},a=i=>{if(h(i)||o(i)){n.clear(),r.clear();const o=null==i?void 0:i.raw.type;(h(o)||o===Zs())&&(clearTimeout(s),vt(e,hc),Vo(e,t.classes))}},l=lc(e,Qs(),(t=>{o(t)&&(l.unbind(),n.set(lc(e,Zs(),a)),r.set(lc(e,Js(),a)))})),c=(e=>{const t=t=>{const n=Mt(e,t).split(/\s*,\s*/);return U(n,ke)},n=e=>{if(i(e)&&/^[\d.]+/.test(e)){const t=parseFloat(e);return Ce(e,"ms")?t:1e3*t}return 0},r=t("transition-delay"),s=t("transition-duration");return V(s,((e,t,s)=>{const i=n(r[s])+n(t);return Math.max(e,i)}),0)})(e);requestAnimationFrame((()=>{s=setTimeout(a,c+17),ht(e,hc,s)}))},gc=(e,t,n,r,s,i)=>{const o=((e,t,n)=>n.exists((n=>{const r=e.mode;return"all"===r||n[r]!==t[r]})))(r,s,i);if(o||mc(e,r)){bt(e,"position",n.position);const i=ql(t,e),a=Gl(t,{...s,rect:i}),l=Z(uc,(e=>a[e]));pc(n,l)&&(xt(e,l),o&&((e,t)=>{Yo(e,t.classes),ft(e,hc).each((t=>{clearTimeout(parseInt(t,10)),vt(e,hc)})),fc(e,t)})(e,r),Lt(e))}else Vo(e,r.classes)},vc=(e,t,n,r)=>{kt(t,"max-height"),kt(t,"max-width");const s={width:jt(i=t),height:Rt(i)};var i;return((e,t,n,r,s,i)=>{const o=r.width,a=r.height,l=(t,l,c,d,u)=>{const h=t(n,r,s,e,i),m=rc(h,o,a,i);return m.fold(_(m),((e,t,n,r)=>(u===r?n>d||t>c:!u&&r)?m:nc.nofit(l,c,d,u)))},c=V(t,((e,t)=>{const n=x(l,t);return e.fold(_(e),n)}),nc.nofit({rect:n,maxHeight:r.height,maxWidth:r.width,direction:Wa(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1));return c.fold(b,b)})(t,r.preference,e,s,n,r.bounds)},yc=(e,t)=>{((e,t)=>{ht(e,ec,t)})(e,t.placement)},_c=(e,t)=>{((e,t)=>{const n=Dt.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);bt(e,"max-height",n+"px")})(e,Math.floor(t))},bc=_(((e,t)=>{_c(e,t),wt(e,{"overflow-x":"hidden","overflow-y":"auto"})})),wc=_(((e,t)=>{_c(e,t)})),xc=(e,t,n)=>void 0===e[t]?n:e[t],Mc=(e,t,n,r)=>{const s=vc(e,t,n,r);return((e,t,n)=>{const r=Gl(n.origin,t);n.transition.each((s=>{gc(e,n.origin,r,s,t,n.lastPlacement)})),Vl(e,r)})(t,s,r),yc(t,s),((e,t)=>{const n=t.classes;Vo(e,n.off),Yo(e,n.on)})(t,s),((e,t,n)=>{(0,n.maxHeightFunction)(e,t.maxHeight)})(t,s,r),((e,t,n)=>{(0,n.maxWidthFunction)(e,t.maxWidth)})(t,s,r),{layout:s.layout,placement:s.placement}},Sc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Tc=(e,t,n,r=1)=>{const s=e*r,i=t*r,o=e=>ge(n,e).getOr([]),a=(e,t,n)=>{const r=J(Sc,n);return{offset:Nt(e,t),classesOn:q(n,o),classesOff:q(r,o)}};return{southeast:()=>a(-e,t,["top","alignLeft"]),southwest:()=>a(e,t,["top","alignRight"]),south:()=>a(-e/2,t,["top","alignCentre"]),northeast:()=>a(-e,-t,["bottom","alignLeft"]),northwest:()=>a(e,-t,["bottom","alignRight"]),north:()=>a(-e/2,-t,["bottom","alignCentre"]),east:()=>a(e,-t/2,["valignCentre","left"]),west:()=>a(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>a(s,i,["top","alignLeft","inset"]),insetNorthwest:()=>a(-s,i,["top","alignRight","inset"]),insetNorth:()=>a(-s/2,i,["top","alignCentre","inset"]),insetSoutheast:()=>a(s,-i,["bottom","alignLeft","inset"]),insetSouthwest:()=>a(-s,-i,["bottom","alignRight","inset"]),insetSouth:()=>a(-s/2,-i,["bottom","alignCentre","inset"]),insetEast:()=>a(-s,-i/2,["valignCentre","right","inset"]),insetWest:()=>a(s,-i/2,["valignCentre","left","inset"])}},Cc=()=>Tc(0,0,{}),Ec=b,kc=(e,t)=>n=>"rtl"===Lc(n)?t:e,Lc=e=>"rtl"===Mt(e,"direction")?"rtl":"ltr";var Ac;!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(Ac||(Ac={}));const Dc="data-alloy-vertical-dir",Oc=e=>pa(e,(e=>Pe(e)&&pt(e,"data-alloy-vertical-dir")===Ac.BottomToTop)),Rc=()=>us("layouts",[Xr("onLtr"),Xr("onRtl"),ss("onBottomLtr"),ss("onBottomRtl")]),Pc=(e,t,n,r,s,i,o)=>{const a=o.map(Oc).getOr(!1),l=t.layouts.map((t=>t.onLtr(e))),c=t.layouts.map((t=>t.onRtl(e))),d=a?t.layouts.bind((t=>t.onBottomLtr.map((t=>t(e))))).or(l).getOr(s):l.getOr(n),u=a?t.layouts.bind((t=>t.onBottomRtl.map((t=>t(e))))).or(c).getOr(i):c.getOr(r);return kc(d,u)(e)};var Nc=[Xr("hotspot"),ss("bubble"),hs("overrides",{}),Rc(),ja("placement",((e,t,n)=>{const r=t.hotspot,s=ql(n,r.element),i=Pc(e.element,t,xl(),Ml(),bl(),wl(),L.some(t.hotspot.element));return L.some(Ec({anchorBox:s,bubble:t.bubble.getOr(Cc()),overrides:t.overrides,layouts:i,placer:L.none()}))}))];var Ic=[Xr("x"),Xr("y"),hs("height",0),hs("width",0),hs("bubble",Cc()),hs("overrides",{}),Rc(),ja("placement",((e,t,n)=>{const r=Kl(n,t.x,t.y),s=zn(r.left,r.top,t.width,t.height),i=Pc(e.element,t,yl(),_l(),yl(),_l(),L.none());return L.some(Ec({anchorBox:s,bubble:t.bubble,overrides:t.overrides,layouts:i,placer:L.none()}))}))];const zc=xs([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Bc=e=>e.fold(b,((e,t,n)=>e.translate(-t,-n))),Fc=e=>e.fold(b,b),Hc=e=>V(e,((e,t)=>e.translate(t.left,t.top)),Nt(0,0)),jc=e=>{const t=F(e,Fc);return Hc(t)},Uc=zc.screen,Yc=zc.absolute,Vc=(e,t,n)=>{const r=Ye(e.element),s=Ln(r),i=((e,t,n)=>{const r=We(n.root).dom;return L.from(r.frameElement).map(De.fromDom).filter((t=>{const n=Ye(t),r=Ye(e.element);return je(n,r)})).map(zt)})(e,0,n).getOr(s);return Yc(i,s.left,s.top)},$c=(e,t,n,r)=>{const s=Uc(Nt(e,t));return L.some(((e,t,n)=>({point:e,width:t,height:n}))(s,n,r))},Wc=(e,t,n,r,s)=>e.map((e=>{const i=[t,e.point],o=(a=()=>jc(i),l=()=>jc(i),c=()=>(e=>{const t=F(e,Bc);return Hc(t)})(i),r.fold(a,l,c));var a,l,c;const d=((e,t,n,r)=>({x:e,y:t,width:n,height:r}))(o.left,o.top,e.width,e.height),u=n.showAbove?bl():xl(),h=n.showAbove?wl():Ml(),m=Pc(s,n,u,h,u,h,L.none());return Ec({anchorBox:d,bubble:n.bubble.getOr(Cc()),overrides:n.overrides,layouts:m,placer:L.none()})}));var Gc=[Xr("node"),Xr("root"),ss("bubble"),Rc(),hs("overrides",{}),hs("showAbove",!1),ja("placement",((e,t,n)=>{const r=Vc(e,0,t);return t.node.filter(lt).bind((s=>{const i=s.dom.getBoundingClientRect(),o=$c(i.left,i.top,i.width,i.height),a=t.node.getOr(e.element);return Wc(o,r,t,n,a)}))}))];const qc=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),Xc=xs([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Kc=(Xc.before,Xc.on,Xc.after,e=>e.fold(b,b,b)),Jc=xs([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Zc={domRange:Jc.domRange,relative:Jc.relative,exact:Jc.exact,exactFromRange:e=>Jc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>De.fromDom(e.startContainer),relative:(e,t)=>Kc(e),exact:(e,t,n,r)=>e}))(e);return We(t)},range:qc},Qc=(e,t,n)=>{const r=e.document.createRange();var s;return s=r,t.fold((e=>{s.setStartBefore(e.dom)}),((e,t)=>{s.setStart(e.dom,t)}),(e=>{s.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(r,n),r},ed=(e,t,n,r,s)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,s),i},td=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),nd=xs([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),rd=(e,t,n)=>t(De.fromDom(n.startContainer),n.startOffset,De.fromDom(n.endContainer),n.endOffset),sd=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:_(e),rtl:L.none}),relative:(t,n)=>({ltr:Ut((()=>Qc(e,t,n))),rtl:Ut((()=>L.some(Qc(e,n,t))))}),exact:(t,n,r,s)=>({ltr:Ut((()=>ed(e,t,n,r,s))),rtl:Ut((()=>L.some(ed(e,r,s,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>nd.rtl(De.fromDom(e.endContainer),e.endOffset,De.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>rd(0,nd.ltr,n)));return rd(0,nd.ltr,n)})(0,n)},id=(e,t)=>sd(e,t).match({ltr:(t,n,r,s)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,s),i},rtl:(t,n,r,s)=>{const i=e.document.createRange();return i.setStart(r.dom,s),i.setEnd(t.dom,n),i}});nd.ltr,nd.rtl;const od=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return He(n)?[]:F(n.querySelectorAll(e),De.fromDom)})(t,e),ad=(e,t,n,r)=>{const s=((e,t,n,r)=>{const s=Ye(e).dom.createRange();return s.setStart(e.dom,t),s.setEnd(n.dom,r),s})(e,t,n,r),i=je(e,n)&&t===r;return s.collapsed&&!i},ld=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return L.some(qc(De.fromDom(t.startContainer),t.startOffset,De.fromDom(n.endContainer),n.endOffset))}return L.none()},cd=e=>{if(null===e.anchorNode||null===e.focusNode)return ld(e);{const t=De.fromDom(e.anchorNode),n=De.fromDom(e.focusNode);return ad(t,e.anchorOffset,n,e.focusOffset)?L.some(qc(t,e.anchorOffset,n,e.focusOffset)):ld(e)}},dd=e=>(e=>L.from(e.getSelection()))(e).filter((e=>e.rangeCount>0)).bind(cd),ud=(e,t)=>(e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?L.some(n).map(td):L.none()})(id(e,t)),hd=(e,t)=>(e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?L.some(t).map(td):L.none()})(id(e,t)),md=((e,t)=>{const n=t=>e(t)?L.from(t.dom.nodeValue):L.none();return{get:r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},getOption:n,set:(n,r)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}})(Ne,"text"),pd=(e,t)=>({element:e,offset:t}),fd=(e,t)=>{const n=Ke(e);if(0===n.length)return pd(e,t);if(t<n.length)return pd(n[t],0);{const e=n[n.length-1],t=Ne(e)?(e=>md.get(e))(e).length:Ke(e).length;return pd(e,t)}},gd=(e,t)=>Ne(e)?pd(e,t):fd(e,t),vd=(e,t)=>t.getSelection.getOrThunk((()=>()=>dd(e)))().map((e=>{const t=gd(e.start,e.soffset),n=gd(e.finish,e.foffset);return Zc.range(t.element,t.offset,n.element,n.offset)}));var yd=[ss("getSelection"),Xr("root"),ss("bubble"),Rc(),hs("overrides",{}),hs("showAbove",!1),ja("placement",((e,t,n)=>{const r=We(t.root).dom,s=Vc(e,0,t),i=vd(r,t).bind((e=>{const t=hd(r,Zc.exactFromRange(e)).orThunk((()=>{const t=De.fromText("\ufeff");xn(e.start,t);const n=ud(r,Zc.exact(t,0,t,1));return kn(t),n}));return t.bind((e=>$c(e.left,e.top,e.width,e.height)))})),o=vd(r,t).bind((e=>Pe(e.start)?L.some(e.start):qe(e.start))).getOr(e.element);return Wc(i,s,t,n,o)}))];const _d="link-layout",bd=e=>e.x+e.width,wd=(e,t)=>e.x-t.width,xd=(e,t)=>e.y-t.height+e.height,Md=e=>e.y,Sd=(e,t,n)=>Va(bd(e),Md(e),n.southeast(),Wa(),"southeast",nl(e,{left:0,top:2}),_d),Td=(e,t,n)=>Va(wd(e,t),Md(e),n.southwest(),Ga(),"southwest",nl(e,{right:1,top:2}),_d),Cd=(e,t,n)=>Va(bd(e),xd(e,t),n.northeast(),qa(),"northeast",nl(e,{left:0,bottom:3}),_d),Ed=(e,t,n)=>Va(wd(e,t),xd(e,t),n.northwest(),Xa(),"northwest",nl(e,{right:1,bottom:3}),_d),kd=()=>[Sd,Td,Cd,Ed],Ld=()=>[Td,Sd,Ed,Cd];var Ad=[Xr("item"),Rc(),hs("overrides",{}),ja("placement",((e,t,n)=>{const r=ql(n,t.item.element),s=Pc(e.element,t,kd(),Ld(),kd(),Ld(),L.none());return L.some(Ec({anchorBox:r,bubble:Cc(),overrides:t.overrides,layouts:s,placer:L.none()}))}))],Dd=$r("type",{selection:yd,node:Gc,hotspot:Nc,submenu:Ad,makeshift:Ic});const Od=[rs("classes",Or),gs("mode","all",["all","layout","placement"])],Rd=[hs("useFixed",C),ss("getBounds")],Pd=[Kr("anchor",Dd),us("transition",Od)],Nd=(e,t,n,r,s,i,o)=>((e,t,n,r,s,i,o,a)=>{const l=xc(o,"maxHeightFunction",bc()),c=xc(o,"maxWidthFunction",v),d=e.anchorBox,u=e.origin,h={bounds:Xl(u,i),origin:u,preference:r,maxHeightFunction:l,maxWidthFunction:c,lastPlacement:s,transition:a};return Mc(d,t,n,h)})(Ql(n.anchorBox,t),s.element,n.bubble,n.layouts,i,r,n.overrides,o),Id=(e,t,n,r,s,i)=>{const o=i.map(Bn);return zd(e,t,n,r,s,o)},zd=(e,t,n,r,s,i)=>{const o=Yr("placement.info",Sr(Pd),s),a=o.anchor,l=r.element,c=n.get(r.uid);Ul((()=>{bt(l,"position","fixed");const s=Tt(l,"visibility");bt(l,"visibility","hidden");const d=t.useFixed()?(()=>{const e=document.documentElement;return Zl(0,0,e.clientWidth,e.clientHeight)})():(e=>{const t=zt(e.element),n=e.element.dom.getBoundingClientRect();return Jl(t.left,t.top,n.width,n.height)})(e),u=a.placement,h=i.map(_).or(t.getBounds);u(e,a,d).each((t=>{const s=t.placer.getOr(Nd)(e,d,t,h,r,c,o.transition);n.set(r.uid,s)})),s.fold((()=>{kt(l,"visibility")}),(e=>{bt(l,"visibility",e)})),Tt(l,"left").isNone()&&Tt(l,"top").isNone()&&Tt(l,"right").isNone()&&Tt(l,"bottom").isNone()&&_e(Tt(l,"position"),"fixed")&&kt(l,"position")}),l)};var Bd=Object.freeze({__proto__:null,position:(e,t,n,r,s)=>{Id(e,t,n,r,s,L.none())},positionWithin:Id,positionWithinBounds:zd,getMode:(e,t,n)=>t.useFixed()?"fixed":"absolute",reset:(e,t,n,r)=>{const s=r.element;H(["position","left","right","top","bottom"],(e=>kt(s,e))),(e=>{vt(e,ec)})(s),n.clear(r.uid)}});const Fd=Ol({fields:Rd,name:"positioning",active:zl,apis:Bd,state:Object.freeze({__proto__:null,init:()=>{let e={};return xo({readState:()=>e,clear:t=>{m(t)?delete e[t]:e={}},set:(t,n)=>{e[t]=n},get:t=>ge(e,t)})}})}),Hd=e=>e.getSystem().isConnected(),jd=e=>{ki(e,_i());const t=e.components();H(t,jd)},Ud=e=>{const t=e.components();H(t,Ud),ki(e,yi())},Yd=(e,t)=>{e.getSystem().addToWorld(t),lt(e.element)&&Ud(t)},Vd=e=>{jd(e),e.getSystem().removeFromWorld(e)},$d=(e,t)=>{Tn(e.element,t.element)},Wd=(e,t,n)=>{const r=e.components();(e=>{H(e.components(),(e=>kn(e.element))),En(e.element),e.syncComponents()})(e);const s=n(t),i=J(r,s);H(i,(t=>{jd(t),e.getSystem().removeFromWorld(t)})),H(s,(t=>{Hd(t)?$d(e,t):(e.getSystem().addToWorld(t),$d(e,t),lt(e.element)&&Ud(t))})),e.syncComponents()},Gd=(e,t)=>{qd(e,t,Tn)},qd=(e,t,n)=>{e.getSystem().addToWorld(t),n(e.element,t.element),lt(e.element)&&Ud(t),e.syncComponents()},Xd=e=>{jd(e),kn(e.element),e.getSystem().removeFromWorld(e)},Kd=e=>{const t=Ge(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()));Xd(e),t.each((e=>{e.syncComponents()}))},Jd=e=>{const t=e.components();H(t,Xd),En(e.element),e.syncComponents()},Zd=(e,t)=>{Qd(e,t,Tn)},Qd=(e,t,n)=>{n(e,t.element);const r=Ke(t.element);H(r,(e=>{t.getByDom(e).each(Ud)}))},eu=e=>{const t=Ke(e.element);H(t,(t=>{e.getByDom(t).each(jd)})),kn(e.element)},tu=(e,t,n,r)=>{n.get().each((t=>{Jd(e)}));const s=t.getAttachPoint(e);Gd(s,e);const i=e.getSystem().build(r);return Gd(e,i),n.set(i),i},nu=(e,t,n,r)=>{const s=tu(e,t,n,r);return t.onOpen(e,s),s},ru=(e,t,n)=>{n.get().each((r=>{Jd(e),Kd(e),t.onClose(e,r),n.clear()}))},su=(e,t,n)=>n.isOpen(),iu=(e,t,n)=>{const r=t.getAttachPoint(e);bt(e.element,"position",Fd.getMode(r)),((e,t,n,r)=>{Tt(e.element,t).fold((()=>{vt(e.element,n)}),(t=>{ht(e.element,n,t)})),bt(e.element,t,r)})(e,"visibility",t.cloakVisibilityAttr,"hidden")},ou=(e,t,n)=>{(e=>I(["top","left","right","bottom"],(t=>Tt(e,t).isSome())))(e.element)||kt(e.element,"position"),((e,t,n)=>{ft(e.element,n).fold((()=>kt(e.element,t)),(n=>bt(e.element,t,n)))})(e,"visibility",t.cloakVisibilityAttr)};var au=Object.freeze({__proto__:null,cloak:iu,decloak:ou,open:nu,openWhileCloaked:(e,t,n,r,s)=>{iu(e,t),nu(e,t,n,r),s(),ou(e,t)},close:ru,isOpen:su,isPartOf:(e,t,n,r)=>su(0,0,n)&&n.get().exists((n=>t.isPartOf(e,n,r))),getState:(e,t,n)=>n.get(),setContent:(e,t,n,r)=>n.get().map((()=>tu(e,t,n,r)))});var lu=Object.freeze({__proto__:null,events:(e,t)=>Pi([zi(ui(),((n,r)=>{ru(n,e,t)}))])}),cu=[za("onOpen"),za("onClose"),Xr("isPartOf"),Xr("getAttachPoint"),hs("cloakVisibilityAttr","data-precloak-visibility")];var du=Object.freeze({__proto__:null,init:()=>{const e=oc(),t=_("not-implemented");return xo({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const uu=Ol({fields:cu,name:"sandboxing",active:lu,apis:au,state:du}),hu=_("dismiss.popups"),mu=_("reposition.popups"),pu=_("mouse.released"),fu=Mr([hs("isExtraPart",C),us("fireEventInstead",[hs("event",bi())])]),gu=e=>{const t=Yr("Dismissal",fu,e);return{[hu()]:{schema:Mr([Xr("target")]),onReceive:(e,n)=>{if(uu.isOpen(e)){uu.isPartOf(e,n.target)||t.isExtraPart(e,n.target)||t.fireEventInstead.fold((()=>uu.close(e)),(t=>ki(e,t.event)))}}}}},vu=Mr([us("fireEventInstead",[hs("event",wi())]),es("doReposition")]),yu=e=>{const t=Yr("Reposition",vu,e);return{[mu()]:{onReceive:e=>{uu.isOpen(e)&&t.fireEventInstead.fold((()=>t.doReposition(e)),(t=>ki(e,t.event)))}}}},_u=(e,t,n)=>{t.store.manager.onLoad(e,t,n)},bu=(e,t,n)=>{t.store.manager.onUnload(e,t,n)};var wu=Object.freeze({__proto__:null,onLoad:_u,onUnload:bu,setValue:(e,t,n,r)=>{t.store.manager.setValue(e,t,n,r)},getValue:(e,t,n)=>t.store.manager.getValue(e,t,n),getState:(e,t,n)=>n});var xu=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.resetOnDom?[$i(((n,r)=>{_u(n,e,t)})),Wi(((n,r)=>{bu(n,e,t)}))]:[Cl(e,t,_u)];return Pi(n)}});const Mu=()=>{const e=ws(null);return xo({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},Su=()=>{const e=ws({}),t=ws({});return xo({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:n=>ge(e.get(),n).orThunk((()=>ge(t.get(),n))),update:n=>{const r=e.get(),s=t.get(),i={},o={};H(n,(e=>{i[e.value]=e,ge(e,"meta").each((t=>{ge(t,"text").each((t=>{o[t]=e}))}))})),e.set({...r,...i}),t.set({...s,...o})},clear:()=>{e.set({}),t.set({})}})};var Tu=Object.freeze({__proto__:null,memory:Mu,dataset:Su,manual:()=>xo({readState:v}),init:e=>e.store.manager.state(e)});const Cu=(e,t,n,r)=>{const s=t.store;n.update([r]),s.setValue(e,r),t.onSetValue(e,r)};var Eu=[ss("initialValue"),Xr("getFallbackEntry"),Xr("getDataKey"),Xr("setValue"),ja("manager",{setValue:Cu,getValue:(e,t,n)=>{const r=t.store,s=r.getDataKey(e);return n.lookup(s).getOrThunk((()=>r.getFallbackEntry(s)))},onLoad:(e,t,n)=>{t.store.initialValue.each((r=>{Cu(e,t,n,r)}))},onUnload:(e,t,n)=>{n.clear()},state:Su})];var ku=[Xr("getValue"),hs("setValue",v),ss("initialValue"),ja("manager",{setValue:(e,t,n,r)=>{t.store.setValue(e,r),t.onSetValue(e,r)},getValue:(e,t,n)=>t.store.getValue(e),onLoad:(e,t,n)=>{t.store.initialValue.each((n=>{t.store.setValue(e,n)}))},onUnload:v,state:wo.init})];var Lu=[ss("initialValue"),ja("manager",{setValue:(e,t,n,r)=>{n.set(r),t.onSetValue(e,r)},getValue:(e,t,n)=>n.get(),onLoad:(e,t,n)=>{t.store.initialValue.each((e=>{n.isNotSet()&&n.set(e)}))},onUnload:(e,t,n)=>{n.clear()},state:Mu})],Au=[ms("store",{mode:"memory"},$r("mode",{memory:Lu,manual:ku,dataset:Eu})),za("onSetValue"),hs("resetOnDom",!1)];const Du=Ol({fields:Au,name:"representing",active:xu,apis:wu,extra:{setValueFrom:(e,t)=>{const n=Du.getValue(t);Du.setValue(e,n)}},state:Tu}),Ou=(e,t)=>bs(e,{},F(t,(t=>{return n=t.name(),r="Cannot configure "+t.name()+" for "+e,Wr(n,n,{tag:"option",process:{}},gr((e=>Zn("The field: "+n+" is forbidden. "+r))));var n,r})).concat([Gr("dump",b)])),Ru=e=>e.dump,Pu=(e,t)=>({...Al(t),...e.dump}),Nu=Ou,Iu=Pu,zu="placeholder",Bu=xs([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Fu=e=>ve(e,"uiType"),Hu=(e,t,n,r)=>Fu(n)&&n.uiType===zu?((e,t,n,r)=>e.exists((e=>e!==n.owner))?Bu.single(!0,_(n)):ge(r,n.name).fold((()=>{throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+oe(r)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(e=>e.replace())))(e,0,n,r):Bu.single(!1,_(n)),ju=(e,t,n,r)=>Hu(e,0,n,r).fold(((s,i)=>{const o=Fu(n)?i(t,n.config,n.validated):i(t),a=ge(o,"components").getOr([]),l=q(a,(n=>ju(e,t,n,r)));return[{...o,components:l}]}),((e,r)=>{if(Fu(n)){const e=r(t,n.config,n.validated);return n.validated.preprocess.getOr(b)(e)}return r(t)})),Uu=(e,t,n,r)=>{const s=ce(r,((e,t)=>((e,t)=>{let n=!1;return{name:_(e),required:()=>t.fold(((e,t)=>e),((e,t)=>e)),used:()=>n,replace:()=>{if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t}}})(t,e))),i=((e,t,n,r)=>q(n,(n=>ju(e,t,n,r))))(e,t,n,s);return le(s,(n=>{if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),i},Yu=Bu.single,Vu=Bu.multiple,$u=_(zu),Wu=xs([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Gu=hs("factory",{sketch:b}),qu=hs("schema",[]),Xu=Xr("name"),Ku=Wr("pname","pname",cr((e=>"<alloy."+ro(e.name)+">")),Lr()),Ju=Gr("schema",(()=>[ss("preprocess")])),Zu=hs("defaults",_({})),Qu=hs("overrides",_({})),eh=Sr([Gu,qu,Xu,Ku,Zu,Qu]),th=Sr([Gu,qu,Xu,Zu,Qu]),nh=Sr([Gu,qu,Xu,Ku,Zu,Qu]),rh=Sr([Gu,Ju,Xu,Xr("unit"),Ku,Zu,Qu]),sh=e=>e.fold(L.some,L.none,L.some,L.some),ih=e=>{const t=e=>e.name;return e.fold(t,t,t,t)},oh=(e,t)=>n=>{const r=Yr("Converting part type",t,n);return e(r)},ah=oh(Wu.required,eh),lh=oh(Wu.external,th),ch=oh(Wu.optional,nh),dh=oh(Wu.group,rh),uh=_("entirety");var hh=Object.freeze({__proto__:null,required:ah,external:lh,optional:ch,group:dh,asNamedPart:sh,name:ih,asCommon:e=>e.fold(b,b,b,b),original:uh});const mh=(e,t,n,r)=>ar(t.defaults(e,n,r),n,{uid:e.partUids[t.name]},t.overrides(e,n,r)),ph=(e,t)=>{const n={};return H(t,(t=>{sh(t).each((t=>{const r=fh(e,t.pname);n[t.name]=n=>{const s=Yr("Part: "+t.name+" in "+e,Sr(t.schema),n);return{...r,config:n,validated:s}}}))})),n},fh=(e,t)=>({uiType:$u(),owner:e,name:t}),gh=(e,t,n)=>({uiType:$u(),owner:e,name:t,config:n,validated:{}}),vh=e=>q(e,(e=>e.fold(L.none,L.some,L.none,L.none).map((e=>ts(e.name,e.schema.concat([Ua(uh())])))).toArray())),yh=e=>F(e,ih),_h=(e,t,n)=>((e,t,n)=>{const r={},s={};return H(n,(e=>{e.fold((e=>{r[e.pname]=Yu(!0,((t,n,r)=>e.factory.sketch(mh(t,e,n,r))))}),(e=>{const n=t.parts[e.name];s[e.name]=_(e.factory.sketch(mh(t,e,n[uh()]),n))}),(e=>{r[e.pname]=Yu(!1,((t,n,r)=>e.factory.sketch(mh(t,e,n,r))))}),(e=>{r[e.pname]=Vu(!0,((t,n,r)=>{const s=t[e.name];return F(s,(n=>e.factory.sketch(ar(e.defaults(t,n,r),n,e.overrides(t,n)))))}))}))})),{internals:_(r),externals:_(s)}})(0,t,n),bh=(e,t,n)=>Uu(L.some(e),t,t.components,n),wh=(e,t,n)=>{const r=t.partUids[n];return e.getSystem().getByUid(r).toOptional()},xh=(e,t,n)=>wh(e,t,n).getOrDie("Could not find part: "+n),Mh=(e,t,n)=>{const r={},s=t.partUids,i=e.getSystem();return H(n,(e=>{r[e]=_(i.getByUid(s[e]))})),r},Sh=(e,t)=>{const n=e.getSystem();return ce(t.partUids,((e,t)=>_(n.getByUid(e))))},Th=e=>oe(e.partUids),Ch=(e,t,n)=>{const r={},s=t.partUids,i=e.getSystem();return H(n,(e=>{r[e]=_(i.getByUid(s[e]).getOrDie())})),r},Eh=(e,t)=>{const n=yh(t);return Ts(F(n,(t=>({key:t,value:e+"-"+t}))))},kh=e=>Wr("partUids","partUids",ur((t=>Eh(t.uid,e))),Lr());var Lh=Object.freeze({__proto__:null,generate:ph,generateOne:gh,schemas:vh,names:yh,substitutes:_h,components:bh,defaultUids:Eh,defaultUidsSchema:kh,getAllParts:Sh,getAllPartNames:Th,getPart:wh,getPartOrDie:xh,getParts:Mh,getPartsOrDie:Ch});const Ah=(e,t,n,r,s)=>{const i=((e,t)=>(e.length>0?[ts("parts",e)]:[]).concat([Xr("uid"),hs("dom",{}),hs("components",[]),Ua("originalSpec"),hs("debug.sketcher",{})]).concat(t))(r,s);return Yr(e+" [SpecSchema]",Mr(i.concat(t)),n)},Dh=(e,t,n,r,s)=>{const i=Oh(s),o=vh(n),a=kh(n),l=Ah(e,t,i,o,[a]),c=_h(0,l,n);return r(l,bh(e,l,c.internals()),i,c.externals())},Oh=e=>(e=>ve(e,"uid"))(e)?e:{...e,uid:uo("uid")},Rh=Mr([Xr("name"),Xr("factory"),Xr("configFields"),hs("apis",{}),hs("extraApis",{})]),Ph=Mr([Xr("name"),Xr("factory"),Xr("configFields"),Xr("partFields"),hs("apis",{}),hs("extraApis",{})]),Nh=e=>{const t=Yr("Sketcher for "+e.name,Rh,e),n=ce(t.apis,bo),r=ce(t.extraApis,((e,t)=>go(e,t)));return{name:t.name,configFields:t.configFields,sketch:e=>((e,t,n,r)=>{const s=Oh(r);return n(Ah(e,t,s,[],[]),s)})(t.name,t.configFields,t.factory,e),...n,...r}},Ih=e=>{const t=Yr("Sketcher for "+e.name,Ph,e),n=ph(t.name,t.partFields),r=ce(t.apis,bo),s=ce(t.extraApis,((e,t)=>go(e,t)));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:e=>Dh(t.name,t.configFields,t.partFields,t.factory,e),parts:n,...r,...s}},zh=e=>Be("input")(e)&&"radio"!==pt(e,"type")||Be("textarea")(e);var Bh=Object.freeze({__proto__:null,getCurrent:(e,t,n)=>t.find(e)});const Fh=[Xr("find")],Hh=Ol({fields:Fh,name:"composing",apis:Bh}),jh=["input","button","textarea","select"],Uh=(e,t,n)=>{(t.disabled()?qh:Xh)(e,t)},Yh=(e,t)=>!0===t.useNative&&N(jh,Oe(e.element)),Vh=e=>{ht(e.element,"disabled","disabled")},$h=e=>{vt(e.element,"disabled")},Wh=e=>{ht(e.element,"aria-disabled","true")},Gh=e=>{ht(e.element,"aria-disabled","false")},qh=(e,t,n)=>{t.disableClass.each((t=>{Ho(e.element,t)}));(Yh(e,t)?Vh:Wh)(e),t.onDisabled(e)},Xh=(e,t,n)=>{t.disableClass.each((t=>{jo(e.element,t)}));(Yh(e,t)?$h:Gh)(e),t.onEnabled(e)},Kh=(e,t)=>Yh(e,t)?(e=>gt(e.element,"disabled"))(e):(e=>"true"===pt(e.element,"aria-disabled"))(e);var Jh=Object.freeze({__proto__:null,enable:Xh,disable:qh,isDisabled:Kh,onLoad:Uh,set:(e,t,n,r)=>{(r?qh:Xh)(e,t)}});var Zh=Object.freeze({__proto__:null,exhibit:(e,t)=>So({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Pi([Ni(ai(),((t,n)=>Kh(t,e))),Cl(e,t,Uh)])}),Qh=[ys("disabled",C),hs("useNative",!0),ss("disableClass"),za("onDisabled"),za("onEnabled")];const em=Ol({fields:Qh,name:"disabling",active:Zh,apis:Jh}),tm=(e,t,n,r)=>{const s=od(e.element,"."+t.highlightClass);H(s,(n=>{I(r,(e=>e.element===n))||(jo(n,t.highlightClass),e.getSystem().getByDom(n).each((n=>{t.onDehighlight(e,n),ki(n,Ei())})))}))},nm=(e,t,n,r)=>{tm(e,t,0,[r]),rm(e,t,n,r)||(Ho(r.element,t.highlightClass),t.onHighlight(e,r),ki(r,Ci()))},rm=(e,t,n,r)=>Uo(r.element,t.highlightClass),sm=(e,t,n,r)=>{const s=od(e.element,"."+t.itemClass);return L.from(s[r]).fold((()=>Yn.error(new Error("No element found with index "+r))),e.getSystem().getByDom)},im=(e,t,n)=>va(e.element,"."+t.itemClass).bind((t=>e.getSystem().getByDom(t).toOptional())),om=(e,t,n)=>{const r=od(e.element,"."+t.itemClass);return(r.length>0?L.some(r[r.length-1]):L.none()).bind((t=>e.getSystem().getByDom(t).toOptional()))},am=(e,t,n,r)=>{const s=od(e.element,"."+t.itemClass),i=W(s,(e=>Uo(e,t.highlightClass)));return i.bind((t=>{const n=el(t,r,0,s.length-1);return e.getSystem().getByDom(s[n]).toOptional()}))},lm=(e,t,n)=>{const r=od(e.element,"."+t.itemClass);return be(F(r,(t=>e.getSystem().getByDom(t).toOptional())))};var cm=Object.freeze({__proto__:null,dehighlightAll:(e,t,n)=>tm(e,t,0,[]),dehighlight:(e,t,n,r)=>{rm(e,t,n,r)&&(jo(r.element,t.highlightClass),t.onDehighlight(e,r),ki(r,Ei()))},highlight:nm,highlightFirst:(e,t,n)=>{im(e,t).each((r=>{nm(e,t,n,r)}))},highlightLast:(e,t,n)=>{om(e,t).each((r=>{nm(e,t,n,r)}))},highlightAt:(e,t,n,r)=>{sm(e,t,n,r).fold((e=>{throw e}),(r=>{nm(e,t,n,r)}))},highlightBy:(e,t,n,r)=>{const s=lm(e,t);$(s,r).each((r=>{nm(e,t,n,r)}))},isHighlighted:rm,getHighlighted:(e,t,n)=>va(e.element,"."+t.highlightClass).bind((t=>e.getSystem().getByDom(t).toOptional())),getFirst:im,getLast:om,getPrevious:(e,t,n)=>am(e,t,0,-1),getNext:(e,t,n)=>am(e,t,0,1),getCandidates:lm}),dm=[Xr("highlightClass"),Xr("itemClass"),za("onHighlight"),za("onDehighlight")];const um=Ol({fields:dm,name:"highlighting",apis:cm}),hm=[8],mm=[9],pm=[13],fm=[27],gm=[32],vm=[37],ym=[38],_m=[39],bm=[40],wm=(e,t,n)=>{const r=K(e.slice(0,t)),s=K(e.slice(t+1));return $(r.concat(s),n)},xm=(e,t,n)=>{const r=K(e.slice(0,t));return $(r,n)},Mm=(e,t,n)=>{const r=e.slice(0,t),s=e.slice(t+1);return $(s.concat(r),n)},Sm=(e,t,n)=>{const r=e.slice(t+1);return $(r,n)},Tm=e=>t=>{const n=t.raw;return N(e,n.which)},Cm=e=>t=>X(e,(e=>e(t))),Em=e=>!0===e.raw.shiftKey,km=e=>!0===e.raw.ctrlKey,Lm=M(Em),Am=(e,t)=>({matches:e,classification:t}),Dm=(e,t,n)=>{t.exists((e=>n.exists((t=>je(t,e)))))||Li(e,xi(),{prevFocus:t,newFocus:n})},Om=()=>{const e=e=>jl(e.element);return{get:e,set:(t,n)=>{const r=e(t);t.getSystem().triggerFocus(n,t.element);const s=e(t);Dm(t,r,s)}}},Rm=()=>{const e=e=>um.getHighlighted(e).map((e=>e.element));return{get:e,set:(t,n)=>{const r=e(t);t.getSystem().getByDom(n).fold(v,(e=>{um.highlight(t,e)}));const s=e(t);Dm(t,r,s)}}};var Pm;!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(Pm||(Pm={}));const Nm=(e,t,n,r,s)=>{const i=(e,t,n,r,s)=>((e,t)=>{const n=$(e,(e=>e.matches(t)));return n.map((e=>e.classification))})(n(e,t,r,s),t.event).bind((n=>n(e,t,r,s))),o={schema:()=>e.concat([hs("focusManager",Om()),ms("focusInside","onFocus",Fr((e=>N(["onFocus","onEnterOrSpace","onApi"],e)?Yn.value(e):Yn.error("Invalid value for focusInside")))),ja("handler",o),ja("state",t),ja("sendFocusIn",s)]),processKey:i,toEvents:(e,t)=>{const o=e.focusInside!==Pm.OnFocusMode?L.none():s(e).map((n=>zi(ri(),((r,s)=>{n(r,e,t),s.stop()})))),a=[zi(Ws(),((r,o)=>{i(r,o,n,e,t).fold((()=>{((n,r)=>{const i=Tm(gm.concat(pm))(r.event);e.focusInside===Pm.OnEnterOrSpaceMode&&i&&As(n,r)&&s(e).each((s=>{s(n,e,t),r.stop()}))})(r,o)}),(e=>{o.stop()}))})),zi(Gs(),((n,s)=>{i(n,s,r,e,t).each((e=>{s.stop()}))}))];return Pi(o.toArray().concat(a))}};return o},Im=e=>{const t=[ss("onEscape"),ss("onEnter"),hs("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),hs("firstTabstop",0),hs("useTabstopAt",E),ss("visibilitySelector")].concat([e]),n=(e,t)=>{const n=e.visibilitySelector.bind((e=>ya(t,e))).getOr(t);return Ot(n)>0},r=(e,t,r)=>{((e,t)=>{const r=od(e.element,t.selector),s=U(r,(e=>n(t,e)));return L.from(s[t.firstTabstop])})(e,t).each((n=>{t.focusManager.set(e,n)}))},s=(e,t,r,s,i)=>i(t,r,(e=>((e,t)=>n(e,t)&&e.useTabstopAt(t))(s,e))).fold((()=>s.cyclic?L.some(!0):L.none()),(t=>(s.focusManager.set(e,t),L.some(!0)))),i=(e,t,n,r)=>{const i=od(e.element,n.selector);return((e,t)=>t.focusManager.get(e).bind((e=>ya(e,t.selector))))(e,n).bind((t=>W(i,x(je,t)).bind((t=>s(e,i,t,n,r)))))},o=_([Am(Cm([Em,Tm(mm)]),((e,t,n)=>{const r=n.cyclic?wm:xm;return i(e,0,n,r)})),Am(Tm(mm),((e,t,n)=>{const r=n.cyclic?Mm:Sm;return i(e,0,n,r)})),Am(Tm(fm),((e,t,n)=>n.onEscape.bind((n=>n(e,t))))),Am(Cm([Lm,Tm(pm)]),((e,t,n)=>n.onEnter.bind((n=>n(e,t)))))]),a=_([]);return Nm(t,wo.init,o,a,(()=>L.some(r)))};var zm=Im(Gr("cyclic",C)),Bm=Im(Gr("cyclic",E));const Fm=(e,t,n)=>zh(n)&&Tm(gm)(t.event)?L.none():((e,t,n)=>(Di(e,n,ai()),L.some(!0)))(e,0,n),Hm=(e,t)=>L.some(!0),jm=[hs("execute",Fm),hs("useSpace",!1),hs("useEnter",!0),hs("useControlEnter",!1),hs("useDown",!1)],Um=(e,t,n)=>n.execute(e,t,e.element);var Ym=Nm(jm,wo.init,((e,t,n,r)=>{const s=n.useSpace&&!zh(e.element)?gm:[],i=n.useEnter?pm:[],o=n.useDown?bm:[],a=s.concat(i).concat(o);return[Am(Tm(a),Um)].concat(n.useControlEnter?[Am(Cm([km,Tm(pm)]),Um)]:[])}),((e,t,n,r)=>n.useSpace&&!zh(e.element)?[Am(Tm(gm),Hm)]:[]),(()=>L.none()));const Vm=()=>{const e=oc();return xo({readState:()=>e.get().map((e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)}))).getOr({numRows:"?",numColumns:"?"}),setGridSize:(t,n)=>{e.set({numRows:t,numColumns:n})},getNumRows:()=>e.get().map((e=>e.numRows)),getNumColumns:()=>e.get().map((e=>e.numColumns))})};var $m=Object.freeze({__proto__:null,flatgrid:Vm,init:e=>e.state(e)});const Wm=e=>(t,n,r,s)=>{const i=e(t.element);return Km(i,t,n,r,s)},Gm=(e,t)=>{const n=kc(e,t);return Wm(n)},qm=(e,t)=>{const n=kc(t,e);return Wm(n)},Xm=e=>(t,n,r,s)=>Km(e,t,n,r,s),Km=(e,t,n,r,s)=>r.focusManager.get(t).bind((n=>e(t.element,n,r,s))).map((e=>(r.focusManager.set(t,e),!0))),Jm=Xm,Zm=Xm,Qm=Xm,ep=e=>!(e=>e.offsetWidth<=0&&e.offsetHeight<=0)(e.dom),tp=(e,t,n)=>{const r=od(e,n);return((e,t)=>W(e,t).map((t=>({index:t,candidates:e}))))(U(r,ep),(e=>je(e,t)))},np=(e,t)=>W(e,(e=>je(t,e))),rp=(e,t,n,r)=>r(Math.floor(t/n),t%n).bind((t=>{const r=t.row*n+t.column;return r>=0&&r<e.length?L.some(e[r]):L.none()})),sp=(e,t,n,r,s)=>rp(e,t,r,((t,i)=>{const o=t===n-1?e.length-t*r:r,a=el(i,s,0,o-1);return L.some({row:t,column:a})})),ip=(e,t,n,r,s)=>rp(e,t,r,((t,i)=>{const o=el(t,s,0,n-1),a=o===n-1?e.length-o*r:r,l=tl(i,0,a-1);return L.some({row:o,column:l})})),op=[Xr("selector"),hs("execute",Fm),Ba("onEscape"),hs("captureTab",!1),Ya()],ap=(e,t,n)=>{va(e.element,t.selector).each((n=>{t.focusManager.set(e,n)}))},lp=e=>(t,n,r,s)=>tp(t,n,r.selector).bind((t=>e(t.candidates,t.index,s.getNumRows().getOr(r.initSize.numRows),s.getNumColumns().getOr(r.initSize.numColumns)))),cp=(e,t,n)=>n.captureTab?L.some(!0):L.none(),dp=lp(((e,t,n,r)=>sp(e,t,n,r,-1))),up=lp(((e,t,n,r)=>sp(e,t,n,r,1))),hp=lp(((e,t,n,r)=>ip(e,t,n,r,-1))),mp=lp(((e,t,n,r)=>ip(e,t,n,r,1))),pp=_([Am(Tm(vm),Gm(dp,up)),Am(Tm(_m),qm(dp,up)),Am(Tm(ym),Jm(hp)),Am(Tm(bm),Zm(mp)),Am(Cm([Em,Tm(mm)]),cp),Am(Cm([Lm,Tm(mm)]),cp),Am(Tm(fm),((e,t,n)=>n.onEscape(e,t))),Am(Tm(gm.concat(pm)),((e,t,n,r)=>((e,t)=>t.focusManager.get(e).bind((e=>ya(e,t.selector))))(e,n).bind((r=>n.execute(e,t,r)))))]),fp=_([Am(Tm(gm),Hm)]);var gp=Nm(op,Vm,pp,fp,(()=>L.some(ap)));const vp=(e,t,n,r)=>{const s=(e,t,n)=>{const i=el(t,r,0,n.length-1);return i===e?L.none():(o=n[i],"button"===Oe(o)&&"disabled"===pt(o,"disabled")?s(e,i,n):L.from(n[i]));var o};return tp(e,n,t).bind((e=>{const t=e.index,n=e.candidates;return s(t,t,n)}))},yp=[Xr("selector"),hs("getInitial",L.none),hs("execute",Fm),Ba("onEscape"),hs("executeOnMove",!1),hs("allowVertical",!0)],_p=(e,t,n)=>((e,t)=>t.focusManager.get(e).bind((e=>ya(e,t.selector))))(e,n).bind((r=>n.execute(e,t,r))),bp=(e,t,n)=>{t.getInitial(e).orThunk((()=>va(e.element,t.selector))).each((n=>{t.focusManager.set(e,n)}))},wp=(e,t,n)=>vp(e,n.selector,t,-1),xp=(e,t,n)=>vp(e,n.selector,t,1),Mp=e=>(t,n,r,s)=>e(t,n,r,s).bind((()=>r.executeOnMove?_p(t,n,r):L.some(!0))),Sp=(e,t,n)=>n.onEscape(e,t),Tp=_([Am(Tm(gm),Hm)]);var Cp=Nm(yp,wo.init,((e,t,n,r)=>{const s=vm.concat(n.allowVertical?ym:[]),i=_m.concat(n.allowVertical?bm:[]);return[Am(Tm(s),Mp(Gm(wp,xp))),Am(Tm(i),Mp(qm(wp,xp))),Am(Tm(pm),_p),Am(Tm(gm),_p),Am(Tm(fm),Sp)]}),Tp,(()=>L.some(bp)));const Ep=(e,t,n)=>L.from(e[t]).bind((e=>L.from(e[n]).map((e=>({rowIndex:t,columnIndex:n,cell:e}))))),kp=(e,t,n,r)=>{const s=e[t].length,i=el(n,r,0,s-1);return Ep(e,t,i)},Lp=(e,t,n,r)=>{const s=el(n,r,0,e.length-1),i=e[s].length,o=tl(t,0,i-1);return Ep(e,s,o)},Ap=(e,t,n,r)=>{const s=e[t].length,i=tl(n+r,0,s-1);return Ep(e,t,i)},Dp=(e,t,n,r)=>{const s=tl(n+r,0,e.length-1),i=e[s].length,o=tl(t,0,i-1);return Ep(e,s,o)},Op=[ts("selectors",[Xr("row"),Xr("cell")]),hs("cycles",!0),hs("previousSelector",L.none),hs("execute",Fm)],Rp=(e,t,n)=>{t.previousSelector(e).orThunk((()=>{const n=t.selectors;return va(e.element,n.cell)})).each((n=>{t.focusManager.set(e,n)}))},Pp=(e,t)=>(n,r,s)=>{const i=s.cycles?e:t;return ya(r,s.selectors.row).bind((e=>{const t=od(e,s.selectors.cell);return np(t,r).bind((t=>{const r=od(n,s.selectors.row);return np(r,e).bind((e=>{const n=((e,t)=>F(e,(e=>od(e,t.selectors.cell))))(r,s);return i(n,e,t).map((e=>e.cell))}))}))}))},Np=Pp(((e,t,n)=>kp(e,t,n,-1)),((e,t,n)=>Ap(e,t,n,-1))),Ip=Pp(((e,t,n)=>kp(e,t,n,1)),((e,t,n)=>Ap(e,t,n,1))),zp=Pp(((e,t,n)=>Lp(e,n,t,-1)),((e,t,n)=>Dp(e,n,t,-1))),Bp=Pp(((e,t,n)=>Lp(e,n,t,1)),((e,t,n)=>Dp(e,n,t,1))),Fp=_([Am(Tm(vm),Gm(Np,Ip)),Am(Tm(_m),qm(Np,Ip)),Am(Tm(ym),Jm(zp)),Am(Tm(bm),Zm(Bp)),Am(Tm(gm.concat(pm)),((e,t,n)=>jl(e.element).bind((r=>n.execute(e,t,r)))))]),Hp=_([Am(Tm(gm),Hm)]);var jp=Nm(Op,wo.init,Fp,Hp,(()=>L.some(Rp)));const Up=[Xr("selector"),hs("execute",Fm),hs("moveOnTab",!1)],Yp=(e,t,n)=>n.focusManager.get(e).bind((r=>n.execute(e,t,r))),Vp=(e,t,n)=>{va(e.element,t.selector).each((n=>{t.focusManager.set(e,n)}))},$p=(e,t,n)=>vp(e,n.selector,t,-1),Wp=(e,t,n)=>vp(e,n.selector,t,1),Gp=_([Am(Tm(ym),Qm($p)),Am(Tm(bm),Qm(Wp)),Am(Cm([Em,Tm(mm)]),((e,t,n,r)=>n.moveOnTab?Qm($p)(e,t,n,r):L.none())),Am(Cm([Lm,Tm(mm)]),((e,t,n,r)=>n.moveOnTab?Qm(Wp)(e,t,n,r):L.none())),Am(Tm(pm),Yp),Am(Tm(gm),Yp)]),qp=_([Am(Tm(gm),Hm)]);var Xp=Nm(Up,wo.init,Gp,qp,(()=>L.some(Vp)));const Kp=[Ba("onSpace"),Ba("onEnter"),Ba("onShiftEnter"),Ba("onLeft"),Ba("onRight"),Ba("onTab"),Ba("onShiftTab"),Ba("onUp"),Ba("onDown"),Ba("onEscape"),hs("stopSpaceKeyup",!1),ss("focusIn")];var Jp=Nm(Kp,wo.init,((e,t,n)=>[Am(Tm(gm),n.onSpace),Am(Cm([Lm,Tm(pm)]),n.onEnter),Am(Cm([Em,Tm(pm)]),n.onShiftEnter),Am(Cm([Em,Tm(mm)]),n.onShiftTab),Am(Cm([Lm,Tm(mm)]),n.onTab),Am(Tm(ym),n.onUp),Am(Tm(bm),n.onDown),Am(Tm(vm),n.onLeft),Am(Tm(_m),n.onRight),Am(Tm(gm),n.onSpace),Am(Tm(fm),n.onEscape)]),((e,t,n)=>n.stopSpaceKeyup?[Am(Tm(gm),Hm)]:[]),(e=>e.focusIn));const Zp=zm.schema(),Qp=Bm.schema(),ef=Cp.schema(),tf=gp.schema(),nf=jp.schema(),rf=Ym.schema(),sf=Xp.schema(),of=Jp.schema();const af=Pl({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Zp,cyclic:Qp,flow:ef,flatgrid:tf,matrix:nf,execution:rf,menu:sf,special:of}),name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,n)=>{t.sendFocusIn(t).fold((()=>{e.getSystem().triggerFocus(e.element,e.element)}),(r=>{r(e,t,n)}))},setGridSize:(e,t,n,r,s)=>{(e=>ye(e,"setGridSize"))(n)?n.setGridSize(r,s):console.error("Layout does not support setGridSize")}},state:$m}),lf=(e,t)=>{Ul((()=>{Wd(e,t,(()=>F(t,e.getSystem().build)))}),e.element)},cf=(e,t)=>{Ul((()=>{((e,t,n)=>{const r=e.components(),s=q(t,(e=>_o(e).toArray()));H(r,(e=>{N(s,e)||Vd(e)}));const i=n(t),o=J(r,i);H(o,(e=>{Hd(e)&&Vd(e)})),H(i,(t=>{Hd(t)||Yd(e,t)})),e.syncComponents()})(e,t,(()=>((e,t,n)=>Xo(e,t,((t,r)=>Ko(e,r,t,n))))(e.element,t,e.getSystem().buildOrPatch)))}),e.element)},df=(e,t,n,r)=>{Vd(t);const s=Ko(e.element,n,r,e.getSystem().buildOrPatch);Yd(e,s),e.syncComponents()},uf=(e,t,n)=>{const r=e.getSystem().build(n);qd(e,r,t)},hf=(e,t,n,r)=>{Kd(t),uf(e,((e,t)=>((e,t,n)=>{Je(e,n).fold((()=>{Tn(e,t)}),(e=>{xn(e,t)}))})(e,t,n)),r)},mf=(e,t)=>e.components(),pf=(e,t,n,r,s)=>{const i=mf(e);return L.from(i[r]).map((n=>(s.fold((()=>Kd(n)),(s=>{(t.reuseDom?df:hf)(e,n,r,s)})),n)))};var ff=Object.freeze({__proto__:null,append:(e,t,n,r)=>{uf(e,Tn,r)},prepend:(e,t,n,r)=>{uf(e,Sn,r)},remove:(e,t,n,r)=>{const s=mf(e),i=$(s,(e=>je(r.element,e.element)));i.each(Kd)},replaceAt:pf,replaceBy:(e,t,n,r,s)=>{const i=mf(e);return W(i,r).bind((n=>pf(e,t,0,n,s)))},set:(e,t,n,r)=>(t.reuseDom?cf:lf)(e,r),contents:mf});const gf=Ol({fields:[vs("reuseDom",!0)],name:"replacing",apis:ff}),vf=(e,t)=>{const n=((e,t)=>{const n=Pi(t);return Ol({fields:[Xr("enabled")],name:e,active:{events:_(n)}})})(e,t);return{key:e,value:{config:{},me:n,configAsRaw:_({}),initialConfig:{},state:wo}}},yf=(e,t)=>{t.ignore||(Bl(e.element),t.onFocus(e))};var _f=Object.freeze({__proto__:null,focus:yf,blur:(e,t)=>{t.ignore||(e=>{e.dom.blur()})(e.element)},isFocused:e=>Fl(e.element)});var bf=Object.freeze({__proto__:null,exhibit:(e,t)=>{const n=t.ignore?{}:{attributes:{tabindex:"-1"}};return So(n)},events:e=>Pi([zi(ri(),((t,n)=>{yf(t,e),n.stop()}))].concat(e.stopMousedown?[zi(Fs(),((e,t)=>{t.event.prevent()}))]:[]))}),wf=[za("onFocus"),hs("stopMousedown",!1),hs("ignore",!1)];const xf=Ol({fields:wf,name:"focusing",active:bf,apis:_f}),Mf=(e,t,n)=>{const r=t.aria;r.update(e,r,n.get())},Sf=(e,t,n)=>{t.toggleClass.each((t=>{n.get()?Ho(e.element,t):jo(e.element,t)}))},Tf=(e,t,n)=>{kf(e,t,n,!n.get())},Cf=(e,t,n)=>{n.set(!0),Sf(e,t,n),Mf(e,t,n)},Ef=(e,t,n)=>{n.set(!1),Sf(e,t,n),Mf(e,t,n)},kf=(e,t,n,r)=>{(r?Cf:Ef)(e,t,n)},Lf=(e,t,n)=>{kf(e,t,n,t.selected)};var Af=Object.freeze({__proto__:null,onLoad:Lf,toggle:Tf,isOn:(e,t,n)=>n.get(),on:Cf,off:Ef,set:kf});var Df=Object.freeze({__proto__:null,exhibit:()=>So({}),events:(e,t)=>{const n=(r=e,s=t,i=Tf,qi((e=>{i(e,r,s)})));var r,s,i;const o=Cl(e,t,Lf);return Pi(G([e.toggleOnExecute?[n]:[],[o]]))}});const Of=(e,t,n)=>{ht(e.element,"aria-expanded",n)};var Rf=[hs("selected",!1),ss("toggleClass"),hs("toggleOnExecute",!0),ms("aria",{mode:"none"},$r("mode",{pressed:[hs("syncWithExpanded",!1),ja("update",((e,t,n)=>{ht(e.element,"aria-pressed",n),t.syncWithExpanded&&Of(e,t,n)}))],checked:[ja("update",((e,t,n)=>{ht(e.element,"aria-checked",n)}))],expanded:[ja("update",Of)],selected:[ja("update",((e,t,n)=>{ht(e.element,"aria-selected",n)}))],none:[ja("update",v)]}))];const Pf=Ol({fields:Rf,name:"toggling",active:Df,apis:Af,state:(Nf=!1,{init:()=>{const e=ws(Nf);return{get:()=>e.get(),set:t=>e.set(t),clear:()=>e.set(Nf),readState:()=>e.get()}}})});var Nf;const If=()=>{const e=(e,t)=>{t.stop(),Ai(e)};return[zi(Ks(),e),zi(ci(),e),Ui(Ns()),Ui(Fs())]},zf=e=>Pi(G([e.map((e=>qi(((t,n)=>{e(t),n.stop()})))).toArray(),If()])),Bf="alloy.item-hover",Ff="alloy.item-focus",Hf=e=>{(jl(e.element).isNone()||xf.isFocused(e))&&(xf.isFocused(e)||xf.focus(e),Li(e,Bf,{item:e}))},jf=e=>{Li(e,Ff,{item:e})},Uf=_(Bf),Yf=_(Ff),Vf=[Xr("data"),Xr("components"),Xr("dom"),hs("hasSubmenu",!1),ss("toggling"),Nu("itemBehaviours",[Pf,xf,af,Du]),hs("ignoreFocus",!1),hs("domModification",{}),ja("builder",(e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:e.toggling.isSome()?"menuitemcheckbox":"menuitem",...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Iu(e.itemBehaviours,[e.toggling.fold(Pf.revoke,(e=>Pf.config({aria:{mode:"checked"},...e}))),xf.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:e=>{jf(e)}}),af.config({mode:"execution"}),Du.config({store:{mode:"memory",initialValue:e.data}}),vf("item-type-events",[...If(),zi(Ys(),Hf),zi(li(),xf.focus)])]),components:e.components,eventOrder:e.eventOrder}))),hs("eventOrder",{})],$f=[Xr("dom"),Xr("components"),ja("builder",(e=>({dom:e.dom,components:e.components,events:Pi([Yi(li())])})))],Wf=_("item-widget"),Gf=_([ah({name:"widget",overrides:e=>({behaviours:Al([Du.config({store:{mode:"manual",getValue:t=>e.data,setValue:v}})])})})]),qf=[Xr("uid"),Xr("data"),Xr("components"),Xr("dom"),hs("autofocus",!1),hs("ignoreFocus",!1),Nu("widgetBehaviours",[Du,xf,af]),hs("domModification",{}),kh(Gf()),ja("builder",(e=>{const t=_h(Wf(),e,Gf()),n=bh(Wf(),e,t.internals()),r=t=>wh(t,e,"widget").map((e=>(af.focusIn(e),e))),s=(t,n)=>zh(n.event.target)?L.none():e.autofocus?(n.setSource(t.element),L.none()):L.none();return{dom:e.dom,components:n,domModification:e.domModification,events:Pi([qi(((e,t)=>{r(e).each((e=>{t.stop()}))})),zi(Ys(),Hf),zi(li(),((t,n)=>{e.autofocus?r(t):xf.focus(t)}))]),behaviours:Iu(e.widgetBehaviours,[Du.config({store:{mode:"memory",initialValue:e.data}}),xf.config({ignore:e.ignoreFocus,onFocus:e=>{jf(e)}}),af.config({mode:"special",focusIn:e.autofocus?e=>{r(e)}:Nl(),onLeft:s,onRight:s,onEscape:(t,n)=>xf.isFocused(t)||e.autofocus?e.autofocus?(n.setSource(t.element),L.none()):L.none():(xf.focus(t),L.some(!0))})])}}))],Xf=$r("type",{widget:qf,item:Vf,separator:$f}),Kf=_([dh({factory:{sketch:e=>{const t=Yr("menu.spec item",Xf,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>ve(t,"uid")?t:{...t,uid:uo("item")},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),Jf=_([Xr("value"),Xr("items"),Xr("dom"),Xr("components"),hs("eventOrder",{}),Ou("menuBehaviours",[um,Du,Hh,af]),ms("movement",{mode:"menu",moveOnTab:!0},$r("mode",{grid:[Ya(),ja("config",((e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager})))],matrix:[ja("config",((e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}))),Xr("rowSelector")],menu:[hs("moveOnTab",!0),ja("config",((e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager})))]})),Kr("markers",Oa()),hs("fakeFocus",!1),hs("focusManager",Om()),za("onHighlight")]),Zf=_("alloy.menu-focus"),Qf=Ih({name:"Menu",configFields:Jf(),partFields:Kf(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Pu(e.menuBehaviours,[um.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),Du.config({store:{mode:"memory",initialValue:e.value}}),Hh.config({find:L.some}),af.config(e.movement.config(e,e.movement))]),events:Pi([zi(Yf(),((e,t)=>{const n=t.event;e.getSystem().getByDom(n.target).each((n=>{um.highlight(e,n),t.stop(),Li(e,Zf(),{menu:e,item:n})}))})),zi(Uf(),((e,t)=>{const n=t.event.item;um.highlight(e,n)}))]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),eg=(e,t,n,r)=>ge(n,r).bind((r=>ge(e,r).bind((r=>{const s=eg(e,t,n,r);return L.some([r].concat(s))})))).getOr([]),tg=(e,t)=>{const n={};le(e,((e,t)=>{H(e,(e=>{n[e]=t}))}));const r=t,s=de(t,((e,t)=>({k:e,v:t})));const i=ce(s,((e,t)=>[t].concat(eg(n,r,s,t))));return ce(n,(e=>ge(i,e).getOr([e])))},ng=e=>"prepared"===e.type?L.some(e.menu):L.none(),rg={init:()=>{const e=ws({}),t=ws({}),n=ws({}),r=oc(),s=ws({}),i=(t,n,r)=>o(t).bind((s=>(t=>pe(e.get(),((e,n)=>e===t)))(t).bind((e=>n(e).map((e=>({triggeredMenu:s,triggeringItem:e,triggeringPath:r}))))))),o=e=>a(e).bind(ng),a=e=>ge(t.get(),e),l=t=>ge(e.get(),t);return{setMenuBuilt:(e,n)=>{t.set({...t.get(),[e]:{type:"prepared",menu:n}})},setContents:(i,o,a,l)=>{r.set(i),e.set(a),t.set(o),s.set(l);const c=tg(l,a);n.set(c)},expand:t=>ge(e.get(),t).map((e=>{const r=ge(n.get(),t).getOr([]);return[e].concat(r)})),refresh:e=>ge(n.get(),e),collapse:e=>ge(n.get(),e).bind((e=>e.length>1?L.some(e.slice(1)):L.none())),lookupMenu:a,lookupItem:l,otherMenus:e=>{const t=s.get();return J(oe(t),e)},getPrimary:()=>r.get().bind(o),getMenus:()=>t.get(),clear:()=>{e.set({}),t.set({}),n.set({}),r.clear()},isClear:()=>r.get().isNone(),getTriggeringPath:(e,t)=>{const s=U(l(e).toArray(),(e=>o(e).isSome()));return ge(n.get(),e).bind((e=>{const n=K(s.concat(e));return(e=>{const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(!r.isSome())return L.none();t.push(r.getOrDie())}return L.some(t)})(q(n,((e,s)=>i(e,t,n.slice(0,s+1)).fold((()=>_e(r.get(),e)?[]:[L.none()]),(e=>[L.some(e)])))))}))}}},extractPreparedMenu:ng},sg=_("collapse-item"),ig=Nh({name:"TieredMenu",configFields:[Ha("onExecute"),Ha("onEscape"),Fa("onOpenMenu"),Fa("onOpenSubmenu"),za("onRepositionMenu"),za("onCollapseMenu"),hs("highlightImmediately",!0),ts("data",[Xr("primary"),Xr("menus"),Xr("expansions")]),hs("fakeFocus",!1),za("onHighlight"),za("onHover"),Pa(),Xr("dom"),hs("navigateOnHover",!0),hs("stayInDom",!1),Ou("tmenuBehaviours",[af,um,Hh,gf]),hs("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:(e,t)=>{const n=oc(),r=rg.init(),s=t=>{const n=((t,n,r)=>ce(r,((r,s)=>{const i=()=>Qf.sketch({...r,value:s,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:e.fakeFocus?Rm():Om()});return s===n?{type:"prepared",menu:t.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}})))(t,e.data.primary,e.data.menus),s=o();return r.setContents(e.data.primary,n,e.data.expansions,s),r.getPrimary()},i=e=>Du.getValue(e).value,o=t=>ce(e.data.menus,((e,t)=>q(e.items,(e=>"separator"===e.type?[]:[e.data.value])))),a=(e,t)=>{um.highlight(e,t),um.getHighlighted(t).orThunk((()=>um.getFirst(t))).each((t=>{Di(e,t.element,li())}))},l=(e,t)=>be(F(t,(t=>e.lookupMenu(t).bind((e=>"prepared"===e.type?L.some(e.menu):L.none()))))),c=(t,n,r)=>{const s=l(n,n.otherMenus(r));H(s,(n=>{Vo(n.element,[e.markers.backgroundMenu]),e.stayInDom||gf.remove(t,n)}))},d=(t,r)=>{const s=(t=>n.get().getOrThunk((()=>{const r={},s=od(t.element,`.${e.markers.item}`),o=U(s,(e=>"true"===pt(e,"aria-haspopup")));return H(o,(e=>{t.getSystem().getByDom(e).each((e=>{const t=i(e);r[t]=e}))})),n.set(r),r})))(t);le(s,((e,t)=>{const n=N(r,t);ht(e.element,"aria-expanded",n)}))},u=(t,n,r)=>L.from(r[0]).bind((s=>n.lookupMenu(s).bind((s=>{if("notbuilt"===s.type)return L.none();{const i=s.menu,o=l(n,r.slice(1));return H(o,(t=>{Ho(t.element,e.markers.backgroundMenu)})),lt(i.element)||gf.append(t,da(i)),Vo(i.element,[e.markers.backgroundMenu]),a(t,i),c(t,n,r),L.some(i)}}))));let h;!function(e){e[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent"}(h||(h={}));const m=(t,n,s=h.HighlightSubmenu)=>{if(n.hasConfigured(em)&&em.isDisabled(n))return L.some(n);{const o=i(n);return r.expand(o).bind((i=>(d(t,i),L.from(i[0]).bind((o=>r.lookupMenu(o).bind((a=>{const l=((e,t,n)=>{if("notbuilt"===n.type){const s=e.getSystem().build(n.nbMenu());return r.setMenuBuilt(t,s),s}return n.menu})(t,o,a);return lt(l.element)||gf.append(t,da(l)),e.onOpenSubmenu(t,n,l,K(i)),s===h.HighlightSubmenu?(um.highlightFirst(l),u(t,r,i)):(um.dehighlightAll(l),L.some(n))})))))))}},p=(t,n)=>{const s=i(n);return r.collapse(s).bind((s=>(d(t,s),u(t,r,s).map((r=>(e.onCollapseMenu(t,n,r),r))))))},f=t=>(n,r)=>ya(r.getSource(),"."+e.markers.item).bind((e=>n.getSystem().getByDom(e).toOptional().bind((e=>t(n,e).map(E))))),g=Pi([zi(Zf(),((e,t)=>{const n=t.event.item;r.lookupItem(i(n)).each((()=>{const n=t.event.menu;um.highlight(e,n);const s=i(t.event.item);r.refresh(s).each((t=>c(e,r,t)))}))})),qi(((t,n)=>{const r=n.event.target;t.getSystem().getByDom(r).each((n=>{0===i(n).indexOf("collapse-item")&&p(t,n),m(t,n,h.HighlightSubmenu).fold((()=>{e.onExecute(t,n)}),v)}))})),$i(((t,n)=>{s(t).each((n=>{gf.append(t,da(n)),e.onOpenMenu(t,n),e.highlightImmediately&&a(t,n)}))}))].concat(e.navigateOnHover?[zi(Uf(),((t,n)=>{const s=n.event.item;((e,t)=>{const n=i(t);r.refresh(n).bind((t=>(d(e,t),u(e,r,t))))})(t,s),m(t,s,h.HighlightParent),e.onHover(t,s)}))]:[])),y=e=>um.getHighlighted(e).bind(um.getHighlighted),_={collapseMenu:e=>{y(e).each((t=>{p(e,t)}))},highlightPrimary:e=>{r.getPrimary().each((t=>{a(e,t)}))},repositionMenus:t=>{const n=r.getPrimary().bind((e=>y(t).bind((e=>{const t=i(e),n=fe(r.getMenus()),s=be(F(n,rg.extractPreparedMenu));return r.getTriggeringPath(t,(e=>((e,t,n)=>ie(t,(e=>{if(!e.getSystem().isConnected())return L.none();const t=um.getCandidates(e);return $(t,(e=>i(e)===n))})))(0,s,e)))})).map((t=>({primary:e,triggeringPath:t})))));n.fold((()=>{(e=>L.from(e.components()[0]).filter((e=>"menu"===pt(e.element,"role"))))(t).each((n=>{e.onRepositionMenu(t,n,[])}))}),(({primary:n,triggeringPath:r})=>{e.onRepositionMenu(t,n,r)}))}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Pu(e.tmenuBehaviours,[af.config({mode:"special",onRight:f(((e,t)=>zh(t.element)?L.none():m(e,t,h.HighlightSubmenu))),onLeft:f(((e,t)=>zh(t.element)?L.none():p(e,t))),onEscape:f(((t,n)=>p(t,n).orThunk((()=>e.onEscape(t,n).map((()=>t)))))),focusIn:(e,t)=>{r.getPrimary().each((t=>{Di(e,t.element,li())}))}}),um.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Hh.config({find:e=>um.getHighlighted(e)}),gf.config({})]),eventOrder:e.eventOrder,apis:_,events:g}},extraApis:{tieredData:(e,t,n)=>({primary:e,menus:t,expansions:n}),singleData:(e,t)=>({primary:e,menus:Ss(e,t),expansions:{}}),collapseItem:e=>({value:ro(sg()),meta:{text:e}})}}),og=Nh({name:"InlineView",configFields:[Xr("lazySink"),za("onShow"),za("onHide"),cs("onEscape"),Ou("inlineBehaviours",[uu,Du,Il]),us("fireDismissalEventInstead",[hs("event",bi())]),us("fireRepositionEventInstead",[hs("event",wi())]),hs("getRelated",L.none),hs("isExtraPart",C),hs("eventOrder",L.none)],factory:(e,t)=>{const n=(e,t,n,s)=>{r(e,t,n,(()=>s.map((e=>Bn(e)))))},r=(t,n,r,s)=>{const i=e.lazySink(t).getOrDie();uu.openWhileCloaked(t,n,(()=>Fd.positionWithinBounds(i,t,r,s()))),Du.setValue(t,L.some({mode:"position",config:r,getBounds:s}))},s=(t,n,r,s)=>{const i=((e,t,n,r,s)=>{const i=()=>e.lazySink(t),o="horizontal"===r.type?{layouts:{onLtr:()=>xl(),onRtl:()=>Ml()}}:{},a=e=>(e=>2===e.length)(e)?o:{};return ig.sketch({dom:{tag:"div"},data:r.data,markers:r.menu.markers,highlightImmediately:r.menu.highlightImmediately,onEscape:()=>(uu.close(t),e.onEscape.map((e=>e(t))),L.some(!0)),onExecute:()=>L.some(!0),onOpenMenu:(e,t)=>{Fd.positionWithinBounds(i().getOrDie(),t,n,s())},onOpenSubmenu:(e,t,n,r)=>{const s=i().getOrDie();Fd.position(s,n,{anchor:{type:"submenu",item:t,...a(r)}})},onRepositionMenu:(e,t,r)=>{const o=i().getOrDie();Fd.positionWithinBounds(o,t,n,s()),H(r,(e=>{const t=a(e.triggeringPath);Fd.position(o,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem,...t}})}))}})})(e,t,n,r,s);uu.open(t,i),Du.setValue(t,L.some({mode:"menu",menu:i}))},i=t=>{uu.isOpen(t)&&Du.getValue(t).each((n=>{switch(n.mode){case"menu":uu.getState(t).each(ig.repositionMenus);break;case"position":const r=e.lazySink(t).getOrDie();Fd.positionWithinBounds(r,t,n.config,n.getBounds())}}))},o={setContent:(e,t)=>{uu.setContent(e,t)},showAt:(e,t,r)=>{n(e,t,r,L.none())},showWithin:n,showWithinBounds:r,showMenuAt:(e,t,n)=>{s(e,t,n,L.none)},showMenuWithinBounds:s,hide:e=>{uu.isOpen(e)&&(Du.setValue(e,L.none()),uu.close(e))},getContent:e=>uu.getState(e),reposition:i,isOpen:uu.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Pu(e.inlineBehaviours,[uu.config({isPartOf:(t,n,r)=>xa(n,r)||((t,n)=>e.getRelated(t).exists((e=>xa(e,n))))(t,r),getAttachPoint:t=>e.lazySink(t).getOrDie(),onOpen:t=>{e.onShow(t)},onClose:t=>{e.onHide(t)}}),Du.config({store:{mode:"memory",initialValue:L.none()}}),Il.config({channels:{...gu({isExtraPart:t.isExtraPart,...e.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})}),...yu({...e.fireRepositionEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({}),doReposition:i})}})]),eventOrder:e.eventOrder,apis:o}},apis:{showAt:(e,t,n,r)=>{e.showAt(t,n,r)},showWithin:(e,t,n,r,s)=>{e.showWithin(t,n,r,s)},showWithinBounds:(e,t,n,r,s)=>{e.showWithinBounds(t,n,r,s)},showMenuAt:(e,t,n,r)=>{e.showMenuAt(t,n,r)},showMenuWithinBounds:(e,t,n,r,s)=>{e.showMenuWithinBounds(t,n,r,s)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,n)=>{e.setContent(t,n)},reposition:(e,t)=>{e.reposition(t)}}});var ag=tinymce.util.Tools.resolve("tinymce.util.Delay");const lg=Nh({name:"Button",factory:e=>{const t=zf(e.action),n=e.dom.tag,r=t=>ge(e.dom,"attributes").bind((e=>ge(e,t)));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Iu(e.buttonBehaviours,[xf.config({}),af.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:(()=>{if("button"===n){return{type:r("type").getOr("button"),...r("role").map((e=>({role:e}))).getOr({})}}return{role:r("role").getOr("button")}})()},eventOrder:e.eventOrder}},configFields:[hs("uid",void 0),Xr("dom"),hs("components",[]),Nu("buttonBehaviours",[xf,af]),ss("action"),ss("role"),hs("eventOrder",{})]}),cg=e=>{const t=(e=>void 0!==e.uid)(e)&&ye(e,"uid")?e.uid:uo("memento");return{get:e=>e.getSystem().getByUid(t).getOrDie(),getOpt:e=>e.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}};var dg=tinymce.util.Tools.resolve("tinymce.util.I18n");const ug={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},hg="temporary-placeholder",mg=e=>()=>ge(e,hg).getOr("!not found!"),pg=(e,t)=>{const n=e.toLowerCase();if(dg.isRtl()){const e=((e,t)=>Ce(e,t)?e:((e,t)=>e+t)(e,t))(n,"-rtl");return ve(t,e)?e:n}return n},fg=(e,t)=>ge(t,pg(e,t)),gg=(e,t)=>{const n=t();return fg(e,n).getOrThunk(mg(n))},vg=()=>vf("add-focusable",[$i((e=>{ga(e.element,"svg").each((e=>ht(e,"focusable","false")))}))]),yg=(e,t,n,r)=>{var s,i;const o=(e=>!!dg.isRtl()&&ve(ug,e))(t)?["tox-icon--flip"]:[],a=ge(n,pg(t,n)).or(r).getOrThunk(mg(n));return{dom:{tag:e.tag,attributes:null!==(s=e.attributes)&&void 0!==s?s:{},classes:e.classes.concat(o),innerHtml:a},behaviours:Al([...null!==(i=e.behaviours)&&void 0!==i?i:[],vg()])}},_g=(e,t,n,r=L.none())=>yg(t,e,n(),r),bg={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},wg=Nh({name:"Notification",factory:e=>{const t=cg({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Al([gf.config({})])}),n=e=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${e}%`}}}),r=e=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${e}%`}}),s=cg({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},r(0)],behaviours:Al([gf.config({})])}),i={updateProgress:(e,t)=>{e.getSystem().isConnected()&&s.getOpt(e).each((e=>{gf.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(t)]},r(t)])}))},updateText:(e,n)=>{if(e.getSystem().isConnected()){const r=t.get(e);gf.set(r,[ia(n)])}}},o=G([e.icon.toArray(),e.level.toArray(),e.level.bind((e=>L.from(bg[e]))).toArray()]),a=cg(lg.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[_g("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:t=>{e.onAction(t)}})),l=((e,t,n)=>{const r=n(),s=$(e,(e=>ve(r,pg(e,r))));return yg(t,s.getOr(hg),r,L.none())})(o,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),c=[l,{dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:Al([gf.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map((e=>["tox-notification","tox-notification--in",`tox-notification--${e}`])).getOr(["tox-notification","tox-notification--in"])},behaviours:Al([xf.config({}),vf("notification-events",[zi(Vs(),(e=>{a.getOpt(e).each(xf.focus)}))])]),components:c.concat(e.progress?[s.asSpec()]:[]).concat(e.closeButton?[a.asSpec()]:[]),apis:i}},configFields:[ss("level"),Xr("progress"),Xr("icon"),Xr("onAction"),Xr("text"),Xr("iconProvider"),Xr("translationProvider"),vs("closeButton",!0)],apis:{updateProgress:(e,t,n)=>{e.updateProgress(t,n)},updateText:(e,t,n)=>{e.updateText(t,n)}}});var xg,Mg,Sg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Tg=tinymce.util.Tools.resolve("tinymce.EditorManager"),Cg=tinymce.util.Tools.resolve("tinymce.Env");!function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"}(xg||(xg={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(Mg||(Mg={}));const Eg=e=>t=>t.options.get(e),kg=e=>t=>L.from(e(t)),Lg=e=>{const t=Cg.deviceType.isPhone(),n=Cg.deviceType.isTablet()||t,r=e.options.register,s=e=>i(e)||!1===e,o=e=>i(e)||f(e);r("skin",{processor:e=>i(e)||!1===e,default:"oxide"}),r("skin_url",{processor:"string"}),r("height",{processor:o,default:Math.max(e.getElement().offsetHeight,400)}),r("width",{processor:o,default:Sg.DOM.getStyle(e.getElement(),"width")}),r("min_height",{processor:"number",default:100}),r("min_width",{processor:"number"}),r("max_height",{processor:"number"}),r("max_width",{processor:"number"}),r("style_formats",{processor:"object[]"}),r("style_formats_merge",{processor:"boolean",default:!1}),r("style_formats_autohide",{processor:"boolean",default:!1}),r("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),r("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),r("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),r("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),r("content_langs",{processor:"object[]"}),r("removed_menuitems",{processor:"string",default:""}),r("menubar",{processor:e=>i(e)||d(e),default:!t}),r("menu",{processor:"object",default:{}}),r("toolbar",{processor:e=>d(e)||i(e)||l(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),z(9,(e=>{r("toolbar"+(e+1),{processor:"string"})})),r("toolbar_mode",{processor:"string",default:n?"scrolling":"floating"}),r("toolbar_groups",{processor:"object",default:{}}),r("toolbar_location",{processor:"string",default:Mg.auto}),r("toolbar_persist",{processor:"boolean",default:!1}),r("toolbar_sticky",{processor:"boolean",default:e.inline}),r("toolbar_sticky_offset",{processor:"number",default:0}),r("fixed_toolbar_container",{processor:"string",default:""}),r("fixed_toolbar_container_target",{processor:"object"}),r("file_picker_callback",{processor:"function"}),r("file_picker_validator_handler",{processor:"function"}),r("file_picker_types",{processor:"string"}),r("typeahead_urls",{processor:"boolean",default:!0}),r("anchor_top",{processor:s,default:"#top"}),r("anchor_bottom",{processor:s,default:"#bottom"}),r("draggable_modal",{processor:"boolean",default:!1}),r("statusbar",{processor:"boolean",default:!0}),r("elementpath",{processor:"boolean",default:!0}),r("branding",{processor:"boolean",default:!0}),r("resize",{processor:e=>"both"===e||d(e),default:!Cg.deviceType.isTouch()})},Ag=Eg("readonly"),Dg=Eg("height"),Og=Eg("width"),Rg=kg(Eg("min_width")),Pg=kg(Eg("min_height")),Ng=kg(Eg("max_width")),Ig=kg(Eg("max_height")),zg=kg(Eg("style_formats")),Bg=Eg("style_formats_merge"),Fg=Eg("style_formats_autohide"),Hg=Eg("content_langs"),jg=Eg("removed_menuitems"),Ug=Eg("toolbar_mode"),Yg=Eg("toolbar_groups"),Vg=Eg("toolbar_location"),$g=Eg("fixed_toolbar_container"),Wg=Eg("fixed_toolbar_container_target"),Gg=Eg("toolbar_persist"),qg=Eg("toolbar_sticky_offset"),Xg=Eg("menubar"),Kg=Eg("toolbar"),Jg=Eg("file_picker_callback"),Zg=Eg("file_picker_validator_handler"),Qg=Eg("file_picker_types"),ev=Eg("typeahead_urls"),tv=Eg("anchor_top"),nv=Eg("anchor_bottom"),rv=Eg("draggable_modal"),sv=Eg("statusbar"),iv=Eg("elementpath"),ov=Eg("branding"),av=Eg("resize"),lv=Eg("paste_as_text"),cv=e=>!1===e.options.get("skin"),dv=e=>!1!==e.options.get("menubar"),uv=e=>{const t=e.options.get("skin_url");if(cv(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const t=e.options.get("skin");return Tg.baseURL+"/skins/ui/"+t}},hv=e=>e.options.get("line_height_formats").split(" "),mv=e=>{const t=Kg(e),n=i(t),r=l(t)&&t.length>0;return!fv(e)&&(r||n||!0===t)},pv=e=>{const t=z(9,(t=>e.options.get("toolbar"+(t+1)))),n=U(t,i);return xe(n.length>0,n)},fv=e=>pv(e).fold((()=>{const t=Kg(e);return g(t,i)&&t.length>0}),E),gv=e=>Vg(e)===Mg.bottom,vv=e=>{if(!e.inline)return L.none();const t=$g(e);if(t.length>0)return va(ct(),t);const n=Wg(e);return m(n)?L.some(De.fromDom(n)):L.none()},yv=e=>e.inline&&vv(e).isSome(),_v=e=>vv(e).getOrThunk((()=>st(rt(De.fromDom(e.getElement()))))),bv=e=>e.inline&&!dv(e)&&!mv(e)&&!fv(e),wv=e=>(e.options.get("toolbar_sticky")||e.inline)&&!yv(e)&&!bv(e),xv=e=>{const t=e.options.get("menu");return ce(t,(e=>({...e,items:e.items})))};var Mv=Object.freeze({__proto__:null,get ToolbarMode(){return xg},get ToolbarLocation(){return Mg},register:Lg,getSkinUrl:uv,isReadOnly:Ag,isSkinDisabled:cv,getHeightOption:Dg,getWidthOption:Og,getMinWidthOption:Rg,getMinHeightOption:Pg,getMaxWidthOption:Ng,getMaxHeightOption:Ig,getUserStyleFormats:zg,shouldMergeStyleFormats:Bg,shouldAutoHideStyleFormats:Fg,getLineHeightFormats:hv,getContentLanguages:Hg,getRemovedMenuItems:jg,isMenubarEnabled:dv,isMultipleToolbars:fv,isToolbarEnabled:mv,isToolbarPersist:Gg,getMultipleToolbarsOption:pv,getUiContainer:_v,useFixedContainer:yv,getToolbarMode:Ug,isDraggableModal:rv,isDistractionFree:bv,isStickyToolbar:wv,getStickyToolbarOffset:qg,getToolbarLocation:Vg,isToolbarLocationBottom:gv,getToolbarGroups:Yg,getMenus:xv,getMenubar:Xg,getToolbar:Kg,getFilePickerCallback:Jg,getFilePickerTypes:Qg,useTypeaheadUrls:ev,getAnchorTop:tv,getAnchorBottom:nv,getFilePickerValidatorHandler:Zg,useStatusBar:sv,useElementPath:iv,useBranding:ov,getResize:av,getPasteAsText:lv});const Sv="[data-mce-autocompleter]",Tv=e=>ya(e,Sv),Cv=(e,t)=>{const n=(e,t)=>{Li(e,Ws(),{raw:t})},r=()=>e.getView().bind(um.getHighlighted);t.on("keydown",(t=>{const s=t.which;e.isActive()&&(e.isMenuOpen()?13===s?(r().each(Ai),t.preventDefault()):40===s?(r().fold((()=>{e.getView().each(um.highlightFirst)}),(e=>{n(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==s&&38!==s&&39!==s||r().each((e=>{n(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==s&&38!==s&&40!==s||e.cancelIfNecessary())})),t.on("NodeChange",(t=>{e.isActive()&&!e.isProcessingAction()&&Tv(De.fromDom(t.element)).isNone()&&e.cancelIfNecessary()}))};var Ev;!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(Ev||(Ev={}));var kv=Ev;const Lv="tox-menu-nav__js",Av="tox-collection__item",Dv="tox-swatch",Ov={normal:Lv,color:Dv},Rv="tox-collection__item--enabled",Pv="tox-collection__item-icon",Nv="tox-collection__item-label",Iv="tox-collection__item-caret",zv="tox-collection__item--active",Bv="tox-collection__item-container",Fv="tox-collection__item-container--row",Hv=e=>ge(Ov,e).getOr(Lv),jv=e=>"color"===e?"tox-swatches":"tox-menu",Uv=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:jv(e),tieredMenu:"tox-tiered-menu"}),Yv=e=>{const t=Uv(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:Hv(e)}},Vv=(e,t,n)=>{const r=Uv(n);return{tag:"div",classes:G([[r.menu,`tox-menu-${t}-column`],e?[r.hasIcons]:[]])}},$v=[Qf.parts.items({})],Wv=(e,t,n)=>{const r=Uv(n);return{dom:{tag:"div",classes:G([[r.tieredMenu]])},markers:Yv(n)}},Gv=(e,t)=>n=>{const r=B(n,t);return F(r,(t=>({dom:e,components:t})))},qv=(e,t)=>{const n=[];let r=[];return H(e,((e,s)=>{t(e,s)?(r.length>0&&n.push(r),r=[],(ve(e.dom,"innerHtml")||e.components.length>0)&&r.push(e)):r.push(e)})),r.length>0&&n.push(r),F(n,(e=>({dom:{tag:"div",classes:["tox-collection__group"]},components:e})))},Xv=(e,t,n=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Qf.parts.items({preprocess:n=>"auto"!==e&&e>1?Gv({tag:"div",classes:["tox-collection__group"]},e)(n):qv(n,((e,n)=>"separator"===t[n].type))})]}),Kv=e=>I(e,(e=>"icon"in e&&void 0!==e.icon)),Jv=e=>(console.error(Vr(e)),console.log(e),L.none()),Zv=(e,t,n,r,s)=>{const i=(o=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Qf.parts.items({preprocess:e=>qv(e,((e,t)=>"separator"===o[t].type))})]});var o;return{value:e,dom:i.dom,components:i.components,items:n}},Qv=(e,t,n,r,s)=>{if("color"===s){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Qf.parts.items({preprocess:"auto"!==e?Gv({tag:"div",classes:["tox-swatches__row"]},e):b})]}]}))(r);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===s&&"auto"===r){const t=Xv(r,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===s&&1===r){const t=Xv(1,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===s){const t=Xv(r,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("listpreview"===s&&"auto"!==r){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Qf.parts.items({preprocess:Gv({tag:"div",classes:["tox-collection__group"]},e)})]}))(r);return{value:e,dom:t.dom,components:t.components,items:n}}return{value:e,dom:Vv(t,r,s),components:$v,items:n}},ey=Zr("type"),ty=Zr("name"),ny=Zr("label"),ry=Zr("text"),sy=Zr("title"),iy=Zr("icon"),oy=Zr("value"),ay=es("fetch"),ly=es("getSubmenuItems"),cy=es("onAction"),dy=es("onItemAction"),uy=ys("onSetup",(()=>v)),hy=as("name"),my=as("text"),py=as("icon"),fy=as("tooltip"),gy=as("label"),vy=as("shortcut"),yy=cs("select"),_y=vs("active",!1),by=vs("borderless",!1),wy=vs("enabled",!0),xy=vs("primary",!1),My=e=>hs("columns",e),Sy=hs("meta",{}),Ty=ys("onAction",v),Cy=e=>fs("type",e),Ey=e=>Wr("name","name",cr((()=>ro(`${e}-name`))),Or),ky=Sr([ey,my]),Ly=Sr([Cy("autocompleteitem"),_y,wy,Sy,oy,my,py]),Ay=[wy,fy,py,my,uy],Dy=Sr([ey,cy].concat(Ay)),Oy=e=>jr("toolbarbutton",Dy,e),Ry=[_y].concat(Ay),Py=Sr(Ry.concat([ey,cy])),Ny=e=>jr("ToggleButton",Py,e),Iy=[ys("predicate",C),gs("scope","node",["node","editor"]),gs("position","selection",["node","selection","line"])],zy=Ay.concat([Cy("contextformbutton"),xy,cy,Gr("original",b)]),By=Ry.concat([Cy("contextformbutton"),xy,cy,Gr("original",b)]),Fy=Ay.concat([Cy("contextformbutton")]),Hy=Ry.concat([Cy("contextformtogglebutton")]),jy=$r("type",{contextformbutton:zy,contextformtogglebutton:By}),Uy=Sr([Cy("contextform"),ys("initValue",_("")),gy,rs("commands",jy),is("launch",$r("type",{contextformbutton:Fy,contextformtogglebutton:Hy}))].concat(Iy)),Yy=Sr([Cy("contexttoolbar"),Zr("items")].concat(Iy)),Vy=[ey,Zr("src"),as("alt"),_s("classes",[],Or)],$y=Sr(Vy),Wy=[ey,ry,hy,_s("classes",["tox-collection__item-label"],Or)],Gy=Sr(Wy),qy=wr((()=>Br("type",{cardimage:$y,cardtext:Gy,cardcontainer:Xy}))),Xy=Sr([ey,fs("direction","horizontal"),fs("align","left"),fs("valign","middle"),rs("items",qy)]),Ky=[wy,my,vy,(Jy="menuitem",Wr("value","value",cr((()=>ro(`${Jy}-value`))),Lr())),Sy];var Jy;const Zy=Sr([ey,gy,rs("items",qy),uy,Ty].concat(Ky)),Qy=Sr([ey,_y,py].concat(Ky)),e_=[ey,Zr("fancytype"),Ty],t_=[hs("initData",{})].concat(e_),n_=[bs("initData",{},[vs("allowCustomColors",!0),ds("colors",Lr())])].concat(e_),r_=$r("fancytype",{inserttable:t_,colorswatch:n_}),s_=Sr([ey,uy,Ty,py].concat(Ky)),i_=Sr([ey,ly,uy,py].concat(Ky)),o_=Sr([ey,py,_y,uy,cy].concat(Ky)),a_=(e,t,n)=>{const r=od(e.element,"."+n);if(r.length>0){const e=W(r,(e=>{const n=e.dom.getBoundingClientRect().top,s=r[0].dom.getBoundingClientRect().top;return Math.abs(n-s)>t})).getOr(r.length);return L.some({numColumns:e,numRows:Math.ceil(r.length/e)})}return L.none()},l_=(e,t)=>Al([vf(e,t)]),c_=e=>l_(ro("unnamed-events"),e),d_=ro("tooltip.exclusive"),u_=ro("tooltip.show"),h_=ro("tooltip.hide"),m_=(e,t,n)=>{e.getSystem().broadcastOn([d_],{})};var p_=Object.freeze({__proto__:null,hideAllExclusive:m_,setComponents:(e,t,n,r)=>{n.getTooltip().each((e=>{e.getSystem().isConnected()&&gf.set(e,r)}))}});var f_=Object.freeze({__proto__:null,events:(e,t)=>{const n=n=>{t.getTooltip().each((r=>{Kd(r),e.onHide(n,r),t.clearTooltip()})),t.clearTimer()};return Pi(G([[zi(u_,(n=>{t.resetTimer((()=>{(n=>{if(!t.isShowing()){m_(n);const r=e.lazySink(n).getOrDie(),s=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Pi("normal"===e.mode?[zi(Ys(),(e=>{ki(n,u_)})),zi(js(),(e=>{ki(n,h_)}))]:[]),behaviours:Al([gf.config({})])});t.setTooltip(s),Gd(r,s),e.onShow(n,s),Fd.position(r,s,{anchor:e.anchor(n)})}})(n)}),e.delay)})),zi(h_,(r=>{t.resetTimer((()=>{n(r)}),e.delay)})),zi(oi(),((e,t)=>{const r=t;r.universal||N(r.channels,d_)&&n(e)})),Wi((e=>{n(e)}))],"normal"===e.mode?[zi(Vs(),(e=>{ki(e,u_)})),zi(si(),(e=>{ki(e,h_)})),zi(Ys(),(e=>{ki(e,u_)})),zi(js(),(e=>{ki(e,h_)}))]:[zi(Ci(),((e,t)=>{ki(e,u_)})),zi(Ei(),(e=>{ki(e,h_)}))]]))}}),g_=[Xr("lazySink"),Xr("tooltipDom"),hs("exclusive",!0),hs("tooltipComponents",[]),hs("delay",300),gs("mode","normal",["normal","follow-highlight"]),hs("anchor",(e=>({type:"hotspot",hotspot:e,layouts:{onLtr:_([fl,pl,dl,hl,ul,ml]),onRtl:_([fl,pl,dl,hl,ul,ml])}}))),za("onHide"),za("onShow")];const v_=Ol({fields:g_,name:"tooltipping",active:f_,state:Object.freeze({__proto__:null,init:()=>{const e=oc(),t=oc(),n=()=>{e.on(clearTimeout)},r=_("not-implemented");return xo({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:(t,r)=>{n(),e.set(setTimeout(t,r))},readState:r})}}),apis:p_}),y_="silver.readonly",__=Sr([(b_="readonly",Kr(b_,Rr))]);var b_;const w_=(e,t)=>{const n=e.outerContainer.element;t&&(e.mothership.broadcastOn([hu()],{target:n}),e.uiMothership.broadcastOn([hu()],{target:n})),e.mothership.broadcastOn([y_],{readonly:t}),e.uiMothership.broadcastOn([y_],{readonly:t})},x_=(e,t)=>{e.on("init",(()=>{e.mode.isReadOnly()&&w_(t,!0)})),e.on("SwitchMode",(()=>w_(t,e.mode.isReadOnly()))),Ag(e)&&e.mode.set("readonly")},M_=()=>Il.config({channels:{[y_]:{schema:__,onReceive:(e,t)=>{em.set(e,t.readonly)}}}}),S_=e=>em.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),T_=e=>em.config({disabled:e}),C_=e=>em.config({disabled:e,disableClass:"tox-tbtn--disabled"}),E_=e=>em.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),k_=(e,t)=>{const n=e.getApi(t);return e=>{e(n)}},L_=(e,t)=>$i((n=>{k_(e,n)((n=>{const r=e.onSetup(n);p(r)&&t.set(r)}))})),A_=(e,t)=>Wi((n=>k_(e,n)(t.get()))),D_=(e,t)=>qi(((n,r)=>{k_(e,n)(e.onAction),e.triggersSubmenu||t!==kv.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&ki(n,ui()),r.stop())})),O_={[ai()]:["disabling","alloy.base.behaviour","toggling","item-events"]},R_=be,P_=(e,t,n,r)=>{const s=ws(v);return{type:"item",dom:t.dom,components:R_(t.optComponents),data:e.data,eventOrder:O_,hasSubmenu:e.triggersSubmenu,itemBehaviours:Al([vf("item-events",[D_(e,n),L_(e,s),A_(e,s)]),S_((()=>!e.enabled||r.isDisabled())),M_(),gf.config({})].concat(e.itemBehaviours))}},N_=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),I_=e=>{const t=Cg.os.isMacOS()||Cg.os.isiOS(),n=t?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},r=e.split("+"),s=F(r,(e=>{const t=e.toLowerCase().trim();return ve(n,t)?n[t]:e}));return t?s.join(""):s.join("+")},z_=(e,t,n=[Pv])=>_g(e,{tag:"div",classes:n},t),B_=e=>({dom:{tag:"div",classes:[Nv]},components:[ia(dg.translate(e))]}),F_=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),H_=(e,t)=>({dom:{tag:"div",classes:[Nv]},components:[{dom:{tag:e.tag,styles:e.styles},components:[ia(dg.translate(t))]}]}),j_=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[ia(I_(e))]}),U_=e=>z_("checkmark",e,["tox-collection__item-checkmark"]),Y_=(e,t,n)=>{const r=e.ariaLabel,s=e.value,i=e.iconContent.map((e=>((e,t,n)=>{const r=t();return fg(e,r).or(n).getOrThunk(mg(r))})(e,t.icons,n)));return{dom:(()=>{const e=i.getOr(""),n=r.map((e=>({title:t.translate(e)}))).getOr({}),o={tag:"div",attributes:n,classes:["tox-swatch"]};return"custom"===s?{...o,tag:"button",classes:[...o.classes,"tox-swatches__picker-btn"],innerHtml:e}:"remove"===s?{...o,classes:[...o.classes,"tox-swatch--remove"],innerHtml:e}:{...o,attributes:{...o.attributes,"data-mce-color":s},styles:{"background-color":s}}})(),optComponents:[]}},V_=e=>{const t=e.map((e=>({attributes:{title:dg.translate(e)}}))).getOr({});return{tag:"div",classes:[Lv,Av],...t}},$_=(e,t,n,r=L.none())=>"color"===e.presets?Y_(e,t,r):((e,t,n,r)=>{const s={tag:"div",classes:[Pv]},i=n?e.iconContent.map((e=>_g(e,s,t.icons,r))).orThunk((()=>L.some({dom:s}))):L.none(),o=e.checkMark,a=L.from(e.meta).fold((()=>B_),(e=>ve(e,"style")?x(H_,e.style):B_)),l=e.htmlContent.fold((()=>e.textContent.map(a)),(e=>L.some(F_(e,[Nv]))));return{dom:V_(e.ariaLabel),optComponents:[i,l,e.shortcutContent.map(j_),o,e.caret]}})(e,t,n,r),W_=(e,t)=>ge(e,"tooltipWorker").map((e=>[v_.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:e=>({type:"submenu",item:e,overrides:{maxHeightFunction:wc}}),mode:"follow-highlight",onShow:(t,n)=>{e((e=>{v_.setComponents(t,[oa({element:De.fromDom(e)})])}))}})])).getOr([]),G_=(e,t)=>{const n=(e=>Sg.DOM.encode(e))(dg.translate(e));if(t.length>0){const e=new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t),"gi");return n.replace(e,(e=>`<span class="tox-autocompleter-highlight">${e}</span>`))}return n},q_=(e,t)=>F(e,(e=>{switch(e.type){case"cardcontainer":return((e,t)=>{const n="vertical"===e.direction?"tox-collection__item-container--column":Fv,r="left"===e.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[Bv,n,r,(()=>{switch(e.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:t}})(e,q_(e.items,t));case"cardimage":return((e,t,n)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}))(e.src,e.classes,e.alt);case"cardtext":const n=e.name.exists((e=>N(t.cardText.highlightOn,e))),r=n?L.from(t.cardText.matchText).getOr(""):"";return F_(G_(e.text,r),e.classes)}})),X_=ph(Wf(),Gf()),K_=e=>({value:e}),J_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Z_=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Q_=e=>J_.test(e)||Z_.test(e),eb=e=>((e,t)=>Te(e,t)?((e,t)=>e.substring(t))(e,t.length):e)(e,"#").toUpperCase(),tb=e=>{const t=(e=>{const t=e.value.replace(J_,((e,t,n,r)=>t+t+n+n+r+r));return{value:t}})(e),n=Z_.exec(t.value);return null===n?["FFFFFF","FF","FF","FF"]:n},nb=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},rb=e=>{const t=nb(e.red)+nb(e.green)+nb(e.blue);return K_(t)},sb=Math.min,ib=Math.max,ob=Math.round,ab=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,lb=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,cb=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),db=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},ub=e=>{let t,n,r;const s=(e.hue||0)%360;let i=e.saturation/100,o=e.value/100;if(i=ib(0,sb(i,1)),o=ib(0,sb(o,1)),0===i)return t=n=r=ob(255*o),cb(t,n,r,1);const a=s/60,l=o*i,c=l*(1-Math.abs(a%2-1)),d=o-l;switch(Math.floor(a)){case 0:t=l,n=c,r=0;break;case 1:t=c,n=l,r=0;break;case 2:t=0,n=l,r=c;break;case 3:t=0,n=c,r=l;break;case 4:t=c,n=0,r=l;break;case 5:t=l,n=0,r=c;break;default:t=n=r=0}return t=ob(255*(t+d)),n=ob(255*(n+d)),r=ob(255*(r+d)),cb(t,n,r,1)},hb=e=>{const t=tb(e),n=parseInt(t[1],16),r=parseInt(t[2],16),s=parseInt(t[3],16);return cb(n,r,s,1)},mb=(e,t,n,r)=>{const s=parseInt(e,10),i=parseInt(t,10),o=parseInt(n,10),a=parseFloat(r);return cb(s,i,o,a)},pb=e=>{if("transparent"===e)return L.some(cb(0,0,0,0));const t=ab.exec(e);if(null!==t)return L.some(mb(t[1],t[2],t[3],"1"));const n=lb.exec(e);return null!==n?L.some(mb(n[1],n[2],n[3],n[4])):L.none()},fb=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,gb=cb(255,0,0,1),vb=(e,t)=>e.dispatch("ResizeContent",t),yb=(e,t,n)=>({hue:e,saturation:t,value:n}),_b=e=>{let t=0,n=0,r=0;const s=e.red/255,i=e.green/255,o=e.blue/255,a=Math.min(s,Math.min(i,o)),l=Math.max(s,Math.max(i,o));if(a===l)return r=a,yb(0,0,100*r);return t=s===a?3:o===a?1:5,t=60*(t-(s===a?i-o:o===a?s-i:o-s)/(l-a)),n=(l-a)/l,r=l,yb(Math.round(t),Math.round(100*n),Math.round(100*r))},bb=e=>rb(ub(e)),wb=e=>{return(t=e,Q_(t)?L.some({value:eb(t)}):L.none()).orThunk((()=>pb(e).map(rb))).getOrThunk((()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=e,n.fillRect(0,0,1,1);const r=n.getImageData(0,0,1,1).data,s=r[0],i=r[1],o=r[2],a=r[3];return rb(cb(s,i,o,a))}));var t};var xb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const Mb="tinymce-custom-colors";const Sb=((e=10)=>{const t=xb.getItem(Mb),n=i(t)?JSON.parse(t):[],r=e-(s=n).length<0?s.slice(0,e):s;var s;const o=e=>{r.splice(e,1)};return{add:t=>{P(r,t).each(o),r.unshift(t),r.length>e&&r.pop(),xb.setItem(Mb,JSON.stringify(r))},state:()=>r.slice(0)}})(10),Tb=e=>{const t=[];for(let n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+wb(e[n]).value,type:"choiceitem"});return t},Cb=e=>t=>t.options.get(e),Eb=Cb("color_cols"),kb=Cb("custom_colors"),Lb=Cb("color_map"),Ab=e=>{Sb.add(e)},Db="#000000",Ob=e=>{const t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[n,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]},Rb=(e,t,n,r)=>{if("custom"===n){Fb(e)((n=>{n.each((n=>{Ab(n),e.execCommand("mceApplyTextcolor",t,n),r(n)}))}),Db)}else"remove"===n?(r(""),e.execCommand("mceRemoveTextcolor",t)):(r(n),e.execCommand("mceApplyTextcolor",t,n))},Pb=(e,t)=>e.concat(F(Sb.state(),(e=>({type:"choiceitem",text:e,value:e}))).concat(Ob(t))),Nb=(e,t)=>n=>{n(Pb(e,t))},Ib=(e,t,n)=>{const r="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(r,n)},zb=(e,t,n,r,s)=>{e.ui.registry.addSplitButton(t,{tooltip:r,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:t=>{const r=((e,t)=>{let n;return e.dom.getParents(e.selection.getStart(),(e=>{let r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=n||r)})),L.from(n)})(e,n);return r.bind((e=>pb(e).map((e=>{const n=rb(e).value;return Se(t.toLowerCase(),n)})))).getOr(!1)},columns:Eb(e),fetch:Nb(Lb(e),kb(e)),onAction:t=>{Rb(e,n,s.get(),v)},onItemAction:(r,i)=>{Rb(e,n,i,(n=>{s.set(n),((e,t)=>{e.dispatch("TextColorChange",t)})(e,{name:t,color:n})}))},onSetup:n=>{Ib(n,t,s.get());const r=e=>{e.name===t&&Ib(n,e.name,e.color)};return e.on("TextColorChange",r),()=>{e.off("TextColorChange",r)}}})},Bb=(e,t,n,r)=>{e.ui.registry.addNestedMenuItem(t,{text:r,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",onAction:t=>{Rb(e,n,t.value,v)}}]})},Fb=e=>(t,n)=>{let r=!1;const s={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s,onAction:(e,t)=>{"hex-valid"===t.name&&(r=t.value)},onSubmit:n=>{const s=n.getData().colorpicker;r?(t(L.from(s)),n.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",s]))},onClose:v,onCancel:()=>{t(L.none())}})},Hb=(e,t,n,r,s,i,o,a)=>{const l=Kv(t),c=jb(t,n,r,"color"!==s?"normal":"color",i,o,a);return Qv(e,l,c,r,s)},jb=(e,t,n,r,s,i,o)=>be(F(e,(a=>{return"choiceitem"===a.type?(l=a,jr("choicemenuitem",Qy,l)).fold(Jv,(l=>L.some(((e,t,n,r,s,i,o,a=!0)=>{const l=$_({presets:n,textContent:t?e.text:L.none(),htmlContent:L.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:L.none(),checkMark:t?L.some(U_(o.icons)):L.none(),caret:L.none(),value:e.value},o,a);return ar(P_({data:N_(e),enabled:e.enabled,getApi:e=>({setActive:t=>{Pf.set(e,t)},isActive:()=>Pf.isOn(e),isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),onAction:t=>r(e.value),onSetup:e=>(e.setActive(s),v),triggersSubmenu:!1,itemBehaviours:[]},l,i,o),{toggling:{toggleClass:Rv,toggleOnExecute:!1,selected:e.active}})})(l,1===n,r,t,i(a.value),s,o,Kv(e))))):L.none();var l}))),Ub=(e,t)=>{const n=Yv(t);if(1===e)return{mode:"menu",moveOnTab:!0};if("auto"===e)return{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}};return{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},Yb=(e,t)=>{const n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold((()=>Pb(t.colorinput.getColors(),n)),(e=>e.concat(Ob(n))))},Vb=ro("cell-over"),$b=ro("cell-execute"),Wb=(e,t,n)=>{const r=n=>Li(n,$b,{row:e,col:t}),s=(e,t)=>{t.stop(),r(e)};return ca({dom:{tag:"div",attributes:{role:"button","aria-labelledby":n}},behaviours:Al([vf("insert-table-picker-cell",[zi(Ys(),xf.focus),zi(ai(),r),zi(Ks(),s),zi(ci(),s)]),Pf.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),xf.config({onFocus:n=>Li(n,Vb,{row:e,col:t})})])})},Gb=e=>q(e,(e=>F(e,da))),qb=(e,t)=>ia(`${t}x${e}`),Xb={inserttable:e=>{const t=ro("size-label"),n=((e,t,n)=>{const r=[];for(let s=0;s<t;s++){const t=[];for(let r=0;r<n;r++)t.push(Wb(s,r,e));r.push(t)}return r})(t,10,10),r=qb(0,0),s=cg({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[r],behaviours:Al([gf.config({})])});return{type:"widget",data:{value:ro("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[X_.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Gb(n).concat(s.asSpec()),behaviours:Al([vf("insert-table-picker",[$i((e=>{gf.set(s.get(e),[r])})),ji(Vb,((e,t,r)=>{const{row:i,col:o}=r.event;((e,t,n,r,s)=>{for(let i=0;i<r;i++)for(let r=0;r<s;r++)Pf.set(e[i][r],i<=t&&r<=n)})(n,i,o,10,10),gf.set(s.get(e),[qb(i+1,o+1)])})),ji($b,((t,n,r)=>{const{row:s,col:i}=r.event;e.onAction({numRows:s+1,numColumns:i+1}),ki(t,ui())}))]),af.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,t)=>{const n=Yb(e,t),r=t.colorinput.getColorCols(),s="color",i=Hb(ro("menu-value"),n,(t=>{e.onAction({value:t})}),r,s,kv.CLOSE_ON_EXECUTE,C,t.shared.providers),o={...i,markers:Yv(s),movement:Ub(r,s)};return{type:"widget",data:{value:ro("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[X_.widget(Qf.sketch(o))]}}},Kb=(e,t,n,r,s,i,o,a=!0)=>{const l=$_({presets:r,textContent:L.none(),htmlContent:n?e.text.map((e=>G_(e,t))):L.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:L.none(),checkMark:L.none(),caret:L.none(),value:e.value},o.providers,a,e.icon);return P_({data:N_(e),enabled:e.enabled,getApi:_({}),onAction:t=>s(e.value,e.meta),onSetup:_(v),triggersSubmenu:!1,itemBehaviours:W_(e.meta,o)},l,i,o.providers)},Jb=e=>({type:"separator",dom:{tag:"div",classes:[Av,"tox-collection__group-heading"]},components:e.text.map(ia).toArray()}),Zb=(e,t,n,r=!0)=>{const s=$_({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:L.none(),ariaLabel:e.text,caret:L.none(),checkMark:L.none(),shortcutContent:e.shortcut},n,r);return P_({data:N_(e),getApi:e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},s,t,n)},Qb=(e,t,n,r=!0,s=!1)=>{const i=s?(o=n.icons,z_("chevron-down",o,[Iv])):(e=>z_("chevron-right",e,[Iv]))(n.icons);var o;const a=$_({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:L.none(),ariaLabel:e.text,caret:L.some(i),checkMark:L.none(),shortcutContent:e.shortcut},n,r);return P_({data:N_(e),getApi:e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),enabled:e.enabled,onAction:v,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,t,n)},ew=(e,t,n,r=!0)=>{const s=$_({iconContent:e.icon,textContent:e.text,htmlContent:L.none(),ariaLabel:e.text,checkMark:L.some(U_(n.icons)),caret:L.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,r);return ar(P_({data:N_(e),enabled:e.enabled,getApi:e=>({setActive:t=>{Pf.set(e,t)},isActive:()=>Pf.isOn(e),isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},s,t,n),{toggling:{toggleClass:Rv,toggleOnExecute:!1,selected:e.active}})},tw=(e,t)=>ge(Xb,e.fancytype).map((n=>n(e,t))),nw=(e,t,n,r)=>{const s={dom:V_(e.label),optComponents:[L.some({dom:{tag:"div",classes:[Bv,Fv]},components:q_(e.items,r)})]};return P_({data:N_({text:L.none(),...e}),enabled:e.enabled,getApi:e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>{em.set(e,!t),H(od(e.element,"*"),(n=>{e.getSystem().getByDom(n).each((e=>{e.hasConfigured(em)&&em.set(e,!t)}))}))}}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:L.from(r.itemBehaviours).getOr([])},s,t,n.providers)};var rw;!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(rw||(rw={}));const sw=(e,t,n,r,s)=>{const i=n.shared.providers,o=e=>s?{...e,shortcut:L.none(),icon:e.text.isSome()?L.none():e.icon}:e;switch(e.type){case"menuitem":return(a=e,jr("menuitem",s_,a)).fold(Jv,(e=>L.some(Zb(o(e),t,i,r))));case"nestedmenuitem":return(e=>jr("nestedmenuitem",i_,e))(e).fold(Jv,(e=>L.some(Qb(o(e),t,i,r,s))));case"togglemenuitem":return(e=>jr("togglemenuitem",o_,e))(e).fold(Jv,(e=>L.some(ew(o(e),t,i,r))));case"separator":return(e=>jr("separatormenuitem",ky,e))(e).fold(Jv,(e=>L.some(Jb(e))));case"fancymenuitem":return(e=>jr("fancymenuitem",r_,e))(e).fold(Jv,(e=>tw(o(e),n)));default:return console.error("Unknown item in general menu",e),L.none()}var a},iw=(e,t,n,r,s,i,o)=>{const a=1===r,l=!a||Kv(e);return be(F(e,(e=>{switch(e.type){case"separator":return(r=e,jr("Autocompleter.Separator",ky,r)).fold(Jv,(e=>L.some(Jb(e))));case"cardmenuitem":return(e=>jr("cardmenuitem",Zy,e))(e).fold(Jv,(e=>L.some(nw({...e,onAction:t=>{e.onAction(t),n(e.value,e.meta)}},s,i,{itemBehaviours:W_(e.meta,i),cardText:{matchText:t,highlightOn:o}}))));default:return(e=>jr("Autocompleter.Item",Ly,e))(e).fold(Jv,(e=>L.some(Kb(e,t,a,"normal",n,s,i,l))))}var r})))},ow=(e,t,n,r,s)=>{const i=Kv(t),o=be(F(t,(e=>{const t=e=>sw(e,n,r,(e=>s?!ve(e,"text"):i)(e),s);return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t({...e,enabled:!1}):t(e)})));return(s?Zv:Qv)(e,i,o,1,"normal")},aw=e=>ig.singleData(e.value,e),lw=(e,t)=>{const n=ws(!1),r=ws(!1),s=ca(og.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Al([vf("dismissAutocompleter",[zi(bi(),(()=>l()))])]),lazySink:t.getSink})),i=()=>og.isOpen(s),o=r.get,a=()=>{i()&&og.hide(s)},l=()=>e.execCommand("mceAutocompleterClose"),c=r=>{const s=ie(r,(e=>L.from(e.columns))).getOr(1);return q(r,(r=>{const i=r.items;return iw(i,r.matchText,((t,s)=>{const i=e.selection.getRng();((e,t)=>Tv(De.fromDom(t.startContainer)).map((t=>{const n=e.createRng();return n.selectNode(t.dom),n})))(e.dom,i).each((i=>{const o={hide:()=>l(),reload:t=>{a(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:t})}};n.set(!0),r.onAction(o,i,t,s),n.set(!1)}))}),s,kv.BUBBLE_TO_SANDBOX,t,r.highlightOn)}))},d=(t,n)=>{var r;(r=De.fromDom(e.getBody()),va(r,Sv)).each((r=>{const i=ie(t,(e=>L.from(e.columns))).getOr(1);og.showAt(s,Qf.sketch(((e,t,n,r)=>{const s=n===rw.ContentFocus?Rm():Om(),i=Ub(t,r),o=Yv(r);return{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:o.selectedItem,item:o.item},movement:i,fakeFocus:n===rw.ContentFocus,focusManager:s,menuBehaviours:c_("auto"!==t?[]:[$i(((e,t)=>{a_(e,4,o.item).each((({numColumns:t,numRows:n})=>{af.setGridSize(e,n,t)}))}))])}})(Qv("autocompleter-value",!0,n,i,"normal"),i,rw.ContentFocus,"normal")),{anchor:{type:"node",root:De.fromDom(e.getBody()),node:L.from(r)}}),og.getContent(s).each(um.highlightFirst)}))},u=e=>{const t=c(e);t.length>0?d(e,t):a()};e.on("AutocompleterStart",(({lookupData:e})=>{r.set(!0),n.set(!1),u(e)})),e.on("AutocompleterUpdate",(({lookupData:e})=>u(e))),e.on("AutocompleterEnd",(()=>{a(),r.set(!1),n.set(!1)}));const h={cancelIfNecessary:l,isMenuOpen:i,isActive:o,isProcessingAction:n.get,getView:()=>og.getContent(s)};Cv(h,e)},cw=(e,t,n)=>ya(e,t,n).isSome(),dw=(e,t)=>{let n=null;return{cancel:()=>{null!==n&&(clearTimeout(n),n=null)},schedule:(...r)=>{n=setTimeout((()=>{e.apply(null,r),n=null}),t)}}},uw=e=>{const t=e.raw;return void 0===t.touches||1!==t.touches.length?L.none():L.some(t.touches[0])},hw=e=>{const t=oc(),n=ws(!1),r=dw((t=>{e.triggerEvent(di(),t),n.set(!0)}),400),s=Ts([{key:Ns(),value:e=>(uw(e).each((s=>{r.cancel();const i={x:s.clientX,y:s.clientY,target:e.target};r.schedule(e),n.set(!1),t.set(i)})),L.none())},{key:Is(),value:e=>(r.cancel(),uw(e).each((e=>{t.on((n=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5})(e,n)&&t.clear()}))})),L.none())},{key:zs(),value:s=>{r.cancel();return t.get().filter((e=>je(e.target,s.target))).map((t=>n.get()?(s.prevent(),!1):e.triggerEvent(ci(),s)))}}]);return{fireIfReady:(e,t)=>ge(s,t).bind((t=>t(e)))}},mw=(e,t)=>{const n={stopBackspace:!0,...t},r=hw(n),s=F(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(t=>lc(e,t,(e=>{r.fireIfReady(e,t).each((t=>{t&&e.kill()}));n.triggerEvent(t,e)&&e.kill()})))),i=oc(),o=lc(e,"paste",(e=>{r.fireIfReady(e,"paste").each((t=>{t&&e.kill()}));n.triggerEvent("paste",e)&&e.kill(),i.set(setTimeout((()=>{n.triggerEvent(ii(),e)}),0))})),a=lc(e,"keydown",(e=>{n.triggerEvent("keydown",e)?e.kill():n.stopBackspace&&(e=>e.raw.which===hm[0]&&!N(["input","textarea"],Oe(e.target))&&!cw(e.target,'[contenteditable="true"]'))(e)&&e.prevent()})),l=lc(e,"focusin",(e=>{n.triggerEvent("focusin",e)&&e.kill()})),c=oc(),d=lc(e,"focusout",(e=>{n.triggerEvent("focusout",e)&&e.kill(),c.set(setTimeout((()=>{n.triggerEvent(si(),e)}),0))}));return{unbind:()=>{H(s,(e=>{e.unbind()})),a.unbind(),l.unbind(),d.unbind(),o.unbind(),i.on(clearTimeout),c.on(clearTimeout)}}},pw=(e,t)=>{const n=ge(e,"target").getOr(t);return ws(n)},fw=xs([{stopped:[]},{resume:["element"]},{complete:[]}]),gw=(e,t,n,r,s,i)=>{const o=e(t,r),a=((e,t)=>{const n=ws(!1),r=ws(!1);return{stop:()=>{n.set(!0)},cut:()=>{r.set(!0)},isStopped:n.get,isCut:r.get,event:e,setSource:t.set,getSource:t.get}})(n,s);return o.fold((()=>(i.logEventNoHandlers(t,r),fw.complete())),(e=>{const n=e.descHandler;return To(n)(a),a.isStopped()?(i.logEventStopped(t,e.element,n.purpose),fw.stopped()):a.isCut()?(i.logEventCut(t,e.element,n.purpose),fw.complete()):Ge(e.element).fold((()=>(i.logNoParent(t,e.element,n.purpose),fw.complete())),(r=>(i.logEventResponse(t,e.element,n.purpose),fw.resume(r))))}))},vw=(e,t,n,r,s,i)=>gw(e,t,n,r,s,i).fold(E,(r=>vw(e,t,n,r,s,i)),C),yw=(e,t,n)=>{const r=(e=>{const t=ws(!1);return{stop:()=>{t.set(!0)},cut:v,isStopped:t.get,isCut:C,event:e,setSource:S("Cannot set source of a broadcasted event"),getSource:S("Cannot get source of a broadcasted event")}})(t);return H(e,(e=>{const t=e.descHandler;To(t)(r)})),r.isStopped()},_w=(e,t,n,r,s)=>{const i=pw(n,r);return vw(e,t,n,r,i,s)},bw=()=>{const e={};return{registerId:(t,n,r)=>{le(r,((r,s)=>{const i=void 0!==e[s]?e[s]:{};i[n]=((e,t)=>{return n=x.apply(void 0,[e.handler].concat(t)),r=e.purpose,{cHandler:n,purpose:r};var n,r})(r,t),e[s]=i}))},unregisterId:t=>{le(e,((e,n)=>{ve(e,t)&&delete e[t]}))},filterByType:t=>ge(e,t).map((e=>me(e,((e,t)=>((e,t)=>({id:e,descHandler:t}))(t,e))))).getOr([]),find:(t,n,r)=>ge(e,n).bind((e=>Ls(r,(t=>((e,t)=>co(t).bind((t=>ge(e,t))).map((e=>((e,t)=>({element:e,descHandler:t}))(t,e))))(e,t)),t)))}},ww=()=>{const e=bw(),t={},n=e=>{const t=e.element;return co(t).getOrThunk((()=>((e,t)=>{const n=ro(oo+e);return lo(t,n),n})("uid-",e.element)))},r=n=>{co(n.element).each((n=>{delete t[n],e.unregisterId(n)}))};return{find:(t,n,r)=>e.find(t,n,r),filter:t=>e.filterByType(t),register:s=>{const i=n(s);ye(t,i)&&((e,n)=>{const s=t[n];if(s!==e)throw new Error('The tagId "'+n+'" is already used by: '+Qi(s.element)+"\nCannot use it for: "+Qi(e.element)+"\nThe conflicting element is"+(lt(s.element)?" ":" not ")+"already in the DOM");r(e)})(s,i);const o=[s];e.registerId(o,i,s.events),t[i]=s},unregister:r,getById:e=>ge(t,e)}},xw=Nh({name:"Container",factory:e=>{const{attributes:t,...n}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...t},...n},components:e.components,behaviours:Ru(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[hs("components",[]),Ou("containerBehaviours",[]),hs("events",{}),hs("domModification",{}),hs("eventOrder",{})]}),Mw=e=>{const t=t=>Ge(e.element).fold(E,(e=>je(t,e))),n=ww(),r=(e,r)=>n.find(t,e,r),s=mw(e.element,{triggerEvent:(e,t)=>ka(e,t.target,(n=>((e,t,n,r)=>_w(e,t,n,n.target,r))(r,e,t,n)))}),i={debugInfo:_("real"),triggerEvent:(e,t,n)=>{ka(e,t,(s=>_w(r,e,n,t,s)))},triggerFocus:(e,t)=>{co(e).fold((()=>{Bl(e)}),(n=>{ka(ri(),e,(n=>(((e,t,n,r,s)=>{const i=pw(n,r);gw(e,t,n,r,i,s)})(r,ri(),{originator:t,kill:v,prevent:v,target:e},e,n),!1)))}))},triggerEscape:(e,t)=>{i.triggerEvent("keydown",e.element,t.event)},getByUid:e=>p(e),getByDom:e=>f(e),build:ca,buildOrPatch:la,addToGui:e=>{l(e)},removeFromGui:e=>{c(e)},addToWorld:e=>{o(e)},removeFromWorld:e=>{a(e)},broadcast:e=>{u(e)},broadcastOn:(e,t)=>{h(e,t)},broadcastEvent:(e,t)=>{m(e,t)},isConnected:E},o=e=>{e.connect(i),Ne(e.element)||(n.register(e),H(e.components(),o),i.triggerEvent(mi(),e.element,{target:e.element}))},a=e=>{Ne(e.element)||(H(e.components(),a),n.unregister(e)),e.disconnect()},l=t=>{Gd(e,t)},c=e=>{Kd(e)},d=e=>{const t=n.filter(oi());H(t,(t=>{const n=t.descHandler;To(n)(e)}))},u=e=>{d({universal:!0,data:e})},h=(e,t)=>{d({universal:!1,channels:e,data:t})},m=(e,t)=>{const r=n.filter(e);return yw(r,t)},p=e=>n.getById(e).fold((()=>Yn.error(new Error('Could not find component with uid: "'+e+'" in system.'))),Yn.value),f=e=>{const t=co(e).getOr("not found");return p(t)};return o(e),{root:e,element:e.element,destroy:()=>{s.unbind(),kn(e.element)},add:l,remove:c,getByUid:p,getByDom:f,addToWorld:o,removeFromWorld:a,broadcast:u,broadcastOn:h,broadcastEvent:m}},Sw=_([hs("prefix","form-field"),Ou("fieldBehaviours",[Hh,Du])]),Tw=_([ch({schema:[Xr("dom")],name:"label"}),ch({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Xr("text")],name:"aria-descriptor"}),ah({factory:{sketch:e=>{const t=Ms(e,["factory"]);return e.factory.sketch(t)}},schema:[Xr("factory")],name:"field"})]),Cw=Ih({name:"FormField",configFields:Sw(),partFields:Tw(),factory:(e,t,n,r)=>{const s=Pu(e.fieldBehaviours,[Hh.config({find:t=>wh(t,e,"field")}),Du.config({store:{mode:"manual",getValue:e=>Hh.getCurrent(e).bind(Du.getValue),setValue:(e,t)=>{Hh.getCurrent(e).each((e=>{Du.setValue(e,t)}))}}})]),i=Pi([$i(((t,n)=>{const r=Mh(t,e,["label","field","aria-descriptor"]);r.field().each((t=>{const n=ro(e.prefix);r.label().each((e=>{ht(e.element,"for",n),ht(t.element,"id",n)})),r["aria-descriptor"]().each((n=>{const r=ro(e.prefix);ht(n.element,"id",r),ht(t.element,"aria-describedby",r)}))}))}))]),o={getField:t=>wh(t,e,"field"),getLabel:t=>wh(t,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:s,events:i,apis:o}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var Ew=Object.freeze({__proto__:null,exhibit:(e,t)=>So({attributes:Ts([{key:t.tabAttr,value:"true"}])})}),kw=[hs("tabAttr","data-alloy-tabstop")];const Lw=Ol({fields:kw,name:"tabstopping",active:Ew});var Aw=tinymce.util.Tools.resolve("tinymce.html.Entities");const Dw=(e,t,n,r)=>{const s=Ow(e,t,n,r);return Cw.sketch(s)},Ow=(e,t,n,r)=>({dom:Rw(n),components:e.toArray().concat([t]),fieldBehaviours:Al(r)}),Rw=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),Pw=(e,t)=>Cw.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ia(t.translate(e))]}),Nw=ro("form-component-change"),Iw=ro("form-close"),zw=ro("form-cancel"),Bw=ro("form-action"),Fw=ro("form-submit"),Hw=ro("form-block"),jw=ro("form-unblock"),Uw=ro("form-tabchange"),Yw=ro("form-resize"),Vw=(e,t,n)=>{const r=e.label.map((e=>Pw(e,t))),s=e=>(t,n)=>{ya(n.event.target,"[data-collection-item-value]").each((r=>{e(t,n,r,pt(r,"data-collection-item-value"))}))},i=s(((n,r,s,i)=>{r.stop(),t.isDisabled()||Li(n,Bw,{name:e.name,value:i})})),o=[zi(Ys(),s(((e,t,n)=>{Bl(n)}))),zi(Ks(),i),zi(ci(),i),zi(Vs(),s(((e,t,n)=>{va(e.element,"."+zv).each((e=>{jo(e,zv)})),Ho(n,zv)}))),zi($s(),s((e=>{va(e.element,"."+zv).each((e=>{jo(e,zv)}))}))),qi(s(((t,n,r,s)=>{Li(t,Bw,{name:e.name,value:s})})))],a=(e,t)=>F(od(e.element,".tox-collection__item"),t),l=Cw.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:b},behaviours:Al([em.config({disabled:t.isDisabled,onDisabled:e=>{a(e,(e=>{Ho(e,"tox-collection__item--state-disabled"),ht(e,"aria-disabled",!0)}))},onEnabled:e=>{a(e,(e=>{jo(e,"tox-collection__item--state-disabled"),vt(e,"aria-disabled")}))}}),M_(),gf.config({}),Du.config({store:{mode:"memory",initialValue:n.getOr([])},onSetValue:(n,r)=>{((n,r)=>{const s=F(r,(n=>{const r=dg.translate(n.text),s=1===e.columns?`<div class="tox-collection__item-label">${r}</div>`:"",i=`<div class="tox-collection__item-icon">${n.icon}</div>`,o={_:" "," - ":" ","-":" "},a=r.replace(/\_| \- |\-/g,(e=>o[e]));return`<div class="tox-collection__item${t.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${Aw.encodeAllRaw(n.value)}" title="${a}" aria-label="${a}">${i}${s}</div>`})),i="auto"!==e.columns&&e.columns>1?B(s,e.columns):[s],o=F(i,(e=>`<div class="tox-collection__group">${e.join("")}</div>`));Ki(n.element,o.join(""))})(n,r),"auto"===e.columns&&a_(n,5,"tox-collection__item").each((({numRows:e,numColumns:t})=>{af.setGridSize(n,e,t)})),ki(n,Yw)}}),Lw.config({}),af.config((c=e.columns,d="normal",1===c?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===c?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===d?".tox-swatches__row":".tox-collection__group",cell:"color"===d?".tox-swatch":`.${Av}`}})),vf("collection-events",o)]),eventOrder:{[ai()]:["disabling","alloy.base.behaviour","collection-events"]}});var c,d;return Dw(r,l,["tox-form__group--collection"],[])},$w=_([ss("data"),hs("inputAttributes",{}),hs("inputStyles",{}),hs("tag","input"),hs("inputClasses",[]),za("onSetValue"),hs("styles",{}),hs("eventOrder",{}),Ou("inputBehaviours",[Du,xf]),hs("selectOnFocus",!0)]),Ww=e=>Al([xf.config({onFocus:e.selectOnFocus?e=>{const t=e.element,n=Wo(t);t.dom.setSelectionRange(0,n.length)}:v})]),Gw=e=>({...Ww(e),...Pu(e.inputBehaviours,[Du.config({store:{mode:"manual",...e.data.map((e=>({initialValue:e}))).getOr({}),getValue:e=>Wo(e.element),setValue:(e,t)=>{Wo(e.element)!==t&&Go(e.element,t)}},onSetValue:e.onSetValue})])}),qw=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),Xw=Nh({name:"Input",configFields:$w(),factory:(e,t)=>({uid:e.uid,dom:qw(e),components:[],behaviours:Gw(e),eventOrder:e.eventOrder})}),Kw=e=>{let t=L.none(),n=[];const r=e=>{s()?o(e):n.push(e)},s=()=>t.isSome(),i=e=>{H(e,o)},o=e=>{t.each((t=>{setTimeout((()=>{e(t)}),0)}))};return e((e=>{s()||(t=L.some(e),i(n),n=[])})),{get:r,map:e=>Kw((t=>{r((n=>{t(e(n))}))})),isReady:s}},Jw={nu:Kw,pure:e=>Kw((t=>{t(e)}))},Zw=e=>{setTimeout((()=>{throw e}),0)},Qw=e=>{const t=t=>{e().then(t,Zw)};return{map:t=>Qw((()=>e().then(t))),bind:t=>Qw((()=>e().then((e=>t(e).toPromise())))),anonBind:t=>Qw((()=>e().then((()=>t.toPromise())))),toLazy:()=>Jw.nu(t),toCached:()=>{let t=null;return Qw((()=>(null===t&&(t=e()),t)))},toPromise:e,get:t}},ex=e=>Qw((()=>new Promise(e))),tx=e=>Qw((()=>Promise.resolve(e))),nx=["input","textarea"],rx=e=>{const t=Oe(e);return N(nx,t)},sx=(e,t)=>{const n=t.getRoot(e).getOr(e.element);jo(n,t.invalidClass),t.notify.each((t=>{rx(e.element)&&ht(e.element,"aria-invalid",!1),t.getContainer(e).each((e=>{Ki(e,t.validHtml)})),t.onValid(e)}))},ix=(e,t,n,r)=>{const s=t.getRoot(e).getOr(e.element);Ho(s,t.invalidClass),t.notify.each((t=>{rx(e.element)&&ht(e.element,"aria-invalid",!0),t.getContainer(e).each((e=>{Ki(e,r)})),t.onInvalid(e,r)}))},ox=(e,t,n)=>t.validator.fold((()=>tx(Yn.value(!0))),(t=>t.validate(e))),ax=(e,t,n)=>(t.notify.each((t=>{t.onValidate(e)})),ox(e,t).map((n=>e.getSystem().isConnected()?n.fold((n=>(ix(e,t,0,n),Yn.error(n))),(n=>(sx(e,t),Yn.value(n)))):Yn.error("No longer in system"))));var lx=Object.freeze({__proto__:null,markValid:sx,markInvalid:ix,query:ox,run:ax,isInvalid:(e,t)=>{const n=t.getRoot(e).getOr(e.element);return Uo(n,t.invalidClass)}});var cx=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map((t=>Pi([zi(t.onEvent,(t=>{ax(t,e).get(b)}))].concat(t.validateOnLoad?[$i((t=>{ax(t,e).get(v)}))]:[])))).getOr({})}),dx=[Xr("invalidClass"),hs("getRoot",L.none),us("notify",[hs("aria","alert"),hs("getContainer",L.none),hs("validHtml",""),za("onValid"),za("onInvalid"),za("onValidate")]),us("validator",[Xr("validate"),hs("onEvent","input"),hs("validateOnLoad",!0)])];const ux=Ol({fields:dx,name:"invalidating",active:cx,apis:lx,extra:{validation:e=>t=>{const n=Du.getValue(t);return tx(e(n))}}});var hx=Object.freeze({__proto__:null,getCoupled:(e,t,n,r)=>n.getOrCreate(e,t,r)}),mx=[Kr("others",Hr(Yn.value,Lr()))];var px=Object.freeze({__proto__:null,init:()=>{const e={},t=_({});return xo({readState:t,getOrCreate:(t,n,r)=>{const s=oe(n.others);if(s)return ge(e,r).getOrThunk((()=>{const s=ge(n.others,r).getOrDie("No information found for coupled component: "+r)(t),i=t.getSystem().build(s);return e[r]=i,i}));throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(s,null,2))}})}});const fx=Ol({fields:mx,name:"coupling",apis:hx,state:px}),gx=_("sink"),vx=_(ch({name:gx(),overrides:_({dom:{tag:"div"},behaviours:Al([Fd.config({useFixed:E})]),events:Pi([Ui(Ws()),Ui(Fs()),Ui(Ks())])})}));var yx;!function(e){e[e.HighlightFirst=0]="HighlightFirst",e[e.HighlightNone=1]="HighlightNone"}(yx||(yx={}));const _x=(e,t)=>{const n=e.getHotspot(t).getOr(t),r="hotspot",s=e.getAnchorOverrides();return e.layouts.fold((()=>({type:r,hotspot:n,overrides:s})),(e=>({type:r,hotspot:n,overrides:s,layouts:e})))},bx=(e,t,n,r,s,i,o)=>{const a=((e,t,n,r,s,i,o)=>{const a=((e,t,n)=>(0,e.fetch)(n).map(t))(e,t,r),l=Sx(r,e);return a.map((e=>e.bind((e=>L.from(ig.sketch({...i.menu(),uid:uo(""),data:e,highlightImmediately:o===yx.HighlightFirst,onOpenMenu:(e,t)=>{const r=l().getOrDie();Fd.position(r,t,{anchor:n}),uu.decloak(s)},onOpenSubmenu:(e,t,n)=>{const r=l().getOrDie();Fd.position(r,n,{anchor:{type:"submenu",item:t}}),uu.decloak(s)},onRepositionMenu:(e,t,r)=>{const s=l().getOrDie();Fd.position(s,t,{anchor:n}),H(r,(e=>{Fd.position(s,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})}))},onEscape:()=>(xf.focus(r),uu.close(s),L.some(!0))}))))))})(e,t,_x(e,n),n,r,s,o);return a.map((e=>(e.fold((()=>{uu.isOpen(r)&&uu.close(r)}),(e=>{uu.cloak(r),uu.open(r,e),i(r)})),r)))},wx=(e,t,n,r,s,i,o)=>(uu.close(r),tx(r)),xx=(e,t,n,r,s,i)=>{const o=fx.getCoupled(n,"sandbox");return(uu.isOpen(o)?wx:bx)(e,t,n,o,r,s,i)},Mx=(e,t,n)=>{const r=Hh.getCurrent(t).getOr(t),s=Ht(e.element);n?bt(r.element,"min-width",s+"px"):((e,t)=>{Ft.set(e,t)})(r.element,s)},Sx=(e,t)=>e.getSystem().getByUid(t.uid+"-"+gx()).map((e=>()=>Yn.value(e))).getOrThunk((()=>t.lazySink.fold((()=>()=>Yn.error(new Error("No internal sink is specified, nor could an external sink be found"))),(t=>()=>t(e))))),Tx=e=>{uu.getState(e).each((e=>{ig.repositionMenus(e)}))},Cx=(e,t,n)=>{const r=ba(),s=Sx(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:r.id,role:"listbox"}},behaviours:Iu(e.sandboxBehaviours,[Du.config({store:{mode:"memory",initialValue:t}}),uu.config({onOpen:(s,i)=>{const o=_x(e,t);r.link(t.element),e.matchWidth&&Mx(o.hotspot,i,e.useMinWidth),e.onOpen(o,s,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(s,i)},onClose:(e,s)=>{r.unlink(t.element),void 0!==n&&void 0!==n.onClose&&n.onClose(e,s)},isPartOf:(e,n,r)=>xa(n,r)||xa(t,r),getAttachPoint:()=>s().getOrDie()}),Hh.config({find:e=>uu.getState(e).bind((e=>Hh.getCurrent(e)))}),Il.config({channels:{...gu({isExtraPart:C}),...yu({doReposition:Tx})}})])}},Ex=e=>{const t=fx.getCoupled(e,"sandbox");Tx(t)},kx=()=>[hs("sandboxClasses",[]),Nu("sandboxBehaviours",[Hh,Il,uu,Du])],Lx=_([Xr("dom"),Xr("fetch"),za("onOpen"),Ba("onExecute"),hs("getHotspot",L.some),hs("getAnchorOverrides",_({})),Rc(),Ou("dropdownBehaviours",[Pf,fx,af,xf]),Xr("toggleClass"),hs("eventOrder",{}),ss("lazySink"),hs("matchWidth",!1),hs("useMinWidth",!1),ss("role")].concat(kx())),Ax=_([lh({schema:[Pa()],name:"menu",defaults:e=>({onExecute:e.onExecute})}),vx()]),Dx=Ih({name:"Dropdown",configFields:Lx(),partFields:Ax(),factory:(e,t,n,r)=>{const s=e=>{uu.getState(e).each((e=>{ig.highlightPrimary(e)}))},i={expand:t=>{Pf.isOn(t)||xx(e,b,t,r,v,yx.HighlightNone).get(v)},open:t=>{Pf.isOn(t)||xx(e,b,t,r,v,yx.HighlightFirst).get(v)},isOpen:Pf.isOn,close:t=>{Pf.isOn(t)&&xx(e,b,t,r,v,yx.HighlightFirst).get(v)},repositionMenus:e=>{Pf.isOn(e)&&Ex(e)}},o=(e,t)=>(Ai(e),L.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.dropdownBehaviours,[Pf.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),fx.config({others:{sandbox:t=>Cx(e,t,{onOpen:()=>Pf.on(t),onClose:()=>Pf.off(t)})}}),af.config({mode:"special",onSpace:o,onEnter:o,onDown:(e,t)=>{if(Dx.isOpen(e)){const t=fx.getCoupled(e,"sandbox");s(t)}else Dx.open(e);return L.some(!0)},onEscape:(e,t)=>Dx.isOpen(e)?(Dx.close(e),L.some(!0)):L.none()}),xf.config({})]),events:zf(L.some((t=>{xx(e,b,t,r,s,yx.HighlightFirst).get(v)}))),eventOrder:{...e.eventOrder,[ai()]:["disabling","toggling","alloy.base.behaviour"]},apis:i,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold((()=>({})),(e=>({role:e}))),..."button"===e.dom.tag?{type:(a="type",ge(e.dom,"attributes").bind((e=>ge(e,a)))).getOr("button")}:{}}}};var a},apis:{open:(e,t)=>e.open(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}});const Ox=Ol({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Pi([Ni(ei(),E)]),exhibit:()=>So({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),Rx=ro("color-input-change"),Px=ro("color-swatch-change"),Nx=ro("color-picker-cancel"),Ix=(e,t,n,r)=>{const s=Cw.parts.field({factory:Xw,inputClasses:["tox-textfield"],data:r,onSetValue:e=>ux.run(e).get(v),inputBehaviours:Al([em.config({disabled:t.providers.isDisabled}),M_(),Lw.config({}),ux.config({invalidClass:"tox-textbox-field-invalid",getRoot:e=>qe(e.element),notify:{onValid:e=>{const t=Du.getValue(e);Li(e,Rx,{color:t})}},validator:{validateOnLoad:!1,validate:e=>{const t=Du.getValue(e);if(0===t.length)return tx(Yn.value(!0));{const e=De.fromTag("span");bt(e,"background-color",t);const n=Tt(e,"background-color").fold((()=>Yn.error("blah")),(e=>Yn.value(t)));return tx(n)}}}})]),selectOnFocus:!1}),i=e.label.map((e=>Pw(e,t.providers))),o=(e,t)=>{Li(e,Px,{value:t})},a=cg(((e,t)=>Dx.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Al([T_(t.providers.isDisabled),M_(),Ox.config({}),Lw.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:n=>ex((t=>e.fetch(t))).map((r=>L.from(aw(ar(Hb(ro("menu-value"),r,(t=>{e.onItemAction(n,t)}),e.columns,e.presets,kv.CLOSE_ON_EXECUTE,C,t.providers),{movement:Ub(e.columns,e.presets)}))))),parts:{menu:Wv(0,0,e.presets)}}))({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ul,dl,fl],onLtr:()=>[dl,ul,fl]},components:[],fetch:Nb(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:(e,t)=>{a.getOpt(e).each((e=>{"custom"===t?n.colorPicker((t=>{t.fold((()=>ki(e,Nx)),(t=>{o(e,t),Ab(t)}))}),"#ffffff"):o(e,"remove"===t?"":t)}))}},t));return Cw.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:i.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[s,a.asSpec()]}]),fieldBehaviours:Al([vf("form-field-events",[zi(Rx,((t,n)=>{a.getOpt(t).each((e=>{bt(e.element,"background-color",n.event.color)})),Li(t,Nw,{name:e.name})})),zi(Px,((e,t)=>{Cw.getField(e).each((n=>{Du.setValue(n,t.event.value),Hh.getCurrent(e).each(xf.focus)}))})),zi(Nx,((e,t)=>{Cw.getField(e).each((t=>{Hh.getCurrent(e).each(xf.focus)}))}))])])})},zx=ch({schema:[Xr("dom")],name:"label"}),Bx=e=>ch({name:e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold((()=>({})),(e=>({events:Pi([Bi(Ns(),((t,n,r)=>e(t,r)),[t]),Bi(Fs(),((t,n,r)=>e(t,r)),[t]),Bi(Hs(),((t,n,r)=>{r.mouseIsDown.get()&&e(t,r)}),[t])])})))}),Fx=Bx("top-left"),Hx=Bx("top"),jx=Bx("top-right"),Ux=Bx("right"),Yx=Bx("bottom-right"),Vx=Bx("bottom"),$x=Bx("bottom-left"),Wx=Bx("left"),Gx=ah({name:"thumb",defaults:_({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Pi([Hi(Ns(),e,"spectrum"),Hi(Is(),e,"spectrum"),Hi(zs(),e,"spectrum"),Hi(Fs(),e,"spectrum"),Hi(Hs(),e,"spectrum"),Hi(Us(),e,"spectrum")])})}),qx=ah({schema:[Gr("mouseIsDown",(()=>ws(!1)))],name:"spectrum",overrides:e=>{const t=e.model.manager,n=(n,r)=>t.getValueFromEvent(r).map((r=>t.setValueFrom(n,e,r)));return{behaviours:Al([af.config({mode:"special",onLeft:n=>t.onLeft(n,e),onRight:n=>t.onRight(n,e),onUp:n=>t.onUp(n,e),onDown:n=>t.onDown(n,e)}),xf.config({})]),events:Pi([zi(Ns(),n),zi(Is(),n),zi(Fs(),n),zi(Hs(),((t,r)=>{e.mouseIsDown.get()&&n(t,r)}))])}}});var Xx=[zx,Wx,Ux,Hx,Vx,Fx,jx,$x,Yx,Gx,qx];const Kx=_("slider.change.value"),Jx=e=>{const t=e.event.raw;if((e=>-1!==e.type.indexOf("touch"))(t)){const e=t;return void 0!==e.touches&&1===e.touches.length?L.some(e.touches[0]).map((e=>Nt(e.clientX,e.clientY))):L.none()}{const e=t;return void 0!==e.clientX?L.some(e).map((e=>Nt(e.clientX,e.clientY))):L.none()}},Zx=e=>e.model.minX,Qx=e=>e.model.minY,eM=e=>e.model.minX-1,tM=e=>e.model.minY-1,nM=e=>e.model.maxX,rM=e=>e.model.maxY,sM=e=>e.model.maxX+1,iM=e=>e.model.maxY+1,oM=(e,t,n)=>t(e)-n(e),aM=e=>oM(e,nM,Zx),lM=e=>oM(e,rM,Qx),cM=e=>aM(e)/2,dM=e=>lM(e)/2,uM=e=>e.stepSize,hM=e=>e.snapToGrid,mM=e=>e.snapStart,pM=e=>e.rounded,fM=(e,t)=>void 0!==e[t+"-edge"],gM=e=>fM(e,"left"),vM=e=>fM(e,"right"),yM=e=>fM(e,"top"),_M=e=>fM(e,"bottom"),bM=e=>e.model.value.get(),wM=(e,t)=>({x:e,y:t}),xM=(e,t)=>{Li(e,Kx(),{value:t})},MM=(e,t,n,r)=>e<t?e:e>n?n:e===t?t-1:Math.max(t,e-r),SM=(e,t,n,r)=>e>n?e:e<t?t:e===n?n+1:Math.min(n,e+r),TM=(e,t,n)=>Math.max(t,Math.min(n,e)),CM=e=>{const{min:t,max:n,range:r,value:s,step:i,snap:o,snapStart:a,rounded:l,hasMinEdge:c,hasMaxEdge:d,minBound:u,maxBound:h,screenRange:m}=e,p=c?t-1:t,f=d?n+1:n;if(s<u)return p;if(s>h)return f;{const e=((e,t,n)=>Math.min(n,Math.max(e,t))-t)(s,u,h),c=TM(e/m*r+t,p,f);return o&&c>=t&&c<=n?((e,t,n,r,s)=>s.fold((()=>{const s=e-t,i=Math.round(s/r)*r;return TM(t+i,t-1,n+1)}),(t=>{const s=(e-t)%r,i=Math.round(s/r),o=Math.floor((e-t)/r),a=Math.floor((n-t)/r),l=t+Math.min(a,o+i)*r;return Math.max(t,l)})))(c,t,n,i,a):l?Math.round(c):c}},EM=e=>{const{min:t,max:n,range:r,value:s,hasMinEdge:i,hasMaxEdge:o,maxBound:a,maxOffset:l,centerMinEdge:c,centerMaxEdge:d}=e;return s<t?i?0:c:s>n?o?a:d:(s-t)/r*l},kM="top",LM="right",AM="bottom",DM="left",OM=e=>e.element.dom.getBoundingClientRect(),RM=(e,t)=>e[t],PM=e=>{const t=OM(e);return RM(t,DM)},NM=e=>{const t=OM(e);return RM(t,LM)},IM=e=>{const t=OM(e);return RM(t,kM)},zM=e=>{const t=OM(e);return RM(t,AM)},BM=e=>{const t=OM(e);return RM(t,"width")},FM=e=>{const t=OM(e);return RM(t,"height")},HM=(e,t,n)=>(e+t)/2-n,jM=(e,t)=>{const n=OM(e),r=OM(t),s=RM(n,DM),i=RM(n,LM),o=RM(r,DM);return HM(s,i,o)},UM=(e,t)=>{const n=OM(e),r=OM(t),s=RM(n,kM),i=RM(n,AM),o=RM(r,kM);return HM(s,i,o)},YM=(e,t)=>{Li(e,Kx(),{value:t})},VM=(e,t,n)=>{const r={min:Zx(t),max:nM(t),range:aM(t),value:n,step:uM(t),snap:hM(t),snapStart:mM(t),rounded:pM(t),hasMinEdge:gM(t),hasMaxEdge:vM(t),minBound:PM(e),maxBound:NM(e),screenRange:BM(e)};return CM(r)},$M=e=>(t,n)=>((e,t,n)=>{const r=(e>0?SM:MM)(bM(n),Zx(n),nM(n),uM(n));return YM(t,r),L.some(r)})(e,t,n).map(E),WM=(e,t,n,r,s,i)=>{const o=((e,t,n,r,s)=>{const i=BM(e),o=r.bind((t=>L.some(jM(t,e)))).getOr(0),a=s.bind((t=>L.some(jM(t,e)))).getOr(i),l={min:Zx(t),max:nM(t),range:aM(t),value:n,hasMinEdge:gM(t),hasMaxEdge:vM(t),minBound:PM(e),minOffset:0,maxBound:NM(e),maxOffset:i,centerMinEdge:o,centerMaxEdge:a};return EM(l)})(t,i,n,r,s);return PM(t)-PM(e)+o},GM=$M(-1),qM=$M(1),XM=L.none,KM=L.none,JM={"top-left":L.none(),top:L.none(),"top-right":L.none(),right:L.some(((e,t)=>{xM(e,sM(t))})),"bottom-right":L.none(),bottom:L.none(),"bottom-left":L.none(),left:L.some(((e,t)=>{xM(e,eM(t))}))};var ZM=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const r=VM(e,t,n);return YM(e,r),r},setToMin:(e,t)=>{const n=Zx(t);YM(e,n)},setToMax:(e,t)=>{const n=nM(t);YM(e,n)},findValueOfOffset:VM,getValueFromEvent:e=>Jx(e).map((e=>e.left)),findPositionOfValue:WM,setPositionFromValue:(e,t,n,r)=>{const s=bM(n),i=WM(e,r.getSpectrum(e),s,r.getLeftEdge(e),r.getRightEdge(e),n),o=Ht(t.element)/2;bt(t.element,"left",i-o+"px")},onLeft:GM,onRight:qM,onUp:XM,onDown:KM,edgeActions:JM});const QM=(e,t)=>{Li(e,Kx(),{value:t})},eS=(e,t,n)=>{const r={min:Qx(t),max:rM(t),range:lM(t),value:n,step:uM(t),snap:hM(t),snapStart:mM(t),rounded:pM(t),hasMinEdge:yM(t),hasMaxEdge:_M(t),minBound:IM(e),maxBound:zM(e),screenRange:FM(e)};return CM(r)},tS=e=>(t,n)=>((e,t,n)=>{const r=(e>0?SM:MM)(bM(n),Qx(n),rM(n),uM(n));return QM(t,r),L.some(r)})(e,t,n).map(E),nS=(e,t,n,r,s,i)=>{const o=((e,t,n,r,s)=>{const i=FM(e),o=r.bind((t=>L.some(UM(t,e)))).getOr(0),a=s.bind((t=>L.some(UM(t,e)))).getOr(i),l={min:Qx(t),max:rM(t),range:lM(t),value:n,hasMinEdge:yM(t),hasMaxEdge:_M(t),minBound:IM(e),minOffset:0,maxBound:zM(e),maxOffset:i,centerMinEdge:o,centerMaxEdge:a};return EM(l)})(t,i,n,r,s);return IM(t)-IM(e)+o},rS=L.none,sS=L.none,iS=tS(-1),oS=tS(1),aS={"top-left":L.none(),top:L.some(((e,t)=>{xM(e,tM(t))})),"top-right":L.none(),right:L.none(),"bottom-right":L.none(),bottom:L.some(((e,t)=>{xM(e,iM(t))})),"bottom-left":L.none(),left:L.none()};var lS=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const r=eS(e,t,n);return QM(e,r),r},setToMin:(e,t)=>{const n=Qx(t);QM(e,n)},setToMax:(e,t)=>{const n=rM(t);QM(e,n)},findValueOfOffset:eS,getValueFromEvent:e=>Jx(e).map((e=>e.top)),findPositionOfValue:nS,setPositionFromValue:(e,t,n,r)=>{const s=bM(n),i=nS(e,r.getSpectrum(e),s,r.getTopEdge(e),r.getBottomEdge(e),n),o=Ot(t.element)/2;bt(t.element,"top",i-o+"px")},onLeft:rS,onRight:sS,onUp:iS,onDown:oS,edgeActions:aS});const cS=(e,t)=>{Li(e,Kx(),{value:t})},dS=(e,t)=>({x:e,y:t}),uS=(e,t)=>(n,r)=>((e,t,n,r)=>{const s=e>0?SM:MM,i=t?bM(r).x:s(bM(r).x,Zx(r),nM(r),uM(r)),o=t?s(bM(r).y,Qx(r),rM(r),uM(r)):bM(r).y;return cS(n,dS(i,o)),L.some(i)})(e,t,n,r).map(E),hS=uS(-1,!1),mS=uS(1,!1),pS=uS(-1,!0),fS=uS(1,!0),gS={"top-left":L.some(((e,t)=>{xM(e,wM(eM(t),tM(t)))})),top:L.some(((e,t)=>{xM(e,wM(cM(t),tM(t)))})),"top-right":L.some(((e,t)=>{xM(e,wM(sM(t),tM(t)))})),right:L.some(((e,t)=>{xM(e,wM(sM(t),dM(t)))})),"bottom-right":L.some(((e,t)=>{xM(e,wM(sM(t),iM(t)))})),bottom:L.some(((e,t)=>{xM(e,wM(cM(t),iM(t)))})),"bottom-left":L.some(((e,t)=>{xM(e,wM(eM(t),iM(t)))})),left:L.some(((e,t)=>{xM(e,wM(eM(t),dM(t)))}))};var vS=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const r=VM(e,t,n.left),s=eS(e,t,n.top),i=dS(r,s);return cS(e,i),i},setToMin:(e,t)=>{const n=Zx(t),r=Qx(t);cS(e,dS(n,r))},setToMax:(e,t)=>{const n=nM(t),r=rM(t);cS(e,dS(n,r))},getValueFromEvent:e=>Jx(e),setPositionFromValue:(e,t,n,r)=>{const s=bM(n),i=WM(e,r.getSpectrum(e),s.x,r.getLeftEdge(e),r.getRightEdge(e),n),o=nS(e,r.getSpectrum(e),s.y,r.getTopEdge(e),r.getBottomEdge(e),n),a=Ht(t.element)/2,l=Ot(t.element)/2;bt(t.element,"left",i-a+"px"),bt(t.element,"top",o-l+"px")},onLeft:hS,onRight:mS,onUp:pS,onDown:fS,edgeActions:gS});const yS=Ih({name:"Slider",configFields:[hs("stepSize",1),hs("onChange",v),hs("onChoose",v),hs("onInit",v),hs("onDragStart",v),hs("onDragEnd",v),hs("snapToGrid",!1),hs("rounded",!0),ss("snapStart"),Kr("model",$r("mode",{x:[hs("minX",0),hs("maxX",100),Gr("value",(e=>ws(e.mode.minX))),Xr("getInitialValue"),ja("manager",ZM)],y:[hs("minY",0),hs("maxY",100),Gr("value",(e=>ws(e.mode.minY))),Xr("getInitialValue"),ja("manager",lS)],xy:[hs("minX",0),hs("maxX",100),hs("minY",0),hs("maxY",100),Gr("value",(e=>ws({x:e.mode.minX,y:e.mode.minY}))),Xr("getInitialValue"),ja("manager",vS)]})),Ou("sliderBehaviours",[af,Du]),Gr("mouseIsDown",(()=>ws(!1)))],partFields:Xx,factory:(e,t,n,r)=>{const s=t=>xh(t,e,"thumb"),i=t=>xh(t,e,"spectrum"),o=t=>wh(t,e,"left-edge"),a=t=>wh(t,e,"right-edge"),l=t=>wh(t,e,"top-edge"),c=t=>wh(t,e,"bottom-edge"),d=e.model,u=d.manager,h=(t,n)=>{u.setPositionFromValue(t,n,e,{getLeftEdge:o,getRightEdge:a,getTopEdge:l,getBottomEdge:c,getSpectrum:i})},m=(e,t)=>{d.value.set(t);const n=s(e);h(e,n)},p=t=>{const n=e.mouseIsDown.get();e.mouseIsDown.set(!1),n&&wh(t,e,"thumb").each((n=>{const r=d.value.get();e.onChoose(t,n,r)}))},f=(t,n)=>{n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,s(t))},g=(t,n)=>{n.stop(),e.onDragEnd(t,s(t)),p(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.sliderBehaviours,[af.config({mode:"special",focusIn:t=>wh(t,e,"spectrum").map(af.focusIn).map(E)}),Du.config({store:{mode:"manual",getValue:e=>d.value.get(),setValue:m}}),Il.config({channels:{[pu()]:{onReceive:p}}})]),events:Pi([zi(Kx(),((t,n)=>{((t,n)=>{m(t,n);const r=s(t);e.onChange(t,r,n),L.some(!0)})(t,n.event.value)})),$i(((t,n)=>{const r=d.getInitialValue();d.value.set(r);const o=s(t);h(t,o);const a=i(t);e.onInit(t,o,a,d.value.get())})),zi(Ns(),f),zi(zs(),g),zi(Fs(),f),zi(Us(),g)]),apis:{resetToMin:t=>{u.setToMin(t,e)},resetToMax:t=>{u.setToMax(t,e)},setValue:m,refresh:h},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,n)=>{e.setValue(t,n)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),_S=ro("rgb-hex-update"),bS=ro("slider-update"),wS=ro("palette-update"),xS="form",MS=[Ou("formBehaviours",[Du])],SS=e=>"<alloy.field."+e+">",TS=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.formBehaviours,[Du.config({store:{mode:"manual",getValue:t=>{const n=Sh(t,e);return ce(n,((e,t)=>e().bind((e=>{const n=Hh.getCurrent(e);return r=n,s=new Error(`Cannot find a current component to extract the value from for form part '${t}': `+Qi(e.element)),r.fold((()=>Yn.error(s)),Yn.value);var r,s})).map(Du.getValue)))},setValue:(t,n)=>{le(n,((n,r)=>{wh(t,e,r).each((e=>{Hh.getCurrent(e).each((e=>{Du.setValue(e,n)}))}))}))}}})]),apis:{getField:(t,n)=>wh(t,e,n).bind(Hh.getCurrent)}}),CS={getField:bo(((e,t,n)=>e.getField(t,n))),sketch:e=>{const t=(()=>{const e=[];return{field:(t,n)=>(e.push(t),gh(xS,SS(t),n)),record:_(e)}})(),n=e(t),r=t.record(),s=F(r,(e=>ah({name:e,pname:SS(e)})));return Dh(xS,MS,s,TS,n)}},ES=ro("valid-input"),kS=ro("invalid-input"),LS=ro("validating-input"),AS="colorcustom.rgb.",DS=(e,t,n,r)=>{const s=(n,r)=>ux.config({invalidClass:t("invalid"),notify:{onValidate:e=>{Li(e,LS,{type:n})},onValid:e=>{Li(e,ES,{type:n,value:Du.getValue(e)})},onInvalid:e=>{Li(e,kS,{type:n,value:Du.getValue(e)})}},validator:{validate:t=>{const n=Du.getValue(t),s=r(n)?Yn.value(!0):Yn.error(e("aria.input.invalid"));return tx(s)},validateOnLoad:!1}}),i=(n,r,i,o,a)=>{const l=e("colorcustom.rgb.range"),c=Cw.parts.label({dom:{tag:"label",attributes:{"aria-label":o}},components:[ia(i)]}),d=Cw.parts.field({data:a,factory:Xw,inputAttributes:{type:"text",..."hex"===r?{"aria-live":"polite"}:{}},inputClasses:[t("textfield")],inputBehaviours:Al([s(r,n),Lw.config({})]),onSetValue:e=>{if(ux.isInvalid(e)){ux.run(e).get(v)}}}),u=[c,d],h="hex"!==r?[Cw.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:u.concat(h)}},o=(e,t)=>{const n=t.red,r=t.green,s=t.blue;Du.setValue(e,{red:n,green:r,blue:s})},a=cg({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),l=(e,t)=>{a.getOpt(e).each((e=>{bt(e.element,"background-color","#"+t.value)}))},c=Nh({factory:()=>{const s={red:ws(L.some(255)),green:ws(L.some(255)),blue:ws(L.some(255)),hex:ws(L.some("ffffff"))},c=e=>s[e].get(),d=(e,t)=>{s[e].set(t)},u=e=>{const t=e.red,n=e.green,r=e.blue;d("red",L.some(t)),d("green",L.some(n)),d("blue",L.some(r))},h=(e,t)=>{const n=t.event;"hex"!==n.type?d(n.type,L.none()):r(e)},m=(e,t,n)=>{const r=parseInt(n,10);d(t,L.some(r)),c("red").bind((e=>c("green").bind((t=>c("blue").map((n=>cb(e,t,n,1))))))).each((t=>{const n=((e,t)=>{const n=rb(t);return CS.getField(e,"hex").each((t=>{xf.isFocused(t)||Du.setValue(e,{hex:n.value})})),n})(e,t);Li(e,_S,{hex:n}),l(e,n)}))},p=(e,t)=>{const r=t.event;(e=>"hex"===e.type)(r)?((e,t)=>{n(e);const r=K_(t);d("hex",L.some(t));const s=hb(r);o(e,s),u(s),Li(e,_S,{hex:r}),l(e,r)})(e,r.value):m(e,r.type,r.value)},f=t=>({label:e(AS+t+".label"),description:e(AS+t+".description")}),g=f("red"),v=f("green"),y=f("blue"),_=f("hex");return ar(CS.sketch((n=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[n.field("red",Cw.sketch(i(db,"red",g.label,g.description,255))),n.field("green",Cw.sketch(i(db,"green",v.label,v.description,255))),n.field("blue",Cw.sketch(i(db,"blue",y.label,y.description,255))),n.field("hex",Cw.sketch(i(Q_,"hex",_.label,_.description,"ffffff"))),a.asSpec()],formBehaviours:Al([ux.config({invalidClass:t("form-invalid")}),vf("rgb-form-events",[zi(ES,p),zi(kS,h),zi(LS,h)])])}))),{apis:{updateHex:(e,t)=>{Du.setValue(e,{hex:t.value}),((e,t)=>{const n=hb(t);o(e,n),u(n)})(e,t),l(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(e,t,n)=>{e.updateHex(t,n)}},extraApis:{}});return c},OS=(e,t)=>{const n=yS.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),r=yS.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),s=(e,t)=>{const{width:n,height:r}=e,s=e.getContext("2d");if(null===s)return;s.fillStyle=t,s.fillRect(0,0,n,r);const i=s.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),s.fillStyle=i,s.fillRect(0,0,n,r);const o=s.createLinearGradient(0,0,0,r);o.addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),s.fillStyle=o,s.fillRect(0,0,n,r)},i=Nh({factory:e=>{const i=_({x:0,y:0}),o=Al([Hh.config({find:L.some}),xf.config({})]);return yS.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:i},rounded:!1,components:[n,r],onChange:(e,t,n)=>{Li(e,wS,{value:n})},onInit:(e,t,n,r)=>{s(n.element.dom,fb(gb))},sliderBehaviours:o})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(e,t,n)=>{((e,t)=>{const n=e.components()[0].element.dom,r=yb(t,100,100),i=ub(r);s(n,fb(i))})(t,n)},setThumb:(e,t,n)=>{((e,t)=>{const n=_b(hb(t));yS.setValue(e,{x:n.saturation,y:100-n.value})})(t,n)}},extraApis:{}});return i},RS=(e,t)=>{const n=Nh({name:"ColourPicker",configFields:[Xr("dom"),hs("onValidHex",v),hs("onInvalidHex",v)],factory:n=>{const r=DS(e,t,n.onValidHex,n.onInvalidHex),s=OS(0,t),i={paletteRgba:ws(gb),paletteHue:ws(0)},o=cg(((e,t)=>{const n=yS.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),r=yS.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return yS.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:_(0)},components:[n,r],sliderBehaviours:Al([xf.config({})]),onChange:(e,t,n)=>{Li(e,bS,{value:n})}})})(0,t)),a=cg(s.sketch({})),l=cg(r.sketch({})),c=(e,t,n)=>{a.getOpt(e).each((e=>{s.setHue(e,n)}))},d=(e,t)=>{l.getOpt(e).each((e=>{r.updateHex(e,t)}))},u=(e,t,n)=>{o.getOpt(e).each((e=>{yS.setValue(e,(e=>100-e/360*100)(n))}))},h=(e,t)=>{a.getOpt(e).each((e=>{s.setThumb(e,t)}))},m=(e,t,n,r)=>{((e,t)=>{const n=hb(e);i.paletteRgba.set(n),i.paletteHue.set(t)})(t,n),H(r,(r=>{r(e,t,n)}))};return{uid:n.uid,dom:n.dom,components:[a.asSpec(),o.asSpec(),l.asSpec()],behaviours:Al([vf("colour-picker-events",[zi(_S,(()=>{const e=[c,u,h];return(t,n)=>{const r=n.event.hex,s=(e=>_b(hb(e)))(r);m(t,r,s.hue,e)}})()),zi(wS,(()=>{const e=[d];return(t,n)=>{const r=n.event.value,s=i.paletteHue.get(),o=yb(s,r.x,100-r.y),a=bb(o);m(t,a,s,e)}})()),zi(bS,(()=>{const e=[c,d];return(t,n)=>{const r=(e=>(100-e)/100*360)(n.event.value),s=i.paletteRgba.get(),o=_b(s),a=yb(r,o.saturation,o.value),l=bb(a);m(t,l,r,e)}})())]),Hh.config({find:e=>l.getOpt(e)}),af.config({mode:"acyclic"})])}}});return n},PS=()=>Hh.config({find:L.some}),NS=e=>Hh.config({find:e.getOpt}),IS=e=>Hh.config({find:t=>Je(t.element,e).bind((e=>t.getSystem().getByDom(e).toOptional()))}),zS=Sr([hs("preprocess",b),hs("postprocess",b)]),BS=(e,t,n)=>Du.config({store:{mode:"manual",...e.map((e=>({initialValue:e}))).getOr({}),getValue:t,setValue:n}}),FS=(e,t,n)=>BS(e,(e=>t(e.element)),((e,t)=>n(e.element,t))),HS=(e,t)=>{const n=Yr("RepresentingConfigs.memento processors",zS,t);return Du.config({store:{mode:"manual",getValue:t=>{const r=e.get(t),s=Du.getValue(r);return n.postprocess(s)},setValue:(t,r)=>{const s=n.preprocess(r),i=e.get(t);Du.setValue(i,s)}}})},jS=FS,US=BS,YS=e=>FS(e,Xi,Ki),VS=e=>Du.config({store:{mode:"memory",initialValue:e}}),$S={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},WS=(e,t,n)=>{const r=e=>"tox-"+e,s=RS((e=>t=>e.translate($S[t]))(t),r),i=cg(s.sketch({dom:{tag:"div",classes:[r("color-picker-container")],attributes:{role:"presentation"}},onValidHex:e=>{Li(e,Bw,{name:"hex-valid",value:!0})},onInvalidHex:e=>{Li(e,Bw,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[i.asSpec()],behaviours:Al([US(n,(e=>{const t=i.get(e);return Hh.getCurrent(t).bind((e=>Du.getValue(e).hex)).map((e=>"#"+e)).getOr("")}),((e,t)=>{const n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),r=i.get(e);Hh.getCurrent(r).fold((()=>{console.log("Can not find form")}),(e=>{Du.setValue(e,{hex:L.from(n[1]).getOr("")}),CS.getField(e,"hex").each((e=>{ki(e,qs())}))}))})),PS()])}};var GS=tinymce.util.Tools.resolve("tinymce.Resource");var qS=tinymce.util.Tools.resolve("tinymce.util.Tools");const XS=(e,t,n)=>{const r=(e,t)=>{t.stop()},s=e=>(t,n)=>{H(e,(e=>{e(t,n)}))},i=(e,t)=>{if(!em.isDisabled(e)){const n=t.event.raw;a(e,n.dataTransfer.files)}},o=(e,t)=>{const n=t.event.raw.target;a(e,n.files)},a=(n,r)=>{Du.setValue(n,((e,t)=>{const n=qS.explode(t.getOption("images_file_types"));return U(se(e),(e=>I(n,(t=>Ce(e.name.toLowerCase(),`.${t.toLowerCase()}`)))))})(r,t)),Li(n,Nw,{name:e.name})},l=cg({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Al([vf("input-file-events",[Ui(Ks()),Ui(ci())])])}),c=e.label.map((e=>Pw(e,t))),d=Cw.parts.field({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Al([VS(n.getOr([])),PS(),em.config({}),Pf.config({toggleClass:"dragenter",toggleOnExecute:!1}),vf("dropzone-events",[zi("dragenter",s([r,Pf.toggle])),zi("dragleave",s([r,Pf.toggle])),zi("dragover",r),zi("drop",s([r,i])),zi(Xs(),o)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[ia(t.translate("Drop an image here"))]},lg.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[ia(t.translate("Browse for an image")),l.asSpec()],action:e=>{l.get(e).element.dom.click()},buttonBehaviours:Al([Lw.config({}),T_(t.isDisabled),M_()])})]}]})}});return Dw(c,d,["tox-form__group--stretched"],[])},KS=ro("alloy-fake-before-tabstop"),JS=ro("alloy-fake-after-tabstop"),ZS=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Al([xf.config({ignore:!0}),Lw.config({})])}),QS=e=>({dom:{tag:"div",classes:["tox-navobj"]},components:[ZS([KS]),e,ZS([JS])],behaviours:Al([IS(1)])}),eT=(e,t)=>{Li(e,Ws(),{raw:{which:9,shiftKey:t}})},tT=(e,t)=>{const n=t.element;Uo(n,KS)?eT(e,!0):Uo(n,JS)&&eT(e,!1)},nT=e=>cw(e,["."+KS,"."+JS].join(","),C),rT=(e,t,n)=>{const r=e.sandboxed,s={...e.label.map((e=>({title:e}))).getOr({}),...n.map((e=>({srcdoc:e}))).getOr({}),...r?{sandbox:"allow-scripts allow-same-origin"}:{}},i=(e=>{const t=ws(e.getOr(""));return{getValue:e=>t.get(),setValue:(e,n)=>{t.get()!==n&&ht(e.element,"srcdoc",n),t.set(n)}}})(n),o=e.label.map((e=>Pw(e,t))),a=Cw.parts.field({factory:{sketch:e=>QS({uid:e.uid,dom:{tag:"iframe",attributes:s},behaviours:Al([Lw.config({}),xf.config({}),US(n,i.getValue,i.setValue)])})}});return Dw(o,a,["tox-form__group--stretched"],[])},sT=(e,t)=>{const n=ws(t.getOr({url:""})),r=cg({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map((e=>({src:e.url}))).getOr({})}}),s=cg({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[r.asSpec()]}),i={};e.height.each((e=>i.height=e));const o=t.map((e=>({url:e.url,zoom:L.from(e.zoom),cachedWidth:L.from(e.cachedWidth),cachedHeight:L.from(e.cachedHeight)})));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:i,attributes:{role:"presentation"}},components:[s.asSpec()],behaviours:Al([PS(),US(o,(()=>n.get()),((e,t)=>{const i={url:t.url};t.zoom.each((e=>i.zoom=e)),t.cachedWidth.each((e=>i.cachedWidth=e)),t.cachedHeight.each((e=>i.cachedHeight=e)),n.set(i);const o=()=>{const t=i.cachedWidth,n=i.cachedHeight;if(u(i.zoom)){const r=((e,t,n)=>{const r=Ht(e),s=Ot(e);return Math.min(r/t,s/n,1)})(e.element,t,n);i.zoom=r}const r=((e,t,n,r,s)=>{const i=n*s,o=r*s,a=Math.max(0,e/2-i/2),l=Math.max(0,t/2-o/2);return{left:a.toString()+"px",top:l.toString()+"px",width:i.toString()+"px",height:o.toString()+"px"}})(Ht(e.element),Ot(e.element),t,n,i.zoom);s.getOpt(e).each((e=>{wt(e.element,r)}))};r.getOpt(e).each((n=>{const r=n.element;t.url!==pt(r,"src")&&(ht(r,"src",t.url),jo(e.element,"tox-imagepreview__loaded")),u(i.cachedWidth)||u(i.cachedHeight)||o(),(e=>new Promise(((t,n)=>{const r=()=>{i(),t(e)},s=[lc(e,"load",r),lc(e,"error",(()=>{i(),n("Unable to load data from image: "+e.dom.src)}))],i=()=>H(s,(e=>e.unbind()));e.dom.complete&&r()})))(r).then((t=>{e.getSystem().isConnected()&&(Ho(e.element,"tox-imagepreview__loaded"),i.cachedWidth=t.dom.naturalWidth,i.cachedHeight=t.dom.naturalHeight,o())}))}))}))])}},iT=ro("toolbar.button.execute"),oT={[ai()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},aT=(e,t,n)=>_g(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t),lT=(e,t)=>aT(e,t,[]),cT=(e,t)=>aT(e,t,[gf.config({})]),dT=(e,t,n)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[ia(n.translate(e))],behaviours:Al([gf.config({})])}),uT=ro("update-menu-text"),hT=ro("update-menu-icon"),mT=(e,t,n)=>{const r=ws(v),s=e.text.map((e=>cg(dT(e,t,n.providers)))),i=e.icon.map((e=>cg(cT(e,n.providers.icons)))),o=(e,t)=>{const n=Du.getValue(e);return xf.focus(n),Li(n,"keydown",{raw:t.event.raw}),Dx.close(n),L.some(!0)},a=e.role.fold((()=>({})),(e=>({role:e}))),l=e.tooltip.fold((()=>({})),(e=>{const t=n.providers.translate(e);return{title:t,"aria-label":t}})),c=_g("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},n.providers.icons);return cg(Dx.sketch({...e.uid?{uid:e.uid}:{},...a,dom:{tag:"button",classes:[t,`${t}--select`].concat(F(e.classes,(e=>`${t}--${e}`))),attributes:{...l}},components:R_([i.map((e=>e.asSpec())),s.map((e=>e.asSpec())),L.some(c)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Al([...e.dropdownBehaviours,T_((()=>e.disabled||n.providers.isDisabled())),M_(),Ox.config({}),gf.config({}),vf("dropdown-events",[L_(e,r),A_(e,r)]),vf("menubutton-update-display-text",[zi(uT,((e,t)=>{s.bind((t=>t.getOpt(e))).each((e=>{gf.set(e,[ia(n.providers.translate(t.event.text))])}))})),zi(hT,((e,t)=>{i.bind((t=>t.getOpt(e))).each((e=>{gf.set(e,[cT(t.event.icon,n.providers.icons)])}))}))])]),eventOrder:ar(oT,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Al([af.config({mode:"special",onLeft:o,onRight:o})]),lazySink:n.getSink,toggleClass:`${t}--active`,parts:{menu:Wv(0,e.columns,e.presets)},fetch:t=>ex(x(e.fetch,t))})).asSpec()},pT=e=>"separator"===e.type,fT={type:"separator"},gT=(e,t)=>{const n=V(e,((e,n)=>(e=>i(e))(n)?""===n?e:"|"===n?e.length>0&&!pT(e[e.length-1])?e.concat([fT]):e:ve(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n])),[]);return n.length>0&&pT(n[n.length-1])&&n.pop(),n},vT=(e,t)=>(e=>ve(e,"getSubmenuItems"))(e)?((e,t)=>{const n=e.getSubmenuItems(),r=yT(n,t);return{item:e,menus:ar(r.menus,Ss(e.value,r.items)),expansions:ar(r.expansions,Ss(e.value,e.value))}})(e,t):{item:e,menus:{},expansions:{}},yT=(e,t)=>{const n=gT(i(e)?e.split(" "):e,t);return Y(n,((e,n)=>{const r=(e=>{if(pT(e))return e;{const t=ge(e,"value").getOrThunk((()=>ro("generated-menu-item")));return ar({value:t},e)}})(n),s=vT(r,t);return{menus:ar(e.menus,s.menus),items:[s.item].concat(e.items),expansions:ar(e.expansions,s.expansions)}}),{menus:{},expansions:{},items:[]})},_T=(e,t,n,r)=>{const s=ro("primary-menu"),i=yT(e,n.shared.providers.menuItems());if(0===i.items.length)return L.none();const o=ow(s,i.items,t,n,r),a=ce(i.menus,((e,r)=>ow(r,e,t,n,!1))),l=ar(a,Ss(s,o));return L.from(ig.tieredData(s,l,i.expansions))},bT=e=>!ve(e,"items"),wT="data-value",xT=(e,t,n,r)=>F(n,(n=>bT(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===r,onAction:()=>{Du.setValue(e,n.value),Li(e,Nw,{name:t}),xf.focus(e)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:()=>xT(e,t,n.items,r)})),MT=(e,t)=>ie(e,(e=>bT(e)?xe(e.value===t,e):MT(e.items,t))),ST=Nh({name:"HtmlSelect",configFields:[Xr("options"),Ou("selectBehaviours",[xf,Du]),hs("selectClasses",[]),hs("selectAttributes",{}),ss("data")],factory:(e,t)=>{const n=F(e.options,(e=>({dom:{tag:"option",value:e.value,innerHtml:e.text}}))),r=e.data.map((e=>Ss("initialValue",e))).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Pu(e.selectBehaviours,[xf.config({}),Du.config({store:{mode:"manual",getValue:e=>Wo(e.element),setValue:(t,n)=>{$(e.options,(e=>e.value===n)).isSome()&&Go(t.element,n)},...r}})])}}}),TT=_([hs("field1Name","field1"),hs("field2Name","field2"),Fa("onLockedChange"),Na(["lockClass"]),hs("locked",!1),Nu("coupledFieldBehaviours",[Hh,Du])]),CT=(e,t)=>ah({factory:Cw,name:e,overrides:e=>({fieldBehaviours:Al([vf("coupled-input-behaviour",[zi(qs(),(n=>{((e,t,n)=>wh(e,t,n).bind(Hh.getCurrent))(n,e,t).each((t=>{wh(n,e,"lock").each((r=>{Pf.isOn(r)&&e.onLockedChange(n,t,r)}))}))}))])])})}),ET=_([CT("field1","field2"),CT("field2","field1"),ah({factory:lg,schema:[Xr("dom")],name:"lock",overrides:e=>({buttonBehaviours:Al([Pf.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),kT=Ih({name:"FormCoupledInputs",configFields:TT(),partFields:ET(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Iu(e.coupledFieldBehaviours,[Hh.config({find:L.some}),Du.config({store:{mode:"manual",getValue:t=>{const n=Ch(t,e,["field1","field2"]);return{[e.field1Name]:Du.getValue(n.field1()),[e.field2Name]:Du.getValue(n.field2())}},setValue:(t,n)=>{const r=Ch(t,e,["field1","field2"]);ye(n,e.field1Name)&&Du.setValue(r.field1(),n[e.field1Name]),ye(n,e.field2Name)&&Du.setValue(r.field2(),n[e.field2Name])}}})]),apis:{getField1:t=>wh(t,e,"field1"),getField2:t=>wh(t,e,"field2"),getLock:t=>wh(t,e,"lock")}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),LT=e=>{const t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){const e=parseFloat(t[1]),n=t[2];return Yn.value({value:e,unit:n})}return Yn.error(e)},AT=(e,t)=>{const n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},r=e=>ve(n,e);return e.unit===t?L.some(e.value):r(e.unit)&&r(t)?n[e.unit]===n[t]?L.some(e.value):L.some(e.value/n[e.unit]*n[t]):L.none()},DT=e=>L.none(),OT=(e,t)=>{const n=LT(e).toOptional(),r=LT(t).toOptional();return we(n,r,((e,t)=>AT(e,t.unit).map((e=>t.value/e)).map((e=>{return n=e,r=t.unit,e=>AT(e,r).map((e=>({value:e*n,unit:r})));var n,r})).getOr(DT))).getOr(DT)},RT=(e,t)=>{const n=e.label.map((e=>Pw(e,t))),r=[em.config({disabled:()=>e.disabled||t.isDisabled()}),M_(),af.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:e=>(ki(e,Fw),L.some(!0))}),vf("textfield-change",[zi(qs(),((t,n)=>{Li(t,Nw,{name:e.name})})),zi(ii(),((t,n)=>{Li(t,Nw,{name:e.name})}))]),Lw.config({})],s=e.validation.map((e=>ux.config({getRoot:e=>qe(e.element),invalidClass:"tox-invalid",validator:{validate:t=>{const n=Du.getValue(t),r=e.validator(n);return tx(!0===r?Yn.value(n):Yn.error(r))},validateOnLoad:e.validateOnLoad}}))).toArray(),i={...e.placeholder.fold(_({}),(e=>({placeholder:t.translate(e)}))),...e.inputMode.fold(_({}),(e=>({inputmode:e})))},o=Cw.parts.field({tag:!0===e.multiline?"textarea":"input",...e.data.map((e=>({data:e}))).getOr({}),inputAttributes:i,inputClasses:[e.classname],inputBehaviours:Al(G([r,s])),selectOnFocus:!1,factory:Xw}),a=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),l=[em.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:e=>{Cw.getField(e).each(em.disable)},onEnabled:e=>{Cw.getField(e).each(em.enable)}}),M_()];return Dw(n,o,a,l)};var PT=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.stream.streams.setup(e,t);return Pi([zi(e.event,n),Wi((()=>t.cancel()))].concat(e.cancelEvent.map((e=>[zi(e,(()=>t.cancel()))])).getOr([])))}});const NT=(e,t)=>{let n=null;const r=()=>{c(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...s)=>{r(),n=setTimeout((()=>{n=null,e.apply(null,s)}),t)}}},IT=e=>{const t=ws(null);return xo({readState:()=>({timer:null!==t.get()?"set":"unset"}),setTimer:e=>{t.set(e)},cancel:()=>{const e=t.get();null!==e&&e.cancel()}})};var zT=Object.freeze({__proto__:null,throttle:IT,init:e=>e.stream.streams.state(e)});var BT=[Kr("stream",$r("mode",{throttle:[Xr("delay"),hs("stopEvent",!0),ja("streams",{setup:(e,t)=>{const n=e.stream,r=NT(e.onStream,n.delay);return t.setTimer(r),(e,t)=>{r.throttle(e,t),n.stopEvent&&t.stop()}},state:IT})]})),hs("event","input"),ss("cancelEvent"),Fa("onStream")];const FT=Ol({fields:BT,name:"streaming",active:PT,state:zT}),HT=(e,t,n)=>{const r=Du.getValue(n);Du.setValue(t,r),UT(t)},jT=(e,t)=>{const n=e.element,r=Wo(n),s=n.dom;"number"!==pt(n,"type")&&t(s,r)},UT=e=>{jT(e,((e,t)=>e.setSelectionRange(t.length,t.length)))},YT=(e,t,n)=>{if(e.selectsOver){const r=Du.getValue(t),s=e.getDisplayText(r),i=Du.getValue(n);return 0===e.getDisplayText(i).indexOf(s)?L.some((()=>{HT(0,t,n),((e,t)=>{jT(e,((e,n)=>e.setSelectionRange(t,n.length)))})(t,s.length)})):L.none()}return L.none()},VT=_("alloy.typeahead.itemexecute"),$T=_([ss("lazySink"),Xr("fetch"),hs("minChars",5),hs("responseTime",1e3),za("onOpen"),hs("getHotspot",L.some),hs("getAnchorOverrides",_({})),hs("layouts",L.none()),hs("eventOrder",{}),bs("model",{},[hs("getDisplayText",(e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value)),hs("selectsOver",!0),hs("populateFromBrowse",!0)]),za("onSetValue"),Ba("onExecute"),za("onItemExecute"),hs("inputClasses",[]),hs("inputAttributes",{}),hs("inputStyles",{}),hs("matchWidth",!0),hs("useMinWidth",!1),hs("dismissOnBlur",!0),Na(["openClass"]),ss("initialData"),Ou("typeaheadBehaviours",[xf,Du,FT,af,Pf,fx]),Gr("previewing",(()=>ws(!0)))].concat($w()).concat(kx())),WT=_([lh({schema:[Pa()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlight:(t,n)=>{e.previewing.get()?t.getSystem().getByUid(e.uid).each((r=>{YT(e.model,r,n).fold((()=>um.dehighlight(t,n)),(e=>e()))})):t.getSystem().getByUid(e.uid).each((t=>{e.model.populateFromBrowse&&HT(e.model,t,n)})),e.previewing.set(!1)},onExecute:(t,n)=>t.getSystem().getByUid(e.uid).toOptional().map((e=>(Li(e,VT(),{item:n}),!0))),onHover:(t,n)=>{e.previewing.set(!1),t.getSystem().getByUid(e.uid).each((t=>{e.model.populateFromBrowse&&HT(e.model,t,n)}))}})})]),GT=Ih({name:"Typeahead",configFields:$T(),partFields:WT(),factory:(e,t,n,r)=>{const s=(t,n,s)=>{e.previewing.set(!1);const i=fx.getCoupled(t,"sandbox");if(uu.isOpen(i))Hh.getCurrent(i).each((e=>{um.getHighlighted(e).fold((()=>{s(e)}),(()=>{Ri(i,e.element,"keydown",n)}))}));else{const n=e=>{Hh.getCurrent(e).each(s)};bx(e,o(t),t,i,r,n,yx.HighlightFirst).get(v)}},i=Ww(e),o=e=>t=>t.map((t=>{const n=fe(t.menus),r=q(n,(e=>U(e.items,(e=>"item"===e.type))));return Du.getState(e).update(F(r,(e=>e.data))),t})),a=[xf.config({}),Du.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:e=>Wo(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(t,n)=>{Go(t.element,e.model.getDisplayText(n))},...e.initialData.map((e=>Ss("initialValue",e))).getOr({})}}),FT.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(t,n)=>{const s=fx.getCoupled(t,"sandbox");if(xf.isFocused(t)&&Wo(t.element).length>=e.minChars){const n=Hh.getCurrent(s).bind((e=>um.getHighlighted(e).map(Du.getValue)));e.previewing.set(!0);const i=t=>{Hh.getCurrent(s).each((t=>{n.fold((()=>{e.model.selectsOver&&um.highlightFirst(t)}),(e=>{um.highlightBy(t,(t=>Du.getValue(t).value===e.value)),um.getHighlighted(t).orThunk((()=>(um.highlightFirst(t),L.none())))}))}))};bx(e,o(t),t,s,r,i,yx.HighlightFirst).get(v)}},cancelEvent:hi()}),af.config({mode:"special",onDown:(e,t)=>(s(e,t,um.highlightFirst),L.some(!0)),onEscape:e=>{const t=fx.getCoupled(e,"sandbox");return uu.isOpen(t)?(uu.close(t),L.some(!0)):L.none()},onUp:(e,t)=>(s(e,t,um.highlightLast),L.some(!0)),onEnter:t=>{const n=fx.getCoupled(t,"sandbox"),r=uu.isOpen(n);if(r&&!e.previewing.get())return Hh.getCurrent(n).bind((e=>um.getHighlighted(e))).map((e=>(Li(t,VT(),{item:e}),!0)));{const s=Du.getValue(t);return ki(t,hi()),e.onExecute(n,t,s),r&&uu.close(n),L.some(!0)}}}),Pf.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),fx.config({others:{sandbox:t=>Cx(e,t,{onOpen:()=>Pf.on(t),onClose:()=>Pf.off(t)})}}),vf("typeaheadevents",[qi((t=>{const n=v;xx(e,o(t),t,r,n,yx.HighlightFirst).get(v)})),zi(VT(),((t,n)=>{const r=fx.getCoupled(t,"sandbox");HT(e.model,t,n.event.item),ki(t,hi()),e.onItemExecute(t,r,n.event.item,Du.getValue(t)),uu.close(r),UT(t)}))].concat(e.dismissOnBlur?[zi(si(),(e=>{const t=fx.getCoupled(e,"sandbox");jl(t.element).isNone()&&uu.close(t)}))]:[]))];return{uid:e.uid,dom:qw(ar(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...i,...Pu(e.typeaheadBehaviours,a)},eventOrder:e.eventOrder}}}),qT=e=>({...e,toCached:()=>qT(e.toCached()),bindFuture:t=>qT(e.bind((e=>e.fold((e=>tx(Yn.error(e))),(e=>t(e)))))),bindResult:t=>qT(e.map((e=>e.bind(t)))),mapResult:t=>qT(e.map((e=>e.map(t)))),mapError:t=>qT(e.map((e=>e.mapError(t)))),foldResult:(t,n)=>e.map((e=>e.fold(t,n))),withTimeout:(t,n)=>qT(ex((r=>{let s=!1;const i=setTimeout((()=>{s=!0,r(Yn.error(n()))}),t);e.get((e=>{s||(clearTimeout(i),r(e))}))})))}),XT=e=>qT(ex(e)),KT=XT,JT=e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t),setActive:t=>{const n=e.element;t?(Ho(n,"tox-tbtn--enabled"),ht(n,"aria-pressed",!0)):(jo(n,"tox-tbtn--enabled"),vt(n,"aria-pressed"))},isActive:()=>Uo(e.element,"tox-tbtn--enabled")}),ZT=(e,t,n,r)=>mT({text:e.text,icon:e.icon,tooltip:e.tooltip,role:r,fetch:(t,r)=>{e.fetch((e=>{r(_T(e,kv.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:e.onSetup,getApi:JT,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Lw.config({})]},t,n.shared),QT=(e,t,n)=>{const r=e=>r=>{const s=!r.isActive();r.setActive(s),e.storage.set(s),n.shared.getSink().each((n=>{t().getOpt(n).each((t=>{Bl(t.element),Li(t,Bw,{name:e.name,value:e.storage.get()})}))}))},s=e=>t=>{t.setActive(e.storage.get())};return t=>{t(F(e,(e=>{const t=e.text.fold((()=>({})),(e=>({text:e})));return{type:e.type,active:!1,...t,onAction:r(e),onSetup:s(e)}})))}},eC=(e,t,n=[],r,s,i)=>{const o=t.fold((()=>({})),(e=>({action:e}))),a={buttonBehaviours:Al([T_((()=>!e.enabled||i.isDisabled())),M_(),Lw.config({}),vf("button press",[Ii("click"),Ii("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...o},l=ar(a,{dom:r});return ar(l,{components:s})},tC=(e,t,n,r=[])=>{const s={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map((e=>({"aria-label":n.translate(e),title:n.translate(e)}))).getOr({})},i=e.icon.map((e=>lT(e,n.icons))),o=R_([i]);return eC(e,t,r,s,o,n)},nC=(e,t,n,r=[],s=[])=>{const i=n.translate(e.text),o=e.icon.map((e=>lT(e,n.icons))),a=[o.getOrThunk((()=>ia(i)))],l=(e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}})(e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary")),c=[...l,...o.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...s];return eC(e,t,r,{tag:"button",classes:c,attributes:{title:i}},a,n)},rC=(e,t,n,r=[],s=[])=>{const i=nC(e,L.some(t),n,r,s);return lg.sketch(i)},sC=(e,t)=>n=>{"custom"===t?Li(n,Bw,{name:e,value:{}}):"submit"===t?ki(n,Fw):"cancel"===t?ki(n,zw):console.error("Unknown button type: ",t)},iC=(e,t,n)=>{if(((e,t)=>"menu"===t)(0,t)){const t=()=>i,r=e,s={...e,onSetup:t=>(t.setEnabled(e.enabled),v),fetch:QT(r.items,t,n)},i=cg(ZT(s,"tox-tbtn",n,L.none()));return i.asSpec()}if(((e,t)=>"custom"===t||"cancel"===t||"submit"===t)(0,t)){const r=sC(e.name,t),s={...e,borderless:!1};return rC(s,r,n.shared.providers,[])}console.error("Unknown footer button type: ",t)},oC=(e,t)=>{const n=sC(e.name,"custom");return r=L.none(),s=Cw.parts.field({factory:lg,...nC(e,L.some(n),t,[VS(""),PS()])}),Dw(r,s,[],[]);var r,s},aC={type:"separator"},lC=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:v}),cC=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:v}),dC=(e,t)=>(e=>F(e,lC))(((e,t)=>U(t,(t=>t.type===e)))(e,t)),uC=e=>dC("header",e.targets),hC=e=>dC("anchor",e.targets),mC=e=>L.from(e.anchorTop).map((e=>cC("<top>",e))).toArray(),pC=e=>L.from(e.anchorBottom).map((e=>cC("<bottom>",e))).toArray(),fC=(e,t)=>{const n=e.toLowerCase();return U(t,(e=>{const t=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text;return Se(t.toLowerCase(),n)||Se(e.value.toLowerCase(),n)}))},gC=(e,t,n)=>{const r=Du.getValue(t),s=void 0!==r.meta.text?r.meta.text:r.value;return n.getLinkInformation().fold((()=>[]),(t=>{const r=fC(s,(e=>F(e,(e=>cC(e,e))))(n.getHistory(e)));return"file"===e?(i=[r,fC(s,uC(t)),fC(s,G([mC(t),hC(t),pC(t)]))],V(i,((e,t)=>0===e.length||0===t.length?e.concat(t):e.concat(aC,t)),[])):r;var i}))},vC=ro("aria-invalid"),yC=(e,t)=>{e.dom.checked=t},_C=e=>e.dom.checked,bC=e=>(t,n,r,s)=>ge(n,"name").fold((()=>e(n,s,L.none())),(i=>t.field(i,e(n,s,ge(r,i))))),wC={bar:bC(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:F(e.items,t.interpreter)}))(e,t.shared))),collection:bC(((e,t,n)=>Vw(e,t.shared.providers,n))),alertbanner:bC(((e,t)=>((e,t)=>xw.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[lg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:gg(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:t=>{Li(t,Bw,{name:"alert-banner",value:e.url})},buttonBehaviours:Al([vg()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]}))(e,t.shared.providers))),input:bC(((e,t,n)=>((e,t,n)=>RT({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:L.none(),maximized:e.maximized,data:n},t))(e,t.shared.providers,n))),textarea:bC(((e,t,n)=>((e,t,n)=>RT({name:e.name,multiline:!0,label:e.label,inputMode:L.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:L.none(),maximized:e.maximized,data:n},t))(e,t.shared.providers,n))),label:bC(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:["tox-label"]},components:[ia(t.providers.translate(e.label))]},...F(e.items,t.interpreter)],behaviours:Al([PS(),gf.config({}),YS(L.none()),af.config({mode:"acyclic"})])}))(e,t.shared))),iframe:(e=>(t,n,r,s)=>{const i=ar(n,{source:"dynamic"});return bC(e)(t,i,r,s)})(((e,t,n)=>rT(e,t.shared.providers,n))),button:bC(((e,t)=>oC(e,t.shared.providers))),checkbox:bC(((e,t,n)=>((e,t,n)=>{const r=e=>(e.element.dom.click(),L.some(!0)),s=Cw.parts.field({factory:{sketch:b},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Al([PS(),em.config({disabled:()=>!e.enabled||t.isDisabled()}),Lw.config({}),xf.config({}),jS(n,_C,yC),af.config({mode:"special",onEnter:r,onSpace:r,stopSpaceKeyup:!0}),vf("checkbox-events",[zi(Xs(),((t,n)=>{Li(t,Nw,{name:e.name})}))])])}),i=Cw.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[ia(t.translate(e.label))],behaviours:Al([Ox.config({})])}),o=e=>_g("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons),a=cg({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[o("checked"),o("unchecked")]});return Cw.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[s,a.asSpec(),i],fieldBehaviours:Al([em.config({disabled:()=>!e.enabled||t.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:e=>{Cw.getField(e).each(em.disable)},onEnabled:e=>{Cw.getField(e).each(em.enable)}}),M_()])})})(e,t.shared.providers,n))),colorinput:bC(((e,t,n)=>Ix(e,t.shared,t.colorinput,n))),colorpicker:bC(((e,t,n)=>WS(0,t.shared.providers,n))),dropzone:bC(((e,t,n)=>XS(e,t.shared.providers,n))),grid:bC(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:F(e.items,t.interpreter)}))(e,t.shared))),listbox:bC(((e,t,n)=>((e,t,n)=>{const r=t.shared.providers,s=n.bind((t=>MT(e.items,t))).orThunk((()=>ne(e.items).filter(bT))),i=e.label.map((e=>Pw(e,r))),o=Cw.parts.field({dom:{},factory:{sketch:n=>mT({uid:n.uid,text:s.map((e=>e.text)),icon:L.none(),tooltip:e.label,role:L.none(),fetch:(n,r)=>{const s=xT(n,e.name,e.items,Du.getValue(n));r(_T(s,kv.CLOSE_ON_EXECUTE,t,!1))},onSetup:_(v),getApi:_({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Lw.config({}),US(s.map((e=>e.value)),(e=>pt(e.element,wT)),((t,n)=>{MT(e.items,n).each((e=>{ht(t.element,wT,e.value),Li(t,uT,{text:e.text})}))}))]},"tox-listbox",t.shared)}}),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[o]};return Cw.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:G([i.toArray(),[a]]),fieldBehaviours:Al([em.config({disabled:_(!e.enabled),onDisabled:e=>{Cw.getField(e).each(em.disable)},onEnabled:e=>{Cw.getField(e).each(em.enable)}})])})})(e,t,n))),selectbox:bC(((e,t,n)=>((e,t,n)=>{const r=F(e.items,(e=>({text:t.translate(e.text),value:e.value}))),s=e.label.map((e=>Pw(e,t))),i=Cw.parts.field({dom:{},...n.map((e=>({data:e}))).getOr({}),selectAttributes:{size:e.size},options:r,factory:ST,selectBehaviours:Al([em.config({disabled:()=>!e.enabled||t.isDisabled()}),Lw.config({}),vf("selectbox-change",[zi(Xs(),((t,n)=>{Li(t,Nw,{name:e.name})}))])])}),o=e.size>1?L.none():L.some(_g("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),a={dom:{tag:"div",classes:["tox-selectfield"]},components:G([[i],o.toArray()])};return Cw.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:G([s.toArray(),[a]]),fieldBehaviours:Al([em.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{Cw.getField(e).each(em.disable)},onEnabled:e=>{Cw.getField(e).each(em.enable)}}),M_()])})})(e,t.shared.providers,n))),sizeinput:bC(((e,t)=>((e,t)=>{let n=DT;const r=ro("ratio-event"),s=e=>_g(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons),i=kT.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[s("lock"),s("unlock")],buttonBehaviours:Al([em.config({disabled:()=>!e.enabled||t.isDisabled()}),M_(),Lw.config({})])}),o=e=>({dom:{tag:"div",classes:["tox-form__group"]},components:e}),a=n=>Cw.parts.field({factory:Xw,inputClasses:["tox-textfield"],inputBehaviours:Al([em.config({disabled:()=>!e.enabled||t.isDisabled()}),M_(),Lw.config({}),vf("size-input-events",[zi(Vs(),((e,t)=>{Li(e,r,{isField1:n})})),zi(Xs(),((t,n)=>{Li(t,Nw,{name:e.name})}))])]),selectOnFocus:!1}),l=e=>({dom:{tag:"label",classes:["tox-label"]},components:[ia(t.translate(e))]}),c=kT.parts.field1(o([Cw.parts.label(l("Width")),a(!0)])),d=kT.parts.field2(o([Cw.parts.label(l("Height")),a(!1)]));return kT.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,d,o([l(" "),i])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,r)=>{LT(Du.getValue(e)).each((e=>{n(e).each((e=>{Du.setValue(t,(e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let n=e.value.toFixed((r=e.unit)in t?t[r]:1);var r;return-1!==n.indexOf(".")&&(n=n.replace(/\.?0*$/,"")),n+e.unit})(e))}))}))},coupledFieldBehaviours:Al([em.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{kT.getField1(e).bind(Cw.getField).each(em.disable),kT.getField2(e).bind(Cw.getField).each(em.disable),kT.getLock(e).each(em.disable)},onEnabled:e=>{kT.getField1(e).bind(Cw.getField).each(em.enable),kT.getField2(e).bind(Cw.getField).each(em.enable),kT.getLock(e).each(em.enable)}}),M_(),vf("size-input-events2",[zi(r,((e,t)=>{const r=t.event.isField1,s=r?kT.getField1(e):kT.getField2(e),i=r?kT.getField2(e):kT.getField1(e),o=s.map(Du.getValue).getOr(""),a=i.map(Du.getValue).getOr("");n=OT(o,a)}))])])})})(e,t.shared.providers))),slider:bC(((e,t,n)=>((e,t,n)=>{const r=yS.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ia(t.translate(e.label))]}),s=yS.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),i=yS.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return yS.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:_(n.getOrThunk((()=>(Math.abs(e.max)-Math.abs(e.min))/2)))},components:[r,s,i],sliderBehaviours:Al([PS(),xf.config({})]),onChoose:(t,n,r)=>{Li(t,Nw,{name:e.name,value:r})}})})(e,t.shared.providers,n))),urlinput:bC(((e,t,n)=>((e,t,n,r)=>{const s=t.shared.providers,i=t=>{const r=Du.getValue(t);n.addToHistory(r.value,e.filetype)},o=Cw.parts.field({factory:GT,...r.map((e=>({initialData:e}))).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":vC,type:"url"},minChars:0,responseTime:0,fetch:r=>{const s=gC(e.filetype,r,n),i=_T(s,kv.BUBBLE_TO_SANDBOX,t,!1);return tx(i)},getHotspot:e=>h.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(ux)&&ux.run(e).get(v)},typeaheadBehaviours:Al(G([n.getValidationHandler().map((t=>ux.config({getRoot:e=>qe(e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(e,t)=>{l.getOpt(e).each((e=>{ht(e.element,"title",s.translate(t))}))}},validator:{validate:n=>{const r=Du.getValue(n);return KT((n=>{t({type:e.filetype,url:r.value},(e=>{if("invalid"===e.status){const t=Yn.error(e.message);n(t)}else{const t=Yn.value(e.message);n(t)}}))}))},validateOnLoad:!1}}))).toArray(),[em.config({disabled:()=>!e.enabled||s.isDisabled()}),Lw.config({}),vf("urlinput-events",G(["file"===e.filetype?[zi(qs(),(t=>{Li(t,Nw,{name:e.name})}))]:[],[zi(Xs(),(t=>{Li(t,Nw,{name:e.name}),i(t)})),zi(ii(),(t=>{Li(t,Nw,{name:e.name}),i(t)}))]]))]])),eventOrder:{[qs()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:Wv(0,0,"normal")},onExecute:(e,t,n)=>{Li(t,Fw,{})},onItemExecute:(t,n,r,s)=>{i(t),Li(t,Nw,{name:e.name})}}),a=e.label.map((e=>Pw(e,s))),l=cg(((e,t,n=e,r=e)=>_g(n,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:{title:s.translate(r),"aria-live":"polite",...t.fold((()=>({})),(e=>({id:e})))}},s.icons))("invalid",L.some(vC),"warning")),c=cg({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[l.asSpec()]}),d=n.getUrlPicker(e.filetype),u=ro("browser.url.event"),h=cg({dom:{tag:"div",classes:["tox-control-wrap"]},components:[o,c.asSpec()],behaviours:Al([em.config({disabled:()=>!e.enabled||s.isDisabled()})])}),m=cg(rC({name:e.name,icon:L.some("browse"),text:e.label.getOr(""),enabled:e.enabled,primary:!1,buttonType:L.none(),borderless:!0},(e=>ki(e,u)),s,[],["tox-browse-url"]));return Cw.sketch({dom:Rw([]),components:a.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:G([[h.asSpec()],d.map((()=>m.asSpec())).toArray()])}]),fieldBehaviours:Al([em.config({disabled:()=>!e.enabled||s.isDisabled(),onDisabled:e=>{Cw.getField(e).each(em.disable),m.getOpt(e).each(em.disable)},onEnabled:e=>{Cw.getField(e).each(em.enable),m.getOpt(e).each(em.enable)}}),M_(),vf("url-input-events",[zi(u,(t=>{Hh.getCurrent(t).each((n=>{const r=Du.getValue(n),s={fieldname:e.name,...r};d.each((r=>{r(s).get((r=>{Du.setValue(n,r),Li(t,Nw,{name:e.name})}))}))}))}))])])})})(e,t,t.urlinput,n))),customeditor:bC((e=>{const t=oc(),n=cg({dom:{tag:e.tag}}),r=oc();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Al([vf("custom-editor-events",[$i((s=>{n.getOpt(s).each((n=>{((e=>ve(e,"init"))(e)?e.init(n.element.dom):GS.load(e.scriptId,e.scriptUrl).then((t=>t(n.element.dom,e.settings)))).then((e=>{r.on((t=>{e.setValue(t)})),r.clear(),t.set(e)}))}))}))]),US(L.none(),(()=>t.get().fold((()=>r.get().getOr("")),(e=>e.getValue()))),((e,n)=>{t.get().fold((()=>r.set(n)),(e=>e.setValue(n)))})),PS()]),components:[n.asSpec()]}})),htmlpanel:bC((e=>"presentation"===e.presets?xw.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):xw.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Al([Lw.config({}),xf.config({})])}))),imagepreview:bC(((e,t,n)=>sT(e,n))),table:bC(((e,t)=>((e,t)=>{const n=e=>({dom:{tag:"th",innerHtml:t.translate(e)}}),r=e=>({dom:{tag:"td",innerHtml:t.translate(e)}}),s=e=>({dom:{tag:"tr"},components:F(e,r)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(o=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:F(o,n)}]}),(i=e.cells,{dom:{tag:"tbody"},components:F(i,s)})],behaviours:Al([Lw.config({}),xf.config({})])};var i,o})(e,t.shared.providers))),panel:bC(((e,t)=>((e,t)=>({dom:{tag:"div",classes:e.classes},components:F(e.items,t.shared.interpreter)}))(e,t)))},xC={field:(e,t)=>t,record:_([])},MC=(e,t,n,r)=>{const s=ar(r,{shared:{interpreter:t=>SC(e,t,n,s)}});return SC(e,t,n,s)},SC=(e,t,n,r)=>ge(wC,t.type).fold((()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t)),(s=>s(e,t,n,r))),TC="layout-inset",CC=e=>e.x,EC=(e,t)=>e.x+e.width/2-t.width/2,kC=(e,t)=>e.x+e.width-t.width,LC=e=>e.y,AC=(e,t)=>e.y+e.height-t.height,DC=(e,t)=>e.y+e.height/2-t.height/2,OC=(e,t,n)=>Va(kC(e,t),AC(e,t),n.insetSouthwest(),Xa(),"southwest",nl(e,{right:0,bottom:3}),TC),RC=(e,t,n)=>Va(CC(e),AC(e,t),n.insetSoutheast(),qa(),"southeast",nl(e,{left:1,bottom:3}),TC),PC=(e,t,n)=>Va(kC(e,t),LC(e),n.insetNorthwest(),Ga(),"northwest",nl(e,{right:0,top:2}),TC),NC=(e,t,n)=>Va(CC(e),LC(e),n.insetNortheast(),Wa(),"northeast",nl(e,{left:1,top:2}),TC),IC=(e,t,n)=>Va(EC(e,t),LC(e),n.insetNorth(),Ka(),"north",nl(e,{top:2}),TC),zC=(e,t,n)=>Va(EC(e,t),AC(e,t),n.insetSouth(),Ja(),"south",nl(e,{bottom:3}),TC),BC=(e,t,n)=>Va(kC(e,t),DC(e,t),n.insetEast(),Qa(),"east",nl(e,{right:0}),TC),FC=(e,t,n)=>Va(CC(e),DC(e,t),n.insetWest(),Za(),"west",nl(e,{left:1}),TC),HC=e=>{switch(e){case"north":return IC;case"northeast":return NC;case"northwest":return PC;case"south":return zC;case"southeast":return RC;case"southwest":return OC;case"east":return BC;case"west":return FC}},jC=(e,t,n,r,s)=>tc(r).map(HC).getOr(IC)(e,t,n,r,s),UC=e=>{switch(e){case"north":return zC;case"northeast":return RC;case"northwest":return OC;case"south":return IC;case"southeast":return NC;case"southwest":return PC;case"east":return FC;case"west":return BC}},YC=(e,t,n,r,s)=>tc(r).map(UC).getOr(IC)(e,t,n,r,s),VC={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},$C=(e,t,n)=>{const r={maxHeightFunction:wc()};return()=>n()?{type:"node",root:st(e()),node:L.from(e()),bubble:Tc(12,12,VC),layouts:{onRtl:()=>[NC],onLtr:()=>[PC]},overrides:r}:{type:"hotspot",hotspot:t(),bubble:Tc(-12,12,VC),layouts:{onRtl:()=>[dl],onLtr:()=>[ul]},overrides:r}},WC=(e,t,n)=>()=>n()?{type:"node",root:st(e()),node:L.from(e()),layouts:{onRtl:()=>[IC],onLtr:()=>[IC]}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[fl],onLtr:()=>[fl]}},GC=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const t=e.selection.getRng();return L.some(Zc.range(De.fromDom(t.startContainer),t.startOffset,De.fromDom(t.endContainer),t.endOffset))}}),qC=e=>t=>({type:"node",root:e(),node:t}),XC=(e,t,n)=>{const r=yv(e),s=()=>De.fromDom(e.getBody()),i=()=>De.fromDom(e.getContentAreaContainer()),o=()=>r||!n();return{inlineDialog:$C(i,t,o),banner:WC(i,t,o),cursor:GC(e,s),node:qC(s)}},KC=e=>(t,n)=>{Fb(e)(t,n)},JC=e=>()=>kb(e),ZC=e=>()=>Lb(e),QC=e=>()=>Eb(e),eE=e=>({colorPicker:KC(e),hasCustomColors:JC(e),getColors:ZC(e),getColorCols:QC(e)}),tE=e=>()=>rv(e),nE=e=>({isDraggableModal:tE(e)}),rE=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],sE=e=>V(e,((e,t)=>{if(ve(t,"items")){const n=sE(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if((e=>ve(e,"inline"))(t)||(e=>ve(e,"block"))(t)||(e=>ve(e,"selector"))(t)){const n=`custom-${i(t.name)?t.name:t.title.toLowerCase()}`;return{customFormats:e.customFormats.concat([{name:n,format:t}]),formats:e.formats.concat([{title:t.title,format:n,icon:t.icon}])}}return{...e,formats:e.formats.concat(t)}}),{customFormats:[],formats:[]}),iE=e=>zg(e).map((t=>{const n=((e,t)=>{const n=sE(t),r=t=>{H(t,(t=>{e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))};return e.formatter?r(n.customFormats):e.on("init",(()=>{r(n.customFormats)})),n.formats})(e,t);return Bg(e)?rE.concat(n):n})).getOr(rE),oE=(e,t,n)=>{const r={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return ar(e,r)},aE=(e,t,n,r)=>{const s=t=>F(t,(t=>{const o=oe(t);if(ye(t,"items")){const e=s(t.items);return ar((e=>ar(e,{type:"submenu"}))(t),{getStyleItems:_(e)})}return ye(t,"format")?(e=>oE(e,n,r))(t):1===o.length&&N(o,"title")?ar(t,{type:"separator"}):(t=>{const s=i(t.name)?t.name:ro(t.title),o=`custom-${s}`,a={type:"formatter",format:o,isSelected:n(o),getStylePreview:r(o)},l=ar(t,a);return e.formatter.register(s,l),l})(t)}));return s(t)},lE=e=>{const t=t=>()=>e.formatter.match(t),n=t=>()=>{const n=e.formatter.get(t);return void 0!==n?L.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):L.none()},r=e=>{const t=e.items;return void 0!==t&&t.length>0?q(t,r):[e.format]},s=ws([]),i=ws([]),o=ws([]),a=ws([]),l=ws(!1);e.on("PreInit",(o=>{const a=iE(e),l=aE(e,a,t,n);s.set(l),i.set(q(l,r))})),e.on("addStyleModifications",(s=>{const i=aE(e,s.items,t,n);o.set(i),l.set(s.replace),a.set(q(i,r))}));return{getData:()=>{const e=l.get()?[]:s.get(),t=o.get();return e.concat(t)},getFlattenedKeys:()=>{const e=l.get()?[]:i.get(),t=a.get();return e.concat(t)}}},cE=qS.trim,dE=e=>t=>{if((e=>m(e)&&1===e.nodeType)(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},uE=dE("true"),hE=dE("false"),mE=(e,t,n,r,s)=>({type:e,title:t,url:n,level:r,attach:s}),pE=e=>e.innerText||e.textContent,fE=e=>(e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name))(e)&&vE(e),gE=e=>e&&/^(H[1-6])$/.test(e.nodeName),vE=e=>(e=>{for(;e=e.parentNode;){const t=e.contentEditable;if(t&&"inherit"!==t)return uE(e)}return!1})(e)&&!hE(e),yE=e=>gE(e)&&vE(e),_E=e=>{const t=(e=>e.id?e.id:ro("h"))(e);return mE("header",pE(e),"#"+t,(e=>gE(e)?parseInt(e.nodeName.substr(1),10):0)(e),(()=>{e.id=t}))},bE=e=>{const t=e.id||e.name,n=pE(e);return mE("anchor",n||"#"+t,"#"+t,0,v)},wE=e=>{const t=(n="h1,h2,h3,h4,h5,h6,a:not([href])",r=e,F(od(De.fromDom(r),n),(e=>e.dom)));var n,r;return t},xE=e=>cE(e.title).length>0,ME=e=>{const t=wE(e);return U((e=>F(U(e,yE),_E))(t).concat((e=>F(U(e,fE),bE))(t)),xE)},SE="tinymce-url-history",TE=e=>i(e)&&/^https?/.test(e),CE=e=>o(e)&&pe(e,(e=>{return!(l(t=e)&&t.length<=5&&X(t,TE));var t})).isNone(),EE=()=>{const e=xb.getItem(SE);if(null===e)return{};let t;try{t=JSON.parse(e)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+SE+" was not valid JSON",e),{};throw e}return CE(t)?t:(console.log("Local storage "+SE+" was not valid format",t),{})},kE=e=>{const t=EE();return ge(t,e).getOr([])},LE=(e,t)=>{if(!TE(e))return;const n=EE(),r=ge(n,t).getOr([]),s=U(r,(t=>t!==e));n[t]=[e].concat(s).slice(0,5),(e=>{if(!CE(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));xb.setItem(SE,JSON.stringify(e))})(n)},AE=e=>!!e,DE=e=>ce(qS.makeMap(e,/[, ]/),AE),OE=e=>L.from(Jg(e)),RE=(e,t)=>{const n=(e=>{const t=L.from(Qg(e)).filter(AE).map(DE);return OE(e).fold(C,(e=>t.fold(E,(e=>oe(e).length>0&&e))))})(e);return d(n)?n?OE(e):L.none():n[t]?OE(e):L.none()},PE=e=>L.from(e).filter(i).getOrUndefined(),NE=e=>({getHistory:kE,addToHistory:LE,getLinkInformation:()=>(e=>ev(e)?L.some({targets:ME(e.getBody()),anchorTop:PE(tv(e)),anchorBottom:PE(nv(e))}):L.none())(e),getValidationHandler:()=>(e=>L.from(Zg(e)))(e),getUrlPicker:t=>((e,t)=>RE(e,t).map((n=>r=>ex((s=>{const a={filetype:t,fieldname:r.fieldname,...L.from(r.meta).getOr({})};n.call(e,((e,t)=>{if(!i(e))throw new Error("Expected value to be string");if(void 0!==t&&!o(t))throw new Error("Expected meta to be a object");s({value:e,meta:t})}),r.value,a)})))))(e,t)}),IE=(e,t,n)=>{const r=ws(!1),s=(e=>{const t=ws(gv(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}})(t),i={shared:{providers:{icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:dg.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},interpreter:e=>((e,t,n)=>SC(xC,e,t,n))(e,{},i),anchors:XC(t,n,s.isPositionedAtTop),header:s,getSink:e},urlinput:NE(t),styles:lE(t),colorinput:eE(t),dialog:nE(t),isContextMenuOpen:()=>r.get(),setContextMenuState:e=>r.set(e)};return i},zE=Lh,BE=hh,FE=_([hs("shell",!1),Xr("makeItem"),hs("setupItem",v),Nu("listBehaviours",[gf])]),HE=ch({name:"items",overrides:()=>({behaviours:Al([gf.config({})])})}),jE=_([HE]),UE=Ih({name:_("CustomList")(),configFields:FE(),partFields:jE(),factory:(e,t,n,r)=>{const s=e.shell?{behaviours:[gf.config({})],components:[]}:{behaviours:[],components:t},i=t=>e.shell?L.some(t):wh(t,e,"items");return{uid:e.uid,dom:e.dom,components:s.components,behaviours:Pu(e.listBehaviours,s.behaviours),apis:{setItems:(t,n)=>{i(t).fold((()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(r=>{const s=gf.contents(r),i=n.length,o=i-s.length,a=o>0?z(o,(()=>e.makeItem())):[],l=s.slice(i);H(l,(e=>gf.remove(r,e))),H(a,(e=>gf.append(r,e)));const c=gf.contents(r);H(c,((r,s)=>{e.setupItem(t,r,n[s],s)}))}))}}}},apis:{setItems:(e,t,n)=>{e.setItems(t,n)}}}),YE=_([Xr("dom"),hs("shell",!0),Ou("toolbarBehaviours",[gf])]),VE=_([ch({name:"groups",overrides:()=>({behaviours:Al([gf.config({})])})})]),$E=Ih({name:"Toolbar",configFields:YE(),partFields:VE(),factory:(e,t,n,r)=>{const s=t=>e.shell?L.some(t):wh(t,e,"groups"),i=e.shell?{behaviours:[gf.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:i.components,behaviours:Pu(e.toolbarBehaviours,i.behaviours),apis:{setGroups:(e,t)=>{s(e).fold((()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(e=>{gf.set(e,t)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)}}}),WE=v,GE=C,qE=_([]);var XE=Object.freeze({__proto__:null,setup:WE,isDocked:GE,getBehaviours:qE});const KE=e=>(_e(Tt(e,"position"),"fixed")?L.none():Xe(e)).orThunk((()=>{const t=De.fromTag("span");return Ge(e).bind((e=>{Tn(e,t);const n=Xe(t);return kn(t),n}))})),JE=e=>KE(e).map(zt).getOrThunk((()=>Nt(0,0))),ZE=xs([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),QE=(e,t)=>{const n=e.element;Ho(n,t.transitionClass),jo(n,t.fadeOutClass),Ho(n,t.fadeInClass),t.onShow(e)},ek=(e,t)=>{const n=e.element;Ho(n,t.transitionClass),jo(n,t.fadeInClass),Ho(n,t.fadeOutClass),t.onHide(e)},tk=(e,t,n)=>X(e,(e=>{switch(e){case"bottom":return((e,t)=>e.bottom<=t.bottom)(t,n);case"top":return((e,t)=>e.y>=t.y)(t,n)}})),nk=(e,t)=>t.getInitialPos().map((t=>zn(t.bounds.x,t.bounds.y,Ht(e),Ot(e)))),rk=(e,t,n)=>n.getInitialPos().bind((r=>{switch(n.clearInitialPos(),r.position){case"static":return L.some(ZE.static());case"absolute":const n=KE(e).map(Bn).getOrThunk((()=>Bn(ct())));return L.some(ZE.absolute(Yl("absolute",ge(r.style,"left").map((e=>t.x-n.x)),ge(r.style,"top").map((e=>t.y-n.y)),ge(r.style,"right").map((e=>n.right-t.right)),ge(r.style,"bottom").map((e=>n.bottom-t.bottom)))));default:return L.none()}})),sk=(e,t,n)=>{const r=Bn(e);if(tk(n.getModes(),r,t))return L.none();{((e,t,n)=>{n.setInitialPos({style:Ct(e),position:Mt(e,"position")||"static",bounds:t})})(e,r,n);const s=Hn(),i=r.x-s.x,o=t.y-s.y,a=s.bottom-t.bottom,l=r.y<=t.y;return L.some(ZE.fixed(Yl("fixed",L.some(i),l?L.some(o):L.none(),L.none(),l?L.none():L.some(a))))}},ik=(e,t,n)=>{const r=e.element;return _e(Tt(r,"position"),"fixed")?((e,t,n)=>nk(e,n).filter((e=>tk(n.getModes(),e,t))).bind((t=>rk(e,t,n))))(r,t,n):sk(r,t,n)},ok=(e,t,n)=>{n.setDocked(!1),H(["left","right","top","bottom","position"],(t=>kt(e.element,t))),t.onUndocked(e)},ak=(e,t,n,r)=>{const s="fixed"===r.position;n.setDocked(s),Vl(e.element,r);(s?t.onDocked:t.onUndocked)(e)},lk=(e,t,n,r,s=!1)=>{t.contextual.each((t=>{t.lazyContext(e).each((i=>{const o=((e,t)=>e.y<t.bottom&&e.bottom>t.y)(i,r);if(o!==n.isVisible())if(n.setVisible(o),s&&!o)Yo(e.element,[t.fadeOutClass]),t.onHide(e);else{(o?QE:ek)(e,t)}}))}))},ck=(e,t,n)=>{const r=e.element;n.setDocked(!1),((e,t)=>{const n=e.element;return nk(n,t).bind((e=>rk(n,e,t)))})(e,n).each((r=>{r.fold((()=>ok(e,t,n)),(r=>ak(e,t,n,r)),v)})),n.setVisible(!0),t.contextual.each((t=>{Vo(r,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)})),dk(e,t,n)},dk=(e,t,n)=>{e.getSystem().isConnected()&&((e,t,n)=>{const r=t.lazyViewport(e);n.isDocked()&&lk(e,t,n,r),ik(e,r,n).each((s=>{s.fold((()=>ok(e,t,n)),(r=>ak(e,t,n,r)),(s=>{lk(e,t,n,r,!0),ak(e,t,n,s)}))}))})(e,t,n)},uk=(e,t,n)=>{n.isDocked()&&ck(e,t,n)};var hk=Object.freeze({__proto__:null,refresh:dk,reset:uk,isDocked:(e,t,n)=>n.isDocked(),getModes:(e,t,n)=>n.getModes(),setModes:(e,t,n,r)=>n.setModes(r)});var mk=Object.freeze({__proto__:null,events:(e,t)=>Pi([Vi(Zs(),((n,r)=>{e.contextual.each((e=>{if(Uo(n.element,e.transitionClass)){Vo(n.element,[e.transitionClass,e.fadeInClass]);(t.isVisible()?e.onShown:e.onHidden)(n)}r.stop()}))})),zi(gi(),((n,r)=>{dk(n,e,t)})),zi(vi(),((n,r)=>{uk(n,e,t)}))])}),pk=[us("contextual",[Zr("fadeInClass"),Zr("fadeOutClass"),Zr("transitionClass"),es("lazyContext"),za("onShow"),za("onShown"),za("onHide"),za("onHidden")]),ys("lazyViewport",Hn),_s("modes",["top","bottom"],Or),za("onDocked"),za("onUndocked")];const fk=Ol({fields:pk,name:"docking",active:mk,apis:hk,state:Object.freeze({__proto__:null,init:e=>{const t=ws(!1),n=ws(!0),r=oc(),s=ws(e.modes);return xo({isDocked:t.get,setDocked:t.set,getInitialPos:r.get,setInitialPos:r.set,clearInitialPos:r.clear,isVisible:n.get,setVisible:n.set,getModes:s.get,setModes:s.set,readState:()=>`docked:  ${t.get()}, visible: ${n.get()}, modes: ${s.get().join(",")}`})}})}),gk=_(ro("toolbar-height-change")),vk={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},yk="tox-tinymce--toolbar-sticky-on",_k="tox-tinymce--toolbar-sticky-off",bk=(e,t)=>N(fk.getModes(e),t),wk=e=>{const t=e.element;Ge(t).each((n=>{const r="padding-"+fk.getModes(e)[0];if(fk.isDocked(e)){const e=Ht(n);bt(t,"width",e+"px"),bt(n,r,(e=>Rt(e)+(parseInt(Mt(e,"margin-top"),10)||0)+(parseInt(Mt(e,"margin-bottom"),10)||0))(t)+"px")}else kt(t,"width"),kt(n,r)}))},xk=(e,t)=>{t?(jo(e,vk.fadeOutClass),Yo(e,[vk.transitionClass,vk.fadeInClass])):(jo(e,vk.fadeInClass),Yo(e,[vk.fadeOutClass,vk.transitionClass]))},Mk=(e,t)=>{const n=De.fromDom(e.getContainer());t?(Ho(n,yk),jo(n,_k)):(Ho(n,_k),jo(n,yk))},Sk=(e,t)=>{const n=oc(),r=t.getSink,s=e=>{r().each((t=>e(t.element)))},i=t=>{e.inline||wk(t),Mk(e,fk.isDocked(t)),t.getSystem().broadcastOn([mu()],{}),r().each((e=>e.getSystem().broadcastOn([mu()],{})))},o=e.inline?[]:[Il.config({channels:{[gk()]:{onReceive:wk}}})];return[xf.config({}),fk.config({contextual:{lazyContext:t=>{const n=Rt(t.element),r=e.inline?e.getContentAreaContainer():e.getContainer(),s=Bn(De.fromDom(r)),i=s.height-n,o=s.y+(bk(t,"top")?0:n);return L.some(zn(s.x,o,s.width,i))},onShow:()=>{s((e=>xk(e,!0)))},onShown:e=>{s((e=>Vo(e,[vk.transitionClass,vk.fadeInClass]))),n.get().each((t=>{((e,t)=>{const n=Ye(t);Hl(n).filter((e=>!je(t,e))).filter((t=>je(t,De.fromDom(n.dom.body))||Ue(e,t))).each((()=>Bl(t)))})(e.element,t),n.clear()}))},onHide:e=>{((e,t)=>jl(e).orThunk((()=>t().toOptional().bind((e=>jl(e.element))))))(e.element,r).fold(n.clear,n.set),s((e=>xk(e,!1)))},onHidden:()=>{s((e=>Vo(e,[vk.transitionClass])))},...vk},lazyViewport:t=>{const n=Hn(),r=qg(e),s=n.y+(bk(t,"top")?r:0),i=n.height-(bk(t,"bottom")?r:0);return zn(n.x,s,n.width,i)},modes:[t.header.getDockingMode()],onDocked:i,onUndocked:i}),...o]};var Tk=Object.freeze({__proto__:null,setup:(e,t,n)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",(()=>{n().each(fk.reset)})),e.on("ResizeWindow ResizeEditor",(()=>{n().each(wk)})),e.on("SkinLoaded",(()=>{n().each((e=>{fk.isDocked(e)?fk.reset(e):fk.refresh(e)}))})),e.on("FullscreenStateChanged",(()=>{n().each(fk.reset)}))),e.on("AfterScrollIntoView",(e=>{n().each((t=>{fk.refresh(t);const n=t.element;ep(n)&&((e,t)=>{const n=Ye(t),r=n.dom.defaultView.innerHeight,s=Ln(n),i=De.fromDom(e.elm),o=Fn(i),a=Ot(i),l=o.y,c=l+a,d=zt(t),u=Ot(t),h=d.top,m=h+u,p=Math.abs(h-s.top)<2,f=Math.abs(m-(s.top+r))<2;if(p&&l<m)An(s.left,l-u,n);else if(f&&c>h){const e=l-r+a+u;An(s.left,e,n)}})(e,n)}))})),e.on("PostRender",(()=>{Mk(e,!1)}))},isDocked:e=>e().map(fk.isDocked).getOr(!1),getBehaviours:Sk});const Ck=Sr([ey,Kr("items",Cr([kr([ty,rs("items",Or)]),Or]))].concat(Ay)),Ek=[as("text"),as("tooltip"),as("icon"),es("fetch"),ys("onSetup",(()=>v))],kk=Sr([ey,...Ek]),Lk=e=>jr("menubutton",kk,e),Ak=Sr([ey,fy,py,my,yy,ay,uy,gs("presets","normal",["normal","color","listpreview"]),My(1),cy,dy]);var Dk=Nh({factory:(e,t)=>{const n={focus:af.focusIn,setMenus:(e,n)=>{const r=F(n,(e=>{const n={type:"menubutton",text:e.text,fetch:t=>{t(e.getItems())}},r=Lk(n).mapError((e=>Vr(e))).getOrDie();return ZT(r,"tox-mbtn",t.backstage,L.some("menuitem"))}));gf.set(e,r)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Al([gf.config({}),vf("menubar-events",[$i((t=>{e.onSetup(t)})),zi(Ys(),((e,t)=>{va(e.element,".tox-mbtn--active").each((n=>{ya(t.event.target,".tox-mbtn").each((t=>{je(n,t)||e.getSystem().getByDom(n).each((n=>{e.getSystem().getByDom(t).each((e=>{Dx.expand(e),Dx.close(n),xf.focus(e)}))}))}))}))})),zi(xi(),((e,t)=>{t.event.prevFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((n=>{t.event.newFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((e=>{Dx.isOpen(n)&&(Dx.expand(e),Dx.close(n))}))}))}))]),af.config({mode:"flow",selector:".tox-mbtn",onEscape:t=>(e.onEscape(t),L.some(!0))}),Lw.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Xr("dom"),Xr("uid"),Xr("onEscape"),Xr("backstage"),hs("onSetup",v)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,n)=>{e.setMenus(t,n)}}});const Ok=(e,t)=>t.getAnimationRoot.fold((()=>e.element),(t=>t(e))),Rk=e=>e.dimension.property,Pk=(e,t)=>e.dimension.getDimension(t),Nk=(e,t)=>{const n=Ok(e,t);Vo(n,[t.shrinkingClass,t.growingClass])},Ik=(e,t)=>{jo(e.element,t.openClass),Ho(e.element,t.closedClass),bt(e.element,Rk(t),"0px"),Lt(e.element)},zk=(e,t)=>{jo(e.element,t.closedClass),Ho(e.element,t.openClass),kt(e.element,Rk(t))},Bk=(e,t,n,r)=>{n.setCollapsed(),bt(e.element,Rk(t),Pk(t,e.element)),Lt(e.element),Nk(e,t),Ik(e,t),t.onStartShrink(e),t.onShrunk(e)},Fk=(e,t,n,r)=>{const s=r.getOrThunk((()=>Pk(t,e.element)));n.setCollapsed(),bt(e.element,Rk(t),s),Lt(e.element);const i=Ok(e,t);jo(i,t.growingClass),Ho(i,t.shrinkingClass),Ik(e,t),t.onStartShrink(e)},Hk=(e,t,n)=>{const r=Pk(t,e.element);("0px"===r?Bk:Fk)(e,t,n,L.some(r))},jk=(e,t,n)=>{const r=Ok(e,t),s=Uo(r,t.shrinkingClass),i=Pk(t,e.element);zk(e,t);const o=Pk(t,e.element);(s?()=>{bt(e.element,Rk(t),i),Lt(e.element)}:()=>{Ik(e,t)})(),jo(r,t.shrinkingClass),Ho(r,t.growingClass),zk(e,t),bt(e.element,Rk(t),o),n.setExpanded(),t.onStartGrow(e)},Uk=(e,t,n)=>{const r=Ok(e,t);return!0===Uo(r,t.growingClass)},Yk=(e,t,n)=>{const r=Ok(e,t);return!0===Uo(r,t.shrinkingClass)};var Vk=Object.freeze({__proto__:null,refresh:(e,t,n)=>{if(n.isExpanded()){kt(e.element,Rk(t));const n=Pk(t,e.element);bt(e.element,Rk(t),n)}},grow:(e,t,n)=>{n.isExpanded()||jk(e,t,n)},shrink:(e,t,n)=>{n.isExpanded()&&Hk(e,t,n)},immediateShrink:(e,t,n)=>{n.isExpanded()&&Bk(e,t,n)},hasGrown:(e,t,n)=>n.isExpanded(),hasShrunk:(e,t,n)=>n.isCollapsed(),isGrowing:Uk,isShrinking:Yk,isTransitioning:(e,t,n)=>Uk(e,t)||Yk(e,t),toggleGrow:(e,t,n)=>{(n.isExpanded()?Hk:jk)(e,t,n)},disableTransitions:Nk});var $k=Object.freeze({__proto__:null,exhibit:(e,t,n)=>{const r=t.expanded;return So(r?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Ss(t.dimension.property,"0px")})},events:(e,t)=>Pi([Vi(Zs(),((n,r)=>{if(r.event.raw.propertyName===e.dimension.property){Nk(n,e),t.isExpanded()&&kt(n.element,e.dimension.property);(t.isExpanded()?e.onGrown:e.onShrunk)(n)}}))])}),Wk=[Xr("closedClass"),Xr("openClass"),Xr("shrinkingClass"),Xr("growingClass"),ss("getAnimationRoot"),za("onShrunk"),za("onStartShrink"),za("onGrown"),za("onStartGrow"),hs("expanded",!1),Kr("dimension",$r("property",{width:[ja("property","width"),ja("getDimension",(e=>Ht(e)+"px"))],height:[ja("property","height"),ja("getDimension",(e=>Ot(e)+"px"))]}))];const Gk=Ol({fields:Wk,name:"sliding",active:$k,apis:Vk,state:Object.freeze({__proto__:null,init:e=>{const t=ws(e.expanded);return xo({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:x(t.set,!1),setExpanded:x(t.set,!0),readState:()=>"expanded: "+t.get()})}})}),qk="container",Xk=[Ou("slotBehaviours",[])],Kk=e=>"<alloy.field."+e+">",Jk=(e,t)=>{const n=t=>Th(e),r=(t,n)=>(r,s)=>wh(r,e,s).map((e=>t(e,s))).getOr(n),s=(e,t)=>"true"!==pt(e.element,"aria-hidden"),i=r(s,!1),o=r(((e,t)=>{if(s(e)){const n=e.element;bt(n,"display","none"),ht(n,"aria-hidden","true"),Li(e,Mi(),{name:t,visible:!1})}})),a=(l=o,(e,t)=>{H(t,(t=>l(e,t)))});var l;const c=r(((e,t)=>{if(!s(e)){const n=e.element;kt(n,"display"),vt(n,"aria-hidden"),Li(e,Mi(),{name:t,visible:!0})}})),d={getSlotNames:n,getSlot:(t,n)=>wh(t,e,n),isShowing:i,hideSlot:o,hideAllSlots:e=>a(e,n()),showSlot:c};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ru(e.slotBehaviours),apis:d}},Zk=ce({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,n)=>e.getSlot(t,n),isShowing:(e,t,n)=>e.isShowing(t,n),hideSlot:(e,t,n)=>e.hideSlot(t,n),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,n)=>e.showSlot(t,n)},(e=>bo(e))),Qk={...Zk,sketch:e=>{const t=(()=>{const e=[];return{slot:(t,n)=>(e.push(t),gh(qk,Kk(t),n)),record:_(e)}})(),n=e(t),r=t.record(),s=F(r,(e=>ah({name:e,pname:Kk(e)})));return Dh(qk,Xk,s,Jk,n)}},eL=Sr([py,fy,ys("onShow",v),ys("onHide",v),uy]),tL=e=>({element:()=>e.element.dom}),nL=(e,t)=>{const n=F(oe(t),(e=>{const n=t[e],r=Ur((e=>jr("sidebar",eL,e))(n));return{name:e,getApi:tL,onSetup:r.onSetup,onShow:r.onShow,onHide:r.onHide}}));return F(n,(t=>{const r=ws(v);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:c_([L_(t,r),A_(t,r),zi(Mi(),((e,t)=>{const r=t.event,s=$(n,(e=>e.name===r.name));s.each((t=>{(r.visible?t.onShow:t.onHide)(t.getApi(e))}))}))])})}))},rL=e=>Qk.sketch((t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:nL(t,e),slotBehaviours:c_([$i((e=>Qk.hideAllSlots(e)))])}))),sL=e=>Hh.getCurrent(e).bind((e=>{if(Gk.isGrowing(e)||Gk.hasGrown(e)){return Hh.getCurrent(e).bind((e=>$(Qk.getSlotNames(e),(t=>Qk.isShowing(e,t)))))}return L.none()})),iL=ro("FixSizeEvent"),oL=ro("AutoSizeEvent");var aL=Object.freeze({__proto__:null,block:(e,t,n,r)=>{ht(e.element,"aria-busy",!0);const s=t.getRoot(e).getOr(e),i=Al([af.config({mode:"special",onTab:()=>L.some(!0),onShiftTab:()=>L.some(!0)}),xf.config({})]),o=r(s,i),a=s.getSystem().build(o);gf.append(s,da(a)),a.hasConfigured(af)&&t.focus&&af.focusIn(a),n.isBlocked()||t.onBlock(e),n.blockWith((()=>gf.remove(s,a)))},unblock:(e,t,n)=>{vt(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()}}),lL=[ys("getRoot",L.none),vs("focus",!0),za("onBlock"),za("onUnblock")];const cL=Ol({fields:lL,name:"blocking",apis:aL,state:Object.freeze({__proto__:null,init:()=>{const e=sc((e=>e.destroy()));return xo({readState:e.isSet,blockWith:t=>{e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),dL=e=>{const t=De.fromHtml(e),n=Ke(t),r=(e=>{const t=void 0!==e.dom.attributes?e.dom.attributes:[];return V(t,((e,t)=>"class"===t.name?e:{...e,[t.name]:t.value}),{})})(t),s=(e=>Array.prototype.slice.call(e.dom.classList,0))(t),i=0===n.length?{}:{innerHtml:Xi(t)};return{tag:Oe(t),classes:s,attributes:r,...i}},uL=e=>Hh.getCurrent(e).each((e=>Bl(e.element))),hL=(e,t,n,r)=>{const s=t.element;if(((e,t)=>{const n="tabindex",r="data-mce-tabindex";L.from(e.iframeElement).map(De.fromDom).each((e=>{t?(ft(e,n).each((t=>ht(e,r,t))),ht(e,n,-1)):(vt(e,n),ft(e,r).each((t=>{ht(e,n,t),vt(e,r)})))}))})(e,n),n)cL.block(t,(e=>(t,n)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:dL('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(r)),kt(s,"display"),vt(s,"aria-hidden"),e.hasFocus()&&uL(t);else{const n=Hh.getCurrent(t).exists((e=>Fl(e.element)));cL.unblock(t),bt(s,"display","none"),ht(s,"aria-hidden","true"),n&&e.focus()}},mL=(e,t,n)=>{const r=ws(!1),s=oc(),i=n=>{r.get()&&!(e=>{if((e=>"focusin"===e.type)(e))return(e.composed?ne(e.composedPath()):L.from(e.target)).map(De.fromDom).filter(Pe).exists((e=>Uo(e,"mce-pastebin")));return!1})(n)&&(n.preventDefault(),uL(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",(()=>{e.dom.bind(e.getWin(),"focusin",i),e.on("BeforeExecCommand",(e=>{"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&i(e)}))}));const o=s=>{s!==r.get()&&(r.set(s),hL(e,t(),s,n.providers),e.dispatch("AfterProgressState",{state:s}))};e.on("ProgressState",(t=>{if(s.on(clearTimeout),f(t.time)){const n=ag.setEditorTimeout(e,(()=>o(t.state)),t.time);s.set(n)}else o(t.state),s.clear()}))},pL=(e,t,n)=>({within:e,extra:t,withinWidth:n}),fL=(e,t,n)=>{const r=((e,t)=>{const n=V(e,((e,n)=>t(n,e.len).fold(_(e),(t=>({len:t.finish,list:e.list.concat([t])})))),{len:0,list:[]});return n.list})(e,((e,t)=>{const r=n(e);return L.some({element:e,start:t,finish:t+r,width:r})})),s=U(r,(e=>e.finish<=t)),i=Y(s,((e,t)=>e+t.width),0);return{within:s,extra:r.slice(s.length),withinWidth:i}},gL=e=>F(e,(e=>e.element)),vL=(e,t,n,r)=>{const s=((e,t,n)=>{const r=fL(t,e,n);return 0===r.extra.length?L.some(r):L.none()})(e,t,n).getOrThunk((()=>fL(t,e-n(r),n))),i=s.within,o=s.extra,a=s.withinWidth;return 1===o.length&&o[0].width<=n(r)?((e,t,n)=>{const r=gL(e.concat(t));return pL(r,[],n)})(i,o,a):o.length>=1?((e,t,n,r)=>{const s=gL(e).concat([n]);return pL(s,gL(t),r)})(i,o,r,a):((e,t,n)=>pL(gL(e),[],n))(i,0,a)},yL=(e,t)=>{const n=F(t,(e=>da(e)));$E.setGroups(e,n)},_L=(e,t,n)=>{const r=t.builtGroups.get();if(0===r.length)return;const s=xh(e,t,"primary"),i=fx.getCoupled(e,"overflowGroup");bt(s.element,"visibility","hidden");const o=r.concat([i]),a=ie(o,(e=>jl(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()))));n([]),yL(s,o);const l=Ht(s.element),c=vL(l,t.builtGroups.get(),(e=>Ht(e.element)),i);0===c.extra.length?(gf.remove(s,i),n([])):(yL(s,c.within),n(c.extra)),kt(s.element,"visibility"),Lt(s.element),a.each(xf.focus)},bL=_([Ou("splitToolbarBehaviours",[fx]),Gr("builtGroups",(()=>ws([])))]),wL=_([Na(["overflowToggledClass"]),cs("getOverflowBounds"),Xr("lazySink"),Gr("overflowGroups",(()=>ws([])))].concat(bL())),xL=_([ah({factory:$E,schema:YE(),name:"primary"}),lh({schema:YE(),name:"overflow"}),lh({name:"overflow-button"}),lh({name:"overflow-group"})]),ML=_(((e,t)=>{((e,t)=>{const n=Ft.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);bt(e,"max-width",n+"px")})(e,Math.floor(t))})),SL=_([Na(["toggledClass"]),Xr("lazySink"),es("fetch"),cs("getBounds"),us("fireDismissalEventInstead",[hs("event",bi())]),Rc()]),TL=_([lh({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Al([Pf.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),lh({factory:$E,schema:YE(),name:"toolbar",overrides:e=>({toolbarBehaviours:Al([af.config({mode:"cyclic",onEscape:t=>(wh(t,e,"button").each(xf.focus),L.none())})])})})]),CL=(e,t)=>{const n=fx.getCoupled(e,"toolbarSandbox");uu.isOpen(n)?uu.close(n):uu.open(n,t.toolbar())},EL=(e,t,n,r)=>{const s=n.getBounds.map((e=>e())),i=n.lazySink(e).getOrDie();Fd.positionWithinBounds(i,t,{anchor:{type:"hotspot",hotspot:e,layouts:r,overrides:{maxWidthFunction:ML()}}},s)},kL=(e,t,n,r,s)=>{$E.setGroups(t,s),EL(e,t,n,r),Pf.on(e)},LL=Ih({name:"FloatingToolbarButton",factory:(e,t,n,r)=>({...lg.sketch({...r.button(),action:e=>{CL(e,r)},buttonBehaviours:Iu({dump:r.button().buttonBehaviours},[fx.config({others:{toolbarSandbox:t=>((e,t,n)=>{const r=ba();return{dom:{tag:"div",attributes:{id:r.id}},behaviours:Al([af.config({mode:"special",onEscape:e=>(uu.close(e),L.some(!0))}),uu.config({onOpen:(s,i)=>{n.fetch().get((s=>{kL(e,i,n,t.layouts,s),r.link(e.element),af.focusIn(i)}))},onClose:()=>{Pf.off(e),xf.focus(e),r.unlink(e.element)},isPartOf:(t,n,r)=>xa(n,r)||xa(e,r),getAttachPoint:()=>n.lazySink(e).getOrDie()}),Il.config({channels:{...gu({isExtraPart:C,...n.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})}),...yu({doReposition:()=>{uu.getState(fx.getCoupled(e,"toolbarSandbox")).each((r=>{EL(e,r,n,t.layouts)}))}})}})])}})(t,n,e)}})])}),apis:{setGroups:(t,r)=>{uu.getState(fx.getCoupled(t,"toolbarSandbox")).each((s=>{kL(t,s,e,n.layouts,r)}))},reposition:t=>{uu.getState(fx.getCoupled(t,"toolbarSandbox")).each((r=>{EL(t,r,e,n.layouts)}))},toggle:e=>{CL(e,r)},getToolbar:e=>uu.getState(fx.getCoupled(e,"toolbarSandbox")),isOpen:e=>uu.isOpen(fx.getCoupled(e,"toolbarSandbox"))}}),configFields:SL(),partFields:TL(),apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),AL=_([Xr("items"),Na(["itemSelector"]),Ou("tgroupBehaviours",[af])]),DL=_([dh({name:"items",unit:"item"})]),OL=Ih({name:"ToolbarGroup",configFields:AL(),partFields:DL(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.tgroupBehaviours,[af.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),RL=e=>F(e,(e=>da(e))),PL=(e,t,n)=>{_L(e,n,(r=>{n.overflowGroups.set(r),t.getOpt(e).each((e=>{LL.setGroups(e,RL(r))}))}))},NL=Ih({name:"SplitFloatingToolbar",configFields:wL(),partFields:xL(),factory:(e,t,n,r)=>{const s=cg(LL.sketch({fetch:()=>ex((t=>{t(RL(e.overflowGroups.get()))})),layouts:{onLtr:()=>[ul,dl],onRtl:()=>[dl,ul],onBottomLtr:()=>[ml,hl],onBottomRtl:()=>[hl,ml]},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:r["overflow-button"](),toolbar:r.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.splitToolbarBehaviours,[fx.config({others:{overflowGroup:()=>OL.sketch({...r["overflow-group"](),items:[s.asSpec()]})}})]),apis:{setGroups:(t,n)=>{e.builtGroups.set(F(n,t.getSystem().build)),PL(t,s,e)},refresh:t=>PL(t,s,e),toggle:e=>{s.getOpt(e).each((e=>{LL.toggle(e)}))},isOpen:e=>s.getOpt(e).map(LL.isOpen).getOr(!1),reposition:e=>{s.getOpt(e).each((e=>{LL.reposition(e)}))},getOverflow:e=>s.getOpt(e).bind(LL.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),IL=_([Na(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),za("onOpened"),za("onClosed")].concat(bL())),zL=_([ah({factory:$E,schema:YE(),name:"primary"}),ah({factory:$E,schema:YE(),name:"overflow",overrides:e=>({toolbarBehaviours:Al([Gk.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{wh(t,e,"overflow-button").each((e=>{Pf.off(e),xf.focus(e)})),e.onClosed(t)},onGrown:t=>{af.focusIn(t),e.onOpened(t)},onStartGrow:t=>{wh(t,e,"overflow-button").each(Pf.on)}}),af.config({mode:"acyclic",onEscape:t=>(wh(t,e,"overflow-button").each(xf.focus),L.some(!0))})])})}),lh({name:"overflow-button",overrides:e=>({buttonBehaviours:Al([Pf.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),lh({name:"overflow-group"})]),BL=(e,t)=>{wh(e,t,"overflow-button").bind((()=>wh(e,t,"overflow"))).each((n=>{FL(e,t),Gk.toggleGrow(n)}))},FL=(e,t)=>{wh(e,t,"overflow").each((n=>{_L(e,t,(e=>{const t=F(e,(e=>da(e)));$E.setGroups(n,t)})),wh(e,t,"overflow-button").each((e=>{Gk.hasGrown(n)&&Pf.on(e)})),Gk.refresh(n)}))},HL=Ih({name:"SplitSlidingToolbar",configFields:IL(),partFields:zL(),factory:(e,t,n,r)=>{const s="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:Pu(e.splitToolbarBehaviours,[fx.config({others:{overflowGroup:e=>OL.sketch({...r["overflow-group"](),items:[lg.sketch({...r["overflow-button"](),action:t=>{ki(e,s)}})]})}}),vf("toolbar-toggle-events",[zi(s,(t=>{BL(t,e)}))])]),apis:{setGroups:(t,n)=>{((t,n)=>{const r=F(n,t.getSystem().build);e.builtGroups.set(r)})(t,n),FL(t,e)},refresh:t=>FL(t,e),toggle:t=>BL(t,e),isOpen:t=>((e,t)=>wh(e,t,"overflow").map(Gk.hasGrown).getOr(!1))(t,e)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),jL=e=>{const t=e.title.fold((()=>({})),(e=>({attributes:{title:e}})));return{dom:{tag:"div",classes:["tox-toolbar__group"],...t},components:[OL.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Al([Lw.config({}),xf.config({})])}},UL=e=>OL.sketch(jL(e)),YL=(e,t)=>{const n=$i((t=>{const n=F(e.initGroups,UL);$E.setGroups(t,n)}));return Al([E_(e.providers.isDisabled),M_(),af.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),vf("toolbar-events",[n])])},VL=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":jL({title:L.none(),items:[]}),"overflow-button":tC({name:"more",icon:L.some("more-drawer"),enabled:!0,tooltip:L.some("More..."),primary:!1,buttonType:L.none(),borderless:!1},L.none(),e.providers)},splitToolbarBehaviours:YL(e,t)}},$L=e=>{const t=VL(e),n=NL.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return NL.sketch({...t,lazySink:e.getSink,getOverflowBounds:()=>{const t=e.moreDrawerData.lazyHeader().element,n=Fn(t),r=$e(t),s=Fn(r),i=Math.max(r.dom.scrollHeight,s.height);return zn(n.x+4,s.y,n.width-8,i)},parts:{...t.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}})},WL=e=>{const t=HL.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=HL.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),r=VL(e);return HL.sketch({...r,components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:e=>{e.getSystem().broadcastOn([gk()],{type:"opened"})},onClosed:e=>{e.getSystem().broadcastOn([gk()],{type:"closed"})}})},GL=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return $E.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===xg.scrolling?["tox-toolbar--scrolling"]:[])},components:[$E.parts.groups({})],toolbarBehaviours:YL(e,t)})},qL=BE.optional({factory:Dk,name:"menubar",schema:[Xr("backstage")]}),XL=BE.optional({factory:{sketch:e=>UE.sketch({uid:e.uid,dom:e.dom,listBehaviours:Al([af.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>GL({type:e.type,uid:ro("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),L.some(!0))}),setupItem:(e,t,n,r)=>{$E.setGroups(t,n)},shell:!0})},name:"multiple-toolbar",schema:[Xr("dom"),Xr("onEscape")]}),KL=BE.optional({factory:{sketch:e=>{const t=(e=>e.type===xg.sliding?WL:e.type===xg.floating?$L:GL)(e);return t({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),L.some(!0)),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[Xr("dom"),Xr("onEscape"),Xr("getSink")]}),JL=BE.optional({factory:{sketch:e=>{const t=e.editor,n=e.sticky?Sk:qE;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Al(n(t,e.sharedBackstage))}}},name:"header",schema:[Xr("dom")]}),ZL=BE.optional({name:"socket",schema:[Xr("dom")]}),QL=BE.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Al([Lw.config({}),xf.config({}),Gk.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:e=>{Hh.getCurrent(e).each(Qk.hideAllSlots),ki(e,oL)},onGrown:e=>{ki(e,oL)},onStartGrow:e=>{Li(e,iL,{width:Tt(e.element,"width").getOr("")})},onStartShrink:e=>{Li(e,iL,{width:Ht(e.element)+"px"})}}),gf.config({}),Hh.config({find:e=>{const t=gf.contents(e);return ne(t)}})])}],behaviours:Al([IS(0),vf("sidebar-sliding-events",[zi(iL,((e,t)=>{bt(e.element,"width",t.event.width)})),zi(oL,((e,t)=>{kt(e.element,"width")}))])])})},name:"sidebar",schema:[Xr("dom")]}),eA=BE.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Al([gf.config({}),cL.config({focus:!1}),Hh.config({find:e=>ne(e.components())})]),components:[]})},name:"throbber",schema:[Xr("dom")]});var tA=Ih({name:"OuterContainer",factory:(e,t,n)=>{const r={getSocket:t=>zE.getPart(t,e,"socket"),setSidebar:(t,n)=>{zE.getPart(t,e,"sidebar").each((e=>((e,t)=>{Hh.getCurrent(e).each((e=>gf.set(e,[rL(t)])))})(e,n)))},toggleSidebar:(t,n)=>{zE.getPart(t,e,"sidebar").each((e=>((e,t)=>{Hh.getCurrent(e).each((e=>{Hh.getCurrent(e).each((n=>{Gk.hasGrown(e)?Qk.isShowing(n,t)?Gk.shrink(e):(Qk.hideAllSlots(n),Qk.showSlot(n,t)):(Qk.hideAllSlots(n),Qk.showSlot(n,t),Gk.grow(e))}))}))})(e,n)))},whichSidebar:t=>zE.getPart(t,e,"sidebar").bind(sL).getOrNull(),getHeader:t=>zE.getPart(t,e,"header"),getToolbar:t=>zE.getPart(t,e,"toolbar"),setToolbar:(t,n)=>{zE.getPart(t,e,"toolbar").each((e=>{e.getApis().setGroups(e,n)}))},setToolbars:(t,n)=>{zE.getPart(t,e,"multiple-toolbar").each((e=>{UE.setItems(e,n)}))},refreshToolbar:t=>{zE.getPart(t,e,"toolbar").each((e=>e.getApis().refresh(e)))},toggleToolbarDrawer:t=>{zE.getPart(t,e,"toolbar").each((e=>{var t,n;t=e.getApis().toggle,n=t=>t(e),null!=t?L.some(n(t)):L.none()}))},isToolbarDrawerToggled:t=>zE.getPart(t,e,"toolbar").bind((e=>L.from(e.getApis().isOpen).map((t=>t(e))))).getOr(!1),getThrobber:t=>zE.getPart(t,e,"throbber"),focusToolbar:t=>{zE.getPart(t,e,"toolbar").orThunk((()=>zE.getPart(t,e,"multiple-toolbar"))).each((e=>{af.focusIn(e)}))},setMenubar:(t,n)=>{zE.getPart(t,e,"menubar").each((e=>{Dk.setMenus(e,n)}))},focusMenubar:t=>{zE.getPart(t,e,"menubar").each((e=>{Dk.focus(e)}))}};return{uid:e.uid,dom:e.dom,components:t,apis:r,behaviours:e.behaviours}},configFields:[Xr("dom"),Xr("behaviours")],partFields:[JL,qL,KL,XL,ZL,QL,eA],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,n)=>{e.setSidebar(t,n)},toggleSidebar:(e,t,n)=>{e.toggleSidebar(t,n)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,n)=>{const r=F(n,(e=>UL(e)));e.setToolbar(t,r)},setToolbars:(e,t,n)=>{const r=F(n,(e=>F(e,UL)));e.setToolbars(t,r)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,n)=>{e.setMenubar(t,n)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)}}});const nA={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},rA=e=>"string"==typeof e?e.split(" "):e,sA=(e,t)=>{const n={...nA,...t.menus},r=oe(t.menus).length>0,s=void 0===t.menubar||!0===t.menubar?rA("file edit view insert format tools table help"):rA(!1===t.menubar?"":t.menubar),i=U(s,(e=>{const n=ve(nA,e);return r?n||ge(t.menus,e).exists((e=>ve(e,"items"))):n})),o=F(i,(r=>{const s=n[r];return((e,t,n)=>{const r=jg(n).split(/[ ,]/);return{text:e.title,getItems:()=>q(e.items,(e=>{const n=e.toLowerCase();return 0===n.trim().length||I(r,(e=>e===n))?[]:"separator"===n||"|"===n?[{type:"separator"}]:t.menuItems[n]?[t.menuItems[n]]:[]}))}})({title:s.title,items:rA(s.items)},t,e)}));return U(o,(e=>e.getItems().length>0&&I(e.getItems(),(e=>"separator"!==e.type))))},iA=e=>{const t=()=>{e._skinLoaded=!0,(e=>{e.dispatch("SkinLoaded")})(e)};return()=>{e.initialized?t():e.on("init",t)}},oA=(e,t,n)=>(e.on("remove",(()=>n.unload(t))),n.load(t)),aA=(e,t)=>oA(e,t+"/skin.min.css",e.ui.styleSheetLoader),lA=(e,t)=>{var n;if(n=De.fromDom(e.getElement()),it(n).isSome()){return oA(e,t+"/skin.shadowdom.min.css",Sg.DOM.styleSheetLoader)}return Promise.resolve()},cA=(e,t)=>{const n=uv(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css"),!cv(t)&&i(n)?Promise.all([aA(t,n),lA(t,n)]).then(iA(t),((e,t)=>()=>((e,t)=>e.dispatch("SkinLoadError",t))(e,{message:t}))(t,"Skin could not be loaded")):iA(t)()},dA=x(cA,!1),uA=x(cA,!0),hA=(e,t)=>n=>{const r=ic(),s=()=>{n.setActive(e.formatter.match(t));const s=e.formatter.formatChanged(t,n.setActive);r.set(s)};return e.initialized?s():e.once("init",s),()=>{e.off("init",s),r.clear()}},mA=(e,t,n)=>r=>{const s=()=>n(r),i=()=>{n(r),e.on(t,s)};return e.initialized?i():e.once("init",i),()=>{e.off("init",i),e.off(t,s)}},pA=e=>t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)}))},fA=(e,t)=>()=>e.execCommand(t),gA=(e,t,n)=>{const r=(e,r,i,o)=>{const a=t.shared.providers.translate(e.title);if("separator"===e.type)return L.some({type:"separator",text:a});if("submenu"===e.type){const t=q(e.getStyleItems(),(e=>s(e,r,o)));return 0===r&&t.length<=0?L.none():L.some({type:"nestedmenuitem",text:a,enabled:t.length>0,getSubmenuItems:()=>q(e.getStyleItems(),(e=>s(e,r,o)))})}return L.some({type:"togglemenuitem",text:a,icon:e.icon,active:e.isSelected(o),enabled:!i,onAction:n.onAction(e),...e.getStylePreview().fold((()=>({})),(e=>({meta:{style:e}})))})},s=(e,t,s)=>{const i="formatter"===e.type&&n.isInvalid(e);return 0===t?i?[]:r(e,t,!1,s).toArray():r(e,t,i,s).toArray()},i=e=>{const t=n.getCurrentValue(),r=n.shouldHide?0:1;return q(e,(e=>s(e,r,t)))};return{validateItems:i,getFetch:(e,t)=>(n,r)=>{const s=t(),o=i(s);r(_T(o,kv.CLOSE_ON_EXECUTE,e,!1))}}},vA=(e,t,n)=>{const r=n.dataset,s="basic"===r.type?()=>F(r.data,(e=>oE(e,n.isSelectedFor,n.getPreviewFor))):r.getData;return{items:gA(0,t,n),getStyleItems:s}},yA=(e,t,n)=>{const{items:r,getStyleItems:s}=vA(0,t,n),i=mA(e,"NodeChange",(e=>{const t=e.getComponent();n.updateText(t)}));return mT({text:n.icon.isSome()?L.none():n.text,icon:n.icon,tooltip:L.from(n.tooltip),role:L.none(),fetch:r.getFetch(t,s),onSetup:i,getApi:e=>({getComponent:_(e)}),columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};var _A;!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(_A||(_A={}));const bA=(e,t,n)=>{const r=(e=>F(e,(e=>{let t=e,n=e;const r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{title:t,format:n}})))(((e,t)=>t===_A.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "))(e.options.get(t),n));return{type:"basic",data:r}},wA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],xA=e=>{const t={type:"basic",data:wA};return{tooltip:"Align",text:L.none(),icon:L.some("align-left"),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:L.none,getPreviewFor:e=>L.none,onAction:t=>()=>$(wA,(e=>e.format===t.format)).each((t=>e.execCommand(t.command))),updateText:t=>{const n=$(wA,(t=>e.formatter.match(t.format))),r=n.fold(_("left"),(e=>e.title.toLowerCase()));Li(t,hT,{icon:`align-${r}`})},dataset:t,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},MA=(e,t)=>{const n=t(),r=F(n,(e=>e.format));return L.from(e.formatter.closest(r)).bind((e=>$(n,(t=>t.format===e)))).orThunk((()=>xe(e.formatter.match("p"),{title:"Paragraph",format:"p"})))},SA=e=>{const t="Paragraph",n=bA(e,"block_formats",_A.SemiColon);return{tooltip:"Blocks",text:L.some(t),icon:L.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:L.none,getPreviewFor:t=>()=>{const n=e.formatter.get(t);return L.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))})},onAction:pA(e),updateText:r=>{const s=MA(e,(()=>n.data)).fold(_(t),(e=>e.title));Li(r,uT,{text:s})},dataset:n,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},TA=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],CA=e=>{const t=e.split(/\s*,\s*/);return F(t,(e=>e.replace(/^['"]+|['"]+$/g,"")))},EA=e=>{const t="System Font",n=()=>{const n=e=>e?CA(e)[0]:"",s=e.queryCommandValue("FontName"),i=r.data,o=s?s.toLowerCase():"",a=$(i,(e=>{const t=e.format;return t.toLowerCase()===o||n(t).toLowerCase()===n(o).toLowerCase()})).orThunk((()=>xe((e=>0===e.indexOf("-apple-system")&&(()=>{const t=CA(e.toLowerCase());return X(TA,(e=>t.indexOf(e.toLowerCase())>-1))})())(o),{title:t,format:o})));return{matchOpt:a,font:s}},r=bA(e,"font_family_formats",_A.SemiColon);return{tooltip:"Fonts",text:L.some(t),icon:L.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getCurrentValue:()=>{const{matchOpt:e}=n();return e},getPreviewFor:e=>()=>L.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}}),onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontName",!1,t.format)}))},updateText:e=>{const{matchOpt:t,font:r}=n(),s=t.fold(_(r),(e=>e.title));Li(e,uT,{text:s})},dataset:r,shouldHide:!1,isInvalid:C}},kA={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},LA={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},AA=(e,t)=>/[0-9.]+px$/.test(e)?((e,t)=>{const n=Math.pow(10,t);return Math.round(e*n)/n})(72*parseInt(e,10)/96,t||0)+"pt":ge(LA,e).getOr(e),DA=e=>ge(kA,e).getOr(""),OA=e=>{const t=()=>{let t=L.none();const n=r.data,s=e.queryCommandValue("FontSize");if(s)for(let e=3;t.isNone()&&e>=0;e--){const r=AA(s,e),i=DA(r);t=$(n,(e=>e.format===s||e.format===r||e.format===i))}return{matchOpt:t,size:s}},n=_(L.none),r=bA(e,"font_size_formats",_A.Space);return{tooltip:"Font sizes",text:L.some("12pt"),icon:L.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getPreviewFor:n,getCurrentValue:()=>{const{matchOpt:e}=t();return e},onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontSize",!1,t.format)}))},updateText:e=>{const{matchOpt:n,size:r}=t(),s=n.fold(_(r),(e=>e.title));Li(e,uT,{text:s})},dataset:r,shouldHide:!1,isInvalid:C}},RA=(e,t)=>{const n="Paragraph";return{tooltip:"Formats",text:L.some(n),icon:L.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:L.none,getPreviewFor:t=>()=>{const n=e.formatter.get(t);return void 0!==n?L.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):L.none()},onAction:pA(e),updateText:t=>{const r=e=>{const t=e.items;return void 0!==t&&t.length>0?q(t,r):[{title:e.title,format:e.format}]},s=q(iE(e),r),i=MA(e,_(s)).fold(_(n),(e=>e.title));Li(t,uT,{text:i})},shouldHide:Fg(e),isInvalid:t=>!e.formatter.canApply(t.format),dataset:t}};var PA=Object.freeze({__proto__:null,events:(e,t)=>{const n=(n,r)=>{e.updateState.each((e=>{const s=e(n,r);t.set(s)})),e.renderComponents.each((s=>{const i=s(r,t.get());(e.reuseDom?cf:lf)(n,i)}))};return Pi([zi(oi(),((t,r)=>{const s=r;if(!s.universal){const r=e.channel;N(s.channels,r)&&n(t,s.data)}})),$i(((t,r)=>{e.initialData.each((e=>{n(t,e)}))}))])}});var NA=Object.freeze({__proto__:null,getState:(e,t,n)=>n}),IA=[Xr("channel"),ss("renderComponents"),ss("updateState"),ss("initialData"),vs("reuseDom",!0)];const zA=Ol({fields:IA,name:"reflecting",active:PA,apis:NA,state:Object.freeze({__proto__:null,init:()=>{const e=ws(L.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(L.none())}}})}),BA=_([Xr("toggleClass"),Xr("fetch"),Fa("onExecute"),hs("getHotspot",L.some),hs("getAnchorOverrides",_({})),Rc(),Fa("onItemExecute"),ss("lazySink"),Xr("dom"),za("onOpen"),Ou("splitDropdownBehaviours",[fx,af,xf]),hs("matchWidth",!1),hs("useMinWidth",!1),hs("eventOrder",{}),ss("role")].concat(kx())),FA=ah({factory:lg,schema:[Xr("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Al([xf.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Ai)},buttonBehaviours:Al([Pf.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),HA=ah({factory:lg,schema:[Xr("dom")],name:"button",defaults:()=>({buttonBehaviours:Al([xf.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each((n=>{e.onExecute(n,t)}))}})}),jA=_([FA,HA,ch({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Xr("text")],name:"aria-descriptor"}),lh({schema:[Pa()],name:"menu",defaults:e=>({onExecute:(t,n)=>{t.getSystem().getByUid(e.uid).each((r=>{e.onItemExecute(r,t,n)}))}})}),vx()]),UA=Ih({name:"SplitDropdown",configFields:BA(),partFields:jA(),factory:(e,t,n,r)=>{const s=e=>{Hh.getCurrent(e).each((e=>{um.highlightFirst(e),af.focusIn(e)}))},i=t=>{xx(e,b,t,r,s,yx.HighlightFirst).get(v)},o=t=>{const n=xh(t,e,"button");return Ai(n),L.some(!0)},a={...Pi([$i(((t,n)=>{wh(t,e,"aria-descriptor").each((e=>{const n=ro("aria");ht(e.element,"id",n),ht(t.element,"aria-describedby",n)}))}))]),...zf(L.some(i))},l={repositionMenus:e=>{Pf.isOn(e)&&Ex(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:l,eventOrder:{...e.eventOrder,[ai()]:["disabling","toggling","alloy.base.behaviour"]},events:a,behaviours:Pu(e.splitDropdownBehaviours,[fx.config({others:{sandbox:t=>{const n=xh(t,e,"arrow");return Cx(e,t,{onOpen:()=>{Pf.on(n),Pf.on(t)},onClose:()=>{Pf.off(n),Pf.off(t)}})}}}),af.config({mode:"special",onSpace:o,onEnter:o,onDown:e=>(i(e),L.some(!0))}),xf.config({}),Pf.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),YA=e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),VA=e=>({setActive:t=>{Pf.set(e,t)},isActive:()=>Pf.isOn(e),isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t)}),$A=(e,t)=>e.map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),WA=ro("focus-button"),GA=(e,t,n,r,s,i)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:$A(n,i)},components:R_([e.map((e=>lT(e,i.icons))),t.map((e=>dT(e,"tox-tbtn",i)))]),eventOrder:{[Fs()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:Al([E_(i.isDisabled),M_(),vf("common-button-display-events",[zi(Fs(),((e,t)=>{t.event.prevent(),ki(e,WA)}))])].concat(r.map((n=>zA.config({channel:n,initialData:{icon:e,text:t},renderComponents:(e,t)=>R_([e.icon.map((e=>lT(e,i.icons))),e.text.map((e=>dT(e,"tox-tbtn",i)))])}))).toArray()).concat(s.getOr([])))}),qA=(e,t,n)=>{const r=ws(v),s=GA(e.icon,e.text,e.tooltip,L.none(),L.none(),n);return lg.sketch({dom:s.dom,components:s.components,eventOrder:oT,buttonBehaviours:Al([vf("toolbar-button-events",[(i={onAction:e.onAction,getApi:t.getApi},qi(((e,t)=>{k_(i,e)((t=>{Li(e,iT,{buttonApi:t}),i.onAction(t)}))}))),L_(t,r),A_(t,r)]),E_((()=>!e.enabled||n.isDisabled())),M_()].concat(t.toolbarButtonBehaviours))});var i},XA=(e,t,n)=>qA(e,{toolbarButtonBehaviours:[].concat(n.length>0?[vf("toolbarButtonWith",n)]:[]),getApi:YA,onSetup:e.onSetup},t),KA=(e,t,n)=>ar(qA(e,{toolbarButtonBehaviours:[gf.config({}),Pf.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[vf("toolbarToggleButtonWith",n)]:[]),getApi:VA,onSetup:e.onSetup},t)),JA=(e,t,n)=>r=>ex((e=>t.fetch(e))).map((s=>L.from(aw(ar(Hb(ro("menu-value"),s,(n=>{t.onItemAction(e(r),n)}),t.columns,t.presets,kv.CLOSE_ON_EXECUTE,t.select.getOr(C),n),{movement:Ub(t.columns,t.presets),menuBehaviours:c_("auto"!==t.columns?[]:[$i(((e,n)=>{a_(e,4,Hv(t.presets)).each((({numRows:t,numColumns:n})=>{af.setGridSize(e,t,n)}))}))])}))))),ZA=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],QA=(e,t)=>(n,r,s)=>{const i=e(n).mapError((e=>Vr(e))).getOrDie();return t(i,r,s)},eD={button:QA(Oy,((e,t)=>{return n=e,r=t.backstage.shared.providers,XA(n,r,[]);var n,r})),togglebutton:QA(Ny,((e,t)=>{return n=e,r=t.backstage.shared.providers,KA(n,r,[]);var n,r})),menubutton:QA(Lk,((e,t)=>ZT(e,"tox-tbtn",t.backstage,L.none()))),splitbutton:QA((e=>jr("SplitButton",Ak,e)),((e,t)=>((e,t)=>{const n=ro("channel-update-split-dropdown-display"),r=e=>({isEnabled:()=>!em.isDisabled(e),setEnabled:t=>em.set(e,!t),setIconFill:(t,n)=>{va(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each((e=>{ht(e,"fill",n)}))},setActive:t=>{ht(e.element,"aria-pressed",t),va(e.element,"span").each((n=>{e.getSystem().getByDom(n).each((e=>Pf.set(e,t)))}))},isActive:()=>va(e.element,"span").exists((t=>e.getSystem().getByDom(t).exists(Pf.isOn)))}),s=ws(v),i={getApi:r,onSetup:e.onSetup};return UA.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...$A(e.tooltip,t.providers)}},onExecute:t=>{e.onAction(r(t))},onItemExecute:(e,t,n)=>{},splitDropdownBehaviours:Al([C_(t.providers.isDisabled),M_(),vf("split-dropdown-events",[zi(WA,xf.focus),L_(i,s),A_(i,s)]),Ox.config({})]),eventOrder:{[yi()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:JA(r,e,t.providers),parts:{menu:Wv(0,e.columns,e.presets)},components:[UA.parts.button(GA(e.icon,e.text,L.none(),L.some(n),L.some([Pf.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),UA.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:gg("chevron-down",t.providers.icons)},buttonBehaviours:Al([C_(t.providers.isDisabled),M_(),vg()])}),UA.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})})(e,t.backstage.shared))),grouptoolbarbutton:QA((e=>jr("GroupToolbarButton",Ck,e)),((e,t,n)=>{const r=n.ui.registry.getAll().buttons,s=e=>sD(n,{buttons:r,toolbar:e,allowToolbarGroups:!1},t,L.none()),i={[Dc]:t.backstage.shared.header.isPositionedAtTop()?Ac.TopToBottom:Ac.BottomToTop};if(Ug(n)===xg.floating)return((e,t,n,r)=>{const s=t.shared;return LL.sketch({lazySink:s.getSink,fetch:()=>ex((t=>{t(F(n(e.items),UL))})),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:GA(e.icon,e.text,e.tooltip,L.none(),L.none(),s.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:r}}}})})(e,t.backstage,s,i);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})),styleSelectButton:(e,t)=>((e,t)=>{const n={type:"advanced",...t.styles};return yA(e,t,RA(e,n))})(e,t.backstage),fontsizeSelectButton:(e,t)=>((e,t)=>yA(e,t,OA(e)))(e,t.backstage),fontSelectButton:(e,t)=>((e,t)=>yA(e,t,EA(e)))(e,t.backstage),formatButton:(e,t)=>((e,t)=>yA(e,t,SA(e)))(e,t.backstage),alignMenuButton:(e,t)=>((e,t)=>yA(e,t,xA(e)))(e,t.backstage)},tD={styles:eD.styleSelectButton,fontsize:eD.fontsizeSelectButton,fontfamily:eD.fontSelectButton,blocks:eD.formatButton,align:eD.alignMenuButton},nD=e=>{const t=e.toolbar,n=e.buttons;return!1===t?[]:void 0===t||!0===t?(e=>{const t=F(ZA,(t=>{const n=U(t.items,(t=>ve(e,t)||ve(tD,t)));return{name:t.name,items:n}}));return U(t,(e=>e.items.length>0))})(n):i(t)?(e=>{const t=e.split("|");return F(t,(e=>({items:e.trim().split(" ")})))})(t):(e=>g(e,(e=>ve(e,"name")&&ve(e,"items"))))(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},rD=(e,t,n,r,s,i)=>ge(t,n.toLowerCase()).orThunk((()=>i.bind((e=>ie(e,(e=>ge(t,e+n.toLowerCase()))))))).fold((()=>ge(tD,n.toLowerCase()).map((t=>t(e,s))).orThunk((()=>L.none()))),(t=>"grouptoolbarbutton"!==t.type||r?((e,t,n)=>ge(eD,e.type).fold((()=>(console.error("skipping button defined by",e),L.none())),(r=>L.some(r(e,t,n)))))(t,s,e):(console.warn(`Ignoring the '${n}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),L.none()))),sD=(e,t,n,r)=>{const s=nD(t),i=F(s,(s=>{const i=q(s.items,(s=>0===s.trim().length?[]:rD(e,t.buttons,s,t.allowToolbarGroups,n,r).toArray()));return{title:L.from(e.translate(s.name)),items:i}}));return U(i,(e=>e.items.length>0))},iD=(e,t,n,r)=>{const s=t.outerContainer,o=n.toolbar,a=n.buttons;if(g(o,i)){const t=o.map((t=>{const s={toolbar:t,buttons:a,allowToolbarGroups:n.allowToolbarGroups};return sD(e,s,{backstage:r},L.none())}));tA.setToolbars(s,t)}else tA.setToolbar(s,sD(e,n,{backstage:r},L.none()))},oD=yn(),aD=oD.os.isiOS()&&oD.os.version.major<=12;var lD=Object.freeze({__proto__:null,render:(e,t,n,r,s)=>{const i=ws(0),o=t.outerContainer;dA(e);const a=De.fromDom(s.targetNode),l=st(rt(a));((e,t)=>{Qd(e,t,Mn)})(a,t.mothership),Zd(l,t.uiMothership),e.on("PostRender",(()=>{iD(e,t,n,r),i.set(e.getWin().innerWidth),tA.setMenubar(o,sA(e,n)),tA.setSidebar(o,n.sidebar),((e,t)=>{const n=e.dom;let r=e.getWin();const s=e.getDoc().documentElement,i=ws(Nt(r.innerWidth,r.innerHeight)),o=ws(Nt(s.offsetWidth,s.offsetHeight)),a=()=>{const t=i.get();t.left===r.innerWidth&&t.top===r.innerHeight||(i.set(Nt(r.innerWidth,r.innerHeight)),vb(e))},l=()=>{const t=e.getDoc().documentElement,n=o.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(o.set(Nt(t.offsetWidth,t.offsetHeight)),vb(e))},c=t=>((e,t)=>e.dispatch("ScrollContent",t))(e,t);n.bind(r,"resize",a),n.bind(r,"scroll",c);const d=cc(De.fromDom(e.getBody()),"load",l),u=t.uiMothership.element;e.on("hide",(()=>{bt(u,"display","none")})),e.on("show",(()=>{kt(u,"display")})),e.on("NodeChange",l),e.on("remove",(()=>{d.unbind(),n.unbind(r,"resize",a),n.unbind(r,"scroll",c),r=null}))})(e,t)}));const d=tA.getSocket(o).getOrDie("Could not find expected socket element");if(aD){wt(d.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const t=((e,t)=>{let n=null;return{cancel:()=>{c(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{c(n)&&(n=setTimeout((()=>{n=null,e.apply(null,r)}),t))}}})((()=>{e.dispatch("ScrollContent")}),20),n=lc(d.element,"scroll",t.throttle);e.on("remove",n.unbind)}x_(e,t),e.addCommand("ToggleSidebar",((t,n)=>{tA.toggleSidebar(o,n),e.dispatch("ToggleSidebar")})),e.addQueryValueHandler("ToggleSidebar",(()=>tA.whichSidebar(o)));const u=Ug(e);u!==xg.sliding&&u!==xg.floating||e.on("ResizeWindow ResizeEditor ResizeContent",(()=>{const n=e.getWin().innerWidth;n!==i.get()&&(tA.refreshToolbar(t.outerContainer),i.set(n))}));const h={setEnabled:e=>{w_(t,!e)},isEnabled:()=>!em.isDisabled(o)};return{iframeContainer:d.element.dom,editorContainer:o.element.dom,api:h}}});const cD=e=>/^[0-9\.]+(|px)$/i.test(""+e)?L.some(parseInt(""+e,10)):L.none(),dD=e=>f(e)?e+"px":e,uD=(e,t,n)=>{const r=t.filter((t=>e<t)),s=n.filter((t=>e>t));return r.or(s).getOr(e)},hD=e=>{const t=(e=>{const t=Dg(e),n=Pg(e),r=Ig(e);return cD(t).map((e=>uD(e,n,r)))})(e);return t.getOr(Dg(e))},mD=e=>{const t=Og(e),n=Rg(e),r=Ng(e);return cD(t).map((e=>uD(e,n,r)))},{ToolbarLocation:pD,ToolbarMode:fD}=Mv,gD=(e,t,n,r,s)=>{const{uiMothership:i,outerContainer:o}=n,a=Sg.DOM,l=yv(e),c=wv(e),d=Ng(e).or(mD(e)),u=r.shared.header,h=u.isPositionedAtTop,m=Ug(e),p=m===fD.sliding||m===fD.floating,f=ws(!1),g=()=>f.get()&&!e.removed,v=e=>p?e.fold(_(0),(e=>e.components().length>1?Ot(e.components()[1].element):0)):0,y=()=>{i.broadcastOn([mu()],{})},b=(e=!1)=>{if(g()){if(l||(()=>{const e=d.getOrThunk((()=>{const e=cD(Mt(ct(),"margin-left")).getOr(0);return Ht(ct())-zt(t).left+e}));bt(s.get().element,"max-width",e+"px")})(),p&&tA.refreshToolbar(o),l||(()=>{const e=tA.getToolbar(o),n=v(e),r=Bn(t),i=h()?Math.max(r.y-Ot(s.get().element)+n,0):r.bottom;wt(o.element,{position:"absolute",top:Math.round(i)+"px",left:Math.round(r.x)+"px"})})(),c){const t=s.get();e?fk.reset(t):fk.refresh(t)}y()}},w=(n=!0)=>{if(l||!c||!g())return;const r=u.getDockingMode(),i=(n=>{switch(Vg(e)){case pD.auto:const e=tA.getToolbar(o),r=v(e),s=Ot(n.element)-r,i=Bn(t);if(i.y>s)return"top";{const e=$e(t),n=Math.max(e.dom.scrollHeight,Ot(e));return i.bottom<n-s||Hn().bottom<i.bottom-s?"bottom":"top"}case pD.bottom:return"bottom";case pD.top:default:return"top"}})(s.get());i!==r&&((e=>{const t=s.get();fk.setModes(t,[e]),u.setDockingMode(e);const n=h()?Ac.TopToBottom:Ac.BottomToTop;ht(t.element,Dc,n)})(i),n&&b(!0))};return{isVisible:g,isPositionedAtTop:h,show:()=>{f.set(!0),bt(o.element,"display","flex"),a.addClass(e.getBody(),"mce-edit-focus"),kt(i.element,"display"),w(!1),b()},hide:()=>{f.set(!1),n.outerContainer&&(bt(o.element,"display","none"),a.removeClass(e.getBody(),"mce-edit-focus")),bt(i.element,"display","none")},update:b,updateMode:w,repositionPopups:y}},vD=(e,t)=>{const n=Bn(e);return{pos:t?n.y:n.bottom,bounds:n}};var yD=Object.freeze({__proto__:null,render:(e,t,n,r,s)=>{const{mothership:i,uiMothership:o,outerContainer:a}=t,l=ws(null),c=De.fromDom(s.targetNode),d=gD(e,c,t,r,l),u=Gg(e);uA(e);const h=()=>{if(l.get())return void d.show();l.set(tA.getHeader(a).getOrDie());const s=_v(e);Zd(s,i),Zd(s,o),iD(e,t,n,r),tA.setMenubar(a,sA(e,n)),d.show(),((e,t,n,r)=>{const s=ws(vD(t,n.isPositionedAtTop())),i=r=>{const{pos:i,bounds:o}=vD(t,n.isPositionedAtTop()),{pos:a,bounds:l}=s.get(),c=o.height!==l.height||o.width!==l.width;s.set({pos:i,bounds:o}),c&&vb(e,r),n.isVisible()&&(a!==i?n.update(!0):c&&(n.updateMode(),n.repositionPopups()))};r||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",(()=>n.update(!0))),e.on("NodeChange keydown",(e=>{requestAnimationFrame((()=>i(e)))})),e.on("ScrollWindow",(()=>n.updateMode()));const o=ic();o.set(cc(De.fromDom(e.getBody()),"load",i)),e.on("remove",(()=>{o.clear()}))})(e,c,d,u),e.nodeChanged()},m=()=>ag.setEditorTimeout(e,h,0);e.on("show",h),e.on("hide",d.hide),u||(e.on("focus",m),e.on("blur",d.hide)),e.on("init",(()=>{(e.hasFocus()||u)&&m()})),x_(e,t);const p={show:()=>{h()},hide:()=>{d.hide()},setEnabled:e=>{w_(t,!e)},isEnabled:()=>!em.isDisabled(a)};return{editorContainer:a.element.dom,api:p}}});const _D="contexttoolbar-hide",bD=(e,t)=>zi(iT,((n,r)=>{const s=(e=>({hide:()=>ki(e,ui()),getValue:()=>Du.getValue(e)}))(e.get(n));t.onAction(s,r.event.buttonApi)})),wD=(e,t,n)=>{const r={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===t.type?((e,t,n)=>{const{primary:r,...s}=t.original,i=Ur(Ny({...s,type:"togglebutton",onAction:v}));return KA(i,n.backstage.shared.providers,[bD(e,t)])})(e,t,r):((e,t,n)=>{const{primary:r,...s}=t.original,i=Ur(Oy({...s,type:"button",onAction:v}));return XA(i,n.backstage.shared.providers,[bD(e,t)])})(e,t,r)},xD=(e,t)=>{const n=e.label.fold((()=>({})),(e=>({"aria-label":e}))),r=cg(Xw.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Al([af.config({mode:"special",onEnter:e=>s.findPrimary(e).map((e=>(Ai(e),!0))),onLeft:(e,t)=>(t.cut(),L.none()),onRight:(e,t)=>(t.cut(),L.none())})])})),s=((e,t,n)=>{const r=F(t,(t=>cg(wD(e,t,n))));return{asSpecs:()=>F(r,(e=>e.asSpec())),findPrimary:e=>ie(t,((t,n)=>t.primary?L.from(r[n]).bind((t=>t.getOpt(e))).filter(M(em.isDisabled)):L.none()))}})(r,e.commands,t);return[{title:L.none(),items:[r.asSpec()]},{title:L.none(),items:s.asSpecs()}]},MD=xD,SD=(e,t,n=.01)=>t.bottom-e.y>=n&&e.bottom-t.y>=n,TD=e=>{const t=(e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const n=Qe(De.fromDom(e.startContainer),e.startOffset).element;return(Ne(n)?Ge(n):L.some(n)).filter(Pe).map((e=>e.dom.getBoundingClientRect())).getOr(t)}return t})(e.selection.getRng());if(e.inline){const e=Ln();return zn(e.left+t.left,e.top+t.top,t.width,t.height)}{const n=Fn(De.fromDom(e.getBody()));return zn(n.x+t.left,n.y+t.top,t.width,t.height)}},CD=(e,t,n,r=0)=>{const s=On(window),i=Bn(De.fromDom(e.getContentAreaContainer())),o=dv(e)||mv(e)||fv(e),{x:a,width:l}=((e,t,n)=>{const r=Math.max(e.x+n,t.x);return{x:r,width:Math.min(e.right-n,t.right)-r}})(i,s,r);if(e.inline&&!o)return zn(a,s.y,l,s.height);{const o=t.header.isPositionedAtTop(),{y:c,bottom:d}=((e,t,n,r,s,i)=>{const o=De.fromDom(e.getContainer()),a=va(o,".tox-editor-header").getOr(o),l=Bn(a),c=l.y>=t.bottom,d=r&&!c;if(e.inline&&d)return{y:Math.max(l.bottom+i,n.y),bottom:n.bottom};if(e.inline&&!d)return{y:n.y,bottom:Math.min(l.y-i,n.bottom)};const u="line"===s?Bn(o):t;return d?{y:Math.max(l.bottom+i,n.y),bottom:Math.min(u.bottom-i,n.bottom)}:{y:Math.max(u.y+i,n.y),bottom:Math.min(l.y-i,n.bottom)}})(e,i,s,o,n,r);return zn(a,c,l,d-c)}},ED={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},kD={maxHeightFunction:wc(),maxWidthFunction:ML()},LD=e=>"node"===e,AD=(e,t,n,r,s)=>{const i=TD(e),o=r.lastElement().exists((e=>je(n,e)));if(((e,t)=>{const n=e.selection.getRng(),r=Qe(De.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&je(r.element,t)})(e,n))return o?jC:IC;if(o)return((e,t,n)=>{const r=Tt(e,"position");bt(e,"position",t);const s=n(e);return r.each((t=>bt(e,"position",t))),s})(t,r.getMode(),(()=>SD(i,Bn(t))&&!r.isReposition()?YC:jC));return("fixed"===r.getMode()?s.y+Ln().top:s.y)+(Ot(t)+12)<=i.y?IC:zC},DD=(e,t,n,r)=>{const s=t=>(r,s,i,o,a)=>({...AD(e,o,t,n,a)({...r,y:a.y,height:a.height},s,i,o,a),alwaysFit:!0}),i=e=>LD(r)?[s(e)]:[];return t?{onLtr:e=>[fl,dl,ul,hl,ml,pl].concat(i(e)),onRtl:e=>[fl,ul,dl,ml,hl,pl].concat(i(e))}:{onLtr:e=>[pl,fl,hl,dl,ml,ul].concat(i(e)),onRtl:e=>[pl,fl,ml,ul,hl,dl].concat(i(e))}},OD=(e,t)=>{const n=U(t,(t=>t.predicate(e.dom))),{pass:r,fail:s}=j(n,(e=>"contexttoolbar"===e.type));return{contextToolbars:r,contextForms:s}},RD=(e,t,n)=>{const r=OD(e,t);if(r.contextForms.length>0)return L.some({elem:e,toolbars:[r.contextForms[0]]});{const t=OD(e,n);if(t.contextForms.length>0)return L.some({elem:e,toolbars:[t.contextForms[0]]});if(r.contextToolbars.length>0||t.contextToolbars.length>0){const n=(e=>{if(e.length<=1)return e;{const t=t=>I(e,(e=>e.position===t)),n=t=>U(e,(e=>e.position===t)),r=t("selection"),s=t("node");if(r||s){if(s&&r){const e=n("node"),t=F(n("selection"),(e=>({...e,position:"node"})));return e.concat(t)}return n(r?"selection":"node")}return n("line")}})(r.contextToolbars.concat(t.contextToolbars));return L.some({elem:e,toolbars:n})}return L.none()}},PD=(e,t,n)=>e(t)?L.none():ks(t,(e=>{if(Pe(e)){const{contextToolbars:t,contextForms:r}=OD(e,n.inNodeScope),s=r.length>0?r:(e=>{if(e.length<=1)return e;{const t=t=>$(e,(e=>e.position===t)),n=t("selection").orThunk((()=>t("node"))).orThunk((()=>t("line"))).map((e=>e.position));return n.fold((()=>[]),(t=>U(e,(e=>e.position===t))))}})(t);return s.length>0?L.some({elem:e,toolbars:s}):L.none()}return L.none()}),e),ND=(e,t)=>{const n={},r=[],s=[],i={},o={},a=(e,a)=>{const l=Ur(jr("ContextForm",Uy,a));n[e]=l,l.launch.map((n=>{i["form:"+e]={...a.launch,type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:()=>{t(l)}}})),"editor"===l.scope?s.push(l):r.push(l),o[e]=l},l=(e,t)=>{var n;(n=t,jr("ContextToolbar",Yy,n)).each((n=>{"editor"===t.scope?s.push(n):r.push(n),o[e]=n}))},c=oe(e);return H(c,(t=>{const n=e[t];"contextform"===n.type?a(t,n):"contexttoolbar"===n.type&&l(t,n)})),{forms:n,inNodeScope:r,inEditorScope:s,lookupTable:o,formNavigators:i}},ID=ro("forward-slide"),zD=ro("backward-slide"),BD=ro("change-slide-event"),FD="tox-pop--resizing",HD="tox-pop--transition",jD=(e,t,n,r)=>{const s=r.backstage,i=s.shared,o=yn().deviceType.isTouch,a=oc(),l=oc(),c=oc(),d=ca((e=>{const t=ws([]);return og.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:e=>{t.set([]),og.getContent(e).each((e=>{kt(e.element,"visibility")})),jo(e.element,FD),kt(e.element,"width")},inlineBehaviours:Al([vf("context-toolbar-events",[Vi(Zs(),((e,t)=>{"width"===t.event.raw.propertyName&&(jo(e.element,FD),kt(e.element,"width"))})),zi(BD,((e,t)=>{const n=e.element;kt(n,"width");const r=Ht(n);og.setContent(e,t.event.contents),Ho(n,FD);const s=Ht(n);bt(n,"width",r+"px"),og.getContent(e).each((e=>{t.event.focus.bind((e=>(Bl(e),jl(n)))).orThunk((()=>(af.focusIn(e),Hl(rt(n)))))})),setTimeout((()=>{bt(e.element,"width",s+"px")}),0)})),zi(ID,((e,n)=>{og.getContent(e).each((n=>{t.set(t.get().concat([{bar:n,focus:Hl(rt(e.element))}]))})),Li(e,BD,{contents:n.event.forwardContents,focus:L.none()})})),zi(zD,((e,n)=>{re(t.get()).each((n=>{t.set(t.get().slice(0,t.get().length-1)),Li(e,BD,{contents:da(n.bar),focus:n.focus})}))}))]),af.config({mode:"special",onEscape:n=>re(t.get()).fold((()=>e.onEscape()),(e=>(ki(n,zD),L.some(!0))))})]),lazySink:()=>Yn.value(e.sink)})})({sink:n,onEscape:()=>(e.focus(),L.some(!0))})),u=()=>{const t=c.get().getOr("node"),n=LD(t)?1:0;return CD(e,i,t,n)},h=()=>!(e.removed||o()&&s.isContextMenuOpen()),m=()=>{if(h()){const t=u(),n=_e(c.get(),"node")?((e,t)=>t.filter(lt).map(Fn).getOrThunk((()=>TD(e))))(e,a.get()):TD(e);return t.height<=0||!SD(n,t)}return!0},p=()=>{a.clear(),l.clear(),c.clear(),og.hide(d)},f=()=>{if(og.isOpen(d)){const e=d.element;kt(e,"display"),m()?bt(e,"display","none"):(l.set(0),og.reposition(d))}},g=t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Al([af.config({mode:"acyclic"}),vf("pop-dialog-wrap-events",[$i((t=>{e.shortcuts.add("ctrl+F9","focus statusbar",(()=>af.focusIn(t)))})),Wi((t=>{e.shortcuts.remove("ctrl+F9")}))])])}),y=Ut((()=>ND(t,(e=>{const t=_([e]);Li(d,ID,{forwardContents:g(t)})})))),_=t=>{const{buttons:n}=e.ui.registry.getAll(),s={...n,...y().formNavigators},o=Ug(e)===xg.scrolling?xg.scrolling:xg.default,a=G(F(t,(t=>"contexttoolbar"===t.type?((t,n)=>sD(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},r,L.some(["form:"])))(s,t):((e,t)=>MD(e,t))(t,i.providers))));return GL({type:o,uid:ro("context-toolbar"),initGroups:a,onEscape:L.none,cyclicKeying:!0,providers:i.providers})},b=(t,r)=>{const s="node"===t?i.anchors.node(r):i.anchors.cursor(),c=((e,t,n,r)=>"line"===t?{bubble:Tc(12,0,ED),layouts:{onLtr:()=>[gl],onRtl:()=>[vl]},overrides:kD}:{bubble:Tc(0,12,ED,1/12),layouts:DD(e,n,r,t),overrides:kD})(e,t,o(),{lastElement:a.get,isReposition:()=>_e(l.get(),0),getMode:()=>Fd.getMode(n)});return ar(s,c)},w=(e,t)=>{if(x.cancel(),!h())return;const r=_(e),s=e[0].position,i=b(s,t);c.set(s),l.set(1);const o=d.element;kt(o,"display"),(e=>_e(we(e,a.get(),je),!0))(t)||(jo(o,HD),Fd.reset(n,d)),og.showWithinBounds(d,g(r),{anchor:i,transition:{classes:[HD],mode:"placement"}},(()=>L.some(u()))),t.fold(a.clear,a.set),m()&&bt(o,"display","none")},x=NT((()=>{if(e.hasFocus()&&!e.removed)if(Uo(d.element,HD))x.throttle();else{((e,t)=>{const n=De.fromDom(t.getBody()),r=e=>je(e,n),s=De.fromDom(t.selection.getNode());return(e=>!r(e)&&!Ue(n,e))(s)?L.none():RD(s,e.inNodeScope,e.inEditorScope).orThunk((()=>PD(r,s,e)))})(y(),e).fold(p,(e=>{w(e.toolbars,L.some(e.elem))}))}}),17);e.on("init",(()=>{e.on("remove",p),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",f),e.on("click keyup focus SetContent",x.throttle),e.on(_D,p),e.on("contexttoolbar-show",(t=>{const n=y();ge(n.lookupTable,t.toolbarKey).each((n=>{w([n],xe(t.target!==e,t.target)),og.getContent(d).each(af.focusIn)}))})),e.on("focusout",(t=>{ag.setEditorTimeout(e,(()=>{jl(n.element).isNone()&&jl(d.element).isNone()&&p()}),0)})),e.on("SwitchMode",(()=>{e.mode.isReadOnly()&&p()})),e.on("AfterProgressState",(t=>{t.state?p():e.hasFocus()&&x.throttle()})),e.on("NodeChange",(e=>{jl(d.element).fold(x.throttle,v)}))}))},UD={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},YD=(()=>{const e="[0-9]+",t="[eE][+-]?[0-9]+",n=e=>`(?:${e})?`,r=["Infinity","[0-9]+\\."+n(e)+n(t),"\\.[0-9]+"+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${r})`})(.*)$`)})(),VD=(e,t)=>L.from(YD.exec(e)).bind((e=>{const n=Number(e[1]),r=e[2];return((e,t)=>I(t,(t=>I(UD[t],(t=>e===t)))))(r,t)?L.some({value:n,unit:r}):L.none()})),$D=(e,t)=>{const n=()=>{const n=t.getOptions(e),r=t.getCurrent(e).map(t.hash),s=oc();return F(n,(n=>({type:"togglemenuitem",text:t.display(n),onSetup:i=>{const o=e=>{e&&(s.on((e=>e.setActive(!1))),s.set(i)),i.setActive(e)};o(_e(r,t.hash(n)));const a=t.watcher(e,n,o);return()=>{s.clear(),a()}},onAction:()=>t.setCurrent(e,n)})))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:e=>e(n()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},WD={name:"lineheight",text:"Line height",icon:"line-height",getOptions:hv,hash:e=>((e,t)=>VD(e,t).map((({value:e,unit:t})=>e+t)))(e,["fixed","relative","empty"]).getOr(e),display:b,watcher:(e,t,n)=>e.formatter.formatChanged("lineheight",n,!1,{value:t}).unbind,getCurrent:e=>L.from(e.queryCommandValue("LineHeight")),setCurrent:(e,t)=>e.execCommand("LineHeight",!1,t)},GD=e=>{$D(e,WD),(e=>L.from(Hg(e)).map((t=>({name:"language",text:"Language",icon:"language",getOptions:_(t),hash:e=>u(e.customCode)?e.code:`${e.code}/${e.customCode}`,display:e=>e.title,watcher:(e,t,n)=>e.formatter.formatChanged("lang",n,!1,{value:t.code,customValue:t.customCode}).unbind,getCurrent:e=>{const t=De.fromDom(e.selection.getNode());return Ls(t,(e=>L.some(e).filter(Pe).bind((e=>ft(e,"lang").map((t=>({code:t,customCode:ft(e,"data-mce-lang").getOrUndefined(),title:""})))))))},setCurrent:(e,t)=>e.execCommand("Lang",!1,t),onToolbarSetup:t=>{const n=ic();return t.setActive(e.formatter.match("lang",{},void 0,!0)),n.set(e.formatter.formatChanged("lang",t.setActive,!0)),n.clear}}))))(e).each((t=>$D(e,t)))},qD=(e,t)=>{((e,t)=>{const n=vA(0,t,xA(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n=vA(0,t,EA(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n={type:"advanced",...t.styles},r=vA(0,t,RA(e,n));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>r.items.validateItems(r.getStyleItems())})})(e,t),((e,t)=>{const n=vA(0,t,SA(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n=vA(0,t,OA(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t)},XD=e=>mA(e,"NodeChange",(t=>{t.setEnabled(e.queryCommandState("outdent"))})),KD=e=>{(e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:XD(e),onAction:fA(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:fA(e,"indent")})})(e)},JD=(e,t)=>n=>{n.setActive(t.get());const r=e=>{t.set(e.state),n.setActive(e.state)};return e.on("PastePlainTextToggle",r),()=>e.off("PastePlainTextToggle",r)},ZD=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},QD=e=>{(e=>{qS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],((t,n)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:hA(e,t.name),onAction:ZD(e,t.name)})}));for(let t=1;t<=6;t++){const n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:hA(e,n),onAction:ZD(e,n)})}})(e),(e=>{qS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fA(e,t.action)})}))})(e),(e=>{qS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fA(e,t.action),onSetup:hA(e,t.name)})}))})(e)},eO=e=>{QD(e),(e=>{qS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:fA(e,t.action)})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:ZD(e,"code")})})(e)},tO=(e,t)=>mA(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(n=>{n.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())})),nO=e=>{(e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:tO(e,"hasUndo"),onAction:fA(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:tO(e,"hasRedo"),onAction:fA(e,"redo")})})(e),(e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:tO(e,"hasUndo"),onAction:fA(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:tO(e,"hasRedo"),onAction:fA(e,"redo")})})(e)},rO=e=>mA(e,"VisualAid",(t=>{t.setActive(e.hasVisual)})),sO=e=>{(e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:fA(e,"mceToggleVisualAid")})})(e),(e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:rO(e),onAction:fA(e,"mceToggleVisualAid")})})(e)},iO=(e,t)=>{(e=>{H([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fA(e,t.cmd),onSetup:hA(e,t.name)})})),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:fA(e,"JustifyNone")})})(e),eO(e),qD(e,t),nO(e),(e=>{(e=>{e.addCommand("mceApplyTextcolor",((t,n)=>{((e,t,n)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}))})(e,t,n)})),e.addCommand("mceRemoveTextcolor",(t=>{((e,t)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}))})(e,t)}))})(e);const t=ws(Db),n=ws(Db);zb(e,"forecolor","forecolor","Text color",t),zb(e,"backcolor","hilitecolor","Background color",n),Bb(e,"forecolor","forecolor","Text color"),Bb(e,"backcolor","hilitecolor","Background color")})(e),sO(e),KD(e),GD(e),(e=>{const t=ws(lv(e)),n=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:JD(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:JD(e,t)})})(e)},oO=e=>i(e)?e.split(/[ ,]/):e,aO=e=>t=>t.options.get(e),lO=aO("contextmenu_never_use_native"),cO=aO("contextmenu_avoid_overlap"),dO=e=>{const t=e.ui.registry.getAll().contextMenus,n=e.options.get("contextmenu");return e.options.isSet("contextmenu")?n:U(n,(e=>ve(t,e)))},uO=(e,t)=>({type:"makeshift",x:e,y:t}),hO=e=>"longpress"===e.type||0===e.type.indexOf("touch"),mO=(e,t)=>{const n=Sg.DOM.getPos(e);return((e,t,n)=>uO(e.x+t,e.y+n))(t,n.x,n.y)},pO=(e,t)=>"contextmenu"===t.type||"longpress"===t.type?e.inline?(e=>{if(hO(e)){const t=e.touches[0];return uO(t.pageX,t.pageY)}return uO(e.pageX,e.pageY)})(t):mO(e.getContentAreaContainer(),(e=>{if(hO(e)){const t=e.touches[0];return uO(t.clientX,t.clientY)}return uO(e.clientX,e.clientY)})(t)):fO(e),fO=e=>({type:"selection",root:De.fromDom(e.selection.getNode())}),gO=(e,t,n)=>{switch(n){case"node":return(e=>({type:"node",node:L.some(De.fromDom(e.selection.getNode())),root:De.fromDom(e.getBody())}))(e);case"point":return pO(e,t);case"selection":return fO(e)}},vO=(e,t,n,r,s,i)=>{const o=n(),a=gO(e,t,i);_T(o,kv.CLOSE_ON_EXECUTE,r,!1).map((e=>{t.preventDefault(),og.showMenuAt(s,{anchor:a},{menu:{markers:Yv("normal")},data:e})}))},yO={onLtr:()=>[fl,dl,ul,hl,ml,pl,IC,zC,NC,RC,PC,OC],onRtl:()=>[fl,ul,dl,ml,hl,pl,IC,zC,PC,OC,NC,RC]},_O={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},bO=(e,t,n,r,s,i,o)=>{const a=((e,t,n)=>{const r=gO(e,t,n);return{bubble:Tc(0,"point"===n?12:0,_O),layouts:yO,overrides:{maxWidthFunction:ML(),maxHeightFunction:wc()},...r}})(e,t,i);_T(n,kv.CLOSE_ON_EXECUTE,r,!0).map((n=>{t.preventDefault(),og.showMenuWithinBounds(s,{anchor:a},{menu:{markers:Yv("normal"),highlightImmediately:o},data:n,type:"horizontal"},(()=>L.some(CD(e,r.shared,"node"===i?"node":"selection")))),e.dispatch(_D)}))},wO=(e,t,n,r,s,i)=>{const o=yn(),a=o.os.isiOS(),l=o.os.isMacOS(),c=o.os.isAndroid(),d=o.deviceType.isTouch(),u=()=>{const o=n();bO(e,t,o,r,s,i,!(c||a||l&&d))};if((l||a)&&"node"!==i){const n=()=>{(e=>{const t=e.selection.getRng(),n=()=>{ag.setEditorTimeout(e,(()=>{e.selection.setRng(t)}),10),i()};e.once("touchend",n);const r=e=>{e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",r,!0);const s=()=>i();e.once("longpresscancel",s);const i=()=>{e.off("touchend",n),e.off("longpresscancel",s),e.off("mousedown",r)}})(e),u()};((e,t)=>{const n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;{const r=t.touches[0],s=n.getRng();return ud(e.getWin(),Zc.domRange(s)).exists((e=>e.left<=r.clientX&&e.right>=r.clientX&&e.top<=r.clientY&&e.bottom>=r.clientY))}})(e,t)?n():(e.once("selectionchange",n),e.once("touchend",(()=>e.off("selectionchange",n))))}else u()},xO=e=>i(e)?"|"===e:"separator"===e.type,MO={type:"separator"},SO=e=>{const t=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if(i(e))return e;switch(e.type){case"separator":return MO;case"submenu":return{type:"nestedmenuitem",...t(e),getSubmenuItems:()=>{const t=e.getSubmenuItems();return i(t)?t:F(t,SO)}};default:return{type:"menuitem",...t(e),onAction:(n=e.onAction,()=>n())}}var n},TO=(e,t)=>{if(0===t.length)return e;const n=re(e).filter((e=>!xO(e))),r=n.fold((()=>[]),(e=>[MO]));return e.concat(r).concat(t).concat([MO])},CO=(e,t)=>"longpress"!==t.type&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType),EO=(e,t)=>CO(e,t)?e.selection.getStart(!0):t.target,kO=(e,t,n)=>{const r=yn().deviceType.isTouch,s=ca(og.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>n.setContextMenuState(!0),onHide:()=>n.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Al([vf("dismissContextMenu",[zi(bi(),((t,n)=>{uu.close(t),e.focus()}))])])})),o=e=>og.hide(s),a=t=>{if(lO(e)&&t.preventDefault(),((e,t)=>t.ctrlKey&&!lO(e))(e,t)||(e=>0===dO(e).length)(e))return;const o=((e,t)=>{const n=cO(e),r=CO(e,t)?"selection":"point";if(ke(n)){const s=EO(e,t);return cw(De.fromDom(s),n)?"node":r}return r})(e,t);(r()?wO:vO)(e,t,(()=>{const n=EO(e,t),r=e.ui.registry.getAll(),s=dO(e);return((e,t,n)=>{const r=V(t,((t,r)=>ge(e,r.toLowerCase()).map((e=>{const r=e.update(n);if(i(r))return TO(t,r.split(" "));if(r.length>0){const e=F(r,SO);return TO(t,e)}return t})).getOrThunk((()=>t.concat([r])))),[]);return r.length>0&&xO(r[r.length-1])&&r.pop(),r})(r.contextMenus,s,n)}),n,s,o)};e.on("init",(()=>{const t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(r()?"":" ResizeWindow");e.on(t,o),e.on("longpress contextmenu",a)}))},LO=xs([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),AO=e=>t=>t.translate(-e.left,-e.top),DO=e=>t=>t.translate(e.left,e.top),OO=e=>(t,n)=>V(e,((e,t)=>t(e)),Nt(t,n)),RO=(e,t,n)=>e.fold(OO([DO(n),AO(t)]),OO([AO(t)]),OO([])),PO=(e,t,n)=>e.fold(OO([DO(n)]),OO([]),OO([DO(t)])),NO=(e,t,n)=>e.fold(OO([]),OO([AO(n)]),OO([DO(t),AO(n)])),IO=(e,t,n)=>{const r=e.fold(((e,t)=>({position:L.some("absolute"),left:L.some(e+"px"),top:L.some(t+"px")})),((e,t)=>({position:L.some("absolute"),left:L.some(e-n.left+"px"),top:L.some(t-n.top+"px")})),((e,t)=>({position:L.some("fixed"),left:L.some(e+"px"),top:L.some(t+"px")})));return{right:L.none(),bottom:L.none(),...r}},zO=(e,t,n,r)=>{const s=(e,s)=>(i,o)=>{const a=e(t,n,r);return s(i.getOr(a.left),o.getOr(a.top))};return e.fold(s(NO,BO),s(PO,FO),s(RO,HO))},BO=LO.offset,FO=LO.absolute,HO=LO.fixed,jO=(e,t)=>{const n=pt(e,t);return u(n)?NaN:parseInt(n,10)},UO=(e,t,n,r)=>((e,t)=>{const n=e.element,r=jO(n,t.leftAttr),s=jO(n,t.topAttr);return isNaN(r)||isNaN(s)?L.none():L.some(Nt(r,s))})(e,t).fold((()=>n),(e=>HO(e.left+r.left,e.top+r.top))),YO=(e,t,n,r,s,i)=>{const o=UO(e,t,n,r),a=t.mustSnap?WO(e,t,o,s,i):GO(e,t,o,s,i),l=RO(o,s,i);return((e,t,n)=>{const r=e.element;ht(r,t.leftAttr,n.left+"px"),ht(r,t.topAttr,n.top+"px")})(e,t,l),a.fold((()=>({coord:HO(l.left,l.top),extra:L.none()})),(e=>({coord:e.output,extra:e.extra})))},VO=(e,t)=>{((e,t)=>{const n=e.element;vt(n,t.leftAttr),vt(n,t.topAttr)})(e,t)},$O=(e,t,n,r)=>ie(e,(e=>{const s=e.sensor,i=((e,t,n,r,s,i)=>{const o=PO(e,s,i),a=PO(t,s,i);return Math.abs(o.left-a.left)<=n&&Math.abs(o.top-a.top)<=r})(t,s,e.range.left,e.range.top,n,r);return i?L.some({output:zO(e.output,t,n,r),extra:e.extra}):L.none()})),WO=(e,t,n,r,s)=>{const i=t.getSnapPoints(e);return $O(i,n,r,s).orThunk((()=>{const e=V(i,((e,t)=>{const i=t.sensor,o=((e,t,n,r,s,i)=>{const o=PO(e,s,i),a=PO(t,s,i),l=Math.abs(o.left-a.left),c=Math.abs(o.top-a.top);return Nt(l,c)})(n,i,t.range.left,t.range.top,r,s);return e.deltas.fold((()=>({deltas:L.some(o),snap:L.some(t)})),(n=>(o.left+o.top)/2<=(n.left+n.top)/2?{deltas:L.some(o),snap:L.some(t)}:e))}),{deltas:L.none(),snap:L.none()});return e.snap.map((e=>({output:zO(e.output,n,r,s),extra:e.extra})))}))},GO=(e,t,n,r,s)=>{const i=t.getSnapPoints(e);return $O(i,n,r,s)};var qO=Object.freeze({__proto__:null,snapTo:(e,t,n,r)=>{const s=t.getTarget(e.element);if(t.repositionTarget){const t=Ye(e.element),n=Ln(t),i=JE(s),o=((e,t,n)=>({coord:zO(e.output,e.output,t,n),extra:e.extra}))(r,n,i),a=IO(o.coord,0,i);xt(s,a)}}});const XO="data-initial-z-index",KO=(e,t)=>{e.getSystem().addToGui(t),(e=>{Ge(e.element).filter(Pe).each((t=>{Tt(t,"z-index").each((e=>{ht(t,XO,e)})),bt(t,"z-index",Mt(e.element,"z-index"))}))})(t)},JO=e=>{(e=>{Ge(e.element).filter(Pe).each((e=>{ft(e,XO).fold((()=>kt(e,"z-index")),(t=>bt(e,"z-index",t))),vt(e,XO)}))})(e),e.getSystem().removeFromGui(e)},ZO=(e,t,n)=>e.getSystem().build(xw.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}));var QO=us("snaps",[Xr("getSnapPoints"),za("onSensor"),Xr("leftAttr"),Xr("topAttr"),hs("lazyViewport",Hn),hs("mustSnap",!1)]);const eR=[hs("useFixed",C),Xr("blockerClass"),hs("getTarget",b),hs("onDrag",v),hs("repositionTarget",!0),hs("onDrop",v),ys("getBounds",Hn),QO],tR=e=>{return(t=Tt(e,"left"),n=Tt(e,"top"),r=Tt(e,"position"),s=(e,t,n)=>("fixed"===n?HO:BO)(parseInt(e,10),parseInt(t,10)),t.isSome()&&n.isSome()&&r.isSome()?L.some(s(t.getOrDie(),n.getOrDie(),r.getOrDie())):L.none()).getOrThunk((()=>{const t=zt(e);return FO(t.left,t.top)}));var t,n,r,s},nR=(e,t,n,r,s,i,o)=>((e,t,n,r,s)=>{const i=s.bounds,o=PO(t,n,r),a=tl(o.left,i.x,i.x+i.width-s.width),l=tl(o.top,i.y,i.y+i.height-s.height),c=FO(a,l);return t.fold((()=>{const e=NO(c,n,r);return BO(e.left,e.top)}),_(c),(()=>{const e=RO(c,n,r);return HO(e.left,e.top)}))})(0,t.fold((()=>{const e=(t=n,o=i.left,a=i.top,t.fold(((e,t)=>BO(e+o,t+a)),((e,t)=>FO(e+o,t+a)),((e,t)=>HO(e+o,t+a))));var t,o,a;const l=RO(e,r,s);return HO(l.left,l.top)}),(t=>{const o=YO(e,t,n,i,r,s);return o.extra.each((n=>{t.onSensor(e,n)})),o.coord})),r,s,o),rR=(e,t)=>({bounds:e.getBounds(),height:Rt(t.element),width:jt(t.element)}),sR=(e,t,n,r,s)=>{const i=n.update(r,s),o=n.getStartData().getOrThunk((()=>rR(t,e)));i.each((n=>{((e,t,n,r)=>{const s=t.getTarget(e.element);if(t.repositionTarget){const i=Ye(e.element),o=Ln(i),a=JE(s),l=tR(s),c=nR(e,t.snaps,l,o,a,r,n),d=IO(c,0,a);xt(s,d)}t.onDrag(e,s,r)})(e,t,o,n)}))},iR=(e,t,n,r)=>{t.each(JO),n.snaps.each((t=>{VO(e,t)}));const s=n.getTarget(e.element);r.reset(),n.onDrop(e,s)},oR=e=>(t,n)=>{const r=e=>{n.setStartData(rR(t,e))};return Pi([zi(gi(),(e=>{n.getStartData().each((()=>r(e)))})),...e(t,n,r)])};var aR=Object.freeze({__proto__:null,getData:e=>L.from(Nt(e.x,e.y)),getDelta:(e,t)=>Nt(t.left-e.left,t.top-e.top)});const lR=(e,t,n)=>[zi(Fs(),((r,s)=>{if(0!==s.event.raw.button)return;s.stop();const i=()=>iR(r,L.some(l),e,t),o=dw(i,200),a={drop:i,delayDrop:o.schedule,forceDrop:i,move:n=>{o.cancel(),sR(r,e,t,aR,n)}},l=ZO(r,e.blockerClass,(e=>Pi([zi(Fs(),e.forceDrop),zi(Us(),e.drop),zi(Hs(),((t,n)=>{e.move(n.event)})),zi(js(),e.delayDrop)]))(a));n(r),KO(r,l)}))],cR=[...eR,ja("dragger",{handlers:oR(lR)})];var dR=Object.freeze({__proto__:null,getData:e=>{const t=e.raw.touches;return 1===t.length?(e=>{const t=e[0];return L.some(Nt(t.clientX,t.clientY))})(t):L.none()},getDelta:(e,t)=>Nt(t.left-e.left,t.top-e.top)});const uR=(e,t,n)=>{const r=oc(),s=n=>{iR(n,r.get(),e,t),r.clear()};return[zi(Ns(),((i,o)=>{o.stop();const a=()=>s(i),l={drop:a,delayDrop:v,forceDrop:a,move:n=>{sR(i,e,t,dR,n)}},c=ZO(i,e.blockerClass,(e=>Pi([zi(Ns(),e.forceDrop),zi(zs(),e.drop),zi(Bs(),e.drop),zi(Is(),((t,n)=>{e.move(n.event)}))]))(l));r.set(c);n(i),KO(i,c)})),zi(Is(),((n,r)=>{r.stop(),sR(n,e,t,dR,r.event)})),zi(zs(),((e,t)=>{t.stop(),s(e)})),zi(Bs(),s)]},hR=cR,mR=[...eR,ja("dragger",{handlers:oR(uR)})],pR=[...eR,ja("dragger",{handlers:oR(((e,t,n)=>[...lR(e,t,n),...uR(e,t,n)]))})];var fR=Object.freeze({__proto__:null,mouse:hR,touch:mR,mouseOrTouch:pR});var gR=Object.freeze({__proto__:null,init:()=>{let e=L.none(),t=L.none();const n=_({});return xo({readState:n,reset:()=>{e=L.none(),t=L.none()},update:(t,n)=>t.getData(n).bind((n=>((t,n)=>{const r=e.map((e=>t.getDelta(e,n)));return e=L.some(n),r})(t,n))),getStartData:()=>t,setStartData:e=>{t=L.some(e)}})}});const vR=Pl({branchKey:"mode",branches:fR,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:L.from(e.extra)})},state:gR,apis:qO}),yR=(e,t,n,r,s,i)=>e.fold((()=>vR.snap({sensor:FO(n-20,r-20),range:Nt(s,i),output:FO(L.some(n),L.some(r)),extra:{td:t}})),(e=>{const s=n-20,i=r-20,o=e.element.dom.getBoundingClientRect();return vR.snap({sensor:FO(s,i),range:Nt(40,40),output:FO(L.some(n-o.width/2),L.some(r-o.height/2)),extra:{td:t}})})),_R=(e,t,n)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(e,r)=>{const s=r.td;((e,t)=>e.exists((e=>je(e,t))))(t.get(),s)||(t.set(s),n(s))},mustSnap:!0}),bR=e=>cg(lg.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Al([vR.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),Ox.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),wR=(e,t)=>{const n=ws([]),r=ws([]),s=ws(!1),i=oc(),o=oc(),a=e=>{const n=Fn(e);return yR(u.getOpt(t),e,n.x,n.y,n.width,n.height)},l=e=>{const n=Fn(e);return yR(h.getOpt(t),e,n.right,n.bottom,n.width,n.height)},c=_R((()=>F(n.get(),(e=>a(e)))),i,(t=>{o.get().each((n=>{e.dispatch("TableSelectorChange",{start:t,finish:n})}))})),d=_R((()=>F(r.get(),(e=>l(e)))),o,(t=>{i.get().each((n=>{e.dispatch("TableSelectorChange",{start:n,finish:t})}))})),u=bR(c),h=bR(d),m=ca(u.asSpec()),p=ca(h.asSpec()),f=(t,n,r,s)=>{const i=r(n);vR.snapTo(t,i);((t,n,r,s)=>{const i=n.dom.getBoundingClientRect();kt(t.element,"display");const o=We(De.fromDom(e.getBody())).dom.innerHeight,a=r(i),l=s(i,o);(a||l)&&bt(t.element,"display","none")})(t,n,(e=>e[s]<0),((e,t)=>e[s]>t))},g=e=>f(m,e,a,"top"),v=e=>f(p,e,l,"bottom");yn().deviceType.isTouch()&&(e.on("TableSelectionChange",(e=>{s.get()||(Gd(t,m),Gd(t,p),s.set(!0)),i.set(e.start),o.set(e.finish),e.otherCells.each((t=>{n.set(t.upOrLeftCells),r.set(t.downOrRightCells),g(e.start),v(e.finish)}))})),e.on("ResizeEditor ResizeWindow ScrollContent",(()=>{i.get().each(g),o.get().each(v)})),e.on("TableSelectionClear",(()=>{s.get()&&(Kd(m),Kd(p),s.set(!1)),i.clear(),o.clear()})))};const xR=(e,t,n)=>{var r;const s=null!==(r=t.delimiter)&&void 0!==r?r:"›",i=t=>V(t,((t,r,i)=>{const o=((t,r,s)=>lg.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":s,"aria-level":s+1}},components:[ia(t)],action:t=>{e.focus(),e.selection.select(r),e.nodeChanged()},buttonBehaviours:Al([T_(n.isDisabled),M_()])}))(r.name,r.element,i);return 0===i?t.concat([o]):t.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[ia(` ${s} `)]},o])}),[]);return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Al([af.config({mode:"flow",selector:"div[role=button]"}),em.config({disabled:n.isDisabled}),M_(),Lw.config({}),gf.config({}),vf("elementPathEvents",[$i(((t,n)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",(()=>af.focusIn(t))),e.on("NodeChange",(n=>{const r=(t=>{const n=[];let r=t.length;for(;r-- >0;){const i=t[r];if(1===i.nodeType&&"BR"!==(s=i).nodeName&&!s.getAttribute("data-mce-bogus")&&"bookmark"!==s.getAttribute("data-mce-type")){const t=e.dispatch("ResolveName",{name:i.nodeName.toLowerCase(),target:i});if(t.isDefaultPrevented()||n.push({name:t.name,element:i}),t.isPropagationStopped())break}}var s;return n})(n.parents),s=r.length>0?i(r):[];gf.set(t,s)}))}))])]),components:[]}};var MR;!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(MR||(MR={}));const SR=(e,t,n)=>{const r=De.fromDom(e.getContainer()),s=((e,t,n,r,s)=>{const i={};return i.height=uD(r+t.top,Pg(e),Ig(e)),n===MR.Both&&(i.width=uD(s+t.left,Rg(e),Ng(e))),i})(e,t,n,Ot(r),Ht(r));le(s,((e,t)=>bt(r,t,dD(e)))),(e=>{e.dispatch("ResizeEditor")})(e)},TR=(e,t,n,r)=>{const s=Nt(20*n,20*r);return SR(e,s,t),L.some(!0)},CR=(e,t)=>{const n=(e=>{const t=av(e);return!1===t?MR.None:"both"===t?MR.Both:MR.Vertical})(e);return n===MR.None?L.none():L.some(_g("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},behaviours:[vR.config({mode:"mouse",repositionTarget:!1,onDrag:(t,r,s)=>SR(e,s,n),blockerClass:"tox-blocker"}),af.config({mode:"special",onLeft:()=>TR(e,n,-1,0),onRight:()=>TR(e,n,1,0),onUp:()=>TR(e,n,0,-1),onDown:()=>TR(e,n,0,1)}),Lw.config({}),xf.config({})]},t.icons))},ER=(e,t)=>{const n=()=>{const n=[];return iv(e)&&n.push(xR(e,{},t)),e.hasPlugin("wordcount")&&n.push(((e,t)=>{const n=(e,n,r)=>gf.set(e,[ia(t.translate(["{0} "+r,n[r]]))]);return lg.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Al([T_(t.isDisabled),M_(),Lw.config({}),gf.config({}),Du.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),vf("wordcount-events",[qi((e=>{const t=Du.getValue(e),r="words"===t.mode?"characters":"words";Du.setValue(e,{mode:r,count:t.count}),n(e,t.count,r)})),$i((t=>{e.on("wordCountUpdate",(e=>{const{mode:r}=Du.getValue(t);Du.setValue(t,{mode:r,count:e.wordCount}),n(t,e.wordCount,r)}))}))])]),eventOrder:{[ai()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,t)),ov(e)&&n.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":dg.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:Al([xf.config({})])}]}),n.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:n}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const r=n(),s=CR(e,t);return r.concat(s.toArray())})()}},kR=e=>e.get().getOrDie("UI has not been rendered"),LR=e=>{const t=e.inline,n=t?yD:lD,r=wv(e)?Tk:XE,s=oc(),i=oc(),o=oc(),a=oc(),l=yn().deviceType.isTouch()?["tox-platform-touch"]:[],c=gv(e),d=Ug(e),u=cg({dom:{tag:"div",classes:["tox-anchorbar"]}}),h=()=>i.get().bind(tA.getHeader),m=()=>Yn.fromOption(s.get(),"UI has not been rendered"),p=()=>i.get().bind((e=>tA.getToolbar(e))).getOrDie("Could not find more toolbar element"),f=()=>i.get().bind((e=>tA.getThrobber(e))).getOrDie("Could not find throbber element"),g=IE(m,e,(()=>i.get().bind((e=>u.getOpt(e))).getOrDie("Could not find a anchor bar element"))),v=()=>{const n=(()=>{const t={attributes:{[Dc]:c?Ac.BottomToTop:Ac.TopToBottom}},n=tA.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:g,onEscape:()=>{e.focus()}}),r=tA.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:m,providers:g.shared.providers,onEscape:()=>{e.focus()},type:d,lazyToolbar:p,lazyHeader:()=>h().getOrDie("Could not find header element"),...t}),s=tA.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:g.shared.providers,onEscape:()=>{e.focus()},type:d}),i=fv(e),o=mv(e),a=dv(e);return tA.parts.header({dom:{tag:"div",classes:["tox-editor-header"],...t},components:G([a?[n]:[],i?[s]:o?[r]:[],yv(e)?[]:[u.asSpec()]]),sticky:wv(e),editor:e,sharedBackstage:g.shared})})(),r={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[tA.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),tA.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},s=tA.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:g}),a=sv(e)&&!t?L.some(ER(e,g.shared.providers)):L.none(),f=G([c?[]:[n],t?[]:[r],c?[n]:[]]),v=G([[{dom:{tag:"div",classes:["tox-editor-container"]},components:f}],t?[]:a.toArray(),[s]]),y=bv(e),_={role:"application",...dg.isRtl()?{dir:"rtl"}:{},...y?{"aria-hidden":"true"}:{}},b=ca(tA.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(t?["tox-tinymce-inline"]:[]).concat(c?["tox-tinymce--toolbar-bottom"]:[]).concat(l),styles:{visibility:"hidden",...y?{opacity:"0",border:"0"}:{}},attributes:_},components:v,behaviours:Al([M_(),em.config({disableClass:"tox-tinymce--disabled"}),af.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),w=Mw(b);return i.set(b),o.set(w),{mothership:w,outerContainer:b}},y=t=>{const n=dD(hD(e)),r=dD((e=>mD(e).getOr(Og(e)))(e));return e.inline||(Et("div","width",r)&&bt(t.element,"width",r),Et("div","height",n)?bt(t.element,"height",n):bt(t.element,"height","400px")),n};return{getMothership:()=>kR(o),getUiMothership:()=>kR(a),backstage:g,renderUI:()=>{const{mothership:t,outerContainer:i}=v(),{uiMothership:o,sink:c}=(()=>{const t=_v(e),n=je(ct(),t)&&"grid"===Mt(t,"display"),i={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(l),attributes:{...dg.isRtl()?{dir:"rtl"}:{}}},behaviours:Al([Fd.config({useFixed:()=>r.isDocked(h)})])},o={dom:{styles:{width:document.body.clientWidth+"px"}},events:Pi([zi(vi(),(e=>{bt(e.element,"width",document.body.clientWidth+"px")}))])},c=ca(ar(i,n?o:{})),d=Mw(c);return s.set(c),a.set(d),{sink:c,uiMothership:d}})();ce(Yg(e),((t,n)=>{e.ui.registry.addGroupToolbarButton(n,t)}));const{buttons:u,menuItems:p,contextToolbars:_,sidebars:b}=e.ui.registry.getAll(),w=pv(e),x={menuItems:p,menus:xv(e),menubar:Xg(e),toolbar:w.getOrThunk((()=>Kg(e))),allowToolbarGroups:d===xg.floating,buttons:u,sidebar:b};(t=>{e.addShortcut("alt+F9","focus menubar",(()=>{tA.focusMenubar(t)})),e.addShortcut("alt+F10","focus toolbar",(()=>{tA.focusToolbar(t)})),e.addCommand("ToggleToolbarDrawer",(()=>{tA.toggleToolbarDrawer(t)})),e.addQueryStateHandler("ToggleToolbarDrawer",(()=>tA.isToolbarDrawerToggled(t)))})(i),((e,t,n)=>{const r=(e,r)=>{H([t,n],(t=>{t.broadcastEvent(e,r)}))},s=(e,r)=>{H([t,n],(t=>{t.broadcastOn([e],r)}))},i=e=>s(hu(),{target:e.target}),o=Rn(),a=lc(o,"touchstart",i),l=lc(o,"touchmove",(e=>r(pi(),e))),c=lc(o,"touchend",(e=>r(fi(),e))),d=lc(o,"mousedown",i),u=lc(o,"mouseup",(e=>{0===e.raw.button&&s(pu(),{target:e.target})})),h=e=>s(hu(),{target:De.fromDom(e.target)}),m=e=>{0===e.button&&s(pu(),{target:De.fromDom(e.target)})},p=()=>{H(e.editorManager.get(),(t=>{e!==t&&t.dispatch("DismissPopups",{relatedTarget:e})}))},f=e=>r(gi(),dc(e)),g=e=>{s(mu(),{}),r(vi(),dc(e))},v=()=>s(mu(),{}),y=t=>{t.state&&s(hu(),{target:De.fromDom(e.getContainer())})},_=e=>{s(hu(),{target:De.fromDom(e.relatedTarget.getContainer())})};e.on("PostRender",(()=>{e.on("click",h),e.on("tap",h),e.on("mouseup",m),e.on("mousedown",p),e.on("ScrollWindow",f),e.on("ResizeWindow",g),e.on("ResizeEditor",v),e.on("AfterProgressState",y),e.on("DismissPopups",_)})),e.on("remove",(()=>{e.off("click",h),e.off("tap",h),e.off("mouseup",m),e.off("mousedown",p),e.off("ScrollWindow",f),e.off("ResizeWindow",g),e.off("ResizeEditor",v),e.off("AfterProgressState",y),e.off("DismissPopups",_),d.unbind(),a.unbind(),l.unbind(),c.unbind(),u.unbind()})),e.on("detach",(()=>{eu(t),eu(n),t.destroy(),n.destroy()}))})(e,t,o),r.setup(e,g.shared,h),iO(e,g),kO(e,m,g),(e=>{const{sidebars:t}=e.ui.registry.getAll();H(oe(t),(n=>{const r=t[n],s=()=>_e(L.from(e.queryCommandValue("ToggleSidebar")),n);e.ui.registry.addToggleButton(n,{icon:r.icon,tooltip:r.tooltip,onAction:t=>{e.execCommand("ToggleSidebar",!1,n),t.setActive(s())},onSetup:t=>{const n=()=>t.setActive(s());return e.on("ToggleSidebar",n),()=>{e.off("ToggleSidebar",n)}}})}))})(e),mL(e,f,g.shared),jD(e,_,c,{backstage:g}),wR(e,c);const M={mothership:t,uiMothership:o,outerContainer:i,sink:c},S={targetNode:e.getElement(),height:y(i)};return n.render(e,M,x,g,S)}}},AR=_([Xr("lazySink"),ss("dragBlockClass"),ys("getBounds",Hn),hs("useTabstopAt",E),hs("eventOrder",{}),Ou("modalBehaviours",[af]),Ba("onExecute"),Ha("onEscape")]),DR={sketch:b},OR=_([ch({name:"draghandle",overrides:(e,t)=>({behaviours:Al([vR.config({mode:"mouse",getTarget:e=>fa(e,'[role="dialog"]').getOr(e),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),ah({schema:[Xr("dom")],name:"title"}),ah({factory:DR,schema:[Xr("dom")],name:"close"}),ah({factory:DR,schema:[Xr("dom")],name:"body"}),ch({factory:DR,schema:[Xr("dom")],name:"footer"}),lh({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[hs("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),hs("components",[])],name:"blocker"})]),RR=Ih({name:"ModalDialog",configFields:AR(),partFields:OR(),factory:(e,t,n,r)=>{const s=oc(),i=ro("modal-events"),o={...e.eventOrder,[yi()]:[i].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:t,apis:{show:t=>{s.set(t);const n=e.lazySink(t).getOrDie(),i=r.blocker(),o=n.getSystem().build({...i,components:i.components.concat([da(t)]),behaviours:Al([xf.config({}),vf("dialog-blocker-events",[Vi(Vs(),(()=>{af.focusIn(t)}))])])});Gd(n,o),af.focusIn(t)},hide:e=>{s.clear(),Ge(e.element).each((t=>{e.getSystem().getByDom(t).each((e=>{Kd(e)}))}))},getBody:t=>xh(t,e,"body"),getFooter:t=>xh(t,e,"footer"),setIdle:e=>{cL.unblock(e)},setBusy:(e,t)=>{cL.block(e,t)}},eventOrder:o,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Pu(e.modalBehaviours,[gf.config({}),af.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt}),cL.config({getRoot:s.get}),vf(i,[$i((t=>{((e,t)=>{const n=ft(e,"id").fold((()=>{const e=ro("dialog-label");return ht(t,"id",e),e}),b);ht(e,"aria-labelledby",n)})(t.element,xh(t,e,"title").element),((e,t)=>{const n=L.from(pt(e,"id")).fold((()=>{const e=ro("dialog-describe");return ht(t,"id",e),e}),b);ht(e,"aria-describedby",n)})(t.element,xh(t,e,"body").element)}))])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,n)=>{e.setBusy(t,n)},setIdle:(e,t)=>{e.setIdle(t)}}}),PR=Sr([ey,ty].concat(Ky)),NR=Rr,IR=[Ey("button"),py,gs("align","end",["start","end"]),xy,wy,ls("buttonType",["primary","secondary"])],zR=[...IR,ry],BR=[Qr("type",["submit","cancel","custom"]),...zR],FR=[Qr("type",["menu"]),my,fy,py,rs("items",PR),...IR],HR=$r("type",{submit:BR,cancel:BR,custom:BR,menu:FR}),jR=[ey,ry,Qr("level",["info","warn","error","success"]),iy,hs("url","")],UR=Sr(jR),YR=[ey,ry,wy,Ey("button"),py,by,ls("buttonType",["primary","secondary","toolbar"]),xy],VR=Sr(YR),$R=[ey,ty],WR=$R.concat([gy]),GR=$R.concat([ny,wy]),qR=Sr(GR),XR=Rr,KR=WR.concat([My("auto")]),JR=Sr(KR),ZR=kr([oy,ry,iy]),QR=Sr(WR),eP=Or,tP=Sr(WR),nP=Or,rP=$R.concat([fs("tag","textarea"),Zr("scriptId"),Zr("scriptUrl"),((e,t)=>ms(e,t,Ir))("settings",void 0)]),sP=$R.concat([fs("tag","textarea"),es("init")]),iP=Fr((e=>jr("customeditor.old",Mr(sP),e).orThunk((()=>jr("customeditor.new",Mr(rP),e))))),oP=Or,aP=Sr(WR),lP=Tr(vr),cP=e=>[ey,Jr("columns"),e],dP=[ey,Zr("html"),gs("presets","presentation",["presentation","document"])],uP=Sr(dP),hP=WR.concat([vs("sandboxed",!0)]),mP=Sr(hP),pP=Or,fP=Sr($R.concat([as("height")])),gP=Sr([Zr("url"),os("zoom"),os("cachedWidth"),os("cachedHeight")]),vP=WR.concat([as("inputMode"),as("placeholder"),vs("maximized",!1),wy]),yP=Sr(vP),_P=Or,bP=e=>[ey,ny,e],wP=[ry,oy],xP=[ry,rs("items",((e,t)=>((e,t)=>{const n=Ut(t);return{extract:(e,t)=>n().extract(e,t),toString:()=>n().toString()}})(0,t))(0,(()=>MP)))],MP=Cr([Sr(wP),Sr(xP)]),SP=WR.concat([rs("items",MP),wy]),TP=Sr(SP),CP=Or,EP=WR.concat([ns("items",[ry,oy]),ps("size",1),wy]),kP=Sr(EP),LP=Or,AP=WR.concat([vs("constrain",!0),wy]),DP=Sr(AP),OP=Sr([Zr("width"),Zr("height")]),RP=$R.concat([ny,ps("min",0),ps("max",0)]),PP=Sr(RP),NP=Dr,IP=[ey,rs("header",Or),rs("cells",Tr(Or))],zP=Sr(IP),BP=WR.concat([as("placeholder"),vs("maximized",!1),wy]),FP=Sr(BP),HP=Or,jP=WR.concat([gs("filetype","file",["image","media","file"]),wy]),UP=Sr(jP),YP=Sr([oy,Sy]),VP=e=>Wr("items","items",{tag:"required",process:{}},Tr(Fr((t=>jr(`Checking item of ${e}`,$P,t).fold((e=>Yn.error(Vr(e))),(e=>Yn.value(e))))))),$P=wr((()=>{return Br("type",{alertbanner:UR,bar:Sr((e=VP("bar"),[ey,e])),button:VR,checkbox:qR,colorinput:QR,colorpicker:tP,dropzone:aP,grid:Sr(cP(VP("grid"))),iframe:mP,input:yP,listbox:TP,selectbox:kP,sizeinput:DP,slider:PP,textarea:FP,urlinput:UP,customeditor:iP,htmlpanel:uP,imagepreview:fP,collection:JR,label:Sr(bP(VP("label"))),table:zP,panel:GP});var e})),WP=[ey,hs("classes",[]),rs("items",$P)],GP=Sr(WP),qP=[Ey("tab"),sy,rs("items",$P)],XP=[ey,ns("tabs",qP)],KP=Sr(XP),JP=zR,ZP=HR,QP=Sr([Zr("title"),Kr("body",Br("type",{panel:GP,tabpanel:KP})),fs("size","normal"),rs("buttons",ZP),hs("initialData",{}),ys("onAction",v),ys("onChange",v),ys("onSubmit",v),ys("onClose",v),ys("onCancel",v),ys("onTabChange",v)]),eN=Sr([Qr("type",["cancel","custom"]),...JP]),tN=Sr([Zr("title"),Zr("url"),os("height"),os("width"),ds("buttons",eN),ys("onAction",v),ys("onCancel",v),ys("onClose",v),ys("onMessage",v)]),nN=e=>o(e)?[e].concat(q(fe(e),nN)):l(e)?q(e,nN):[],rN=e=>i(e.type)&&i(e.name),sN={checkbox:XR,colorinput:eP,colorpicker:nP,dropzone:lP,input:_P,iframe:pP,imagepreview:gP,selectbox:LP,sizeinput:OP,slider:NP,listbox:CP,size:OP,textarea:HP,urlinput:YP,customeditor:oP,collection:ZR,togglemenuitem:NR},iN=e=>{const t=(e=>U(nN(e),rN))(e),n=q(t,(e=>(e=>L.from(sN[e.type]))(e).fold((()=>[]),(t=>[Kr(e.name,t)]))));return Sr(n)},oN=e=>({internalDialog:Ur(jr("dialog",QP,e)),dataValidator:iN(e),initialData:e.initialData}),aN={open:(e,t)=>{const n=oN(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:(e,t)=>e(Ur(jr("dialog",tN,t))),redial:e=>oN(e)},lN=e=>{const t=[],n={};return le(e,((e,r)=>{e.fold((()=>{t.push(r)}),(e=>{n[r]=e}))})),t.length>0?Yn.error(t):Yn.value(n)},cN=(e,t,n)=>{const r=cg(CS.sketch((r=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:F(e.items,(e=>MC(r,e,t,n)))}))));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[r.asSpec()]}],behaviours:Al([af.config({mode:"acyclic",useTabstopAt:M(nT)}),NS(r),HS(r,{postprocess:e=>lN(e).fold((e=>(console.error(e),{})),b)})])}},dN=Nh({name:"TabButton",configFields:[hs("uid",void 0),Xr("value"),Wr("dom","dom",ur((()=>({attributes:{role:"tab",id:ro("aria"),"aria-selected":"false"}}))),Lr()),ss("action"),hs("domModification",{}),Ou("tabButtonBehaviours",[xf,af,Du]),Xr("view")],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:zf(e.action),behaviours:Pu(e.tabButtonBehaviours,[xf.config({}),af.config({mode:"execution",useSpace:!0,useEnter:!0}),Du.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),uN=_([Xr("tabs"),Xr("dom"),hs("clickToDismiss",!1),Ou("tabbarBehaviours",[um,af]),Na(["tabClass","selectedClass"])]),hN=dh({factory:dN,name:"tabs",unit:"tab",overrides:e=>{const t=(e,t)=>{um.dehighlight(e,t),Li(e,Ti(),{tabbar:e,button:t})},n=(e,t)=>{um.highlight(e,t),Li(e,Si(),{tabbar:e,button:t})};return{action:r=>{const s=r.getSystem().getByUid(e.uid).getOrDie(),i=um.isHighlighted(s,r);(i&&e.clickToDismiss?t:i?v:n)(s,r)},domModification:{classes:[e.markers.tabClass]}}}}),mN=_([hN]),pN=Ih({name:"Tabbar",configFields:uN(),partFields:mN(),factory:(e,t,n,r)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Pu(e.tabbarBehaviours,[um.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{ht(t.element,"aria-selected","true")},onDehighlight:(e,t)=>{ht(t.element,"aria-selected","false")}}),af.config({mode:"flow",getInitial:e=>um.getHighlighted(e).map((e=>e.element)),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),fN=Nh({name:"Tabview",configFields:[Ou("tabviewBehaviours",[gf])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:Pu(e.tabviewBehaviours,[gf.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),gN=_([hs("selectFirst",!0),za("onChangeTab"),za("onDismissTab"),hs("tabs",[]),Ou("tabSectionBehaviours",[])]),vN=ah({factory:pN,schema:[Xr("dom"),ts("markers",[Xr("tabClass"),Xr("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),yN=ah({factory:fN,name:"tabview"}),_N=_([vN,yN]),bN=Ih({name:"TabSection",configFields:gN(),partFields:_N(),factory:(e,t,n,r)=>{const s=(t,n)=>{wh(t,e,"tabbar").each((e=>{n(e).each(Ai)}))};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ru(e.tabSectionBehaviours),events:Pi(G([e.selectFirst?[$i(((e,t)=>{s(e,um.getFirst)}))]:[],[zi(Si(),((t,n)=>{(t=>{const n=Du.getValue(t);wh(t,e,"tabview").each((r=>{const s=$(e.tabs,(e=>e.value===n));s.each((n=>{const s=n.view();ft(t.element,"id").each((e=>{ht(r.element,"aria-labelledby",e)})),gf.set(r,s),e.onChangeTab(r,t,s)}))}))})(n.event.button)})),zi(Ti(),((t,n)=>{const r=n.event.button;e.onDismissTab(t,r)}))]])),apis:{getViewItems:t=>wh(t,e,"tabview").map((e=>gf.contents(e))).getOr([]),showTab:(e,t)=>{s(e,(e=>{const n=um.getCandidates(e);return $(n,(e=>Du.getValue(e)===t)).filter((t=>!um.isHighlighted(e,t)))}))}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,n)=>{e.showTab(t,n)}}}),wN=(e,t)=>{bt(e,"height",t+"px"),bt(e,"flex-basis",t+"px")},xN=(e,t,n)=>{fa(e,'[role="dialog"]').each((e=>{va(e,'[role="tablist"]').each((r=>{n.get().map((n=>(bt(t,"height","0"),bt(t,"flex-basis","0"),Math.min(n,((e,t,n)=>{const r=$e(e).dom,s=fa(e,".tox-dialog-wrap").getOr(e);let i;i="fixed"===Mt(s,"position")?Math.max(r.clientHeight,window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight);const o=Ot(t),a=t.dom.offsetLeft>=n.dom.offsetLeft+Ht(n)?Math.max(Ot(n),o):o,l=parseInt(Mt(e,"margin-top"),10)||0,c=parseInt(Mt(e,"margin-bottom"),10)||0;return i-(Ot(e)+l+c-a)})(e,t,r))))).each((e=>{wN(t,e)}))}))}))},MN=e=>va(e,'[role="tabpanel"]'),SN=e=>{const t=(()=>{const t=oc(),n=[$i((n=>{const r=n.element;MN(r).each((s=>{bt(s,"visibility","hidden"),n.getSystem().getByDom(s).toOptional().each((n=>{const r=((e,t,n)=>F(e,((r,s)=>{gf.set(n,e[s].view());const i=t.dom.getBoundingClientRect();return gf.set(n,[]),i.height})))(e,s,n),i=(e=>ne(ee(e,((e,t)=>e>t?-1:e<t?1:0))))(r);i.fold(t.clear,t.set)})),xN(r,s,t),kt(s,"visibility"),((e,t)=>{ne(e).each((e=>bN.showTab(t,e.value)))})(e,n),requestAnimationFrame((()=>{xN(r,s,t)}))}))})),zi(vi(),(e=>{const n=e.element;MN(n).each((e=>{xN(n,e,t)}))})),zi(Yw,((e,n)=>{const r=e.element;MN(r).each((e=>{const n=Hl(rt(e));bt(e,"visibility","hidden");const s=Tt(e,"height").map((e=>parseInt(e,10)));kt(e,"height"),kt(e,"flex-basis");const i=e.dom.getBoundingClientRect().height;s.forall((e=>i>e))?(t.set(i),xN(r,e,t)):s.each((t=>{wN(e,t)})),kt(e,"visibility"),n.each(Bl)}))}))];return{extraEvents:n,selectFirst:!1}})();return{smartTabHeight:t,naiveTabHeight:{extraEvents:[],selectFirst:!0}}},TN="send-data-to-section",CN="send-data-to-view",EN=(e,t,n)=>{const r=ws({}),s=e=>{const t=Du.getValue(e),n=lN(t).getOr({}),s=r.get(),i=ar(s,n);r.set(i)},i=e=>{const t=r.get();Du.setValue(e,t)},o=ws(null),a=F(e.tabs,(e=>({value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[ia(n.shared.providers.translate(e.title))],view:()=>[CS.sketch((r=>({dom:{tag:"div",classes:["tox-form"]},components:F(e.items,(e=>MC(r,e,t,n))),formBehaviours:Al([af.config({mode:"acyclic",useTabstopAt:M(nT)}),vf("TabView.form.events",[$i(i),Wi(s)]),Il.config({channels:Ts([{key:TN,value:{onReceive:s}},{key:CN,value:{onReceive:i}}])})])})))]}))),l=SN(a).smartTabHeight;return bN.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(e,t,n)=>{const r=Du.getValue(t);Li(e,Uw,{name:r,oldName:o.get()}),o.set(r)},tabs:a,components:[bN.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[pN.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Al([Lw.config({})])}),bN.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:l.selectFirst,tabSectionBehaviours:Al([vf("tabpanel",l.extraEvents),af.config({mode:"acyclic"}),Hh.config({find:e=>ne(bN.getViewItems(e))}),US(L.none(),(e=>(e.getSystem().broadcastOn([TN],{}),r.get())),((e,t)=>{r.set(t),e.getSystem().broadcastOn([CN],{})}))])})},kN=ro("update-dialog"),LN=ro("update-title"),AN=ro("update-body"),DN=ro("update-footer"),ON=ro("body-send-message"),RN=(e,t,n,r,s)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...n.map((e=>({id:e}))).getOr({}),...s?{"aria-live":"polite"}:{}}},components:[],behaviours:Al([IS(0),zA.config({channel:`${AN}-${t}`,updateState:(e,t)=>L.some({isTabPanel:()=>"tabpanel"===t.body.type}),renderComponents:e=>{const t=e.body;return"tabpanel"===t.type?[EN(t,e.initialData,r)]:[cN(t,e.initialData,r)]},initialData:e})])}),PN=Cg.deviceType.isTouch(),NN=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),IN=(e,t)=>RR.parts.close(lg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Al([Lw.config({})])})),zN=()=>RR.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),BN=(e,t)=>RR.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:dL(`<p>${t.translate(e)}</p>`)}]}]}),FN=e=>RR.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),HN=(e,t)=>[xw.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),xw.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],jN=e=>{const t="tox-dialog",n=t+"-wrap",r=n+"__backdrop",s=t+"__disable-scroll";return RR.sketch({lazySink:e.lazySink,onEscape:t=>(e.onEscape(t),L.some(!0)),useTabstopAt:e=>!nT(e),dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:dL(`<div class="${n}"></div>`),components:[{dom:{tag:"div",classes:PN?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:n,modalBehaviours:Al([xf.config({}),vf("dialog-events",e.dialogEvents.concat([Vi(Vs(),((e,t)=>{af.focusIn(e)}))])),vf("scroll-lock",[$i((()=>{Ho(ct(),s)})),Wi((()=>{jo(ct(),s)}))]),...e.extraBehaviours]),eventOrder:{[ai()]:["dialog-events"],[yi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[_i()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},UN=e=>lg.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[_g("close",{tag:"div",classes:["tox-icon"]},e.icons)],action:e=>{ki(e,zw)}}),YN=(e,t,n,r)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...n.map((e=>({id:e}))).getOr({})}},components:[],behaviours:Al([zA.config({channel:`${LN}-${t}`,initialData:e,renderComponents:e=>[ia(r.translate(e.title))]})])}),VN=()=>({dom:dL('<div class="tox-dialog__draghandle"></div>')}),$N=(e,t,n)=>((e,t,n)=>{const r=RR.parts.title(YN(e,t,L.none(),n)),s=RR.parts.draghandle(VN()),i=RR.parts.close(UN(n)),o=[r].concat(e.draggable?[s]:[]).concat([i]);return xw.sketch({dom:dL('<div class="tox-dialog__header"></div>'),components:o})})({title:n.shared.providers.translate(e),draggable:n.dialog.isDraggableModal()},t,n.shared.providers),WN=(e,t,n)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:dL('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),GN=(e,t,n)=>({onClose:()=>n.closeWindow(),onBlock:n=>{RR.setBusy(e(),((e,r)=>WN(n.message,r,t)))},onUnblock:()=>{RR.setIdle(e())}}),qN=(e,t,n,r)=>ca(jN({...e,lazySink:r.shared.getSink,extraBehaviours:[zA.config({channel:`${kN}-${e.id}`,updateState:(e,t)=>L.some(t),initialData:t}),VS({}),...e.extraBehaviours],onEscape:e=>{ki(e,zw)},dialogEvents:n,eventOrder:{[oi()]:[zA.name(),Il.name()],[yi()]:["scroll-lock",zA.name(),"messages","dialog-events","alloy.base.behaviour"],[_i()]:["alloy.base.behaviour","dialog-events","messages",zA.name(),"scroll-lock"]}})),XN=e=>F(e,(e=>"menu"===e.type?(e=>{const t=F(e.items,(e=>({...e,storage:ws(!1)})));return{...e,items:t}})(e):e)),KN=e=>V(e,((e,t)=>{if("menu"===t.type){return V(t.items,((e,t)=>(e[t.name]=t.storage,e)),e)}return e}),{}),JN=(e,t)=>[ji(Vs(),tT),e(Iw,((e,n)=>{t.onClose(),n.onClose()})),e(zw,((e,t,n,r)=>{t.onCancel(e),ki(r,Iw)})),zi(jw,((e,n)=>t.onUnblock())),zi(Hw,((e,n)=>t.onBlock(n.event)))],ZN=(e,t)=>{const n=(t,n)=>zi(t,((t,s)=>{r(t,((r,i)=>{n(e(),r,s.event,t)}))})),r=(e,t)=>{zA.getState(e).get().each((n=>{t(n,e)}))};return[...JN(n,t),n(Bw,((e,t,n)=>{t.onAction(e,{name:n.name})}))]},QN=(e,t,n)=>{const r=(t,n)=>zi(t,((t,r)=>{s(t,((s,i)=>{n(e(),s,r.event,t)}))})),s=(e,t)=>{zA.getState(e).get().each((n=>{t(n.internalDialog,e)}))};return[...JN(r,t),r(Fw,((e,t)=>t.onSubmit(e))),r(Nw,((e,t,n)=>{t.onChange(e,{name:n.name})})),r(Bw,((e,t,r,s)=>{const i=()=>af.focusIn(s),o=e=>gt(e,"disabled")||ft(e,"aria-disabled").exists((e=>"true"===e)),a=rt(s.element),l=Hl(a);t.onAction(e,{name:r.name,value:r.value}),Hl(a).fold(i,(e=>{o(e)||l.exists((t=>Ue(e,t)&&o(t)))?i():n().toOptional().filter((t=>!Ue(t.element,e))).each(i)}))})),r(Uw,((e,t,n)=>{t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})})),Wi((t=>{const n=e();Du.setValue(t,n.getData())}))]},eI=(e,t)=>{const n=t.map((e=>e.footerButtons)).getOr([]),r=j(n,(e=>"start"===e.align)),s=(e,t)=>xw.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${e}`]},components:F(t,(e=>e.memento.asSpec()))});return[s("start",r.pass),s("end",r.fail)]},tI=(e,t,n)=>({dom:dL('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Al([zA.config({channel:`${DN}-${t}`,initialData:e,updateState:(e,t)=>{const r=F(t.buttons,(e=>{const t=cg(((e,t)=>iC(e,e.type,t))(e,n));return{name:e.name,align:e.align,memento:t}}));return L.some({lookupByName:t=>((e,t,n)=>$(t,(e=>e.name===n)).bind((t=>t.memento.getOpt(e))))(e,r,t),footerButtons:r})},renderComponents:eI})])}),nI=(e,t,n)=>RR.parts.footer(tI(e,t,n)),rI=(e,t)=>{if(e.getRoot().getSystem().isConnected()){const n=Hh.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return CS.getField(n,t).orThunk((()=>{const n=e.getFooter();return zA.getState(n).get().bind((e=>e.lookupByName(t)))}))}return L.none()},sI=(e,t,n)=>{const r=t=>{const n=e.getRoot();n.getSystem().isConnected()&&t(n)},s={getData:()=>{const t=e.getRoot(),r=t.getSystem().isConnected()?e.getFormWrapper():t;return{...Du.getValue(r),...ce(n,(e=>e.get()))}},setData:t=>{r((r=>{const i=s.getData(),o=ar(i,t),a=((e,t)=>{const n=e.getRoot();return zA.getState(n).get().map((e=>Ur(jr("data",e.dataValidator,t)))).getOr(t)})(e,o),l=e.getFormWrapper();Du.setValue(l,a),le(n,((e,t)=>{ve(o,t)&&e.set(o[t])}))}))},setEnabled:(t,n)=>{rI(e,t).each(n?em.enable:em.disable)},focus:t=>{rI(e,t).each(xf.focus)},block:e=>{if(!i(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r((t=>{Li(t,Hw,{message:e})}))},unblock:()=>{r((e=>{ki(e,jw)}))},showTab:t=>{r((n=>{const r=e.getBody();zA.getState(r).get().exists((e=>e.isTabPanel()))&&Hh.getCurrent(r).each((e=>{bN.showTab(e,t)}))}))},redial:n=>{r((r=>{const i=e.getId(),o=t(n);r.getSystem().broadcastOn([`${kN}-${i}`],o),r.getSystem().broadcastOn([`${LN}-${i}`],o.internalDialog),r.getSystem().broadcastOn([`${AN}-${i}`],o.internalDialog),r.getSystem().broadcastOn([`${DN}-${i}`],o.internalDialog),s.setData(o.initialData)}))},close:()=>{r((e=>{ki(e,Iw)}))}};return s},iI=(e,t,n)=>{const r=ro("dialog"),s=e.internalDialog,i=$N(s.title,r,n),o=((e,t,n)=>{const r=RN(e,t,L.none(),n,!1);return RR.parts.body(r)})({body:s.body,initialData:s.initialData},r,n),a=XN(s.buttons),l=KN(a),c=nI({buttons:a},r,n),d=QN((()=>f),GN((()=>m),n.shared.providers,t),n.shared.getSink),u=(e=>{switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}})(s.size),h={id:r,header:i,body:o,footer:L.some(c),extraClasses:u,extraBehaviours:[],extraStyles:{}},m=qN(h,e,d,n),p={getId:_(r),getRoot:_(m),getBody:()=>RR.getBody(m),getFooter:()=>RR.getFooter(m),getFormWrapper:()=>{const e=RR.getBody(m);return Hh.getCurrent(e).getOr(e)}},f=sI(p,t.redial,l);return{dialog:m,instanceApi:f}},oI=(e,t,n,r)=>{const s=ro("dialog"),i=ro("dialog-label"),o=ro("dialog-content"),a=e.internalDialog,l=cg(((e,t,n,r)=>xw.sketch({dom:dL('<div class="tox-dialog__header"></div>'),components:[YN(e,t,L.some(n),r),VN(),UN(r)],containerBehaviours:Al([vR.config({mode:"mouse",blockerClass:"blocker",getTarget:e=>ya(e,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:a.title,draggable:!0},s,i,n.shared.providers)),c=cg(((e,t,n,r,s)=>RN(e,t,L.some(n),r,s))({body:a.body,initialData:a.initialData},s,o,n,r)),d=XN(a.buttons),u=KN(d),h=cg(((e,t,n)=>tI(e,t,n))({buttons:d},s,n)),m=QN((()=>f),{onBlock:e=>{cL.block(p,((t,r)=>WN(e.message,r,n.shared.providers)))},onUnblock:()=>{cL.unblock(p)},onClose:()=>t.closeWindow()},n.shared.getSink),p=ca({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog","aria-labelledby":i,"aria-describedby":o}},eventOrder:{[oi()]:[zA.name(),Il.name()],[ai()]:["execute-on-form"],[yi()]:["reflecting","execute-on-form"]},behaviours:Al([af.config({mode:"cyclic",onEscape:e=>(ki(e,Iw),L.some(!0)),useTabstopAt:e=>!nT(e)&&("button"!==Oe(e)||"disabled"!==pt(e,"disabled"))}),zA.config({channel:`${kN}-${s}`,updateState:(e,t)=>L.some(t),initialData:e}),xf.config({}),vf("execute-on-form",m.concat([Vi(Vs(),((e,t)=>{af.focusIn(e)}))])),cL.config({getRoot:()=>L.some(p)}),gf.config({}),VS({})]),components:[l.asSpec(),c.asSpec(),h.asSpec()]}),f=sI({getId:_(s),getRoot:_(p),getFooter:()=>h.get(p),getBody:()=>c.get(p),getFormWrapper:()=>{const e=c.get(p);return Hh.getCurrent(e).getOr(e)}},t.redial,u);return{dialog:p,instanceApi:f}};var aI=tinymce.util.Tools.resolve("tinymce.util.URI");const lI=["insertContent","setContent","execCommand","close","block","unblock"],cI=e=>o(e)&&-1!==lI.indexOf(e.mceAction),dI=(e,t,n,r)=>{const s=ro("dialog"),a=$N(e.title,s,r),l=(e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[QS({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Al([Lw.config({}),xf.config({})])})]}],behaviours:Al([af.config({mode:"acyclic",useTabstopAt:M(nT)})])};return RR.parts.body(t)})(e),c=e.buttons.bind((e=>0===e.length?L.none():L.some(nI({buttons:e},s,r)))),u=ZN((()=>_),GN((()=>y),r.shared.providers,t)),h={...e.height.fold((()=>({})),(e=>({height:e+"px","max-height":e+"px"}))),...e.width.fold((()=>({})),(e=>({width:e+"px","max-width":e+"px"})))},m=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],p=new aI(e.url,{base_uri:new aI(window.location.href)}),f=`${p.protocol}://${p.host}${p.port?":"+p.port:""}`,g=ic(),v=[vf("messages",[$i((()=>{const t=lc(De.fromDom(window),"message",(t=>{if(p.isSameOrigin(new aI(t.raw.origin))){const r=t.raw.data;cI(r)?((e,t,n)=>{switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":const r=!!d(n.ui)&&n.ui;e.execCommand(n.cmd,r,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock()}})(n,_,r):(e=>!cI(e)&&o(e)&&ve(e,"mceAction"))(r)&&e.onMessage(_,r)}}));g.set(t)})),Wi(g.clear)]),Il.config({channels:{[ON]:{onReceive:(e,t)=>{va(e.element,"iframe").each((e=>{e.dom.contentWindow.postMessage(t,f)}))}}}})],y=qN({id:s,header:a,body:l,footer:c,extraClasses:m,extraBehaviours:v,extraStyles:h},e,u,r),_=(e=>{const t=t=>{e.getSystem().isConnected()&&t(e)};return{block:e=>{if(!i(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t((t=>{Li(t,Hw,{message:e})}))},unblock:()=>{t((e=>{ki(e,jw)}))},close:()=>{t((e=>{ki(e,Iw)}))},sendMessage:e=>{t((t=>{t.getSystem().broadcastOn([ON],e)}))}}})(y);return{dialog:y,instanceApi:_}},uI=(e,t,n)=>t&&n?[]:[fk.config({contextual:{lazyContext:()=>L.some(Bn(De.fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],hI=e=>{const t=e.backstage,n=e.editor,r=wv(n),s=(e=>{const t=e.backstage.shared;return{open:(n,r)=>{const s=()=>{RR.hide(l),r()},i=cg(iC({name:"close-alert",text:"OK",primary:!0,buttonType:L.some("primary"),align:"end",enabled:!0,icon:L.none()},"cancel",e.backstage)),o=zN(),a=IN(s,t.providers),l=ca(jN({lazySink:()=>t.getSink(),header:NN(o,a),body:BN(n,t.providers),footer:L.some(FN(HN([],[i.asSpec()]))),onEscape:s,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[zi(zw,s)],eventOrder:{}}));RR.show(l);const c=i.get(l);xf.focus(c)}}})(e),i=(e=>{const t=e.backstage.shared;return{open:(n,r)=>{const s=e=>{RR.hide(c),r(e)},i=cg(iC({name:"yes",text:"Yes",primary:!0,buttonType:L.some("primary"),align:"end",enabled:!0,icon:L.none()},"submit",e.backstage)),o=iC({name:"no",text:"No",primary:!1,buttonType:L.some("secondary"),align:"end",enabled:!0,icon:L.none()},"cancel",e.backstage),a=zN(),l=IN((()=>s(!1)),t.providers),c=ca(jN({lazySink:()=>t.getSink(),header:NN(a,l),body:BN(n,t.providers),footer:L.some(FN(HN([],[o,i.asSpec()]))),onEscape:()=>s(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[zi(zw,(()=>s(!1))),zi(Fw,(()=>s(!0)))],eventOrder:{}}));RR.show(c);const d=i.get(c);xf.focus(d)}}})(e),o=(e,r)=>aN.openUrl((e=>{const s=dI(e,{closeWindow:()=>{RR.hide(s.dialog),r(s.instanceApi)}},n,t);return RR.show(s.dialog),s.instanceApi}),e),a=(e,n)=>aN.open(((e,r,s)=>{const i=r,o=iI({dataValidator:s,initialData:i,internalDialog:e},{redial:aN.redial,closeWindow:()=>{RR.hide(o.dialog),n(o.instanceApi)}},t);return RR.show(o.dialog),o.instanceApi.setData(i),o.instanceApi}),e),l=(e,s,i,o)=>aN.open(((e,a,l)=>{const c=Ur(jr("data",l,a));const d=oc(),u=t.shared.header.isPositionedAtTop(),h=()=>d.on((e=>{og.reposition(e),fk.refresh(e)})),m=oI({dataValidator:l,initialData:c,internalDialog:e},{redial:aN.redial,closeWindow:()=>{d.on(og.hide),n.off("ResizeEditor",h),d.clear(),i(m.instanceApi)}},t,o),p=ca(og.sketch({lazySink:t.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...u?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Al([vf("window-manager-inline-events",[zi(bi(),((e,t)=>{ki(m.dialog,zw)}))]),...uI(n,r,u)]),isExtraPart:(e,t)=>(e=>cw(e,".tox-alert-dialog")||cw(e,".tox-confirm-dialog"))(t)}));return d.set(p),og.showWithin(p,da(m.dialog),{anchor:s},L.some(ct())),r&&u||(fk.refresh(p),n.on("ResizeEditor",h)),m.instanceApi.setData(c),af.focusIn(m.dialog),m.instanceApi}),e);return{open:(e,n,r)=>void 0!==n&&"toolbar"===n.inline?l(e,t.shared.anchors.inlineDialog(),r,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?l(e,t.shared.anchors.cursor(),r,n.ariaAttrs):a(e,r),openUrl:(e,t)=>o(e,t),alert:(e,t)=>{s.open(e,(()=>{t()}))},close:e=>{e.close()},confirm:(e,t)=>{i.open(e,(e=>{t(e)}))}}},mI=e=>{Lg(e),(e=>{const t=e.options.register;var n;t("color_map",{processor:e=>g(e,i)?{value:Tb(e),valid:!0}:{valid:!1,message:"Must be an array of strings."},default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_cols",{processor:"number",default:(n=Lb(e).length,Math.max(5,Math.ceil(Math.sqrt(n))))}),t("custom_colors",{processor:"boolean",default:!0})})(e),(e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:e=>!1===e?{value:[],valid:!0}:i(e)||g(e,i)?{value:oO(e),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(e)};k.add("silver",(e=>{mI(e);const{getUiMothership:t,backstage:n,renderUI:r}=LR(e);lw(e,n.shared);const s=hI({editor:e,backstage:n});return{renderUI:r,getWindowManagerImpl:_(s),getNotificationManagerImpl:()=>((e,t,n)=>{const r=t.backstage.shared,s=()=>{const t=Bn(De.fromDom(e.getContentAreaContainer())),n=Hn(),r=tl(n.x,t.x,t.right),s=tl(n.y,t.y,t.bottom),i=Math.max(t.right,n.right),o=Math.max(t.bottom,n.bottom);return L.some(zn(r,s,i-r,o-s))};return{open:(t,i)=>{const o=()=>{i(),og.hide(l)},a=ca(wg.sketch({text:t.text,level:N(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:L.from(t.icon),closeButton:t.closeButton,onAction:o,iconProvider:r.providers.icons,translationProvider:r.providers.translate})),l=ca(og.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:r.getSink,fireDismissalEventInstead:{},...r.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));n.add(l),t.timeout>0&&ag.setEditorTimeout(e,(()=>{o()}),t.timeout);const c={close:o,reposition:()=>{const t=da(a),n={maxHeightFunction:wc()},i=e.notificationManager.getNotifications();if(i[0]===c){const e={...r.anchors.banner(),overrides:n};og.showWithinBounds(l,t,{anchor:e},s)}else P(i,c).each((e=>{const r=i[e-1].getEl(),o={type:"node",root:ct(),node:L.some(De.fromDom(r)),overrides:n,layouts:{onRtl:()=>[fl],onLtr:()=>[fl]}};og.showWithinBounds(l,t,{anchor:o},s)}))},text:e=>{wg.updateText(a,e)},settings:t,getEl:()=>a.element.dom,progressBar:{value:e=>{wg.updateProgress(a,e)}}};return c},close:e=>{e.close()},getArgs:e=>e.settings}})(e,{backstage:n},t())}}))}()},7376:e=>{!function(){"use strict";var t=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},n=function(e){return{eq:e}},r=n((function(e,t){return e===t})),s=function(e){return n((function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,s=0;s<r;s++)if(!e.eq(t[s],n[s]))return!1;return!0}))},i=function(e,t){return function(e,t){return n((function(n,r){return e.eq(t(n),t(r))}))}(s(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))},o=function(e){return n((function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!i(r).eq(s,o))return!1;for(var a=s.length,l=0;l<a;l++){var c=s[l];if(!e.eq(t[c],n[c]))return!1}return!0}))},a=n((function(e,n){if(e===n)return!0;var r=t(e);return r===t(n)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(r)?e===n:"array"===r?s(a).eq(e,n):"object"===r&&o(a).eq(e,n))}));const l=Object.getPrototypeOf,c=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},d=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&c(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,u=e=>t=>typeof t===e,h=e=>t=>e===t,m=(e,t)=>f(e)&&c(e,t,((e,t)=>l(e)===t)),p=d("string"),f=d("object"),g=e=>m(e,Object),v=d("array"),y=h(null),_=u("boolean"),b=h(void 0),w=e=>null==e,x=e=>!w(e),M=u("function"),S=u("number"),T=(e,t)=>{if(v(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},C=()=>{},E=(e,t)=>(...n)=>e(t.apply(null,n)),k=(e,t)=>n=>e(t(n)),L=e=>()=>e,A=e=>e,D=(e,t)=>e===t;function O(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const R=e=>t=>!e(t),P=e=>e(),N=e=>{e()},I=L(!1),z=L(!0);class B{constructor(e,t){this.tag=e,this.value=t}static some(e){return new B(!0,e)}static none(){return B.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?B.some(e(this.value)):B.none()}bind(e){return this.tag?e(this.value):B.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:B.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return x(e)?B.some(e):B.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}B.singletonNone=new B(!1);const F=Array.prototype.slice,H=Array.prototype.indexOf,j=Array.prototype.push,U=(e,t)=>H.call(e,t),Y=(e,t)=>U(e,t)>-1,V=(e,t)=>{for(let n=0,r=e.length;n<r;n++){if(t(e[n],n))return!0}return!1},$=(e,t)=>{const n=e.length,r=new Array(n);for(let s=0;s<n;s++){const n=e[s];r[s]=t(n,s)}return r},W=(e,t)=>{for(let n=0,r=e.length;n<r;n++){t(e[n],n)}},G=(e,t)=>{for(let n=e.length-1;n>=0;n--){t(e[n],n)}},q=(e,t)=>{const n=[],r=[];for(let s=0,i=e.length;s<i;s++){const i=e[s];(t(i,s)?n:r).push(i)}return{pass:n,fail:r}},X=(e,t)=>{const n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];t(s,r)&&n.push(s)}return n},K=(e,t,n)=>(G(e,((e,r)=>{n=t(n,e,r)})),n),J=(e,t,n)=>(W(e,((e,r)=>{n=t(n,e,r)})),n),Z=(e,t,n)=>{for(let r=0,s=e.length;r<s;r++){const s=e[r];if(t(s,r))return B.some(s);if(n(s,r))break}return B.none()},Q=(e,t)=>Z(e,t,I),ee=(e,t)=>{for(let n=0,r=e.length;n<r;n++){if(t(e[n],n))return B.some(n)}return B.none()},te=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!v(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);j.apply(t,e[n])}return t},ne=(e,t)=>te($(e,t)),re=(e,t)=>{for(let n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},se=e=>{const t=F.call(e,0);return t.reverse(),t},ie=(e,t)=>X(e,(e=>!Y(t,e))),oe=(e,t)=>{const n={};for(let r=0,s=e.length;r<s;r++){const s=e[r];n[String(s)]=t(s,r)}return n},ae=(e,t)=>{const n=F.call(e,0);return n.sort(t),n},le=(e,t)=>t>=0&&t<e.length?B.some(e[t]):B.none(),ce=e=>le(e,0),de=e=>le(e,e.length-1),ue=M(Array.from)?Array.from:e=>F.call(e),he=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return B.none()},me=Object.keys,pe=Object.hasOwnProperty,fe=(e,t)=>{const n=me(e);for(let r=0,s=n.length;r<s;r++){const s=n[r];t(e[s],s)}},ge=(e,t)=>ve(e,((e,n)=>({k:n,v:t(e,n)}))),ve=(e,t)=>{const n={};return fe(e,((e,r)=>{const s=t(e,r);n[s.k]=s.v})),n},ye=e=>(t,n)=>{e[n]=t},_e=(e,t,n,r)=>(fe(e,((e,s)=>{(t(e,s)?n:r)(e,s)})),{}),be=(e,t)=>{const n={};return _e(e,t,ye(n),C),n},we=(e,t)=>{const n=[];return fe(e,((e,r)=>{n.push(t(e,r))})),n},xe=e=>we(e,A),Me=(e,t)=>Se(e,t)?B.from(e[t]):B.none(),Se=(e,t)=>pe.call(e,t),Te=(e,t)=>Se(e,t)&&void 0!==e[t]&&null!==e[t],Ce=e=>{const t={};return W(e,(e=>{t[e]={}})),me(t)},Ee=Array.isArray,ke=(e,t,n)=>{let r,s;if(!e)return!1;if(n=n||e,void 0!==e.length){for(r=0,s=e.length;r<s;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(r in e)if(Se(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},Le=(e,t)=>{const n=[];return ke(e,((r,s)=>{n.push(t(r,s,e))})),n},Ae=(e,t)=>{const n=[];return ke(e,((r,s)=>{t&&!t(r,s,e)||n.push(r)})),n},De=(e,t)=>{if(e)for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},Oe=(e,t,n,r)=>{let s=b(n)?e[0]:n;for(let n=0;n<e.length;n++)s=t.call(r,s,e[n],n);return s},Re=(e,t,n)=>{let r,s;for(r=0,s=e.length;r<s;r++)if(t.call(n,e[r],r,e))return r;return-1},Pe=e=>e[e.length-1],Ne=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},Ie=()=>ze(0,0),ze=(e,t)=>({major:e,minor:t}),Be={nu:ze,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Ie():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];if(r.test(t))return r}})(e,t);if(!n)return{major:0,minor:0};const r=e=>Number(t.replace(n,"$"+e));return ze(r(1),r(2))})(e,n)},unknown:Ie},Fe=(e,t)=>{const n=String(t).toLowerCase();return Q(e,(e=>e.search(n)))},He=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,je=(e,t)=>-1!==e.indexOf(t),Ue=(e,t)=>He(e,t,0),Ye=(e,t)=>He(e,t,e.length-t.length),Ve=e=>t=>t.replace(e,""),$e=Ve(/^\s+|\s+$/g),We=Ve(/^\s+/g),Ge=Ve(/\s+$/g),qe=e=>e.length>0,Xe=e=>!qe(e),Ke=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?B.none():B.some(n)},Je=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ze=e=>t=>je(t,e),Qe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>je(e,"edge/")&&je(e,"chrome")&&je(e,"safari")&&je(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Je],search:e=>je(e,"chrome")&&!je(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>je(e,"msie")||je(e,"trident")},{name:"Opera",versionRegexes:[Je,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ze("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ze("firefox")},{name:"Safari",versionRegexes:[Je,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(je(e,"safari")||je(e,"mobile/"))&&je(e,"applewebkit")}],et=[{name:"Windows",search:Ze("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>je(e,"iphone")||je(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ze("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ze("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ze("linux"),versionRegexes:[]},{name:"Solaris",search:Ze("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ze("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ze("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tt={browsers:L(Qe),oses:L(et)},nt="Edge",rt="Chromium",st="Opera",it="Firefox",ot="Safari",at=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(nt),isChromium:r(rt),isIE:r("IE"),isOpera:r(st),isFirefox:r(it),isSafari:r(ot)}},lt={unknown:()=>at({current:void 0,version:Be.unknown()}),nu:at,edge:L(nt),chromium:L(rt),ie:L("IE"),opera:L(st),firefox:L(it),safari:L(ot)},ct="Windows",dt="Android",ut="Linux",ht="macOS",mt="Solaris",pt="FreeBSD",ft="ChromeOS",gt=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(ct),isiOS:r("iOS"),isAndroid:r(dt),isMacOS:r(ht),isLinux:r(ut),isSolaris:r(mt),isFreeBSD:r(pt),isChromeOS:r(ft)}},vt={unknown:()=>gt({current:void 0,version:Be.unknown()}),nu:gt,windows:L(ct),ios:L("iOS"),android:L(dt),linux:L(ut),macos:L(ht),solaris:L(mt),freebsd:L(pt),chromeos:L(ft)},yt=(e,t,n)=>{const r=tt.browsers(),s=tt.oses(),i=t.bind((e=>((e,t)=>he(t.brands,(t=>{const n=t.brand.toLowerCase();return Q(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Be.nu(parseInt(t.version,10),0)})))})))(r,e))).orThunk((()=>((e,t)=>Fe(e,t).map((e=>{const n=Be.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e))).fold(lt.unknown,lt.nu),o=((e,t)=>Fe(e,t).map((e=>{const n=Be.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(s,e).fold(vt.unknown,vt.nu),a=((e,t,n,r)=>{const s=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!s,o=e.isiOS()||e.isAndroid(),a=o||r("(pointer:coarse)"),l=s||!i&&o&&r("(min-device-width:768px)"),c=i||o&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:L(s),isiPhone:L(i),isTablet:L(l),isPhone:L(c),isTouch:L(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:L(d),isDesktop:L(u)}})(o,i,e,n);return{browser:i,os:o,deviceType:a}},_t=e=>window.matchMedia(e).matches;let bt=Ne((()=>yt(navigator.userAgent,B.from(navigator.userAgentData),_t)));const wt=()=>bt(),xt=navigator.userAgent,Mt=wt(),St=Mt.browser,Tt=Mt.os,Ct=Mt.deviceType,Et=-1!==xt.indexOf("Windows Phone"),kt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:St.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!St.isIE(),windowsPhone:Et,browser:{current:St.current,version:St.version,isChromium:St.isChromium,isEdge:St.isEdge,isFirefox:St.isFirefox,isIE:St.isIE,isOpera:St.isOpera,isSafari:St.isSafari},os:{current:Tt.current,version:Tt.version,isAndroid:Tt.isAndroid,isChromeOS:Tt.isChromeOS,isFreeBSD:Tt.isFreeBSD,isiOS:Tt.isiOS,isLinux:Tt.isLinux,isMacOS:Tt.isMacOS,isSolaris:Tt.isSolaris,isWindows:Tt.isWindows},deviceType:{isDesktop:Ct.isDesktop,isiPad:Ct.isiPad,isiPhone:Ct.isiPhone,isPhone:Ct.isPhone,isTablet:Ct.isTablet,isTouch:Ct.isTouch,isWebView:Ct.isWebView}},Lt=/^\s*|\s*$/g,At=e=>null==e?"":(""+e).replace(Lt,""),Dt=(e,t)=>t?!("array"!==t||!Ee(e))||typeof e===t:void 0!==e,Ot=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),ke(e,((e,s)=>{if(!1===t.call(r,e,s,n))return!1;Ot(e,t,n,r)})))},Rt={trim:At,isArray:Ee,is:Dt,toArray:e=>{if(Ee(e))return e;{const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},makeMap:(e,t,n)=>{let r;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:ke,map:Le,grep:Ae,inArray:De,hasOwn:Se,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if(Se(r,t)){const n=r[t];void 0!==n&&(e[t]=n)}}return e},walk:Ot,resolve:(e,t)=>{let n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:(e,t)=>!e||Dt(e,"array")?e:Le(e.split(t||","),At),_addCacheSuffix:e=>{const t=kt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Pt=(e,t,n=D)=>e.exists((e=>n(e,t))),Nt=(e,t,n)=>e.isSome()&&t.isSome()?B.some(n(e.getOrDie(),t.getOrDie())):B.none(),It=(e,t)=>e?B.some(t):B.none();"undefined"!=typeof window?window:Function("return this;")();const zt=e=>e.dom.nodeName.toLowerCase(),Bt=e=>e.dom.nodeType,Ft=e=>t=>Bt(t)===e,Ht=Ft(1),jt=Ft(3),Ut=Ft(9),Yt=Ft(11),Vt=(e,t,n)=>{if(!(p(n)||_(n)||S(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},$t=(e,t,n)=>{Vt(e.dom,t,n)},Wt=(e,t)=>{const n=e.dom;fe(t,((e,t)=>{Vt(n,t,e)}))},Gt=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},qt=(e,t)=>B.from(Gt(e,t)),Xt=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Kt=(e,t)=>{e.dom.removeAttribute(t)},Jt=e=>J(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Zt=(e,t)=>{const n=Gt(e,t);return void 0===n||""===n?[]:n.split(" ")},Qt=e=>void 0!==e.dom.classList,en=e=>Zt(e,"class"),tn=(e,t)=>((e,t,n)=>{const r=Zt(e,t).concat([n]);return $t(e,t,r.join(" ")),!0})(e,"class",t),nn=(e,t)=>((e,t,n)=>{const r=X(Zt(e,t),(e=>e!==n));return r.length>0?$t(e,t,r.join(" ")):Kt(e,t),!1})(e,"class",t),rn=(e,t)=>{Qt(e)?e.dom.classList.add(t):tn(e,t)},sn=e=>{0===(Qt(e)?e.dom.classList:en(e)).length&&Kt(e,"class")},on=(e,t)=>{if(Qt(e)){e.dom.classList.remove(t)}else nn(e,t);sn(e)},an=(e,t)=>{const n=Qt(e)?e.dom.classList.toggle(t):((e,t)=>Y(en(e),t)?nn(e,t):tn(e,t))(e,t);return sn(e),n},ln=(e,t)=>Qt(e)&&e.dom.classList.contains(t),cn=e=>void 0!==e.style&&M(e.style.getPropertyValue),dn=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},un={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return dn(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return dn(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return dn(n)},fromDom:dn,fromPoint:(e,t,n)=>B.from(e.dom.elementFromPoint(t,n)).map(dn)},hn=(e,t)=>{const n=[],r=e=>(n.push(e),t(e));let s=t(e);do{s=s.bind(r)}while(s.isSome());return n},mn=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},pn=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,fn=(e,t)=>e.dom===t.dom,gn=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},vn=e=>un.fromDom(e.dom.ownerDocument),yn=e=>Ut(e)?e:vn(e),_n=e=>un.fromDom(yn(e).dom.defaultView),bn=e=>B.from(e.dom.parentNode).map(un.fromDom),wn=e=>B.from(e.dom.previousSibling).map(un.fromDom),xn=e=>B.from(e.dom.nextSibling).map(un.fromDom),Mn=e=>se(hn(e,wn)),Sn=e=>hn(e,xn),Tn=e=>$(e.dom.childNodes,un.fromDom),Cn=(e,t)=>{const n=e.dom.childNodes;return B.from(n[t]).map(un.fromDom)},En=e=>Cn(e,0),kn=e=>Cn(e,e.dom.childNodes.length-1),Ln=e=>e.dom.childNodes.length,An=e=>Yt(e)&&x(e.dom.host),Dn=M(Element.prototype.attachShadow)&&M(Node.prototype.getRootNode),On=L(Dn),Rn=Dn?e=>un.fromDom(e.dom.getRootNode()):yn,Pn=e=>An(e)?e:(e=>{const t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return un.fromDom(t)})(yn(e)),Nn=e=>un.fromDom(e.dom.host),In=e=>{if(On()&&x(e.target)){const t=un.fromDom(e.target);if(Ht(t)&&zn(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return ce(t)}}return B.from(e.target)},zn=e=>x(e.dom.shadowRoot),Bn=e=>{const t=jt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(e=>{const t=Rn(e);return An(t)?B.some(t):B.none()})(un.fromDom(t)).fold((()=>n.body.contains(t)),k(Bn,Nn))},Fn=(e,t,n)=>{if(!p(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);cn(e)&&e.style.setProperty(t,n)},Hn=(e,t,n)=>{const r=e.dom;Fn(r,t,n)},jn=(e,t)=>{const n=e.dom;fe(t,((e,t)=>{Fn(n,t,e)}))},Un=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Bn(e)?r:Yn(n,t)},Yn=(e,t)=>cn(e)?e.style.getPropertyValue(t):"",Vn=(e,t)=>{const n=e.dom,r=Yn(n,t);return B.from(r).filter((e=>e.length>0))},$n=e=>{const t={},n=e.dom;if(cn(n))for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t[r]=n.style[r]}return t},Wn=(e,t)=>{((e,t)=>{cn(e)&&e.style.removeProperty(t)})(e.dom,t),Pt(qt(e,"style").map($e),"")&&Kt(e,"style")},Gn=(e,t)=>{bn(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},qn=(e,t)=>{xn(e).fold((()=>{bn(e).each((e=>{Kn(e,t)}))}),(e=>{Gn(e,t)}))},Xn=(e,t)=>{En(e).fold((()=>{Kn(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Kn=(e,t)=>{e.dom.appendChild(t.dom)},Jn=(e,t)=>{W(t,(t=>{Kn(e,t)}))},Zn=e=>{e.dom.textContent="",W(Tn(e),(e=>{Qn(e)}))},Qn=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},er=e=>{const t=Tn(e);var n,r;t.length>0&&(n=e,W(r=t,((e,t)=>{const s=0===t?n:r[t-1];qn(s,e)}))),Qn(e)},tr=e=>e.dom.innerHTML,nr=(e,t)=>{const n=vn(e).dom,r=un.fromDom(n.createDocumentFragment()),s=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Tn(un.fromDom(n))})(t,n);Jn(r,s),Zn(e),Kn(e,r)},rr=(e,t)=>n=>{e(n)&&t((e=>{const t=un.fromDom(In(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),s=E(r,n);return((e,t,n,r,s,i,o)=>({target:e,x:t,y:n,stop:r,prevent:s,kill:i,raw:o}))(t,e.clientX,e.clientY,n,r,s,e)})(n))},sr=(e,t,n,r)=>((e,t,n,r,s)=>{const i=rr(n,r);return e.dom.addEventListener(t,i,s),{unbind:O(ir,e,t,i,s)}})(e,t,n,r,!1),ir=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},or=(e,t)=>({left:e,top:t,translate:(n,r)=>or(e+n,t+r)}),ar=or,lr=(e,t)=>void 0!==e?e:void 0!==t?t:0,cr=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?ar(n.offsetLeft,n.offsetTop):Bn(e)?(e=>{const t=e.getBoundingClientRect();return ar(t.left,t.top)})(t):ar(0,0)},dr=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return ar(n,r)},ur=(e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},hr=(e,t)=>{wt().browser.isSafari()&&M(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},mr=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),pr=e=>{const t=void 0===e?window:e,n=t.document,r=dr(un.fromDom(n));return(e=>{const t=void 0===e?window:e;return wt().browser.isFirefox()?B.none():B.from(t.visualViewport)})(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,s=e.clientHeight;return mr(r.left,r.top,n,s)}),(e=>mr(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)))},fr=e=>t=>!!t&&t.nodeType===e,gr=e=>!!e&&!Object.getPrototypeOf(e),vr=fr(1),yr=e=>{const t=e.map((e=>e.toLowerCase()));return e=>{if(e&&e.nodeName){const n=e.nodeName.toLowerCase();return Y(t,n)}return!1}},_r=(e,t)=>{const n=t.toLowerCase().split(" ");return t=>{if(vr(t))for(let r=0;r<n.length;r++){const s=t.ownerDocument.defaultView.getComputedStyle(t,null);if((s?s.getPropertyValue(e):null)===n[r])return!0}return!1}},br=e=>t=>vr(t)&&t.hasAttribute(e),wr=e=>vr(e)&&e.hasAttribute("data-mce-bogus"),xr=e=>vr(e)&&"TABLE"===e.tagName,Mr=e=>t=>{if(vr(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},Sr=yr(["textarea","input"]),Tr=fr(3),Cr=fr(4),Er=fr(7),kr=fr(8),Lr=fr(9),Ar=fr(11),Dr=yr(["br"]),Or=yr(["img"]),Rr=Mr("true"),Pr=Mr("false"),Nr=yr(["td","th"]),Ir=yr(["video","audio","object","embed"]),zr=wt().browser,Br=e=>Q(e,Ht),Fr=(e,t)=>e.children&&Y(e.children,t),Hr=(e,t,n)=>{let r=0,s=0;const i=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Un(un.fromDom(e),"position")){const n=t.getBoundingClientRect();return r=n.left+(i.documentElement.scrollLeft||e.scrollLeft)-i.documentElement.clientLeft,s=n.top+(i.documentElement.scrollTop||e.scrollTop)-i.documentElement.clientTop,{x:r,y:s}}let o=t;for(;o&&o!==n&&o.nodeType&&!Fr(o,n);){const e=o;r+=e.offsetLeft||0,s+=e.offsetTop||0,o=e.offsetParent}for(o=t.parentNode;o&&o!==n&&o.nodeType&&!Fr(o,n);)r-=o.scrollLeft||0,s-=o.scrollTop||0,o=o.parentNode;s+=(e=>zr.isFirefox()&&"table"===zt(e)?Br(Tn(e)).filter((e=>"caption"===zt(e))).bind((e=>Br(Sn(e)).map((t=>{const n=t.dom.offsetTop,r=e.dom.offsetTop,s=e.dom.offsetHeight;return n<=r?-s:0})))).getOr(0):0)(un.fromDom(t))}return{x:r,y:s}};var jr=(e,t,n,r,s)=>e(n,r)?B.some(n):M(s)&&s(n)?B.none():t(n,r,s);const Ur=(e,t,n)=>{let r=e.dom;const s=M(n)?n:I;for(;r.parentNode;){r=r.parentNode;const e=un.fromDom(r);if(t(e))return B.some(e);if(s(e))break}return B.none()},Yr=(e,t,n)=>jr(((e,t)=>t(e)),Ur,e,t,n),Vr=(e,t)=>Q(e.dom.childNodes,(e=>t(un.fromDom(e)))).map(un.fromDom),$r=(e,t,n)=>Ur(e,(e=>mn(e,t)),n),Wr=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return pn(n)?B.none():B.from(n.querySelector(e)).map(un.fromDom)})(t,e),Gr=(e,t,n)=>jr(((e,t)=>mn(e,t)),$r,e,t,n),qr=(e,t={})=>{let n=0;const r={},s=un.fromDom(e),i=yn(s),o=t.maxLoadTime||5e3,a=a=>new Promise(((l,c)=>{let d;const u=Rt._addCacheSuffix(a),h=(e=>Me(r,e).getOrThunk((()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}))))(u);r[u]=h,h.count++;const m=(e,t)=>{W(e,N),h.status=t,h.passed=[],h.failed=[],d&&(d.onload=null,d.onerror=null,d=null)},p=()=>m(h.passed,2),f=()=>m(h.failed,3),g=()=>{var t,n;t=()=>{const t=e.styleSheets;let n=t.length;for(;n--;){const e=t[n].ownerNode;if(e&&e.id===d.id)return p(),!0}return!1},n=g,t()||(Date.now()-y<o?setTimeout(n):f())};if(l&&h.passed.push(l),c&&h.failed.push(c),1===h.status)return;if(2===h.status)return void p();if(3===h.status)return void f();h.status=1;const v=un.fromTag("link",i.dom);Wt(v,{rel:"stylesheet",type:"text/css",id:h.id});const y=Date.now();var _;t.contentCssCors&&$t(v,"crossOrigin","anonymous"),t.referrerPolicy&&$t(v,"referrerpolicy",t.referrerPolicy),d=v.dom,d.onload=g,d.onerror=f,_=v,Kn(Pn(s),_),$t(v,"href",u)})),l=e=>{const t=Rt._addCacheSuffix(e);Me(r,t).each((e=>{0===--e.count&&(delete r[t],(e=>{const t=Pn(s);Wr(t,"#"+e).each(Qn)})(e.id))}))};return{load:a,loadAll:e=>Promise.allSettled($(e,(e=>a(e).then(L(e))))).then((e=>{const t=q(e,(e=>"fulfilled"===e.status));return t.fail.length>0?Promise.reject($(t.fail,(e=>e.reason))):$(t.pass,(e=>e.value))})),unload:l,unloadAll:e=>{W(e,(e=>{l(e)}))},_setReferrerPolicy:e=>{t.referrerPolicy=e}}},Xr=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const r=Rn(t).dom;return B.from(e.get(r)).getOrThunk((()=>{const t=qr(r,n);return e.set(r,t),t}))}}})();class Kr{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node}findSibling(e,t,n,r){let s,i;if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){if(s=e[n],s)return s;for(i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(s=i[n],s)return s}}}findPreviousNode(e,t,n,r){let s,i,o;if(e){if(s=e[n],this.rootNode&&s===this.rootNode)return;if(s){if(!r)for(o=s[t];o;o=o[t])if(!o[t])return o;return s}if(i=e.parentNode,i&&i!==this.rootNode)return i}}}const Jr=e=>{let t;return n=>(t=t||oe(e,z),Se(t,zt(n)))},Zr=Jr(["h1","h2","h3","h4","h5","h6"]),Qr=Jr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),es=e=>Ht(e)&&!Qr(e),ts=e=>Ht(e)&&"br"===zt(e),ns=Jr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),rs=Jr(["ul","ol","dl"]),ss=Jr(["li","dd","dt"]),is=Jr(["thead","tbody","tfoot"]),os=Jr(["td","th"]),as=Jr(["pre","script","textarea","style"]),ls="\ufeff",cs=" ",ds=e=>e===ls,us=ls,hs=ds,ms=e=>e.replace(/\uFEFF/g,""),ps=vr,fs=Tr,gs=e=>(fs(e)&&(e=e.parentNode),ps(e)&&e.hasAttribute("data-mce-caret")),vs=e=>fs(e)&&hs(e.data),ys=e=>gs(e)||vs(e),_s=e=>e.firstChild!==e.lastChild||!Dr(e.firstChild),bs=e=>{const t=e.container();return!!Tr(t)&&(t.data.charAt(e.offset())===us||e.isAtStart()&&vs(t.previousSibling))},ws=e=>{const t=e.container();return!!Tr(t)&&(t.data.charAt(e.offset()-1)===us||e.isAtEnd()&&vs(t.nextSibling))},xs=(e,t,n)=>{const r=t.ownerDocument.createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild((()=>{const e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e})());const s=t.parentNode;return n?s.insertBefore(r,t):t.nextSibling?s.insertBefore(r,t.nextSibling):s.appendChild(r),r},Ms=e=>fs(e)&&e.data[0]===us,Ss=e=>fs(e)&&e.data[e.data.length-1]===us,Ts=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{const t=e.getElementsByTagName("br"),n=t[t.length-1];wr(n)&&n.parentNode.removeChild(n)})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Cs=e=>gs(e.startContainer),Es=Rr,ks=Pr,Ls=Dr,As=Tr,Ds=yr(["script","style","textarea"]),Os=yr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Rs=yr(["table"]),Ps=ys,Ns=e=>!Ps(e)&&(As(e)?!Ds(e.parentNode):Os(e)||Ls(e)||Rs(e)||Is(e)),Is=e=>!1===(e=>vr(e)&&"true"===e.getAttribute("unselectable"))(e)&&ks(e),zs=(e,t)=>Ns(e)&&((e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Is(e))return!1;if(Es(e))return!0}return!0})(e,t),Bs=/^[ \t\r\n]*$/,Fs=e=>Bs.test(e),Hs=e=>"\n"===e||"\r"===e,js=(e,t=4,n=!0,r=!0)=>{const s=((e,t)=>t<=0?"":new Array(t+1).join(e))(" ",t),i=e.replace(/\t/g,s),o=J(i,((e,t)=>(e=>-1!==" \f\t\v".indexOf(e))(t)||t===cs?e.pcIsSpace||""===e.str&&n||e.str.length===i.length-1&&r||((e,t)=>t<e.length&&t>=0&&Hs(e[t]))(i,e.str.length+1)?{pcIsSpace:!1,str:e.str+cs}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:Hs(t),str:e.str+t}),{pcIsSpace:!1,str:""});return o.str},Us=(e,t)=>{const n=un.fromDom(t),r=un.fromDom(e);return s=r,i="pre,code",o=O(fn,n),$r(s,i,o).isSome();var s,i,o},Ys=(e,t)=>Ns(e)&&!1===((e,t)=>Tr(e)&&Fs(e.data)&&!1===Us(e,t))(e,t)||(e=>vr(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||Vs(e),Vs=br("data-mce-bookmark"),$s=br("data-mce-bogus"),Ws=(Gs="data-mce-bogus",qs="all",e=>vr(e)&&e.getAttribute(Gs)===qs);var Gs,qs;const Xs=(e,t=!0)=>((e,t)=>{let n=0;if(Ys(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const s=new Kr(r,e);do{if(t){if(Ws(r)){r=s.next(!0);continue}if($s(r)){r=s.next();continue}}if(Dr(r))n++,r=s.next();else{if(Ys(r,e))return!1;r=s.next()}}while(r);return n<=1}})(e.dom,t),Ks=(e,t)=>x(e)&&(Ys(e,t)||es(un.fromDom(e))),Js=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),Zs=(e,t)=>Tr(e)&&e.data.length>0&&((e,t)=>{const n=new Kr(e,t).prev(!1),r=new Kr(e,t).next(!1),s=b(n)||Ks(n,t),i=b(r)||Ks(r,t);return s&&i})(e,t),Qs=(e,t,n)=>{const r=n||t;if(vr(t)&&Js(t))return t;const s=t.childNodes;for(let t=s.length-1;t>=0;t--)Qs(e,s[t],r);if(vr(t)){const e=t.childNodes;1===e.length&&Js(e[0])&&t.parentNode.insertBefore(e[0],t)}return(e=>Ar(e)||Lr(e))(t)||Ys(t,r)||(e=>!!vr(e)&&e.childNodes.length>0)(t)||Zs(t,r)||e.remove(t),t},ei=Rt.makeMap,ti=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ni=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ri=/[<>&\"\']/g,si=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ii={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},oi={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ai={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},li=(e,t)=>{let n,r,s;const i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),oi[r]||(s="&"+e[n+1]+";",i[r]=s,i[s]=r);return i}},ci=li("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),di=(e,t)=>e.replace(t?ti:ni,(e=>oi[e]||e)),ui=(e,t)=>e.replace(t?ti:ni,(e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":oi[e]||"&#"+e.charCodeAt(0)+";")),hi=(e,t,n)=>(n=n||ci,e.replace(t?ti:ni,(e=>oi[e]||n[e]||e))),mi={encodeRaw:di,encodeAllRaw:e=>(""+e).replace(ri,(e=>oi[e]||e)),encodeNumeric:ui,encodeNamed:hi,getEncodeFunc:(e,t)=>{const n=li(t)||ci,r=(e,t)=>e.replace(t?ti:ni,(e=>void 0!==oi[e]?oi[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";")),s=(e,t)=>hi(e,t,n),i=ei(e.replace(/\+/g,","));return i.named&&i.numeric?r:i.named?t?s:hi:i.numeric?ui:di},decode:e=>e.replace(si,((e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):ii[t]||String.fromCharCode(t):ai[e]||ci[e]||(e=>{const t=un.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e)))},pi={},fi={},gi=Rt.makeMap,vi=Rt.each,yi=Rt.extend,_i=Rt.explode,bi=Rt.inArray,wi=(e,t)=>(e=Rt.trim(e))?e.split(t||" "):[],xi=(e,t)=>{let n;return e&&(n={},"string"==typeof e&&(e={"*":e}),vi(e,((e,r)=>{n[r]=n[r.toUpperCase()]="map"===t?gi(e,/[, ]/):_i(e,/[, ]/)}))),n},Mi=e=>{var t;const n={},r={};let s=[];const i={},o={},a=(t,n,r)=>{let s=e[t];return s?s=gi(s,/[, ]/,gi(s.toUpperCase(),/[, ]/)):(s=pi[t],s||(s=gi(n," ",gi(n.toUpperCase()," ")),s=yi(s,r),pi[t]=s)),s},l=null!==(t=(e=e||{}).schema)&&void 0!==t?t:"html5",c=(e=>{const t={};let n,r,s,i,o,a;const l=(e,r="",s="")=>{const i=wi(s),o=wi(e);let a=o.length;for(;a--;){const e=wi([n,r].join(" "));t[o[a]]={attributes:oe(e,(()=>({}))),attributesOrder:e,children:oe(i,L(fi))}}},c=(e,n)=>{const r=wi(e),s=wi(n);let i=r.length;for(;i--;){const e=t[r[i]];for(let t=0,n=s.length;t<n;t++)e.attributes[s[t]]={},e.attributesOrder.push(s[t])}};return pi[e]?pi[e]:(n="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",s="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav",s+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(n+=" xml:lang",a="acronym applet basefont big font strike tt",s=[s,a].join(" "),vi(wi(a),(e=>{l(e,"",s)})),o="center dir isindex noframes",r=[r,o].join(" "),i=[r,s].join(" "),vi(wi(o),(e=>{l(e,"",i)}))),i=i||[r,s].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),l("address dt dd div caption","",i),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),l("blockquote","cite",i),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",i),l("dl","","dt dd"),l("a","href target rel media hreflang type",s),l("q","cite",s),l("ins del","cite datetime",i),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",i),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),l("param","name value"),l("map","name",[i,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",i),l("th","colspan rowspan headers scope abbr",i),l("form","accept-charset action autocomplete enctype method name novalidate target",i),l("fieldset","disabled form name",[i,"legend"].join(" ")),l("label","form for",s),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:s),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[i,"li"].join(" ")),l("noscript","",i),"html4"!==e&&(l("wbr"),l("ruby","",[s,"rt rp"].join(" ")),l("figcaption","",i),l("mark rt rp summary bdi","",s),l("canvas","width height",i),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[s,"option"].join(" ")),l("article section nav aside main header footer","",i),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[i,"figcaption"].join(" ")),l("time","datetime",s),l("dialog","open",i),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",s),l("progress","value max",s),l("meter","value min max low high optimum",s),l("details","open",[i,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),"html4"!==e&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("img","loading"),c("iframe","sandbox seamless allowfullscreen loading")),"html4"!==e&&W([t.video,t.audio],(e=>{delete e.children.audio,delete e.children.video})),vi(wi("a form meter progress dfn"),(e=>{t[e]&&delete t[e].children[e]})),delete t.caption.children.table,delete t.script,pi[e]=t,t)})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const d=xi(e.valid_styles),u=xi(e.invalid_styles,"map"),h=xi(e.valid_classes,"map"),m=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),p=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),f=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",y=a("non_empty_elements",v+" pre",f),_=a("move_caret_before_on_enter_elements",v+" table",f),b=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",b),x=a("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");vi("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(e=>{o[e]=new RegExp("</"+e+"[^>]*>","gi")}));const M=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),S=e=>{let t,r,i,o,a,l,c,d,u,h,m,p,f,g,v,y,_,b;const w=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,x=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,S=/[*?+]/;if(e){const T=wi(e,",");for(n["@"]&&(y=n["@"].attributes,_=n["@"].attributesOrder),t=0,r=T.length;t<r;t++)if(a=w.exec(T[t]),a){if(g=a[1],u=a[2],v=a[3],d=a[5],p={},f=[],l={attributes:p,attributesOrder:f},"#"===g&&(l.paddEmpty=!0),"-"===g&&(l.removeEmpty=!0),"!"===a[4]&&(l.removeEmptyAttrs=!0),y&&(fe(y,((e,t)=>{p[t]=e})),f.push.apply(f,_)),d)for(d=wi(d,"|"),i=0,o=d.length;i<o;i++)if(a=x.exec(d[i]),a){if(c={},m=a[1],h=a[2].replace(/[\\:]:/g,":"),g=a[3],b=a[4],"!"===m&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(h),c.required=!0),"-"===m){delete p[h],f.splice(bi(f,h),1);continue}g&&("="===g&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:h,value:b}),c.defaultValue=b),"~"===g&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:h,value:b}),c.forcedValue=b),"<"===g&&(c.validValues=gi(b,"?"))),S.test(h)?(l.attributePatterns=l.attributePatterns||[],c.pattern=M(h),l.attributePatterns.push(c)):(p[h]||f.push(h),p[h]=c)}y||"@"!==u||(y=p,_=f),v&&(l.outputName=u,n[v]=l),S.test(u)?(l.pattern=M(u),s.push(l)):n[u]=l}}},T=e=>{s=[],W(me(n),(e=>{delete n[e]})),S(e),vi(c,((e,t)=>{r[t]=e.children}))},C=e=>{const t=/^(~)?(.+)$/;e&&(pi.text_block_elements=pi.block_elements=null,vi(wi(e,","),(e=>{const s=t.exec(e),o="~"===s[1],a=o?"span":"div",l=s[2];if(r[l]=r[a],i[l]=a,o||(w[l.toUpperCase()]={},w[l]={}),!n[l]){let e=n[a];e=yi({},e),delete e.removeEmptyAttrs,delete e.removeEmpty,n[l]=e}vi(r,((e,t)=>{e[a]&&(r[t]=e=yi({},r[t]),e[l]=e[a])}))})))},E=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;pi[l]=null,e&&vi(wi(e,","),(e=>{const n=t.exec(e);let s,i;n&&(i=n[1],s=i?r[n[2]]:r[n[2]]={"#comment":{}},s=r[n[2]],vi(wi(n[3],"|"),(e=>{"-"===i?delete s[e]:s[e]={}})))}))},k=e=>{let t,r=n[e];if(r)return r;for(t=s.length;t--;)if(r=s[t],r.pattern.test(e))return r};e.valid_elements?T(e.valid_elements):(vi(c,((e,t)=>{n[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},r[t]=e.children})),vi(wi("strong/b em/i"),(e=>{const t=wi(e,"/");n[t[1]].outputName=t[0]})),vi(wi("ol ul sub sup blockquote span font a table tbody strong em b i"),(e=>{n[e]&&(n[e].removeEmpty=!0)})),vi(wi("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),(e=>{n[e].paddEmpty=!0})),vi(wi("span"),(e=>{n[e].removeEmptyAttrs=!0}))),C(e.custom_elements),E(e.valid_children),S(e.extended_valid_elements),E("+ol[ul|ol],+ul[ul|ol]"),vi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((e,t)=>{n[t]&&(n[t].parentsRequired=wi(e))})),e.invalid_elements&&vi(_i(e.invalid_elements),(e=>{n[e]&&delete n[e]})),k("span")||S("span[!data-mce-type|*]");const A=L(d),D=L(u),O=L(h),R=L(g),P=L(w),N=L(b),I=L(x),z=L(Object.seal(f)),B=L(p),F=L(y),H=L(_),j=L(m),U=L(Object.seal(o)),Y=L(i);return{type:l,children:r,elements:n,getValidStyles:A,getValidClasses:O,getBlockElements:P,getInvalidStyles:D,getVoidElements:z,getTextBlockElements:N,getTextInlineElements:I,getBoolAttrs:R,getElementRule:k,getSelfClosingElements:B,getNonEmptyElements:F,getMoveCaretBeforeOnEnterElements:H,getWhitespaceElements:j,getSpecialElements:U,isValidChild:(e,t)=>{const n=r[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:(e,t)=>{let n,r;const s=k(e);if(s){if(!t)return!0;if(s.attributes[t])return!0;if(n=s.attributePatterns,n)for(r=n.length;r--;)if(n[r].pattern.test(t))return!0}return!1},getCustomElements:Y,addValidElements:S,setValidElements:T,addCustomElements:C,addValidChildren:E}},Si=(e,t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/;let i;const o={};let a,l;const c=ls;e=e||{},t&&(a=t.getValidStyles(),l=t.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(i=0;i<d.length;i++)o[d[i]]=c+i,o[c+i]=d[i];const u={parse:t=>{const a={};let l,d,h,m;const p=e.url_converter,f=e.url_converter_scope||u,g=(e,t,n)=>{const r=a[e+"-top"+t];if(!r)return;const s=a[e+"-right"+t];if(!s)return;const o=a[e+"-bottom"+t];if(!o)return;const l=a[e+"-left"+t];if(!l)return;const c=[r,s,o,l];for(i=c.length-1;i--&&c[i]===c[i+1];);i>-1&&n||(a[e+t]=-1===i?c[0]:c.join(" "),delete a[e+"-top"+t],delete a[e+"-right"+t],delete a[e+"-bottom"+t],delete a[e+"-left"+t])},v=e=>{let t,n=a[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return a[e]=n[0],!0}},y=e=>(m=!0,o[e]),_=(e,t)=>(m&&(e=e.replace(/\uFEFF[0-9]/g,(e=>o[e]))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),b=e=>String.fromCharCode(parseInt(e.slice(1),16)),w=e=>e.replace(/\\[0-9a-f]+/gi,b),x=(t,n,r,s,i,o)=>{if(i=i||o)return"'"+(i=_(i)).replace(/\'/g,"\\'")+"'";if(n=_(n||r||s),!e.allow_script_urls){const t=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return p&&(n=p.call(f,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,y).replace(/\"[^\"]+\"|\'[^\']+\'/g,(e=>e.replace(/[;:]/g,y)));l=r.exec(t);)if(r.lastIndex=l.index+l[0].length,d=l[1].replace(s,"").toLowerCase(),h=l[2].replace(s,""),d&&h){if(d=w(d),h=w(h),-1!==d.indexOf(c)||-1!==d.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===d||/expression\s*\(|\/\*|\*\//.test(h)))continue;"font-weight"===d&&"700"===h?h="bold":"color"!==d&&"background-color"!==d||(h=h.toLowerCase()),h=h.replace(n,x),a[d]=m?_(h,!0):h}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),M="border",T="border-style",C="border-color",v(S="border-width")&&v(T)&&v(C)&&(a[M]=a[S]+" "+a[T]+" "+a[C],delete a[S],delete a[T],delete a[C]),"medium none"===a.border&&delete a.border,"none"===a["border-image"]&&delete a["border-image"]}var M,S,T,C;return a},serialize:(e,t)=>{let n="";const r=t=>{let r;const s=a[t];if(s)for(let i=0,o=s.length;i<o;i++)t=s[i],r=e[t],r&&(n+=(n.length>0?" ":"")+t+": "+r+";")};return t&&a?(r("*"),r(t)):fe(e,((e,r)=>{!e||l&&!((e,t)=>{let n=l["*"];return!(n&&n[e]||(n=l[t],n&&n[e]))})(r,t)||(n+=(n.length>0?" ":"")+r+": "+e+";")})),n}};return u},Ti={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ci=e=>w(e.preventDefault)||(e=>e instanceof Event||M(e.initEvent))(e),Ei=(e,t)=>{const n=null!=t?t:{};for(const t in e)Se(Ti,t)||(n[t]=e[t]);return x(n.composedPath)&&(n.composedPath=()=>e.composedPath()),n},ki=(e,t,n,r)=>{var s;const i=Ei(t,r);return i.type=e,w(i.target)&&(i.target=null!==(s=i.srcElement)&&void 0!==s?s:n),Ci(t)&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=z,M(t.preventDefault)&&t.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=z,M(t.stopPropagation)&&t.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=z,i.stopPropagation()},(e=>e.isDefaultPrevented===z||e.isDefaultPrevented===I)(i)||(i.isDefaultPrevented=!0===i.defaultPrevented?z:I,i.isPropagationStopped=!0===i.cancelBubble?z:I,i.isImmediatePropagationStopped=I)),i},Li=/^(?:mouse|contextmenu)|click/,Ai=(e,t,n,r)=>{e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Di=(e,t,n,r)=>{e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Oi=(e,t)=>{const n=ki(e.type,e,document,t);if((e=>x(e)&&Li.test(e.type))(e)&&b(e.pageX)&&!b(e.clientX)){const t=n.target.ownerDocument||document,r=t.documentElement,s=t.body,i=n;i.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),i.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},Ri=(e,t,n)=>{const r=e.document,s={type:"ready"};if(n.domLoaded)return void t(s);const i=()=>{Di(e,"DOMContentLoaded",i),Di(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(s)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?i():Ai(e,"DOMContentLoaded",i),n.domLoaded||Ai(e,"load",i)};class Pi{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,n,r){const s=this;let i,o,a,l,c,d,u;const h=window,m=e=>{s.executeHandlers(Oi(e||h.event),i)};if(!e||3===e.nodeType||8===e.nodeType)return;e[s.expando]?i=e[s.expando]:(i=s.count++,e[s.expando]=i,s.events[i]={}),r=r||e;const p=t.split(" ");for(a=p.length;a--;)l=p[a],d=m,c=u=!1,"DOMContentLoaded"===l&&(l="ready"),s.domLoaded&&"ready"===l&&"complete"===e.readyState?n.call(r,Oi({type:l})):(s.hasMouseEnterLeave||(c=s.mouseEnterLeave[l],c&&(d=e=>{const t=e.currentTarget;let n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Oi(e||h.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s.executeHandlers(e,i))})),s.hasFocusIn||"focusin"!==l&&"focusout"!==l||(u=!0,c="focusin"===l?"focus":"blur",d=e=>{(e=Oi(e||h.event)).type="focus"===e.type?"focusin":"focusout",s.executeHandlers(e,i)}),o=s.events[i][l],o?"ready"===l&&s.domLoaded?n(Oi({type:l})):o.push({func:n,scope:r}):(s.events[i][l]=o=[{func:n,scope:r}],o.fakeName=c,o.capture=u,o.nativeHandler=d,"ready"===l?Ri(e,d,s):Ai(e,c||l,d,u)));return e=o=null,n}unbind(e,t,n){let r,s,i,o,a;if(!e||3===e.nodeType||8===e.nodeType)return this;const l=e[this.expando];if(l){if(a=this.events[l],t){const l=t.split(" ");for(s=l.length;s--;)if(o=l[s],r=a[o],r){if(n)for(i=r.length;i--;)if(r[i].func===n){const e=r.nativeHandler,t=r.fakeName,n=r.capture;r=r.slice(0,i).concat(r.slice(i+1)),r.nativeHandler=e,r.fakeName=t,r.capture=n,a[o]=r}n&&0!==r.length||(delete a[o],Di(e,r.fakeName||o,r.nativeHandler,r.capture))}}else fe(a,((t,n)=>{Di(e,t.fakeName||n,t.nativeHandler,t.capture)})),a={};for(o in a)if(Se(a,o))return this;delete this.events[l];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){let r;if(!e||3===e.nodeType||8===e.nodeType)return this;const s=Oi({type:t,target:e},n);do{r=e[this.expando],r&&this.executeHandlers(s,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!s.isPropagationStopped());return this}clean(e){let t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(this.unbind(e),n=e.getElementsByTagName("*"),t=n.length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){const n=this.events[t],r=n&&n[e.type];if(r)for(let t=0,n=r.length;t<n;t++){const n=r[t];if(n&&!1===n.func.call(n.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Pi.Event=new Pi;const Ni=Rt.each,Ii=Rt.grep,zi="data-mce-style",Bi=(e,t,n)=>{w(n)||""===n?Kt(e,t):$t(e,t,n)},Fi=(e,t)=>{const n=Gt(t,"style"),r=e.serialize(e.parse(n),zt(t));Bi(t,zi,r)},Hi=(e,t)=>{let n,r,s=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(s++,n=r);return s},ji=Rt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ui=e=>e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),Yi=(e,t={})=>{const n={},r=window,s={};let i=0;const o=Xr.forElement(un.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],l=t.schema?t.schema:Mi({}),c=Si({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new Pi:Pi.Event,u=l.getBlockElements(),h=t=>t&&e&&p(t)?e.getElementById(t):t,m=e=>{const t=h(e);return x(t)?un.fromDom(t):null},g=(e,t,n)=>{let r;const s=m(e);if(x(s)&&Ht(s)){const e=J[t];r=e&&e.get?e.get(s.dom,t):Gt(s,t)}return x(r)?r:null!=n?n:""},y=e=>{const t=h(e);return w(t)?[]:t.attributes},_=(e,n,r)=>{P(e,(e=>{if(vr(e)){const s=un.fromDom(e);""===r&&(r=null);const i=Gt(s,n),o=J[n];o&&o.set?o.set(s.dom,r,n):Bi(s,n,r),i!==r&&t.onSetAttrib&&t.onSetAttrib({attrElm:s,attrName:n,attrValue:r})}}))},b=()=>t.root_element||e.body,T=(t,n)=>Hr(e.body,h(t),n),E=(e,n,r)=>{const s=(e,t)=>p(e)?e:S(e)?Se(ji,t)?e+"":e+"px":ge(e,s),i=(e,t,n)=>{const r=Ui(t);w(n)||""===n?Wn(e,r):Hn(e,r,s(n,r))};P(e,(e=>{const s=un.fromDom(e);p(n)?i(s,n,r):fe(n,((e,t)=>{i(s,t,e)})),t.update_styles&&Fi(c,s)}))},k=(e,t,n)=>{const r=h(e);if(!w(r)&&vr(r))return n?Un(un.fromDom(r),Ui(t)):("float"===(t=t.replace(/-(\D)/g,((e,t)=>t.toUpperCase())))&&(t="cssFloat"),r.style?r.style[t]:void 0)},A=e=>{let t,n;const r=h(e);return t=k(r,"width"),n=k(r,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||r.offsetWidth||r.clientWidth,h:parseInt(n,10)||r.offsetHeight||r.clientHeight}},D=(e,t)=>{if(!e)return!1;const n=v(e)?e:[e];return V(n,(e=>mn(un.fromDom(e),t)))},O=(e,t,n,r)=>{const s=[];let i,o=h(e);for(r=void 0===r,n=n||("BODY"!==b().nodeName?b().parentNode:null),p(t)&&(i=t,t="*"===t?vr:e=>D(e,i));o&&!(o===n||w(o.nodeType)||Lr(o)||Ar(o));){if(!t||t(o)){if(!r)return[o];s.push(o)}o=o.parentNode}return r?s:null},R=(e,t,n)=>{let r=t;if(e)for(p(t)&&(r=e=>D(e,t)),e=e[n];e;e=e[n])if(M(r)&&r(e))return e;return null},P=function(e,t,n){const r=null!=n?n:this,s=p(e)?h(e):e;if(!s)return!1;if(v(s)&&(s.length||0===s.length)){const e=[];return Ni(s,((n,s)=>{n&&e.push(t.call(r,p(n)?h(n):n,s))})),e}return t.call(r,s)},N=(e,t)=>{P(e,(e=>{fe(t,((t,n)=>{_(e,n,t)}))}))},I=(e,t)=>{P(e,(e=>{const n=un.fromDom(e);nr(n,t)}))},z=(t,n,r,s,i)=>P(t,(t=>{const o=p(n)?e.createElement(n):n;return x(r)&&N(o,r),s&&(!p(s)&&s.nodeType?o.appendChild(s):p(s)&&I(o,s)),i?o:t.appendChild(o)})),B=(t,n,r)=>z(e.createElement(t),t,n,r,!0),F=mi.encodeAllRaw,H=(e,t)=>P(e,(e=>{const n=un.fromDom(e);return t&&W(Tn(n),(e=>{jt(e)&&0===e.dom.length?Qn(e):Gn(n,e)})),Qn(n),n.dom})),j=(e,t,n)=>{P(e,(e=>{if(vr(e)){const r=un.fromDom(e),s=t.split(" ");W(s,(e=>{if(x(n)){(n?rn:on)(r,e)}else an(r,e)}))}}))},U=(e,t,n)=>P(t,(t=>(v(t)&&(e=e.cloneNode(!0)),n&&Ni(Ii(t.childNodes),(t=>{e.appendChild(t)})),t.parentNode.replaceChild(e,t)))),Y=e=>{if(vr(e)){const t="a"===e.nodeName.toLowerCase()&&!g(e,"href")&&g(e,"id");if(g(e,"name")||g(e,"data-mce-bookmark")||t)return!0}return!1},$=()=>e.createRange(),G=(n,s,i,o)=>{if(v(n)){let e=n.length;const t=[];for(;e--;)t[e]=G(n[e],s,i,o);return t}return!t.collect||n!==e&&n!==r||a.push([n,s,i,o]),d.bind(n,s,i,o||K)},q=(t,n,s)=>{if(v(t)){let e=t.length;const r=[];for(;e--;)r[e]=q(t[e],n,s);return r}if(a.length>0&&(t===e||t===r)){let e=a.length;for(;e--;){const r=a[e];t!==r[0]||n&&n!==r[1]||s&&s!==r[2]||d.unbind(r[0],r[1],r[2])}}return d.unbind(t,n,s)},X=e=>{if(e&&vr(e)){const t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},K={doc:e,settings:t,win:r,files:s,stdMode:!0,boxModel:!0,styleSheetLoader:o,boundEvents:a,styles:c,schema:l,events:d,isBlock:e=>p(e)?Se(u,e):vr(e)&&Se(u,e.nodeName),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:b,getViewPort:e=>{const t=pr(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{const t=h(e),n=T(t),r=A(t);return{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:A,getParent:(e,t,n)=>{const r=O(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:O,get:h,getNext:(e,t)=>R(e,t,"nextSibling"),getPrev:(e,t)=>R(e,t,"previousSibling"),select:(n,r)=>{var s,i;const o=null!==(i=null!==(s=h(r))&&void 0!==s?s:t.root_element)&&void 0!==i?i:e;return ue(o.querySelectorAll(n))},is:D,add:z,create:B,createHTML:(e,t,n="")=>{let r,s="";for(r in s+="<"+e,t)Te(t,r)&&(s+=" "+r+'="'+F(t[r])+'"');return Xe(n)&&Se(l.getVoidElements(),e)?s+" />":s+">"+n+"</"+e+">"},createFragment:t=>{let n;const r=e.createElement("div"),s=e.createDocumentFragment();for(s.appendChild(r),t&&(r.innerHTML=t);n=r.firstChild;)s.appendChild(n);return s.removeChild(r),s},remove:H,setStyle:E,getStyle:k,setStyles:(e,t)=>{E(e,t)},removeAllAttribs:e=>P(e,(e=>{const t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))})),setAttrib:_,setAttribs:N,getAttrib:g,getPos:T,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:t=>{let r,s;if(K!==Yi.DOM&&e===document){if(n[t])return;n[t]=!0}s=e.getElementById("mceDefaultStyles"),s||(s=e.createElement("style"),s.id="mceDefaultStyles",s.type="text/css",r=e.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s)),s.styleSheet?s.styleSheet.cssText+=t:s.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),W(e.split(","),(e=>{s[e]=!0,o.load(e).catch(C)}))},addClass:(e,t)=>{j(e,t,!0)},removeClass:(e,t)=>{j(e,t,!1)},hasClass:(e,t)=>{const n=m(e),r=t.split(" ");return re(r,(e=>ln(n,e)))},toggleClass:j,show:e=>{P(e,(e=>Wn(un.fromDom(e),"display")))},hide:e=>{P(e,(e=>Hn(un.fromDom(e),"display","none")))},isHidden:e=>{const t=m(e);return Pt(Vn(t,"display"),"none")},uniqueId:e=>(e||"mce_")+i++,setHTML:I,getOuterHTML:e=>{const t=m(e);return vr(t.dom)?t.dom.outerHTML:(e=>{const t=un.fromTag("div"),n=un.fromDom(e.dom.cloneNode(!0));return Kn(t,n),tr(t)})(t)},setOuterHTML:(e,t)=>{P(e,(e=>{vr(e)&&(e.outerHTML=t)}))},decode:mi.decode,encode:F,insertAfter:(e,t)=>{const n=h(t);return P(e,(e=>{const t=n.parentNode,r=n.nextSibling;return r?t.insertBefore(e,r):t.appendChild(e),e}))},replace:U,rename:(e,t)=>{let n;return e.nodeName!==t.toUpperCase()&&(n=B(t),Ni(y(e),(t=>{_(n,t.nodeName,g(e,t.nodeName))})),U(n,e,!0)),n||e},findCommonAncestor:(e,t)=>{let n,r=e;for(;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:P,getAttribs:y,isEmpty:(e,t)=>{let n,r,s=0;if(Y(e))return!1;if(e=e.firstChild){const i=new Kr(e,e.parentNode),o=l?l.getWhitespaceElements():{};t=t||(l?l.getNonEmptyElements():null);do{if(n=e.nodeType,vr(e)){const n=e.getAttribute("data-mce-bogus");if(n){e=i.next("all"===n);continue}if(r=e.nodeName.toLowerCase(),t&&t[r]){if("br"===r){s++,e=i.next();continue}return!1}if(Y(e))return!1}if(8===n)return!1;if(3===n&&!Fs(e.nodeValue))return!1;if(3===n&&e.parentNode&&o[e.parentNode.nodeName]&&Fs(e.nodeValue))return!1;e=i.next()}while(e)}return s<=1},createRng:$,nodeIndex:Hi,split:(e,t,n)=>{let r,s,i,o=$();if(e&&t)return o.setStart(e.parentNode,Hi(e)),o.setEnd(t.parentNode,Hi(t)),r=o.extractContents(),o=$(),o.setStart(t.parentNode,Hi(t)+1),o.setEnd(e.parentNode,Hi(e)+1),s=o.extractContents(),i=e.parentNode,i.insertBefore(Qs(K,r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(Qs(K,s),e),H(e),n||t},bind:G,unbind:q,fire:(e,t,n)=>d.dispatch(e,t,n),dispatch:(e,t,n)=>d.dispatch(e,t,n),getContentEditable:X,getContentEditableParent:e=>{const t=b();let n=null;for(;e&&e!==t&&(n=X(e),null===n);e=e.parentNode);return n},destroy:()=>{if(a.length>0){let e=a.length;for(;e--;){const t=a[e];d.unbind(t[0],t[1],t[2])}}fe(s,((e,t)=>{o.unload(t),delete s[t]}))},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},J=((e,t,n)=>{const r=t.keep_values,s={set:(e,r,s)=>{const i=un.fromDom(e);M(t.url_converter)&&x(r)&&(r=t.url_converter.call(t.url_converter_scope||n(),r,s,e[0])),Bi(i,"data-mce-"+s,r),Bi(i,s,r)},get:(e,t)=>{const n=un.fromDom(e);return Gt(n,"data-mce-"+t)||Gt(n,t)}},i={style:{set:(t,n)=>{const s=un.fromDom(t);f(n)?jn(s,n):(r&&Bi(s,zi,n),Kt(s,"style"),p(n)&&jn(s,e.parse(n)))},get:t=>{const n=un.fromDom(t),r=Gt(n,zi)||Gt(n,"style");return e.serialize(e.parse(r),zt(n))}}};return r&&(i.href=i.src=s),i})(c,t,L(K));return K};Yi.DOM=Yi(document),Yi.nodeIndex=Hi;const Vi=Yi.DOM;class $i{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise(((t,n)=>{const r=Vi;let s;const i=()=>{r.remove(o),s&&(s.onerror=s.onload=s=null)},o=r.uniqueId();s=document.createElement("script"),s.id=o,s.type="text/javascript",s.src=Rt._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{i(),t()},s.onerror=()=>{i(),n("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}))}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const t=this;t.queue.push(e);return void 0===t.states[e]&&(t.states[e]=0),new Promise(((n,r)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:r})}))}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const t=this,n=(e,n)=>{Me(t.scriptLoadedCallbacks,n).each((t=>{W(t,(t=>t[e](n)))})),delete t.scriptLoadedCallbacks[n]},r=e=>{const t=X(e,(e=>"rejected"===e.status));return t.length>0?Promise.reject(ne(t,(({reason:e})=>v(e)?e:[e]))):Promise.resolve()},s=e=>Promise.allSettled($(e,(e=>2===t.states[e]?(n("resolve",e),Promise.resolve()):3===t.states[e]?(n("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then((()=>{t.states[e]=2,n("resolve",e);const i=t.queue;if(i.length>0)return t.queue=[],s(i).then(r)}),(()=>(t.states[e]=3,n("reject",e),Promise.reject(e)))))))),i=e=>(t.loading=!0,s(e).then((e=>{t.loading=!1;const n=t.queueLoadedCallbacks.shift();return B.from(n).each(N),r(e)}))),o=Ce(e);return t.loading?new Promise(((e,n)=>{t.queueLoadedCallbacks.push((()=>i(o).then(e,n)))})):i(o)}}$i.ScriptLoader=new $i;const Wi=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Gi={},qi=Wi("en"),Xi=()=>Me(Gi,qi.get()),Ki={getData:()=>ge(Gi,(e=>({...e}))),setCode:e=>{e&&qi.set(e)},getCode:()=>qi.get(),add:(e,t)=>{let n=Gi[e];n||(Gi[e]=n={}),fe(t,((e,t)=>{n[t.toLowerCase()]=e}))},translate:e=>{const t=Xi().getOr({}),n=e=>M(e)?Object.prototype.toString.call(e):r(e)?"":""+e,r=e=>""===e||null==e,s=e=>{const r=n(e);return Me(t,r.toLowerCase()).map(n).getOr(r)},i=e=>e.replace(/{context:\w+}$/,"");if(r(e))return"";if(f(o=e)&&Se(o,"raw"))return n(e.raw);var o;if((e=>v(e)&&e.length>1)(e)){const t=e.slice(1);return i(s(e[0]).replace(/\{([0-9]+)\}/g,((e,r)=>Se(t,r)?n(t[r]):e)))}return i(s(e))},isRtl:()=>Xi().bind((e=>Me(e,"_dir"))).exists((e=>"rtl"===e)),hasCode:e=>Se(Gi,e)},Ji=()=>{const e=[],t={},n={},r=[],s=(e,t)=>{const n=X(r,(n=>n.name===e&&n.state===t));W(n,(e=>e.resolve()))},i=e=>Se(t,e),o=(e,n)=>{const r=Ki.getCode();!r||n&&-1===(","+(n||"")+",").indexOf(","+r+",")||$i.ScriptLoader.add(t[e]+"/langs/"+r+".js")},a=(e,t="added")=>"added"===t&&(e=>Se(n,e))(e)||"loaded"===t&&i(e)?Promise.resolve():new Promise((n=>{r.push({name:e,state:t,resolve:n})}));return{items:e,urls:t,lookup:n,get:e=>{if(n[e])return n[e].instance},requireLangPack:(e,t)=>{!1!==Ji.languageLoad&&(i(e)?o(e,t):a(e,"loaded").then((()=>o(e,t))))},add:(t,r)=>(e.push(r),n[t]={instance:r},s(t,"added"),r),remove:e=>{delete t[e],delete n[e]},createUrl:(e,t)=>p(t)?p(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,r)=>{if(t[e])return Promise.resolve();let i=p(r)?r:r.prefix+r.resource+r.suffix;0!==i.indexOf("/")&&-1===i.indexOf("://")&&(i=Ji.baseURL+"/"+i),t[e]=i.substring(0,i.lastIndexOf("/"));const o=()=>(s(e,"loaded"),Promise.resolve());return n[e]?o():$i.ScriptLoader.add(i).then(o)},waitFor:a}};Ji.languageLoad=!0,Ji.baseURL="",Ji.PluginManager=Ji(),Ji.ThemeManager=Ji(),Ji.ModelManager=Ji();const Zi=()=>{const e=(e=>{const t=Wi(B.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(B.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(B.some(e))}}})(C);return{...e,on:t=>e.get().each(t)}},Qi=(e,t)=>{let n=null;return{cancel:()=>{y(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{y(n)&&(n=setTimeout((()=>{n=null,e.apply(null,r)}),t))}}},eo=(e,t)=>{let n=null;const r=()=>{y(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...s)=>{r(),n=setTimeout((()=>{n=null,e.apply(null,s)}),t)}}},to=(e,t)=>{let n=[];return W(Tn(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(to(e,t))})),n},no=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return pn(n)?[]:$(n.querySelectorAll(e),un.fromDom)})(t,e),ro=L("mce-annotation"),so=L("data-mce-annotation"),io=L("data-mce-annotation-uid"),oo=L("data-mce-annotation-active"),ao=(e,t)=>{const n=e.selection.getRng(),r=un.fromDom(n.startContainer),s=un.fromDom(e.getBody()),i=t.fold((()=>"."+ro()),(e=>`[${so()}="${e}"]`)),o=Cn(r,n.startOffset).getOr(r),a=Gr(o,i,(e=>fn(e,s))),l=(e,t)=>Xt(e,t)?B.some(Gt(e,t)):B.none();return a.bind((t=>l(t,`${io()}`).bind((n=>l(t,`${so()}`).map((t=>{const r=lo(e,n);return{uid:n,name:t,elements:r}}))))))},lo=(e,t)=>{const n=un.fromDom(e.getBody());return no(n,`[${io()}="${t}"]`)},co=(e,t)=>{const n=un.fromDom(e.getBody()),r=no(n,`[${so()}="${t}"]`),s={};return W(r,(e=>{const t=Gt(e,io()),n=Me(s,t).getOr([]);s[t]=n.concat([e])})),s},uo=(e,t)=>{const n=Wi({}),r=()=>({listeners:[],previous:Zi()}),s=(e,t)=>{i(e,(e=>(t(e),e)))},i=(e,t)=>{const s=n.get(),i=t(Me(s,e).getOrThunk(r));s[e]=i,n.set(s)},o=(t,n)=>{W(lo(e,t),(e=>{n?$t(e,oo(),"true"):Kt(e,oo())}))},a=eo((()=>{const n=ae(t.getNames());W(n,(t=>{i(t,(n=>{const r=n.previous.get();return ao(e,B.some(t)).fold((()=>{r.each((e=>{(e=>{s(e,(t=>{W(t.listeners,(t=>t(!1,e)))}))})(t),n.previous.clear(),o(e,!1)}))}),(({uid:e,name:t,elements:i})=>{Pt(r,e)||(r.each((e=>o(e,!1))),((e,t,n)=>{s(e,(r=>{W(r.listeners,(r=>r(!0,e,{uid:t,nodes:$(n,(e=>e.dom))})))}))})(t,e,i),n.previous.set(e),o(e,!0))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);e.on("remove",(()=>{a.cancel()})),e.on("NodeChange",(()=>{a.throttle()}));return{addListener:(e,t)=>{i(e,(e=>({previous:e.previous,listeners:e.listeners.concat([t])})))}}},ho=(e,t)=>{e.serializer.addTempAttr(oo()),e.serializer.addNodeFilter("span",(e=>{W(e,(e=>{(e=>B.from(e.attr(so())).bind(t.lookup))(e).each((t=>{!1===t.persistent&&e.unwrap()}))}))}))};let mo=0;const po=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return mo++,e+"_"+n+mo+String(t)},fo=(e,t)=>un.fromDom(e.dom.cloneNode(t)),go=e=>fo(e,!1),vo=e=>fo(e,!0),yo=(e,t)=>{const n=((e,t)=>{const n=un.fromTag(t),r=Jt(e);return Wt(n,r),n})(e,t);qn(e,n);const r=Tn(e);return Jn(n,r),Qn(e),n},_o=(e,t,n=I)=>{const r=new Kr(e,t),s=e=>{let t;do{t=r[e]()}while(t&&!Tr(t)&&!n(t));return B.from(t).filter(Tr)};return{current:()=>B.from(r.current()).filter(Tr),next:()=>s("next"),prev:()=>s("prev"),prev2:()=>s("prev2")}},bo=(e,t)=>{const n=t||(t=>e.isBlock(t)||Dr(t)||Pr(t)),r=(e,t,n,s)=>{if(Tr(e)){const n=s(e,t,e.data);if(-1!==n)return B.some({container:e,offset:n})}return n().bind((e=>r(e.container,e.offset,n,s)))};return{backwards:(e,t,s,i)=>{const o=_o(e,i,n);return r(e,t,(()=>o.prev().map((e=>({container:e,offset:e.length})))),s).getOrNull()},forwards:(e,t,s,i)=>{const o=_o(e,i,n);return r(e,t,(()=>o.next().map((e=>({container:e,offset:0})))),s).getOrNull()}}},wo=Math.round,xo=e=>e?{left:wo(e.left),top:wo(e.top),bottom:wo(e.bottom),right:wo(e.right),width:wo(e.width),height:wo(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Mo=(e,t)=>(e=xo(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),So=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,To=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&So(t.top-e.bottom,e,t)},Co=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&So(t.bottom-e.top,e,t),Eo=(e,t,n)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),s=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-s)*(n-s))},ko=e=>{const t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Lo=(e,t)=>{if(vr(e)&&e.hasChildNodes()){const n=e.childNodes,r=((e,t,n)=>Math.min(Math.max(e,t),n))(t,0,n.length-1);return n[r]}return e},Ao=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Do=e=>"string"==typeof e&&e.charCodeAt(0)>=768&&Ao.test(e),Oo=vr,Ro=Ns,Po=_r("display","block table"),No=_r("float","left right"),Io=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Oo,Ro,R(No)),zo=R(_r("white-space","pre pre-line pre-wrap")),Bo=Tr,Fo=Dr,Ho=Yi.nodeIndex,jo=(e,t)=>t<0&&vr(e)&&e.hasChildNodes()?void 0:Lo(e,t),Uo=e=>"createRange"in e?e.createRange():Yi.DOM.createRng(),Yo=e=>e&&/[\r\n\t ]/.test(e),Vo=e=>!!e.setStart&&!!e.setEnd,$o=e=>{const t=e.startContainer,n=e.startOffset;if(Yo(e.toString())&&zo(t.parentNode)&&Tr(t)){const e=t.data;if(Yo(e[n-1])||Yo(e[n+1]))return!0}return!1},Wo=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Go=e=>{let t;const n=e.getClientRects();return t=n.length>0?xo(n[0]):xo(e.getBoundingClientRect()),!Vo(e)&&Fo(e)&&Wo(t)?(e=>{const t=e.ownerDocument,n=Uo(t),r=t.createTextNode(cs),s=e.parentNode;s.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1);const i=xo(n.getBoundingClientRect());return s.removeChild(r),i})(e):Wo(t)&&Vo(e)?(e=>{const t=e.startContainer,n=e.endContainer,r=e.startOffset,s=e.endOffset;if(t===n&&Tr(n)&&0===r&&1===s){const t=e.cloneRange();return t.setEndAfter(n),Go(t)}return null})(e):t},qo=(e,t)=>{const n=Mo(e,t);return n.width=1,n.right=n.left+1,n},Xo=e=>{const t=[],n=e=>{var n,r;0!==e.height&&(t.length>0&&(n=e,r=t[t.length-1],n.left===r.left&&n.top===r.top&&n.bottom===r.bottom&&n.right===r.right)||t.push(e))},r=(e,r)=>{const s=Uo(e.ownerDocument);if(r<e.data.length){if(Do(e.data[r]))return t;if(Do(e.data[r-1])&&(s.setStart(e,r),s.setEnd(e,r+1),!$o(s)))return n(qo(Go(s),!1)),t}r>0&&(s.setStart(e,r-1),s.setEnd(e,r),$o(s)||n(qo(Go(s),!1))),r<e.data.length&&(s.setStart(e,r),s.setEnd(e,r+1),$o(s)||n(qo(Go(s),!0)))},s=e.container(),i=e.offset();if(Bo(s))return r(s,i),t;if(Oo(s))if(e.isAtEnd()){const e=jo(s,i);Bo(e)&&r(e,e.data.length),Io(e)&&!Fo(e)&&n(qo(Go(e),!1))}else{const o=jo(s,i);if(Bo(o)&&r(o,0),Io(o)&&e.isAtEnd())return n(qo(Go(o),!1)),t;const a=jo(e.container(),e.offset()-1);Io(a)&&!Fo(a)&&(Po(a)||Po(o)||!Io(o))&&n(qo(Go(a),!1)),Io(o)&&n(qo(Go(o),!0))}return t},Ko=(e,t,n)=>{const r=()=>(n||(n=Xo(Ko(e,t))),n);return{container:L(e),offset:L(t),toRange:()=>{const n=Uo(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(Bo(e),0===t),isAtEnd:()=>Bo(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:n=>n&&e===n.container()&&t===n.offset(),getNode:n=>jo(e,n?t-1:t)}};Ko.fromRangeStart=e=>Ko(e.startContainer,e.startOffset),Ko.fromRangeEnd=e=>Ko(e.endContainer,e.endOffset),Ko.after=e=>Ko(e.parentNode,Ho(e)+1),Ko.before=e=>Ko(e.parentNode,Ho(e)),Ko.isAbove=(e,t)=>Nt(ce(t.getClientRects()),de(e.getClientRects()),To).getOr(!1),Ko.isBelow=(e,t)=>Nt(de(t.getClientRects()),ce(e.getClientRects()),Co).getOr(!1),Ko.isAtStart=e=>!!e&&e.isAtStart(),Ko.isAtEnd=e=>!!e&&e.isAtEnd(),Ko.isTextPosition=e=>!!e&&Tr(e.container()),Ko.isElementPosition=e=>!1===Ko.isTextPosition(e);const Jo=(e,t)=>{Tr(t)&&0===t.data.length&&e.remove(t)},Zo=(e,t,n)=>{Ar(n)?((e,t,n)=>{const r=B.from(n.firstChild),s=B.from(n.lastChild);t.insertNode(n),r.each((t=>Jo(e,t.previousSibling))),s.each((t=>Jo(e,t.nextSibling)))})(e,t,n):((e,t,n)=>{t.insertNode(n),Jo(e,n.previousSibling),Jo(e,n.nextSibling)})(e,t,n)},Qo=Tr,ea=wr,ta=Yi.nodeIndex,na=e=>{const t=e.parentNode;return ea(t)?na(t):t},ra=e=>e?Oe(e.childNodes,((e,t)=>(ea(t)&&"BR"!==t.nodeName?e=e.concat(ra(t)):e.push(t),e)),[]):[],sa=e=>t=>e===t,ia=e=>{let t;return t=Qo(e)?"text()":e.nodeName.toLowerCase(),t+"["+(e=>{let t,n;t=ra(na(e)),n=Re(t,sa(e),e),t=t.slice(0,n+1);const r=Oe(t,((e,n,r)=>(Qo(n)&&Qo(t[r-1])&&e++,e)),0);return t=Ae(t,yr([e.nodeName])),n=Re(t,sa(e),e),n-r})(e)+"]"},oa=(e,t)=>{let n,r,s,i,o,a=[];return n=t.container(),r=t.offset(),Qo(n)?s=((e,t)=>{for(;(e=e.previousSibling)&&Qo(e);)t+=e.data.length;return t})(n,r):(i=n.childNodes,r>=i.length?(s="after",r=i.length-1):s="before",n=i[r]),a.push(ia(n)),o=((e,t,n)=>{const r=[];for(t=t.parentNode;!(t===e||n&&n(t));t=t.parentNode)r.push(t);return r})(e,n),o=Ae(o,R(wr)),a=a.concat(Le(o,(e=>ia(e)))),a.reverse().join("/")+","+s},aa=(e,t)=>{let n;if(!t)return null;const r=t.split(","),s=r[0].split("/");n=r.length>1?r[1]:"before";const i=Oe(s,((e,t)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),((e,t,n)=>{let r=ra(e);return r=Ae(r,((e,t)=>!Qo(e)||!Qo(r[t-1]))),r=Ae(r,yr([t])),r[n]})(e,n[1],parseInt(n[2],10))):null}),e);return i?Qo(i)?((e,t)=>{let n,r=e,s=0;for(;Qo(r);){if(n=r.data.length,t>=s&&t<=s+n){e=r,t-=s;break}if(!Qo(r.nextSibling)){e=r,t=n;break}s+=n,r=r.nextSibling}return Qo(e)&&t>e.data.length&&(t=e.data.length),Ko(e,t)})(i,parseInt(n,10)):(n="after"===n?ta(i)+1:ta(i),Ko(i.parentNode,n)):null},la=Pr,ca=(e,t,n,r,s)=>{let i=r[s?"startContainer":"endContainer"],o=r[s?"startOffset":"endOffset"];const a=[];let l,c=0;const d=e.getRoot();for(Tr(i)?a.push(n?((e,t,n)=>{let r,s;for(s=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&Tr(r);r=r.previousSibling)s+=e(r.data).length;return s})(t,i,o):o):(l=i.childNodes,o>=l.length&&l.length&&(c=1,o=Math.max(0,l.length-1)),a.push(e.nodeIndex(l[o],n)+c));i&&i!==d;i=i.parentNode)a.push(e.nodeIndex(i,n));return a},da=(e,t,n)=>{let r=0;return Rt.each(e.select(t),(e=>{if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++})),r},ua=(e,t)=>{let n,r,s;const i=t?"start":"end";n=e[i+"Container"],r=e[i+"Offset"],vr(n)&&"TR"===n.nodeName&&(s=n.childNodes,n=s[Math.min(t?r:r-1,s.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))},ha=e=>(ua(e,!0),ua(e,!1),e),ma=(e,t)=>{let n;if(vr(e)&&(e=Lo(e,t),la(e)))return e;if(ys(e)){if(Tr(e)&&gs(e)&&(e=e.parentNode),n=e.previousSibling,la(n))return n;if(n=e.nextSibling,la(n))return n}},pa=(e,t,n)=>{const r=n.getNode();let s=r?r.nodeName:null;const i=n.getRng();if(la(r)||"IMG"===s)return{name:s,index:da(n.dom,s,r)};const o=(e=>ma(e.startContainer,e.startOffset)||ma(e.endContainer,e.endOffset))(i);return o?(s=o.tagName,{name:s,index:da(n.dom,s,o)}):((e,t,n,r)=>{const s=t.dom,i={};return i.start=ca(s,e,n,r,!0),t.isCollapsed()||(i.end=ca(s,e,n,r,!1)),Cs(r)&&(i.isFakeCaret=!0),i})(e,n,t,i)},fa=(e,t,n)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ga=(e,t)=>{const n=e.dom;let r=e.getRng();const s=n.uniqueId(),i=e.isCollapsed(),o=e.getNode(),a=o.nodeName;if("IMG"===a)return{name:a,index:da(n,a,o)};const l=ha(r.cloneRange());if(!i){l.collapse(!1);const e=fa(n,s+"_end",t);Zo(n,l,e)}r=ha(r),r.collapse(!0);const c=fa(n,s+"_start",t);return Zo(n,r,c),e.moveToBookmark({id:s,keep:!0}),{id:s}},va=(e,t,n)=>2===t?pa(ms,n,e):3===t?(e=>{const t=e.getRng();return{start:oa(e.dom.getRoot(),Ko.fromRangeStart(t)),end:oa(e.dom.getRoot(),Ko.fromRangeEnd(t))}})(e):t?(e=>({rng:e.getRng()}))(e):ga(e,!1),ya=O(pa,A,!0),_a=e=>{const t=t=>t(e),n=L(e),r=()=>s,s={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:z,isError:I,map:t=>wa.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>B.some(e)};return s},ba=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:I,isError:z,map:t,mapError:t=>wa.error(t(e)),bind:t,exists:I,forall:z,getOr:A,or:A,getOrThunk:P,orThunk:P,getOrDie:(r=String(e),()=>{throw new Error(r)}),each:C,toOptional:B.none};var r;return n},wa={value:_a,error:ba,fromOption:(e,t)=>e.fold((()=>ba(t)),_a)},xa=e=>{if(!v(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return W(e,((r,s)=>{const i=me(r);if(1!==i.length)throw new Error("one and only one name per case");const o=i[0],a=r[o];if(void 0!==n[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!v(a))throw new Error("case arguments must be an array");t.push(o),n[o]=(...n)=>{const r=n.length;if(r!==a.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+a.length+" ("+a+"), got "+r);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[s].apply(null,n)},match:e=>{const r=me(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!re(t,(e=>Y(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[o].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:o,params:n})}}}})),n};xa([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ma=e=>"inline-command"===e.type||"inline-format"===e.type,Sa=e=>"block-command"===e.type||"block-format"===e.type,Ta=e=>{const t=t=>wa.error({message:t,pattern:e}),n=(n,r,s)=>{if(void 0!==e.format){let s;if(v(e.format)){if(!re(e.format,p))return t(n+" pattern has non-string items in the `format` array");s=e.format}else{if(!p(e.format))return t(n+" pattern has non-string `format` parameter");s=[e.format]}return wa.value(r(s))}return void 0!==e.cmd?p(e.cmd)?wa.value(s(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!f(e))return t("Raw pattern is not an object");if(!p(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!p(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,s=e.end;return 0===s.length&&(s=r,r=""),n("Inline",(e=>({type:"inline-format",start:r,end:s,format:e})),((e,t)=>({type:"inline-command",start:r,end:s,cmd:e,value:t})))}return void 0!==e.replacement?p(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):wa.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",(t=>({type:"block-format",start:e.start,format:t[0]})),((t,n)=>({type:"block-command",start:e.start,cmd:t,value:n})))},Ca=e=>(e=>ae(e,((e,t)=>e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1)))(X(e,Sa)),Ea=e=>X(e,Ma),ka=e=>{const t=(e=>{const t=[],n=[];return W(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{n.push(e)}))})),{errors:t,values:n}})($(e,Ta));return W(t.errors,(e=>console.error(e.message,e.pattern))),t.values},La=wt().deviceType,Aa=La.isTouch(),Da=Yi.DOM,Oa=e=>m(e,RegExp),Ra=e=>t=>t.options.get(e),Pa=e=>p(e)||f(e),Na=(e,t="")=>n=>{const r=p(n);if(r){if(-1!==n.indexOf("=")){const s=(e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return J(t,((e,t)=>{const n=t.split("="),r=n[0],s=n.length>1?n[1]:r;return e[$e(r)]=$e(s),e}),{})})(n);return{value:Me(s,e.id).getOr(t),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},Ia=Ra("iframe_attrs"),za=Ra("doctype"),Ba=Ra("document_base_url"),Fa=Ra("body_id"),Ha=Ra("body_class"),ja=Ra("content_security_policy"),Ua=Ra("br_in_pre"),Ya=Ra("forced_root_block"),Va=Ra("forced_root_block_attrs"),$a=Ra("br_newline_selector"),Wa=Ra("no_newline_selector"),Ga=Ra("keep_styles"),qa=Ra("end_container_on_empty_block"),Xa=Ra("automatic_uploads"),Ka=Ra("images_reuse_filename"),Ja=Ra("images_replace_blob_uris"),Za=Ra("icons"),Qa=Ra("icons_url"),el=Ra("images_upload_url"),tl=Ra("images_upload_base_path"),nl=Ra("images_upload_credentials"),rl=Ra("images_upload_handler"),sl=Ra("content_css_cors"),il=Ra("referrer_policy"),ol=Ra("language"),al=Ra("language_url"),ll=Ra("indent_use_margin"),cl=Ra("indentation"),dl=Ra("content_css"),ul=Ra("content_style"),hl=Ra("font_css"),ml=Ra("directionality"),pl=Ra("inline_boundaries_selector"),fl=Ra("object_resizing"),gl=Ra("resize_img_proportional"),vl=Ra("placeholder"),yl=Ra("event_root"),_l=Ra("service_message"),bl=Ra("theme"),wl=Ra("theme_url"),xl=Ra("model"),Ml=Ra("model_url"),Sl=Ra("inline_boundaries"),Tl=Ra("formats"),Cl=Ra("preview_styles"),El=Ra("format_empty_lines"),kl=Ra("custom_ui_selector"),Ll=Ra("inline"),Al=Ra("hidden_input"),Dl=Ra("submit_patch"),Ol=Ra("add_form_submit_trigger"),Rl=Ra("add_unload_trigger"),Pl=Ra("custom_undo_redo_levels"),Nl=Ra("disable_nodechange"),Il=Ra("readonly"),zl=Ra("content_css_cors"),Bl=Ra("plugins"),Fl=Ra("external_plugins"),Hl=Ra("block_unsupported_drop"),jl=Ra("visual"),Ul=Ra("visual_table_class"),Yl=Ra("visual_anchor_class"),Vl=Ra("iframe_aria_text"),$l=Ra("setup"),Wl=Ra("init_instance_callback"),Gl=Ra("urlconverter_callback"),ql=Ra("auto_focus"),Xl=Ra("browser_spellcheck"),Kl=Ra("protect"),Jl=Ra("paste_block_drop"),Zl=Ra("paste_data_images"),Ql=Ra("paste_preprocess"),ec=Ra("paste_postprocess"),tc=Ra("paste_webkit_styles"),nc=Ra("paste_remove_styles_if_webkit"),rc=Ra("paste_merge_formats"),sc=Ra("smart_paste"),ic=Ra("paste_as_text"),oc=Ra("paste_tab_spaces"),ac=Ra("allow_html_data_urls"),lc=Ra("text_patterns"),cc=Ra("noneditable_class"),dc=Ra("editable_class"),uc=Ra("noneditable_regexp"),hc=e=>Rt.explode(e.options.get("images_file_types")),mc=Ra("table_tab_navigation"),pc=vr,fc=Tr,gc=e=>{const t=e.parentNode;t&&t.removeChild(e)},vc=e=>{const t=ms(e);return{count:e.length-t.length,text:t}},yc=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(us));)e.deleteData(t,1)},_c=(e,t)=>(Mc(e),t),bc=(e,t)=>{const n=t.container(),r=((e,t)=>{const n=U(e,t);return-1===n?B.none():B.some(n)})(ue(n.childNodes),e).map((e=>e<t.offset()?Ko(n,t.offset()-1):t)).getOr(t);return Mc(e),r},wc=(e,t)=>fc(e)&&t.container()===e?((e,t)=>{const n=vc(e.data.substr(0,t.offset())),r=vc(e.data.substr(t.offset()));return(n.text+r.text).length>0?(yc(e),Ko(e,t.offset()-n.count)):t})(e,t):_c(e,t),xc=(e,t)=>Ko.isTextPosition(t)?wc(e,t):((e,t)=>t.container()===e.parentNode?bc(e,t):_c(e,t))(e,t),Mc=e=>{pc(e)&&ys(e)&&(_s(e)?e.removeAttribute("data-mce-caret"):gc(e)),fc(e)&&(yc(e),0===e.data.length&&gc(e))},Sc=Pr,Tc=Ir,Cc=Nr,Ec=(e,t,n)=>{const r=Mo(t.getBoundingClientRect(),n);let s,i;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;s=e.scrollLeft||t.scrollLeft,i=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();s=e.scrollLeft-t.left,i=e.scrollTop-t.top}r.left+=s,r.right+=s,r.top+=i,r.bottom+=i,r.width=1;let o=t.offsetWidth-t.clientWidth;return o>0&&(n&&(o*=-1),r.left+=o,r.right+=o),r},kc=(e,t,n,r)=>{const s=Zi();let i,o;const a=Ya(e),l=e.dom,c=()=>{(e=>{const t=no(un.fromDom(e),"*[contentEditable=false],video,audio,embed,object");for(let e=0;e<t.length;e++){const n=t[e].dom;let r=n.previousSibling;if(Ss(r)){const e=r.data;1===e.length?r.parentNode.removeChild(r):r.deleteData(e.length-1,1)}r=n.nextSibling,Ms(r)&&(1===r.data.length?r.parentNode.removeChild(r):r.deleteData(0,1))}})(t),o&&(Mc(o),o=null),s.on((e=>{l.remove(e.caret),s.clear()})),i&&(clearInterval(i),i=void 0)},d=()=>{i=setInterval((()=>{s.on((e=>{r()?l.toggleClass(e.caret,"mce-visual-caret-hidden"):l.addClass(e.caret,"mce-visual-caret-hidden")}))}),500)};return{show:(e,r)=>{let i;if(c(),Cc(r))return null;if(!n(r))return o=((e,t)=>{const n=e.ownerDocument.createTextNode(us),r=e.parentNode;if(t){const t=e.previousSibling;if(fs(t)){if(ys(t))return t;if(Ss(t))return t.splitText(t.data.length-1)}r.insertBefore(n,e)}else{const t=e.nextSibling;if(fs(t)){if(ys(t))return t;if(Ms(t))return t.splitText(1),t}e.nextSibling?r.insertBefore(n,e.nextSibling):r.appendChild(n)}return n})(r,e),i=r.ownerDocument.createRange(),Ac(o.nextSibling)?(i.setStart(o,0),i.setEnd(o,0)):(i.setStart(o,1),i.setEnd(o,1)),i;{o=xs(a,r,e);const n=Ec(t,r,e);l.setStyle(o,"top",n.top);const c=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(c,{...n}),l.add(t,c),s.set({caret:c,element:r,before:e}),e&&l.addClass(c,"mce-visual-caret-before"),d(),i=r.ownerDocument.createRange(),i.setStart(o,0),i.setEnd(o,0)}return i},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{s.on((e=>{const n=Ec(t,e.element,e.before);l.setStyles(e.caret,{...n})}))},destroy:()=>clearInterval(i)}},Lc=()=>kt.browser.isFirefox(),Ac=e=>Sc(e)||Tc(e),Dc=e=>Ac(e)||xr(e)&&Lc(),Oc=Rr,Rc=Pr,Pc=Ir,Nc=_r("display","block table table-cell table-caption list-item"),Ic=ys,zc=gs,Bc=vr,Fc=Ns,Hc=e=>e>0,jc=e=>e<0,Uc=(e,t)=>{let n;for(;n=e(t);)if(!zc(n))return n;return null},Yc=(e,t,n,r,s)=>{const i=new Kr(e,r),o=Rc(e)||zc(e);if(jc(t)){if(o&&n(e=Uc(i.prev.bind(i),!0)))return e;for(;e=Uc(i.prev.bind(i),s);)if(n(e))return e}if(Hc(t)){if(o&&n(e=Uc(i.next.bind(i),!0)))return e;for(;e=Uc(i.next.bind(i),s);)if(n(e))return e}return null},Vc=(e,t)=>{for(;e&&e!==t;){if(Nc(e))return e;e=e.parentNode}return null},$c=(e,t,n)=>Vc(e.container(),n)===Vc(t.container(),n),Wc=(e,t)=>{if(!t)return null;const n=t.container(),r=t.offset();return Bc(n)?n.childNodes[r+e]:null},Gc=(e,t)=>{const n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},qc=(e,t,n)=>Vc(t,e)===Vc(n,e),Xc=(e,t,n)=>{const r=e?"previousSibling":"nextSibling";for(;n&&n!==t;){let e=n[r];if(Ic(e)&&(e=e[r]),Rc(e)||Pc(e)){if(qc(t,e,n))return e;break}if(Fc(e))break;n=n.parentNode}return null},Kc=O(Gc,!0),Jc=O(Gc,!1),Zc=(e,t,n)=>{let r;const s=O(Xc,!0,t),i=O(Xc,!1,t);let o=n.startContainer;const a=n.startOffset;if(gs(o)){Bc(o)||(o=o.parentNode);const e=o.getAttribute("data-mce-caret");if("before"===e&&(r=o.nextSibling,Dc(r)))return Kc(r);if("after"===e&&(r=o.previousSibling,Dc(r)))return Jc(r)}if(!n.collapsed)return n;if(Tr(o)){if(Ic(o)){if(1===e){if(r=i(o),r)return Kc(r);if(r=s(o),r)return Jc(r)}if(-1===e){if(r=s(o),r)return Jc(r);if(r=i(o),r)return Kc(r)}return n}if(Ss(o)&&a>=o.data.length-1)return 1===e&&(r=i(o),r)?Kc(r):n;if(Ms(o)&&a<=1)return-1===e&&(r=s(o),r)?Jc(r):n;if(a===o.data.length)return r=i(o),r?Kc(r):n;if(0===a)return r=s(o),r?Jc(r):n}return n},Qc=(e,t)=>B.from(Wc(e?0:-1,t)).filter(Rc),ed=(e,t,n)=>{const r=Zc(e,t,n);return-1===e?Ko.fromRangeStart(r):Ko.fromRangeEnd(r)},td=e=>B.from(e.getNode()).map(un.fromDom),nd=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},rd=(e,t)=>{const n=$c(e,t);return!(n||!Dr(e.getNode()))||n};var sd;!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(sd||(sd={}));const id=Pr,od=Tr,ad=vr,ld=Dr,cd=Ns,dd=e=>Os(e)||(e=>!!Is(e)&&!0!==J(ue(e.getElementsByTagName("*")),((e,t)=>e||Es(t)),!1))(e),ud=zs,hd=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,md=(e,t)=>{if(Hc(e)){if(cd(t.previousSibling)&&!od(t.previousSibling))return Ko.before(t);if(od(t))return Ko(t,0)}if(jc(e)){if(cd(t.nextSibling)&&!od(t.nextSibling))return Ko.after(t);if(od(t))return Ko(t,t.data.length)}return jc(e)?ld(t)?Ko.before(t):Ko.after(t):Ko.before(t)},pd=(e,t,n)=>{let r,s,i,o;if(!ad(n)||!t)return null;if(t.isEqual(Ko.after(n))&&n.lastChild){if(o=Ko.after(n.lastChild),jc(e)&&cd(n.lastChild)&&ad(n.lastChild))return ld(n.lastChild)?Ko.before(n.lastChild):o}else o=t;const a=o.container();let l=o.offset();if(od(a)){if(jc(e)&&l>0)return Ko(a,--l);if(Hc(e)&&l<a.length)return Ko(a,++l);r=a}else{if(jc(e)&&l>0&&(s=hd(a,l-1),cd(s)))return!dd(s)&&(i=Yc(s,e,ud,s),i)?od(i)?Ko(i,i.data.length):Ko.after(i):od(s)?Ko(s,s.data.length):Ko.before(s);if(Hc(e)&&l<a.childNodes.length&&(s=hd(a,l),cd(s)))return ld(s)?((e,t)=>{const n=t.nextSibling;return n&&cd(n)?od(n)?Ko(n,0):Ko.before(n):pd(sd.Forwards,Ko.after(t),e)})(n,s):!dd(s)&&(i=Yc(s,e,ud,s),i)?od(i)?Ko(i,0):Ko.before(i):od(s)?Ko(s,0):Ko.after(s);r=s||o.getNode()}if((Hc(e)&&o.isAtEnd()||jc(e)&&o.isAtStart())&&(r=Yc(r,e,z,n,!0),ud(r,n)))return md(e,r);s=Yc(r,e,ud,n);const c=Pe(X(((e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n})(a,n),id));return!c||s&&c.contains(s)?s?md(e,s):null:(o=Hc(e)?Ko.after(c):Ko.before(c),o)},fd=e=>({next:t=>pd(sd.Forwards,t,e),prev:t=>pd(sd.Backwards,t,e)}),gd=e=>Ko.isTextPosition(e)?0===e.offset():Ns(e.getNode()),vd=e=>{if(Ko.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Ns(e.getNode(!0))},yd=(e,t)=>!Ko.isTextPosition(e)&&!Ko.isTextPosition(t)&&e.getNode()===t.getNode(!0),_d=(e,t,n)=>{return e?!yd(t,n)&&(r=t,!(!Ko.isTextPosition(r)&&Dr(r.getNode())))&&vd(t)&&gd(n):!yd(n,t)&&gd(t)&&vd(n);var r},bd=(e,t,n)=>{const r=fd(t);return B.from(e?r.next(n):r.prev(n))},wd=(e,t,n)=>bd(e,t,n).bind((r=>$c(n,r,t)&&_d(e,n,r)?bd(e,t,r):B.some(r))),xd=(e,t,n,r)=>wd(e,t,n).bind((n=>r(n)?xd(e,t,n,r):B.some(n))),Md=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Tr(n)?B.some(Ko(n,e?0:n.data.length)):n?Ns(n)?B.some(e?Ko.before(n):Dr(r=n)?Ko.before(r):Ko.after(r)):((e,t,n)=>{const r=e?Ko.before(n):Ko.after(n);return bd(e,t,r)})(e,t,n):B.none();var r},Sd=O(bd,!0),Td=O(bd,!1),Cd=O(Md,!0),Ed=O(Md,!1),kd="_mce_caret",Ld=e=>vr(e)&&e.id===kd,Ad=(e,t)=>{for(;t&&t!==e;){if(t.id===kd)return t;t=t.parentNode}return null},Dd=e=>Rt.isArray(e.start),Od=(e,t)=>(vr(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),Rd=(e,t)=>Ed(e).fold(I,(e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0))),Pd=(e,t,n)=>!(!(e=>!1===e.hasChildNodes())(t)||!Ad(e,t))&&(((e,t)=>{const n=e.ownerDocument.createTextNode(us);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)})(t,n),!0),Nd=(e,t,n,r)=>{const s=n[t?"start":"end"];let i,o,a,l;const c=e.getRoot();if(s){for(a=s[0],o=c,i=s.length-1;i>=1;i--){if(l=o.childNodes,Pd(c,o,r))return!0;if(s[i]>l.length-1)return!!Pd(c,o,r)||Rd(o,r);o=l[s[i]]}3===o.nodeType&&(a=Math.min(s[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(s[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},Id=e=>Tr(e)&&e.data.length>0,zd=(e,t,n)=>{let r,s,i,o,a=e.get(n.id+"_"+t);const l=n.keep;let c,d;if(a){if(r=a.parentNode,"start"===t?(l?a.hasChildNodes()?(r=a.firstChild,s=1):Id(a.nextSibling)?(r=a.nextSibling,s=0):Id(a.previousSibling)?(r=a.previousSibling,s=a.previousSibling.data.length):(r=a.parentNode,s=e.nodeIndex(a)+1):s=e.nodeIndex(a),c=r,d=s):(l?a.hasChildNodes()?(r=a.firstChild,s=1):Id(a.previousSibling)?(r=a.previousSibling,s=a.previousSibling.data.length):(r=a.parentNode,s=e.nodeIndex(a)):s=e.nodeIndex(a),c=r,d=s),!l){for(o=a.previousSibling,i=a.nextSibling,Rt.each(Rt.grep(a.childNodes),(e=>{Tr(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));a=e.get(n.id+"_"+t);)e.remove(a,!0);o&&i&&o.nodeType===i.nodeType&&Tr(o)&&!kt.browser.isOpera()&&(s=o.nodeValue.length,o.appendData(i.nodeValue),e.remove(i),c=o,d=s)}return B.some(Ko(c,d))}return B.none()},Bd=(e,t)=>{const n=e.dom;if(t){if(Dd(t))return((e,t)=>{const n=e.createRng();return Nd(e,!0,t,n)&&Nd(e,!1,t,n)?B.some(n):B.none()})(n,t);if((e=>p(e.start))(t))return B.some(((e,t)=>{let n;const r=e.createRng();return n=aa(e.getRoot(),t.start),r.setStart(n.container(),n.offset()),n=aa(e.getRoot(),t.end),r.setEnd(n.container(),n.offset()),r})(n,t));if((e=>Se(e,"id"))(t))return((e,t)=>{const n=zd(e,"start",t),r=zd(e,"end",t);return Nt(n,r.or(n),((t,n)=>{const r=e.createRng();return r.setStart(Od(e,t.container()),t.offset()),r.setEnd(Od(e,n.container()),n.offset()),r}))})(n,t);if((e=>Se(e,"name"))(t))return((e,t)=>B.from(e.select(t.name)[t.index]).map((t=>{const n=e.createRng();return n.selectNode(t),n})))(n,t);if((e=>Se(e,"rng"))(t))return B.some(t.rng)}return B.none()},Fd=(e,t,n)=>va(e,t,n),Hd=(e,t)=>{Bd(e,t).each((t=>{e.setRng(t)}))},jd=e=>vr(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Ud=(Yd=cs,e=>Yd===e);var Yd;const Vd=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),$d=e=>!Vd(e)&&!Ud(e)&&!ds(e),Wd=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Gd=e=>(e=>({value:e}))(Wd(e.red)+Wd(e.green)+Wd(e.blue)),qd=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Xd=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Kd=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),Jd=(e,t,n,r)=>{const s=parseInt(e,10),i=parseInt(t,10),o=parseInt(n,10),a=parseFloat(r);return Kd(s,i,o,a)},Zd=e=>(e=>{if("transparent"===e)return B.some(Kd(0,0,0,0));const t=qd.exec(e);if(null!==t)return B.some(Jd(t[1],t[2],t[3],"1"));const n=Xd.exec(e);return null!==n?B.some(Jd(n[1],n[2],n[3],n[4])):B.none()})(e).map(Gd).map((e=>"#"+e.value)).getOr(e),Qd=e=>!!e.nodeType,eu=(e,t,n)=>{const r=n.startOffset;let s=n.startContainer;var i;if((s!==n.endContainer||!(i=s.childNodes[r])||!/^(IMG)$/.test(i.nodeName))&&vr(s)){const i=s.childNodes;let o;r<i.length?(s=i[r],o=new Kr(s,e.getParent(s,e.isBlock))):(s=i[i.length-1],o=new Kr(s,e.getParent(s,e.isBlock)),o.next(!0));for(let e=o.current();e;e=o.next())if(Tr(e)&&!su(e))return n.setStart(e,0),void t.setRng(n)}},tu=(e,t,n)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(vr(e)||!su(e))return e}},nu=(e,t)=>(Qd(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),ru=(e,t,n)=>e.schema.isValidChild(t,n),su=(e,t=!1)=>{if(x(e)&&Tr(e)){const n=t?e.data.replace(/ /g," "):e.data;return Fs(n)}return!1},iu=(e,t)=>(M(e)?e=e(t):x(t)&&(e=e.replace(/%(\w+)/g,((e,n)=>t[n]||e))),e),ou=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),au=(e,t)=>("color"!==t&&"backgroundColor"!==t||(e=Zd(e)),"fontWeight"===t&&700===e&&(e="bold"),"fontFamily"===t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e),lu=(e,t,n)=>au(e.getStyle(t,n),n),cu=(e,t)=>{let n;return e.getParent(t,(t=>(n=e.getStyle(t,"text-decoration"),n&&"none"!==n))),n},du=(e,t,n)=>e.getParents(t,n,e.getRoot()),uu=(e,t,n)=>{const r=["inline","block","selector","attributes","styles","classes"],s=e=>be(e,((e,t)=>V(r,(e=>e===t))));return V(e.formatter.get(t),(t=>{const r=s(t);return V(e.formatter.get(n),(e=>{const t=s(e);return((e,t,n=a)=>o(n).eq(e,t))(r,t)}))}))},hu=e=>Te(e,"block"),mu=e=>Te(e,"selector"),pu=e=>Te(e,"inline"),fu=e=>mu(e)&&!1!==e.expand&&!pu(e),gu=jd,vu=du,yu=su,_u=nu,bu=(e,t)=>{let n=t;for(;n;){if(vr(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},wu=(e,t,n,r)=>{const s=t.data;for(let t=n;e?t>=0:t<s.length;e?t--:t++)if(r(s.charAt(t)))return e?t+1:t;return-1},xu=(e,t,n)=>wu(e,t,n,(e=>Ud(e)||Vd(e))),Mu=(e,t,n)=>wu(e,t,n,$d),Su=(e,t,n,r,s,i)=>{let o;const a=e.getParent(n,e.isBlock)||t,l=(t,n,r)=>{const i=bo(e),l=s?i.backwards:i.forwards;return B.from(l(t,n,((e,t)=>gu(e.parentNode)?-1:(o=e,r(s,e,t))),a))};return l(n,r,xu).bind((e=>i?l(e.container,e.offset+(s?-1:0),Mu):B.some(e))).orThunk((()=>o?B.some({container:o,offset:s?0:o.length}):B.none()))},Tu=(e,t,n,r,s)=>{Tr(r)&&Xe(r.data)&&r[s]&&(r=r[s]);const i=vu(e,r);for(let r=0;r<i.length;r++)for(let s=0;s<t.length;s++){const o=t[s];if((!x(o.collapsed)||o.collapsed===n.collapsed)&&(mu(o)&&e.is(i[r],o.selector)))return i[r]}return r},Cu=(e,t,n,r)=>{let s=n;const i=e.dom,o=i.getRoot(),a=t[0];if(hu(a)&&(s=a.wrapper?null:i.getParent(n,a.block,o)),!s){const t=i.getParent(n,"LI,TD,TH");s=i.getParent(Tr(n)?n.parentNode:n,(t=>t!==o&&_u(e,t)),t)}if(s&&hu(a)&&a.wrapper&&(s=vu(i,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s[r]&&!i.isBlock(s[r])&&(s=s[r],!ou(s,"br")););return s||n},Eu=(e,t,n,r)=>{const s=n.parentNode;return!x(n[r])&&(!(s!==t&&!w(s)&&!e.isBlock(s))||Eu(e,t,s,r))},ku=(e,t,n,r,s)=>{let i=n;const o=s?"previousSibling":"nextSibling",a=e.getRoot();if(Tr(n)&&!yu(n)&&(s?r>0:r<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(i))return i;for(let t=i[o];t;t=t[o]){const n=Tr(t)&&!Eu(e,a,t,o);if(!gu(t)&&(!Dr(l=t)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!yu(t,n))return i}if(i===a||i.parentNode===a){n=i;break}i=i.parentNode}var l;return n},Lu=e=>gu(e.parentNode)||gu(e),Au=(e,t,n,r=!1)=>{let{startContainer:s,startOffset:i,endContainer:o,endOffset:a}=t;const l=e.dom,c=n[0];if(vr(s)&&s.hasChildNodes()&&(s=Lo(s,i),Tr(s)&&(i=0)),vr(o)&&o.hasChildNodes()&&(o=Lo(o,t.collapsed?a:a-1),Tr(o)&&(a=o.nodeValue.length)),s=bu(l,s),o=bu(l,o),Lu(s)&&(s=gu(s)?s:s.parentNode,s=t.collapsed?s.previousSibling||s:s.nextSibling||s,Tr(s)&&(i=t.collapsed?s.length:0)),Lu(o)&&(o=gu(o)?o:o.parentNode,o=t.collapsed?o.nextSibling||o:o.previousSibling||o,Tr(o)&&(a=t.collapsed?0:o.length)),t.collapsed){Su(l,e.getBody(),s,i,!0,r).each((({container:e,offset:t})=>{s=e,i=t}));Su(l,e.getBody(),o,a,!1,r).each((({container:e,offset:t})=>{o=e,a=t}))}return(pu(c)||c.block_expand)&&(pu(c)&&Tr(s)&&0!==i||(s=ku(l,n,s,i,!0)),pu(c)&&Tr(o)&&a!==o.nodeValue.length||(o=ku(l,n,o,a,!1))),fu(c)&&(s=Tu(l,n,t,s,"previousSibling"),o=Tu(l,n,t,o,"nextSibling")),(hu(c)||mu(c))&&(s=Cu(e,n,s,"previousSibling"),o=Cu(e,n,o,"nextSibling"),hu(c)&&(l.isBlock(s)||(s=ku(l,n,s,i,!0)),l.isBlock(o)||(o=ku(l,n,o,a,!1)))),vr(s)&&(i=l.nodeIndex(s),s=s.parentNode),vr(o)&&(a=l.nodeIndex(o)+1,o=o.parentNode),{startContainer:s,startOffset:i,endContainer:o,endOffset:a}},Du=(e,t,n)=>{const r=t.startOffset,s=Lo(t.startContainer,r),i=t.endOffset,o=Lo(t.endContainer,i-1),a=e=>{const t=e[0];Tr(t)&&t===s&&r>=t.data.length&&e.splice(0,1);const n=e[e.length-1];return 0===i&&e.length>0&&n===o&&Tr(n)&&e.splice(e.length-1,1),e},l=(e,t,n)=>{const r=[];for(;e&&e!==n;e=e[t])r.push(e);return r},c=(t,n)=>e.getParent(t,(e=>e.parentNode===n),n),d=(e,t,r)=>{const s=r?"nextSibling":"previousSibling";for(let i=e,o=i.parentNode;i&&i!==t;i=o){o=i.parentNode;const t=l(i===e?i:i[s],s);t.length&&(r||t.reverse(),n(a(t)))}};if(s===o)return n(a([s]));const u=e.findCommonAncestor(s,o);if(e.isChildOf(s,o))return d(s,u,!0);if(e.isChildOf(o,s))return d(o,u);const h=c(s,u)||s,m=c(o,u)||o;d(s,h,!0);const p=l(h===s?h:h.nextSibling,"nextSibling",m===o?m.nextSibling:m);p.length&&n(a(p)),d(o,m)},Ou=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Ru=e=>X((e=>ne(e,(e=>{const t=ko(e);return t?[un.fromDom(t)]:[]})))(e),os),Pu=(e,t)=>{const n=no(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Ru(e)},Nu=e=>Pu(Ou(e.selection.getSel()),un.fromDom(e.getBody())),Iu=(e,t)=>$r(e,"table",t),zu=e=>En(e).fold(L([e]),(t=>[e].concat(zu(t)))),Bu=e=>kn(e).fold(L([e]),(t=>"br"===zt(t)?wn(t).map((t=>[e].concat(Bu(t)))).getOr([]):[e].concat(Bu(t)))),Fu=(e,t)=>Nt((e=>{const t=e.startContainer,n=e.startOffset;return Tr(t)?0===n?B.some(un.fromDom(t)):B.none():B.from(t.childNodes[n]).map(un.fromDom)})(t),(e=>{const t=e.endContainer,n=e.endOffset;return Tr(t)?n===t.data.length?B.some(un.fromDom(t)):B.none():B.from(t.childNodes[n-1]).map(un.fromDom)})(t),((t,n)=>{const r=Q(zu(e),O(fn,t)),s=Q(Bu(e),O(fn,n));return r.isSome()&&s.isSome()})).getOr(!1),Hu=(e,t,n,r)=>{const s=n,i=new Kr(n,s),o=be(e.schema.getMoveCaretBeforeOnEnterElements(),((e,t)=>!Y(["td","th","table"],t.toLowerCase())));do{if(Tr(n)&&0!==Rt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(o[n.nodeName])return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n))}while(n=r?i.next():i.prev());"BODY"===s.nodeName&&(r?t.setStart(s,0):t.setEnd(s,s.childNodes.length))},ju=e=>{const t=e.selection.getSel();return t&&t.rangeCount>0},Uu=(e,t)=>{const n=Nu(e);n.length>0?W(n,(n=>{const r=n.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)})):t(e.selection.getRng(),!1)},Yu=(e,t,n)=>{const r=ga(e,t);n(r),e.moveToBookmark(r)},Vu=((e,t)=>{const n=t=>e(t)?B.from(t.dom.nodeValue):B.none();return{get:r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return n(r).getOr("")},getOption:n,set:(n,r)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=r}}})(jt,"text"),$u=e=>Vu.get(e),Wu=e=>Vu.getOption(e),Gu=(e,t,n,r)=>bn(t).fold((()=>"skipping"),(s=>"br"===r||(e=>jt(e)&&$u(e)===us)(t)?"valid":(e=>Ht(e)&&ln(e,ro()))(t)?"existing":Ld(t.dom)?"caret":ru(e,n,r)&&ru(e,zt(s),n)?"valid":"invalid-child")),qu=(e,{uid:t=po("mce-annotation"),...n},r,s)=>{const i=un.fromTag("span",e);rn(i,ro()),$t(i,`${io()}`,t),$t(i,`${so()}`,r);const{attributes:o={},classes:a=[]}=s(t,n);return Wt(i,o),((e,t)=>{W(t,(t=>{rn(e,t)}))})(i,a),i},Xu=(e,t,n,r,s)=>{const i=[],o=qu(e.getDoc(),s,n,r),a=Zi(),l=()=>{a.clear()},c=e=>{W(e,d)},d=t=>{switch(Gu(e,t,"span",zt(t))){case"invalid-child":{l();const e=Tn(t);c(e),l();break}case"valid":{const e=a.get().getOrThunk((()=>{const e=go(o);return i.push(e),a.set(e),e}));((e,t)=>{Gn(e,t),Kn(t,e)})(t,e);break}}};return Du(e.dom,t,(e=>{l(),(e=>{const t=$(e,un.fromDom);c(t)})(e)})),i},Ku=(e,t,n,r)=>{e.undoManager.transact((()=>{const s=e.selection,i=s.getRng(),o=Nu(e).length>0;if(i.collapsed&&!o&&((e,t)=>{const n=Au(e,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)})(e,i),s.getRng().collapsed&&!o){const i=qu(e.getDoc(),r,t,n.decorate);nr(i,cs),s.getRng().insertNode(i.dom),s.select(i.dom)}else Yu(s,!1,(()=>{Uu(e,(s=>{Xu(e,s,t,n.decorate,r)}))}))}))},Ju=e=>{const t=(()=>{const e={};return{register:(t,n)=>{e[t]={name:t,settings:n}},lookup:t=>Me(e,t).map((e=>e.settings)),getNames:()=>me(e)}})();ho(e,t);const n=uo(e,t);return{register:(e,n)=>{t.register(e,n)},annotate:(n,r)=>{t.lookup(n).each((t=>{Ku(e,n,t,r)}))},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{const n=e.selection.getBookmark();ao(e,B.some(t)).each((({elements:e})=>{W(e,er)})),e.selection.moveToBookmark(n)},removeAll:t=>{const n=e.selection.getBookmark();fe(co(e,t),((e,t)=>W(e,er))),e.selection.moveToBookmark(n)},getAll:t=>{const n=co(e,t);return ge(n,(e=>$(e,(e=>e.dom))))}}},Zu=e=>({getBookmark:O(Fd,e),moveToBookmark:O(Hd,e)});Zu.isBookmarkNode=jd;const Qu=(e,t,n)=>!n.collapsed&&V(n.getClientRects(),(n=>((e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)(n,e,t))),eh=(e,t,n)=>e.dispatch(t,n),th=(e,t,n,r)=>e.dispatch("FormatApply",{format:t,node:n,vars:r}),nh=(e,t,n,r)=>e.dispatch("FormatRemove",{format:t,node:n,vars:r}),rh=(e,t)=>e.dispatch("SetContent",t),sh=(e,t)=>e.dispatch("GetContent",t),ih=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),oh={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||oh.metaKeyPressed(e),metaKeyPressed:e=>kt.os.isMacOS()||kt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ah=(e,t)=>{const n="data-mce-selected",r=t.dom,s=Rt.each;let i,o,a,l,c,d,u,h,m,p,f,g,v;const y=t.getDoc(),_=document,b=Math.abs,w=Math.round,M=t.getBody();let S,T;const C={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},E=e=>x(e)&&(Or(e)||t.dom.is(e,"figure.image")),k=e=>Ir(e)||r.hasClass(e,"mce-preview-object"),L=e=>{const n=e.target;((e,t)=>{if("longpress"===e.type||0===e.type.indexOf("touch")){const n=e.touches[0];return E(e.target)&&!Qu(n.clientX,n.clientY,t)}return E(e.target)&&!Qu(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},A=e=>r.is(e,"figure.image")?[e.querySelector("img")]:r.hasClass(e,"mce-preview-object")&&x(e.firstElementChild)?[e,e.firstElementChild]:[e],D=e=>{const n=fl(t);return!!n&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&(r.hasClass(e,"mce-preview-object")?mn(un.fromDom(e.firstElementChild),n):mn(un.fromDom(e),n))))},O=(e,n,s)=>{if(x(s)){const i=A(e);W(i,(e=>{e.style[n]||!t.schema.isValid(e.nodeName.toLowerCase(),n)?r.setStyle(e,n,s):r.setAttrib(e,n,""+s)}))}},R=(e,t,n)=>{O(e,"width",t),O(e,"height",n)},P=e=>{let n,s,c,y,_;n=e.screenX-d,s=e.screenY-u,g=n*l[2]+h,v=s*l[3]+m,g=g<5?5:g,v=v<5?5:v,c=(E(i)||k(i))&&!1!==gl(t)?!oh.modifierPressed(e):oh.modifierPressed(e),c&&(b(n)>b(s)?(v=w(g*p),g=w(v/p)):(g=w(v/p),v=w(g*p))),R(o,g,v),y=l.startPos.x+n,_=l.startPos.y+s,y=y>0?y:0,_=_>0?_:0,r.setStyles(a,{left:y,top:_,display:"block"}),a.innerHTML=g+" &times; "+v,l[2]<0&&o.clientWidth<=g&&r.setStyle(o,"left",undefined+(h-g)),l[3]<0&&o.clientHeight<=v&&r.setStyle(o,"top",undefined+(m-v)),n=M.scrollWidth-S,s=M.scrollHeight-T,n+s!==0&&r.setStyles(a,{left:y-n,top:_-s}),f||(((e,t,n,r,s)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:r,origin:s})})(t,i,h,m,"corner-"+l.name),f=!0)},N=()=>{const e=f;f=!1,e&&(O(i,"width",g),O(i,"height",v)),r.unbind(y,"mousemove",P),r.unbind(y,"mouseup",N),_!==y&&(r.unbind(_,"mousemove",P),r.unbind(_,"mouseup",N)),r.remove(o),r.remove(a),r.remove(c),I(i),e&&(((e,t,n,r,s)=>{e.dispatch("ObjectResized",{target:t,width:n,height:r,origin:s})})(t,i,g,v,"corner-"+l.name),r.setAttrib(i,"style",r.getAttrib(i,"style"))),t.nodeChanged()},I=e=>{F();const f=r.getPos(e,M),b=f.x,w=f.y,x=e.getBoundingClientRect(),E=x.width||x.right-x.left,L=x.height||x.bottom-x.top;i!==e&&(z(),i=e,g=v=0);const O=t.dispatch("ObjectSelected",{target:e}),I=r.getAttrib(i,n,"1");D(e)&&!O.isDefaultPrevented()?s(C,((e,t)=>{let s;const f=s=>{const f=A(i)[0];var g;d=s.screenX,u=s.screenY,h=f.clientWidth,m=f.clientHeight,p=m/h,l=e,l.name=t,l.startPos={x:E*e[0]+b,y:L*e[1]+w},S=M.scrollWidth,T=M.scrollHeight,c=r.add(M,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),r.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),o=k(g=i)?r.create("img",{src:kt.transparentSrc}):g.cloneNode(!0),r.addClass(o,"mce-clonedresizable"),r.setAttrib(o,"data-mce-bogus","all"),o.contentEditable="false",r.setStyles(o,{left:b,top:w,margin:0}),R(o,E,L),o.removeAttribute(n),M.appendChild(o),r.bind(y,"mousemove",P),r.bind(y,"mouseup",N),_!==y&&(r.bind(_,"mousemove",P),r.bind(_,"mouseup",N)),a=r.add(M,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+m)};s=r.get("mceResizeHandle"+t),s&&r.remove(s),s=r.add(M,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),r.bind(s,"mousedown",(e=>{e.stopImmediatePropagation(),e.preventDefault(),f(e)})),e.elm=s,r.setStyles(s,{left:E*e[0]+b-s.offsetWidth/2,top:L*e[1]+w-s.offsetHeight/2})})):z(),r.getAttrib(i,n)||i.setAttribute(n,I)},z=()=>{F(),i&&i.removeAttribute(n),fe(C,((e,t)=>{const n=r.get("mceResizeHandle"+t);n&&(r.unbind(n),r.remove(n))}))},B=i=>{var o;let a,l;const c=(e,t)=>{if(e)do{if(e===t)return!0}while(e=e.parentNode)};f||t.removed||(s(r.select("img[data-mce-selected],hr[data-mce-selected]"),(e=>{e.removeAttribute(n)})),l="mousedown"===i.type?i.target:e.getNode(),l=null===(o=Gr(un.fromDom(l),"table,img,figure.image,hr,video,span.mce-preview-object").getOrUndefined())||void 0===o?void 0:o.dom,c(l,M)&&(H(),a=e.getStart(!0),c(a,l)&&c(e.getEnd(!0),l))?I(l):z())},F=()=>{fe(C,(e=>{e.elm&&(r.unbind(e.elm),delete e.elm)}))},H=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",(()=>{H();const e=Qi((e=>{t.composing||B(e)}),0);t.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",e.throttle),t.on("keyup compositionend",(t=>{i&&"TABLE"===i.nodeName&&e.throttle(t)})),t.on("hide blur",z),t.on("contextmenu longpress",L,!0)})),t.on("remove",F);return{isResizable:D,showResizeRect:I,hideResizeRect:z,updateResizeRect:B,destroy:()=>{i=o=c=null}}},lh=(e,t,n)=>{const r=e.document.createRange();var s;return s=r,t.fold((e=>{s.setStartBefore(e.dom)}),((e,t)=>{s.setStart(e.dom,t)}),(e=>{s.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(r,n),r},ch=(e,t,n,r,s)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,s),i},dh=xa([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),uh=(e,t,n)=>t(un.fromDom(n.startContainer),n.startOffset,un.fromDom(n.endContainer),n.endOffset),hh=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:L(e),rtl:B.none}),relative:(t,n)=>({ltr:Ne((()=>lh(e,t,n))),rtl:Ne((()=>B.some(lh(e,n,t))))}),exact:(t,n,r,s)=>({ltr:Ne((()=>ch(e,t,n,r,s))),rtl:Ne((()=>B.some(ch(e,r,s,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>dh.rtl(un.fromDom(e.endContainer),e.endOffset,un.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>uh(0,dh.ltr,n)));return uh(0,dh.ltr,n)})(0,n)};dh.ltr,dh.rtl;const mh=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),ph=(e,t,n)=>{var r,s;return B.from(null===(s=(r=e.dom).caretPositionFromPoint)||void 0===s?void 0:s.call(r,t,n)).bind((t=>{if(null===t.offsetNode)return B.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),B.some(n)}))},fh=(e,t,n)=>{var r,s;return B.from(null===(s=(r=e.dom).caretRangeFromPoint)||void 0===s?void 0:s.call(r,t,n))},gh=document.caretPositionFromPoint?ph:document.caretRangeFromPoint?fh:B.none,vh=xa([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),yh={before:vh.before,on:vh.on,after:vh.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(A,A,A)},_h=xa([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bh={domRange:_h.domRange,relative:_h.relative,exact:_h.exact,exactFromRange:e=>_h.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>un.fromDom(e.startContainer),relative:(e,t)=>yh.getStart(e),exact:(e,t,n,r)=>e}))(e);return _n(t)},range:mh},wh=(e,t)=>{const n=zt(e);return"input"===n?yh.after(e):Y(["br","img"],n)?0===t?yh.before(e):yh.after(e):yh.on(e,t)},xh=(e,t)=>{const n=e.fold(yh.before,wh,yh.after),r=t.fold(yh.before,wh,yh.after);return bh.relative(n,r)},Mh=(e,t,n,r)=>{const s=wh(e,t),i=wh(n,r);return bh.relative(s,i)},Sh=(e,t)=>{const n=(t||document).createDocumentFragment();return W(e,(e=>{n.appendChild(e.dom)})),un.fromDom(n)},Th=e=>{const t=bh.getWin(e).dom,n=(e,n,r,s)=>ch(t,e,n,r,s),r=(e=>e.match({domRange:e=>{const t=un.fromDom(e.startContainer),n=un.fromDom(e.endContainer);return Mh(t,e.startOffset,n,e.endOffset)},relative:xh,exact:Mh}))(e);return hh(t,r).match({ltr:n,rtl:n})},Ch=(e,t,n)=>((e,t,n)=>{const r=un.fromDom(e.document);return gh(r,t,n).map((e=>mh(un.fromDom(e.startContainer),e.startOffset,un.fromDom(e.endContainer),e.endOffset)))})(e,t,n),Eh=(e,t,n)=>Ch(n.defaultView,e,t).map((e=>{const t=n.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t})).getOrUndefined(),kh=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Lh=(e,t,n)=>null!==((e,t,n)=>{for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null})(e,t,n),Ah=(e,t,n)=>Lh(e,t,(e=>e.nodeName===n)),Dh=e=>e&&"TABLE"===e.nodeName,Oh=e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName),Rh=(e,t)=>ys(e)&&!1===Lh(e,t,Ld),Ph=(e,t,n)=>{const r=new Kr(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=r[n?"prev":"next"]();)if(Dr(t))return!0},Nh=(e,t,n,r,s)=>{let i;const o=e.getRoot();let a;const l=e.schema.getNonEmptyElements(),c=e.getParent(s.parentNode,e.isBlock)||o;if(r&&Dr(s)&&t&&e.isEmpty(c))return B.some(Ko(s.parentNode,e.nodeIndex(s)));const d=new Kr(s,c);for(;a=d[r?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||Rh(a,o))return B.none();if(Tr(a)&&a.nodeValue.length>0)return!1===Ah(a,o,"A")?B.some(Ko(a,r?a.nodeValue.length:0)):B.none();if(e.isBlock(a)||l[a.nodeName.toLowerCase()])return B.none();i=a}return n&&i?B.some(Ko(i,0)):B.none()},Ih=(e,t,n,r)=>{let s,i;const o=e.getRoot();let a,l,c=!1;s=r[(n?"start":"end")+"Container"],i=r[(n?"start":"end")+"Offset"];const d=vr(s)&&i===s.childNodes.length,u=e.schema.getNonEmptyElements();if(l=n,ys(s))return B.none();if(vr(s)&&i>s.childNodes.length-1&&(l=!1),Lr(s)&&(s=o,i=0),s===o){if(l&&(a=s.childNodes[i>0?i-1:0],a)){if(ys(a))return B.none();if(u[a.nodeName]||Dh(a))return B.none()}if(s.hasChildNodes()){if(i=Math.min(!l&&i>0?i-1:i,s.childNodes.length-1),s=s.childNodes[i],i=Tr(s)&&d?s.data.length:0,!t&&s===o.lastChild&&Dh(s))return B.none();if(((e,t)=>{for(;t&&t!==e;){if(Pr(t))return!0;t=t.parentNode}return!1})(o,s)||ys(s))return B.none();if(s.hasChildNodes()&&!1===Dh(s)){a=s;const t=new Kr(s,o);do{if(Pr(a)||ys(a)){c=!1;break}if(Tr(a)&&a.nodeValue.length>0){i=l?0:a.nodeValue.length,s=a,c=!0;break}if(u[a.nodeName.toLowerCase()]&&!Oh(a)){i=e.nodeIndex(a),s=a.parentNode,l||i++,c=!0;break}}while(a=l?t.next():t.prev())}}}return t&&(Tr(s)&&0===i&&Nh(e,d,t,!0,s).each((e=>{s=e.container(),i=e.offset(),c=!0})),vr(s)&&(a=s.childNodes[i],a||(a=s.childNodes[i-1]),!a||!Dr(a)||((e,t)=>e.previousSibling&&e.previousSibling.nodeName===t)(a,"A")||Ph(e,a,!1)||Ph(e,a,!0)||Nh(e,d,t,!0,a).each((e=>{s=e.container(),i=e.offset(),c=!0})))),l&&!t&&Tr(s)&&i===s.nodeValue.length&&Nh(e,d,t,!1,s).each((e=>{s=e.container(),i=e.offset(),c=!0})),c?B.some(Ko(s,i)):B.none()},zh=(e,t)=>{const n=t.collapsed,r=t.cloneRange(),s=Ko.fromRangeStart(t);return Ih(e,n,!0,r).each((e=>{n&&Ko.isAbove(s,e)||r.setStart(e.container(),e.offset())})),n||Ih(e,n,!1,r).each((e=>{r.setEnd(e.container(),e.offset())})),n&&r.collapse(!0),kh(t,r)?B.none():B.some(r)},Bh=(e,t)=>e.splitText(t),Fh=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,s=e.endOffset;return t===r&&Tr(t)?n>0&&n<t.nodeValue.length&&(r=Bh(t,n),t=r.previousSibling,s>n?(s-=n,t=r=Bh(r,s).previousSibling,s=r.nodeValue.length,n=0):s=0):(Tr(t)&&n>0&&n<t.nodeValue.length&&(t=Bh(t,n),n=0),Tr(r)&&s>0&&s<r.nodeValue.length&&(r=Bh(r,s).previousSibling,s=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:s}},Hh=e=>({walk:(t,n)=>Du(e,t,n),split:Fh,normalize:t=>zh(e,t).fold(I,(e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)))});Hh.compareRanges=kh,Hh.getCaretRangeFromPoint=Eh,Hh.getSelectedNode=ko,Hh.getNode=Lo;const jh=((e,t)=>{const n=n=>{const r=t(n);if(r<=0||null===r){const t=Un(n,e);return parseFloat(t)||0}return r},r=(e,t)=>J(t,((t,n)=>{const r=Un(e,n),s=void 0===r?0:parseInt(r,10);return isNaN(s)?t:t+s}),0);return{set:(t,n)=>{if(!S(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const r=t.dom;cn(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:(e,t,n)=>{const s=r(e,n);return t>s?t-s:0}}})("height",(e=>{const t=e.dom;return Bn(e)?t.getBoundingClientRect().height:t.offsetHeight})),Uh=()=>un.fromDom(document),Yh=(e,t)=>e.view(t).fold(L([]),(t=>{const n=e.owner(t),r=Yh(e,n);return[t].concat(r)}));var Vh=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?B.none():B.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(un.fromDom)},owner:e=>yn(e)});const $h=e=>{const t=Uh(),n=dr(t),r=((e,t)=>{const n=t.owner(e);return Yh(t,n)})(e,Vh),s=cr(e),i=K(r,((e,t)=>{const n=cr(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return ar(i.left+s.left+n.left,i.top+s.top+n.top)},Wh=e=>"textarea"===zt(e),Gh=(e,t)=>{const n=(e=>{const t=e.dom.ownerDocument,n=t.body,r=t.defaultView,s=t.documentElement;if(n===e.dom)return ar(n.offsetLeft,n.offsetTop);const i=lr(null==r?void 0:r.pageYOffset,s.scrollTop),o=lr(null==r?void 0:r.pageXOffset,s.scrollLeft),a=lr(s.clientTop,n.clientTop),l=lr(s.clientLeft,n.clientLeft);return cr(e).translate(o-l,i-a)})(e),r=(e=>jh.get(e))(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},qh=(e,t)=>{const n=((e,t)=>{const n=Tn(e);if(0===n.length||Wh(e))return{element:e,offset:t};if(t<n.length&&!Wh(n[t]))return{element:n[t],offset:0};{const r=n[n.length-1];return Wh(r)?{element:e,offset:t}:"img"===zt(r)?{element:r,offset:1}:jt(r)?{element:r,offset:$u(r).length}:{element:r,offset:Tn(r).length}}})(e,t),r=un.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Gn(n.element,r),Gh(r,(()=>Qn(r)))},Xh=(e,t,n,r)=>{Qh(e,((s,i)=>Jh(e,t,n,r)),n)},Kh=(e,t,n,r,s)=>{const i={elm:r.element.dom,alignToTop:s};if(((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,i))return;n(t,dr(t).top,r,s),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,i)},Jh=(e,t,n,r)=>{const s=un.fromDom(e.getBody()),i=un.fromDom(e.getDoc());s.dom.offsetWidth;const o=qh(un.fromDom(n.startContainer),n.startOffset);Kh(e,i,t,o,r),o.cleanup()},Zh=(e,t,n,r)=>{const s=un.fromDom(e.getDoc());Kh(e,s,n,(e=>Gh(un.fromDom(e),C))(t),r)},Qh=(e,t,n)=>{const r=n.startContainer,s=n.startOffset,i=n.endContainer,o=n.endOffset;t(un.fromDom(r),un.fromDom(i));const a=e.dom.createRng();a.setStart(r,s),a.setEnd(i,o),e.selection.setRng(n)},em=(e,t,n,r)=>{const s=e.pos;if(n)ur(s.left,s.top,r);else{const n=s.top-t+e.height;ur(s.left,n,r)}},tm=(e,t,n,r,s)=>{const i=n+t,o=r.pos.top,a=r.bottom,l=a-o>=n;if(o<t)em(r,n,!1!==s,e);else if(o>i){em(r,n,l?!1!==s:!0===s,e)}else a>i&&!l&&em(r,n,!0===s,e)},nm=(e,t,n,r)=>{const s=e.dom.defaultView.innerHeight;tm(e,t,s,n,r)},rm=(e,t,n,r)=>{const s=e.dom.defaultView.innerHeight;tm(e,t,s,n,r);const i=$h(n.element),o=pr(window);i.top<o.y?hr(n.element,!1!==r):i.top>o.bottom&&hr(n.element,!0===r)},sm=(e,t,n)=>Xh(e,nm,t,n),im=(e,t,n)=>Zh(e,t,nm,n),om=(e,t,n)=>Xh(e,rm,t,n),am=(e,t,n)=>Zh(e,t,rm,n),lm=(e,t,n)=>{(e.inline?sm:om)(e,t,n)},cm=e=>e.dom.focus(),dm=e=>{const t=Rn(e).dom;return e.dom===t.activeElement},um=(e=Uh())=>B.from(e.dom.activeElement).map(un.fromDom),hm=(e,t)=>{const n=jt(t)?$u(t).length:Tn(t).length+1;return e>n?n:e<0?0:e},mm=e=>bh.range(e.start,hm(e.soffset,e.start),e.finish,hm(e.foffset,e.finish)),pm=(e,t)=>!gr(t.dom)&&(gn(e,t)||fn(e,t)),fm=e=>t=>pm(e,t.start)&&pm(e,t.finish),gm=e=>bh.range(un.fromDom(e.startContainer),e.startOffset,un.fromDom(e.endContainer),e.endOffset),vm=e=>(e=>{const t=e.getSelection();return(t&&0!==t.rangeCount?B.from(t.getRangeAt(0)):B.none()).map(gm)})(_n(e).dom).filter(fm(e)),ym=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),B.some(t)}catch(e){return B.none()}},_m=e=>{const t=(e=>e.inline)(e)?vm(un.fromDom(e.getBody())):B.none();e.bookmark=t.isSome()?t:e.bookmark},bm=e=>(e.bookmark?e.bookmark:B.none()).bind((t=>((e,t)=>B.from(t).filter(fm(e)).map(mm))(un.fromDom(e.getBody()),t))).bind(ym),wm={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},xm={setEditorTimeout:(e,t,n)=>((e,t)=>(S(t)||(t=0),setTimeout(e,t)))((()=>{e.removed||t()}),n),setEditorInterval:(e,t,n)=>{const r=((e,t)=>(S(t)||(t=0),setInterval(e,t)))((()=>{e.removed?clearInterval(r):t()}),n);return r}},Mm=e=>{const t=Qi((()=>{_m(e)}),0);e.on("init",(()=>{e.inline&&((e,t)=>{const n=()=>{t.throttle()};Yi.DOM.bind(document,"mouseup",n),e.on("remove",(()=>{Yi.DOM.unbind(document,"mouseup",n)}))})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",(e=>{t.throttle()}))})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",(t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||_m(e)}))})(e,t)})),e.on("remove",(()=>{t.cancel()}))};let Sm;const Tm=Yi.DOM,Cm=(e,t)=>{const n=kl(e),r=Tm.getParent(t,(t=>(e=>wm.isEditorUIElement(e))(t)||!!n&&e.dom.is(t,n)));return null!==r},Em=(e,t)=>{const n=t.editor;Mm(n),n.on("focusin",(()=>{const t=e.focusedEditor;t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))})),n.on("focusout",(()=>{xm.setEditorTimeout(n,(()=>{const t=e.focusedEditor;Cm(n,(e=>{try{const t=Rn(un.fromDom(e.getElement()));return um(t).fold((()=>document.body),(e=>e.dom))}catch(e){return document.body}})(n))||t!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),Sm||(Sm=t=>{const n=e.activeEditor;n&&In(t).each((t=>{t.ownerDocument===document&&(t===document.body||Cm(n,t)||e.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},Tm.bind(document,"focusin",Sm))},km=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Tm.unbind(document,"focusin",Sm),Sm=null)},Lm=(e,t)=>(e=>e.collapsed?B.from(Lo(e.startContainer,e.startOffset)).map(un.fromDom):B.none())(t).bind((t=>is(t)?B.some(t):!1===gn(e,t)?B.some(e):B.none())),Am=(e,t)=>{Lm(un.fromDom(e.getBody()),t).bind((e=>Cd(e.dom))).fold((()=>{e.selection.normalize()}),(t=>e.selection.setRng(t.toRange())))},Dm=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Om=e=>{return dm(e)||(t=e,um(Rn(t)).filter((e=>t.dom.contains(e.dom)))).isSome();var t},Rm=e=>e.inline?(e=>{const t=e.getBody();return t&&Om(un.fromDom(t))})(e):(e=>e.iframeElement&&dm(un.fromDom(e.iframeElement)))(e),Pm=e=>Rm(e)||(e=>{const t=Rn(un.fromDom(e.getElement()));return um(t).filter((t=>!(e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))})(t.dom)&&Cm(e,t.dom))).isSome()})(e),Nm=e=>e.editorManager.setActive(e),Im=(e,t)=>{e.removed||(t?Nm(e):(e=>{const t=e.selection,n=e.getBody();let r=t.getRng();e.quirks.refreshContentEditable(),void 0!==e.bookmark&&!1===Rm(e)&&bm(e).each((t=>{e.selection.setRng(t),r=t}));const s=((e,t)=>e.dom.getParent(t,(t=>"true"===e.dom.getContentEditable(t))))(e,t.getNode());if(e.dom.isChildOf(s,n))return Dm(s),Am(e,r),void Nm(e);e.inline||(kt.browser.isOpera()||Dm(n),e.getWin().focus()),(kt.browser.isFirefox()||e.inline)&&(Dm(n),Am(e,r)),Nm(e)})(e))},zm=(e,t,n,r,s)=>{const i=n?t.startContainer:t.endContainer,o=n?t.startOffset:t.endOffset;return B.from(i).map(un.fromDom).map((e=>r&&t.collapsed?e:Cn(e,s(e,o)).getOr(e))).bind((e=>Ht(e)?B.some(e):bn(e).filter(Ht))).map((e=>e.dom)).getOr(e)},Bm=(e,t,n)=>zm(e,t,!0,n,((e,t)=>Math.min(Ln(e),t))),Fm=(e,t,n)=>zm(e,t,!1,n,((e,t)=>t>0?t-1:t)),Hm=(e,t)=>{const n=e;for(;e&&Tr(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},jm=(e,t)=>$(t,(t=>{const n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t})),Um=["img","br"],Ym=e=>{const t=Wu(e).filter((e=>0!==e.trim().length||e.indexOf(cs)>-1)).isSome();return t||Y(Um,zt(e))},Vm=e=>((e,t)=>{const n=e=>{for(let r=0;r<e.childNodes.length;r++){const s=un.fromDom(e.childNodes[r]);if(t(s))return B.some(s);const i=n(e.childNodes[r]);if(i.isSome())return i}return B.none()};return n(e.dom)})(e,Ym),$m=(e,t)=>{const n=e=>{const r=Tn(e);for(let e=r.length-1;e>=0;e--){const s=r[e];if(t(s))return B.some(s);const i=n(s);if(i.isSome())return i}return B.none()};return n(e)},Wm="[data-mce-autocompleter]",Gm=(e,t)=>{if(qm(un.fromDom(e.getBody())).isNone()){const r=un.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Kn(r,un.fromDom(t.extractContents())),t.insertNode(r.dom),bn(r).each((e=>e.dom.normalize())),(n=r,$m(n,Ym)).map((t=>{e.selection.setCursorLocation(t.dom,(e=>"img"===zt(e)?1:Wu(e).fold((()=>Tn(e).length),(e=>e.length)))(t))}))}var n},qm=e=>Wr(e,Wm),Xm={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Km=(e,t,n)=>{const r=n?"lastChild":"firstChild",s=n?"prev":"next";if(e[r])return e[r];if(e!==t){let n=e[s];if(n)return n;for(let r=e.parent;r&&r!==t;r=r.parent)if(n=r[s],n)return n}},Jm=e=>{if(!Fs(e.value))return!1;const t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)},Zm=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Qm{constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}static create(e,t){const n=new Qm(e,Xm[e]||1);return t&&fe(t,((e,t)=>{n.attr(t,e)})),n}replace(e){const t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){const n=this;let r;if("string"!=typeof e)return null!=e&&fe(e,((e,t)=>{n.attr(t,e)})),n;if(r=n.attributes){if(void 0!==t){if(null===t){if(e in r.map){delete r.map[e];let t=r.length;for(;t--;)if(r[t].name===e)return r.splice(t,1),n}return n}if(e in r.map){let n=r.length;for(;n--;)if(r[n].name===e){r[n].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}}clone(){const e=this,t=new Qm(e.name,e.type);let n;if(n=e.attributes){const e=[];e.map={};for(let t=0,r=n.length;t<r;t++){const r=n[t];"id"!==r.name&&(e[e.length]={name:r.name,value:r.value},e.map[r.name]=r.value)}t.attributes=e}return t.value=e.value,t}wrap(e){const t=this;return t.parent.insert(e,t),e.append(t),t}unwrap(){const e=this;for(let t=e.firstChild;t;){const n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){const e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e}append(e){const t=this;e.parent&&e.remove();const n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();const r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e}getAll(e){const t=this,n=[];for(let r=t.firstChild;r;r=Km(r,t))r.name===e&&n.push(r);return n}children(){const e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){const e=this;if(e.firstChild){const t=[];for(let n=e.firstChild;n;n=Km(n,e))t.push(n);let n=t.length;for(;n--;){const e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){const r=this;let s=r.firstChild;if(Zm(r))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(e[s.name])return!1;if(Zm(s))return!1}if(8===s.type)return!1;if(3===s.type&&!Jm(s))return!1;if(3===s.type&&s.parent&&t[s.parent.name]&&Fs(s.value))return!1;if(n&&n(s))return!1}while(s=Km(s,r));return!0}walk(e){return Km(this,null,e)}}const ep=(e,t,n=0)=>{const r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&((e,t)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(t)))(r,n)){const e=r.indexOf("[endif]",n);return r.indexOf(">",e)}if(t){const e=r.indexOf(">",n);return-1!==e?e:r.length}{const t=/--!?>/g;t.lastIndex=n;const s=t.exec(e);return s?s.index+s[0].length:r.length}},tp=(e,t,n)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,s=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,i=e.getVoidElements();let o=1,a=n;for(;0!==o;)for(r.lastIndex=a;;){const e=r.exec(t);if(null===e)return a;if("!"===e[1]){a=Ue(e[2],"--")?ep(t,!1,e.index+"!--".length):ep(t,!0,e.index+1);break}{s.lastIndex=r.lastIndex;const n=s.exec(t);if(y(n)||n.index!==r.lastIndex)continue;"/"===e[1]?o-=1:Se(i,e[2])||(o+=1),a=r.lastIndex+n[0].length;break}}return a},np=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let s=((e,t)=>{const n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")})(e.getTempAttrs(),t);const i=r.getVoidElements();let o;for(;o=n.exec(s);){const e=n.lastIndex,t=o[0].length;let a;a=i[o[1]]?e:tp(r,s,e),s=s.substring(0,e-t)+s.substring(a),n.lastIndex=e-t}return ms(s)},rp=np,sp=(e,t,n)=>{let r;r="raw"===t.format?Rt.trim(rp(e.serializer,n.innerHTML)):"text"===t.format?e.dom.isEmpty(n)?"":ms(n.innerText||n.textContent):"tree"===t.format?e.serializer.serialize(n,t):((e,t)=>{const n=Ya(e),r=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(r,"")})(e,e.serializer.serialize(n,t));return"text"!==t.format&&!as(un.fromDom(n))&&p(r)?Rt.trim(r):r},ip=Rt.each,op=e=>({compare:(t,n)=>{if(t.nodeName!==n.nodeName)return!1;const r=t=>{const n={};return ip(e.getAttribs(t),(r=>{const s=r.nodeName.toLowerCase();0!==s.indexOf("_")&&"style"!==s&&0!==s.indexOf("data-")&&(n[s]=e.getAttrib(t,s))})),n},s=(e,t)=>{let n,r;for(r in e)if(Se(e,r)){if(n=t[r],void 0===n)return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(Se(t,r))return!1;return!0};return!!s(r(t),r(n))&&(!!s(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!jd(t)&&!jd(n)))}}),ap=Rt.makeMap,lp=e=>{const t=[],n=(e=e||{}).indent,r=ap(e.indent_before||""),s=ap(e.indent_after||""),i=mi.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="xhtml"!==e.element_format;return{start:(e,a,l)=>{let c,d,u,h;if(n&&r[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&"\n"!==h&&t.push("\n")),t.push("<",e),a)for(c=0,d=a.length;c<d;c++)u=a[c],t.push(" ",u.name,'="',i(u.value,!0),'"');t[t.length]=!l||o?">":" />",l&&n&&s[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&"\n"!==h&&t.push("\n"))},end:e=>{let r;t.push("</",e,">"),n&&s[e]&&t.length>0&&(r=t[t.length-1],r.length>0&&"\n"!==r&&t.push("\n"))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:i(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,r)=>{r?t.push("<?",e," ",i(r),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},cp=(e,t=Mi())=>{const n=lp(e);(e=e||{}).validate=!("validate"in e)||e.validate;return{serialize:r=>{const s=e.validate,i={3:e=>{n.text(e.value,e.raw)},8:e=>{n.comment(e.value)},7:e=>{n.pi(e.name,e.value)},10:e=>{n.doctype(e.value)},4:e=>{n.cdata(e.value)},11:e=>{if(e=e.firstChild)do{o(e)}while(e=e.next)}};n.reset();const o=e=>{const r=i[e.type];if(r)r(e);else{const r=e.name,i=r in t.getVoidElements();let a=e.attributes;if(s&&a&&a.length>1){const n=[];n.map={};const r=t.getElementRule(e.name);if(r){for(let e=0,t=r.attributesOrder.length;e<t;e++){const t=r.attributesOrder[e];if(t in a.map){const e=a.map[t];n.map[t]=e,n.push({name:t,value:e})}}for(let e=0,t=a.length;e<t;e++){const t=a[e].name;if(!(t in n.map)){const e=a.map[t];n.map[t]=e,n.push({name:t,value:e})}}a=n}}if(n.start(r,a,i),!i){let t=e.firstChild;if(t){"pre"!==r&&"textarea"!==r||3!==t.type||"\n"!==t.value[0]||n.text("\n",!0);do{o(t)}while(t=t.next)}n.end(r)}}};return 1!==r.type||e.inner?3===r.type?i[3](r):i[11](r):o(r),n.getContent()}}},dp=new Set;W(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{dp.add(e)}));const up=["font","text-decoration","text-emphasis"],hp=(e,t)=>me(e.parseStyle(e.getAttrib(t,"style"))),mp=(e,t)=>re(hp(e,t),(e=>!(e=>dp.has(e))(e))),pp=(e,t,n)=>{const r=hp(e,t),s=hp(e,n),i=r=>{var s,i;const o=null!==(s=e.getStyle(t,r))&&void 0!==s?s:"",a=null!==(i=e.getStyle(n,r))&&void 0!==i?i:"";return qe(o)&&qe(a)&&o!==a};return V(r,(e=>{const t=t=>V(t,(t=>t===e));if(!t(s)&&t(up)){const e=X(s,(e=>V(up,(t=>Ue(e,t)))));return V(e,i)}return i(e)}))},fp=(e,t,n)=>B.from(n.container()).filter(Tr).exists((r=>{const s=e?0:-1;return t(r.data.charAt(n.offset()+s))})),gp=O(fp,!0,Vd),vp=O(fp,!1,Vd),yp=e=>{const t=e.container();return Tr(t)&&(0===t.data.length||hs(t.data)&&Zu.isBookmarkNode(t.parentNode))},_p=(e,t)=>n=>B.from(Wc(e?0:-1,n)).filter(t).isSome(),bp=e=>Or(e)&&"block"===Un(un.fromDom(e),"display"),wp=e=>Pr(e)&&!(e=>vr(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),xp=_p(!0,bp),Mp=_p(!1,bp),Sp=_p(!0,Ir),Tp=_p(!1,Ir),Cp=_p(!0,xr),Ep=_p(!1,xr),kp=_p(!0,wp),Lp=_p(!1,wp),Ap=e=>{const t=no(e,"br"),n=X((e=>{const t=[];let n=e.dom;for(;n;)t.push(un.fromDom(n)),n=n.lastChild;return t})(e).slice(-1),ts);t.length===n.length&&W(n,Qn)},Dp=e=>{Zn(e),Kn(e,un.fromHtml('<br data-mce-bogus="1">'))},Op=e=>{kn(e).each((t=>{wn(t).each((n=>{Qr(e)&&ts(t)&&Qr(n)&&Qn(t)}))}))},Rp=(e,t,n)=>{return gn(t,e)?(r=((e,t)=>{const n=M(t)?t:I;let r=e.dom;const s=[];for(;null!==r.parentNode&&void 0!==r.parentNode;){const e=r.parentNode,t=un.fromDom(e);if(s.push(t),!0===n(t))break;r=e}return s})(e,(e=>n(e)||fn(e,t))),r.slice(0,-1)):[];var r},Pp=(e,t)=>Rp(e,t,I),Np=(e,t)=>[e].concat(Pp(e,t)),Ip=(e,t,n)=>xd(e,t,n,yp),zp=(e,t)=>Q(Np(un.fromDom(t.container()),e),Qr),Bp=(e,t,n)=>Ip(e,t.dom,n).forall((e=>zp(t,n).fold((()=>!1===$c(e,n,t.dom)),(r=>!1===$c(e,n,t.dom)&&gn(r,un.fromDom(e.container())))))),Fp=(e,t,n)=>zp(t,n).fold((()=>Ip(e,t.dom,n).forall((e=>!1===$c(e,n,t.dom)))),(t=>Ip(e,t.dom,n).isNone())),Hp=O(Fp,!1),jp=O(Fp,!0),Up=O(Bp,!1),Yp=O(Bp,!0),Vp=e=>td(e).exists(ts),$p=(e,t,n)=>{const r=X(Np(un.fromDom(n.container()),t),Qr),s=ce(r).getOr(t);return bd(e,s.dom,n).filter(Vp)},Wp=(e,t)=>td(t).exists(ts)||$p(!0,e,t).isSome(),Gp=(e,t)=>(e=>B.from(e.getNode(!0)).map(un.fromDom))(t).exists(ts)||$p(!1,e,t).isSome(),qp=O($p,!1),Xp=O($p,!0),Kp=e=>Ko.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Jp=(e,t)=>{const n=X(Np(un.fromDom(t.container()),e),Qr);return ce(n).getOr(e)},Zp=(e,t)=>Kp(t)?vp(t):vp(t)||Td(Jp(e,t).dom,t).exists(vp),Qp=(e,t)=>Kp(t)?gp(t):gp(t)||Sd(Jp(e,t).dom,t).exists(gp),ef=e=>td(e).bind((e=>Yr(e,Ht))).exists((e=>(e=>Y(["pre","pre-wrap"],e))(Un(e,"white-space")))),tf=(e,t)=>((e,t)=>Td(e.dom,t).isNone())(e,t)||((e,t)=>Sd(e.dom,t).isNone())(e,t)||Hp(e,t)||jp(e,t)||Gp(e,t)||Wp(e,t),nf=(e,t)=>!ef(t)&&(Hp(e,t)||Up(e,t)||Gp(e,t)||Zp(e,t)),rf=(e,t)=>!ef(t)&&(jp(e,t)||Yp(e,t)||Wp(e,t)||Qp(e,t)),sf=(e,t)=>nf(e,t)||rf(e,(e=>{const t=e.container(),n=e.offset();return Tr(t)&&n<t.data.length?Ko(t,n+1):e})(t)),of=(e,t)=>Ud(e.charAt(t)),af=e=>{const t=e.container();return Tr(t)&&je(t.data,cs)},lf=e=>{const t=e.data,n=(e=>{const t=e.split("");return $(t,((e,n)=>Ud(e)&&n>0&&n<t.length-1&&$d(t[n-1])&&$d(t[n+1])?" ":e)).join("")})(t);return n!==t&&(e.data=n,!0)},cf=(e,t)=>B.some(t).filter(af).bind((t=>{const n=t.container(),r=((e,t)=>{const n=t.data,r=Ko(t,0);return!(!of(n,0)||sf(e,r)||(t.data=" "+n.slice(1),0))})(e,n)||lf(n)||((e,t)=>{const n=t.data,r=Ko(t,n.length-1);return!(!of(n,n.length-1)||sf(e,r)||(t.data=n.slice(0,-1)+" ",0))})(e,n);return r?B.some(t):B.none()})),df=(e,t,n)=>{if(0===n)return;const r=un.fromDom(e),s=Ur(r,Qr).getOr(r),i=e.data.slice(t,t+n),o=t+n>=e.data.length&&rf(s,Ko(e,e.data.length)),a=0===t&&nf(s,Ko(e,0));e.replaceData(t,n,js(i,4,a,o))},uf=(e,t)=>{const n=e.data.slice(t),r=n.length-We(n).length;df(e,t,r)},hf=(e,t)=>{const n=e.data.slice(0,t),r=n.length-Ge(n).length;df(e,t-r,r)},mf=(e,t,n,r=!0)=>{const s=Ge(e.data).length,i=r?e:t,o=r?t:e;return r?i.appendData(o.data):i.insertData(0,o.data),Qn(un.fromDom(o)),n&&uf(i,s),i},pf=(e,t)=>((e,t)=>{const n=e.container(),r=e.offset();return!1===Ko.isTextPosition(e)&&n===t.parentNode&&r>Ko.before(t).offset()})(t,e)?Ko(t.container(),t.offset()-1):t,ff=e=>{return Ns(e.previousSibling)?B.some((t=e.previousSibling,Tr(t)?Ko(t,t.data.length):Ko.after(t))):e.previousSibling?Ed(e.previousSibling):B.none();var t},gf=e=>{return Ns(e.nextSibling)?B.some((t=e.nextSibling,Tr(t)?Ko(t,0):Ko.before(t))):e.nextSibling?Cd(e.nextSibling):B.none();var t},vf=(e,t)=>ff(t).orThunk((()=>gf(t))).orThunk((()=>((e,t)=>{const n=Ko.before(t.previousSibling?t.previousSibling:t.parentNode);return Td(e,n).fold((()=>Sd(e,Ko.after(t))),B.some)})(e,t))),yf=(e,t)=>gf(t).orThunk((()=>ff(t))).orThunk((()=>((e,t)=>Sd(e,Ko.after(t)).fold((()=>Td(e,Ko.before(t))),B.some))(e,t))),_f=(e,t,n)=>((e,t,n)=>e?yf(t,n):vf(t,n))(e,t,n).map(O(pf,n)),bf=(e,t,n)=>{n.fold((()=>{e.focus()}),(n=>{e.selection.setRng(n.toRange(),t)}))},wf=(e,t)=>t&&Se(e.schema.getBlockElements(),zt(t)),xf=e=>{if(Xs(e)){const t=un.fromHtml('<br data-mce-bogus="1">');return Zn(e),Kn(e,t),B.some(Ko.before(t.dom))}return B.none()},Mf=(e,t,n)=>{const r=wn(e).filter(jt),s=xn(e).filter(jt);return Qn(e),(i=r,o=s,a=t,l=(e,t,r)=>{const s=e.dom,i=t.dom,o=s.data.length;return mf(s,i,n),r.container()===i?Ko(s,o):r},i.isSome()&&o.isSome()&&a.isSome()?B.some(l(i.getOrDie(),o.getOrDie(),a.getOrDie())):B.none()).orThunk((()=>(n&&(r.each((e=>hf(e.dom,e.dom.length))),s.each((e=>uf(e.dom,0)))),t)));var i,o,a,l},Sf=(e,t,n,r=!0)=>{const s=_f(t,e.getBody(),n.dom),i=Ur(n,O(wf,e),(o=e.getBody(),e=>e.dom===o));var o;const a=Mf(n,s,((e,t)=>Se(e.schema.getTextInlineElements(),zt(t)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(xf).fold((()=>{r&&bf(e,t,a)}),(n=>{r&&bf(e,t,B.some(n))}))},Tf=e=>no(e,"td,th"),Cf=(e,t)=>({start:e,end:t}),Ef=xa([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),kf=(e,t)=>Gr(un.fromDom(e),"td,th",t),Lf=e=>!fn(e.start,e.end),Af=(e,t)=>Iu(e.start,t).bind((n=>Iu(e.end,t).bind((e=>It(fn(n,e),n))))),Df=e=>t=>Af(t,e).map((e=>((e,t,n)=>({rng:e,table:t,cells:n}))(t,e,Tf(e)))),Of=(e,t,n,r)=>{if(n.collapsed||!e.forall(Lf))return B.none();if(t.isSameTable){const t=e.bind(Df(r));return B.some({start:t,end:t})}{const e=kf(n.startContainer,r),t=kf(n.endContainer,r),s=e.bind((e=>t=>Iu(t,e).bind((e=>de(Tf(e)).map((e=>Cf(t,e))))))(r)).bind(Df(r)),i=t.bind((e=>t=>Iu(t,e).bind((e=>ce(Tf(e)).map((e=>Cf(e,t))))))(r)).bind(Df(r));return B.some({start:s,end:i})}},Rf=(e,t)=>ee(e,(e=>fn(e,t))),Pf=e=>Nt(Rf(e.cells,e.rng.start),Rf(e.cells,e.rng.end),((t,n)=>e.cells.slice(t,n+1))),Nf=(e,t,n)=>e.exists((e=>((e,t)=>!Lf(e)&&Af(e,t).exists((e=>{const t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})))(e,n)&&Fu(e.start,t))),If=(e,t)=>{const{startTable:n,endTable:r}=t,s=e.cloneRange();return n.each((e=>s.setStartAfter(e.dom))),r.each((e=>s.setEndBefore(e.dom))),s},zf=(e,t)=>{const n=(e=>t=>fn(e,t))(e),r=((e,t)=>{const n=kf(e.startContainer,t),r=kf(e.endContainer,t);return Nt(n,r,Cf)})(t,n),s=((e,t)=>{const n=e=>Iu(un.fromDom(e),t),r=n(e.startContainer),s=n(e.endContainer),i=r.isSome(),o=s.isSome(),a=Nt(r,s,fn).getOr(!1);return{startTable:r,endTable:s,isStartInTable:i,isEndInTable:o,isSameTable:a,isMultiTable:!a&&i&&o}})(t,n);return Nf(r,t,n)?r.map((e=>Ef.singleCellTable(t,e.start))):s.isMultiTable?((e,t,n,r)=>Of(e,t,n,r).bind((({start:e,end:r})=>{const s=e.bind(Pf).getOr([]),i=r.bind(Pf).getOr([]);if(s.length>0&&i.length>0){const e=If(n,t);return B.some(Ef.multiTable(s,i,e))}return B.none()})))(r,s,t,n):((e,t,n,r)=>Of(e,t,n,r).bind((({start:e,end:t})=>e.or(t))).bind((e=>{const{isSameTable:r}=t,s=Pf(e).getOr([]);if(r&&e.cells.length===s.length)return B.some(Ef.fullTable(e.table));if(s.length>0){if(r)return B.some(Ef.partialTable(s,B.none()));{const e=If(n,t);return B.some(Ef.partialTable(s,B.some({...t,rng:e})))}}return B.none()})))(r,s,t,n)},Bf=e=>{var t;return(8===Bt(t=e)||"#comment"===zt(t)?wn(e):kn(e)).bind(Bf).orThunk((()=>B.some(e)))},Ff=e=>W(e,(e=>{Kt(e,"contenteditable"),Dp(e)})),Hf=(e,t,n,r)=>{const s=n.cloneRange();r?(s.setStart(n.startContainer,n.startOffset),s.setEndAfter(t.dom.lastChild)):(s.setStartBefore(t.dom.firstChild),s.setEnd(n.endContainer,n.endOffset)),Vf(e,s,t,!1).each((e=>e()))},jf=e=>{const t=Nu(e),n=un.fromDom(e.selection.getNode());Nr(n.dom)&&Xs(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&V(t,(e=>fn(e,n)))&&$t(n,"data-mce-selected","1")},Uf=(e,t,n)=>B.some((()=>{const r=e.selection.getRng(),s=n.bind((({rng:n,isStartInTable:s})=>{const i=((e,t)=>B.from(e.dom.getParent(t,e.dom.isBlock)).map(un.fromDom))(e,s?n.endContainer:n.startContainer);n.deleteContents(),((e,t,n)=>{n.each((n=>{t?Qn(n):(Dp(n),e.selection.setCursorLocation(n.dom,0))}))})(e,s,i.filter(Xs));const o=s?t[0]:t[t.length-1];return Hf(e,o,r,s),Xs(o)?B.none():B.some(s?t.slice(1):t.slice(0,-1))})).getOr(t);Ff(s),jf(e)})),Yf=(e,t,n,r)=>B.some((()=>{const s=e.selection.getRng(),i=t[0],o=n[n.length-1];Hf(e,i,s,!0),Hf(e,o,s,!1);const a=Xs(i)?t:t.slice(1),l=Xs(o)?n:n.slice(0,-1);Ff(a.concat(l)),r.deleteContents(),jf(e)})),Vf=(e,t,n,r=!0)=>B.some((()=>{t.deleteContents();const s=Bf(n).getOr(n),i=un.fromDom(e.dom.getParent(s.dom,e.dom.isBlock));if(Xs(i)&&(Dp(i),r&&e.selection.setCursorLocation(i.dom,0)),!fn(n,i)){const e=Pt(bn(i),n)?[]:bn(o=i).map(Tn).map((e=>X(e,(e=>!fn(o,e))))).getOr([]);W(e.concat(Tn(n)),(e=>{fn(e,i)||gn(e,i)||!Xs(e)||Qn(e)}))}var o})),$f=(e,t)=>B.some((()=>Sf(e,!1,t))),Wf=(e,t,n,r)=>qf(t,r).fold((()=>((e,t,n)=>zf(t,n).bind((t=>t.fold(O(Vf,e),O($f,e),O(Uf,e),O(Yf,e)))))(e,t,n)),(t=>((e,t)=>Xf(e,t))(e,t))),Gf=(e,t)=>Q(Np(t,e),os),qf=(e,t)=>{return Q(Np(t,e),(n="caption",e=>Ht(e)&&zt(e)===n));var n},Xf=(e,t)=>B.some((()=>{Dp(t),e.selection.setCursorLocation(t.dom,0)})),Kf=(e,t,n,r,s)=>wd(n,e.getBody(),s).fold((()=>B.some(C)),(i=>((e,t,n,r)=>Cd(e.dom).bind((s=>Ed(e.dom).map((e=>t?n.isEqual(s)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(s))))).getOr(!0))(r,n,s,i)?((e,t)=>Xf(e,t))(e,r):((e,t,n)=>qf(e,un.fromDom(n.getNode())).fold((()=>B.some(C)),(e=>It(!fn(e,t),C))))(t,r,i))),Jf=(e,t,n,r)=>{const s=Ko.fromRangeStart(e.selection.getRng());return Gf(n,r).bind((r=>Xs(r)?Xf(e,r):((e,t,n,r,s)=>wd(n,e.getBody(),s).bind((e=>Gf(t,un.fromDom(e.getNode())).bind((e=>fn(e,r)?B.none():B.some(C))))))(e,n,t,r,s)))},Zf=(e,t)=>e?Cp(t):Ep(t),Qf=(e,t,n)=>{const r=un.fromDom(e.getBody());return qf(r,n).fold((()=>Jf(e,t,r,n).orThunk((()=>It(((e,t)=>{const n=Ko.fromRangeStart(e.selection.getRng());return Zf(t,n)||bd(t,e.getBody(),n).exists((e=>Zf(t,e)))})(e,t),C)))),(n=>((e,t,n,r)=>{const s=Ko.fromRangeStart(e.selection.getRng());return Xs(r)?Xf(e,r):Kf(e,n,t,r,s)})(e,t,r,n)))},eg=(e,t)=>{const n=un.fromDom(e.selection.getStart(!0)),r=Nu(e);return e.selection.isCollapsed()&&0===r.length?Qf(e,t,n):((e,t,n)=>{const r=un.fromDom(e.getBody()),s=e.selection.getRng();return 0!==n.length?Uf(e,n,B.none()):Wf(e,r,s,t)})(e,n,r)},tg=(e,t)=>{for(;t&&t!==e;){if(Rr(t)||Pr(t))return t;t=t.parentNode}return null},ng=(e,t)=>{t(e),e.firstChild&&ng(e.firstChild,t),e.next&&ng(e.next,t)},rg=(e,t,n,r)=>{const s=n.name;for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i.name===s){const e=r.nodes[s];e?e.nodes.push(n):r.nodes[s]={filter:i,nodes:[n]}}}if(n.attributes)for(let e=0,s=t.length;e<s;e++){const s=t[e],i=s.name;if(i in n.attributes.map){const e=r.attributes[i];e?e.nodes.push(n):r.attributes[i]={filter:s,nodes:[n]}}}},sg=(e,t)=>{const n=e=>{fe(e,(e=>{const n=X(e.nodes,(e=>x(e.parent)));W(e.filter.callbacks,(r=>{r(n,e.filter.name,t)}))}))};n(e.nodes),n(e.attributes)},ig=(e,t,n,r={})=>{const s=((e,t,n)=>{const r={nodes:{},attributes:{}};return n.firstChild&&ng(n.firstChild,(n=>{rg(e,t,n,r)})),r})(e,t,n);sg(s,r)},og=(e,t,n,r)=>{t.insert&&n[r.name]?r.empty().append(new Qm("br",1)):r.empty().append(new Qm("#text",3)).value=cs},ag=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,lg=(e,t,n,r)=>r.isEmpty(t,n,(t=>((e,t)=>{const n=e.getElementRule(t.name);return n&&n.paddEmpty})(e,t))),cg=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const e of r)t.isValidChild(n.name,e.name)||cg(e,t,n);e.unwrap()}},dg=(e,t,n=C)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),i=t.getWhitespaceElements(),o=Rt.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let l=0;l<e.length;l++){const c=e[l];let d,u,h;if(!c.parent||a.has(c))continue;if(r[c.name]&&"li"===c.parent.name){let e=c.next;for(;e&&r[e.name];)e.name="li",a.add(e),c.parent.insert(e,c.parent),e=e.next;c.unwrap();continue}const m=[c];for(d=c.parent;d&&!t.isValidChild(d.name,c.name)&&!o[d.name];d=d.parent)m.push(d);if(d&&m.length>1)if(t.isValidChild(d.name,c.name)){m.reverse(),u=m[0].clone(),n(u);let e=u;for(let r=0;r<m.length-1;r++){t.isValidChild(e.name,m[r].name)?(h=m[r].clone(),n(h),e.append(h)):h=e;for(let e=m[r].firstChild;e&&e!==m[r+1];){const t=e.next;h.append(e),e=t}e=h}lg(t,s,i,u)?d.insert(c,m[0],!0):(d.insert(u,m[0],!0),d.insert(c,u)),d=m[0],(lg(t,s,i,d)||ag(d,"br"))&&d.empty().remove()}else cg(c,t);else if(c.parent){if("li"===c.name){let e=c.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(c);continue}if(e=c.next,e&&("ul"===e.name||"ol"===e.name)){e.insert(c,e.firstChild,!0);continue}const t=new Qm("ul",1);n(t),c.wrap(t);continue}if(t.isValidChild(c.parent.name,"div")&&t.isValidChild("div",c.name)){const e=new Qm("div",1);n(e),c.wrap(e)}else cg(c,t)}}},ug=e=>{const t=Ko.fromRangeStart(e),n=Ko.fromRangeEnd(e),r=e.commonAncestorContainer;return bd(!1,r,n).map((s=>!$c(t,n,r)&&$c(t,s,r)?((e,t,n,r)=>{const s=document.createRange();return s.setStart(e,t),s.setEnd(n,r),s})(t.container(),t.offset(),s.container(),s.offset()):e)).getOr(e)},hg=e=>e.collapsed?e:ug(e),mg=(e,t)=>e.getBlockElements()[t.name]&&(e=>e.firstChild&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===cs)(t.firstChild),pg=(e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((e,t)=>{const n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||mg(e,t))})(e,r)&&(r=r.prev),!(!n||n!==r)&&("ul"===n.name||"ol"===n.name)},fg=e=>e&&e.firstChild&&e.firstChild===e.lastChild&&(e=>e.data===cs||Dr(e))(e.firstChild),gg=e=>{return e.length>0&&(!(t=e[e.length-1]).firstChild||fg(t))?e.slice(0,-1):e;var t},vg=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},yg=(e,t)=>{const n=Ko.after(e),r=fd(t).prev(n);return r?r.toRange():null},_g=(e,t,n)=>{const r=e.parentNode;return Rt.each(t,(t=>{r.insertBefore(t,e)})),((e,t)=>{const n=Ko.before(e),r=fd(t).next(n);return r?r.toRange():null})(e,n)},bg=(e,t,n,r)=>{const s=((e,t,n)=>{const r=t.serialize(n);return(e=>{const t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e})(e.createFragment(r))})(t,e,r),i=vg(t,n.startContainer),o=gg((a=s.firstChild,X(a.childNodes,(e=>"LI"===e.nodeName))));var a;const l=t.getRoot(),c=e=>{const r=Ko.fromRangeStart(n),s=fd(t.getRoot()),o=1===e?s.prev(r):s.next(r);return!o||vg(t,o.getNode())!==i};return c(1)?_g(i,o,l):c(2)?((e,t,n,r)=>(r.insertAfter(t.reverse(),e),yg(t[0],n)))(i,o,l,t):((e,t,n,r)=>{const s=((e,t)=>{const n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]})(e,r),i=e.parentNode;return i.insertBefore(s[0],e),Rt.each(t,(t=>{i.insertBefore(t,e)})),i.insertBefore(s[1],e),i.removeChild(e),yg(t[t.length-1],n)})(i,o,l,n)},wg=Nr,xg=(e,t)=>{let n;const r=e.dom,s=e.selection;if(!t)return;s.scrollIntoView(t);const i=tg(e.getBody(),t);if("false"===r.getContentEditable(i))return r.remove(t),void s.select(i);let o=r.createRng();const a=t.previousSibling;if(Tr(a)){o.setStart(a,a.nodeValue.length);const e=t.nextSibling;Tr(e)&&(a.appendData(e.data),e.parentNode.removeChild(e))}else o.setStartBefore(t),o.setEndBefore(t);const l=r.getParent(t,r.isBlock);r.remove(t),l&&r.isEmpty(l)&&(Zn(un.fromDom(l)),o.setStart(l,0),o.setEnd(l,0),wg(l)||(e=>!!e.getAttribute("data-mce-fragment"))(l)||!(n=(t=>{let n=Ko.fromRangeStart(t);if(n=fd(e.getBody()).next(n),n)return n.toRange()})(o))?r.add(l,r.create("br",{"data-mce-bogus":"1"})):(o=n,r.remove(l))),s.setRng(o)},Mg=e=>{const t=e.dom,n=hg(e.selection.getRng());e.selection.setRng(n);const r=t.getParent(n.startContainer,wg);((e,t,n)=>{if(null!==n)return n===e.getParent(t.endContainer,wg)&&Fu(un.fromDom(n),t);return!1})(t,n,r)?Vf(e,n,un.fromDom(r)):e.getDoc().execCommand("Delete",!1,null)},Sg=(e,t,n)=>{let r,s,i;const o=e.selection,a=e.dom,l=e.parser,c=n.merge,d=cp({validate:!0},e.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,u),s=o.getRng();const h=s.startContainer||(s.parentElement?s.parentElement():null),m=e.getBody();h===m&&o.isCollapsed()&&a.isBlock(m.firstChild)&&((e,t)=>t&&!e.schema.getVoidElements()[t.nodeName])(e,m.firstChild)&&a.isEmpty(m.firstChild)&&(s=a.createRng(),s.setStart(m.firstChild,0),s.setEnd(m.firstChild,0),o.setRng(s)),o.isCollapsed()||Mg(e),r=o.getNode();const p={context:r.nodeName.toLowerCase(),data:n.data,insert:!0},f=l.parse(t,p);if(!0===n.paste&&pg(e.schema,f)&&((e,t)=>!!vg(e,t))(a,r))return s=bg(d,a,o.getRng(),f),o.setRng(s),t;if((e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(f),i=f.lastChild,"mce_marker"===i.attr("id")){const t=i;for(i=i.prev;i;i=i.walk(!0))if(3===i.type||!a.isBlock(i.name)){e.schema.isValidChild(i.parent.name,"span")&&i.parent.insert(t,i,"br"===i.name);break}}if(e._selectionOverrides.showBlockCaretContainer(r),p.invalid){e.selection.setContent(u),r=o.getNode();const n=e.getBody();for(9===r.nodeType?r=i=n:i=r;i!==n;)r=i,i=i.parentNode;t=r===n?n.innerHTML:a.getOuterHTML(r);const s=l.parse(t);for(let e=s;e;e=e.walk())if("mce_marker"===e.attr("id")){e.replace(f);break}const c=f.children(),h=f.parent.name;f.unwrap();const m=X(c,(t=>!e.schema.isValidChild(h,t.name)));dg(m,e.schema),ig(l.getNodeFilters(),l.getAttributeFilters(),s),t=d.serialize(s),r===n?a.setHTML(n,t):a.setOuterHTML(r,t)}else t=d.serialize(f),((e,t,n)=>{if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{const r=n.firstChild,s=n.lastChild;!r||r===s&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}})(e,t,r);var g;return((e,t)=>{const n=e.schema.getTextInlineElements(),r=e.dom;if(t){const t=e.getBody(),s=op(r);Rt.each(r.select("*[data-mce-fragment]"),(e=>{if(x(n[e.nodeName.toLowerCase()])&&mp(r,e))for(let n=e.parentNode;x(n)&&n!==t&&!pp(r,e,n);n=n.parentNode)if(s.compare(n,e)){r.remove(e,!0);break}}))}})(e,c),xg(e,a.get("mce_marker")),g=e.getBody(),Rt.each(g.getElementsByTagName("*"),(e=>{e.removeAttribute("data-mce-fragment")})),((e,t)=>{B.from(e.getParent(t,"td,th")).map(un.fromDom).each(Op)})(a,o.getStart()),t},Tg=e=>e instanceof Qm,Cg=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),!0!==n&&(e=>{Rm(e)&&Cd(e.getBody()).each((t=>{const n=t.getNode(),r=xr(n)?Cd(n).getOr(t):t;e.selection.setRng(r.toRange())}))})(e)},Eg=(e,t,n)=>B.from(e.getBody()).map((r=>Tg(t)?((e,t,n,r)=>{ig(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const s=cp({validate:!1},e.schema).serialize(n),i=as(un.fromDom(t))?s:Rt.trim(s);return Cg(e,i,r.no_selection),{content:n,html:i}})(e,r,t,n):((e,t,n,r)=>{if(0===n.length||/^\s+$/.test(n)){const s='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+s+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+s+"</li>");const i=Ya(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(n=s,n=e.dom.createHTML(i,Va(e),n)):n||(n=s),Cg(e,n,r.no_selection),{content:n,html:n}}{"raw"!==r.format&&(n=cp({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const s=as(un.fromDom(t))?n:Rt.trim(n);return Cg(e,s,r.no_selection),{content:s,html:s}}})(e,r,t,n))).getOr({content:t,html:Tg(n.content)?"":n.content}),kg=(e,t)=>((e,t)=>{const n=e.dom;return n.parentNode?Vr(un.fromDom(n.parentNode),(n=>!fn(e,n)&&t(n))):B.none()})(e,t).isSome(),Lg=e=>M(e)?e:I,Ag=(e,t,n)=>{const r=t(e),s=Lg(n);return r.orThunk((()=>s(e)?B.none():((e,t,n)=>{let r=e.dom;const s=Lg(n);for(;r.parentNode;){r=r.parentNode;const e=un.fromDom(r),n=t(e);if(n.isSome())return n;if(s(e))break}return B.none()})(e,t,s)))},Dg=ou,Og=(e,t,n)=>{const r=e.formatter.get(n);if(r)for(let n=0;n<r.length;n++){const s=r[n];if(mu(s)&&!1===s.inherit&&e.dom.is(t,s.selector))return!0}return!1},Rg=(e,t,n,r,s)=>{const i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,(t=>!!Og(e,t,n)||(t.parentNode===i||!!Ig(e,t,n,r,!0)))),!!Ig(e,t,n,r,s))},Pg=(e,t,n)=>!(!pu(n)||!Dg(t,n.inline))||(!(!hu(n)||!Dg(t,n.block))||!!mu(n)&&(vr(t)&&e.is(t,n.selector))),Ng=(e,t,n,r,s,i)=>{const o=n[r];if(M(n.onmatch))return n.onmatch(t,n,r);if(o)if(b(o.length)){for(const a in o)if(Se(o,a)){const l="attributes"===r?e.getAttrib(t,a):lu(e,t,a),c=iu(o[a],i),d=w(l)||Xe(l);if(d&&w(c))continue;if(s&&d&&!n.exact)return!1;if((!s||n.exact)&&!Dg(l,au(c,a)))return!1}}else for(let n=0;n<o.length;n++)if("attributes"===r?e.getAttrib(t,o[n]):lu(e,t,o[n]))return!0;return!0},Ig=(e,t,n,r,s)=>{const i=e.formatter.get(n),o=e.dom;if(i&&t)for(let n=0;n<i.length;n++){const a=i[n];if(Pg(e.dom,t,a)&&Ng(o,t,a,"attributes",s,r)&&Ng(o,t,a,"styles",s,r)){const n=a.classes;if(n)for(let s=0;s<n.length;s++)if(!e.dom.hasClass(t,iu(n[s],r)))return;return a}}},zg=(e,t,n,r,s)=>{if(r)return Rg(e,r,t,n,s);if(r=e.selection.getNode(),Rg(e,r,t,n,s))return!0;const i=e.selection.getStart();return!(i===r||!Rg(e,i,t,n,s))},Bg=(e,t)=>{const n=t=>fn(t,un.fromDom(e.getBody()));return B.from(e.selection.getStart(!0)).bind((r=>Ag(un.fromDom(r),(n=>he(t,(t=>((t,n)=>Ig(e,t.dom,n)?B.some(n):B.none())(n,t)))),n))).getOrNull()},Fg=(e,t,n)=>J(n,((n,r)=>{const s=((e,t)=>V(e.formatter.get(t),(e=>{const t=e=>e.length>1&&"%"===e.charAt(0);return V(["styles","attributes"],(n=>Me(e,n).exists((e=>{const n=v(e)?e:xe(e);return V(n,t)}))))})))(e,r);return e.formatter.matchNode(t,r,{},s)?n.concat([r]):n}),[]),Hg=us,jg="_mce_caret",Ug=e=>(e=>{const t=[];for(;e;){if(3===e.nodeType&&e.nodeValue!==Hg||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t})(e).length>0,Yg=e=>{if(e){const t=new Kr(e,e);for(e=t.current();e;e=t.next())if(Tr(e))return e}return null},Vg=e=>{const t=un.fromTag("span");return Wt(t,{id:jg,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Kn(t,un.fromText(Hg)),t},$g=(e,t,n=!0)=>{const r=e.dom,s=e.selection;if(Ug(t))Sf(e,!1,un.fromDom(t),n);else{const e=s.getRng(),n=r.getParent(t,r.isBlock),i=e.startContainer,o=e.startOffset,a=e.endContainer,l=e.endOffset,c=(e=>{const t=Yg(e);return t&&t.nodeValue.charAt(0)===Hg&&t.deleteData(0,1),t})(t);r.remove(t,!0),i===c&&o>0&&e.setStart(c,o-1),a===c&&l>0&&e.setEnd(c,l-1),n&&r.isEmpty(n)&&Dp(un.fromDom(n)),s.setRng(e)}},Wg=(e,t,n=!0)=>{const r=e.dom,s=e.selection;if(t)$g(e,t,n);else if(!(t=Ad(e.getBody(),s.getStart())))for(;t=r.get(jg);)$g(e,t,!1)},Gg=(e,t)=>(e.appendChild(t),t),qg=(e,t)=>{const n=K(e,((e,t)=>Gg(e,t.cloneNode(!1))),t);return Gg(n,n.ownerDocument.createTextNode(Hg))},Xg=(e,t,n,r)=>{const s=e.dom,i=e.selection;let o,a,l;const c=[],d=i.getRng(),u=d.startContainer,h=d.startOffset;for(a=u,3===u.nodeType&&(h!==u.nodeValue.length&&(o=!0),a=a.parentNode);a;){if(Ig(e,a,t,n,r)){l=a;break}a.nextSibling&&(o=!0),c.push(a),a=a.parentNode}if(l)if(o){const s=i.getBookmark();d.collapse(!0);let o=Au(e,d,e.formatter.get(t),!0);o=Fh(o),e.formatter.remove(t,n,o,r),i.moveToBookmark(s)}else{const o=Ad(e.getBody(),l),a=Vg(!1).dom;((e,t,n)=>{const r=e.dom,s=r.getParent(n,O(nu,e));s&&r.isEmpty(s)?n.parentNode.replaceChild(t,n):(Ap(un.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))})(e,a,null!==o?o:l);const d=((e,t,n,r,s,i)=>{const o=e.formatter,a=e.dom,l=X(me(o.get()),(e=>e!==r&&!je(e,"removeformat"))),c=Fg(e,n,l);if(X(c,(t=>!uu(e,t,r))).length>0){const e=n.cloneNode(!1);return a.add(t,e),o.remove(r,s,e,i),a.remove(e),B.some(e)}return B.none()})(e,a,l,t,n,r),u=qg(c.concat(d.toArray()),a);$g(e,o,!1),i.setCursorLocation(u,1),s.isEmpty(l)&&s.remove(l)}},Kg=e=>{e.on("mouseup keydown",(t=>{((e,t)=>{const n=e.selection,r=e.getBody();Wg(e,null,!1),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==Hg||Wg(e,Ad(r,n.getStart())),37!==t&&39!==t||Wg(e,Ad(r,n.getStart()))})(e,t.keyCode)}))},Jg=(e,t)=>{const n=e.schema.getTextInlineElements();return Se(n,zt(t))&&!Ld(t.dom)&&!wr(t.dom)},Zg={},Qg=Ae,ev=ke;((e,t)=>{Zg[e]||(Zg[e]=[]),Zg[e].push(t)})("pre",(e=>{const t=e.selection.getRng();let n;const r=e=>s(e.previousSibling)&&-1!==De(n,e.previousSibling),s=yr(["pre"]);t.collapsed||(n=e.selection.getSelectedBlocks(),ev(Qg(Qg(n,s),r),(e=>{((e,t)=>{const n=un.fromDom(t),r=yn(n).dom;Qn(n),Jn(un.fromDom(e),[un.fromTag("br",r),un.fromTag("br",r),...Tn(n)])})(e.previousSibling,e)})))}));const tv=Rt.each,nv=e=>vr(e)&&!jd(e)&&!Ld(e)&&!wr(e),rv=(e,t)=>{for(let n=e;n;n=n[t]){if(Tr(n)&&qe(n.data))return e;if(vr(n)&&!jd(n))return n}return e},sv=(e,t,n)=>{const r=op(e);if(t&&n&&(t=rv(t,"previousSibling"),n=rv(n,"nextSibling"),r.compare(t,n))){for(let e=t.nextSibling;e&&e!==n;){const n=e;e=e.nextSibling,t.appendChild(n)}return e.remove(n),Rt.each(Rt.grep(n.childNodes),(e=>{t.appendChild(e)})),t}return n},iv=(e,t,n,r)=>{if(r&&!1!==t.merge_siblings){const t=sv(e,tu(r),r);sv(e,t,tu(t,!0))}},ov=(e,t,n)=>{tv(e.childNodes,(e=>{nv(e)&&(t(e)&&n(e),e.hasChildNodes()&&ov(e,t,n))}))},av=(e,t)=>n=>!(!n||!lu(e,n,t)),lv=(e,t,n)=>r=>{e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,r)},cv=xa([{keep:[]},{rename:["name"]},{removed:[]}]),dv=/^(src|href|style)$/,uv=Rt.each,hv=ou,mv=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),pv=(e,t,n)=>{let r=t[n?"startContainer":"endContainer"],s=t[n?"startOffset":"endOffset"];if(vr(r)){const e=r.childNodes.length-1;!n&&s&&s--,r=r.childNodes[s>e?e:s]}return Tr(r)&&n&&s>=r.nodeValue.length&&(r=new Kr(r,e.getBody()).next()||r),Tr(r)&&!n&&0===s&&(r=new Kr(r,e.getBody()).prev()||r),r},fv=(e,t)=>{const n=t?"firstChild":"lastChild";if((e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&e[n]){const t=e[n];return"TR"===e.nodeName&&t[n]||t}return e},gv=(e,t,n,r)=>{const s=e.create(n,r);return t.parentNode.insertBefore(s,t),s.appendChild(t),s},vv=(e,t,n,r,s)=>{const i=un.fromDom(t),o=un.fromDom(e.create(r,s)),a=n?Sn(i):Mn(i);return Jn(o,a),n?(Gn(i,o),Xn(o,i)):(qn(i,o),Kn(o,i)),o.dom},yv=(e,t,n)=>{const r=t.parentNode;let s;const i=e.dom,o=Ya(e);hu(n)&&r===i.getRoot()&&(n.list_block&&hv(t,n.list_block)||W(ue(t.childNodes),(t=>{ru(e,o,t.nodeName.toLowerCase())?s?s.appendChild(t):(s=gv(i,t,o),i.setAttribs(s,Va(e))):s=null}))),(e=>mu(e)&&pu(e)&&Pt(Me(e,"mixed"),!0))(n)&&!hv(n.inline,t)||i.remove(t,!0)},_v=(e,t,n,r,s)=>{let i;const o=e.dom;if(!Pg(o,r,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(r,t))return cv.keep();const a=r;if(pu(t)&&"all"===t.remove&&v(t.preserve_attributes)){const e=X(o.getAttribs(a),(e=>Y(t.preserve_attributes,e.name.toLowerCase())));if(o.removeAllAttribs(a),W(e,(e=>o.setAttrib(a,e.name,e.value))),e.length>0)return cv.rename("span")}if("all"!==t.remove){uv(t.styles,((e,r)=>{e=au(iu(e,n),r+""),S(r)&&(r=e,s=null),(t.remove_similar||!s||hv(lu(o,s,r),e))&&o.setStyle(a,r,""),i=!0})),i&&""===o.getAttrib(a,"style")&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),uv(t.attributes,((e,r)=>{let i;if(e=iu(e,n),S(r)&&(r=e,s=null),t.remove_similar||!s||hv(o.getAttrib(s,r),e)){if("class"===r&&(e=o.getAttrib(a,r))&&(i="",W(e.split(/\s+/),(e=>{/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)})),i))return void o.setAttrib(a,r,i);if(dv.test(r)&&a.removeAttribute("data-mce-"+r),"style"===r&&yr(["li"])(a)&&"none"===o.getStyle(a,"list-style-type"))return a.removeAttribute(r),void o.setStyle(a,"list-style-type","none");"class"===r&&a.removeAttribute("className"),a.removeAttribute(r)}})),uv(t.classes,(e=>{e=iu(e,n),s&&!o.hasClass(s,e)||o.removeClass(a,e)}));const e=o.getAttribs(a);for(let t=0;t<e.length;t++){const n=e[t].nodeName;if(0!==n.indexOf("_")&&0!==n.indexOf("data-"))return cv.keep()}}return"none"!==t.remove?(yv(e,a,t),cv.removed()):cv.keep()},bv=(e,t,n,r,s)=>_v(e,t,n,r,s).fold(I,(t=>(e.dom.rename(r,t),!0)),z),wv=(e,t,n,r)=>_v(e,t,n,r,r).fold(L(r),(t=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,t))),L(null)),xv=(e,t,n,r,s)=>{const i=e.formatter.get(t),o=i[0];let a=!0;const l=e.dom,c=e.selection,d=r=>{const a=((e,t,n,r,s)=>{let i;return W(du(e.dom,t.parentNode).reverse(),(t=>{if(!i&&"_start"!==t.id&&"_end"!==t.id){const o=Ig(e,t,n,r,s);o&&!1!==o.split&&(i=t)}})),i})(e,r,t,n,s);return((e,t,n,r,s,i,o,a)=>{let l,c,d;const u=e.dom;if(n){const h=n.parentNode;for(let n=r.parentNode;n&&n!==h;n=n.parentNode){l=u.clone(n,!1);for(let n=0;n<t.length&&(l=wv(e,t[n],a,l),null!==l);n++);l&&(c&&l.appendChild(c),d||(d=l),c=l)}!i||o.mixed&&u.isBlock(n)||(r=u.split(n,r)),c&&(s.parentNode.insertBefore(c,s),d.appendChild(s),pu(o)&&iv(u,o,0,c))}return r})(e,i,a,r,r,!0,o,n)},u=t=>V(i,(r=>bv(e,r,n,t,t))),h=t=>{let n=!0,r=!1;vr(t)&&l.getContentEditable(t)&&(n=a,a="true"===l.getContentEditable(t),r=!0);const s=ue(t.childNodes);if(a&&!r){const e=u(t)||V(i,(e=>Pg(l,t,e))),n=t.parentNode;!e&&x(n)&&fu(o)&&u(n)}if(o.deep&&s.length){for(let e=0;e<s.length;e++)h(s[e]);r&&(a=n)}W(["underline","line-through","overline"],(n=>{vr(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&cu(l,t.parentNode)===n&&bv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},null,t)}))},m=e=>{const t=l.get(e?"_start":"_end");let n=t[e?"firstChild":"lastChild"];return(e=>jd(e)&&vr(e)&&("_start"===e.id||"_end"===e.id))(n)&&(n=n[e?"firstChild":"lastChild"]),Tr(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),l.remove(t,!0),n},p=t=>{let n,r,s=Au(e,t,i,t.collapsed);if(o.split){if(s=Fh(s),n=pv(e,s,!0),r=pv(e,s),n!==r){if(n=fv(n,!0),r=fv(r,!1),mv(l,n,r)){const e=B.from(n.firstChild).getOr(n);return d(vv(l,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(mv(l,r,n)){const e=B.from(r.lastChild).getOr(r);return d(vv(l,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}n=gv(l,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=gv(l,r,"span",{id:"_end","data-mce-type":"bookmark"});const e=l.createRng();e.setStartAfter(n),e.setEndBefore(r),Du(l,e,(e=>{W(e,(e=>{jd(e)||jd(e.parentNode)||d(e)}))})),d(n),d(r),n=m(!0),r=m()}else n=r=d(n);s.startContainer=n.parentNode?n.parentNode:n,s.startOffset=l.nodeIndex(n),s.endContainer=r.parentNode?r.parentNode:r,s.endOffset=l.nodeIndex(r)+1}Du(l,s,(e=>{W(e,h)}))};if(r){if(Qd(r)){const e=l.createRng();e.setStartBefore(r),e.setEndAfter(r),p(e)}else p(r);nh(e,t,r,n)}else if("false"!==l.getContentEditable(c.getNode()))c.isCollapsed()&&pu(o)&&!Nu(e).length?Xg(e,t,n,s):(Yu(c,!0,(()=>{Uu(e,p)})),pu(o)&&zg(e,t,n,c.getStart())&&eu(l,c,c.getRng()),e.nodeChanged()),nh(e,t,r,n);else{r=c.getNode();for(let t=0;t<i.length&&(!i[t].ceFalseOverride||!bv(e,i[t],n,r,r));t++);nh(e,t,r,n)}},Mv=Rt.each,Sv=(e,t,n,r)=>{Mv(t,(t=>{pu(t)&&Mv(e.dom.select(t.inline,r),(r=>{nv(r)&&bv(e,t,n,r,t.exact?r:null)})),((e,t,n)=>{if(t.clear_child_styles){const r=t.links?"*:not(a)":"*";tv(e.select(r,n),(n=>{nv(n)&&tv(t.styles,((t,r)=>{e.setStyle(n,r,"")}))}))}})(e.dom,t,r)}))},Tv=Rt.each,Cv=e=>vr(e)&&!jd(e)&&!Ld(e)&&!wr(e),Ev=(e,t,n,r)=>{const s=e.formatter.get(t),i=s[0],o=!r&&e.selection.isCollapsed(),a=e.dom,l=e.selection,c=(e,t=i)=>{if(M(t.onformat)&&t.onformat(e,t,n,r),Tv(t.styles,((t,r)=>{a.setStyle(e,r,iu(t,n))})),t.styles){const t=a.getAttrib(e,"style");t&&a.setAttrib(e,"data-mce-style",t)}Tv(t.attributes,((t,r)=>{a.setAttrib(e,r,iu(t,n))})),Tv(t.classes,(t=>{t=iu(t,n),a.hasClass(e,t)||a.addClass(e,t)}))},d=(e,t)=>{let n=!1;return Tv(e,(e=>!!mu(e)&&(x(e.collapsed)&&e.collapsed!==o?void 0:a.is(t,e.selector)&&!Ld(t)?(c(t,e),n=!0,!1):void 0))),n},u=e=>{if(p(e)){const t=a.create(e);return c(t),t}return null},h=(r,o,a)=>{const l=[];let h=!0;const m=i.inline||i.block,p=u(m);Du(r,o,(o=>{let u;const f=o=>{let g=!1,v=h;const y=o.nodeName.toLowerCase(),_=o.parentNode,b=_.nodeName.toLowerCase();if(vr(o)&&r.getContentEditable(o)&&(v=h,h="true"===r.getContentEditable(o),g=!0),Dr(o)&&!((e,t,n,r)=>{if(El(e)&&pu(t)){const t={...e.schema.getTextBlockElements(),td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}},s=kg(un.fromDom(n),(e=>Ld(e.dom)));return Te(t,r)&&Xs(un.fromDom(n.parentNode),!1)&&!s}return!1})(e,i,o,b))return u=null,void(hu(i)&&r.remove(o));if(hu(i)&&i.wrapper&&Ig(e,o,t,n))u=null;else{if(h&&!g&&hu(i)&&!i.wrapper&&nu(e,y)&&ru(e,b,m)){const e=r.rename(o,m);return c(e),l.push(e),void(u=null)}if(mu(i)){let e=d(s,o);if(!e&&x(_)&&fu(i)&&(e=d(s,_)),!pu(i)||e)return void(u=null)}!h||g||!ru(e,m,y)||!ru(e,b,m)||!a&&Tr(o)&&hs(o.data)||Ld(o)||pu(i)&&r.isBlock(o)?(u=null,W(ue(o.childNodes),f),g&&(h=v),u=null):(u||(u=r.clone(p,!1),o.parentNode.insertBefore(u,o),l.push(u)),u.appendChild(o))}};W(o,f)})),!0===i.links&&W(l,(e=>{const t=e=>{"A"===e.nodeName&&c(e,i),W(ue(e.childNodes),t)};t(e)})),W(l,(o=>{const a=(e=>{let t=0;return W(e.childNodes,(e=>{(e=>x(e)&&Tr(e)&&0===e.length)(e)||jd(e)||t++})),t})(o);!(l.length>1)&&r.isBlock(o)||0!==a?(pu(i)||hu(i)&&i.wrapper)&&(i.exact||1!==a||(o=(e=>{const t=Q(e.childNodes,Cv).filter((e=>Pg(r,e,i)));return t.map((t=>{const n=r.clone(t,!1);return c(n),r.replace(n,e,!0),r.remove(t,!0),n})).getOr(e)})(o)),Sv(e,s,n,o),((e,t,n,r,s)=>{Ig(e,s.parentNode,n,r)&&bv(e,t,r,s)||t.merge_with_parents&&e.dom.getParent(s.parentNode,(i=>{if(Ig(e,i,n,r))return bv(e,t,r,s),!0}))})(e,i,t,n,o),((e,t,n,r)=>{t.styles&&t.styles.backgroundColor&&ov(r,av(e,"fontSize"),lv(e,"backgroundColor",iu(t.styles.backgroundColor,n)))})(r,i,n,o),((e,t,n,r)=>{const s=t=>{if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType){const n=cu(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Rt.walk(r,s,"childNodes"),s(r))})(r,i,0,o),((e,t,n,r)=>{!pu(t)||"sub"!==t.inline&&"sup"!==t.inline||(ov(r,av(e,"fontSize"),lv(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))})(r,i,0,o),iv(r,i,0,o)):r.remove(o,!0)}))};if("false"!==a.getContentEditable(l.getNode())){if(i){if(r)if(Qd(r)){if(!d(s,r)){const t=a.createRng();t.setStartBefore(r),t.setEndAfter(r),h(a,Au(e,t,s),!0)}}else h(a,r,!0);else o&&pu(i)&&!Nu(e).length?((e,t,n)=>{let r,s;const i=e.selection,o=i.getRng();let a=o.startOffset;const l=o.startContainer.nodeValue;r=Ad(e.getBody(),i.getStart()),r&&(s=Yg(r));const c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&a>0&&a<l.length&&c.test(l.charAt(a))&&c.test(l.charAt(a-1))){const r=i.getBookmark();o.collapse(!0);let s=Au(e,o,e.formatter.get(t));s=Fh(s),e.formatter.apply(t,n,s),i.moveToBookmark(r)}else r&&s.nodeValue===Hg||(d=e.getDoc(),u=Vg(!0).dom,r=d.importNode(u,!0),s=r.firstChild,o.insertNode(r),a=1),e.formatter.apply(t,n,r),i.setCursorLocation(s,a);var d,u})(e,t,n):(l.setRng(hg(l.getRng())),Yu(l,!0,(()=>{Uu(e,((t,n)=>{const r=n?t:Au(e,t,s);h(a,r,!1)}))})),eu(a,l,l.getRng()),e.nodeChanged());((e,t)=>{ev(Zg[e],(e=>{e(t)}))})(t,e)}th(e,t,r,n)}else{r=l.getNode();for(let e=0,t=s.length;e<t;e++){const t=s[e];if(t.ceFalseOverride&&mu(t)&&a.is(r,t.selector)){c(r,t);break}}th(e,t,r,n)}},kv=e=>Se(e,"vars"),Lv=e=>e.selection.getStart(),Av=(e,t,n,r,s)=>Z(t,(t=>{const i=e.formatter.matchNode(t,n,null!=s?s:{},r);return!b(i)}),(t=>!!Og(e,t,n)||!r&&x(e.formatter.matchNode(t,n,s,!0)))),Dv=(e,t)=>{const n=null!=t?t:Lv(e);return X(du(e.dom,n),(e=>vr(e)&&!wr(e)))},Ov=(e,t,n)=>{const r=Dv(e,t);fe(n,((n,s)=>{const i=n=>{const i=Av(e,r,s,n.similar,kv(n)?n.vars:void 0),o=i.isSome();if(n.state.get()!==o){n.state.set(o);const e=i.getOr(t);kv(n)?n.callback(o,{node:e,format:s,parents:r}):W(n.callbacks,(t=>t(o,{node:e,format:s,parents:r})))}};W([n.withSimilar,n.withoutSimilar],i),W(n.withVars,i)}))},Rv=(e,t,n,r,s,i)=>(null===t.get()&&((e,t)=>{e.set({}),t.on("NodeChange",(n=>{Ov(t,n.element,e.get())})),t.on("FormatApply FormatRemove",(n=>{const r=B.from(n.node).map((e=>Qd(e)?e:e.startContainer)).bind((e=>vr(e)?B.some(e):B.from(e.parentElement))).getOrThunk((()=>Lv(t)));Ov(t,r,e.get())}))})(t,e),((e,t,n,r,s,i)=>{const o=t.get();W(n.split(","),(t=>{const n=Me(o,t).getOrThunk((()=>{const e={withSimilar:{state:Wi(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Wi(!1),similar:!1,callbacks:[]},withVars:[]};return o[t]=e,e})),a=()=>{const n=Dv(e);return Av(e,n,t,s,i).isSome()};if(b(i)){const e=s?n.withSimilar:n.withoutSimilar;e.callbacks.push(r),1===e.callbacks.length&&e.state.set(a())}else n.withVars.push({state:Wi(a()),similar:s,vars:i,callback:r})})),t.set(o)})(e,t,n,r,s,i),{unbind:()=>((e,t,n)=>{const r=e.get();W(t.split(","),(e=>Me(r,e).each((t=>{r[e]={withSimilar:{...t.withSimilar,callbacks:X(t.withSimilar.callbacks,(e=>e!==n))},withoutSimilar:{...t.withoutSimilar,callbacks:X(t.withoutSimilar.callbacks,(e=>e!==n))},withVars:X(t.withVars,(e=>e.callback!==n))}})))),e.set(r)})(t,n,r)});var Pv=Object.hasOwnProperty,Nv=Object.setPrototypeOf,Iv=Object.isFrozen,zv=Object.getPrototypeOf,Bv=Object.getOwnPropertyDescriptor,Fv=Object.freeze,Hv=Object.seal,jv=Object.create,Uv="undefined"!=typeof Reflect&&Reflect,Yv=Uv.apply,Vv=Uv.construct;Yv||(Yv=function(e,t,n){return e.apply(t,n)}),Fv||(Fv=function(e){return e}),Hv||(Hv=function(e){return e}),Vv||(Vv=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var $v,Wv=ny(Array.prototype.forEach),Gv=ny(Array.prototype.pop),qv=ny(Array.prototype.push),Xv=ny(String.prototype.toLowerCase),Kv=ny(String.prototype.match),Jv=ny(String.prototype.replace),Zv=ny(String.prototype.indexOf),Qv=ny(String.prototype.trim),ey=ny(RegExp.prototype.test),ty=($v=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vv($v,t)});function ny(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Yv(e,t,r)}}function ry(e,t){Nv&&Nv(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var s=Xv(r);s!==r&&(Iv(t)||(t[n]=s),r=s)}e[r]=!0}return e}function sy(e){var t=jv(null),n=void 0;for(n in e)Yv(Pv,e,[n])&&(t[n]=e[n]);return t}function iy(e,t){for(;null!==e;){var n=Bv(e,t);if(n){if(n.get)return ny(n.get);if("function"==typeof n.value)return ny(n.value)}e=zv(e)}return function(e){return console.warn("fallback value for",e),null}}var oy=Fv(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ay=Fv(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ly=Fv(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),cy=Fv(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),dy=Fv(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),uy=Fv(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hy=Fv(["#text"]),my=Fv(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),py=Fv(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fy=Fv(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gy=Fv(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vy=Hv(/\{\{[\s\S]*|[\s\S]*\}\}/gm),yy=Hv(/<%[\s\S]*|[\s\S]*%>/gm),_y=Hv(/^data-[\-\w.\u00B7-\uFFFF]/),by=Hv(/^aria-[\-\w]+$/),wy=Hv(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xy=Hv(/^(?:\w+script|data):/i),My=Hv(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Sy=Hv(/^html$/i),Ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Cy(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Ey=function(){return"undefined"==typeof window?null:window},ky=function(e,t){if("object"!==(void 0===e?"undefined":Ty(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+s+" could not be created."),null}};var Ly=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ey(),n=function(t){return e(t)};if(n.version="2.3.6",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,s=t.document,i=t.DocumentFragment,o=t.HTMLTemplateElement,a=t.Node,l=t.Element,c=t.NodeFilter,d=t.NamedNodeMap,u=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,h=t.HTMLFormElement,m=t.DOMParser,p=t.trustedTypes,f=l.prototype,g=iy(f,"cloneNode"),v=iy(f,"nextSibling"),y=iy(f,"childNodes"),_=iy(f,"parentNode");if("function"==typeof o){var b=s.createElement("template");b.content&&b.content.ownerDocument&&(s=b.content.ownerDocument)}var w=ky(p,r),x=w?w.createHTML(""):"",M=s,S=M.implementation,T=M.createNodeIterator,C=M.createDocumentFragment,E=M.getElementsByTagName,k=r.importNode,L={};try{L=sy(s).documentMode?s.documentMode:{}}catch(e){}var A={};n.isSupported="function"==typeof _&&S&&void 0!==S.createHTMLDocument&&9!==L;var D=vy,O=yy,R=_y,P=by,N=xy,I=My,z=wy,B=null,F=ry({},[].concat(Cy(oy),Cy(ay),Cy(ly),Cy(dy),Cy(hy))),H=null,j=ry({},[].concat(Cy(my),Cy(py),Cy(fy),Cy(gy))),U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,V=null,$=!0,W=!0,G=!1,q=!1,X=!1,K=!1,J=!1,Z=!1,Q=!1,ee=!1,te=!0,ne=!0,re=!1,se={},ie=null,oe=ry({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ae=null,le=ry({},["audio","video","img","source","image","track"]),ce=null,de=ry({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml",pe=me,fe=!1,ge=void 0,ve=["application/xhtml+xml","text/html"],ye="text/html",_e=void 0,be=null,we=s.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},Me=function(e){be&&be===e||(e&&"object"===(void 0===e?"undefined":Ty(e))||(e={}),e=sy(e),B="ALLOWED_TAGS"in e?ry({},e.ALLOWED_TAGS):F,H="ALLOWED_ATTR"in e?ry({},e.ALLOWED_ATTR):j,ce="ADD_URI_SAFE_ATTR"in e?ry(sy(de),e.ADD_URI_SAFE_ATTR):de,ae="ADD_DATA_URI_TAGS"in e?ry(sy(le),e.ADD_DATA_URI_TAGS):le,ie="FORBID_CONTENTS"in e?ry({},e.FORBID_CONTENTS):oe,Y="FORBID_TAGS"in e?ry({},e.FORBID_TAGS):{},V="FORBID_ATTR"in e?ry({},e.FORBID_ATTR):{},se="USE_PROFILES"in e&&e.USE_PROFILES,$=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,q=e.SAFE_FOR_TEMPLATES||!1,X=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,Q=e.RETURN_DOM_FRAGMENT||!1,ee=e.RETURN_TRUSTED_TYPE||!1,J=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,ne=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,z=e.ALLOWED_URI_REGEXP||z,pe=e.NAMESPACE||me,e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ge=ge=-1===ve.indexOf(e.PARSER_MEDIA_TYPE)?ye:e.PARSER_MEDIA_TYPE,_e="application/xhtml+xml"===ge?function(e){return e}:Xv,q&&(W=!1),Q&&(Z=!0),se&&(B=ry({},[].concat(Cy(hy))),H=[],!0===se.html&&(ry(B,oy),ry(H,my)),!0===se.svg&&(ry(B,ay),ry(H,py),ry(H,gy)),!0===se.svgFilters&&(ry(B,ly),ry(H,py),ry(H,gy)),!0===se.mathMl&&(ry(B,dy),ry(H,fy),ry(H,gy))),e.ADD_TAGS&&(B===F&&(B=sy(B)),ry(B,e.ADD_TAGS)),e.ADD_ATTR&&(H===j&&(H=sy(H)),ry(H,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&ry(ce,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(ie===oe&&(ie=sy(ie)),ry(ie,e.FORBID_CONTENTS)),ne&&(B["#text"]=!0),X&&ry(B,["html","head","body"]),B.table&&(ry(B,["tbody"]),delete Y.tbody),Fv&&Fv(e),be=e)},Se=ry({},["mi","mo","mn","ms","mtext"]),Te=ry({},["foreignobject","desc","title","annotation-xml"]),Ce=ry({},["title","style","font","a","script"]),Ee=ry({},ay);ry(Ee,ly),ry(Ee,cy);var ke=ry({},dy);ry(ke,uy);var Le=function(e){var t=_(e);t&&t.tagName||(t={namespaceURI:me,tagName:"template"});var n=Xv(e.tagName),r=Xv(t.tagName);return e.namespaceURI===he?t.namespaceURI===me?"svg"===n:t.namespaceURI===ue?"svg"===n&&("annotation-xml"===r||Se[r]):Boolean(Ee[n]):e.namespaceURI===ue?t.namespaceURI===me?"math"===n:t.namespaceURI===he?"math"===n&&Te[r]:Boolean(ke[n]):e.namespaceURI===me&&(!(t.namespaceURI===he&&!Te[r])&&(!(t.namespaceURI===ue&&!Se[r])&&(!ke[n]&&(Ce[n]||!Ee[n]))))},Ae=function(e){qv(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=x}catch(t){e.remove()}}},De=function(e,t){try{qv(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){qv(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!H[e])if(Z||Q)try{Ae(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Oe=function(e){var t=void 0,n=void 0;if(J)e="<remove></remove>"+e;else{var r=Kv(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var i=w?w.createHTML(e):e;if(pe===me)try{t=(new m).parseFromString(i,ge)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(pe,"template",null);try{t.documentElement.innerHTML=fe?"":i}catch(e){}}var o=t.body||t.documentElement;return e&&n&&o.insertBefore(s.createTextNode(n),o.childNodes[0]||null),pe===me?E.call(t,X?"html":"body")[0]:X?t.documentElement:o},Re=function(e){return T.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Pe=function(e){return e instanceof h&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},Ne=function(e){return"object"===(void 0===a?"undefined":Ty(a))?e instanceof a:e&&"object"===(void 0===e?"undefined":Ty(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ie=function(e,t,r){A[e]&&Wv(A[e],(function(e){e.call(n,t,r,be)}))},ze=function(e){var t=void 0;if(Ie("beforeSanitizeElements",e,null),Pe(e))return Ae(e),!0;if(ey(/[\u0080-\uFFFF]/,e.nodeName))return Ae(e),!0;var r=_e(e.nodeName);if(Ie("uponSanitizeElement",e,{tagName:r,allowedTags:B}),e.hasChildNodes()&&!Ne(e.firstElementChild)&&(!Ne(e.content)||!Ne(e.content.firstElementChild))&&ey(/<[/\w]/g,e.innerHTML)&&ey(/<[/\w]/g,e.textContent))return Ae(e),!0;if("select"===r&&ey(/<template/i,e.innerHTML))return Ae(e),!0;if(!B[r]||Y[r]){if(!Y[r]&&Fe(r)){if(U.tagNameCheck instanceof RegExp&&ey(U.tagNameCheck,r))return!1;if(U.tagNameCheck instanceof Function&&U.tagNameCheck(r))return!1}if(ne&&!ie[r]){var s=_(e)||e.parentNode,i=y(e)||e.childNodes;if(i&&s)for(var o=i.length-1;o>=0;--o)s.insertBefore(g(i[o],!0),v(e))}return Ae(e),!0}return e instanceof l&&!Le(e)?(Ae(e),!0):"noscript"!==r&&"noembed"!==r||!ey(/<\/no(script|embed)/i,e.innerHTML)?(q&&3===e.nodeType&&(t=e.textContent,t=Jv(t,D," "),t=Jv(t,O," "),e.textContent!==t&&(qv(n.removed,{element:e.cloneNode()}),e.textContent=t)),Ie("afterSanitizeElements",e,null),!1):(Ae(e),!0)},Be=function(e,t,n){if(te&&("id"===t||"name"===t)&&(n in s||n in we))return!1;if(W&&!V[t]&&ey(R,t));else if($&&ey(P,t));else if(!H[t]||V[t]){if(!(Fe(e)&&(U.tagNameCheck instanceof RegExp&&ey(U.tagNameCheck,e)||U.tagNameCheck instanceof Function&&U.tagNameCheck(e))&&(U.attributeNameCheck instanceof RegExp&&ey(U.attributeNameCheck,t)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(t))||"is"===t&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&ey(U.tagNameCheck,n)||U.tagNameCheck instanceof Function&&U.tagNameCheck(n))))return!1}else if(ce[t]);else if(ey(z,Jv(n,I,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Zv(n,"data:")||!ae[e]){if(G&&!ey(N,Jv(n,I,"")));else if(n)return!1}else;return!0},Fe=function(e){return e.indexOf("-")>0},He=function(e){var t=void 0,n=void 0,r=void 0,s=void 0;Ie("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};for(s=i.length;s--;){var a=t=i[s],l=a.name,c=a.namespaceURI;n=Qv(t.value),r=_e(l);var d=n;if(o.attrName=r,o.attrValue=n,o.keepAttr=!0,o.forceKeepAttr=void 0,Ie("uponSanitizeAttribute",e,o),n=o.attrValue,!o.forceKeepAttr)if(o.keepAttr)if(ey(/\/>/i,n))De(l,e);else{q&&(n=Jv(n,D," "),n=Jv(n,O," "));var u=_e(e.nodeName);if(Be(u,r,n)){if(n!==d)try{c?e.setAttributeNS(c,l,n):e.setAttribute(l,n)}catch(t){De(l,e)}}else De(l,e)}else De(l,e)}Ie("afterSanitizeAttributes",e,null)}},je=function e(t){var n=void 0,r=Re(t);for(Ie("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Ie("uponSanitizeShadowNode",n,null),ze(n)||(n.content instanceof i&&e(n.content),He(n));Ie("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,s){var o=void 0,l=void 0,c=void 0,d=void 0,u=void 0;if((fe=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ne(e)){if("function"!=typeof e.toString)throw ty("toString is not a function");if("string"!=typeof(e=e.toString()))throw ty("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Ty(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Ne(e))return t.toStaticHTML(e.outerHTML)}return e}if(K||Me(s),n.removed=[],"string"==typeof e&&(re=!1),re){if(e.nodeName){var h=_e(e.nodeName);if(!B[h]||Y[h])throw ty("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof a)1===(l=(o=Oe("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?o=l:o.appendChild(l);else{if(!Z&&!q&&!X&&-1===e.indexOf("<"))return w&&ee?w.createHTML(e):e;if(!(o=Oe(e)))return Z?null:ee?x:""}o&&J&&Ae(o.firstChild);for(var m=Re(re?e:o);c=m.nextNode();)3===c.nodeType&&c===d||ze(c)||(c.content instanceof i&&je(c.content),He(c),d=c);if(d=null,re)return e;if(Z){if(Q)for(u=C.call(o.ownerDocument);o.firstChild;)u.appendChild(o.firstChild);else u=o;return H.shadowroot&&(u=k.call(r,u,!0)),u}var p=X?o.outerHTML:o.innerHTML;return X&&B["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&ey(Sy,o.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+p),q&&(p=Jv(p,D," "),p=Jv(p,O," ")),w&&ee?w.createHTML(p):p},n.setConfig=function(e){Me(e),K=!0},n.clearConfig=function(){be=null,K=!1},n.isValidAttribute=function(e,t,n){be||Me({});var r=_e(e),s=_e(t);return Be(r,s,n)},n.addHook=function(e,t){"function"==typeof t&&(A[e]=A[e]||[],qv(A[e],t))},n.removeHook=function(e){A[e]&&Gv(A[e])},n.removeHooks=function(e){A[e]&&(A[e]=[])},n.removeAllHooks=function(){A={}},n}();const Ay=(e,t,n)=>{e.addNodeFilter("font",(e=>{W(e,(e=>{const r=t.parse(e.attr("style")),s=e.attr("color"),i=e.attr("face"),o=e.attr("size");s&&(r.color=s),i&&(r["font-family"]=i),o&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),((e,t)=>{W(t,(t=>{e.attr(t,null)}))})(e,["color","face","size"])}))}))},Dy=(e,t,n)=>{const r=Si();t.convert_fonts_to_spans&&Ay(e,r,Rt.explode(t.font_size_legacy_values)),((e,t,n)=>{e.addNodeFilter("strike",(e=>{const r="html4"!==t.type;W(e,(e=>{if(r)e.name="s";else{const t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}}))}))})(e,n,r)},Oy=e=>{let t;const n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}},Ry=(e,t)=>{let n;try{n=atob(t)}catch(e){return B.none()}const r=new Uint8Array(n.length);for(let e=0;e<r.length;e++)r[e]=n.charCodeAt(e);return B.some(new Blob([r],{type:e}))},Py=e=>{return 0===e.indexOf("blob:")?(e=>new Promise(((t,n)=>{const r=()=>{n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=()=>{200===n.status?t(n.response):r()},n.onerror=r,n.send()}catch(e){r()}})))(e):0===e.indexOf("data:")?(t=e,new Promise((e=>{const{type:n,data:r}=Oy(t);Ry(n,r).fold((()=>e(new Blob([]))),e)}))):null;var t},Ny=e=>new Promise((t=>{const n=new FileReader;n.onloadend=()=>{t(n.result)},n.readAsDataURL(e)}));let Iy=0;const zy=e=>(e||"blobid")+Iy++,By=(e,t)=>{const n={};return{findAll:(r,s)=>{s||(s=z);const i=X((e=>e?ue(e.getElementsByTagName("img")):[])(r),(t=>{const n=t.src;return!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===kt.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n)&&s(t):0===n.indexOf("data:")&&s(t))))})),o=$(i,(e=>{if(void 0!==n[e.src])return new Promise((t=>{n[e.src].then((n=>{if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})}))}));const r=new Promise(((n,r)=>{((e,t,n,r)=>{let s,i;if(0===t.src.indexOf("blob:"))return i=e.getByUri(t.src),void(i?n({image:t,blobInfo:i}):Py(t.src).then((r=>{Ny(r).then((o=>{s=Oy(o).data,i=e.create(zy(),r,s),e.add(i),n({image:t,blobInfo:i})}))}),(e=>{r(e)})));const{data:o,type:a}=Oy(t.src);s=o,i=e.getByData(s,a),i?n({image:t,blobInfo:i}):Py(t.src).then((r=>{i=e.create(zy(),r,s),e.add(i),n({image:t,blobInfo:i})}),(e=>{r(e)}))})(t,e,n,r)})).then((e=>(delete n[e.image.src],e))).catch((t=>(delete n[e.src],t)));return n[e.src]=r,r}));return Promise.all(o)}}},Fy=(e,t)=>{const{blob_cache:n}=t,r=e=>{const t=e.attr("src");(e=>e.attr("src")===kt.transparentSrc||x(e.attr("data-mce-placeholder")))(e)||(e=>x(e.attr("data-mce-bogus")))(e)||(e=>{const t=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(e);return t?B.some({type:t[1],data:decodeURIComponent(t[2])}):B.none()})(t).bind((({type:e,data:t})=>B.from(n.getByData(t,e)).orThunk((()=>Ry(e,t).map((e=>{const r=n.create(zy(),e,t);return n.add(r),r})))))).each((t=>{e.attr("src",t.blobUri())}))};n&&e.addAttributeFilter("src",(e=>W(e,r)))},Hy=Rt.each,jy=Rt.trim,Uy="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Yy={ftp:21,http:80,https:443,mailto:25},Vy=["img","video"],$y=(e,t,n)=>{const r=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t);return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!e.allow_html_data_urls&&(/^data:image\//i.test(r)?((e,t)=>x(e)?!e:!x(t)||!Y(Vy,t))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)))};class Wy{constructor(e,t){e=jy(e),this.settings=t||{};const n=this.settings.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(n&&n.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=this.settings.base_uri?this.settings.base_uri.path:new Wy(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)e="//mce_host"+r.toAbsPath(t,e);else{const s=/([^#?]*)([#?]?.*)/.exec(e);e=(n&&n.protocol||"http")+"://mce_host"+r.toAbsPath(t,s[1])+s[2]}}e=e.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);Hy(Uy,((e,t)=>{let n=i[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),r[e]=n})),n&&(r.protocol||(r.protocol=n.protocol),r.userInfo||(r.userInfo=n.userInfo),r.port||"mce_host"!==r.host||(r.port=n.port),r.host&&"mce_host"!==r.host||(r.host=n.host),r.source=""),s&&(r.protocol="")}static parseDataUri(e){let t;const n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls)return!0;{const r=mi.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!$y(n,r,t)}}static getDocumentBaseUrl(e){let t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);this.path=t[0],this.directory=t[1],this.file=t[2],this.source="",this.getURI()}toRelative(e){let t;if("./"===e)return e;const n=new Wy(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),s=n.getURI();return r===s||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===s?r:(t=this.toRelPath(this.path,n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),t)}toAbsolute(e,t){const n=new Wy(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const t=Yy[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let n,r,s=0,i="";const o=e.substring(0,e.lastIndexOf("/")).split("/"),a=t.split("/");if(o.length>=a.length)for(n=0,r=o.length;n<r;n++)if(n>=a.length||o[n]!==a[n]){s=n+1;break}if(o.length<a.length)for(n=0,r=a.length;n<r;n++)if(n>=o.length||o[n]!==a[n]){s=n+1;break}if(1===s)return t;for(n=0,r=o.length-(s-1);n<r;n++)i+="../";for(n=s-1,r=a.length;n<r;n++)i+=n!==s-1?"/"+a[n]:a[n];return i}toAbsPath(e,t){let n,r,s=0,i=[];const o=/\/$/.test(t)?"/":"";let a=e.split("/");const l=t.split("/");for(Hy(a,(e=>{e&&i.push(e)})),a=i,n=l.length-1,i=[];n>=0;n--)0!==l[n].length&&"."!==l[n]&&(".."!==l[n]?s>0?s--:i.push(l[n]):s++);return n=a.length-s,r=n<=0?se(i).join("/"):a.slice(0,n).join("/")+"/"+se(i).join("/"),0!==r.indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const Gy=Rt.makeMap,qy=Rt.each,Xy=Rt.explode,Ky=Rt.extend,Jy={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},Zy=Rt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Qy="data-mce-type",e_=(e,t)=>{const n=Ly(),r=e.validate;let s=0;return n.addHook("uponSanitizeElement",((n,i)=>{var o,a;8===n.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(n.nodeValue)&&(n.nodeValue=" "+n.nodeValue);const l=i.tagName;if(1!==n.nodeType||"body"===l)return;const c=un.fromDom(n),d=Xt(c,Qy),u=Gt(c,"data-mce-bogus");if(!d&&p(u))return void("all"===u?Qn(c):er(c));const h=t.getElementRule(l.toLowerCase());if(!r||h){if(i.allowedTags[l]=!0,r&&!d){if(W(null!==(o=h.attributesForced)&&void 0!==o?o:[],(e=>{$t(c,e.name,"{$uid}"===e.value?"mce_"+s++:e.value)})),W(null!==(a=h.attributesDefault)&&void 0!==a?a:[],(e=>{Xt(c,e.name)||$t(c,e.name,"{$uid}"===e.value?"mce_"+s++:e.value)})),h.attributesRequired&&!V(h.attributesRequired,(e=>Xt(c,e))))return void er(c);if(h.removeEmptyAttrs&&(e=>{const t=e.dom.attributes;return null==t||0===t.length})(c))return void er(c);h.outputName&&h.outputName!==l.toLowerCase()&&yo(c,h.outputName)}}else er(c)})),n.addHook("uponSanitizeAttribute",((n,s)=>{const i=n.tagName.toLowerCase(),{attrName:o,attrValue:a}=s;s.keepAttr=!r||t.isValid(i,o)||Ue(o,"data-")||Ue(o,"aria-"),o in Zy&&$y(e,a,i)&&(s.keepAttr=!1),s.keepAttr?(s.allowedAttributes[o]=!0,o in t.getBoolAttrs()&&(s.attrValue=o),e.allow_svg_data_urls&&Ue(a,"data:image/svg+xml")&&(s.forceKeepAttr=!0)):!n.hasAttribute(Qy)||"id"!==o&&"class"!==o&&"style"!==o||(s.forceKeepAttr=!0)})),n},t_=(e,t,n)=>{const r=e.name,s=r in n&&"title"!==r&&"textarea"!==r,i=t.childNodes;for(let t=0,r=i.length;t<r;t++){const r=i[t],o=new Qm(r.nodeName.toLowerCase(),r.nodeType);if(vr(r)){const e=r.attributes;for(let t=0,n=e.length;t<n;t++){const n=e[t];o.attr(n.name,n.value)}}else Tr(r)?(o.value=r.data,s&&(o.raw=!0)):(kr(r)||Cr(r)||Er(r))&&(o.value=r.data);t_(o,r,n),e.append(o)}},n_=(e,t,n,r)=>{const s=n.validate,i=t.getNonEmptyElements(),o=t.getWhitespaceElements(),a=Ky(Gy("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,d=/[ \t\r\n]+$/,u=e=>{for(e=e.parent;x(e);){if(e.name in o)return!0;e=e.parent}return!1},h=(t,n)=>{const s=n?t.prev:t.next;return!x(s)&&(t.parent.name in a&&(t.parent!==e||r.isRootContent))};return[e=>{if(3===e.type&&!u(e)){let t=e.value;t=t.replace(l," "),(((e,t)=>e&&(e.name in t||"br"===e.name))(e.prev,a)||h(e,!0))&&(t=t.replace(c,"")),0===t.length?e.remove():e.value=t}},e=>{var n;if(1===e.type){const n=t.getElementRule(e.name);if(s&&n){const s=lg(t,i,o,e);n.removeEmpty&&s?a[e.name]?e.remove():e.unwrap():n.paddEmpty&&(s||(e=>ag(e,"#text")&&e.firstChild.value===cs)(e))&&og(0,r,a,e)}}else if(3===e.type&&!u(e)){let t=e.value;(a[null===(n=e.next)||void 0===n?void 0:n.name]||h(e,!1))&&(t=t.replace(d,"")),0===t.length?e.remove():e.value=t}}]},r_=(e={},t=Mi())=>{const n={},r=[],s={validate:!0,root_name:"body",...e},i=new DOMParser,o=e_(s,t),a=(e,n,r="html")=>{const a="xhtml"===r?"application/xhtml+xml":"text/html",l=Se(t.getSpecialElements(),n.toLowerCase()),c=l?`<${n}>${e}</${n}>`:e,d="xhtml"===r?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${c}</body></html>`:`<body>${c}</body>`,u=i.parseFromString(d,a).body;return o.sanitize(u,((e,t)=>{const n={...Jy};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(s,a)),o.removed=[],l?u.firstChild:u},l=()=>{const e=[];for(const t in n)Se(n,t)&&e.push({name:t,callbacks:n[t]});return e},c={schema:t,addAttributeFilter:(e,t)=>{qy(Xy(e),(e=>{let n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})}))},getAttributeFilters:()=>[].concat(r),addNodeFilter:(e,t)=>{qy(Xy(e),(e=>{let r=n[e];r||(n[e]=r=[]),r.push(t)}))},getNodeFilters:l,parse:(e,n={})=>{var i;const o=s.validate,c=null!==(i=n.context)&&void 0!==i?i:s.root_name,d=a(e,c,n.format),u=new Qm(c,11);t_(u,d,t.getSpecialElements());const[h,m]=n_(u,t,s,n),p=[],f=o?e=>((e,n)=>{const r=e.parent;r&&t.children[e.name]&&!t.isValidChild(r.name,e.name)&&n.push(e)})(e,p):C,g=l(),v={nodes:{},attributes:{}},y=e=>rg(g,r,e,v);if(((e,t,n)=>{const r=[];for(let n=e,s=n;x(n);s=n,n=n.walk())W(t,(e=>e(n))),w(n.parent)&&n!==e?n=s:r.push(n);for(let e=r.length-1;e>=0;e--){const t=r[e];W(n,(e=>e(t)))}})(u,[h,y],[m,f]),p.reverse(),o&&p.length>0)if(n.context){const{pass:e,fail:r}=q(p,(e=>e.parent===u));dg(r,t,y),n.invalid=e.length>0}else dg(p,t,y);const _=((e,t)=>{var n;const r=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===r?"":!0===r?"p":r})(s,n);return _&&("body"===u.name||n.isRootContent)&&((e,n)=>{const r=Ky(Gy("script,style,head,html,body,title,meta,param"),t.getBlockElements()),i=/^[ \t\r\n]+/,o=/[ \t\r\n]+$/;let a=e.firstChild,l=null;const c=e=>{e&&(a=e.firstChild,a&&3===a.type&&(a.value=a.value.replace(i,"")),a=e.lastChild,a&&3===a.type&&(a.value=a.value.replace(o,"")))};if(t.isValidChild(e.name,n.toLowerCase())){for(;a;){const t=a.next;3===a.type||1===a.type&&"p"!==a.name&&!r[a.name]&&!a.attr(Qy)?(l||(l=new Qm(n,1),l.attr(s.forced_root_block_attrs),e.insert(l,a)),l.append(a)):(c(l),l=null),a=t}c(l)}})(u,_),n.invalid||sg(v,n),u}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",((e,t,r)=>{const s=Rt.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),o=n.getWhitespaceElements();s.body=1;for(let t=0,a=e.length;t<a;t++){let a=e[t],l=a.parent;if(s[a.parent.name]&&a===l.lastChild){let e=a.prev;for(;e;){const t=e.name;if("span"!==t||"bookmark"!==e.attr("data-mce-type")){"br"===t&&(a=null);break}e=e.prev}if(a&&(a.remove(),lg(n,i,o,l))){const e=n.getElementRule(l.name);e&&(e.removeEmpty?l.remove():e.paddEmpty&&og(0,r,s,l))}}else{let e=a;for(;l&&l.firstChild===e&&l.lastChild===e&&(e=l,!s[l.name]);)l=l.parent;if(e===l){const e=new Qm("#text",3);e.value=cs,a.replace(e)}}}})),e.addAttributeFilter("href",(e=>{let n=e.length;const r=e=>{const t=e?Rt.trim(e):"";return/\b(noopener)\b/g.test(t)?t:(e=>e.split(" ").filter((e=>e.length>0)).concat(["noopener"]).sort().join(" "))(t)};if(!t.allow_unsafe_link_target)for(;n--;){const t=e[n];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",r(t.attr("rel")))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(e=>{let t,n,r,s,i=e.length;for(;i--;)if(s=e[i],"a"===s.name&&s.firstChild&&!s.attr("href")){r=s.parent,t=s.lastChild;do{n=t.prev,r.insert(t,s),t=n}while(t)}})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(e=>{let t,n,r=e.length;for(;r--;)if(t=e[r],n=t.parent,"ul"===n.name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new Qm("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}})),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",(e=>{const t=n.getValidClasses();let r=e.length;for(;r--;){const n=e[r],s=n.attr("class").split(" ");let i="";for(let e=0;e<s.length;e++){const r=s[e];let o=!1,a=t["*"];a&&a[r]&&(o=!0),a=t[n.name],!o&&a&&a[r]&&(o=!0),o&&(i&&(i+=" "),i+=r)}i.length||(i=null),n.attr("class",i)}})),Fy(e,t)})(c,s),((e,t,n)=>{t.inline_styles&&Dy(e,t,n)})(c,s,t),c},s_=(e,t)=>{const n=(e=>Tg(e)?cp({validate:!1}).serialize(e):e)(e),r=t(n);if(r.isDefaultPrevented())return r;if(Tg(e)){if(r.content!==n){const t=r_({validate:!1,forced_root_block:!1}).parse(r.content,{context:e.name});return{...r,content:t}}return{...r,content:e}}return r},i_=(e,t)=>{if(t.no_events)return wa.value(t);{const n=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return n.isDefaultPrevented()?wa.error(sh(e,{content:"",...n}).content):wa.value(n)}},o_=(e,t,n)=>{if(n.no_events)return t;return s_(t,(t=>sh(e,{...n,content:t}))).content},a_=(e,t)=>{if(t.no_events)return wa.value(t);{const n=s_(t.content,(n=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,{...t,content:n})));return n.isDefaultPrevented()?(rh(e,n),wa.error(void 0)):wa.value(n)}},l_=(e,t,n)=>{n.no_events||rh(e,{...n,content:t})},c_=(e,t,n)=>({element:e,width:t,rows:n}),d_=(e,t)=>({element:e,cells:t}),u_=(e,t)=>({x:e,y:t}),h_=(e,t)=>{const n=parseInt(Gt(e,t),10);return isNaN(n)?1:n},m_=(e,t,n)=>{const r=e.rows;return!!(r[n]?r[n].cells:[])[t]},p_=e=>J(e,((e,t)=>t.cells.length>e?t.cells.length:e),0),f_=(e,t)=>{const n=e.rows;for(let e=0;e<n.length;e++){const r=n[e].cells;for(let n=0;n<r.length;n++)if(fn(r[n],t))return B.some(u_(n,e))}return B.none()},g_=(e,t,n,r,s)=>{const i=[],o=e.rows;for(let e=n;e<=s;e++){const n=o[e].cells,s=t<r?n.slice(t,r+1):n.slice(r,t+1);i.push(d_(o[e].element,s))}return i},v_=e=>{const t=c_(go(e),0,[]);return W(no(e,"tr"),((e,n)=>{W(no(e,"td,th"),((r,s)=>{((e,t,n,r,s)=>{const i=h_(s,"rowspan"),o=h_(s,"colspan"),a=e.rows;for(let e=n;e<n+i;e++){a[e]||(a[e]=d_(vo(r),[]));for(let r=t;r<t+o;r++)a[e].cells[r]=e===n&&r===t?s:go(s)}})(t,((e,t,n)=>{for(;m_(e,t,n);)t++;return t})(t,s,n),n,e,r)}))})),c_(t.element,p_(t.rows),t.rows)},y_=e=>((e,t)=>{const n=go(e.element),r=un.fromTag("tbody");return Jn(r,t),Kn(n,r),n})(e,(e=>$(e.rows,(e=>{const t=$(e.cells,(e=>{const t=vo(e);return Kt(t,"colspan"),Kt(t,"rowspan"),t})),n=go(e.element);return Jn(n,t),n})))(e)),__=(e,t,n)=>f_(e,t).bind((t=>f_(e,n).map((n=>((e,t,n)=>{const r=t.x,s=t.y,i=n.x,o=n.y,a=s<o?g_(e,r,s,i,o):g_(e,r,o,i,s);return c_(e.element,p_(a),a)})(e,t,n))))),b_=(e,t)=>Q(e,(e=>"li"===zt(e)&&Fu(e,t))).fold(L([]),(t=>(e=>Q(e,(e=>"ul"===zt(e)||"ol"===zt(e))))(e).map((e=>{const t=un.fromTag(zt(e)),n=be($n(e),((e,t)=>Ue(t,"list-style")));return jn(t,n),[un.fromTag("li"),t]})).getOr([]))),w_=(e,t)=>{const n=un.fromDom(t.commonAncestorContainer),r=Np(n,e),s=X(r,(e=>es(e)||Zr(e))),i=b_(r,t),o=s.concat(i.length?i:(e=>ss(e)?bn(e).filter(rs).fold(L([]),(t=>[e,t])):rs(e)?[e]:[])(n));return $(o,go)},x_=()=>Sh([]),M_=(e,t)=>((e,t)=>{const n=J(t,((e,t)=>(Kn(t,e),t)),e);return t.length>0?Sh([n]):n})(un.fromDom(t.cloneContents()),w_(e,t)),S_=(e,t)=>((e,t)=>$r(t,"table",O(fn,e)))(e,t[0]).bind((e=>{const n=t[0],r=t[t.length-1],s=v_(e);return __(s,n,r).map((e=>Sh([y_(e)])))})).getOrThunk(x_),T_=(e,t)=>{const n=Pu(t,e);return n.length>0?S_(e,n):((e,t)=>t.length>0&&t[0].collapsed?x_():M_(e,t[0]))(e,t)},C_=(e,t)=>t>=0&&t<e.length&&Vd(e.charAt(t)),E_=e=>ms(e.innerText),k_=(e,t)=>{if("text"===t.format)return(e=>B.from(e.selection.getRng()).map((t=>{const n=B.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),s=(e=>e.map((e=>e.nodeName)).getOr("div").toLowerCase())(n),i=e.dom.add(r,s,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),o=E_(i),a=ms(i.textContent);if(e.dom.remove(i),C_(a,0)||C_(a,a.length-1)){const e=n.getOr(r),t=E_(e),s=t.indexOf(o);return-1===s?o:(C_(t,s-1)?" ":"")+o+(C_(t,s+o.length)?" ":"")}return o})).getOr(""))(e);{const n=((e,t)=>{const n=e.selection.getRng(),r=e.dom.create("body"),s=e.selection.getSel(),i=jm(e,Ou(s)),o=t.contextual?T_(un.fromDom(e.getBody()),i).dom:n.cloneContents();return o&&r.appendChild(o),e.selection.serializer.serialize(r,t)})(e,t);return"tree"===t.format?n:e.selection.isCollapsed()?"":n}},L_=e=>vr(e)?e.outerHTML:Tr(e)?mi.encodeRaw(e.data,!1):kr(e)?"\x3c!--"+e.data+"--\x3e":"",A_=(e,t,n)=>{const r=(e=>{let t;const n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r})(t);if(e.hasChildNodes()&&n<e.childNodes.length){const t=e.childNodes[n];t.parentNode.insertBefore(r,t)}else e.appendChild(r)},D_=(e,t)=>(((e,t)=>{let n=0;W(e,(e=>{0===e[0]?n++:1===e[0]?(A_(t,e[1],n),n++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];n.parentNode.removeChild(n)}})(t,n)}))})(((e,t)=>{const n=e.length+t.length+2,r=new Array(n),s=new Array(n),i=(n,r,s,o,l)=>{const c=a(n,r,s,o);if(null===c||c.start===r&&c.diag===r-o||c.end===n&&c.diag===n-s){let i=n,a=s;for(;i<r||a<o;)i<r&&a<o&&e[i]===t[a]?(l.push([0,e[i]]),++i,++a):r-n>o-s?(l.push([2,e[i]]),++i):(l.push([1,t[a]]),++a)}else{i(n,c.start,s,c.start-c.diag,l);for(let t=c.start;t<c.end;++t)l.push([0,e[t]]);i(c.end,r,c.end-c.diag,o,l)}},o=(n,r,s,i)=>{let o=n;for(;o-r<i&&o<s&&e[o]===t[o-r];)++o;return((e,t,n)=>({start:e,end:t,diag:n}))(n,o,r)},a=(n,i,a,l)=>{const c=i-n,d=l-a;if(0===c||0===d)return null;const u=c-d,h=d+c,m=(h%2==0?h:h+1)/2;let p,f,g,v,y;for(r[1+m]=n,s[1+m]=i+1,p=0;p<=m;++p){for(f=-p;f<=p;f+=2){for(g=f+m,f===-p||f!==p&&r[g-1]<r[g+1]?r[g]=r[g+1]:r[g]=r[g-1]+1,v=r[g],y=v-n+a-f;v<i&&y<l&&e[v]===t[y];)r[g]=++v,++y;if(u%2!=0&&u-p<=f&&f<=u+p&&s[g-u]<=r[g])return o(s[g-u],f+n-a,i,l)}for(f=u-p;f<=u+p;f+=2){for(g=f+m-u,f===u-p||f!==u+p&&s[g+1]<=s[g-1]?s[g]=s[g+1]-1:s[g]=s[g-1],v=s[g]-1,y=v-n+a-f;v>=n&&y>=a&&e[v]===t[y];)s[g]=v--,y--;if(u%2==0&&-p<=f&&f<=p&&s[g]<=r[g+u])return o(s[g],f+n-a,i,l)}}},l=[];return i(0,e.length,0,t.length,l),l})($(ue(t.childNodes),L_),e),t),t),O_=Ne((()=>document.implementation.createHTMLDocument("undo"))),R_=e=>{const t=(n=e.getBody(),X($(ue(n.childNodes),L_),(e=>e.length>0)));var n;const r=ne(t,(t=>{const n=np(e.serializer,t);return n.length>0?[n]:[]})),s=r.join("");return(e=>-1!==e.indexOf("</iframe>"))(s)?(e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}))(r):(e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}))(s)},P_=(e,t,n)=>{const r=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?D_(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!x(r)||!Dd(r)||!r.isFakeCaret}),e.selection.moveToBookmark(r)},N_=e=>"fragmented"===e.type?e.fragments.join(""):e.content,I_=e=>{const t=un.fromTag("body",O_());return nr(t,N_(e)),W(no(t,"*[data-mce-bogus]"),er),tr(t)},z_=(e,t)=>!(!e||!t)&&(!!((e,t)=>N_(e)===N_(t))(e,t)||((e,t)=>I_(e)===I_(t))(e,t)),B_=e=>0===e.get(),F_=(e,t,n)=>{B_(n)&&(e.typing=t)},H_=(e,t)=>{e.typing&&(F_(e,!1,t),e.add())},j_=e=>({init:{bindEvents:C},undoManager:{beforeChange:(t,n)=>((e,t,n)=>{B_(t)&&n.set(ya(e.selection))})(e,t,n),add:(t,n,r,s,i,o)=>((e,t,n,r,s,i,o)=>{const a=R_(e);if(i=i||{},i=Rt.extend(i,a),!1===B_(r)||e.removed)return null;const l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:i,lastLevel:l,originalEvent:o}).isDefaultPrevented())return null;if(l&&z_(l,i))return null;t.data[n.get()]&&s.get().each((e=>{t.data[n.get()].beforeBookmark=e}));const c=Pl(e);if(c&&t.data.length>c){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}i.bookmark=ya(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(i),n.set(t.data.length-1);const d={level:i,lastLevel:l,originalEvent:o};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),i})(e,t,n,r,s,i,o),undo:(t,n,r)=>((e,t,n,r)=>{let s;return t.typing&&(t.add(),t.typing=!1,F_(t,!1,n)),r.get()>0&&(r.set(r.get()-1),s=t.data[r.get()],P_(e,s,!0),e.setDirty(!0),e.dispatch("Undo",{level:s})),s})(e,t,n,r),redo:(t,n)=>((e,t,n)=>{let r;return t.get()<n.length-1&&(t.set(t.get()+1),r=n[t.get()],P_(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r})(e,t,n),clear:(t,n)=>((e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,n),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,n)=>((e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!z_(R_(e),t.data[0]))(e,t,n),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,n)=>((e,t,n)=>(H_(e,t),e.beforeChange(),e.ignore(n),e.add()))(e,t,n),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,n,r,s)=>((e,t,n,r,s)=>{if(t.transact(r)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];P_(e,i,!0),t.transact(s)&&(t.data[n.get()-1].beforeBookmark=r)}})(e,t,n,r,s)},formatter:{match:(t,n,r,s)=>zg(e,t,n,r,s),matchAll:(t,n)=>((e,t,n)=>{const r=[],s={},i=e.selection.getStart();return e.dom.getParent(i,(i=>{for(let o=0;o<t.length;o++){const a=t[o];!s[a]&&Ig(e,i,a,n)&&(s[a]=!0,r.push(a))}}),e.dom.getRoot()),r})(e,t,n),matchNode:(t,n,r,s)=>Ig(e,t,n,r,s),canApply:t=>((e,t)=>{const n=e.formatter.get(t),r=e.dom;if(n){const t=e.selection.getStart(),s=du(r,t);for(let e=n.length-1;e>=0;e--){const t=n[e];if(!mu(t))return!0;for(let e=s.length-1;e>=0;e--)if(r.is(s[e],t.selector))return!0}}return!1})(e,t),closest:t=>Bg(e,t),apply:(t,n,r)=>Ev(e,t,n,r),remove:(t,n,r,s)=>xv(e,t,n,r,s),toggle:(t,n,r)=>((e,t,n,r)=>{const s=e.formatter.get(t);!zg(e,t,n,r)||"toggle"in s[0]&&!s[0].toggle?Ev(e,t,n,r):xv(e,t,n,r)})(e,t,n,r),formatChanged:(t,n,r,s,i)=>Rv(e,t,n,r,s,i)},editor:{getContent:t=>((e,t)=>B.from(e.getBody()).fold(L("tree"===t.format?new Qm("body",11):""),(n=>sp(e,t,n))))(e,t),setContent:(t,n)=>Eg(e,t,n),insertContent:(t,n)=>Sg(e,t,n),addVisual:t=>((e,t)=>{const n=e.dom,r=x(t)?t:e.getBody();b(e.hasVisual)&&(e.hasVisual=jl(e)),W(n.select("table,a",r),(t=>{switch(t.nodeName){case"TABLE":const r=Ul(e),s=n.getAttrib(t,"border");s&&"0"!==s||!e.hasVisual?n.removeClass(t,r):n.addClass(t,r);break;case"A":if(!n.getAttrib(t,"href")){const r=n.getAttrib(t,"name")||t.id,s=Yl(e);r&&e.hasVisual?n.addClass(t,s):n.removeClass(t,s)}}})),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((e,t,n={})=>{const r=((e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}))(n,t);return i_(e,r).fold(A,(t=>{const n=k_(e,t);return o_(e,n,t)}))})(e,t,n)},autocompleter:{addDecoration:t=>Gm(e,t),removeDecoration:()=>((e,t)=>qm(t).each((t=>{const n=e.selection.getBookmark();er(t),e.selection.moveToBookmark(n)})))(e,un.fromDom(e.getBody()))},raw:{getModel:()=>B.none()}}),U_=e=>Se(e.plugins,"rtc"),Y_=e=>{const t=e;return(e=>Me(e.plugins,"rtc").bind((e=>B.from(e.setup))))(e).fold((()=>(t.rtcInstance=j_(e),B.none())),(e=>(t.rtcInstance=(()=>{const e=L(null),t=L("");return{init:{bindEvents:C},undoManager:{beforeChange:C,add:e,undo:e,redo:e,clear:C,reset:C,hasUndo:I,hasRedo:I,transact:e,ignore:C,extra:C},formatter:{match:I,matchAll:L([]),matchNode:L(void 0),canApply:I,closest:t,apply:C,remove:C,toggle:C,formatChanged:L({unbind:C})},editor:{getContent:t,setContent:L({content:"",html:""}),insertContent:L(""),addVisual:C},selection:{getContent:t},autocompleter:{addDecoration:C,removeDecoration:C},raw:{getModel:L(B.none())}}})(),B.some((()=>e().then((e=>(t.rtcInstance=(e=>{const t=e=>f(e)?e:{},{init:n,undoManager:r,formatter:s,editor:i,selection:o,autocompleter:a,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(e,t,n)=>r.transact(n),ignore:(e,t)=>r.ignore(t),extra:(e,t,n,s)=>r.extra(n,s)},formatter:{match:(e,n,r,i)=>s.match(e,t(n),i),matchAll:s.matchAll,matchNode:s.matchNode,canApply:e=>s.canApply(e),closest:e=>s.closest(e),apply:(e,n,r)=>s.apply(e,t(n)),remove:(e,n,r,i)=>s.remove(e,t(n)),toggle:(e,n,r)=>s.toggle(e,t(n)),formatChanged:(e,t,n,r,i)=>s.formatChanged(t,n,r,i)},editor:{getContent:e=>i.getContent(e),setContent:(e,t)=>({content:i.setContent(e,t),html:""}),insertContent:(e,t)=>(i.insertContent(e),""),addVisual:i.addVisual},selection:{getContent:(e,t)=>o.getContent(t)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>B.some(l.getRawModel())}}})(e),e.rtc.isRemote))))))))},V_=e=>e.rtcInstance?e.rtcInstance:j_(e),$_=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},W_=e=>$_(e).init.bindEvents(),G_=(e,t={})=>((e,t,n)=>$_(e).selection.getContent(t,n))(e,t.format?t.format:"html",t),q_=e=>0===e.dom.length?(Qn(e),B.none()):B.some(e),X_=(e,t,n,r)=>{e.bind((e=>((r?hf:uf)(e.dom,r?e.dom.length:0),t.filter(jt).map((t=>((e,t,n,r)=>{const s=e.dom,i=t.dom,o=r?s.length:i.length;r?(mf(s,i,!1,!r),n.setStart(i,o)):(mf(i,s,!1,!r),n.setEnd(i,o))})(e,t,n,r)))))).orThunk((()=>{const e=((e,t)=>e.filter((e=>Zu.isBookmarkNode(e.dom))).bind(t?xn:wn))(t,r).or(t).filter(jt);return e.map((e=>((e,t)=>{bn(e).each((n=>{const r=e.dom;t&&nf(n,Ko(r,0))?uf(r,0):!t&&rf(n,Ko(r,r.length))&&hf(r,r.length)}))})(e,r)))}))},K_=(e,t,n={})=>{const r=((e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}))(n,t);a_(e,r).each((t=>{const n=((e,t)=>{if("raw"!==t.format){const n=e.selection.getRng(),r=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),s=r?{context:r.nodeName.toLowerCase()}:{},i=e.parser.parse(t.content,{forced_root_block:!1,...s,...t});return cp({validate:!1},e.schema).serialize(i)}return t.content})(e,t),r=e.selection.getRng();((e,t)=>{const n=B.from(t.firstChild).map(un.fromDom),r=B.from(t.lastChild).map(un.fromDom);e.deleteContents(),e.insertNode(t);const s=n.bind(wn).filter(jt).bind(q_),i=r.bind(xn).filter(jt).bind(q_);X_(s,n,e,!0),X_(i,r,e,!1),e.collapse(!1)})(r,r.createContextualFragment(n)),e.selection.setRng(r),lm(e,r),l_(e,n,t)}))},J_=(e,t,n)=>{if(e&&Se(e,t)){const r=X(e[t],(e=>e!==n));0===r.length?delete e[t]:e[t]=r}};const Z_=e=>!(!e||!e.ownerDocument)&&gn(un.fromDom(e.ownerDocument),un.fromDom(e)),Q_=(e,t,n,r)=>{let s,i;const{selectorChangedWithUnbind:o}=((e,t)=>{let n,r;const s=(t,n)=>Q(n,(n=>e.is(n,t))),i=t=>e.getParents(t,null,e.getRoot());return{selectorChangedWithUnbind:(e,o)=>(n||(n={},r={},t.on("NodeChange",(e=>{const t=e.element,o=i(t),a={};Rt.each(n,((e,t)=>{s(t,o).each((n=>{r[t]||(W(e,(e=>{e(!0,{node:n,selector:t,parents:o})})),r[t]=e),a[t]=e}))})),Rt.each(r,((e,n)=>{a[n]||(delete r[n],Rt.each(e,(e=>{e(!1,{node:t,selector:n,parents:o})})))}))}))),n[e]||(n[e]=[]),n[e].push(o),s(e,i(t.selection.getStart())).each((()=>{r[e]=n[e]})),{unbind:()=>{J_(n,e,o),J_(r,e,o)}})}})(e,r),a=(e,t)=>K_(r,e,t),l=e=>{const t=d();t.collapse(!!e),u(t)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let n,o,a;const l=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}},d=t.document;if(void 0!==r.bookmark&&!1===Rm(r)){const e=bm(r);if(e.isSome())return e.map((e=>jm(r,[e])[0])).getOr(d.createRange())}try{(n=c())&&!gr(n.anchorNode)&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():d.createRange(),o=jm(r,[o])[0])}catch(e){}return o||(o=d.createRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(a=e.getRoot(),o.setStart(a,0),o.setEnd(a,0)),s&&i&&(0===l(o.START_TO_START,o,s)&&0===l(o.END_TO_END,o,s)?o=i:(s=null,i=null)),o},u=(e,t)=>{let n;if(!(e=>!!e&&Z_(e.startContainer)&&Z_(e.endContainer))(e))return;const o=c();if(e=r.dispatch("SetSelectionRange",{range:e,forward:t}).range,o){i=e;try{o.removeAllRanges(),o.addRange(e)}catch(e){}!1===t&&o.extend&&(o.collapse(e.endContainer,e.endOffset),o.extend(e.startContainer,e.startOffset)),s=o.rangeCount>0?o.getRangeAt(0):null}!e.collapsed&&e.startContainer===e.endContainer&&o.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset],n&&"IMG"===n.tagName&&(o.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),o.anchorNode===e.startContainer&&o.focusNode===e.endContainer||o.setBaseAndExtent(n,0,n,1))),r.dispatch("AfterSetSelectionRange",{range:e,forward:t})},h=()=>{const t=c(),n=null==t?void 0:t.anchorNode,r=null==t?void 0:t.focusNode;if(!t||!n||!r||gr(n)||gr(r))return!0;const s=e.createRng();s.setStart(n,t.anchorOffset),s.collapse(!0);const i=e.createRng();return i.setStart(r,t.focusOffset),i.collapse(!0),s.compareBoundaryPoints(s.START_TO_START,i)<=0},m={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:l,setCursorLocation:(t,n)=>{const s=e.createRng();x(t)&&x(n)?(s.setStart(t,n),s.setEnd(t,n),u(s),l(!1)):(Hu(e,s,r.getBody(),!0),u(s))},getContent:e=>G_(r,e),setContent:a,getBookmark:(e,t)=>p.getBookmark(e,t),moveToBookmark:e=>p.moveToBookmark(e),select:(t,n)=>(((e,t,n)=>B.from(t).map((t=>{const r=e.nodeIndex(t),s=e.createRng();return s.setStart(t.parentNode,r),s.setEnd(t.parentNode,r+1),n&&(Hu(e,s,t,!0),Hu(e,s,t,!1)),s})))(e,t,n).each(u),t),isCollapsed:()=>{const e=d(),t=c();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:h,setNode:t=>(a(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{let n,r,s;if(!t)return e;r=t.startContainer,s=t.endContainer;const i=t.startOffset,o=t.endOffset;return n=t.commonAncestorContainer,!t.collapsed&&(r===s&&o-i<2&&r.hasChildNodes()&&(n=r.childNodes[i]),3===r.nodeType&&3===s.nodeType&&(r=r.length===i?Hm(r.nextSibling,!0):r.parentNode,s=0===o?Hm(s.previousSibling,!1):s.parentNode,r&&r===s))?r:n&&3===n.nodeType?n.parentNode:n})(r.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:e=>Bm(r.getBody(),d(),e),getEnd:e=>Fm(r.getBody(),d(),e),getSelectedBlocks:(t,n)=>((e,t,n,r)=>{let s;const i=[],o=e.getRoot();if(n=e.getParent(n||Bm(o,t,t.collapsed),e.isBlock),r=e.getParent(r||Fm(o,t,t.collapsed),e.isBlock),n&&n!==o&&i.push(n),n&&r&&n!==r){s=n;const t=new Kr(n,o);for(;(s=t.next())&&s!==r;)e.isBlock(s)&&i.push(s)}return r&&n!==r&&r!==o&&i.push(r),i})(e,d(),t,n),normalize:()=>{const t=d(),n=c();if(!(Ou(n).length>1)&&ju(r)){const n=zh(e,t);return n.each((e=>{u(e,h())})),n.getOr(t)}return t},selectorChanged:(e,t)=>(o(e,t),m),selectorChangedWithUnbind:o,getScrollContainer:()=>{let t,n=e.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:(e,t)=>{x(e)?((e,t,n)=>{(e.inline?im:am)(e,t,n)})(r,e,t):lm(r,d(),t)},placeCaretAt:(e,t)=>u(Eh(e,t,r.getDoc())),getBoundingClientRect:()=>{const e=d();return e.collapsed?Ko.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=s=i=null,f.destroy()}},p=Zu(m),f=ah(m,r);return m.bookmarkManager=p,m.controlSelection=f,m},eb=(e,t,n)=>((e,t)=>e&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,n)?((e,t,n)=>{let r;const s=e.dom;let i=t.cloneNode(!0);const o=document.implementation;if(o.createHTMLDocument){const e=o.createHTMLDocument("");Rt.each("BODY"===i.nodeName?i.childNodes:[i],(t=>{e.body.appendChild(e.importNode(t,!0))})),i="BODY"!==i.nodeName?e.body.firstChild:e.body,r=s.doc,s.doc=e}return((e,t)=>{e.dispatch("PreProcess",t)})(e,{...n,node:i}),r&&(s.doc=r),i})(e,t,n):t,tb=(e,t,n)=>{-1===Rt.inArray(t,n)&&(e.addAttributeFilter(n,((e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)})),t.push(n))},nb=(e,t,n,r,s)=>{const i=((e,t,n)=>cp(e,t).serialize(n))(t,n,r);return((e,t,n)=>{if(!t.no_events&&e){const r=((e,t)=>e.dispatch("PostProcess",t))(e,{...t,content:n});return r.content}return n})(e,s,i)},rb=(e,t)=>{const n=["data-mce-selected"],r=t&&t.dom?t.dom:Yi.DOM,s=t&&t.schema?t.schema:Mi(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs;const i=r_(e,s);((e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",((e,t)=>{let n=e.length;for(;n--;){const r=e[n];r.attr("tabindex",r.attr("data-mce-tabindex")),r.attr(t,null)}})),e.addAttributeFilter("src,href,style",((e,r)=>{const s="data-mce-"+r,i=t.url_converter,o=t.url_converter_scope;let a=e.length;for(;a--;){const t=e[a];let l=t.attr(s);void 0!==l?(t.attr(r,l.length>0?l:null),t.attr(s,null)):(l=t.attr(r),"style"===r?l=n.serializeStyle(n.parseStyle(l),t.name):i&&(l=i.call(o,l,r,t.name)),t.attr(r,l.length>0?l:null))}})),e.addAttributeFilter("class",(e=>{let t=e.length;for(;t--;){const n=e[t];let r=n.attr("class");r&&(r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null))}})),e.addAttributeFilter("data-mce-type",((e,t,n)=>{let r=e.length;for(;r--;){const t=e[r];if("bookmark"===t.attr("data-mce-type")&&!n.cleanup){const e=B.from(t.firstChild).exists((e=>!hs(e.value)));e?t.unwrap():t.remove()}}})),e.addNodeFilter("noscript",(e=>{let t=e.length;for(;t--;){const n=e[t].firstChild;n&&(n.value=mi.decode(n.value))}})),e.addNodeFilter("script,style",((e,n)=>{const r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let s=e.length;for(;s--;){const i=e[s],o=i.firstChild?i.firstChild.value:"";if("script"===n){const e=i.attr("type");e&&i.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===t.element_format&&o.length>0&&(i.firstChild.value="// <![CDATA[\n"+r(o)+"\n// ]]>")}else"xhtml"===t.element_format&&o.length>0&&(i.firstChild.value="\x3c!--\n"+r(o)+"\n--\x3e")}})),e.addNodeFilter("#comment",(e=>{let r=e.length;for(;r--;){const s=e[r];t.preserve_cdata&&0===s.value.indexOf("[CDATA[")?(s.name="#cdata",s.type=4,s.value=n.decode(s.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===s.value.indexOf("mce:protected ")&&(s.name="#text",s.type=3,s.raw=!0,s.value=unescape(s.value).substr(14))}})),e.addNodeFilter("xml:namespace,input",((e,t)=>{let n=e.length;for(;n--;){const r=e[n];7===r.type?r.remove():1===r.type&&("input"!==t||r.attr("type")||r.attr("type","text"))}})),e.addAttributeFilter("data-mce-type",(t=>{W(t,(t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",((e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}))})(i,e,r);return{schema:s,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(n,o={})=>{const a={format:"html",...o},l=eb(t,n,a),c=((e,t,n)=>{const r=ms(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||as(un.fromDom(t))?r:Rt.trim(r)})(r,l,a),d=((e,t,n)=>{const r=n.selection?{forced_root_block:!1,...n}:n,s=e.parse(t,r);return(e=>{const t=e=>e&&"br"===e.name,n=e.lastChild;if(t(n)){const e=n.prev;t(e)&&(n.remove(),e.remove())}})(s),s})(i,c,a);return"tree"===a.format?d:nb(t,e,s,d,a)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:O(tb,i,n),getTempAttrs:L(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters}},sb=(e,t)=>{const n=rb(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},ib=(e,t={})=>{const n=((e,t)=>({...e,format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return i_(e,n).fold(A,(t=>{const n=((e,t)=>V_(e).editor.getContent(t))(e,t);return o_(e,n,t)}))},ob=(e,t,n={})=>{const r=((e,t)=>({format:"html",...e,set:!0,content:t}))(n,t);return a_(e,r).map((t=>{const n=((e,t,n)=>V_(e).editor.setContent(t,n))(e,t.content,t);return l_(e,n.html,t),n.content})).getOr(t)},ab="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),lb="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),cb=e=>{const t=X(ab,(t=>Se(e,t))),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),ae(t)},db=e=>{const t=Rt.makeMap(e.plugins," "),n=X(lb,(e=>Se(t,e)));return ae(n)},ub=(e,t)=>{((e,t)=>{const n=cb(e),r=db(t),s=r.length>0,i=n.length>0,o="mobile"===t.theme;if(s||i||o){const e="\n- ",t=o?`\n\nThemes:${e}mobile`:"",a=s?`\n\nPlugins:${e}${r.join(e)}`:"",l=i?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+t+a+l)}})(e,t)},hb=Yi.DOM,mb=e=>B.from(e).each((e=>e.destroy())),pb=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&s&&hb.remove(s.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&r&&(e=>{hb.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),hb.remove(e.getContainer()),mb(t),mb(n),e.destroy()}},fb=(e,t)=>{const{selection:n,dom:r}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),mb(n),mb(r)),(e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),hb.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)})(e),e.destroyed=!0):e.remove())},gb=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Se(e,t)}})(),vb=Ji.ModelManager,yb=(e,t)=>t.dom[e],_b=(e,t)=>parseInt(Un(t,e),10),bb=O(yb,"clientWidth"),wb=O(yb,"clientHeight"),xb=O(_b,"margin-top"),Mb=O(_b,"margin-left"),Sb=(e,t,n)=>{const r=un.fromDom(e.getBody()),s=e.inline?r:(i=r,un.fromDom(yn(i).dom.documentElement));var i;const o=((e,t,n,r)=>{const s=(e=>e.dom.getBoundingClientRect())(t);return{x:n-(e?s.left+t.dom.clientLeft+Mb(t):0),y:r-(e?s.top+t.dom.clientTop+xb(t):0)}})(e.inline,s,t,n);return((e,t,n)=>{const r=bb(e),s=wb(e);return t>=0&&n>=0&&t<=r&&n<=s})(s,o.x,o.y)},Tb=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return(n=t,B.from(n).map(un.fromDom)).map(Bn).getOr(!1);var n},Cb=e=>{const t=[],n=()=>{const t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},r=()=>B.from(t[0]),s=()=>{W(t,(e=>{e.reposition()}))},i=e=>{ee(t,(t=>t===e)).each((e=>{t.splice(e,1)}))},o=(o,a=!0)=>{if(!e.removed&&Tb(e))return a&&e.dispatch("BeforeOpenNotification",{notification:o}),Q(t,(e=>{return t=n().getArgs(e),r=o,!(t.type!==r.type||t.text!==r.text||t.progressBar||t.timeout||r.progressBar||r.timeout);var t,r})).getOrThunk((()=>{e.editorManager.setActive(e);const a=n().open(o,(()=>{i(a),s(),r().fold((()=>e.focus()),(e=>cm(un.fromDom(e.getEl()))))}));return(e=>{t.push(e)})(a),s(),e.dispatch("OpenNotification",{notification:{...a}}),a}))},a=L(t);return(e=>{e.on("SkinLoaded",(()=>{const t=_l(e);t&&o({text:t,type:"warning",timeout:0},!1),s()})),e.on("show ResizeEditor ResizeWindow NodeChange",(()=>{requestAnimationFrame(s)})),e.on("remove",(()=>{W(t.slice(),(e=>{n().close(e)}))}))})(e),{open:o,close:()=>{r().each((e=>{n().close(e),i(e),s()}))},getNotifications:a}},Eb=Ji.PluginManager,kb=Ji.ThemeManager;const Lb=e=>{let t=[];const n=()=>{const t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}})()},r=(e,t)=>(...n)=>t?t.apply(e,n):void 0,s=n=>{t.push(n),(t=>{e.dispatch("OpenWindow",{dialog:t})})(n)},i=n=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(n),t=X(t,(e=>e!==n)),0===t.length&&e.focus()},o=t=>{e.editorManager.setActive(e),_m(e),e.ui.show();const n=t();return s(n),n};return e.on("remove",(()=>{W(t,(e=>{n().close(e)}))})),{open:(e,t)=>o((()=>n().open(e,t,i))),openUrl:e=>o((()=>n().openUrl(e,i))),alert:(e,t,s)=>{const i=n();i.alert(e,r(s||i,t))},confirm:(e,t,s)=>{const i=n();i.confirm(e,r(s||i,t))},close:()=>{B.from(t[t.length-1]).each((e=>{n().close(e),i(e)}))}}},Ab=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Db=(e,t)=>{e._skinLoaded?Ab(e,t):e.on("SkinLoaded",(()=>{Ab(e,t)}))},Ob=(e,t,n)=>{eh(e,t,{message:n}),console.error(n)},Rb=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Pb=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},Nb=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",r=`content${e.editorManager.suffix}.css`,s=!0===e.inline;return $(t,(t=>(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!s?`${n}/${t}/${r}`:e.documentBaseURI.toAbsolute(t)))},Ib=e=>{e.contentCSS=e.contentCSS.concat((e=>Nb(e,dl(e)))(e),(e=>Nb(e,hl(e)))(e))},zb=z,Bb=()=>{let e={};const t=(e,t)=>({status:e,resultUri:t}),n=t=>t in e;return{hasBlobUri:n,getResultUri:t=>{const n=e[t];return n?n.resultUri:null},isPending:t=>!!n(t)&&1===e[t].status,isUploaded:t=>!!n(t)&&2===e[t].status,markPending:n=>{e[n]=t(1,null)},markUploaded:(n,r)=>{e[n]=t(2,r)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}};let Fb=0;const Hb=e=>e+Fb+++(()=>{const e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),jb=(e,t)=>{const n={},r=(e,n)=>new Promise(((r,s)=>{const i=new XMLHttpRequest;i.open("POST",t.url),i.withCredentials=t.credentials,i.upload.onprogress=e=>{n(e.loaded/e.total*100)},i.onerror=()=>{s("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=()=>{if(i.status<200||i.status>=300)return void s("HTTP Error: "+i.status);const e=JSON.parse(i.responseText);var n,o;e&&p(e.location)?r((n=t.basePath,o=e.location,n?n.replace(/\/$/,"")+"/"+o.replace(/^\//,""):o)):s("Invalid JSON: "+i.responseText)};const o=new FormData;o.append("file",e.blob(),e.filename()),i.send(o)})),s=(e,t)=>({url:t,blobInfo:e,status:!0}),i=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),o=(e,t)=>{Rt.each(n[e],(e=>{e(t)})),delete n[e]},a=(r,a)=>(r=Rt.grep(r,(t=>!e.isUploaded(t.blobUri()))),Promise.all(Rt.map(r,(r=>e.isPending(r.blobUri())?(e=>{const t=e.blobUri();return new Promise((e=>{n[t]=n[t]||[],n[t].push(e)}))})(r):((t,n,r)=>(e.markPending(t.blobUri()),new Promise((a=>{let l,c;try{const d=()=>{l&&(l.close(),c=C)},u=n=>{d(),e.markUploaded(t.blobUri(),n),o(t.blobUri(),s(t,n)),a(s(t,n))},h=n=>{d(),e.removeFailed(t.blobUri()),o(t.blobUri(),i(t,n)),a(i(t,n))};c=e=>{e<0||e>100||B.from(l).orThunk((()=>B.from(r).map(P))).each((t=>{l=t,t.progressBar.value(e)}))},n(t,c).then(u,(e=>{h(p(e)?{message:e}:e)}))}catch(e){a(i(t,e))}}))))(r,t.handler,a)))));return!1===M(t.handler)&&(t.handler=r),{upload:(e,n)=>t.url||t.handler!==r?a(e,n):new Promise((e=>{e([])}))}},Ub=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Yb=(e,t)=>jb(t,{url:el(e),basePath:tl(e),credentials:nl(e),handler:rl(e)}),Vb=e=>{const t=(()=>{let e=[];const t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const t=e.id||Hb("blobid"),n=e.name||t,r=e.blob;return{id:L(t),name:L(n),filename:L(e.filename||n+"."+(s=r.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[s.toLowerCase()]||"dat")),blob:L(r),base64:L(e.base64),blobUri:L(e.blobUri||URL.createObjectURL(r)),uri:L(e.uri)};var s},n=t=>Q(e,t).getOrUndefined(),r=e=>n((t=>t.id()===e));return{create:(e,n,r,s,i)=>{if(p(e))return t({id:e,name:s,filename:i,blob:n,base64:r});if(f(e))return t(e);throw new Error("Unknown input type")},add:t=>{r(t.id())||e.push(t)},get:r,getByUri:e=>n((t=>t.blobUri()===e)),getByData:(e,t)=>n((n=>n.base64()===e&&n.blob().type===t)),findFirst:n,removeByUri:t=>{e=X(e,(e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)))},destroy:()=>{W(e,(e=>{URL.revokeObjectURL(e.blobUri())})),e=[]}}})();let n,r;const s=Bb(),i=[],o=(e=>{const t=Wi(null);return e.on("change AddUndo",(e=>{t.set({...e.level})})),{fireIfChanged:()=>{const n=e.undoManager.data;de(n).filter((e=>!z_(t.get(),e))).each((t=>{e.setDirty(!0),e.dispatch("change",{level:t,lastLevel:le(n,n.length-2).getOrNull()})}))}}})(e),a=t=>n=>e.selection?t(n):[],l=(e,t,n)=>{let r=0;do{r=e.indexOf(t,r),-1!==r&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},c=(e,t,n)=>{const r=`src="${n}"${n===kt.transparentSrc?' data-mce-placeholder="1"':""}`;return e=l(e,`src="${t}"`,r),e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},d=(t,n)=>{W(e.undoManager.data,(e=>{"fragmented"===e.type?e.fragments=$(e.fragments,(e=>c(e,t,n))):e.content=c(e.content,t,n)}))},u=()=>(n||(n=Yb(e,s)),g().then(a((r=>{const s=$(r,(e=>e.blobInfo));return n.upload(s,Ub(e)).then(a((n=>{const s=[],i=$(n,((n,i)=>{const o=r[i].blobInfo,a=r[i].image;let l=!1;return n.status&&Ja(e)?(t.removeByUri(a.src),U_(e)||((t,n)=>{const r=e.convertURL(n,"src");var s;d(t.src,n),Wt(un.fromDom(t),{src:Ka(e)?(s=n,s+(-1===s.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":r})})(a,n.url)):n.error&&(n.error.remove&&(d(a.getAttribute("src"),kt.transparentSrc),s.push(a),l=!0),((e,t)=>{Db(e,Ki.translate(["Failed to upload image: {0}",t]))})(e,n.error.message)),{element:a,status:n.status,uploadUri:n.url,blobInfo:o,removed:l}}));return i.length>0&&o.fireIfChanged(),s.length>0&&!U_(e)&&e.undoManager.transact((()=>{W(s,(n=>{e.dom.remove(n),t.removeByUri(n.src)}))})),i})))})))),h=()=>Xa(e)?u():Promise.resolve([]),m=e=>re(i,(t=>t(e))),g=()=>(r||(r=By(s,t)),r.findAll(e.getBody(),m).then(a((t=>(t=X(t,(t=>"string"!=typeof t||(Db(e,t),!1))),U_(e)||W(t,(e=>{d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),t))))),v=n=>n.replace(/src="(blob:[^"]+)"/g,((n,r)=>{const i=s.getResultUri(r);if(i)return'src="'+i+'"';let o=t.getByUri(r);if(o||(o=J(e.editorManager.get(),((e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r)),null)),o){return'src="data:'+o.blob().type+";base64,"+o.base64()+'"'}return n}));return e.on("SetContent",(()=>{Xa(e)?h():g()})),e.on("RawSaveContent",(e=>{e.content=v(e.content)})),e.on("GetContent",(e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=v(e.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(e=>{W(e,(e=>{const n=e.attr("src");if(t.getByUri(n))return;const r=s.getResultUri(n);r&&e.attr("src",r)}))}))})),{blobCache:t,addFilter:e=>{i.push(e)},uploadImages:u,uploadImagesAuto:h,scanForImages:g,destroy:()=>{t.destroy(),s.destroy(),r=n=null}}},$b={remove_similar:!0,inherit:!1},Wb={selector:"td,th",...$b},Gb={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Wb},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Wb},tablecellbordercolor:{styles:{borderColor:"%value"},...Wb},tablecellclass:{classes:["%value"],...Wb},tableclass:{selector:"table",classes:["%value"],...$b},tablecellborderstyle:{styles:{borderStyle:"%value"},...Wb},tablecellborderwidth:{styles:{borderWidth:"%value"},...Wb}},qb=L(Gb),Xb=e=>{const t={},n=(e,r)=>{e&&(p(e)?(v(r)||(r=[r]),W(r,(e=>{b(e.deep)&&(e.deep=!mu(e)),b(e.split)&&(e.split=!mu(e)||pu(e)),b(e.remove)&&mu(e)&&!pu(e)&&(e.remove="none"),mu(e)&&pu(e)&&(e.mixed=!0,e.block_expand=!0),p(e.classes)&&(e.classes=e.classes.split(/\s+/))})),t[e]=r):fe(e,((e,t)=>{n(t,e)})))};return n((e=>{const t=e.dom,n=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},r={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[r,e,t]:[e,r,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,n)=>vr(e)&&e.hasAttribute("href"),onformat:(e,n,r)=>{Rt.each(r,((n,r)=>{t.setAttrib(e,r,n)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Rt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(e=>{r[e]={block:e,remove:"all"}})),r})(e)),n(qb()),n(Tl(e)),{get:e=>x(e)?t[e]:t,has:e=>Se(t,e),register:n,unregister:e=>(e&&t[e]&&delete t[e],t)}},Kb=Rt.each,Jb=Yi.DOM,Zb=(e,t)=>{let n,r,s;const i=t&&t.schema||Mi({}),o=e=>{r="string"==typeof e?{name:e,classes:[],attrs:{}}:e;const t=Jb.create(r.name);return((e,t)=>{t.classes.length&&Jb.addClass(e,t.classes.join(" ")),Jb.setAttribs(e,t.attrs)})(t,r),t},a=(e,t,n)=>{let r,s;const l=t.length>0&&t[0],c=l&&l.name,d=((e,t)=>{const n="string"!=typeof e?e.nodeName.toLowerCase():e,r=i.getElementRule(n),s=r&&r.parentsRequired;return!(!s||!s.length)&&(t&&-1!==Rt.inArray(s,t)?t:s[0])})(e,c);if(d)c===d?(s=t[0],t=t.slice(1)):s=d;else if(l)s=t[0],t=t.slice(1);else if(!n)return e;return s&&(r=o(s),r.appendChild(e)),n&&(r||(r=Jb.create("div"),r.appendChild(e)),Rt.each(n,(t=>{const n=o(t);r.insertBefore(n,e)}))),a(r,t,s&&s.siblings)};return e&&e.length?(r=e[0],n=o(r),s=Jb.create("div"),s.appendChild(a(n,e.slice(1),r.siblings)),s):""},Qb=e=>{let t;const n={classes:[],attrs:{}};return"*"!==(e=n.selector=Rt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((e,t,r,s,i)=>{switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Rt.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===s){const e=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(n.attrs[e[1]]=e[2])}return""}))),n.name=t||"div",n},ew=(e,t)=>{let n,r,s,i="",o=Cl(e);if(""===o)return"";const a=e=>e.replace(/%(\w+)/g,"");if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}if("preview"in t){const e=Me(t,"preview");if(Pt(e,!1))return"";o=e.getOr(o)}n=t.block||t.inline||"span";const l=(c=t.selector)&&"string"==typeof c?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Rt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(e=>{const t=Rt.map(e.split(/(?:~\+|~|\+)/),Qb),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[];var c;l.length?(l[0].name||(l[0].name=n),n=t.selector,r=Zb(l,e)):r=Zb([n],e);const d=Jb.select(n,r)[0]||r.firstChild;return Kb(t.styles,((e,t)=>{const n=a(e);n&&Jb.setStyle(d,t,n)})),Kb(t.attributes,((e,t)=>{const n=a(e);n&&Jb.setAttrib(d,t,n)})),Kb(t.classes,(e=>{const t=a(e);Jb.hasClass(d,t)||Jb.addClass(d,t)})),e.dispatch("PreviewFormats"),Jb.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),s=Jb.getStyle(e.getBody(),"fontSize",!0),s=/px$/.test(s)?parseInt(s,10):0,Kb(o.split(" "),(t=>{let n=Jb.getStyle(d,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=Jb.getStyle(e.getBody(),t,!0),"#ffffff"===Zd(n).toLowerCase())||"color"===t&&"#000000"===Zd(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===s)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*s+"px"}"border"===t&&n&&(i+="padding:0 2px;"),i+=t+":"+n+";"}})),e.dispatch("AfterPreviewFormats"),Jb.remove(r),i},tw=e=>{const t=Xb(e),n=Wi(null);return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),Kg(e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,n,r)=>{((e,t,n,r)=>{$_(e).formatter.apply(t,n,r)})(e,t,n,r)},remove:(t,n,r,s)=>{((e,t,n,r,s)=>{$_(e).formatter.remove(t,n,r,s)})(e,t,n,r,s)},toggle:(t,n,r)=>{((e,t,n,r)=>{$_(e).formatter.toggle(t,n,r)})(e,t,n,r)},match:(t,n,r,s)=>((e,t,n,r,s)=>$_(e).formatter.match(t,n,r,s))(e,t,n,r,s),closest:t=>((e,t)=>$_(e).formatter.closest(t))(e,t),matchAll:(t,n)=>((e,t,n)=>$_(e).formatter.matchAll(t,n))(e,t,n),matchNode:(t,n,r,s)=>((e,t,n,r,s)=>$_(e).formatter.matchNode(t,n,r,s))(e,t,n,r,s),canApply:t=>((e,t)=>$_(e).formatter.canApply(t))(e,t),formatChanged:(t,r,s,i)=>((e,t,n,r,s,i)=>$_(e).formatter.formatChanged(t,n,r,s,i))(e,n,t,r,s,i),getCssText:O(ew,e)}},nw=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},rw=e=>{const t=Zi(),n=Wi(0),r=Wi(0),s={data:[],typing:!1,beforeChange:()=>{((e,t,n)=>{$_(e).undoManager.beforeChange(t,n)})(e,n,t)},add:(i,o)=>((e,t,n,r,s,i,o)=>$_(e).undoManager.add(t,n,r,s,i,o))(e,s,r,n,t,i,o),undo:()=>((e,t,n,r)=>$_(e).undoManager.undo(t,n,r))(e,s,n,r),redo:()=>((e,t,n)=>$_(e).undoManager.redo(t,n))(e,r,s.data),clear:()=>{((e,t,n)=>{$_(e).undoManager.clear(t,n)})(e,s,r)},reset:()=>{((e,t)=>{$_(e).undoManager.reset(t)})(e,s)},hasUndo:()=>((e,t,n)=>$_(e).undoManager.hasUndo(t,n))(e,s,r),hasRedo:()=>((e,t,n)=>$_(e).undoManager.hasRedo(t,n))(e,s,r),transact:t=>((e,t,n,r)=>$_(e).undoManager.transact(t,n,r))(e,s,n,t),ignore:t=>{((e,t,n)=>{$_(e).undoManager.ignore(t,n)})(e,n,t)},extra:(t,n)=>{((e,t,n,r,s)=>{$_(e).undoManager.extra(t,n,r,s)})(e,s,r,t,n)}};return U_(e)||((e,t,n)=>{const r=Wi(!1),s=e=>{F_(t,!1,n),t.add({},e)};e.on("init",(()=>{t.add()})),e.on("BeforeExecCommand",(e=>{const r=e.command;nw(r)||(H_(t,n),t.beforeChange())})),e.on("ExecCommand",(e=>{const t=e.command;nw(t)||s(e)})),e.on("ObjectResizeStart cut",(()=>{t.beforeChange()})),e.on("SaveContent ObjectResized blur",s),e.on("dragend",s),e.on("keyup",(n=>{const i=n.keyCode;n.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||n.ctrlKey)&&(s(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),r.get()&&t.typing&&!1===z_(R_(e),t.data[0])&&(!1===e.isDirty()&&e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))})),e.on("keydown",(e=>{const i=e.keyCode;if(e.isDefaultPrevented())return;if(i>=33&&i<=36||i>=37&&i<=40||45===i)return void(t.typing&&s(e));const o=e.ctrlKey&&!e.altKey||e.metaKey;!(i<16||i>20)||224===i||91===i||t.typing||o||(t.beforeChange(),F_(t,!0,n),t.add({},e),r.set(!0))})),e.on("mousedown",(e=>{t.typing&&s(e)})),e.on("input",(e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&s(e)})),e.on("AddUndo Undo Redo ClearUndos",(t=>{t.isDefaultPrevented()||e.nodeChanged()}))})(e,s,n),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),s},sw=[9,27,oh.HOME,oh.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,oh.DOWN,oh.UP,oh.LEFT,oh.RIGHT].concat(kt.browser.isFirefox()?[224]:[]),iw="data-mce-placeholder",ow=e=>"keydown"===e.type||"keyup"===e.type,aw=e=>{const t=e.keyCode;return t===oh.BACKSPACE||t===oh.DELETE},lw=e=>{const t=e.dom,n=Ya(e),r=vl(e),s=(i,o)=>{if((e=>{if(ow(e)){const t=e.keyCode;return!aw(e)&&(oh.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Y(sw,t))}return!1})(i))return;const a=e.getBody(),l=!(e=>ow(e)&&!(aw(e)||"keyup"===e.type&&229===e.keyCode))(i)&&((e,t,n)=>{if(Xs(un.fromDom(t),!1)){const r=t.firstElementChild;return!r||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&n===r.nodeName.toLowerCase()}return!1})(t,a,n);(""!==t.getAttrib(a,iw)!==l||o)&&(t.setAttrib(a,iw,l?r:null),t.setAttrib(a,"aria-placeholder",l?r:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,l),e.on(l?"keydown":"keyup",s),e.off(l?"keyup":"keydown",s))};r&&e.on("init",(t=>{s(t,!0),e.on("change SetContent ExecCommand",s),e.on("paste",(t=>xm.setEditorTimeout(e,(()=>s(t)))))}))},cw=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,dw=(e,t)=>mn(un.fromDom(t),pl(e)),uw=e=>"rtl"===Yi.DOM.getStyle(e,"direction",!0)||(e=>cw.test(e))(e.textContent),hw=(e,t,n)=>{const r=((e,t,n)=>X(Yi.DOM.getParents(n.container(),"*",t),e))(e,t,n);return B.from(r[r.length-1])},mw=(e,t)=>{if(!t)return t;const n=t.container(),r=t.offset();return e?vs(n)?Tr(n.nextSibling)?Ko(n.nextSibling,0):Ko.after(n):bs(t)?Ko(n,r+1):t:vs(n)?Tr(n.previousSibling)?Ko(n.previousSibling,n.previousSibling.data.length):Ko.before(n):ws(t)?Ko(n,r-1):t},pw=O(mw,!0),fw=O(mw,!1),gw=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},vw=e=>gw(e,"Delete"),yw=e=>ns(e)||ss(e),_w=(e,t)=>gn(e,t)?Yr(t,yw,(e=>t=>fn(e,un.fromDom(t.dom.parentNode)))(e)):B.none(),bw=e=>{e.dom.isEmpty(e.getBody())&&(e.setContent(""),(e=>{const t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)})(e))},ww=(e,t)=>({from:e,to:t}),xw=(e,t)=>{const n=un.fromDom(e),r=un.fromDom(t.container());return _w(n,r).map((e=>((e,t)=>({block:e,position:t}))(e,t)))},Mw=(e,t,n)=>{const r=xw(e,Ko.fromRangeStart(n)),s=r.bind((n=>bd(t,e,n.position).bind((n=>xw(e,n).map((n=>((e,t,n)=>Dr(n.position.getNode())&&!1===Xs(n.block)?Md(!1,n.block.dom).bind((r=>r.isEqual(n.position)?bd(t,e,r).bind((t=>xw(e,t))):B.some(n))).getOr(n):n)(e,t,n)))))));return Nt(r,s,ww).filter((e=>(e=>!1===fn(e.from.block,e.to.block))(e)&&(e=>bn(e.from.block).bind((t=>bn(e.to.block).filter((e=>fn(t,e))))).isSome())(e)&&(e=>!1===Pr(e.from.block.dom)&&!1===Pr(e.to.block.dom))(e)))},Sw=e=>{const t=Tn(e);return ee(t,Qr).fold(L(t),(e=>t.slice(0,e)))},Tw=e=>{const t=Sw(e);return W(t,Qn),t},Cw=(e,t)=>{const n=Np(t,e);return Q(n.reverse(),(e=>Xs(e))).each(Qn)},Ew=(e,t,n,r)=>{if(Xs(n))return Dp(n),Cd(n.dom);0===X(Mn(r),(e=>!Xs(e))).length&&Xs(t)&&Gn(r,un.fromTag("br"));const s=Td(n.dom,Ko.before(r.dom));return W(Tw(t),(e=>{Gn(r,e)})),Cw(e,t),s},kw=(e,t,n)=>{if(Xs(n))return Qn(n),Xs(t)&&Dp(t),Cd(t.dom);const r=Ed(n.dom);return W(Tw(t),(e=>{Kn(n,e)})),Cw(e,t),r},Lw=(e,t)=>gn(t,e)?((e,t)=>{const n=Np(t,e);return B.from(n[n.length-1])})(t,e):B.none(),Aw=(e,t)=>{Md(e,t.dom).map((e=>e.getNode())).map(un.fromDom).filter(ts).each(Qn)},Dw=(e,t,n)=>(Aw(!0,t),Aw(!1,n),Lw(t,n).fold(O(kw,e,t,n),O(Ew,e,t,n))),Ow=(e,t,n,r)=>t?Dw(e,r,n):Dw(e,n,r),Rw=(e,t)=>{const n=un.fromDom(e.getBody()),r=((e,t,n)=>n.collapsed?Mw(e,t,n):B.none())(n.dom,t,e.selection.getRng()).map((r=>()=>{Ow(n,t,r.from.block,r.to.block).each((t=>{e.selection.setRng(t.toRange())}))}));return r},Pw=(e,t)=>{const n=un.fromDom(t),r=O(fn,e);return Ur(n,os,r).isSome()},Nw=(e,t)=>{const n=Td(e.dom,Ko.fromRangeStart(t)).isNone(),r=Sd(e.dom,Ko.fromRangeEnd(t)).isNone();return!((e,t)=>Pw(e,t.startContainer)||Pw(e,t.endContainer))(e,t)&&n&&r},Iw=e=>{const t=un.fromDom(e.getBody()),n=e.selection.getRng();return Nw(t,n)?(e=>B.some((()=>{e.setContent(""),e.selection.setCursorLocation()})))(e):((e,t)=>{const n=t.getRng();return Nt(_w(e,un.fromDom(n.startContainer)),_w(e,un.fromDom(n.endContainer)),((r,s)=>!1===fn(r,s)?B.some((()=>{n.deleteContents(),Ow(e,!0,r,s).each((e=>{t.setRng(e.toRange())}))})):B.none())).getOr(B.none())})(t,e.selection)},zw=(e,t)=>e.selection.isCollapsed()?B.none():Iw(e),Bw=Rr,Fw=Pr,Hw=(e,t,n,r,s)=>B.from(t._selectionOverrides.showCaret(e,n,r,s)),jw=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?B.none():B.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),Uw=(e,t,n)=>t.collapsed?((e,t,n)=>{const r=Zc(1,e.getBody(),t),s=Ko.fromRangeStart(r),i=s.getNode();if(Ac(i))return Hw(1,e,i,!s.isAtEnd(),!1);const o=s.getNode(!0);if(Ac(o))return Hw(1,e,o,!1,!1);const a=e.dom.getParent(s.getNode(),(e=>Fw(e)||Bw(e)));return Ac(a)?Hw(1,e,a,!1,n):B.none()})(e,t,n).getOr(t):t,Yw=e=>kp(e)||Sp(e),Vw=e=>Lp(e)||Tp(e),$w=(e,t,n,r,s,i)=>{Hw(r,e,i.getNode(!s),s,!0).each((n=>{if(t.collapsed){const e=t.cloneRange();s?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)})),((e,t)=>{Tr(t)&&0===t.data.length&&e.remove(t)})(e.dom,n)},Ww=(e,t)=>((e,t)=>{const n=e.selection.getRng();if(!Tr(n.commonAncestorContainer))return B.none();const r=t?sd.Forwards:sd.Backwards,s=fd(e.getBody()),i=O(nd,t?s.next:s.prev),o=t?Yw:Vw,a=ed(r,e.getBody(),n),l=mw(t,i(a));if(!l||!rd(a,l))return B.none();if(o(l))return B.some((()=>$w(e,n,a.getNode(),r,t,l)));const c=i(l);return c&&o(c)&&rd(l,c)?B.some((()=>$w(e,n,a.getNode(),r,t,c))):B.none()})(e,t),Gw=xa([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),qw=(e,t,n,r)=>{const s=r.getNode(!1===t);return _w(un.fromDom(e),un.fromDom(n.getNode())).map((e=>Xs(e)?Gw.remove(e.dom):Gw.moveToElement(s))).orThunk((()=>B.some(Gw.moveToElement(s))))},Xw=(e,t,n)=>bd(t,e,n).bind((r=>{return s=r.getNode(),os(un.fromDom(s))||ss(un.fromDom(s))||((e,t,n,r)=>{const s=t=>es(un.fromDom(t))&&!$c(n,r,e);return Qc(!t,n).fold((()=>Qc(t,r).fold(I,s)),s)})(e,t,n,r)?B.none():t&&Pr(r.getNode())||!1===t&&Pr(r.getNode(!0))?qw(e,t,n,r):t&&Lp(n)||!1===t&&kp(n)?B.some(Gw.moveToPosition(r)):B.none();var s})),Kw=(e,t,n)=>((e,t)=>{const n=t.getNode(!1===e),r=e?"after":"before";return vr(n)&&n.getAttribute("data-mce-caret")===r})(t,n)?((e,t)=>e&&Pr(t.nextSibling)?B.some(Gw.moveToElement(t.nextSibling)):!1===e&&Pr(t.previousSibling)?B.some(Gw.moveToElement(t.previousSibling)):B.none())(t,n.getNode(!1===t)).fold((()=>Xw(e,t,n)),B.some):Xw(e,t,n).bind((t=>((e,t,n)=>n.fold((e=>B.some(Gw.remove(e))),(e=>B.some(Gw.moveToElement(e))),(n=>$c(t,n,e)?B.none():B.some(Gw.moveToPosition(n)))))(e,n,t))),Jw=(e,t)=>B.from(tg(e.getBody(),t)),Zw=(e,t)=>{const n=e.selection.getNode();return Jw(e,n).filter(Pr).fold((()=>((e,t,n)=>{const r=Zc(t?1:-1,e,n),s=Ko.fromRangeStart(r),i=un.fromDom(e);return!1===t&&Lp(s)?B.some(Gw.remove(s.getNode(!0))):t&&kp(s)?B.some(Gw.remove(s.getNode())):!1===t&&kp(s)&&Gp(i,s)?qp(i,s).map((e=>Gw.remove(e.getNode()))):t&&Lp(s)&&Wp(i,s)?Xp(i,s).map((e=>Gw.remove(e.getNode()))):Kw(e,t,s)})(e.getBody(),t,e.selection.getRng()).map((n=>()=>n.fold(((e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Sf(e,t,un.fromDom(n)),!0))(e,t),((e,t)=>n=>{const r=t?Ko.before(n):Ko.after(n);return e.selection.setRng(r.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))))),(()=>B.some(C)))},Qw=(e,t)=>{const n=e.selection.getNode();if(Pr(n)&&!Nr(n)){return Jw(e,n.parentNode).filter(Pr).fold((()=>B.some((()=>{var n;n=un.fromDom(e.getBody()),W(no(n,".mce-offscreen-selection"),Qn),Sf(e,t,un.fromDom(e.selection.getNode())),bw(e)}))),(()=>B.some(C)))}return B.none()},ex=e=>{const t=e.dom,n=e.selection,r=tg(e.getBody(),n.getNode());if(Rr(r)&&t.isBlock(r)&&t.isEmpty(r)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(e),n.setRng(Ko.before(e).toRange())}return!0},tx=(e,t)=>e.selection.isCollapsed()?Zw(e,t):Qw(e,t),nx=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=Ko.fromRangeStart(e.selection.getRng());return bd(t,e.getBody(),n).filter((e=>t?xp(e):Mp(e))).bind((e=>B.from(Wc(t?0:-1,e)))).map((t=>()=>e.selection.select(t)))})(e,t):B.none(),rx=Tr,sx=e=>rx(e)&&e.data[0]===us,ix=e=>rx(e)&&e.data[e.data.length-1]===us,ox=e=>e.ownerDocument.createTextNode(us),ax=(e,t)=>e?(e=>{if(rx(e.previousSibling))return ix(e.previousSibling)||e.previousSibling.appendData(us),e.previousSibling;if(rx(e))return sx(e)||e.insertData(0,us),e;{const t=ox(e);return e.parentNode.insertBefore(t,e),t}})(t):(e=>{if(rx(e.nextSibling))return sx(e.nextSibling)||e.nextSibling.insertData(0,us),e.nextSibling;if(rx(e))return ix(e)||e.appendData(us),e;{const t=ox(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}})(t),lx=O(ax,!0),cx=O(ax,!1),dx=(e,t)=>Tr(e.container())?ax(t,e.container()):ax(t,e.getNode()),ux=(e,t)=>{const n=t.get();return n&&e.container()===n&&vs(n)},hx=(e,t)=>t.fold((t=>{Mc(e.get());const n=lx(t);return e.set(n),B.some(Ko(n,n.length-1))}),(t=>Cd(t).map((t=>{if(ux(t,e))return Ko(e.get(),1);{Mc(e.get());const n=dx(t,!0);return e.set(n),Ko(n,1)}}))),(t=>Ed(t).map((t=>{if(ux(t,e))return Ko(e.get(),e.get().length-1);{Mc(e.get());const n=dx(t,!1);return e.set(n),Ko(n,n.length-1)}}))),(t=>{Mc(e.get());const n=cx(t);return e.set(n),B.some(Ko(n,1))})),mx=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].apply(null,t);if(r.isSome())return r}return B.none()},px=xa([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),fx=(e,t)=>{const n=Vc(t,e);return n||e},gx=(e,t,n)=>{const r=pw(n),s=fx(t,r.container());return hw(e,s,r).fold((()=>Sd(s,r).bind(O(hw,e,s)).map((e=>px.before(e)))),B.none)},vx=(e,t)=>null===Ad(e,t),yx=(e,t,n)=>hw(e,t,n).filter(O(vx,t)),_x=(e,t,n)=>{const r=fw(n);return yx(e,t,r).bind((e=>Td(e,r).isNone()?B.some(px.start(e)):B.none()))},bx=(e,t,n)=>{const r=pw(n);return yx(e,t,r).bind((e=>Sd(e,r).isNone()?B.some(px.end(e)):B.none()))},wx=(e,t,n)=>{const r=fw(n),s=fx(t,r.container());return hw(e,s,r).fold((()=>Td(s,r).bind(O(hw,e,s)).map((e=>px.after(e)))),B.none)},xx=e=>!1===uw(Sx(e)),Mx=(e,t,n)=>mx([gx,_x,bx,wx],[e,t,n]).filter(xx),Sx=e=>e.fold(A,A,A,A),Tx=e=>e.fold(L("before"),L("start"),L("end"),L("after")),Cx=e=>e.fold(px.before,px.before,px.after,px.after),Ex=e=>e.fold(px.start,px.start,px.end,px.end),kx=(e,t,n,r,s,i)=>Nt(hw(t,n,r),hw(t,n,s),((t,r)=>t!==r&&((e,t,n)=>{const r=Vc(t,e),s=Vc(n,e);return r&&r===s})(n,t,r)?px.after(e?t:r):i)).getOr(i),Lx=(e,t)=>e.fold(z,(e=>{return r=t,!(Tx(n=e)===Tx(r)&&Sx(n)===Sx(r));var n,r})),Ax=(e,t)=>e?t.fold(E(B.some,px.start),B.none,E(B.some,px.after),B.none):t.fold(B.none,E(B.some,px.before),B.none,E(B.some,px.end)),Dx=(e,t,n,r)=>{const s=mw(e,r),i=Mx(t,n,s);return Mx(t,n,s).bind(O(Ax,e)).orThunk((()=>((e,t,n,r,s)=>{const i=mw(e,s);return bd(e,n,i).map(O(mw,e)).fold((()=>r.map(Cx)),(s=>Mx(t,n,s).map(O(kx,e,t,n,i,s)).filter(O(Lx,r)))).filter(xx)})(e,t,n,i,r)))},Ox=(e,t,n)=>{const r=e?1:-1;return t.setRng(Ko(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Rx=(e,t)=>{const n=t.selection.getRng(),r=e?Ko.fromRangeEnd(n):Ko.fromRangeStart(n);return!!(e=>M(e.selection.getSel().modify))(t)&&(e&&bs(r)?Ox(!0,t.selection,r):!(e||!ws(r))&&Ox(!1,t.selection,r))};var Px;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Px||(Px={}));const Nx=(e,t)=>e===sd.Backwards?se(t):t,Ix=(e,t,n)=>e===sd.Forwards?t.next(n):t.prev(n),zx=(e,t,n,r)=>Dr(r.getNode(t===sd.Forwards))?Px.Br:!1===$c(n,r)?Px.Block:Px.Wrap,Bx=(e,t,n,r)=>{const s=fd(n);let i=r;const o=[];for(;i;){const n=Ix(t,s,i);if(!n)break;if(Dr(n.getNode(!1)))return t===sd.Forwards?{positions:Nx(t,o).concat([n]),breakType:Px.Br,breakAt:B.some(n)}:{positions:Nx(t,o),breakType:Px.Br,breakAt:B.some(n)};if(n.isVisible()){if(e(i,n)){const e=zx(0,t,i,n);return{positions:Nx(t,o),breakType:e,breakAt:B.some(n)}}o.push(n),i=n}else i=n}return{positions:Nx(t,o),breakType:Px.Eol,breakAt:B.none()}},Fx=(e,t,n,r)=>t(n,r).breakAt.map((r=>{const s=t(n,r).positions;return e===sd.Backwards?s.concat(r):[r].concat(s)})).getOr([]),Hx=(e,t)=>J(e,((e,n)=>e.fold((()=>B.some(n)),(r=>Nt(ce(r.getClientRects()),ce(n.getClientRects()),((e,s)=>{const i=Math.abs(t-e.left);return Math.abs(t-s.left)<=i?n:r})).or(e)))),B.none()),jx=(e,t)=>ce(t.getClientRects()).bind((t=>Hx(e,t.left))),Ux=O(Bx,Ko.isAbove,-1),Yx=O(Bx,Ko.isBelow,1),Vx=O(Fx,-1,Ux),$x=O(Fx,1,Yx),Wx=Pr,Gx=(e,t)=>Math.abs(e.left-t),qx=(e,t)=>Math.abs(e.right-t),Xx=(e,t)=>Oe(e,((e,n)=>{const r=Math.min(Gx(e,t),qx(e,t)),s=Math.min(Gx(n,t),qx(n,t));return s===r&&Te(n,"node")&&Wx(n.node)||s<r?n:e})),Kx=e=>{const t=t=>$(t,(t=>{const n=xo(t);return n.node=e,n}));if(vr(e))return t(e.getClientRects());if(Tr(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},Jx=e=>ne(e,Kx);var Zx;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Zx||(Zx={}));const Qx=(e,t,n,r,s,i)=>{let o=0;const a=[],l=r=>{let i=Jx([r]);-1===e&&(i=i.reverse());for(let e=0;e<i.length;e++){const r=i[e];if(!n(r,c)){if(a.length>0&&t(r,Pe(a))&&o++,r.line=o,s(r))return!0;a.push(r)}}},c=Pe(i.getClientRects());if(!c)return a;const d=i.getNode();return l(d),((e,t,n,r)=>{for(;r=Yc(r,e,zs,t);)if(n(r))return})(e,r,l,d),a},eM=O(Qx,Zx.Up,To,Co),tM=O(Qx,Zx.Down,Co,To),nM=e=>t=>((e,t)=>t.line>e)(e,t),rM=e=>t=>((e,t)=>t.line===e)(e,t),sM=(e,t)=>{e.selection.setRng(t),lm(e,e.selection.getRng())},iM=(e,t,n)=>B.some(Uw(e,t,n)),oM=(e,t,n,r,s,i)=>{const o=t===sd.Forwards,a=fd(e.getBody()),l=O(nd,o?a.next:a.prev),c=o?r:s;if(!n.collapsed){const r=ko(n);if(i(r))return Hw(t,e,r,t===sd.Backwards,!1)}const d=ed(t,e.getBody(),n);if(c(d))return jw(e,d.getNode(!o));const u=mw(o,l(d)),h=Cs(n);if(!u)return h?B.some(n):B.none();if(c(u))return Hw(t,e,u.getNode(!o),o,!1);const m=l(u);return m&&c(m)&&rd(u,m)?Hw(t,e,m.getNode(!o),o,!1):h?iM(e,u.toRange(),!1):B.none()},aM=(e,t,n,r,s,i)=>{const o=ed(t,e.getBody(),n),a=Pe(o.getClientRects()),l=t===Zx.Down;if(!a)return B.none();const c=(l?tM:eM)(e.getBody(),nM(1),o),d=X(c,rM(1)),u=a.left,h=Xx(d,u);if(h&&i(h.node)){const n=Math.abs(u-h.left),r=Math.abs(u-h.right);return Hw(t,e,h.node,n<r,!1)}let m;if(m=r(o)?o.getNode():s(o)?o.getNode(!0):ko(n),m){const n=((e,t,n,r)=>{const s=fd(t);let i,o,a,l;const c=[];let d=0;const u=e=>Pe(e.getClientRects());1===e?(i=s.next,o=Co,a=To,l=Ko.after(r)):(i=s.prev,o=To,a=Co,l=Ko.before(r));const h=u(l);do{if(!l.isVisible())continue;const e=u(l);if(a(e,h))continue;c.length>0&&o(e,Pe(c))&&d++;const t=xo(e);if(t.position=l,t.line=d,n(t))return c;c.push(t)}while(l=i(l));return c})(t,e.getBody(),nM(1),m);let r=Xx(X(n,rM(1)),u);if(r)return iM(e,r.position.toRange(),!1);if(r=Pe(X(n,rM(0))),r)return iM(e,r.position.toRange(),!1)}return 0===d.length?lM(e,l).filter(l?s:r).map((t=>Uw(e,t.toRange(),!1))):B.none()},lM=(e,t)=>{const n=e.selection.getRng(),r=t?Ko.fromRangeEnd(n):Ko.fromRangeStart(n),s=(i=r.container(),o=e.getBody(),Ur(un.fromDom(i),(e=>Oc(e.dom)),(e=>e.dom===o)).map((e=>e.dom)).getOr(o));var i,o;if(t){const e=Yx(s,r);return de(e.positions)}{const e=Ux(s,r);return ce(e.positions)}},cM=(e,t,n)=>lM(e,t).filter(n).exists((t=>(e.selection.setRng(t.toRange()),!0))),dM=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},uM=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},hM=(e,t,n)=>hx(t,n).map((t=>(dM(e,t),n))),mM=(e,t)=>{if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){const n=Ko.fromRangeStart(e.selection.getRng());Ko.isTextPosition(n)&&!1===(e=>bs(e)||ws(e))(n)&&(dM(e,xc(t.get(),n)),t.set(null))}},pM=(e,t,n)=>!!Sl(e)&&((e,t,n)=>{const r=e.getBody(),s=Ko.fromRangeStart(e.selection.getRng()),i=O(dw,e);return Dx(n,i,r,s).bind((n=>hM(e,t,n)))})(e,t,n).isSome(),fM=(e,t,n)=>!!Sl(t)&&Rx(e,t),gM=e=>{const t=Wi(null),n=O(dw,e);return e.on("NodeChange",(r=>{Sl(e)&&(((e,t,n)=>{const r=$(no(un.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(e=>e.dom)),s=X(r,e),i=X(n,e);W(ie(s,i),O(uM,!1)),W(ie(i,s),O(uM,!0))})(n,e.dom,r.parents),mM(e,t),((e,t,n,r)=>{if(t.selection.isCollapsed()){const s=X(r,e);W(s,(r=>{const s=Ko.fromRangeStart(t.selection.getRng());Mx(e,t.getBody(),s).bind((e=>hM(t,n,e)))}))}})(n,e,t,r.parents))})),t},vM=O(fM,!0),yM=O(fM,!1),_M=(e,t,n)=>{if(Sl(e)){const r=lM(e,t).getOrThunk((()=>{const n=e.selection.getRng();return t?Ko.fromRangeEnd(n):Ko.fromRangeStart(n)}));return Mx(O(dw,e),e.getBody(),r).exists((t=>{const r=Cx(t);return hx(n,r).exists((t=>(dM(e,t),!0)))}))}return!1},bM=(e,t)=>n=>hx(t,n).map((t=>()=>dM(e,t))),wM=(e,t,n,r)=>{const s=e.getBody(),i=O(dw,e);e.undoManager.ignore((()=>{e.selection.setRng(((e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n})(n,r)),vw(e),Mx(i,s,Ko.fromRangeStart(e.selection.getRng())).map(Ex).bind(bM(e,t)).each(N)})),e.nodeChanged()},xM=(e,t,n,r)=>{const s=((e,t)=>Vc(t,e)||e)(e.getBody(),r.container()),i=O(dw,e),o=Mx(i,s,r);return o.bind((e=>n?e.fold(L(B.some(Ex(e))),B.none,L(B.some(Cx(e))),B.none):e.fold(B.none,L(B.some(Cx(e))),B.none,L(B.some(Ex(e)))))).map(bM(e,t)).getOrThunk((()=>{const a=wd(n,s,r),l=a.bind((e=>Mx(i,s,e)));return Nt(o,l,(()=>hw(i,s,r).bind((t=>(e=>Nt(Cd(e),Ed(e),((t,n)=>{const r=mw(!0,t),s=mw(!1,n);return Sd(e,r).forall((e=>e.isEqual(s)))})).getOr(!0))(t)?B.some((()=>{Sf(e,n,un.fromDom(t))})):B.none())))).getOrThunk((()=>l.bind((()=>a.map((s=>()=>{n?wM(e,t,r,s):wM(e,t,s,r)}))))))}))},MM=(e,t,n)=>{if(e.selection.isCollapsed()&&Sl(e)){const r=Ko.fromRangeStart(e.selection.getRng());return xM(e,t,n,r)}return B.none()},SM=e=>1===Ln(e),TM=(e,t,n,r)=>{const s=O(Jg,t),i=$(X(r,s),(e=>e.dom));if(0===i.length)Sf(t,e,n);else{const e=((e,t)=>{const n=Vg(!1),r=qg(t,n.dom);return Gn(un.fromDom(e),n),Qn(un.fromDom(e)),Ko(r,0)})(n.dom,i);t.selection.setRng(e.toRange())}},CM=(e,t)=>{const n=un.fromDom(e.getBody()),r=un.fromDom(e.selection.getStart()),s=X(((e,t)=>{const n=Np(t,e);return ee(n,Qr).fold(L(n),(e=>n.slice(0,e)))})(n,r),SM);return de(s).bind((n=>{const r=Ko.fromRangeStart(e.selection.getRng());return!((e,t,n)=>Nt(Cd(n),Ed(n),((r,s)=>{const i=mw(!0,r),o=mw(!1,s),a=mw(!1,t);return e?Sd(n,a).exists((e=>e.isEqual(o)&&t.isEqual(i))):Td(n,a).exists((e=>e.isEqual(i)&&t.isEqual(o)))})).getOr(!0))(t,r,n.dom)||Ld((i=n).dom)&&Ug(i.dom)?B.none():B.some((()=>TM(t,e,n,s)));var i}))},EM=(e,t)=>e.selection.isCollapsed()?CM(e,t):B.none(),kM=(e,t,n)=>B.some((()=>{e._selectionOverrides.hideFakeCaret(),Sf(e,t,un.fromDom(n))})),LM=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=t?Sp:Tp,r=t?sd.Forwards:sd.Backwards,s=ed(r,e.getBody(),e.selection.getRng());return n(s)?kM(e,t,s.getNode(!t)):B.from(mw(t,s)).filter((e=>n(e)&&rd(s,e))).map((n=>()=>kM(e,t,n.getNode(!t))))})(e,t):((e,t)=>{const n=e.selection.getNode();return Ir(n)?kM(e,t,n):B.none()})(e,t),AM=e=>{const t=parseInt(e,10);return isNaN(t)?0:t},DM=(e,t)=>(e||"table"===zt(t)?"margin":"padding")+("rtl"===Un(t,"direction")?"-right":"-left"),OM=e=>{const t=PM(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>re(t,(t=>{const n=DM(ll(e),t),r=Vn(t,n).map(AM).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&r>0})))(e,t))},RM=e=>rs(e)||ss(e),PM=e=>{return X((t=e.selection.getSelectedBlocks(),$(t,un.fromDom)),(e=>!RM(e)&&!(e=>bn(e).exists(RM))(e)&&Yr(e,(e=>Rr(e.dom)||Pr(e.dom))).exists((e=>Rr(e.dom)))));var t},NM=(e,t)=>{const{dom:n}=e,r=cl(e),s=/[a-z%]+$/i.exec(r)[0],i=parseInt(r,10),o=ll(e);W(PM(e),(e=>{((e,t,n,r,s,i)=>{const o=DM(n,un.fromDom(i));if("outdent"===t){const t=Math.max(0,AM(i.style[o])-r);e.setStyle(i,o,t?t+s:"")}else{const t=AM(i.style[o])+r+s;e.setStyle(i,o,t)}})(n,t,o,i,s,e.dom)}))},IM=e=>NM(e,"outdent"),zM=e=>{if(e.selection.isCollapsed()&&OM(e)){const t=e.dom,n=e.selection.getRng(),r=Ko.fromRangeStart(n),s=t.getParent(n.startContainer,t.isBlock);if(null!==s&&Hp(un.fromDom(s),r))return B.some((()=>IM(e)))}return B.none()},BM=(e,t,n)=>he([zM,tx,Ww,(e,n)=>MM(e,t,n),Rw,eg,nx,LM,zw,EM],(t=>t(e,n))),FM=(e,t)=>{BM(e,t,!0).fold((()=>(e=>gw(e,"ForwardDelete"))(e)),N)},HM=(e,t)=>{e.addCommand("delete",(()=>{((e,t)=>{BM(e,t,!1).fold((()=>{vw(e),bw(e)}),N)})(e,t)})),e.addCommand("forwardDelete",(()=>{FM(e,t)}))},jM=e=>void 0===e.touches||1!==e.touches.length?B.none():B.some(e.touches[0]),UM=e=>{const t=Zi(),n=Wi(!1),r=eo((t=>{e.dispatch("longpress",{...t,type:"longpress"}),n.set(!0)}),400);e.on("touchstart",(e=>{jM(e).each((s=>{r.cancel();const i={x:s.clientX,y:s.clientY,target:e.target};r.throttle(e),n.set(!1),t.set(i)}))}),!0),e.on("touchmove",(s=>{r.cancel(),jM(s).each((r=>{t.on((s=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5})(r,s)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(s=>{r.cancel(),"touchcancel"!==s.type&&t.get().filter((e=>e.target.isEqualNode(s.target))).each((()=>{n.get()?s.preventDefault():e.dispatch("tap",{...s,type:"tap"})}))}),!0)},YM=(e,t)=>Se(e,t.nodeName),VM=(e,t)=>!!Tr(t)||!!vr(t)&&(!YM(e,t)&&!jd(t)),$M=(e,t)=>{if(Tr(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||YM(e,t.nextSibling)))return!0}return!1},WM=e=>{const t=e.dom,n=e.selection,r=e.schema,s=r.getBlockElements();let i=n.getStart();const o=e.getBody();let a,l,c;const d=Ya(e);if(!i||!vr(i))return;const u=o.nodeName.toLowerCase();if(!r.isValidChild(u,d.toLowerCase())||((e,t,n)=>V(Pp(un.fromDom(n),un.fromDom(t)),(t=>YM(e,t.dom))))(s,o,i))return;const h=n.getRng(),m=h.startContainer,p=h.startOffset,f=h.endContainer,g=h.endOffset,v=Rm(e);for(i=o.firstChild;i;)if(VM(s,i)){if($M(s,i)){l=i,i=i.nextSibling,t.remove(l);continue}a||(a=t.create(d,Va(e)),i.parentNode.insertBefore(a,i),c=!0),l=i,i=i.nextSibling,a.appendChild(l)}else a=null,i=i.nextSibling;c&&v&&(h.setStart(m,p),h.setEnd(f,g),n.setRng(h),e.nodeChanged())},GM=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),qM=(e,t,n)=>function(r){const s=arguments,i=s[s.length-2],o=i>0?t.charAt(i-1):"";if('"'===o)return r;if(">"===o){const e=t.lastIndexOf("<",i);if(-1!==e){if(-1!==t.substring(e,i).indexOf('contenteditable="false"'))return r}}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(s[0])+'">'+e.dom.encode("string"==typeof s[1]?s[1]:s[0])+"</span>"},XM=e=>{const t="contenteditable",n=" "+Rt.trim(dc(e))+" ",r=" "+Rt.trim(cc(e))+" ",s=GM(n),i=GM(r),o=uc(e);o.length>0&&e.on("BeforeSetContent",(t=>{((e,t,n)=>{let r=t.length,s=n.content;if("raw"!==n.format){for(;r--;)s=s.replace(t[r],qM(e,s,cc(e)));n.content=s}})(e,o,t)})),e.parser.addAttributeFilter("class",(e=>{let n=e.length;for(;n--;){const r=e[n];s(r)?r.attr(t,"true"):i(r)&&r.attr(t,"false")}})),e.serializer.addAttributeFilter(t,(e=>{let n=e.length;for(;n--;){const r=e[n];(s(r)||i(r))&&(o.length>0&&r.attr("data-mce-content")?(r.name="#text",r.type=3,r.raw=!0,r.value=r.attr("data-mce-content")):r.attr(t,null))}}))},KM=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Ts(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},JM=(e,t)=>{const n=(e=>Wr(un.fromDom(e.getBody()),"*[data-mce-caret]").map((e=>e.dom)).getOrNull())(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void KM(e,n)):void(_s(n)&&(KM(e,n),e.undoManager.add()))},ZM=Pr,QM=(e,t,n)=>{const r=fd(e.getBody()),s=O(nd,1===t?r.next:r.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!s(Ko.fromRangeStart(n))){const n=un.fromDom((e=>{const t=e.dom.create(Ya(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?qn(un.fromDom(r),n):Gn(un.fromDom(r),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},eS=(e,t)=>{const n=t?sd.Forwards:sd.Backwards,r=e.selection.getRng();return((e,t,n)=>oM(t,e,n,kp,Lp,ZM))(n,e,r).orThunk((()=>(QM(e,n,r),B.none())))},tS=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return((e,t,n)=>aM(t,e,n,(e=>kp(e)||Cp(e)),(e=>Lp(e)||Ep(e)),ZM))(n,e,r).orThunk((()=>(QM(e,n,r),B.none())))},nS=(e,t)=>eS(e,t).exists((t=>(sM(e,t),!0))),rS=(e,t)=>tS(e,t).exists((t=>(sM(e,t),!0))),sS=(e,t)=>cM(e,t,t?Lp:kp),iS=e=>Y(["figcaption"],zt(e)),oS=(e,t,n,r)=>{const s=un.fromTag(n),i=un.fromTag("br");return Wt(s,r),Kn(s,i),((e,t,n)=>{n?Kn(e,t):Xn(e,t)})(e,s,t),(e=>{const t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t})(i)},aS=(e,t,n)=>t?((e,t)=>Yx(e,t).breakAt.isNone())(e.dom,n):((e,t)=>Ux(e,t).breakAt.isNone())(e.dom,n),lS=(e,t)=>{const n=un.fromDom(e.getBody()),r=Ko.fromRangeStart(e.selection.getRng()),s=Ya(e),i=Va(e);return((e,t)=>{const n=O(fn,t);return Yr(un.fromDom(e.container()),Qr,n).filter(iS)})(r,n).exists((()=>{if(aS(n,t,r)){const r=oS(n,t,s,i);return e.selection.setRng(r),!0}return!1}))},cS=(e,t)=>!!e.selection.isCollapsed()&&lS(e,t),dS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},uS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,hS=(e,t)=>ne((e=>$(e,(e=>({...dS,action:C,...e}))))(e),(e=>uS(e,t)?[e]:[])),mS=(e,t)=>ne((e=>$(e,(e=>({...dS,action:()=>B.none(),...e}))))(e),(e=>uS(e,t)?[e]:[])),pS=(e,...t)=>()=>e.apply(null,t),fS=(e,t)=>Q(hS(e,t),(e=>e.action())),gS=(e,t)=>he(mS(e,t),(e=>e.action())),vS=(e,t)=>{const n=t?sd.Forwards:sd.Backwards,r=e.selection.getRng();return oM(e,n,r,Sp,Tp,Ir).exists((t=>(sM(e,t),!0)))},yS=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return aM(e,n,r,Sp,Tp,Ir).exists((t=>(sM(e,t),!0)))},_S=(e,t)=>cM(e,t,t?Tp:Sp),bS=xa([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),wS={...bS,none:e=>bS.none(e)},xS=(e,t,n)=>ne(Tn(e),(e=>mn(e,t)?n(e)?[e]:[]:xS(e,t,n))),MS=(e,t)=>((e,t,n=I)=>n(t)?B.none():Y(e,zt(t))?B.some(t):$r(t,e.join(","),(e=>mn(e,"table")||n(e))))(["td","th"],e,t),SS=e=>xS(e,"th,td",z),TS=(e,t)=>Gr(e,"table",t),CS=(e,t,n,r,s=z)=>{const i=1===r;if(!i&&n<=0)return wS.first(e[0]);if(i&&n>=e.length-1)return wS.last(e[e.length-1]);{const i=n+r,o=e[i];return s(o)?wS.middle(t,o):CS(e,t,i,r,s)}},ES=(e,t)=>TS(e,t).bind((t=>{const n=SS(t);return ee(n,(t=>fn(e,t))).map((e=>({index:e,all:n})))})),kS=(e,t=!1)=>{return Bn(e)?e.dom.isContentEditable:(n=e,Gr(n,"[contenteditable]")).fold(L(t),(e=>"true"===LS(e)));var n},LS=e=>e.dom.contentEditable,AS=(e,t,n,r,s)=>{const i=no(un.fromDom(n),"td,th,caption").map((e=>e.dom)),o=X(((e,t)=>ne(t,(t=>{const n=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}))(xo(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})))(e,i),(e=>t(e,s)));return((e,t,n)=>J(e,((e,r)=>e.fold((()=>B.some(r)),(e=>{const s=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return B.some(i<s?r:e)}))),B.none()))(o,r,s).map((e=>e.cell))},DS=O(AS,(e=>e.bottom),((e,t)=>e.y<t)),OS=O(AS,(e=>e.top),((e,t)=>e.y>t)),RS=(e,t)=>ce(t.getClientRects()).bind((t=>DS(e,t.left,t.top))).bind((e=>{return jx(Ed(n=e).map((e=>Ux(n,e).positions.concat(e))).getOr([]),t);var n})),PS=(e,t)=>de(t.getClientRects()).bind((t=>OS(e,t.left,t.top))).bind((e=>{return jx(Cd(n=e).map((e=>[e].concat(Yx(n,e).positions))).getOr([]),t);var n})),NS=(e,t,n)=>{const r=e(t,n);return(e=>e.breakType===Px.Wrap&&0===e.positions.length)(r)||!Dr(n.getNode())&&(e=>e.breakType===Px.Br&&1===e.positions.length)(r)?!((e,t,n)=>n.breakAt.exists((n=>e(t,n).breakAt.isSome())))(e,t,r):r.breakAt.isNone()},IS=O(NS,Ux),zS=O(NS,Yx),BS=(e,t,n,r)=>{const s=e.selection.getRng(),i=t?1:-1;return!(!Lc()||!((e,t,n)=>{const r=Ko.fromRangeStart(t);return Md(!e,n).exists((e=>e.isEqual(r)))})(t,s,n))&&(Hw(i,e,n,!t,!1).each((t=>{sM(e,t)})),!0)},FS=(e,t)=>{const n=t.getNode(e);return vr(n)&&"TABLE"===n.nodeName?B.some(n):B.none()},HS=(e,t,n)=>{const r=FS(!!t,n),s=!1===t;r.fold((()=>sM(e,n.toRange())),(r=>Md(s,e.getBody()).filter((e=>e.isEqual(n))).fold((()=>sM(e,n.toRange())),(n=>((e,t,n)=>{const r=Ya(t);t.undoManager.transact((()=>{const s=un.fromTag(r);Wt(s,Va(t)),Kn(s,un.fromTag("br")),e?qn(un.fromDom(n),s):Gn(un.fromDom(n),s);const i=t.dom.createRng();i.setStart(s.dom,0),i.setEnd(s.dom,0),sM(t,i)}))})(t,e,r)))))},jS=(e,t,n,r)=>{const s=e.selection.getRng(),i=Ko.fromRangeStart(s),o=e.getBody();if(!t&&IS(r,i)){const r=((e,t,n)=>RS(t,n).orThunk((()=>ce(n.getClientRects()).bind((n=>Hx(Vx(e,Ko.before(t)),n.left))))).getOr(Ko.before(t)))(o,n,i);return HS(e,t,r),!0}if(t&&zS(r,i)){const r=((e,t,n)=>PS(t,n).orThunk((()=>ce(n.getClientRects()).bind((n=>Hx($x(e,Ko.after(t)),n.left))))).getOr(Ko.after(t)))(o,n,i);return HS(e,t,r),!0}return!1},US=(e,t,n)=>B.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((r=>B.from(e.dom.getParent(r,"table")).map((s=>n(e,t,s,r))))).getOr(!1),YS=(e,t)=>US(e,t,BS),VS=(e,t)=>US(e,t,jS),$S=(e,t,n)=>n.fold(B.none,B.none,((e,t)=>Vm(t).map((e=>(e=>{const t=bh.exact(e,0,e,0);return Th(t)})(e)))),(n=>(e.execCommand("mceTableInsertRowAfter"),WS(e,t,n)))),WS=(e,t,n)=>$S(e,t,((e,t,n)=>ES(e,n).fold((()=>wS.none(e)),(n=>CS(n.all,e,n.index,1,t))))(n,kS)),GS=(e,t,n)=>$S(e,t,((e,t,n)=>ES(e,n).fold((()=>wS.none()),(n=>CS(n.all,e,n.index,-1,t))))(n,kS)),qS=(e,t)=>{const n=["table","li","dl"],r=un.fromDom(e.getBody()),s=e=>{const t=zt(e);return fn(e,r)||Y(n,t)},i=e.selection.getRng(),o=un.fromDom(t?i.endContainer:i.startContainer);return MS(o,s).map((n=>{TS(n,s).each((t=>{e.model.table.clearSelectedCells(t.dom)})),e.selection.collapse(!t);return(t?WS:GS)(e,s,n).each((t=>{e.selection.setRng(t)})),!0})).getOr(!1)},XS=(e,t)=>{e.on("keydown",(n=>{!1===n.isDefaultPrevented()&&((e,t,n)=>{const r=wt().os;fS([{keyCode:oh.RIGHT,action:pS(nS,e,!0)},{keyCode:oh.LEFT,action:pS(nS,e,!1)},{keyCode:oh.UP,action:pS(rS,e,!1)},{keyCode:oh.DOWN,action:pS(rS,e,!0)},{keyCode:oh.RIGHT,action:pS(YS,e,!0)},{keyCode:oh.LEFT,action:pS(YS,e,!1)},{keyCode:oh.UP,action:pS(VS,e,!1)},{keyCode:oh.DOWN,action:pS(VS,e,!0)},{keyCode:oh.RIGHT,action:pS(vS,e,!0)},{keyCode:oh.LEFT,action:pS(vS,e,!1)},{keyCode:oh.UP,action:pS(yS,e,!1)},{keyCode:oh.DOWN,action:pS(yS,e,!0)},{keyCode:oh.RIGHT,action:pS(pM,e,t,!0)},{keyCode:oh.LEFT,action:pS(pM,e,t,!1)},{keyCode:oh.RIGHT,ctrlKey:!r.isMacOS(),altKey:r.isMacOS(),action:pS(vM,e,t)},{keyCode:oh.LEFT,ctrlKey:!r.isMacOS(),altKey:r.isMacOS(),action:pS(yM,e,t)},{keyCode:oh.UP,action:pS(cS,e,!1)},{keyCode:oh.DOWN,action:pS(cS,e,!0)}],n).each((e=>{n.preventDefault()}))})(e,t,n)}))},KS=(e,t)=>({container:e,offset:t}),JS=Yi.DOM,ZS=e=>t=>e===t?-1:0,QS=(e,t,n)=>{if(Tr(e)&&t>=0)return B.some(KS(e,t));{const r=bo(JS);return B.from(r.backwards(e,t,ZS(e),n)).map((e=>KS(e.container,e.container.data.length)))}},eT=(e,t,n)=>{if(!Tr(e))return B.none();const r=e.textContent;if(t>=0&&t<=r.length)return B.some(KS(e,t));{const r=bo(JS);return B.from(r.backwards(e,t,ZS(e),n)).bind((e=>{const r=e.container.data;return eT(e.container,t+r.length,n)}))}},tT=(e,t,n)=>{if(!Tr(e))return B.none();const r=e.textContent;if(t<=r.length)return B.some(KS(e,t));{const s=bo(JS);return B.from(s.forwards(e,t,ZS(e),n)).bind((e=>tT(e.container,t-r.length,n)))}},nT=(e,t,n,r,s)=>{const i=bo(e,(e=>t=>e.isBlock(t)||Y(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return B.from(i.backwards(t,n,r,s))},rT=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),sT=e=>""!==e&&-1!=="  \f\n\r\t\v".indexOf(e),iT=(e,t)=>e.substring(t.length),oT=(e,t,n,r=0)=>{if(!(s=t).collapsed||3!==s.startContainer.nodeType)return B.none();var s;const i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return nT(e,t.startContainer,t.startOffset,((e,t,r)=>((e,t,n)=>{let r;for(r=t-1;r>=0;r--){const t=e.charAt(r);if(sT(t))return B.none();if(t===n)break}return B.some(r)})(r,t,n).getOr(t)),i).bind((e=>{const s=t.cloneRange();if(s.setStart(e.container,e.offset),s.setEnd(t.endContainer,t.endOffset),s.collapsed)return B.none();const i=rT(s);return 0!==i.lastIndexOf(n)||iT(i,n).length<r?B.none():B.some({text:iT(i,n),range:s,triggerChar:n})}))},aT=(e,t,n,r=0)=>{return(s=un.fromDom(t.startContainer),Gr(s,Wm)).fold((()=>oT(e,t,n,r)),(t=>{const r=e.createRng();r.selectNode(t.dom);const s=rT(r);return B.some({range:r,text:iT(s,n),triggerChar:n})}));var s},lT=e=>{if((e=>3===e.nodeType)(e))return KS(e,e.data.length);{const t=e.childNodes;return t.length>0?lT(t[t.length-1]):KS(e,t.length)}},cT=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?cT(n[t],0):n.length>0&&(e=>1===e.nodeType)(e)&&n.length===t?lT(n[n.length-1]):KS(e,t)},dT=e=>t=>{const n=cT(t.startContainer,t.startOffset);return!((e,t)=>nT(e,t.container,t.offset,((e,t)=>0===t?-1:t),e.getRoot()).filter((e=>{const t=e.container.data.charAt(e.offset-1);return!sT(t)})).isSome())(e,n)},uT=(e,t)=>{const n=t(),r=e.selection.getRng();return((e,t,n)=>he(n.triggerChars,(n=>aT(e,t,n))))(e.dom,r,n).bind((n=>hT(e,t,n)))},hT=(e,t,n,r={})=>{const s=t(),i=e.selection.getRng().startContainer.nodeValue,o=X(s.lookupByChar(n.triggerChar),(t=>n.text.length>=t.minChars&&t.matches.getOrThunk((()=>dT(e.dom)))(n.range,i,n.text)));if(0===o.length)return B.none();const a=Promise.all($(o,(e=>e.fetch(n.text,e.maxResults,r).then((t=>({matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))))));return B.some({lookupData:a,context:n})};var mT;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(mT||(mT={}));const pT=(e,t,n)=>e.stype===mT.Error?t(e.serror):n(e.svalue),fT=e=>({stype:mT.Value,svalue:e}),gT=e=>({stype:mT.Error,serror:e}),vT=e=>pT(e,wa.error,wa.value),yT=fT,_T=e=>{const t=[],n=[];return W(e,(e=>{pT(e,(e=>n.push(e)),(e=>t.push(e)))})),{values:t,errors:n}},bT=gT,wT=(e,t)=>e.stype===mT.Error?t(e.serror):e,xT=(e,t)=>e.stype===mT.Value?{stype:mT.Value,svalue:t(e.svalue)}:e,MT=(e,t)=>e.stype===mT.Error?{stype:mT.Error,serror:t(e.serror)}:e,ST=pT,TT=e=>f(e)&&me(e).length>100?" removed due to size":JSON.stringify(e,null,2),CT=(e,t)=>bT([{path:e,getErrorInfo:t}]),ET=(e,t,n,r)=>Me(n,r).fold((()=>((e,t,n)=>CT(e,(()=>'The chosen schema: "'+n+'" did not exist in branches: '+TT(t))))(e,n,r)),(n=>n.extract(e.concat(["branch: "+r]),t))),kT=(e,t)=>({extract:(n,r)=>Me(r,e).fold((()=>((e,t)=>CT(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(n,e)),(e=>ET(n,r,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+me(t)}),LT=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const s=t[r];for(const t in s)Se(s,t)&&(n[t]=e(n[t],s[t]))}return n},AT=LT(((e,t)=>g(e)&&g(t)?AT(e,t):t)),DT=(LT(((e,t)=>t)),e=>({tag:"defaultedThunk",process:L(e)})),OT=e=>E(bT,te)(e),RT=e=>{const t=_T(e);return t.errors.length>0?OT(t.errors):yT(t.values)},PT=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},NT=e=>({extract:(t,n)=>wT(e(n),(e=>((e,t)=>CT(e,L(t)))(t,e))),toString:L("val")}),IT=NT(yT),zT=(e,t,n,r)=>Me(t,n).fold((()=>((e,t,n)=>CT(e,(()=>'Could not find valid *required* value for "'+t+'" in '+TT(n))))(e,n,t)),r),BT=(e,t,n,r)=>r(Me(e,t).getOrThunk((()=>n(e)))),FT=(e,t,n,r,s)=>{const i=e=>s.extract(t.concat([r]),e),o=e=>e.fold((()=>yT(B.none())),(e=>{const n=s.extract(t.concat([r]),e);return xT(n,B.some)}));switch(e.tag){case"required":return zT(t,n,r,i);case"defaultedThunk":return BT(n,r,e.process,i);case"option":return((e,t,n)=>n(Me(e,t)))(n,r,o);case"defaultedOptionThunk":return((e,t,n,r)=>r(Me(e,t).map((t=>!0===t?n(e):t))))(n,r,e.process,o);case"mergeWithThunk":return BT(n,r,L({}),(t=>{const r=AT(e.process(n),t);return i(r)}))}},HT=e=>({extract:(t,n)=>((e,t,n)=>{const r={},s=[];for(const i of n)PT(i,((n,i,o,a)=>{const l=FT(o,e,t,n,a);ST(l,(e=>{s.push(...e)}),(e=>{r[i]=e}))}),((e,n)=>{r[e]=n(t)}));return s.length>0?bT(s):yT(r)})(t,n,e),toString:()=>{const t=$(e,(e=>PT(e,((e,t,n,r)=>e+" -> "+r.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),jT=e=>({extract:(t,n)=>{const r=$(n,((n,r)=>e.extract(t.concat(["["+r+"]"]),n)));return RT(r)},toString:()=>"array("+e.toString()+")"}),UT=(e,t,n)=>vT(((e,t,n)=>{const r=t.extract([e],n);return MT(r,(e=>({input:n,errors:e})))})(e,t,n)),YT=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:L("... (only showing first ten failures)")}]):e;return $(t,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))})(e.errors).join("\n")+"\n\nInput object: "+TT(e.input),VT=(e,t)=>kT(e,ge(t,HT)),$T=L(IT),WT=(e,t)=>NT((n=>{const r=typeof n;return e(n)?yT(n):bT(`Expected type: ${t} but got: ${r}`)})),GT=WT(S,"number"),qT=WT(p,"string"),XT=WT(_,"boolean"),KT=WT(M,"function"),JT=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),ZT=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),QT=e=>{return t=t=>Y(e,t)?wa.value(t):wa.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),NT((e=>t(e).fold(bT,yT)));var t},eC=(e,t)=>JT(e,e,{tag:"required",process:{}},t),tC=e=>eC(e,qT),nC=e=>eC(e,KT),rC=(e,t)=>JT(e,e,{tag:"option",process:{}},t),sC=e=>rC(e,qT),iC=(e,t,n)=>JT(e,e,DT(t),n),oC=(e,t)=>iC(e,t,GT),aC=(e,t,n)=>iC(e,t,QT(n)),lC=(e,t)=>iC(e,t,XT),cC=(e,t)=>iC(e,t,KT),dC=tC("type"),uC=nC("fetch"),hC=nC("onAction"),mC=cC("onSetup",(()=>C)),pC=sC("text"),fC=sC("icon"),gC=sC("tooltip"),vC=sC("label"),yC=lC("active",!1),_C=lC("enabled",!0),bC=lC("primary",!1),wC=e=>((e,t)=>iC(e,t,qT))("type",e),xC=HT([dC,tC("ch"),oC("minChars",1),(SC=1,((e,t)=>JT(e,e,DT(t),$T()))("columns",SC)),oC("maxResults",10),(MC="matches",rC(MC,KT)),uC,hC,((e,t,n)=>iC(e,t,jT(n)))("highlightOn",[],qT)]);var MC,SC;const TC=[_C,gC,fC,pC,mC],CC=[yC].concat(TC),EC=[cC("predicate",I),aC("scope","node",["node","editor"]),aC("position","selection",["node","selection","line"])],kC=TC.concat([wC("contextformbutton"),bC,hC,ZT("original",A)]),LC=CC.concat([wC("contextformbutton"),bC,hC,ZT("original",A)]),AC=TC.concat([wC("contextformbutton")]),DC=CC.concat([wC("contextformtogglebutton")]),OC=VT("type",{contextformbutton:kC,contextformtogglebutton:LC});HT([wC("contextform"),cC("initValue",L("")),vC,((e,t)=>JT(e,e,{tag:"required",process:{}},jT(t)))("commands",OC),rC("launch",VT("type",{contextformbutton:AC,contextformtogglebutton:DC}))].concat(EC));const RC=e=>{const t=e.ui.registry.getAll().popups,n=ge(t,(e=>{return(t=e,UT("Autocompleter",xC,t)).fold((e=>{throw new Error(YT(e))}),A);var t})),r=Ce(we(n,(e=>e.ch))),s=xe(n);return{dataset:n,triggerChars:r,lookupByChar:e=>X(s,(t=>t.ch===e))}},PC=e=>{const t=Zi(),n=Wi(!1),r=t.isSet,s=()=>{r()&&((e=>{$_(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},i=n=>{r()||(((e,t)=>{$_(e).autocompleter.addDecoration(t)})(e,n.range),t.set({triggerChar:n.triggerChar,matchLength:n.text.length}))},o=Ne((()=>RC(e))),a=r=>{(n=>t.get().map((t=>aT(e.dom,e.selection.getRng(),t.triggerChar).bind((t=>hT(e,o,t,n))))).getOrThunk((()=>uT(e,o))))(r).fold(s,(r=>{i(r.context),r.lookupData.then((i=>{t.get().map((o=>{const a=r.context;o.triggerChar===a.triggerChar&&(a.text.length-o.matchLength>=10?s():(t.set({...o,matchLength:a.text.length}),n.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:i}):(n.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:i}))))}))}))}))};e.addCommand("mceAutocompleterReload",((e,t)=>{const n=f(t)?t.fetchOptions:{};a(n)})),e.addCommand("mceAutocompleterClose",s),((e,t)=>{const n=eo(t.load,50);e.on("keypress compositionend",(e=>{27!==e.which&&n.throttle()})),e.on("keydown",(e=>{const r=e.which;8===r?n.throttle():27===r&&t.cancelIfNecessary()})),e.on("remove",n.cancel)})(e,{cancelIfNecessary:s,load:a})},NC=e=>(t,n,r={})=>{const s=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:s,currentTarget:s,eventPhase:Event.AT_TARGET,originalTarget:s,explicitOriginalTarget:s,isTrusted:!1,srcElement:s,cancelable:!1,preventDefault:C,inputType:n},o=Ei(new InputEvent(e));return t.dispatch(e,{...o,...i,...r})},IC=NC("input"),zC=NC("beforeinput"),BC=(e,t)=>{e.on("keydown",(n=>{!1===n.isDefaultPrevented()&&((e,t,n)=>{const r=n.keyCode===oh.BACKSPACE?"deleteContentBackward":"deleteContentForward";gS([{keyCode:oh.BACKSPACE,action:pS(zM,e)},{keyCode:oh.BACKSPACE,action:pS(tx,e,!1)},{keyCode:oh.DELETE,action:pS(tx,e,!0)},{keyCode:oh.BACKSPACE,action:pS(Ww,e,!1)},{keyCode:oh.DELETE,action:pS(Ww,e,!0)},{keyCode:oh.BACKSPACE,action:pS(MM,e,t,!1)},{keyCode:oh.DELETE,action:pS(MM,e,t,!0)},{keyCode:oh.BACKSPACE,action:pS(eg,e,!1)},{keyCode:oh.DELETE,action:pS(eg,e,!0)},{keyCode:oh.BACKSPACE,action:pS(nx,e,!1)},{keyCode:oh.DELETE,action:pS(nx,e,!0)},{keyCode:oh.BACKSPACE,action:pS(LM,e,!1)},{keyCode:oh.DELETE,action:pS(LM,e,!0)},{keyCode:oh.BACKSPACE,action:pS(zw,e,!1)},{keyCode:oh.DELETE,action:pS(zw,e,!0)},{keyCode:oh.BACKSPACE,action:pS(Rw,e,!1)},{keyCode:oh.DELETE,action:pS(Rw,e,!0)},{keyCode:oh.BACKSPACE,action:pS(EM,e,!1)},{keyCode:oh.DELETE,action:pS(EM,e,!0)}],n).each((t=>{n.preventDefault(),zC(e,r).isDefaultPrevented()||(t(),IC(e,r))}))})(e,t,n)})),e.on("keyup",(t=>{!1===t.isDefaultPrevented()&&((e,t)=>{fS([{keyCode:oh.BACKSPACE,action:pS(ex,e)},{keyCode:oh.DELETE,action:pS(ex,e)}],t)})(e,t)}))},FC=(e,t)=>{let n,r=t;const s=e.dom,i=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=(e=>{for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(s.doc.createTextNode(cs),t.firstChild)}const o=s.createRng();if(t.normalize(),t.hasChildNodes()){const e=new Kr(t,t);for(;n=e.current();){if(Tr(n)){o.setStart(n,0),o.setEnd(n,0);break}if(i[n.nodeName.toLowerCase()]){o.setStartBefore(n),o.setEndBefore(n);break}r=n,n=e.next()}n||(o.setStart(r,0),o.setEnd(r,0))}else Dr(t)?t.nextSibling&&s.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),lm(e,o)},HC=e=>B.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),jC=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,UC=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),YC=e=>{const t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},VC=(e,t,n)=>{let r=e[n?"firstChild":"lastChild"];for(;r&&!vr(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},$C=(e,t,n,r,s)=>{const i=e.dom,o=e.selection.getRng();if(n===e.getBody())return;var a;UC(a=n)&&UC(a.parentNode)&&(s="LI");let l=t(s);if(VC(n,r,!0)&&VC(n,r,!1))if(jC(n,"LI")){const e=YC(n);i.insertAfter(l,e),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(n)?i.remove(e):i.remove(n)}else i.replace(l,n);else if(VC(n,r,!0))jC(n,"LI")?(i.insertAfter(l,YC(n)),l.appendChild(i.doc.createTextNode(" ")),l.appendChild(n)):n.parentNode.insertBefore(l,n),i.remove(r);else if(VC(n,r,!1))i.insertAfter(l,YC(n)),i.remove(r);else{n=YC(n);const e=o.cloneRange();e.setStartAfter(r),e.setEndAfter(n);const t=e.extractContents();"LI"===s&&((e,t)=>e.firstChild&&e.firstChild.nodeName===t)(t,"LI")?(l=t.firstChild,i.insertAfter(t,n)):(i.insertAfter(t,n),i.insertAfter(l,n)),i.remove(r)}FC(e,l)},WC=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),GC=e=>{e.innerHTML='<br data-mce-bogus="1">'},qC=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,XC=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t),KC=(e,t,n)=>!1===Tr(t)?n:e?1===n&&t.data.charAt(n-1)===us?0:n:n===t.data.length-1&&t.data.charAt(n)===us?t.data.length:n,JC=(e,t)=>{const n=e.getRoot();let r,s;for(r=t;r!==n&&"false"!==e.getContentEditable(r);)"true"===e.getContentEditable(r)&&(s=r),r=r.parentNode;return r!==n?s:n},ZC=(e,t)=>{if(Ya(e).toLowerCase()===t.tagName.toLowerCase()){((e,t,n)=>{const r=e.dom;B.from(n.style).map(r.parseStyle).each((e=>{const n={...$n(un.fromDom(t)),...e};r.setStyles(t,n)}));const s=B.from(n.class).map((e=>e.split(/\s+/))),i=B.from(t.className).map((e=>X(e.split(/\s+/),(e=>""!==e))));Nt(s,i,((e,n)=>{const s=X(n,(t=>!Y(e,t))),i=[...e,...s];r.setAttrib(t,"class",i.join(" "))}));const o=["style","class"],a=be(n,((e,t)=>!Y(o,t)));r.setAttribs(t,a)})(e,t,Va(e))}},QC=(e,t)=>{let n,r,s,i,o,a,l,c,d;const u=e.dom,h=e.schema,m=h.getNonEmptyElements(),p=e.selection.getRng(),f=Ya(e),g=t=>{let n,s,o,a=r;const l=h.getTextInlineElements();if(n=t||"TABLE"===c||"HR"===c?u.create(t||f):i.cloneNode(!1),o=n,!1===Ga(e))u.setAttrib(n,"style",null),u.setAttrib(n,"class",null);else do{if(l[a.nodeName]){if(Ld(a)||jd(a))continue;s=a.cloneNode(!1),u.setAttrib(s,"id",""),n.hasChildNodes()?(s.appendChild(n.firstChild),n.appendChild(s)):(o=s,n.appendChild(s))}}while((a=a.parentNode)&&a!==w);return ZC(e,n),GC(o),n},v=e=>{let t,n;const o=KC(e,r,s);if(Tr(r)&&(e?o>0:o<r.nodeValue.length))return!1;if(r.parentNode===i&&d&&!e)return!0;if(e&&vr(r)&&r===i.firstChild)return!0;if(qC(r,"TABLE")||qC(r,"HR"))return d&&!e||!d&&e;const a=new Kr(r,i);for(Tr(r)&&(e&&0===o?a.prev():e||o!==r.nodeValue.length||a.next());t=a.current();){if(vr(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),m[n]&&"br"!==n))return!1}else if(Tr(t)&&!Fs(t.nodeValue))return!1;e?a.prev():a.next()}return!0},y=()=>{o=/^(H[1-6]|PRE|FIGURE)$/.test(c)&&"HGROUP"!==x?g(f):g(),qa(e)&&XC(u,l)&&u.isEmpty(i)?o=u.split(l,i):u.insertAfter(o,i),FC(e,o)};zh(u,p).each((e=>{p.setStart(e.startContainer,e.startOffset),p.setEnd(e.endContainer,e.endOffset)})),r=p.startContainer,s=p.startOffset;const _=!(!t||!t.shiftKey),b=!(!t||!t.ctrlKey);vr(r)&&r.hasChildNodes()&&(d=s>r.childNodes.length-1,r=r.childNodes[Math.min(s,r.childNodes.length-1)]||r,s=d&&Tr(r)?r.nodeValue.length:0);const w=JC(u,r);if(!w)return;_||(r=((e,t,n,r,s)=>{let i,o,a,l,c,d;const u=e.dom,h=JC(u,r);if(o=u.getParent(r,u.isBlock),!o||!XC(u,o)){if(o=o||h,d=o===e.getBody()||(e=>e&&/^(TD|TH|CAPTION)$/.test(e.nodeName))(o)?o.nodeName.toLowerCase():o.parentNode.nodeName.toLowerCase(),!o.hasChildNodes())return i=u.create(t),ZC(e,i),o.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(l=r;l.parentNode!==o;)l=l.parentNode;for(;l&&!u.isBlock(l);)a=l,l=l.previousSibling;if(a&&e.schema.isValidChild(d,t.toLowerCase())){for(i=u.create(t),ZC(e,i),a.parentNode.insertBefore(i,a),l=a;l&&!u.isBlock(l);)c=l.nextSibling,i.appendChild(l),l=c;n.setStart(r,s),n.setEnd(r,s)}}return r})(e,f,p,r,s)),i=u.getParent(r,u.isBlock),l=i?u.getParent(i.parentNode,u.isBlock):null,c=i?i.nodeName.toUpperCase():"";const x=l?l.nodeName.toUpperCase():"";"LI"!==x||b||(i=l,l=l.parentNode,c=x),/^(LI|DT|DD)$/.test(c)&&u.isEmpty(i)?$C(e,g,l,i,f):i!==e.getBody()&&(gs(i)?(o=Ts(i),u.isEmpty(i)&&GC(i),ZC(e,o),FC(e,o)):v()?y():v(!0)?(o=i.parentNode.insertBefore(g(),i),FC(e,qC(i,"HR")?o:i)):(n=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,KC(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,KC(!1,e.endContainer,e.endOffset)),t})(p).cloneRange(),n.setEndAfter(i),a=n.extractContents(),(e=>{W(to(un.fromDom(e),jt),(e=>{const t=e.dom;t.nodeValue=ms(t.nodeValue)}))})(a),(e=>{do{Tr(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)})(a),o=a.firstChild,u.insertAfter(a,i),((e,t,n)=>{let r=n;const s=[];let i;if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;vr(r)&&!t[r.nodeName.toLowerCase()]&&s.push(r)}for(i=s.length;i--;)r=s[i],(!r.hasChildNodes()||r.firstChild===r.lastChild&&""===r.firstChild.nodeValue||WC(e,r))&&e.remove(r)}})(u,m,o),((e,t)=>{t.normalize();const n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")})(u,i),u.isEmpty(i)&&GC(i),o.normalize(),u.isEmpty(o)?(u.remove(o),y()):(ZC(e,o),FC(e,o))),u.setAttrib(o,"id",""),e.dispatch("NewBlock",{newBlock:o}))},eE=(e,t,n)=>{const r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),lm(e,r)},tE=(e,t)=>{const n=e.selection,r=e.dom,s=n.getRng();let i,o;zh(r,s).each((e=>{s.setStart(e.startContainer,e.startOffset),s.setEnd(e.endContainer,e.endOffset)}));let a=s.startOffset,l=s.startContainer;if(1===l.nodeType&&l.hasChildNodes()){const e=a>l.childNodes.length-1;l=l.childNodes[Math.min(a,l.childNodes.length-1)]||l,a=e&&3===l.nodeType?l.nodeValue.length:0}let c=r.getParent(l,r.isBlock);const d=c?r.getParent(c.parentNode,r.isBlock):null,u=d?d.nodeName.toUpperCase():"",h=!(!t||!t.ctrlKey);"LI"!==u||h||(c=d),l&&3===l.nodeType&&a>=l.nodeValue.length&&(((e,t,n)=>{const r=new Kr(t,n);let s;const i=e.getNonEmptyElements();for(;s=r.next();)if(i[s.nodeName.toLowerCase()]||s.length>0)return!0})(e.schema,l,c)||(i=r.create("br"),s.insertNode(i),s.setStartAfter(i),s.setEndAfter(i),o=!0)),i=r.create("br"),Zo(r,s,i),eE(e,i,o),e.undoManager.add()},nE=(e,t)=>{const n=un.fromTag("br");Gn(un.fromDom(t),n),e.undoManager.add()},rE=(e,t)=>{sE(e.getBody(),t)||qn(un.fromDom(t),un.fromTag("br"));const n=un.fromTag("br");qn(un.fromDom(t),n),eE(e,n.dom,!1),e.undoManager.add()},sE=(e,t)=>{return n=Ko.after(t),!!Dr(n.getNode())||Sd(e,Ko.after(t)).map((e=>Dr(e.getNode()))).getOr(!1);var n},iE=e=>e&&"A"===e.nodeName&&"href"in e,oE=e=>e.fold(I,iE,iE,I),aE=(e,t)=>{t.fold(C,O(nE,e),O(rE,e),C)},lE=(e,t)=>{const n=(e=>{const t=O(dw,e),n=Ko.fromRangeStart(e.selection.getRng());return Mx(t,e.getBody(),n).filter(oE)})(e);n.isSome()?n.each(O(aE,e)):tE(e,t)},cE=(e,t)=>HC(e).filter((e=>t.length>0&&mn(un.fromDom(e),t))).isSome(),dE=xa([{br:[]},{block:[]},{none:[]}]),uE=(e,t)=>(e=>cE(e,Wa(e)))(e),hE=e=>(t,n)=>(e=>HC(e).filter((e=>ss(un.fromDom(e)))).isSome())(t)===e,mE=(e,t)=>(n,r)=>{const s=(e=>HC(e).fold(L(""),(e=>e.nodeName.toUpperCase())))(n)===e.toUpperCase();return s===t},pE=e=>mE("pre",e),fE=e=>(t,n)=>Ua(t)===e,gE=(e,t)=>(e=>cE(e,$a(e)))(e),vE=(e,t)=>t,yE=e=>{const t=Ya(e),n=((e,t)=>{const n=e.getRoot();let r,s;for(r=t;r!==n&&"false"!==e.getContentEditable(r);)"true"===e.getContentEditable(r)&&(s=r),r=r.parentNode;return r!==n?s:n})(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t)},_E=(e,t)=>(n,r)=>J(e,((e,t)=>e&&t(n,r)),!0)?B.some(t):B.none(),bE=(e,t)=>{((e,t)=>mx([_E([uE],dE.none()),_E([mE("summary",!0)],dE.br()),_E([pE(!0),fE(!1),vE],dE.br()),_E([pE(!0),fE(!1)],dE.block()),_E([pE(!0),fE(!0),vE],dE.block()),_E([pE(!0),fE(!0)],dE.br()),_E([hE(!0),vE],dE.br()),_E([hE(!0)],dE.block()),_E([gE],dE.br()),_E([vE],dE.br()),_E([yE],dE.block())],[e,!(!t||!t.shiftKey)]).getOr(dE.none()))(e,t).fold((()=>{if(x(t)){if(zC(e,"insertLineBreak").isDefaultPrevented())return}lE(e,t),x(t)&&IC(e,"insertLineBreak")}),(()=>{if(x(t)){if(zC(e,"insertParagraph").isDefaultPrevented())return}QC(e,t),x(t)&&IC(e,"insertParagraph")}),C)},wE=e=>{e.on("keydown",(t=>{t.keyCode===oh.ENTER&&((e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((()=>{!1===e.selection.isCollapsed()&&vw(e),bE(e,t)})))})(e,t)}))},xE=(e,t)=>{e.on("keydown",(n=>{!1===n.isDefaultPrevented()&&((e,t,n)=>{fS([{keyCode:oh.END,action:pS(sS,e,!0)},{keyCode:oh.HOME,action:pS(sS,e,!1)},{keyCode:oh.END,action:pS(_S,e,!0)},{keyCode:oh.HOME,action:pS(_S,e,!1)},{keyCode:oh.END,action:pS(_M,e,!0,t)},{keyCode:oh.HOME,action:pS(_M,e,!1,t)}],n).each((e=>{n.preventDefault()}))})(e,t,n)}))},ME=e=>{e.on("input",(t=>{!1===t.isComposing&&(e=>{const t=un.fromDom(e.getBody());e.selection.isCollapsed()&&cf(t,Ko.fromRangeStart(e.selection.getRng())).each((t=>{e.selection.setRng(t.toRange())}))})(e)}))},SE=wt(),TE=e=>e.stopImmediatePropagation(),CE=e=>e.keyCode===oh.PAGE_UP||e.keyCode===oh.PAGE_DOWN,EE=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",TE,!0):!n&&e.get()&&t.off("NodeChange",TE),e.set(n)},kE=(e,t)=>{if(SE.os.isMacOS())return;const n=Wi(!1);e.on("keydown",(t=>{CE(t)&&EE(n,e,!0)})),e.on("keyup",(r=>{!1===r.isDefaultPrevented()&&((e,t,n)=>{fS([{keyCode:oh.PAGE_UP,action:pS(_M,e,!1,t)},{keyCode:oh.PAGE_DOWN,action:pS(_M,e,!0,t)}],n)})(e,t,r),CE(r)&&n.get()&&(EE(n,e,!1),e.nodeChanged())}))},LE=(e,t)=>{const n=t.container(),r=t.offset();return Tr(n)?(n.insertData(r,e),B.some(Ko(n,r+e.length))):td(t).map((n=>{const r=un.fromText(e);return t.isAtEnd()?qn(n,r):Gn(n,r),Ko(r.dom,e.length)}))},AE=O(LE,cs),DE=O(LE," "),OE=(e,t)=>n=>((e,t)=>!ef(t)&&(tf(e,t)||Zp(e,t)||Qp(e,t)))(e,n)?AE(t):DE(t),RE=e=>{const t=Ko.fromRangeStart(e.selection.getRng()),n=un.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=O(dw,e),s=Ko.fromRangeStart(e.selection.getRng());return Mx(r,e.getBody(),s).bind((e=>t=>t.fold((t=>Td(e.dom,Ko.before(t))),(e=>Cd(e)),(e=>Ed(e)),(t=>Sd(e.dom,Ko.after(t)))))(n)).map((r=>()=>OE(n,t)(r).each((e=>t=>(e.selection.setRng(t.toRange()),e.nodeChanged(),!0))(e))))}return B.none()},PE=e=>{e.on("keydown",(t=>{!1===t.isDefaultPrevented()&&((e,t)=>{gS([{keyCode:oh.SPACEBAR,action:pS(RE,e)}],t).each((n=>{t.preventDefault(),zC(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),IC(e,"insertText",{data:" "}))}))})(e,t)}))},NE=e=>mc(e)?[{keyCode:oh.TAB,action:pS(qS,e,!0)},{keyCode:oh.TAB,shiftKey:!0,action:pS(qS,e,!1)}]:[],IE=e=>{e.on("keydown",(t=>{!1===t.isDefaultPrevented()&&((e,t)=>{fS([...NE(e)],t).each((e=>{t.preventDefault()}))})(e,t)}))},zE=e=>{if(e.addShortcut("Meta+P","","mcePrint"),PC(e),U_(e))return Wi(null);{const t=gM(e);return(e=>{e.on("keyup compositionstart",O(JM,e))})(e),XS(e,t),BC(e,t),wE(e),PE(e),ME(e),IE(e),xE(e,t),kE(e,t),t}};class BE{constructor(e){let t;this.lastPath=[],this.editor=e;const n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(n=>{const r=e.selection.getRng(),s={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==n.type&&kh(s,t)||e.dispatch("SelectionChange"),t=s})),e.on("contextmenu",(()=>{e.dispatch("SelectionChange")})),e.on("SelectionChange",(()=>{const t=e.selection.getStart(!0);t&&ju(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(t=>{!t.isDefaultPrevented()&&ju(e)&&("IMG"===e.selection.getNode().nodeName?xm.setEditorTimeout(e,(()=>{e.nodeChanged()})):e.nodeChanged())}))}nodeChanged(e){const t=this.editor.selection;let n,r,s;this.editor.initialized&&t&&!Nl(this.editor)&&!this.editor.mode.isReadOnly()&&(s=this.editor.getBody(),n=t.getStart(!0)||s,n.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(n,s)||(n=s),r=[],this.editor.dom.getParent(n,(e=>{if(e===s)return!0;r.push(e)})),(e=e||{}).element=n,e.parents=r,this.editor.dispatch("NodeChange",e))}isSameElementPath(e){let t;const n=this.editor,r=se(n.dom.getParents(e,z,n.getBody()));if(r.length===this.lastPath.length){for(t=r.length;t>=0&&r[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=r,!0}return this.lastPath=r,!1}}const FE="x-tinymce/html",HE=L(FE),jE="\x3c!-- x-tinymce/html --\x3e",UE=e=>jE+e,YE=e=>-1!==e.indexOf(jE),VE=(e,t,n)=>{const r=e.split(/\n\n/),s=((e,t)=>{let n="<"+e;const r=we(t,((e,t)=>t+'="'+mi.encodeAllRaw(e)+'"'));return r.length&&(n+=" "+r.join(" ")),n+">"})(t,n),i="</"+t+">",o=$(r,(e=>e.split(/\n/).join("<br />")));return 1===o.length?o[0]:$(o,(e=>s+e+i)).join("")},$E="%MCEPASTEBIN%",WE=e=>e.dom.get("mcepastebin"),GE=e=>e&&"mcepastebin"===e.id,qE=e=>e===$E,XE=e=>{const t=Wi(null);return{create:()=>((e,t)=>{const{dom:n,selection:r}=e,s=e.getBody();t.set(r.getRng());const i=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},$E);kt.browser.isFirefox()&&n.setStyle(i,"left","rtl"===n.getStyle(s,"direction",!0)?65535:-65535),n.bind(i,"beforedeactivate focusin focusout",(e=>{e.stopPropagation()})),i.focus(),r.select(i,!0)})(e,t),remove:()=>((e,t)=>{const n=e.dom;if(WE(e)){let r;const s=t.get();for(;r=WE(e);)n.remove(r),n.unbind(r);s&&e.selection.setRng(s)}t.set(null)})(e,t),getEl:()=>WE(e),getHtml:()=>(e=>{const t=e.dom,n=(e,n)=>{e.appendChild(n),t.remove(n,!0)},[r,...s]=X(e.getBody().childNodes,GE);W(s,(e=>{n(r,e)}));const i=t.select("div[id=mcepastebin]",r);for(let e=i.length-1;e>=0;e--){const s=t.create("div");r.insertBefore(s,i[e]),n(s,i[e])}return r?r.innerHTML:""})(e),getLastRng:t.get}},KE=(e,t)=>(Rt.each(t,(t=>{e=m(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])})),e),JE=e=>e=KE(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,n)=>t||n?cs:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),ZE=(e,t)=>({content:e,cancelled:t}),QE=(e,t,n)=>{const r=((e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}))(e,t,n),s=((e,t)=>{const n=r_({},e.schema);n.addNodeFilter("meta",(e=>{Rt.each(e,(e=>{e.remove()}))}));const r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return cp({validate:!0},e.schema).serialize(r)})(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?((e,t,n)=>{const r=e.dom.create("div",{style:"display:none"},t),s=((e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}))(e,r,n);return ZE(s.node.innerHTML,s.isDefaultPrevented())})(e,s,n):ZE(s,r.isDefaultPrevented())},ek=(e,t)=>(e.insertContent(t,{merge:rc(e),paste:!0}),!0),tk=e=>/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e),nk=(e,t,n)=>!(e.selection.isCollapsed()||!tk(t))&&((e,t,n)=>(e.undoManager.extra((()=>{n(e,t)}),(()=>{e.execCommand("mceInsertLink",!1,t)})),!0))(e,t,n),rk=(e,t,n)=>!!((e,t)=>tk(t)&&V(hc(e),(e=>Ye(t.toLowerCase(),`.${e.toLowerCase()}`))))(e,t)&&((e,t,n)=>(e.undoManager.extra((()=>{n(e,t)}),(()=>{e.insertContent('<img src="'+t+'">')})),!0))(e,t,n),sk=(e,t,n)=>{n||!sc(e)?ek(e,t):((e,t)=>{Rt.each([nk,rk,ek],(n=>!0!==n(e,t,ek)))})(e,t)},ik=(e=>{let t=0;return()=>e+t++})("mceclip"),ok=(e,t,n,r)=>{const s=((e,t,n)=>QE(e,t,n))(e,t,n);!1===s.cancelled&&sk(e,s.content,r)},ak=(e,t,n)=>{const r=n||YE(t);ok(e,(e=>e.replace(jE,""))(t),r,!1)},lk=(e,t)=>{const n=e.dom.encode(t).replace(/\r\n/g,"\n"),r=js(n,oc(e)),s=VE(r,Ya(e),Va(e));ok(e,s,!1,!0)},ck=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const r=e.types[n];try{t[r]=e.getData(r)}catch(e){t[r]=""}}return t},dk=(e,t)=>t in e&&e[t].length>0,uk=e=>dk(e,"text/html")||dk(e,"text/plain"),hk=(e,t,n,r)=>{const s=ik(),i=Ka(e)&&x(n.name),o=i?((e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return x(n)?e.dom.encode(n[1]):null})(e,n.name):s,a=i?n.name:void 0,l=t.create(s,n,r,o,a);return t.add(l),l},mk=e=>{const t=hc(e);return e=>Ue(e.type,"image/")&&V(t,(t=>(e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Rt.hasOwn(n,t)?"image/"+n[t]:"image/"+t})(t)===e.type))},pk=(e,t,n)=>{const r="paste"===t.type?t.clipboardData:t.dataTransfer;var s;if(Zl(e)&&r){const i=((e,t)=>{const n=t.items?ne(ue(t.items),(e=>"file"===e.kind?[e.getAsFile()]:[])):[],r=t.files?ue(t.files):[];return X(n.length>0?n:r,mk(e))})(e,r);if(i.length>0)return t.preventDefault(),(s=i,Promise.all($(s,(e=>Ny(e).then((t=>({file:e,uri:t}))))))).then((t=>{n&&e.selection.setRng(n),W(t,(t=>{((e,t)=>{const{data:n,type:r}=Oy(t.uri),s=t.file,i=e.editorUpload.blobCache,o=i.getByData(n,r),a=null!=o?o:hk(e,i,s,n);ak(e,`<img src="${a.blobUri()}">`,!1)})(e,t)}))})),!0}return!1},fk=(e,t,n,r)=>{let s=JE(n);const i=dk(t,HE())||YE(n),o=!i&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(s),a=tk(s);(qE(s)||!s.length||o&&!a)&&(r=!0),(r||a)&&(s=dk(t,"text/plain")&&o?t["text/plain"]:(e=>{const t=Mi(),n=r_({},t);let r="";const s=t.getVoidElements(),i=Rt.makeMap("script noscript style textarea video audio iframe object"," "),o=t.getBlockElements(),a=e=>{const n=e.name,l=e;if("br"!==n){if("wbr"!==n)if(s[n]&&(r+=" "),i[n])r+=" ";else{if(3===e.type&&(r+=e.value),!(e.name in t.getVoidElements())&&(e=e.firstChild))do{a(e)}while(e=e.next);o[n]&&l.next&&(r+="\n","p"===n&&(r+="\n"))}}else r+="\n"};return e=KE(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),r})(s)),qE(s)||(r?lk(e,s):ak(e,s,i))},gk=(e,t,n)=>{let r;e.on("keydown",(e=>{(e=>oh.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(r=e.shiftKey&&86===e.keyCode)})),e.on("paste",(s=>{if(s.isDefaultPrevented()||(e=>{var t,n;return kt.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)})(s))return;const i="text"===n.get()||r;r=!1;const o=ck(s.clipboardData);!uk(o)&&pk(e,s,t.getLastRng()||e.selection.getRng())||(dk(o,"text/html")?(s.preventDefault(),fk(e,o,o["text/html"],i)):(t.create(),xm.setEditorTimeout(e,(()=>{const n=t.getHtml();t.remove(),fk(e,o,n,i)}),0)))}))},vk=(e,t,n)=>{gk(e,t,n),(e=>{const t=e=>Ue(e,"webkit-fake-url"),n=e=>Ue(e,"data:");e.parser.addNodeFilter("img",((r,s,i)=>{if(!Zl(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(i))for(const s of r){const r=s.attr("src");p(r)&&!s.attr("data-mce-object")&&r!==kt.transparentSrc&&(t(r)||!ac(e)&&n(r))&&s.remove()}}))})(e)},yk=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",(()=>{((e,t)=>{"text"===t.get()?(t.set("html"),ih(e,!1)):(t.set("text"),ih(e,!0)),e.focus()})(e,t)})),e.addCommand("mceInsertClipboardContent",((t,n)=>{n.html&&ak(e,n.html,n.internal),n.text&&lk(e,n.text)}))},_k=(e,t,n,r)=>{((e,t,n)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(HE(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},bk=e=>(t,n)=>{const{dom:r,selection:s}=e,i=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),o=r.create("div",{contenteditable:"true"},t);r.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(o),r.add(e.getBody(),i);const a=s.getRng();o.focus();const l=r.createRng();l.selectNodeContents(o),s.setRng(l),xm.setEditorTimeout(e,(()=>{s.setRng(a),r.remove(i),n()}),0)},wk=e=>({html:UE(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),xk=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),Mk=e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&xk(e)&&_k(t,wk(e),bk(e),(()=>{if(kt.browser.isChromium()||kt.browser.isFirefox()){const t=e.selection.getRng();xm.setEditorTimeout(e,(()=>{e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&xk(e)&&_k(t,wk(e),bk(e),C)})(e))},Sk=(e,t)=>{var n,r;return Hh.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(r=t.clientY)&&void 0!==r?r:0,e.getDoc())},Tk=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},Ck=(e,t)=>{Jl(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(e=>{e.preventDefault(),e.stopPropagation()})),Zl(e)||e.on("drop",(e=>{const t=e.dataTransfer;t&&(e=>V(e.files,(e=>/^image\//.test(e.type))))(t)&&e.preventDefault()})),e.on("drop",(n=>{if(n.isDefaultPrevented()||t.get())return;const r=Sk(e,n);if(w(r))return;const s=ck(n.dataTransfer),i=dk(s,HE());if((!uk(s)||(e=>{const t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(s))&&pk(e,n,r))return;const o=s[HE()],a=o||s["text/html"]||s["text/plain"];a&&(n.preventDefault(),xm.setEditorTimeout(e,(()=>{e.undoManager.transact((()=>{o&&e.execCommand("Delete"),Tk(e,r);const t=JE(a);s["text/html"]?ak(e,t,i):lk(e,t)}))})))})),e.on("dragstart",(e=>{t.set(!0)})),e.on("dragover dragend",(n=>{Zl(e)&&!1===t.get()&&(n.preventDefault(),Tk(e,Sk(e,n))),"dragend"===n.type&&t.set(!1)}))},Ek=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,kk=e=>Rt.trim(e).replace(Ek,Zd).toLowerCase(),Lk=(e,t,n)=>{const r=tc(e);if(n||"all"===r||!nc(e))return t;const s=r?r.split(/[, ]/):[];if(s&&"none"!==r){const n=e.dom,r=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((e,t,i,o)=>{const a=n.parseStyle(n.decode(i)),l={};for(let e=0;e<s.length;e++){const t=a[s[e]];let i=t,o=n.getStyle(r,s[e],!0);/color/.test(s[e])&&(i=kk(i),o=kk(o)),o!==i&&(l[s[e]]=t)}const c=n.serializeStyle(l,"span");return c?t+' style="'+c+'"'+o:t+o}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((e,t,n,r)=>t+' style="'+n+'"'+r)),t},Ak=e=>{const t=Wi(!1),n=Wi(ic(e)?"text":"html"),r=XE(e);(e=>{(kt.browser.isChromium()||kt.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",(n=>{n.content=t(e,n.content,n.internal)}))})(e,Lk)})(e),yk(e,n),(e=>{const t=t=>n=>{t(e,n)},n=Ql(e);M(n)&&e.on("PastePreProcess",t(n));const r=ec(e);M(r)&&e.on("PastePostProcess",t(r))})(e),e.on("PreInit",(()=>{Mk(e),Ck(e,t),vk(e,r,n)}))},Dk=e=>{(e=>{e.on("click",(t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()}))})(e),(e=>{e.parser.addNodeFilter("details",(e=>{W(e,(e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")}))})),e.serializer.addNodeFilter("details",(e=>{W(e,(e=>{const t=e.attr("data-mce-open");e.attr("open",p(t)?t:null),e.attr("data-mce-open",null)}))}))})(e)},Ok=e=>vr(e)&&ns(un.fromDom(e)),Rk=e=>{e.on("click",(t=>{t.detail>=3&&(e=>{const t=e.selection.getRng(),n=Ko.fromRangeStart(t),r=Ko.fromRangeEnd(t);if(Ko.isElementPosition(n)){const e=n.container();Ok(e)&&Cd(e).each((e=>t.setStart(e.container(),e.offset())))}if(Ko.isElementPosition(r)){const e=n.container();Ok(e)&&Ed(e).each((e=>t.setEnd(e.container(),e.offset())))}e.selection.setRng(hg(t))})(e)}))};var Pk;!function(e){e.Before="before",e.After="after"}(Pk||(Pk={}));const Nk=(e,t)=>Math.abs(e.left-t),Ik=(e,t)=>Math.abs(e.right-t),zk=(e,t)=>{const n=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&n>.5},Bk=(e,t)=>(e=>J(e,((e,t)=>e.fold((()=>B.some(t)),(e=>{const n=Math.min(t.left,e.left),r=Math.min(t.top,e.top),s=Math.max(t.right,e.right),i=Math.max(t.bottom,e.bottom);return B.some({top:r,right:s,bottom:i,left:n,width:s-n,height:i-r})}))),B.none()))(X(e,(e=>{return(n=t)>=(r=e).top&&n<=r.bottom;var n,r}))).fold((()=>[[],e]),(t=>{const{pass:n,fail:r}=q(e,(e=>zk(e,t)));return[n,r]})),Fk=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Hk=(e,t,n)=>{const r=e=>Ns(e.node)?B.some(e):vr(e.node)?Hk(ue(e.node.childNodes),t,n):B.none(),s=(e,s)=>{const i=ae(e,((e,r)=>s(e,t,n)-s(r,t,n)));return((e,s)=>{if(e.length>=2){const i=r(e[0]).getOr(e[0]),o=r(e[1]).getOr(e[1]);if(Math.abs(s(i,t,n)-s(o,t,n))<2){if(Tr(i.node))return B.some(i);if(Tr(o.node))return B.some(o)}}return B.none()})(i,s).orThunk((()=>he(i,r)))},[i,o]=Bk(Jx(e),n),{pass:a,fail:l}=q(o,(e=>e.top<n));return s(i,Fk).orThunk((()=>s(l,Eo))).orThunk((()=>s(a,Eo)))},jk=(e,t,n,r)=>{const s=(t,i)=>i.fold((()=>Hk(ue(t.dom.childNodes),n,r)),(e=>{const s=X(ue(t.dom.childNodes),(t=>t!==e.dom));return Hk(s,n,r)})).orThunk((()=>{var n;return(fn(t,e)?B.none():(n=t,B.from(n.dom.parentElement).map(un.fromDom))).bind((e=>s(e,B.some(t))))}));return s(t,B.none())},Uk=(e,t,n)=>((e,t,n)=>{const r=un.fromDom(e),s=yn(r),i=un.fromPoint(s,t,n).filter((e=>gn(r,e))).getOr(r);return jk(r,i,t,n)})(e,t,n).filter((e=>Dc(e.node))).map((e=>((e,t)=>({node:e.node,position:Nk(e,t)<Ik(e,t)?Pk.Before:Pk.After}))(e,t))),Yk=e=>{const t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,s=n.defaultView;return{top:t.top+s.pageYOffset-r.clientTop,left:t.left+s.pageXOffset-r.clientLeft}},Vk=(e,t)=>{return n=(e=>e.inline?Yk(e.getBody()):{left:0,top:0})(e),r=(e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),s=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=Yk(e.getContentAreaContainer()),r=(e=>{const t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},s={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:s})(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:s.left-n.left+r.left,pageY:s.top-n.top+r.top};var n,r,s},$k=Pr,Wk=Rr,Gk=(e,t,n,r)=>{const s=e.dom,i=t.cloneNode(!0);s.setStyles(i,{width:n,height:r}),s.setAttrib(i,"data-mce-selected",null);const o=s.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return s.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),s.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},qk=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Xk=(e,t)=>n=>{if((e=>0===e.button)(n)){const i=Q(t.dom.getParents(n.target),((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})($k,Wk)).getOr(null);if(r=t.getBody(),$k(s=i)&&s!==r){const r=t.dom.getPos(i),s=t.getBody(),o=t.getDoc().documentElement;e.set({element:i,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?s.scrollWidth:o.offsetWidth)-2,maxY:(t.inline?s.scrollHeight:o.offsetHeight)-2,relX:n.pageX-r.x,relY:n.pageY-r.y,width:i.offsetWidth,height:i.offsetHeight,ghost:Gk(t,i,i.offsetWidth,i.offsetHeight)})}}var r,s},Kk=(e,t)=>n=>{e.on((e=>{if(e.dragging){if(((e,t,n)=>t!==n&&!e.dom.isChildOf(t,n)&&!$k(t))(t,(e=>{const t=e.getSel().getRangeAt(0).startContainer;return 3===t.nodeType?t.parentNode:t})(t.selection),e.element)){const r=(e=>{const t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t})(e.element);t.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||t.undoManager.transact((()=>{qk(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}t.dispatch("dragend")}})),Jk(e)},Jk=e=>{e.on((e=>{qk(e.ghost)})),e.clear()},Zk=e=>{const t=Zi(),n=Yi.DOM,r=document,s=Xk(t,e),i=((e,t)=>{const n=Qi(((e,n)=>{t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)}),0);return t.on("remove",n.cancel),r=>e.on((e=>{const s=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(!e.dragging&&s>10){if(t.dispatch("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){const s=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,Vk(t,r));i=e.ghost,o=t.getBody(),i.parentNode!==o&&o.appendChild(i),((e,t,n,r,s,i)=>{let o=0,a=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>s&&(o=t.pageX+n-s),t.pageY+r>i&&(a=t.pageY+r-i),e.style.width=n-o+"px",e.style.height=r-a+"px"})(e.ghost,s,e.width,e.height,e.maxX,e.maxY),n.throttle(r.clientX,r.clientY)}var i,o}))})(t,e),o=Kk(t,e),a=((e,t)=>()=>{e.on((e=>{e.dragging&&t.dispatch("dragend")})),Jk(e)})(t,e);e.on("mousedown",s),e.on("mousemove",i),e.on("mouseup",o),n.bind(r,"mousemove",i),n.bind(r,"mouseup",a),e.on("remove",(()=>{n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",a)})),e.on("keydown",(e=>{e.keyCode===oh.ESC&&a()}))},Qk=e=>{Zk(e),Hl(e)&&(e=>{const t=t=>{if(!t.isDefaultPrevented()){const n=t.dataTransfer;n&&(Y(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&Db(e,"Dropped file type is not supported"))}},n=n=>{Cm(e,n.target)&&t(n)},r=()=>{const r=Yi.DOM,s=e.dom,i=document,o=e.inline?e.getBody():e.getDoc(),a=["drop","dragover"];W(a,(e=>{r.bind(i,e,n),s.bind(o,e,t)})),e.on("remove",(()=>{W(a,(e=>{r.unbind(i,e,n),s.unbind(o,e,t)}))}))};e.on("init",(()=>{xm.setEditorTimeout(e,r,0)}))})(e)},eL=Pr,tL=(e,t)=>tg(e.getBody(),t),nL=e=>{const t=e.selection,n=e.dom,r=n.isBlock,s=e.getBody(),i=kc(e,s,r,(()=>Rm(e))),o="sel-"+n.uniqueId(),a="data-mce-selected";let l;const c=e=>e!==s&&(eL(e)||Ir(e))&&n.isChildOf(e,s),d=(n,r,s,o=!0)=>e.dispatch("ShowCaret",{target:r,direction:n,before:s}).isDefaultPrevented()?null:(o&&t.scrollIntoView(r,-1===n),i.show(s,r)),u=()=>{e.on("click",(t=>{const n=tL(e,t.target);n&&eL(n)&&(t.preventDefault(),e.focus())})),e.on("blur NewBlock",v),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",(t=>{const n=t.target,r=tL(e,n);eL(r)?(t.preventDefault(),jw(e,r).each(g)):c(n)&&jw(e,n).each(g)}),!0),e.on("mousedown",(r=>{const i=r.target;if(i!==s&&"HTML"!==i.nodeName&&!n.isChildOf(i,s))return;if(!1===Sb(e,r.clientX,r.clientY))return;v(),y();const o=tL(e,i);eL(o)?(r.preventDefault(),jw(e,o).each(g)):Uk(s,r.clientX,r.clientY).each((n=>{r.preventDefault();(e=>{e&&t.setRng(e)})(d(1,n.node,n.position===Pk.Before,!1)),vr(o)?o.focus():e.getBody().focus()}))})),e.on("keypress",(e=>{oh.modifierPressed(e)||eL(t.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(e=>{let t=e.range;if(l){if(!l.parentNode)return void(l=null);t=t.cloneRange(),t.selectNode(l),e.range=t}})),e.on("SetSelectionRange",(e=>{e.range=p(e.range);const t=g(e.range,e.forward);t&&(e.range=t)}));e.on("AfterSetSelectionRange",(e=>{const t=e.range,r=t.startContainer.parentNode;m(t)||"mcepastebin"===r.id||y(),(e=>n.hasClass(e,"mce-offscreen-selection"))(r)||v()})),Qk(e),(e=>{const t=Qi((()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const t=e.selection.getRng();if(t.collapsed){const n=Uw(e,t,!1);e.selection.setRng(n)}}}),0);e.on("focus",(()=>{t.throttle()})),e.on("blur",(()=>{t.cancel()}))})(e),(e=>{e.on("init",(()=>{e.on("focusin",(t=>{const n=t.target;if(Ir(n)){const t=tg(e.getBody(),n),r=Pr(t)?t:n;e.selection.getNode()!==r&&jw(e,r).each((t=>e.selection.setRng(t)))}}))}))})(e)},h=e=>ys(e)||Ms(e)||Ss(e),m=e=>h(e.startContainer)||h(e.endContainer),p=t=>{const r=e.schema.getVoidElements(),s=n.createRng(),i=t.startContainer,o=t.startOffset,a=t.endContainer,l=t.endOffset;return Se(r,i.nodeName.toLowerCase())?0===o?s.setStartBefore(i):s.setStartAfter(i):s.setStart(i,o),Se(r,a.nodeName.toLowerCase())?0===l?s.setEndBefore(a):s.setEndAfter(a):s.setEnd(a,l),s},f=r=>{const s=r.cloneNode(!0),i=e.dispatch("ObjectSelected",{target:r,targetClone:s});if(i.isDefaultPrevented())return null;const c=((r,s)=>{const i=un.fromDom(e.getBody()),a=e.getDoc(),l=Wr(i,"#"+o).getOrThunk((()=>{const e=un.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',a);return $t(e,"id",o),Kn(i,e),e})),c=n.createRng();Zn(l),Jn(l,[un.fromText(cs,a),un.fromDom(s),un.fromText(cs,a)]),c.setStart(l.dom.firstChild,1),c.setEnd(l.dom.lastChild,0),jn(l,{top:n.getPos(r,e.getBody()).y+"px"}),cm(l);const d=t.getSel();return d.removeAllRanges(),d.addRange(c),c})(r,i.targetClone),d=un.fromDom(r);return W(no(un.fromDom(e.getBody()),"*[data-mce-selected]"),(e=>{fn(d,e)||Kt(e,a)})),n.getAttrib(r,a)||r.setAttribute(a,"1"),l=r,y(),c},g=(e,t)=>{if(!e)return null;if(e.collapsed){if(!m(e)){const n=t?1:-1,r=ed(n,s,e),i=r.getNode(!t);if(Dc(i))return d(n,i,!!t&&!r.isAtEnd(),!1);const o=r.getNode(t);if(Dc(o))return d(n,o,!t&&!r.isAtEnd(),!1)}return null}let r=e.startContainer,i=e.startOffset;const o=e.endOffset;if(3===r.nodeType&&0===i&&eL(r.parentNode)&&(r=r.parentNode,i=n.nodeIndex(r),r=r.parentNode),1!==r.nodeType)return null;if(o===i+1&&r===e.endContainer){const e=r.childNodes[i];if(c(e))return f(e)}return null},v=()=>{l&&l.removeAttribute(a),Wr(un.fromDom(e.getBody()),"#"+o).each(Qn),l=null},y=()=>{i.hide()};return U_(e)||u(),{showCaret:d,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Ts(e),t.scrollIntoView(e))},hideFakeCaret:y,destroy:()=>{i.destroy(),l=null}}},rL=(e,t,n)=>{if(Tr(t)&&(n<0||n>t.data.length))return[];const r=[n];let s=t;for(;s!==e&&s.parentNode;){const e=s.parentNode;for(let t=0;t<e.childNodes.length;t++)if(e.childNodes[t]===s){r.push(t);break}s=e}return s===e?r.reverse():[]},sL=(e,t,n,r,s)=>({start:rL(e,t,n),end:rL(e,r,s)}),iL=(e,t)=>{const n=t.slice(),r=n.pop();return J(n,((e,t)=>e.bind((e=>B.from(e.childNodes[t])))),B.some(e)).bind((e=>Tr(e)&&(r<0||r>e.data.length)?B.none():B.some({node:e,offset:r})))},oL=(e,t)=>iL(e,t.start).bind((({node:n,offset:r})=>iL(e,t.end).map((({node:e,offset:t})=>{const s=document.createRange();return s.setStart(n,r),s.setEnd(e,t),s})))),aL=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const r=t.parentNode;e.remove(t),aL(e,r,n)}},lL=(e,t,n,r=!0)=>{const s=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(Tr(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Tr(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),aL(e,s,n),s!==i&&aL(e,i,n))},cL=(e,t)=>B.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),dL=(e,t,n)=>{const r=((e,t,n)=>{if(Tr(e)&&t>=e.length)return B.some(KS(e,t));{const r=bo(JS);return B.from(r.forwards(e,t,ZS(e),n)).map((e=>KS(e.container,0)))}})(t,0,t);r.each((r=>{const s=r.container;tT(s,n.start.length,t).each((n=>{const r=e.createRng();r.setStart(s,0),r.setEnd(n.container,n.offset),lL(e,r,(e=>e===t))}))}))},uL=(e,t)=>{const n=e.dom,r=t.pattern,s=oL(n.getRoot(),t.range).getOrDie("Unable to resolve path range");return cL(e,s).each((t=>{"block-format"===r.type?((e,t)=>{const n=t.get(e);return v(n)&&ce(n).exists((e=>Se(e,"block")))})(r.format,e.formatter)&&e.undoManager.transact((()=>{dL(e.dom,t,r),e.formatter.apply(r.format)})):"block-command"===r.type&&e.undoManager.transact((()=>{dL(e.dom,t,r),e.execCommand(r.cmd,!1,r.value)}))})),!0},hL=(e,t)=>{const n=e.dom,r=e.selection.getRng();return cL(e,r).filter((t=>{const r=Ya(e),s=n.is(t,r);return null!==t&&s})).bind((e=>{const r=e.textContent,s=((e,t)=>{const n=t.replace(cs," ");return Q(e,(e=>0===t.indexOf(e.start)||0===n.indexOf(e.start)))})(t,r);return s.map((t=>Rt.trim(r).length===t.start.length?[]:[{pattern:t,range:sL(n.getRoot(),e,0,e,0)}]))})).getOr([])},mL=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),pL=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},fL=(e,t,n)=>{const r=oL(e.getRoot(),n).getOrDie("Unable to resolve path range"),s=r.startContainer,i=r.endContainer,o=0===r.endOffset?i:i.splitText(r.endOffset),a=0===r.startOffset?s:s.splitText(r.startOffset);return{prefix:t,end:o.parentNode.insertBefore(mL(e,t+"-end"),o),start:a.parentNode.insertBefore(mL(e,t+"-start"),a)}},gL=(e,t,n)=>{aL(e,e.get(t.prefix+"-end"),n),aL(e,e.get(t.prefix+"-start"),n)},vL=e=>0===e.start.length,yL=(e,t,n,r)=>{const s=t.start;var i;return nT(e,r.container,r.offset,(i=s,(e,t)=>{const n=e.data.substring(0,t),r=n.lastIndexOf(i.charAt(i.length-1)),s=n.lastIndexOf(i);return-1!==s?s+i.length:-1!==r?r+1:-1}),n).bind((r=>{if(r.offset>=s.length){const t=e.createRng();return t.setStart(r.container,r.offset-s.length),t.setEnd(r.container,r.offset),B.some(t)}{const i=r.offset-s.length;return eT(r.container,i,n).map((t=>{const n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(r.container,r.offset),n})).filter((e=>e.toString()===s)).orThunk((()=>yL(e,t,n,KS(r.container,0))))}}))},_L=(e,t,n)=>{const r=e.dom,s=r.getRoot(),i=n.pattern,o=n.position.container,a=n.position.offset;return eT(o,a-n.pattern.end.length,t).bind((l=>{const c=sL(s,l.container,l.offset,o,a);if(vL(i))return B.some({matches:[{pattern:i,startRng:c,endRng:c}],position:l});{const o=bL(e,n.remainingPatterns,l.container,l.offset,t),a=o.getOr({matches:[],position:l}),d=a.position,u=((e,t,n,r,s,i=!1)=>{if(0===t.start.length&&!i){const t=e.createRng();return t.setStart(n,r),t.setEnd(n,r),B.some(t)}return QS(n,r,s).bind((n=>yL(e,t,s,n).bind((e=>{if(i){if(e.endContainer===n.container&&e.endOffset===n.offset)return B.none();if(0===n.offset&&e.endContainer.textContent.length===e.endOffset)return B.none()}return B.some(e)}))))})(r,i,d.container,d.offset,t,o.isNone());return u.map((e=>{const t=((e,t)=>sL(e,t.startContainer,t.startOffset,t.endContainer,t.endOffset))(s,e);return{matches:a.matches.concat([{pattern:i,startRng:t,endRng:c}]),position:KS(e.startContainer,e.startOffset)}}))}}))},bL=(e,t,n,r,s)=>{const i=e.dom;return QS(n,r,i.getRoot()).bind((o=>{const a=i.createRng();a.setStart(s,0),a.setEnd(n,r);const l=a.toString();for(let n=0;n<t.length;n++){const r=t[n];if(!Ye(l,r.end))continue;const i=t.slice();i.splice(n,1);const a=_L(e,s,{pattern:r,remainingPatterns:i,position:o});if(a.isSome())return a}return B.none()}))},wL=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?W(t.format,(t=>{e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},xL=(e,t,n)=>{const r=e.selection.getRng();return!1===r.collapsed?[]:cL(e,r).bind((s=>{const i=Math.max(0,r.startOffset-(n?1:0));return bL(e,t,r.startContainer,i,s)})).fold((()=>[]),(e=>e.matches))},ML=(e,t)=>{if(0===t.length)return;const n=e.dom,r=e.selection.getBookmark(),s=((e,t)=>{const n=po("mce_textpattern"),r=K(t,((t,r)=>{const s=fL(e,n+`_end${t.length}`,r.endRng);return t.concat([{...r,endMarker:s}])}),[]);return K(r,((t,s)=>{const i=r.length-t.length-1,o=vL(s.pattern)?s.endMarker:fL(e,n+`_start${i}`,s.startRng);return t.concat([{...s,startMarker:o}])}),[])})(n,t);W(s,(t=>{const r=n.getParent(t.startMarker.start,n.isBlock),s=e=>e===r;vL(t.pattern)?((e,t,n,r)=>{const s=pL(e.dom,n);lL(e.dom,s,r),wL(e,t,s)})(e,t.pattern,t.endMarker,s):((e,t,n,r,s)=>{const i=e.dom,o=pL(i,r),a=pL(i,n);lL(i,a,s),lL(i,o,s);const l={prefix:n.prefix,start:n.end,end:r.start},c=pL(i,l);wL(e,t,c)})(e,t.pattern,t.startMarker,t.endMarker,s),gL(n,t.endMarker,s),gL(n,t.startMarker,s)})),e.selection.moveToBookmark(r)},SL=(e,t)=>{if(!e.selection.isCollapsed()||!(e=>e.inlinePatterns.length>0||e.blockPatterns.length>0)(t))return!1;const n=xL(e,t.inlinePatterns,!1),r=hL(e,t.blockPatterns);return(r.length>0||n.length>0)&&(e.undoManager.add(),e.undoManager.extra((()=>{e.execCommand("mceInsertNewLine")}),(()=>{e.insertContent(ls),ML(e,n),((e,t)=>{if(0===t.length)return;const n=e.selection.getBookmark();W(t,(t=>uL(e,t))),e.selection.moveToBookmark(n)})(e,r);const t=e.selection.getRng(),s=QS(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),s.each((t=>{const n=t.container;n.data.charAt(t.offset-1)===ls&&(n.deleteData(t.offset-1,1),aL(e.dom,n.parentNode,(t=>t===e.dom.getRoot())))}))})),!0)},TL=(e,t)=>{if(t.length>0){const n=xL(e,t,!0);n.length>0&&e.undoManager.transact((()=>{ML(e,n)}))}},CL=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},EL=e=>{const t=[",",".",";",":","!","?"],n=[32],r=()=>{return t=lc(e),{inlinePatterns:Ea(t),blockPatterns:Ca(t)};var t},s=()=>Ea(lc(e));e.on("keydown",(t=>{13!==t.keyCode||oh.modifierPressed(t)||SL(e,r())&&t.preventDefault()}),!0),e.on("keyup",(t=>{CL(n,t,((e,t)=>e===t.keyCode&&!1===oh.modifierPressed(t)))&&TL(e,s())})),e.on("keypress",(n=>{CL(t,n,((e,t)=>e.charCodeAt(0)===t.charCode))&&xm.setEditorTimeout(e,(()=>{TL(e,s())}))}))},kL=e=>{const t=Rt.each,n=oh.BACKSPACE,r=oh.DELETE,s=e.dom,i=e.selection,o=e.parser,a=kt.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=kt.deviceType.isiPhone()||kt.deviceType.isiPad(),u=kt.os.isMacOS()||kt.os.isiOS(),h=(t,n)=>{try{e.getDoc().execCommand(t,!1,n)}catch(e){}},m=e=>e.isDefaultPrevented(),p=()=>{const t=e=>{const t=s.create("body"),n=e.cloneContents();return t.appendChild(n),i.serializer.serialize(t,{format:"html"})};e.on("keydown",(i=>{const o=i.keyCode;let a,l;if(!m(i)&&(o===r||o===n)){if(a=e.selection.isCollapsed(),l=e.getBody(),a&&!s.isEmpty(l))return;if(!a&&!(n=>{const r=t(n),i=s.createRng();return i.selectNode(e.getBody()),r===t(i)})(e.selection.getRng()))return;i.preventDefault(),e.setContent(""),l.firstChild&&s.isBlock(l.firstChild)?e.selection.setCursorLocation(l.firstChild,0):e.selection.setCursorLocation(l,0),e.nodeChanged()}}))},f=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},g=()=>{e.inline||s.bind(e.getDoc(),"mousedown mouseup",(t=>{let n;if(t.target===e.getDoc().documentElement)if(n=i.getRng(),e.getBody().focus(),"mousedown"===t.type){if(ys(n.startContainer))return;i.placeCaretAt(t.clientX,t.clientY)}else i.setRng(n)}))},v=()=>{Range.prototype.getClientRects||e.on("mousedown",(t=>{if(!m(t)&&"HTML"===t.target.nodeName){const t=e.getBody();t.blur(),xm.setEditorTimeout(e,(()=>{t.focus()}))}}))},y=()=>{const t=Yl(e);e.on("click",(n=>{const r=n.target;/^(IMG|HR)$/.test(r.nodeName)&&"false"!==s.getContentEditableParent(r)&&(n.preventDefault(),e.selection.select(r),e.nodeChanged()),"A"===r.nodeName&&s.hasClass(r,t)&&0===r.childNodes.length&&(n.preventDefault(),i.select(r))}))},_=()=>{e.on("keydown",(e=>{if(!m(e)&&e.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){const t=i.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}}))},b=()=>{const t=()=>{h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),fl(e)||h("enableObjectResizing",!1)};Il(e)||e.on("BeforeExecCommand mousedown",t)},w=()=>{e.on("SetContent ExecCommand",(e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||t(s.select("a"),(e=>{let t=e.parentNode;const n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}}))}))},x=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},M=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},S=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(t=>{let n;"HTML"===t.target.nodeName&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())})))},T=()=>{u&&e.on("keydown",(t=>{if(oh.metaKeyPressed(t)&&!t.shiftKey&&(37===t.keyCode||39===t.keyCode)){t.preventDefault();e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary")}}))},E=()=>{e.on("click",(e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},k=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(e=>{e.preventDefault()}))}))},L=C,A=()=>{e.on("keydown",(t=>{let n,r;if(m(t)||t.keyCode!==oh.BACKSPACE)return;n=i.getRng();const o=n.startContainer,a=n.startOffset,l=s.getRoot();if(r=o,n.collapsed&&0===a){for(;r&&r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==l;)r=r.parentNode;"BLOCKQUOTE"===r.tagName&&(e.formatter.toggle("blockquote",null,r),n=s.createRng(),n.setStart(o,0),n.setEnd(o,0),i.setRng(n))}})),p(),kt.windowsPhone||e.on("keyup focusin mouseup",(e=>{oh.modifierPressed(e)||i.normalize()}),!0),c&&(g(),y(),e.on("init",(()=>{h("DefaultParagraphSeparator",Ya(e))})),k(),_(),o.addNodeFilter("br",(e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),d?(M(),S(),E()):f()),l&&(e.on("keydown",(t=>{if(!m(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(i.isCollapsed()&&0===i.getRng().startOffset){const e=i.getNode(),n=e.previousSibling;if("HR"===e.nodeName)return s.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),t.preventDefault())}}})),v(),(()=>{const n=()=>{const n=s.getAttribs(i.getStart().cloneNode(!1));return()=>{const r=i.getStart();r!==e.getBody()&&(s.setAttrib(r,"style",null),t(n,(e=>{r.setAttributeNode(e.cloneNode(!0))})))}},r=()=>!i.isCollapsed()&&s.getParent(i.getStart(),s.isBlock)!==s.getParent(i.getEnd(),s.isBlock);e.on("keypress",(t=>{let s;if(!m(t)&&(8===t.keyCode||46===t.keyCode)&&r())return s=n(),e.getDoc().execCommand("delete",!1,null),s(),t.preventDefault(),!1})),s.bind(e.getDoc(),"cut",(t=>{let s;!m(t)&&r()&&(s=n(),xm.setEditorTimeout(e,(()=>{s()})))}))})(),b(),w(),x(),T(),_())};return U_(e)?(c&&(g(),y(),k(),f(),d&&(M(),S(),E())),l&&(v(),b(),x(),T())):A(),{refreshContentEditable:L,isHidden:()=>{if(!l||e.removed)return!1;const t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},LL=Yi.DOM,AL=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,DL=e=>be(e,(e=>!1===b(e))),OL=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return DL({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:AL(e),validate:!0,blob_cache:n,document:e.getDoc()})},RL=e=>{const t=e.options.get;return DL({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html")})},PL=e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{const t=e.dom.getRoot();e.inline||ju(e)&&e.selection.getStart(!0)!==t||Cd(t).each((t=>{const n=t.getNode(),r=xr(n)?Cd(n).getOr(t):t;e.selection.setRng(r.toRange())}))})(e),e.nodeChanged({initial:!0});const t=Wl(e);M(t)&&t.call(e,e),(e=>{const t=ql(e);t&&xm.setEditorTimeout(e,(()=>{let n;n=!0===t?e:e.editorManager.get(t),n.destroyed||n.focus()}),100)})(e)},NL=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,IL=e=>{const t=NL(e),n=hl(e),r=e.contentCSS,s=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},i=()=>{e.removed?s():e.on("remove",s)};if(e.contentStyles.length>0){let t="";Rt.each(e.contentStyles,(e=>{t+=e+"\r\n"})),e.dom.addStyle(t)}const o=Promise.all(((e,t,n)=>{const r=[NL(e).loadAll(t)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(n)])})(e,r,n)).then(i).catch(i),a=ul(e);return a&&((e,t)=>{const n=un.fromDom(e.getBody()),r=Pn(Rn(n)),s=un.fromTag("style");$t(s,"type","text/css"),Kn(s,un.fromText(t)),Kn(r,s),e.on("remove",(()=>{Qn(s)}))})(e,a),o},zL=e=>{!0!==e.removed&&((e=>{U_(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),PL(e))},BL=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(LL.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=Il(e),e.readonly||(e.inline&&"static"===LL.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=Vb(e),e.schema=Mi(RL(e)),e.dom=Yi(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:()=>e.inline,schema:e.schema,contentCssCors:sl(e),referrerPolicy:il(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=(e=>{const t=r_(OL(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",((t,n)=>{let r,s,i=t.length;const o=e.dom,a="data-mce-"+n;for(;i--;)if(r=t[i],s=r.attr(n),s&&!r.attr(a)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===n?(s=o.serializeStyle(o.parseStyle(s),r.name),s.length||(s=null),r.attr(a,s),r.attr(n,s)):"tabindex"===n?(r.attr(a,s),r.attr(n,null)):r.attr(a,e.convertURL(s,n,r.name))}})),t.addNodeFilter("script",(e=>{let t=e.length;for(;t--;){const n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}})),e.options.get("preserve_cdata")&&t.addNodeFilter("#cdata",(t=>{let n=t.length;for(;n--;){const r=t[n];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode(r.value)+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(t=>{let n=t.length;const r=e.schema.getNonEmptyElements();for(;n--;){const e=t[n];e.isEmpty(r)&&0===e.getAll("br").length&&e.append(new Qm("br",1))}})),t})(e),e.serializer=sb((e=>{const t=e.options.get;return{...OL(e),...RL(e),...DL({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(e),e),e.selection=Q_(e.dom,e.getWin(),e.serializer,e),e.annotator=Ju(e),e.formatter=tw(e),e.undoManager=rw(e),e._nodeChangeDispatcher=new BE(e),e._selectionOverrides=nL(e),UM(e),Dk(e),XM(e),U_(e)||(Rk(e),(e=>{EL(e)})(e));const s=zE(e);HM(e,s),(e=>{e.on("NodeChange",O(WM,e))})(e),lw(e),Ak(e);const i=Y_(e);(e=>{const t=e.getDoc(),n=e.getBody();(e=>{e.dispatch("PreInit")})(e),Xl(e)||(t.body.spellcheck=!1,LL.setAttrib(n,"spellcheck","false")),e.quirks=kL(e),(e=>{e.dispatch("PostRender")})(e);const r=ml(e);void 0!==r&&(n.dir=r);const s=Kl(e);s&&e.on("BeforeSetContent",(e=>{Rt.each(s,(t=>{e.content=e.content.replace(t,(e=>"\x3c!--mce:protected "+escape(e)+"--\x3e"))}))})),e.on("SetContent",(()=>{e.addVisual(e.getBody())})),e.on("compositionstart compositionend",(t=>{e.composing="compositionstart"===t.type}))})(e),i.fold((()=>{IL(e).then((()=>zL(e)))}),(t=>{e.setProgressState(!0),IL(e).then((()=>{t().then((t=>{e.setProgressState(!1),zL(e),W_(e)}),(t=>{e.notificationManager.open({type:"error",text:String(t)}),zL(e),W_(e)}))}))}))},FL=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline)BL(e);else{const t=e.iframeElement,r=(n=un.fromDom(t),sr(n,"load",zb,(()=>{r.unbind(),e.contentDocument=t.contentDocument,BL(e)})));t.srcdoc=e.iframeHTML}var n},HL=Yi.DOM,jL=(e,t)=>{const n=e.translate("Rich Text Area"),r=qt(un.fromDom(e.getElement()),"tabindex").bind(Ke),s=((e,t,n,r)=>{const s=un.fromTag("iframe");return r.each((e=>$t(s,"tabindex",e))),Wt(s,n),Wt(s,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),rn(s,"tox-edit-area__iframe"),s})(e.id,n,Ia(e),r).dom;s.onload=()=>{s.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=s,e.iframeHTML=(e=>{let t=za(e)+"<html><head>";Ba(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Fa(e),r=Ha(e),s=e.translate(Vl(e));return ja(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+ja(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${s}"><br></body></html>`,t})(e),HL.add(t.iframeContainer,s)},UL=Yi.DOM,YL=(e,t,n)=>{const r=Eb.get(n),s=Eb.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Rt.trim(n),r&&-1===Rt.inArray(t,n)){if(e.plugins[n])return;try{const i=r(e,s)||{};e.plugins[n]=i,M(i.init)&&(i.init(e,s),t.push(n))}catch(t){((e,t,n)=>{const r=Ki.translate(["Failed to initialize plugin: {0}",t]);eh(e,"PluginLoadError",{message:r}),Pb(r,n),Db(e,r)})(e,n,t)}}},VL=e=>({editorContainer:e,iframeContainer:e,api:{}}),$L=e=>{const t=e.getElement();return e.inline?VL(null):(e=>{const t=UL.create("div");return UL.insertAfter(t,e),VL(t)})(t)},WL=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,p(bl(e))?(e=>e.theme.renderUI())(e):M(bl(e))?(e=>{const t=e.getElement(),n=bl(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n})(e):$L(e)},GL=e=>{e.dispatch("ScriptsLoaded"),(e=>{const t=Rt.trim(Za(e)),n=e.ui.registry.getAll().icons,r={...gb.get("default").icons,...gb.get(t).icons};fe(r,((t,r)=>{Se(n,r)||e.ui.registry.addIcon(r,t)}))})(e),(e=>{const t=bl(e);if(p(t)){const n=kb.get(t);e.theme=n(e,kb.urls[t])||{},M(e.theme.init)&&e.theme.init(e,kb.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(e),(e=>{const t=xl(e),n=vb.get(t);e.model=n(e,vb.urls[t])})(e),(e=>{const t=[];W(Bl(e),(n=>{YL(e,t,(e=>e.replace(/^\-/,""))(n))}))})(e);const t=WL(e);((e,t)=>{const n={show:B.from(t.show).getOr(C),hide:B.from(t.hide).getOr(C),isEnabled:B.from(t.isEnabled).getOr(z),setEnabled:n=>{e.mode.isReadOnly()||B.from(t.setEnabled).each((e=>e(n)))}};e.ui={...e.ui,...n}})(e,B.from(t.api).getOr({}));const n={editorContainer:t.editorContainer,iframeContainer:t.iframeContainer};return e.editorContainer=n.editorContainer?n.editorContainer:null,Ib(e),e.inline?FL(e):((e,t)=>{jL(e,t),t.editorContainer&&(HL.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=HL.isHidden(t.editorContainer)),e.getElement().style.display="none",HL.setAttrib(e.id,"aria-hidden","true"),FL(e)})(e,n)},qL=Yi.DOM,XL=e=>"-"===e.charAt(0),KL=(e,t)=>{const n=ol(t),r=al(t);if(!1===Ki.hasCode(n)&&"en"!==n){const s=qe(r)?r:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(s).catch((()=>{((e,t,n)=>{Ob(e,"LanguageLoadError",Rb("language",t,n))})(t,s,n)}))}},JL=(e,t)=>{const n=bl(e);if(p(n)&&!XL(n)&&!Se(kb.urls,n)){const r=wl(e),s=r?e.documentBaseURI.toAbsolute(r):`themes/${n}/theme${t}.js`;kb.load(n,s).catch((()=>{((e,t,n)=>{Ob(e,"ThemeLoadError",Rb("theme",t,n))})(e,s,n)}))}},ZL=(e,t)=>{const n=xl(e);if("plugin"!==n&&!Se(vb.urls,n)){const r=Ml(e),s=p(r)?e.documentBaseURI.toAbsolute(r):`models/${n}/model${t}.js`;vb.load(n,s).catch((()=>{((e,t,n)=>{Ob(e,"ModelLoadError",Rb("model",t,n))})(e,s,n)}))}},QL=(e,t,n)=>B.from(t).filter((e=>qe(e)&&!gb.has(e))).map((t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${n}.js`,name:B.some(t)}))),eA=(e,t,n)=>{const r=QL(t,"default",n),s=(e=>B.from(Qa(e)).filter(qe).map((e=>({url:e,name:B.none()}))))(t).orThunk((()=>QL(t,Za(t),"")));W((e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t})([r,s]),(n=>{e.add(n.url).catch((()=>{((e,t,n)=>{Ob(e,"IconsLoadError",Rb("icons",t,n))})(t,n.url,n.name.getOrUndefined())}))}))},tA=(e,t)=>{const n=(t,n)=>{Eb.load(t,n).catch((()=>{((e,t,n)=>{Ob(e,"PluginLoadError",Rb("plugin",t,n))})(e,n,t)}))};fe(Fl(e),((t,r)=>{n(r,t),e.options.set("plugins",Bl(e).concat(r))})),W(Bl(e),(e=>{!(e=Rt.trim(e))||Eb.urls[e]||XL(e)||n(e,`plugins/${e}/plugin${t}.js`)}))},nA=(e,t)=>{const n=$i.ScriptLoader,r=()=>{!e.removed&&(e=>{const t=bl(e);return!p(t)||x(kb.get(t))})(e)&&(e=>{const t=xl(e);return x(vb.get(t))})(e)&&GL(e)};JL(e,t),ZL(e,t),KL(n,e),eA(n,e,t),tA(e,t),n.loadQueue().then(r,r)},rA=e=>{const t=e.id;Ki.setCode(ol(e));const n=()=>{qL.unbind(window,"ready",n),e.render()};if(!Pi.Event.domLoaded)return void qL.bind(window,"ready",n);if(!e.getElement())return;const r=un.fromDom(e.getElement()),s=Jt(r);e.on("remove",(()=>{G(r.dom.attributes,(e=>Kt(r,e.name))),Wt(r,s)})),e.ui.styleSheetLoader=((e,t)=>Xr.forElement(e,{contentCssCors:zl(t),referrerPolicy:il(t)}))(r,e),Ll(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const i=e.getElement().form||qL.getParent(t,"form");i&&(e.formElement=i,Al(e)&&!Sr(e.getElement())&&(qL.insertAfter(qL.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},qL.bind(i,"submit reset",e.formEventDelegate),e.on("reset",(()=>{e.resetContent()})),!Dl(e)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)))),e.windowManager=Lb(e),e.notificationManager=Cb(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",(e=>{e.save&&(e.content=qL.encode(e.content))})),Ol(e)&&e.on("submit",(()=>{e.initialized&&e.save()})),Rl(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),nA(e,e.suffix)},sA=wt().deviceType,iA=sA.isPhone(),oA=sA.isTablet(),aA=e=>{if(w(e))return[];{const t=v(e)?e:e.split(/[ ,]/),n=$(t,$e);return X(n,qe)}},lA=(e,t)=>{const n=((e,t)=>{const n={},r={};return _e(e,t,ye(n),ye(r)),{t:n,f:r}})(t,((t,n)=>Y(e,n)));return r=n.t,s=n.f,{sections:L(r),options:L(s)};var r,s},cA=(e,t)=>Se(e.sections(),t),dA=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Me(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),uA=(e,t)=>{var n;const r=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Rt.extend({},e.external_plugins,r):r},hA=(e,t,n,r)=>{const s=aA(n.forced_plugins),i=aA(r.plugins),o=((e,t)=>cA(e,t)?e.sections()[t]:{})(t,"mobile"),a=((e,t,n,r)=>e&&cA(t,"mobile")?r:n)(e,t,i,o.plugins?aA(o.plugins):i),l=((e,t)=>[].concat(aA(e)).concat(aA(t)))(s,a);return Rt.extend(r,{forced_plugins:s,plugins:l})},mA=(e,t,n,r,s)=>{var i;const o=e?{mobile:dA(null!==(i=s.mobile)&&void 0!==i?i:{},t)}:{},a=lA(["mobile"],AT(o,s)),l=Rt.extend(n,r,a.options(),((e,t)=>e&&cA(t,"mobile"))(e,a)?((e,t,n={})=>{const r=e.sections(),s=Me(r,t).getOr({});return Rt.extend({},n,s)})(a,"mobile"):{},{external_plugins:uA(r,a.options())});return hA(e,a,r,l)},pA=(e,t)=>((e,t)=>$_(e).editor.addVisual(t))(e,t),fA=e=>{const t=t=>()=>{W("left,center,right,justify".split(","),(n=>{t!==n&&e.formatter.remove("align"+n)})),"none"!==t&&((t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})},gA=e=>{fA(e),(e=>{const t=t=>()=>{const n=e.selection,r=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return V(r,(n=>x(e.formatter.matchNode(n,t))))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},vA=(e,t)=>{const n=e.selection,r=e.dom;return/^ | $/.test(t)?((e,t,n)=>{const r=un.fromDom(e.getRoot());return n=nf(r,Ko.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),rf(r,Ko.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),t):t},yA=(e,t)=>{const{content:n,details:r}=(e=>{if("string"!=typeof e){const t=Rt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);a_(e,{content:vA(e,n),format:"html",set:!1,selection:!0,paste:r.paste}).each((t=>{const n=((e,t,n)=>V_(e).editor.insertContent(t,n))(e,t.content,r);l_(e,n,t),e.addVisual()}))},_A={"font-size":"size","font-family":"face"},bA=(e,t,n)=>Ag(un.fromDom(n),(t=>(t=>Vn(t,e).orThunk((()=>"font"===zt(t)?Me(_A,e).bind((e=>qt(t,e))):B.none())))(t)),(e=>fn(un.fromDom(t),e))),wA=e=>(t,n)=>B.from(n).map(un.fromDom).filter(Ht).bind((n=>bA(e,t,n.dom).or(((e,t)=>B.from(Yi.DOM.getStyle(t,e,!0)))(e,n.dom)))).getOr(""),xA=wA("font-size"),MA=E((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),wA("font-family")),SA=e=>Cd(e.getBody()).map((e=>{const t=e.container();return Tr(t)?t.parentNode:t})),TA=(e,t)=>(e=>B.from(e.selection.getRng()).bind((t=>{const n=e.getBody();return t.startContainer===n&&0===t.startOffset?B.none():B.from(e.selection.getStart(!0))})))(e).orThunk(O(SA,e)).map(un.fromDom).filter(Ht).bind(t),CA=(e,t)=>TA(e,k(B.some,t)),EA=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const r=(e=>Rt.explode(e.options.get("font_size_style_values")))(e),s=(e=>Rt.explode(e.options.get("font_size_classes")))(e);return s?s[n-1]||t:r[n-1]||t}return t}return t},kA=e=>{const t=e.split(/\s*,\s*/);return $(t,(e=>-1===e.indexOf(" ")||Ue(e,'"')||Ue(e,"'")?e:`'${e}'`)).join(",")},LA=e=>{const t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,r)=>{t(e,{value:r})},BackColor:(e,n,r)=>{t("hilitecolor",{value:r})},FontName:(t,n,r)=>{((e,t)=>{const n=EA(e,t);e.formatter.toggle("fontname",{value:kA(n)}),e.nodeChanged()})(e,r)},FontSize:(t,n,r)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:EA(e,t)}),e.nodeChanged()})(e,r)},LineHeight:(t,n,r)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,r)},Lang:(e,n,r)=>{t(e,{value:r.code,customValue:r.customCode})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,n,r)=>{t(p(r)?r:"p")},mceToggleFormat:(e,n,r)=>{t(r)}})},AA=e=>{const t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",(()=>(e=>CA(e,(t=>MA(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("FontSize",(()=>(e=>CA(e,(t=>xA(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("LineHeight",(()=>(e=>CA(e,(t=>{const n=un.fromDom(e.getBody()),r=Ag(t,(e=>Vn(e,"line-height")),O(fn,n));return r.getOrThunk((()=>{const e=parseFloat(Un(t,"line-height")),n=parseFloat(Un(t,"font-size"));return String(e/n)}))})).getOr(""))(e)))},DA=e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{NM(e,"indent")})(e)},Outdent:()=>{IM(e)}}),e.editorCommands.addCommands({Outdent:()=>OM(e)},"state")},OA=e=>{gA(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let r;try{n.execCommand(t)}catch(e){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(kt.os.isMacOS()||kt.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:t,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),(t=>{if(1===t.nodeType&&s++===r)return e.selection.select(t),!1}),e.getBody())},mceSelectNode:(t,n,r)=>{e.selection.select(r)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Rr);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,r)=>{yA(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,r)=>{yA(e,e.dom.encode(r))},insertHTML:(t,n,r)=>{yA(e,r)},mceInsertContent:(t,n,r)=>{yA(e,r)},mceSetContent:(t,n,r)=>{e.setContent(r)},mceReplaceContent:(t,n,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(e),(e=>{const t=(t,n,r)=>{const s=p(r)?{href:r}:r,i=e.dom.getParent(e.selection.getNode(),"a");f(s)&&p(s.href)&&(s.href=s.href.replace(/ /g,"%20"),i&&s.href||e.formatter.remove("link"),s.href&&e.formatter.apply("link",s,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else e.formatter.remove("link")},mceInsertLink:t,createLink:t})})(e),DA(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{bE(e)},mceInsertNewLine:(t,n,r)=>{bE(e,r)},InsertLineBreak:(t,n,r)=>{lE(e,r)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const t=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){const r=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(r)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")})(e)})(e),(e=>{LA(e),AA(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,r)=>{const s=null!=r?r:e.selection.getNode();if(s!==e.getBody()){const t=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,r)=>{Im(e,r)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)};class RA{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t,n,r){const s=this.editor,i=e.toLowerCase(),o=null==r?void 0:r.skip_focus;if(s.removed)return!1;"mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||o?(e=>{bm(e).each((t=>e.selection.setRng(t)))})(s):s.focus());if(s.dispatch("BeforeExecCommand",{command:e,ui:t,value:n}).isDefaultPrevented())return!1;const a=this.commands.exec[i];return!!M(a)&&(a(i,t,n),s.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}queryCommandState(e){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),n=this.commands.state[t];return!!M(n)&&n(t)}queryCommandValue(e){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),n=this.commands.value[t];return M(n)?n(t):""}addCommands(e,t="exec"){const n=this.commands;fe(e,((e,r)=>{W(r.toLowerCase().split(","),(r=>{n[t][r]=e}))}))}addCommand(e,t,n){const r=e.toLowerCase();this.commands.exec[r]=(e,r,s)=>t.call(null!=n?n:this.editor,r,s)}queryCommandSupported(e){const t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}}const PA="data-mce-contenteditable",NA=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},IA=(e,t)=>{e.dom.contentEditable=t?"true":"false"},zA=(e,t)=>{const n=un.fromDom(e.getBody());((e,t,n)=>{ln(e,t)&&!1===n?on(e,t):n&&rn(e,t)})(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{B.from(e.selection.getNode()).each((e=>{e.removeAttribute("data-mce-selected")}))})(e),e.readonly=!0,IA(n,!1),W(no(n,'*[contenteditable="true"]'),(e=>{$t(e,PA,"true"),IA(e,!1)}))):(e.readonly=!1,IA(n,!0),(e=>{W(no(e,'*[data-mce-contenteditable="true"]'),(e=>{Kt(e,PA),IA(e,!0)}))})(n),NA(e,"StyleWithCSS",!1),NA(e,"enableInlineTableEditing",!1),NA(e,"enableObjectResizing",!1),Pm(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},BA=e=>e.readonly,FA=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{BA(e)&&W(t,(e=>{e.attr(PA,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(PA,(t=>{BA(e)&&W(t,(e=>{e.attr("contenteditable",e.attr(PA))}))})),e.serializer.addTempAttr(PA)},HA=(e,t)=>{if((e=>"click"===e.type)(t)&&!oh.metaKeyPressed(t)){const n=un.fromDom(t.target);((e,t)=>Gr(t,"a",(t=>fn(t,un.fromDom(e.getBody())))).bind((e=>qt(e,"href"))))(e,n).each((n=>{if(t.preventDefault(),/^#/.test(n)){const t=e.dom.select(`${n},[name="${r=n,s="#",Ue(r,s)?((e,t)=>e.substring(t))(r,s.length):r}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var r,s}))}},jA=Rt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class UA{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||I}static isNative(e){return!!jA[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const n=e.toLowerCase(),r=ki(n,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[n];if(s)for(let e=0,t=s.length;e<t;e++){const t=s[e];if(!t.removed){if(t.once&&this.off(n,t.func),r.isImmediatePropagationStopped())return r;if(!1===t.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,t,n,r){if(!1===t&&(t=I),t){const s={func:t,removed:!1};r&&Rt.extend(s,r);const i=e.toLowerCase().split(" ");let o=i.length;for(;o--;){const e=i[o];let t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=n?[s,...t]:[...t,s],this.bindings[e]=t}}return this}off(e,t){if(e){const n=e.toLowerCase().split(" ");let r=n.length;for(;r--;){const s=n[r];let i=this.bindings[s];if(!s)return fe(this.bindings,((e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]})),this;if(i){if(t){const e=q(i,(e=>e.func===t));i=e.fail,this.bindings[s]=i,W(e.pass,(e=>{e.removed=!0}))}else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else fe(this.bindings,((e,t)=>{this.toggleEvent(t,!1)})),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)}}const YA=e=>(e._eventDispatcher||(e._eventDispatcher=new UA({scope:e,toggleEvent:(t,n)=>{UA.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),VA={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return ki(e.toLowerCase(),null!=t?t:{},r);const s=YA(r).dispatch(e,t);if(!1!==n&&r.parent){let t=r.parent();for(;t&&!s.isPropagationStopped();)t.dispatch(e,s,!1),t=t.parent()}return s},on(e,t,n){return YA(this).on(e,t,n)},off(e,t){return YA(this).off(e,t)},once(e,t){return YA(this).once(e,t)},hasEventListeners(e){return YA(this).has(e)}},$A=Yi.DOM;let WA;const GA=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;const n=yl(e);return n?(e.eventRoot||(e.eventRoot=$A.select(n)[0]),e.eventRoot):e.getBody()},qA=(e,t,n)=>{(e=>!e.hidden&&!BA(e))(e)?e.dispatch(t,n):BA(e)&&HA(e,n)},XA=(e,t)=>{let n;if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const r=GA(e,t);if(yl(e)){if(WA||(WA={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||WA&&(fe(WA,((t,n)=>{e.dom.unbind(GA(e,n))})),WA=null)}))),WA[t])return;n=n=>{const r=n.target,s=e.editorManager.get();let i=s.length;for(;i--;){const e=s[i].getBody();(e===r||$A.isChildOf(r,e))&&qA(s[i],t,n)}},WA[t]=n,$A.bind(r,t,n)}else n=n=>{qA(e,t,n)},$A.bind(r,t,n),e.delegates[t]=n},KA={...VA,bindPendingEventDelegates(){const e=this;Rt.each(e._pendingNativeEvents,(t=>{XA(e,t)}))},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?XA(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(GA(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(fe(e.delegates,((t,n)=>{e.dom.unbind(GA(e,n),n,t)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},JA=e=>p(e)?{value:e.split(/[ ,]/),valid:!0}:T(e,p)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ZA=(e,t)=>e+(Xe(t.message)?"":`. ${t.message}`),QA=e=>e.valid,eD=(e,t,n="")=>{const r=t(e);return _(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},tD=(e,t)=>{const n={},r={},s=(e,t,n)=>{const s=eD(t,n);return QA(s)?(r[e]=s.value,!0):(console.warn(ZA(`Invalid value passed for the ${e} option`,s)),!1)},i=e=>Se(n,e);return{register:(e,i)=>{const o=(e=>p(e.processor))(i)?(e=>{const t=(()=>{switch(e){case"array":return v;case"boolean":return _;case"function":return M;case"number":return S;case"object":return f;case"string":return p;case"string[]":return JA;case"object[]":return e=>T(e,f);case"regexp":return e=>m(e,RegExp)}})();return n=>eD(n,t,`The value must be a ${e}.`)})(i.processor):i.processor,a=((e,t,n)=>{if(!b(t)){const r=eD(t,n);if(QA(r))return r.value;console.error(ZA(`Invalid default value passed for the "${e}" option`,r))}})(e,i.default,o);n[e]={...i,default:a,processor:o};Me(r,e).orThunk((()=>Me(t,e))).each((t=>s(e,t,o)))},isRegistered:i,get:e=>Me(r,e).orThunk((()=>Me(n,e).map((e=>e.default)))).getOrUndefined(),set:(e,t)=>{if(i(e)){const r=n[e];return r.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):s(e,t,r.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{const t=i(e);return t&&delete r[e],t},isSet:e=>Se(r,e)}},nD=["design","readonly"],rD=(e,t,n,r)=>{const s=n[t.get()],i=n[r];try{i.activate()}catch(e){return void console.error(`problem while activating editor mode ${r}:`,e)}s.deactivate(),s.editorReadOnly!==i.editorReadOnly&&zA(e,i.editorReadOnly),t.set(r),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,r)},sD=e=>{const t=Wi("design"),n=Wi({design:{activate:C,deactivate:C,editorReadOnly:!1},readonly:{activate:C,deactivate:C,editorReadOnly:!0}});return(e=>{e.serializer?FA(e):e.on("PreInit",(()=>{FA(e)}))})(e),(e=>{e.on("ShowCaret",(t=>{BA(e)&&t.preventDefault()})),e.on("ObjectSelected",(t=>{BA(e)&&t.preventDefault()}))})(e),{isReadOnly:()=>BA(e),set:r=>((e,t,n,r)=>{if(r!==n.get()){if(!Se(t,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?rD(e,n,t,r):e.on("init",(()=>rD(e,n,t,r)))}})(e,n.get(),t,r),get:()=>t.get(),register:(e,t)=>{n.set(((e,t,n)=>{if(Y(nD,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(n.get(),e,t))}}},iD=Rt.each,oD=Rt.explode,aD={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},lD=Rt.makeMap("alt,ctrl,shift,meta,access"),cD=e=>{let t;const n={},r=kt.os.isMacOS()||kt.os.isiOS();iD(oD(e.toLowerCase(),"+"),(e=>{e in lD?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=aD[e]||e.toUpperCase().charCodeAt(0))}));const s=[n.keyCode];for(t in lD)n[t]?s.push(t):n[t]=!1;return n.id=s.join(","),n.access&&(n.alt=!0,r?n.ctrl=!0:n.shift=!0),n.meta&&(r?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class dD{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const t=this;e.on("keyup keypress keydown",(e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(iD(t.shortcuts,(n=>{if(t.matchShortcut(e,n))return t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n),!0})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}add(e,t,n,r){const s=this,i=s.normalizeCommandFunc(n);return iD(oD(Rt.trim(e)),(e=>{const n=s.createShortcut(e,t,i,r);s.shortcuts[n.id]=n})),!0}remove(e){const t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){const t=this,n=e;return"string"==typeof n?()=>{t.editor.execCommand(n,!1,null)}:Rt.isArray(n)?()=>{t.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(e,t,n,r){const s=Rt.map(oD(e,">"),cD);return s[s.length-1]=Rt.extend(s[s.length-1],{func:n,scope:r||this.editor}),Rt.extend(s[0],{desc:this.editor.translate(t),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const uD=()=>{const e=(()=>{const e={},t={},n={},r={},s={},i={},o={},a=(e,t)=>(n,r)=>e[n.toLowerCase()]={...r,type:t};return{addButton:a(e,"button"),addGroupToolbarButton:a(e,"grouptoolbarbutton"),addToggleButton:a(e,"togglebutton"),addMenuButton:a(e,"menubutton"),addSplitButton:a(e,"splitbutton"),addMenuItem:a(t,"menuitem"),addNestedMenuItem:a(t,"nestedmenuitem"),addToggleMenuItem:a(t,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(s,"contextmenu"),addContextToolbar:a(i,"contexttoolbar"),addContextForm:a(i,"contextform"),addSidebar:a(o,"sidebar"),addIcon:(e,t)=>r[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:n,contextMenus:s,contextToolbars:i,sidebars:o})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},hD=Yi.DOM,mD=Rt.extend,pD=Rt.each;class fD{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,mD(this,KA);const r=this;this.id=e,this.hidden=!1;const s=((e,t)=>mA(iA||oA,iA,t,e,t))(n.defaultOptions,t);this.options=tD(0,s),(e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean"}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Na(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Na(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{const t=p(e)&&qe(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:"boolean",default:!1}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{const t=!1===e||p(e)||T(e,p);return t?p(e)?{value:$(e.split(","),$e),valid:t}:v(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ll(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{const t=p(e)||T(e,p);return t?{value:v(e)?e:$(e.split(","),$e),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,.mce-annotation"}),t("object_resizing",{processor:e=>{const t=_(e)||p(e);return t?!1===e||La.isiPhone()||La.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!Aa}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||p(e)||M(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("preview_styles",{processor:e=>{const t=!1===e||p(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean"}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Pa}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Pa}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Pa}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>p(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>T(e,f)||!1===e?{value:ka(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>T(e,Oa)?{value:e,valid:!0}:Oa(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",(()=>{t("directionality",{processor:"string",default:Ki.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:Da.getAttrib(e.getElement(),"placeholder")})}))})(r);const i=this.options.get;i("deprecation_warnings")&&ub(t,s);const o=i("suffix");o&&(n.suffix=o),this.suffix=n.suffix;const a=i("base_url");a&&n._setBaseUrl(a),this.baseUri=n.baseURI;const l=il(r);l&&($i.ScriptLoader._setReferrerPolicy(l),Yi.DOM.styleSheetLoader._setReferrerPolicy(l)),Ji.languageLoad=i("language_load"),Ji.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new Wy(Ba(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ll(r),this.shortcuts=new dD(this),this.editorCommands=new RA(this),OA(this);const c=i("cache_suffix");c&&(kt.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:uD(),styleSheetLoader:void 0,show:C,hide:C,setEnabled:C,isEnabled:z},this.mode=sD(r),n.dispatch("SetupEditor",{editor:this});const d=$l(r);M(d)&&d.call(r,r)}render(){rA(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Rm(this)}translate(e){return Ki.translate(e)}getParam(e,t,n){const r=this.options;return r.isRegistered(e)||(x(n)?r.register(e,{processor:n,default:t}):r.register(e,{processor:z,default:t})),r.isSet(e)||b(t)?r.get(e):t}hasPlugin(e,t){return!!Y(Bl(this),e)&&(!t||void 0!==Eb.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,r){this.shortcuts.add(e,t,n,r)}execCommand(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(hD.show(e.getContainer()),hD.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(hD.hide(e.getContainer()),hD.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e){const t=this;let n,r=t.getElement();if(t.removed)return"";if(r){(e=e||{}).load=!0;const s=Sr(r)?r.value:r.innerHTML;return n=t.setContent(s,e),e.element=r,e.no_events||t.dispatch("LoadContent",e),e.element=r=null,n}}save(e){const t=this;let n,r,s=t.getElement();if(s&&t.initialized&&!t.removed)return(e=e||{}).save=!0,e.element=s,n=e.content=t.getContent(e),e.no_events||t.dispatch("SaveContent",e),"raw"===e.format&&t.dispatch("RawSaveContent",e),n=e.content,Sr(s)?s.value=n:(!e.is_removing&&t.inline||(s.innerHTML=n),(r=hD.getParent(t.id,"form"))&&pD(r.elements,(e=>{if(e.name===t.id)return e.value=n,!1}))),e.element=s=null,!1!==e.set_dirty&&t.setDirty(!1),n}setContent(e,t){return ob(this,e,t)}getContent(e){return ib(this,e)}insertContent(e,t){t&&(e=mD({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?ob(this,this.startContent,{format:"raw"}):ob(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=hD.get(e.editorContainer||e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=hD.get(this.id)),this.targetElm}getWin(){const e=this;let t;return e.contentWindow||(t=e.iframeElement,t&&(e.contentWindow=t.contentWindow)),e.contentWindow}getDoc(){const e=this;let t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument}getBody(){const e=this.getDoc();return this.bodyElement||(e?e.body:null)}convertURL(e,t,n){const r=this,s=r.options.get,i=Gl(r);return M(i)?i.call(r,e,n,!0,t):!s("convert_urls")||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){pA(this,e)}remove(){pb(this)}destroy(e){fb(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const gD=Yi.DOM,vD=Rt.each;let yD,_D=!1,bD=[];const wD=e=>{const t=e.type;vD(TD.get(),(n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}}))},xD=e=>{if(e!==_D){const t=Yi.DOM;e?(t.bind(window,"resize",wD),t.bind(window,"scroll",wD)):(t.unbind(window,"resize",wD),t.unbind(window,"scroll",wD)),_D=e}},MD=e=>{const t=bD;return bD=X(bD,(t=>e!==t)),TD.activeEditor===e&&(TD.activeEditor=bD.length>0?bD[0]:null),TD.focusedEditor===e&&(TD.focusedEditor=null),t.length!==bD.length},SD="CSS1Compat"!==document.compatMode,TD={...VA,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"0.1",releaseDate:"2022-03-23",i18n:Ki,activeEditor:null,focusedEditor:null,setup(){const e=this;let t,n,r="";n=Wy.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const s=window.tinymce||window.tinyMCEPreInit;if(s)t=s.base||s.baseURL,r=s.suffix;else{const e=document.getElementsByTagName("script");for(let n=0;n<e.length;n++){const s=e[n].src||"";if(""===s)continue;const i=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){-1!==i.indexOf(".min")&&(r=".min"),t=s.substring(0,s.lastIndexOf("/"));break}}if(!t&&document.currentScript){const e=document.currentScript.src;-1!==e.indexOf(".min")&&(r=".min"),t=e.substring(0,e.lastIndexOf("/"))}}var i;e.baseURL=new Wy(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new Wy(e.baseURL),e.suffix=r,(i=e).on("AddEditor",O(Em,i)),i.on("RemoveEditor",O(km,i))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;e.suffix&&(this.suffix=n),this.defaultOptions=e;const r=e.plugin_base_urls;void 0!==r&&fe(r,((e,t)=>{Ji.PluginManager.urls[t]=e}))},init(e){const t=this;let n;const r=Rt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let s=e=>{n=e};const i=()=>{let n=0;const o=[];let a;gD.unbind(window,"ready",i),(n=>{const r=e[n];if(r)r.apply(t,[])})("onpageload"),a=((e,t)=>{const n=[],r=M(t)?e=>V(n,(n=>t(n,e))):e=>Y(n,e);for(let t=0,s=e.length;t<s;t++){const s=e[t];r(s)||n.push(s)}return n})((e=>kt.browser.isIE()||kt.browser.isEdge()?(Pb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):SD?(Pb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):p(e.selector)?gD.select(e.selector):x(e.target)?[e.target]:[])(e)),Rt.each(a,(e=>{var n;(n=t.get(e.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(MD(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0,n=null)})),a=Rt.grep(a,(e=>!t.get(e.id))),0===a.length?s([]):vD(a,(i=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in r)(e,i)?Pb("Could not initialize inline editor on invalid inline target element",i):((e,r,i)=>{const l=new fD(e,r,t);o.push(l),l.on("init",(()=>{++n===a.length&&s(o)})),l.targetElm=l.targetElm||i,l.render()})((e=>{let t=e.id;return t||(t=Me(e,"name").filter((e=>!gD.get(e))).getOrThunk(gD.uniqueId),e.setAttribute("id",t)),t})(i),e,i)}))};return gD.bind(window,"ready",i),new Promise((e=>{n?e(n):s=t=>{e(t)}}))},get(e){return 0===arguments.length?bD.slice(0):p(e)?Q(bD,(t=>t.id===e)).getOr(null):S(e)&&bD[e]?bD[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&bD.push(e),xD(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),yD||(yD=e=>{const n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",yD))),e},createEditor(e,t){return this.add(new fD(e,t,this))},remove(e){const t=this;let n,r;if(e){if(!p(e))return r=e,y(t.get(r.id))?null:(MD(r)&&t.dispatch("RemoveEditor",{editor:r}),0===bD.length&&window.removeEventListener("beforeunload",yD),r.remove(),xD(bD.length>0),r);vD(gD.select(e),(e=>{r=t.get(e.id),r&&t.remove(r)}))}else for(n=bD.length-1;n>=0;n--)t.remove(bD[n])},execCommand(e,t,n){var r;const s=this,i=f(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(e){case"mceAddEditor":if(!s.get(i)){const e=n.options;new fD(i,e,s).render()}return!0;case"mceRemoveEditor":{const e=s.get(i);return e&&e.remove(),!0}case"mceToggleEditor":{const e=s.get(i);return e?(e.isHidden()?e.show():e.hide(),!0):(s.execCommand("mceAddEditor",!1,n),!0)}}return!!s.activeEditor&&s.activeEditor.execCommand(e,t,n)},triggerSave:()=>{vD(bD,(e=>{e.save()}))},addI18n:(e,t)=>{Ki.add(e,t)},translate:e=>Ki.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Wy(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Wy(this.baseURL)}};TD.setup();const CD=(()=>{const e=Zi();return{FakeClipboardItem:e=>({items:e,types:me(e),getType:t=>Me(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),ED=Math.min,kD=Math.max,LD=Math.round,AD=(e,t,n)=>{let r=t.x,s=t.y;const i=e.w,o=e.h,a=t.w,l=t.h,c=(n||"").split("");return"b"===c[0]&&(s+=l),"r"===c[1]&&(r+=a),"c"===c[0]&&(s+=LD(l/2)),"c"===c[1]&&(r+=LD(a/2)),"b"===c[3]&&(s-=o),"r"===c[4]&&(r-=i),"c"===c[3]&&(s-=LD(o/2)),"c"===c[4]&&(r-=LD(i/2)),DD(r,s,i,o)},DD=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),OD={inflate:(e,t,n)=>DD(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:AD,findBestRelativePosition:(e,t,n,r)=>{let s,i;for(i=0;i<r.length;i++)if(s=AD(e,t,r[i]),s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[i];return null},intersect:(e,t)=>{const n=kD(e.x,t.x),r=kD(e.y,t.y),s=ED(e.x+e.w,t.x+t.w),i=ED(e.y+e.h,t.y+t.h);return s-n<0||i-r<0?null:DD(n,r,s-n,i-r)},clamp:(e,t,n)=>{let r=e.x,s=e.y,i=e.x+e.w,o=e.y+e.h;const a=t.x+t.w,l=t.y+t.h,c=kD(0,t.x-r),d=kD(0,t.y-s),u=kD(0,i-a),h=kD(0,o-l);return r+=c,s+=d,n&&(i+=c,o+=d,r-=u,s-=h),i-=u,o-=h,DD(r,s,i-r,o-s)},create:DD,fromClientRect:e=>DD(e.left,e.top,e.width,e.height)},RD=(()=>{const e={},t={};return{load:(n,r)=>{const s=`Script at URL "${r}" failed to load`,i=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const o=new Promise(((e,o)=>{const a=((e,t,n=1e3)=>{let r=!1,s=null;const i=e=>(...t)=>{r||(r=!0,null!==s&&(clearTimeout(s),s=null),e.apply(null,t))},o=i(e),a=i(t);return{start:(...e)=>{r||null!==s||(s=setTimeout((()=>a.apply(null,e)),n))},resolve:o,reject:a}})(e,o);t[n]=a.resolve,$i.ScriptLoader.loadScript(r).then((()=>a.start(i)),(()=>a.reject(s)))}));return e[n]=o,o}},add:(n,r)=>{void 0!==t[n]&&(t[n](r),delete t[n]),e[n]=Promise.resolve(r)},unload:t=>{delete e[t]}}})();let PD;try{const e="__storage_test__";PD=window.localStorage,PD.setItem(e,e),PD.removeItem(e)}catch(e){PD=(()=>{let e={},t=[];const n={getItem:t=>e[t]||null,setItem:(n,r)=>{t.push(n),e[n]=String(r)},key:e=>t[e],removeItem:n=>{t=t.filter((e=>e===n)),delete e[n]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})()}const ND={geom:{Rect:OD},util:{Delay:xm,Tools:Rt,VK:oh,URI:Wy,EventDispatcher:UA,Observable:VA,I18n:Ki,LocalStorage:PD,ImageUploader:e=>{const t=Bb(),n=Yb(e,t);return{upload:(t,r=!0)=>n.upload(t,r?Ub(e):void 0)}}},dom:{EventUtils:Pi,TreeWalker:Kr,TextSeeker:bo,DOMUtils:Yi,ScriptLoader:$i,RangeUtils:Hh,Serializer:sb,StyleSheetLoader:qr,ControlSelection:ah,BookmarkManager:Zu,Selection:Q_,Event:Pi.Event},html:{Styles:Si,Entities:mi,Node:Qm,Schema:Mi,DomParser:r_,Writer:lp,Serializer:cp},Env:kt,AddOnManager:Ji,Annotator:Ju,Formatter:tw,UndoManager:rw,EditorCommands:RA,WindowManager:Lb,NotificationManager:Cb,EditorObservable:KA,Shortcuts:dD,Editor:fD,FocusManager:wm,EditorManager:TD,DOM:Yi.DOM,ScriptLoader:$i.ScriptLoader,PluginManager:Eb,ThemeManager:kb,ModelManager:vb,IconManager:gb,Resource:RD,FakeClipboard:CD,trim:Rt.trim,isArray:Rt.isArray,is:Rt.is,toArray:Rt.toArray,makeMap:Rt.makeMap,each:Rt.each,map:Rt.map,grep:Rt.grep,inArray:Rt.inArray,extend:Rt.extend,walk:Rt.walk,resolve:Rt.resolve,explode:Rt.explode,_addCacheSuffix:Rt._addCacheSuffix},ID=Rt.extend(TD,ND);(e=>{window.tinymce=e,window.tinyMCE=e})(ID),(t=>{try{e.exports=t}catch(e){}})(ID)}()},7658:(e,t,n)=>{"use strict";var r=n(8651);e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected a string");return e.replace(new RegExp("(?:"+r(t)+"){2,}","g"),t)}},5858:function(e,t){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,s=1;s<r;++s)t[s]=t[s].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function s(e){return e.toUpperCase()}function i(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function o(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}function a(e){var r="[A-Za-z]",s="[0-9]",i=t(s,"[A-Fa-f]"),o=n(n("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+n("%[89A-Fa-f]"+i+"%"+i+i)+"|"+n("%"+i+i)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",d=t(r,s,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=n(r+t(r,s,"[\\+\\-\\.]")+"*"),h=n(n(o+"|"+t(d,a,"[\\:]"))+"*"),m=(n(n("25[0-5]")+"|"+n("2[0-4]"+s)+"|"+n("1"+s+s)+"|"+n("[1-9]"+s)+"|"+s),n(n("25[0-5]")+"|"+n("2[0-4]"+s)+"|"+n("1"+s+s)+"|"+n("0?[1-9]"+s)+"|0?0?"+s)),p=n(m+"\\."+m+"\\."+m+"\\."+m),f=n(i+"{1,4}"),g=n(n(f+"\\:"+f)+"|"+p),v=n(n(f+"\\:")+"{6}"+g),y=n("\\:\\:"+n(f+"\\:")+"{5}"+g),_=n(n(f)+"?\\:\\:"+n(f+"\\:")+"{4}"+g),b=n(n(n(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+n(f+"\\:")+"{3}"+g),w=n(n(n(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+n(f+"\\:")+"{2}"+g),x=n(n(n(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+g),M=n(n(n(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+g),S=n(n(n(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),T=n(n(n(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),C=n([v,y,_,b,w,x,M,S,T].join("|")),E=n(n(d+"|"+o)+"+"),k=(n(C+"\\%25"+E),n(C+n("\\%25|\\%(?!"+i+"{2})")+E)),L=n("[vV]"+i+"+\\."+t(d,a,"[\\:]")+"+"),A=n("\\["+n(k+"|"+C+"|"+L)+"\\]"),D=n(n(o+"|"+t(d,a))+"*"),O=n(A+"|"+p+"(?!"+D+")|"+D),R=n(s+"*"),P=n(n(h+"@")+"?"+O+n("\\:"+R)+"?"),N=n(o+"|"+t(d,a,"[\\:\\@]")),I=n(N+"*"),z=n(N+"+"),B=n(n(o+"|"+t(d,a,"[\\@]"))+"+"),F=n(n("\\/"+I)+"*"),H=n("\\/"+n(z+F)+"?"),j=n(B+F),U=n(z+F),Y="(?!"+N+")",V=(n(F+"|"+H+"|"+j+"|"+U+"|"+Y),n(n(N+"|"+t("[\\/\\?]",c))+"*")),$=n(n(N+"|[\\/\\?]")+"*"),W=n(n("\\/\\/"+P+F)+"|"+H+"|"+U+"|"+Y),G=n(u+"\\:"+W+n("\\?"+V)+"?"+n("\\#"+$)+"?"),q=n(n("\\/\\/"+P+F)+"|"+H+"|"+j+"|"+Y),X=n(q+n("\\?"+V)+"?"+n("\\#"+$)+"?");return n(G+"|"+X),n(u+"\\:"+W+n("\\?"+V)+"?"),n(n("\\/\\/("+n("("+h+")@")+"?("+O+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+H+"|"+U+"|"+Y+")"),n("\\?("+V+")"),n("\\#("+$+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+O+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+H+"|"+j+"|"+Y+")"),n("\\?("+V+")"),n("\\#("+$+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+O+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+H+"|"+U+"|"+Y+")"),n("\\?("+V+")"),n("\\#("+$+")"),n("("+h+")@"),n("\\:("+R+")"),{NOT_SCHEME:new RegExp(t("[^]",r,s,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",d,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",d,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",d,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",d,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",d,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",d,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",d,a),"g"),UNRESERVED:new RegExp(d,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",d,l),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+C+")"+n(n("\\%25|\\%(?!"+i+"{2})")+"("+E+")")+"?\\]?$")}}var l=a(!1),c=a(!0),d=function(){function e(e,t){var n=[],r=!0,s=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(s)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},h=2147483647,m=36,p=1,f=26,g=38,v=700,y=72,_=128,b="-",w=/^xn--/,x=/[^\0-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=m-p,C=Math.floor,E=String.fromCharCode;function k(e){throw new RangeError(S[e])}function L(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}function A(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+L((e=e.replace(M,".")).split("."),t).join(".")}function D(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),n--)}else t.push(s)}return t}var O=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:m},R=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},P=function(e,t,n){var r=0;for(e=n?C(e/v):e>>1,e+=C(e/t);e>T*f>>1;r+=m)e=C(e/T);return C(r+(T+1)*e/(e+g))},N=function(e){var t=[],n=e.length,r=0,s=_,i=y,o=e.lastIndexOf(b);o<0&&(o=0);for(var a=0;a<o;++a)e.charCodeAt(a)>=128&&k("not-basic"),t.push(e.charCodeAt(a));for(var l=o>0?o+1:0;l<n;){for(var c=r,d=1,u=m;;u+=m){l>=n&&k("invalid-input");var g=O(e.charCodeAt(l++));(g>=m||g>C((h-r)/d))&&k("overflow"),r+=g*d;var v=u<=i?p:u>=i+f?f:u-i;if(g<v)break;var w=m-v;d>C(h/w)&&k("overflow"),d*=w}var x=t.length+1;i=P(r-c,x,0==c),C(r/x)>h-s&&k("overflow"),s+=C(r/x),r%=x,t.splice(r++,0,s)}return String.fromCodePoint.apply(String,t)},I=function(e){var t=[],n=(e=D(e)).length,r=_,s=0,i=y,o=!0,a=!1,l=void 0;try{for(var c,d=e[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var u=c.value;u<128&&t.push(E(u))}}catch(e){a=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw l}}var g=t.length,v=g;for(g&&t.push(b);v<n;){var w=h,x=!0,M=!1,S=void 0;try{for(var T,L=e[Symbol.iterator]();!(x=(T=L.next()).done);x=!0){var A=T.value;A>=r&&A<w&&(w=A)}}catch(e){M=!0,S=e}finally{try{!x&&L.return&&L.return()}finally{if(M)throw S}}var O=v+1;w-r>C((h-s)/O)&&k("overflow"),s+=(w-r)*O,r=w;var N=!0,I=!1,z=void 0;try{for(var B,F=e[Symbol.iterator]();!(N=(B=F.next()).done);N=!0){var H=B.value;if(H<r&&++s>h&&k("overflow"),H==r){for(var j=s,U=m;;U+=m){var Y=U<=i?p:U>=i+f?f:U-i;if(j<Y)break;var V=j-Y,$=m-Y;t.push(E(R(Y+V%$,0))),j=C(V/$)}t.push(E(R(j,0))),i=P(s,O,v==g),s=0,++v}}}catch(e){I=!0,z=e}finally{try{!N&&F.return&&F.return()}finally{if(I)throw z}}++s,++r}return t.join("")},z=function(e){return A(e,(function(e){return w.test(e)?N(e.slice(4).toLowerCase()):e}))},B=function(e){return A(e,(function(e){return x.test(e)?"xn--"+I(e):e}))},F={version:"2.1.0",ucs2:{decode:D,encode:function(e){return String.fromCodePoint.apply(String,u(e))}},decode:N,encode:I,toASCII:B,toUnicode:z},H={};function j(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function U(e){for(var t="",n=0,r=e.length;n<r;){var s=parseInt(e.substr(n+1,2),16);if(s<128)t+=String.fromCharCode(s),n+=3;else if(s>=194&&s<224){if(r-n>=6){var i=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&s)<<6|63&i)}else t+=e.substr(n,6);n+=6}else if(s>=224){if(r-n>=9){var o=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function Y(e,t){function n(e){var n=U(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,j).replace(t.PCT_ENCODED,s)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,j).replace(t.PCT_ENCODED,s)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,j).replace(t.PCT_ENCODED,s)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,j).replace(t.PCT_ENCODED,s)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,j).replace(t.PCT_ENCODED,s)),e}function V(e){return e.replace(/^0*(.*)/,"$1")||"0"}function $(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=d(n,2)[1];return r?r.split(".").map(V).join("."):e}function W(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=d(n,3),s=r[1],i=r[2];if(s){for(var o=s.toLowerCase().split("::").reverse(),a=d(o,2),l=a[0],c=a[1],u=c?c.split(":").map(V):[],h=l.split(":").map(V),m=t.IPV4ADDRESS.test(h[h.length-1]),p=m?7:8,f=h.length-p,g=Array(p),v=0;v<p;++v)g[v]=u[v]||h[f+v]||"";m&&(g[p-1]=$(g[p-1],t));var y=g.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(y&&y.length>1){var b=g.slice(0,y.index),w=g.slice(y.index+y.length);_=b.join(":")+"::"+w.join(":")}else _=g.join(":");return i&&(_+="%"+i),_}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,q=void 0==="".match(/(){0}/)[1];function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?c:l;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var s=e.match(G);if(s){q?(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5])):(n.scheme=s[1]||void 0,n.userinfo=-1!==e.indexOf("@")?s[3]:void 0,n.host=-1!==e.indexOf("//")?s[4]:void 0,n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=-1!==e.indexOf("?")?s[7]:void 0,n.fragment=-1!==e.indexOf("#")?s[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),n.host&&(n.host=W($(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var i=H[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)Y(n,r);else{if(n.host&&(t.domainHost||i&&i.domainHost))try{n.host=F.toASCII(n.host.replace(r.PCT_ENCODED,U).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}Y(n,l)}i&&i.parse&&i.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function K(e,t){var n=!1!==t.iri?c:l,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(W($(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var J=/^\.\.?\//,Z=/^\/\.(\/|$)/,Q=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(J))e=e.replace(J,"");else if(e.match(Z))e=e.replace(Z,"/");else if(e.match(Q))e=e.replace(Q,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:l,r=[],s=H[(t.scheme||e.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||s&&s.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,U).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}Y(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var i=K(e,t);if(void 0!==i&&("suffix"!==t.reference&&r.push("//"),r.push(i),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var o=e.path;t.absolutePath||s&&s.absolutePath||(o=te(o)),void 0===i&&(o=o.replace(/^\/\//,"/%2F")),r.push(o)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=X(ne(e,n),n),t=X(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=te(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function se(e,t,n){var r=o({scheme:"null"},n);return ne(re(X(e,r),X(t,r),r,!0),r)}function ie(e,t){return"string"==typeof e?e=ne(X(e,t),t):"object"===r(e)&&(e=X(ne(e,t),t)),e}function oe(e,t,n){return"string"==typeof e?e=ne(X(e,n),n):"object"===r(e)&&(e=ne(e,n)),"string"==typeof t?t=ne(X(t,n),n):"object"===r(t)&&(t=ne(t,n)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:l.ESCAPE,j)}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:l.PCT_ENCODED,U)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},de={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function ue(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=ue(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(ue(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=d(n,2),s=r[0],i=r[1];e.path=s&&"/"!==s?s:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},me={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},pe={},fe="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",ve=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),ye="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",_e=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),be="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",we=new RegExp(fe,"g"),xe=new RegExp(ve,"g"),Me=new RegExp(t("[^]",ye,"[\\.]",'[\\"]',_e),"g"),Se=new RegExp(t("[^]",fe,be),"g"),Te=Se;function Ce(e){var t=U(e);return t.match(we)?t:e}var Ee={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var s=!1,i={},o=n.query.split("&"),a=0,l=o.length;a<l;++a){var c=o[a].split("=");switch(c[0]){case"to":for(var d=c[1].split(","),u=0,h=d.length;u<h;++u)r.push(d[u]);break;case"subject":n.subject=le(c[1],t);break;case"body":n.body=le(c[1],t);break;default:s=!0,i[le(c[0],t)]=le(c[1],t)}}s&&(n.headers=i)}n.query=void 0;for(var m=0,p=r.length;m<p;++m){var f=r[m].split("@");if(f[0]=le(f[0]),t.unicodeSupport)f[1]=le(f[1],t).toLowerCase();else try{f[1]=F.toASCII(le(f[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[m]=f.join("@")}return n},serialize:function(e,t){var n=e,r=i(e.to);if(r){for(var o=0,a=r.length;o<a;++o){var l=String(r[o]),c=l.lastIndexOf("@"),d=l.slice(0,c).replace(xe,Ce).replace(xe,s).replace(Me,j),u=l.slice(c+1);try{u=t.iri?F.toUnicode(u):F.toASCII(le(u,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}r[o]=d+"@"+u}n.path=r.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var m=[];for(var p in h)h[p]!==pe[p]&&m.push(p.replace(xe,Ce).replace(xe,s).replace(Se,j)+"="+h[p].replace(xe,Ce).replace(xe,s).replace(Te,j));return m.length&&(n.query=m.join("&")),n}},ke=/^([^\:]+)\:(.*)/,Le={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(ke),r=e;if(n){var s=t.scheme||r.scheme||"urn",i=n[1].toLowerCase(),o=n[2],a=s+":"+(t.nid||i),l=H[a];r.nid=i,r.nss=o,r.path=void 0,l&&(r=l.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,s=n+":"+(t.nid||r),i=H[s];i&&(e=i.serialize(e,t));var o=e,a=e.nss;return o.path=(r||t.nid)+":"+a,o}},Ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,De={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(Ae)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};H[ce.scheme]=ce,H[de.scheme]=de,H[he.scheme]=he,H[me.scheme]=me,H[Ee.scheme]=Ee,H[Le.scheme]=Le,H[De.scheme]=De,e.SCHEMES=H,e.pctEncChar=j,e.pctDecChars=U,e.parse=X,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=re,e.resolve=se,e.normalize=ie,e.equal=oe,e.escapeComponent=ae,e.unescapeComponent=le,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1741:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},1516:e=>{var t=/\n/,n="\n",r=/\s/;function s(e,t,n,r){var s=e.indexOf(t,n);return-1===s||s>r?r:s}function i(e){return r.test(e)}function o(e,t,n,r){return{start:t,end:t+Math.min(r,n-t)}}e.exports=function(t,n){return e.exports.lines(t,n).map((function(e){return t.substring(e.start,e.end)})).join("\n")},e.exports.lines=function(e,r){if(0===(r=r||{}).width&&"nowrap"!==r.mode)return[];e=e||"";var a="number"==typeof r.width?r.width:Number.MAX_VALUE,l=Math.max(0,r.start||0),c="number"==typeof r.end?r.end:e.length,d=r.mode,u=r.measure||o;return"pre"===d?function(e,n,r,s,i){for(var o=[],a=r,l=r;l<s&&l<n.length;l++){var c=n.charAt(l),d=t.test(c);if(d||l===s-1){var u=e(n,a,d?l:l+1,i);o.push(u),a=l+1}}return o}(u,e,l,c,a):function(e,t,r,o,a,l){var c=[],d=a;"nowrap"===l&&(d=Number.MAX_VALUE);for(;r<o&&r<t.length;){for(var u=s(t,n,r,o);r<u&&i(t.charAt(r));)r++;var h=e(t,r,u,d),m=r+(h.end-h.start),p=m+n.length;if(m<u){for(;m>r&&!i(t.charAt(m));)m--;if(m===r)p>r+n.length&&p--,m=p;else for(p=m;m>r&&i(t.charAt(m-n.length));)m--}if(m>=r){var f=e(t,r,m,d);c.push(f)}r=p}return c}(u,e,l,c,a,d)}},4201:e=>{e.exports={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}}},4139:(e,t,n)=>{var r=n(5707),s=n(4096),i=n(2160),o=n(1473);e.exports={xml2js:r,xml2json:s,js2xml:i,json2xml:o}},2160:(e,t,n)=>{var r,s,i=n(4314),o=n(4201).isArray;function a(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function l(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,s,r));var i,o,l,c,d=[];for(i in e)e.hasOwnProperty(i)&&null!==e[i]&&void 0!==e[i]&&(c=t.noQuotesForNativeAttributes&&"string"!=typeof e[i]?"":'"',o=(o=""+e[i]).replace(/"/g,"&quot;"),l="attributeNameFn"in t?t.attributeNameFn(i,o,s,r):i,d.push(t.spaces&&t.indentAttributes?a(t,n+1,!1):" "),d.push(l+"="+c+("attributeValueFn"in t?t.attributeValueFn(o,i,s,r):o)+c));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&d.push(a(t,n,!1)),d.join("")}function c(e,t,n){return r=e,s="xml",t.ignoreDeclaration?"":"<?xml"+l(e[t.attributesKey],t,n)+"?>"}function d(e,t,n){if(t.ignoreInstruction)return"";var i;for(i in e)if(e.hasOwnProperty(i))break;var o="instructionNameFn"in t?t.instructionNameFn(i,e[i],s,r):i;if("object"==typeof e[i])return r=e,s=o,"<?"+o+l(e[i][t.attributesKey],t,n)+"?>";var a=e[i]?e[i]:"";return"instructionFn"in t&&(a=t.instructionFn(a,i,s,r)),"<?"+o+(a?" "+a:"")+"?>"}function u(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,s,r):e)+"--\x3e"}function h(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,s,r):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function m(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,s,r):e)+">"}function p(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,s,r):e)}function f(e,t,n,i){return e.reduce((function(e,o){var c=a(t,n,i&&!e);switch(o.type){case"element":return e+c+function(e,t,n){r=e,s=e.name;var i=[],o="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;i.push("<"+o),e[t.attributesKey]&&i.push(l(e[t.attributesKey],t,n));var a=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return a||(a="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),a?(i.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(i.push(f(e[t.elementsKey],t,n+1)),r=e,s=e.name),i.push(t.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(e,t)?"\n"+Array(n+1).join(t.spaces):""),i.push("</"+o+">")):i.push("/>"),i.join("")}(o,t,n);case"comment":return e+c+u(o[t.commentKey],t);case"doctype":return e+c+m(o[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?c:"")+h(o[t.cdataKey],t);case"text":return e+(t.indentText?c:"")+p(o[t.textKey],t);case"instruction":var g={};return g[o[t.nameKey]]=o[t.attributesKey]?o:o[t.instructionKey],e+(t.indentInstruction?c:"")+d(g,t,n)}}),"")}function g(e,t,n){var r;for(r in e)if(e.hasOwnProperty(r))switch(r){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function v(e,t,n,i,o){r=e,s=t;var c="elementNameFn"in n?n.elementNameFn(t,e):t;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+c+"></"+c+">":"<"+c+"/>";var d=[];if(t){if(d.push("<"+c),"object"!=typeof e)return d.push(">"+p(e,n)+"</"+c+">"),d.join("");e[n.attributesKey]&&d.push(l(e[n.attributesKey],n,i));var u=g(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!u)return d.push("/>"),d.join("");d.push(">")}return d.push(y(e,n,i+1,!1)),r=e,s=t,t&&d.push((o?a(n,i,!1):"")+"</"+c+">"),d.join("")}function y(e,t,n,r){var s,i,l,f=[];for(i in e)if(e.hasOwnProperty(i))for(l=o(e[i])?e[i]:[e[i]],s=0;s<l.length;++s){switch(i){case t.declarationKey:f.push(c(l[s],t,n));break;case t.instructionKey:f.push((t.indentInstruction?a(t,n,r):"")+d(l[s],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:f.push((t.indentText?a(t,n,r):"")+p(l[s],t));break;case t.cdataKey:f.push((t.indentCdata?a(t,n,r):"")+h(l[s],t));break;case t.doctypeKey:f.push(a(t,n,r)+m(l[s],t));break;case t.commentKey:f.push(a(t,n,r)+u(l[s],t));break;default:f.push(a(t,n,r)+v(l[s],i,t,n,g(l[s],t)))}r=r&&!f.length}return f.join("")}e.exports=function(e,t){t=function(e){var t=i.copyOptions(e);return i.ensureFlagExists("ignoreDeclaration",t),i.ensureFlagExists("ignoreInstruction",t),i.ensureFlagExists("ignoreAttributes",t),i.ensureFlagExists("ignoreText",t),i.ensureFlagExists("ignoreComment",t),i.ensureFlagExists("ignoreCdata",t),i.ensureFlagExists("ignoreDoctype",t),i.ensureFlagExists("compact",t),i.ensureFlagExists("indentText",t),i.ensureFlagExists("indentCdata",t),i.ensureFlagExists("indentAttributes",t),i.ensureFlagExists("indentInstruction",t),i.ensureFlagExists("fullTagEmptyElement",t),i.ensureFlagExists("noQuotesForNativeAttributes",t),i.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),i.ensureKeyExists("declaration",t),i.ensureKeyExists("instruction",t),i.ensureKeyExists("attributes",t),i.ensureKeyExists("text",t),i.ensureKeyExists("comment",t),i.ensureKeyExists("cdata",t),i.ensureKeyExists("doctype",t),i.ensureKeyExists("type",t),i.ensureKeyExists("name",t),i.ensureKeyExists("elements",t),i.checkFnExists("doctype",t),i.checkFnExists("instruction",t),i.checkFnExists("cdata",t),i.checkFnExists("comment",t),i.checkFnExists("text",t),i.checkFnExists("instructionName",t),i.checkFnExists("elementName",t),i.checkFnExists("attributeName",t),i.checkFnExists("attributeValue",t),i.checkFnExists("attributes",t),i.checkFnExists("fullTagEmptyElement",t),t}(t);var n=[];return r=e,s="_root_",t.compact?n.push(y(e,t,0,!0)):(e[t.declarationKey]&&n.push(c(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(f(e[t.elementsKey],t,0,!n.length))),n.join("")}},1473:(e,t,n)=>{var r=n(2160);e.exports=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw new Error("The JSON structure is invalid")}else n=e;return r(n,t)}},4314:(e,t,n)=>{var r=n(4201).isArray;e.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"==typeof e.alwaysArray||r(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}},5707:(e,t,n)=>{var r,s,i=n(9871),o=n(4314),a=n(4201).isArray;function l(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function c(e,t){var n;if(r.compact){if(!s[r[e+"Key"]]&&(a(r.alwaysArray)?-1!==r.alwaysArray.indexOf(r[e+"Key"]):r.alwaysArray)&&(s[r[e+"Key"]]=[]),s[r[e+"Key"]]&&!a(s[r[e+"Key"]])&&(s[r[e+"Key"]]=[s[r[e+"Key"]]]),e+"Fn"in r&&"string"==typeof t&&(t=r[e+"Fn"](t,s)),"instruction"===e&&("instructionFn"in r||"instructionNameFn"in r))for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in r)t[n]=r.instructionFn(t[n],n,s);else{var i=t[n];delete t[n],t[r.instructionNameFn(n,i,s)]=i}a(s[r[e+"Key"]])?s[r[e+"Key"]].push(t):s[r[e+"Key"]]=t}else{s[r.elementsKey]||(s[r.elementsKey]=[]);var o={};if(o[r.typeKey]=e,"instruction"===e){for(n in t)if(t.hasOwnProperty(n))break;o[r.nameKey]="instructionNameFn"in r?r.instructionNameFn(n,t,s):n,r.instructionHasAttributes?(o[r.attributesKey]=t[n][r.attributesKey],"instructionFn"in r&&(o[r.attributesKey]=r.instructionFn(o[r.attributesKey],n,s))):("instructionFn"in r&&(t[n]=r.instructionFn(t[n],n,s)),o[r.instructionKey]=t[n])}else e+"Fn"in r&&(t=r[e+"Fn"](t,s)),o[r[e+"Key"]]=t;r.addParent&&(o[r.parentKey]=s),s[r.elementsKey].push(o)}}function d(e){var t;if("attributesFn"in r&&e&&(e=r.attributesFn(e,s)),(r.trim||"attributeValueFn"in r||"attributeNameFn"in r||r.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(r.trim&&(e[t]=e[t].trim()),r.nativeTypeAttributes&&(e[t]=l(e[t])),"attributeValueFn"in r&&(e[t]=r.attributeValueFn(e[t],t,s)),"attributeNameFn"in r)){var n=e[t];delete e[t],e[r.attributeNameFn(t,e[t],s)]=n}return e}function u(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||r.instructionHasAttributes)){for(var n,i=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=i.exec(e.body));)t[n[1]]=n[2]||n[3]||n[4];t=d(t)}if("xml"===e.name.toLowerCase()){if(r.ignoreDeclaration)return;s[r.declarationKey]={},Object.keys(t).length&&(s[r.declarationKey][r.attributesKey]=t),r.addParent&&(s[r.declarationKey][r.parentKey]=s)}else{if(r.ignoreInstruction)return;r.trim&&(e.body=e.body.trim());var o={};r.instructionHasAttributes&&Object.keys(t).length?(o[e.name]={},o[e.name][r.attributesKey]=t):o[e.name]=e.body,c("instruction",o)}}function h(e,t){var n;if("object"==typeof e&&(t=e.attributes,e=e.name),t=d(t),"elementNameFn"in r&&(e=r.elementNameFn(e,s)),r.compact){var i;if(n={},!r.ignoreAttributes&&t&&Object.keys(t).length)for(i in n[r.attributesKey]={},t)t.hasOwnProperty(i)&&(n[r.attributesKey][i]=t[i]);!(e in s)&&(a(r.alwaysArray)?-1!==r.alwaysArray.indexOf(e):r.alwaysArray)&&(s[e]=[]),s[e]&&!a(s[e])&&(s[e]=[s[e]]),a(s[e])?s[e].push(n):s[e]=n}else s[r.elementsKey]||(s[r.elementsKey]=[]),(n={})[r.typeKey]="element",n[r.nameKey]=e,!r.ignoreAttributes&&t&&Object.keys(t).length&&(n[r.attributesKey]=t),r.alwaysChildren&&(n[r.elementsKey]=[]),s[r.elementsKey].push(n);n[r.parentKey]=s,s=n}function m(e){r.ignoreText||(e.trim()||r.captureSpacesBetweenElements)&&(r.trim&&(e=e.trim()),r.nativeType&&(e=l(e)),r.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c("text",e))}function p(e){r.ignoreComment||(r.trim&&(e=e.trim()),c("comment",e))}function f(e){var t=s[r.parentKey];r.addParent||delete s[r.parentKey],s=t}function g(e){r.ignoreCdata||(r.trim&&(e=e.trim()),c("cdata",e))}function v(e){r.ignoreDoctype||(e=e.replace(/^ /,""),r.trim&&(e=e.trim()),c("doctype",e))}function y(e){e.note=e}e.exports=function(e,t){var n=i.parser(!0,{}),a={};if(s=a,r=function(e){return r=o.copyOptions(e),o.ensureFlagExists("ignoreDeclaration",r),o.ensureFlagExists("ignoreInstruction",r),o.ensureFlagExists("ignoreAttributes",r),o.ensureFlagExists("ignoreText",r),o.ensureFlagExists("ignoreComment",r),o.ensureFlagExists("ignoreCdata",r),o.ensureFlagExists("ignoreDoctype",r),o.ensureFlagExists("compact",r),o.ensureFlagExists("alwaysChildren",r),o.ensureFlagExists("addParent",r),o.ensureFlagExists("trim",r),o.ensureFlagExists("nativeType",r),o.ensureFlagExists("nativeTypeAttributes",r),o.ensureFlagExists("sanitize",r),o.ensureFlagExists("instructionHasAttributes",r),o.ensureFlagExists("captureSpacesBetweenElements",r),o.ensureAlwaysArrayExists(r),o.ensureKeyExists("declaration",r),o.ensureKeyExists("instruction",r),o.ensureKeyExists("attributes",r),o.ensureKeyExists("text",r),o.ensureKeyExists("comment",r),o.ensureKeyExists("cdata",r),o.ensureKeyExists("doctype",r),o.ensureKeyExists("type",r),o.ensureKeyExists("name",r),o.ensureKeyExists("elements",r),o.ensureKeyExists("parent",r),o.checkFnExists("doctype",r),o.checkFnExists("instruction",r),o.checkFnExists("cdata",r),o.checkFnExists("comment",r),o.checkFnExists("text",r),o.checkFnExists("instructionName",r),o.checkFnExists("elementName",r),o.checkFnExists("attributeName",r),o.checkFnExists("attributeValue",r),o.checkFnExists("attributes",r),r}(t),n.opt={strictEntities:!0},n.onopentag=h,n.ontext=m,n.oncomment=p,n.onclosetag=f,n.onerror=y,n.oncdata=g,n.ondoctype=v,n.onprocessinginstruction=u,n.write(e).close(),a[r.elementsKey]){var l=a[r.elementsKey];delete a[r.elementsKey],a[r.elementsKey]=l,delete a.text}return a}},4096:(e,t,n)=>{var r=n(4314),s=n(5707);e.exports=function(e,t){var n,i,o;return n=function(e){var t=r.copyOptions(e);return r.ensureSpacesExists(t),t}(t),i=s(e,n),o="compact"in n&&n.compact?"_parent":"parent",("addParent"in n&&n.addParent?JSON.stringify(i,(function(e,t){return e===o?"_":t}),n.spaces):JSON.stringify(i,null,n.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},139:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var r=arguments[n];for(var s in r)t.call(r,s)&&(e[s]=r[s])}return e};var t=Object.prototype.hasOwnProperty},7499:(e,t,n)=>{"use strict";n.d(t,{Z:()=>mT});var r={};function s(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);if(n)return n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):""}n.r(r),n.d(r,{ArcCurve:()=>rh,CatmullRomCurve3:()=>ch,CubicBezierCurve:()=>mh,CubicBezierCurve3:()=>ph,EllipseCurve:()=>nh,LineCurve:()=>fh,LineCurve3:()=>gh,QuadraticBezierCurve:()=>vh,QuadraticBezierCurve3:()=>yh,SplineCurve:()=>_h});function i(e,t){let n;e&&"number"==typeof e||(e=12);do{n="";for(let t=0;t<e;++t)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[62*Math.random()|0]}while(t&&t[n]);return n}const o=new class{constructor(){this.store=window?window.localStorage:null}isReady(){return!!this.store}get(e,t){const n=this.getKey(e,t),r=this.store.getItem(n);return r?JSON.parse(r):null}set(e,t,n){t=t||n.id||i();const r=this.getKey(e,t);return this.store.setItem(r,JSON.stringify(n)),t}remove(e,t){const n=this.getKey(e,t);return!!this.store.getItem(n)&&(this.store.removeItem(n),!0)}getKey(e,t){return e+"/"+t}},a=Symbol("Publisher private data"),l=Symbol("Publisher strict option");class c{constructor(e){const t=!e||e.knownEvents;this[a]={[l]:t}}on(e,t,n){if(Array.isArray(e))return void e.forEach((e=>{this.on(e,t,n)}));if(!t)throw new Error("missing callback function");let r=this[a][e];if(!r){if(this[a][l])throw new Error(`can't subscribe; unknown event: '${e}'`);r=this[a][e]=[]}let s={callback:t,context:n};r.push(s)}addEventListener(e,t,n){this.on(e,t,n)}once(e,t,n){if(Array.isArray(e))return void e.forEach((e=>{this.once(e,t,n)}));const r=s=>{this.off(e,r,n),t.call(n,s)};r.cb=t,this.on(e,r,n)}off(e,t,n){if("object"==typeof e){if(Array.isArray(e))e.forEach((e=>{this.off(e,t,n)}));else{const t=this[a];for(let n=0,r=Object.keys(t).length;n<r;++n){const n=t[e],r=[];for(let t=0,s=n.length;t<s;++t){const s=n[t];e&&s.context!==e&&r.push(s)}t[e]=r}}return}const r=this[a][e];if(!r)throw new Error(`can't unsubscribe; unknown event type: '${e}'`);const s=[];for(let e=0,i=r.length;e<i;++e){const i=r[e];(t&&t!==i.callback&&t!==i.callback.cb||n&&n!==i.context)&&s.push(i)}this[a][e]=s}removeEventListener(e,t,n){this.off(e,t,n)}emit(e,t){let n,r;if("string"==typeof e?(n=e,r=t):(n=e.type,r=e),!n)throw new Error(`empty or invalid event type: '${n}'`);const s=this[a],i=s[n];if(i)for(let e=0,t=i.length;e<t;++e){const t=i[e];t.context?t.callback.call(t.context,r):t.callback(r)}else if(s[l])throw new Error(`can't emit; unknown event type: '${n}'`)}addEvent(e){this[a][e]||(this[a][e]=[])}addEvents(...e){e.forEach((e=>{this[a][e]||(this[a][e]=[])}))}hasEvent(e){return!!this[a][e]}listEvents(){return Object.getOwnPropertyNames(this[a])}}const d=[function(e){return e},function(e,t){for(let n=0,r=t.length;n<r;++n)t[n]=e[n];return t}],u=[function(e){return!!e},function(e,t){for(let n=0,r=t.length;n<r;++n)t[n]=!!e[n];return t}],h=[function(e){return String(e)},function(e,t){for(let n=0,r=t.length;n<r;++n)t[n]=String(e[n]);return t}],m=[function(e){return parseFloat(e)||0},function(e,t){for(let n=0,r=t.length;n<r;++n)t[n]=parseFloat(e[n])||0;return t}],p=[function(e,t){throw new Error(`illegal value conversion from ${typeof e} to ${typeof t}`)},function(e,t,n){throw new Error(`illegal array conversion from ${typeof e[0]} to ${typeof t[0]}`)}],f={number:{number:d,boolean:u,string:h,object:p},boolean:{number:[function(e){return e?1:0},function(e,t){for(let n=0,r=t.length;n<r;++n)t[n]=e[n]?1:0;return t}],boolean:d,string:h,object:p},string:{number:m,boolean:u,string:d,object:p},object:{number:p,boolean:u,string:h,object:d}},g={number:{number:!0,boolean:!0,string:!0,object:!1},boolean:{number:!0,boolean:!0,string:!0,object:!1},string:{number:!0,boolean:!0,string:!0,object:!1},object:{number:!1,boolean:!0,string:!0,object:!0}},v=[[function(e,t,n){return n(e,t)},function(e,t,n){return t[0]=n(e),t},function(e,t,n){return t[1]=n(e),t},function(e,t,n){return t[2]=n(e),t},function(e,t,n){return t[3]=n(e),t}],[function(e,t,n){return n(e[0])},function(e,t,n){return t[0]=n(e[0]),t},function(e,t,n){return t[1]=n(e[0]),t},function(e,t,n){return t[2]=n(e[0]),t},function(e,t,n){return t[3]=n(e[0]),t}],[function(e,t,n){return n(e[1])},function(e,t,n){return t[0]=n(e[1]),t},function(e,t,n){return t[1]=n(e[1]),t},function(e,t,n){return t[2]=n(e[1]),t},function(e,t,n){return t[3]=n(e[1]),t}],[function(e,t,n){return n(e[2])},function(e,t,n){return t[0]=n(e[2]),t},function(e,t,n){return t[1]=n(e[2]),t},function(e,t,n){return t[2]=n(e[2]),t},function(e,t,n){return t[3]=n(e[2]),t}],[function(e,t,n){return n(e[3])},function(e,t,n){return t[0]=n(e[3]),t},function(e,t,n){return t[1]=n(e[3]),t},function(e,t,n){return t[2]=n(e[3]),t},function(e,t,n){return t[3]=n(e[3]),t}]];class y{constructor(e,t,n,r){if(1===e.elementCount&&n>=0)throw new Error("non-array source property; can't link to element");if(1===t.elementCount&&r>=0)throw new Error("non-array destination property; can't link to element");this.source=e,this.destination=t,this.sourceIndex=n,this.destinationIndex=r;const s=void 0===n?-1:n,i=void 0===r?-1:r,o=e.elementCount>1&&s<0&&i<0;this.fnConvert=function(e,t,n){const r=n?1:0;return f[e][t][r]}(e.type,t.type,o);const a=function(e,t,n){return-1===e&&-1===t?n:e<=3&&t<=3?v[e+1][t+1]:function(n,r,s){return r[t]=s(n[e]),r}}(s,i,this.fnConvert);var l,c,d;this.fnCopy=(l=e.isMulti(),c=t.isMulti(),d=a,!1===l?!1===c?d:function(e,t,n){for(let n=0,r=t.length;n<r;++n)t[n]=d(e,t[n]);return t}:!1===c?function(e,t,n){return e.length>0&&(t=d(e[0],t)),t}:function(e,t,n){for(let n=0,r=e.length,s=t.length;n<s;++n)t[n]=d(e[n%r],t[n]);return t})}push(){this.destination.setValue(this.fnCopy(this.source.value,this.destination.value,this.fnConvert))}}const _=function(e){return Object.keys(e).filter((e=>isNaN(Number(e))))},b={xyzw:["X","Y","Z","W"],rgba:["R","G","B","A"]},w=function(e){return void 0===e||"object"==typeof e&&!Array.isArray(e)?e:{preset:e}},x=function(e,t,n){return{path:t,schema:(n=w(n))?Object.assign({},e,n):e}},M={Number:{preset:0},Integer:{preset:0,step:1,speed:.34,precision:0},Natural:{preset:0,step:1,speed:.34,precision:0,min:0},Unit:{preset:0,min:0,max:1,bar:!0},Percent:{preset:0,min:0,max:1,bar:!0,percent:!0},Vector2:{preset:[0,0]},Vector3:{preset:[0,0,0]},Vector4:{preset:[0,0,0,0]},Matrix2:{preset:[1,0,0,1]},Matrix3:{preset:[1,0,0,0,1,0,0,0,1]},Matrix4:{preset:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},Scale:{preset:1},Scale2:{preset:[1,1]},Scale3:{preset:[1,1,1]},IntVec2:{preset:[0,0],step:1,speed:.34,precision:0},IntVec3:{preset:[0,0,0],step:1,speed:.34,precision:0},ColorRGB:{preset:[1,1,1],semantic:"color",labels:b.rgba,min:0,max:1,bar:!0},ColorRGBA:{preset:[1,1,1,1],semantic:"color",labels:b.rgba,min:0,max:1,bar:!0},Boolean:{preset:!1},String:{preset:""},AssetPath:{preset:"",semantic:"asset-path"},Object:{preset:null,objectType:Object},Event:{preset:0,event:!0}},S=(e,t)=>x(M.Number,e,t),T=(e,t)=>x(M.Integer,e,t),C=(e,t)=>x(M.Percent,e,t),E=(e,t)=>x(M.Vector3,e,t),k=(e,t)=>x(M.Matrix4,e,t),L=(e,t)=>x(M.Scale,e,t),A=(e,t)=>x(M.Scale3,e,t),D=(e,t)=>x(M.ColorRGB,e,t),O=(e,t)=>x(M.Boolean,e,t),R=(e,t)=>x(M.String,e,t),P=(e,t)=>x(M.AssetPath,e,t),N=(e,t,n)=>function(e,t,n){n=w(n);const r={enum:e,options:_(e),preset:0};return{path:t,schema:n?Object.assign({},r,n):r}}(t,e,n),I=(e,t,n)=>function(e,t,n){const r={options:e,preset:0};return{path:t,schema:(n=w(n))?Object.assign({},r,n):r}}(t,e,n),z=(e,t,n)=>function(e,t,n){const r={preset:null,objectType:e};return{path:t,schema:(n=w(n))?Object.assign({},r,n):r}}(t,e,n),B=(e,t)=>x(M.Event,e,t);class F extends c{constructor(e,t,n){if(super(),this.addEvents("value","link","change","dispose"),!t||void 0===t.preset)throw new Error("missing schema/preset");const r=t.preset,s=Array.isArray(r);this.type=typeof(s?r[0]:r),this.schema=t,this.custom=n||!1,this.elementCount=s?r.length:1,this.inLinks=[],this.outLinks=[],this._group=null,this._key="",this._path=e,this.value=null,this.reset(),this.changed=!t.event}get group(){return this._group}get key(){return this._key}get path(){return this._path}set path(e){this._path=e,this.emit({type:"change",what:"path",property:this})}get name(){return this._path.split(".").pop()}dispose(){this.unlink(),this._group&&this._group.removeProperty(this),this.emit({type:"dispose",property:this})}setValue(e,t,n){this.value=e,t||(this.changed=!0,this.isInput()&&(this._group.linkable.changed=!0)),n||this.emit("value",e);const r=this.outLinks;for(let e=0,t=r.length;e<t;++e)r[e].push()}setOption(e,t,n){if(!this.schema.options)throw new Error("not an 'option' type");const r=this.schema.options.indexOf(e);r>=0&&this.setValue(r,t,n)}copyValue(e,t){Array.isArray(e)&&(e=e.slice()),this.setValue(e,t)}set(e){e||(this.changed=!0,this.isInput()&&(this._group.linkable.changed=!0)),this.emit("value",this.value);const t=this.outLinks;for(let e=0,n=t.length;e<n;++e)t[e].push()}cloneValue(){const e=this.value;return Array.isArray(e)?e.slice():e}getValidatedValue(e){const t=this.value;if(this.isArray()){e=e||[];for(let n=0,r=t.length;n<r;++n)e[n]=this.validateValue(t[n]);return e}return this.validateValue(t)}linkTo(e,t,n){e.linkFrom(this,t,n)}linkFrom(e,t,n){if(!this.canLinkFrom(e,t,n))throw new Error(`can't link from '${e.path}' to '${this.path}'`);const r=new y(e,this,t,n);e.addOutLink(r),this.addInLink(r)}unlinkTo(e,t,n){e.unlinkFrom(this,t,n)}unlinkFrom(e,t,n){const r=this.inLinks.find((r=>r.source===e&&r.sourceIndex===t&&r.destinationIndex===n));return!!r&&(e.removeOutLink(r),this.removeInLink(r),!0)}unlink(){this.inLinks.slice().forEach((e=>{e.source.removeOutLink(e),this.removeInLink(e)}));if(this.outLinks.slice().forEach((e=>{this.removeOutLink(e),e.destination.removeInLink(e)})),0!==this.inLinks.length||0!==this.outLinks.length)throw new Error("fatal: leftover links")}addInLink(e){if(e.destination!==this)throw new Error("input link's destination must equal this");this.inLinks.push(e),this.requestSort(),this.emit({type:"link",add:!0,remove:!1,link:e})}addOutLink(e){if(e.source!==this)throw new Error("output link's source must equal this");this.outLinks.push(e),this.requestSort(),e.push()}removeInLink(e){const t=this.inLinks.indexOf(e);if(t<0)throw new Error("input link not found");this.inLinks.splice(t,1),this.requestSort(),0===this.inLinks.length&&"object"===this.type&&this.reset(),this.emit({type:"link",add:!1,remove:!0,link:e})}removeOutLink(e){const t=this.outLinks.indexOf(e);if(t<0)throw new Error("output link not found");this.outLinks.splice(t,1),this.requestSort()}canLinkTo(e,t,n){return e.canLinkFrom(this,t,n)}canLinkFrom(e,t,n){if(this.isOutput())return!1;const r=t>=0,s=n>=0;if(!e.isArray()&&r)throw new Error("non-array source property; can't link to element");if(!this.isArray()&&s)throw new Error("non-array destination property; can't link to element");const i=e.isArray()&&!r;return i===(this.isArray()&&!s)&&((!i||e.elementCount===this.elementCount)&&(!("object"===e.type&&"object"===this.type&&!function(e,t){if(!e||!t)return!1;let n=e.prototype;for(;n;){if(n===t.prototype)return!0;n=n.prototype}return!1}(e.schema.objectType,this.schema.objectType))&&(o=e.type,a=this.type,g[o][a])));var o,a}reset(){let e;if(this.isMulti()){let t=this.value;t?t.length=1:e=t=[],t[0]=this.clonePreset()}else e=this.clonePreset();this.setValue(e)}setMultiChannelCount(e){if(!this.isMulti())throw new Error("can't set multi channel count on non-multi property");const t=this.value,n=t.length;t.length=e;for(let r=n;r<e;++r)t[r]=this.clonePreset();this.changed=!0}requestSort(){this._group&&this._group.linkable&&this._group.linkable.requestSort()}setOptions(e){if(!this.schema.options)throw new Error(`property type mismatch, can't set options on '${this.path}'`);this.schema.options=e.slice(),this.emit({type:"change",what:"options",property:this})}getOptionText(){const e=this.schema.options;if("number"===this.type&&e){const t=Math.trunc(this.value);return e[t<0||t>=e.length?0:t]||""}}isInput(){return this._group&&this._group===this._group.linkable.ins}isOutput(){return this._group&&this._group===this._group.linkable.outs}isArray(){return Array.isArray(this.schema.preset)}isMulti(){return!!this.schema.multi}isDefault(){const e=this.schema.multi?this.value[0]:this.value,t=this.schema.preset,n=Array.isArray(e)?e.length:-1;if(n!==(Array.isArray(t)?t.length:-1))return!1;if(n>=0){for(let r=0;r<n;++r)if(e[r]!==t[r])return!1;return!0}return e===t}hasLinks(){return this.inLinks.length>0||this.outLinks.length>0}hasInLinks(e){const t=this.inLinks;if(!(e>=0))return t.length>0;for(let n=0,r=t.length;n<r;++n)if(t[n].destinationIndex===e)return!0;return!1}hasMainInLinks(){const e=this.inLinks;for(let t=0,n=e.length;t<n;++t)if(!(e[t].destinationIndex>=0))return!0;return!1}hasOutLinks(e){const t=this.outLinks;if(!(e>=0))return t.length>0;for(let n=0,r=t.length;n<r;++n)if(t[n].sourceIndex===e)return!0;return!1}inLinkCount(){return this.inLinks.length}outLinkCount(){return this.outLinks.length}toJSON(){let e=this.custom?{path:this.path,schema:Object.assign({},this.schema)}:null;return this.isOutput()||this.hasMainInLinks()||this.isDefault()||"object"===this.type||(e=e||{},e.value=this.value),this.outLinks.length>0&&(e=e||{},e.links=this.outLinks.map((e=>{const t={id:e.destination._group.linkable.id,key:e.destination.key};return e.sourceIndex>=0&&(t.srcIndex=e.sourceIndex),e.destinationIndex>=0&&(t.dstIndex=e.destinationIndex),t}))),e}fromJSON(e,t){void 0!==e.value&&(this.value=e.value),void 0!==e.links&&e.links.forEach((e=>{t[e.id].ins[e.key].linkFrom(this,e.srcIndex,e.dstIndex)}))}toString(){const e=this.schema,t=e.event?"event":e.options?"enum":this.type;return`${this.path} [${t}]`}dump(e=""){console.log(e+`Property '${this.path}', key: ${this.key}, value: ${this.value}`)}validateValue(e){const t=this.schema;if(t.enum){const n=Math.trunc(e);return t.enum[n]?n:0}if(t.options){const n=Math.trunc(e);return n<0||n>=t.options.length?0:n}return"number"===this.type?(e=t.min?Math.max(t.min,e):e,e=t.max?Math.min(t.max,e):e):e}clonePreset(){const e=this.schema.preset;return Array.isArray(e)?e.slice():e}}class H extends c{constructor(e){super(),this.addEvent("property"),this.linkable=e,this.properties=[]}get customProperties(){return this.properties.filter((e=>e.custom))}dispose(){this.unlinkAllProperties()}isInputGroup(){return this===this.linkable.ins}isOutputGroup(){return this===this.linkable.outs}createProperties(e,t){return Object.keys(e).forEach(((n,r)=>{const s=void 0===t?void 0:t+r,i=e[n];this.createProperty(i.path,i.schema,n,s)})),this}createProperty(e,t,n,r){const s=new F(e,t);return this.addProperty(s,n,r),s}createCustomProperty(e,t,n){const r=new F(e,t,!0);return this.addCustomProperty(r,n),r}addCustomProperty(e,t){const n=i(5);this.addProperty(e,n,t)}addProperty(e,t,n){if(e.group)throw new Error("can't add, property already part of a group");if(this[t])throw new Error(`key '${t}' already exists in group`);e._group=this,e._key=t,void 0===n?this.properties.push(e):this.properties.splice(n,0,e),this[t]=e,this.emit({type:"property",add:!0,remove:!1,property:e})}removeProperty(e){if(e.group!==this)throw new Error("can't remove, property not in this group");if(e.hasLinks())throw new Error("can't remove, property has links");if(this[e.key]!==e)throw new Error(`property key '${e.key}' not found in group`);this.properties.slice(this.properties.indexOf(e),1),delete this[e.key],e._group=null,e._key="",this.emit({type:"property",add:!1,remove:!0,property:e})}getProperty(e){const t=this[e];if(!t)throw new Error(`no property found with key '${e}'`);return t}getKeys(e=!1){const t=[];return this.properties.forEach((n=>{(e||"object"!==n.type)&&t.push(n.key)})),t}getValues(e=!1){const t=[];return this.properties.map((n=>{(e||"object"!==n.type)&&t.push(n.value)})),t}cloneValues(e=!1){const t=[];return this.properties.map((n=>{(e||"object"!==n.type)&&t.push(n.cloneValue())})),t}setValues(e){Object.keys(e).forEach((t=>this.getProperty(t).value=e[t]))}copyValues(e){Object.keys(e).forEach((t=>this.getProperty(t).copyValue(e[t])))}unlinkAllProperties(){this.properties.forEach((e=>e.unlink()))}toJSON(){let e=null;return this.properties.forEach((t=>{const n=t.toJSON();n&&(e=e||{},e[t.key]=n)})),e}fromJSON(e){Object.keys(e).forEach((t=>{const n=e[t];if(n.schema){const e=new F(n.path,n.schema,!0);this.addProperty(e,t)}}))}linksFromJSON(e,t){Object.keys(e).forEach((n=>{this[n].fromJSON(e[n],t)}))}}class j{constructor(e,t,n,r){this.typeName=W.getTypeName(t),this.didAdd=n,this.willRemove=r,this._registry=e,e.on(this.typeName,this.onComponent,this),this.component=e.get(t,!0),this.component&&n&&n(this.component)}dispose(){this._registry.off(this.typeName,this.onComponent,this),this.component=null,this.didAdd=null,this.willRemove=null}onComponent(e){e.add?(this.component=e.object,this.didAdd&&this.didAdd(e.object)):e.remove&&(this.willRemove&&this.willRemove(e.object),this.component=null)}}class U{constructor(e,t){this._typeName=t?W.getTypeName(t):null,this._id=t instanceof W?t.id:void 0,this._system=e}get component(){return this._id&&this._system.components.getById(this._id)||null}set component(e){if(e&&this._typeName&&!(e instanceof this._system.registry.getType(this._typeName)))throw new Error(`can't assign component of class '${e.constructor.name||"unknown"}' to link of class '${this._typeName}'`);this._id=e?e.id:void 0}}const Y=[];class V extends c{constructor(e){super({knownEvents:!1});const t=e.typeName;if(!t)throw new Error("root type must have a 'typeName' member");this._rootTypeName=t,this._objLists={[this._rootTypeName]:[]},this._objTags={},this._objDict={}}static getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e}add(e){const t=e.id;if("string"==typeof t){if(void 0!==this._objDict[t])throw new Error("object already registered");this._objDict[t]=e}let n,r=e;const s=this._rootTypeName,i={type:"",add:!0,remove:!1,object:e};do{r=Object.getPrototypeOf(r),n=r.constructor.typeName,n&&((this._objLists[n]||(this._objLists[n]=[])).push(e),i.type=n,this.emit(i))}while(n!==s)}remove(e){const t=e.id;if("string"==typeof t){if(this._objDict[t]!==e)throw new Error("object not registered");delete this._objDict[t]}let n,r=e;const s=this._rootTypeName,i={type:"",add:!1,remove:!0,object:e};do{if(r=Object.getPrototypeOf(r),n=r.constructor.typeName,n){i.type=n;const t=this._objLists[n];t.splice(t.indexOf(e),1),this.emit(i)}}while(n!==s)}addByTag(e,t){if(!e||"tag"===e)throw new Error("illegal tag name");(this._objTags[e]||(this._objTags[e]=[])).push(t);const n={type:"tag",add:!0,remove:!1,object:t,tag:e};this.emit(n),n.type=e,this.emit(n)}removeByTag(e,t){if(!e||"tag"===e)throw new Error("illegal tag name");const n=this._objTags[e];if(n){const r=n.indexOf(t);if(r>=0){const s={type:"tag",add:!1,remove:!0,object:t,tag:e};return this.emit(s),s.type=e,this.emit(s),n.splice(r,1),!0}}return!1}clear(){this.cloneArray().forEach((e=>this.remove(e)))}get length(){return this._objLists[this._rootTypeName].length}count(e){const t=this._objLists[this.getTypeName(e)];return t?t.length:0}has(e){if("function"==typeof e){const t=this._objLists[e.typeName];return!!t&&t.length>0}if("string"==typeof e){const t=this._objLists[e];return!!t&&t.length>0}const t=this._objLists[e.constructor.typeName];return t&&t.indexOf(e)>=0}contains(e){const t=e.id;if("string"==typeof t)return!!this._objDict[t];const n=this._objLists[e.constructor.typeName];return n&&n.indexOf(e)>=0}get(e,t=!1){const n=this.getTypeName(e),r=this._objLists[n],s=r?r[0]:void 0;if(!t&&!s)throw new Error(`no instances of class '${n}' in object registry`);return s}getArray(e){return this._objLists[this.getTypeName(e)]||Y}cloneArray(e){return this.getArray(e).slice()}getById(e){return this._objDict[e]}getDictionary(){return this._objDict}getByTag(e){return this._objTags[e]||Y}on(e,t,n){super.on(this.getTypeName(e),t,n)}once(e,t,n){super.once(this.getTypeName(e),t,n)}off(e,t,n){super.off(this.getTypeName(e),t,n)}getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e||this._rootTypeName}}class $ extends c{constructor(e,t){super({knownEvents:!1}),this.graph=null,this.components=new V(W),this._name="",this._tags=new Set,this._isLocked=void 0,this.graph=e,this.id=t}static getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e||$.typeName}get typeName(){return this.constructor.typeName}get displayTypeName(){const e=this.typeName;return"Node"===e?e:e.substr(1)}get isLocked(){return this._isLocked}get text(){return this.constructor.text}get icon(){return this.constructor.icon}get name(){return this._name}get displayName(){return this._name||this.text||this.displayTypeName}set name(e){this._name=e,this.emit({type:"change",what:"name",node:this})}get tags(){return this._tags}addTag(e){this._tags.has(e)||(this._tags.add(e),this.graph._addNodeTag(e,this))}removeTag(e){this._tags.has(e)&&(this._tags.delete(e),this.graph._removeNodeTag(e,this))}get system(){return this.graph.system}getComponent(e,t=!1){return this.components.get(e,t)}getComponents(e){return this.components.getArray(e)}getComponentsByTag(e){return this.components.getByTag(e)}getOrCreateComponent(e){return this.components.get(e,!0)||this.createComponent(e)}hasComponent(e){return this.components.has(e)}getGraphComponent(e,t=!1){return this.graph.components.get(e,t)}getGraphComponents(e){return this.graph.components.getArray(e)}getGraphComponentsByTag(e){return this.graph.components.getByTag(e)}hasGraphComponent(e){return this.graph.components.has(e)}getMainComponent(e,t=!1){return this.graph.system.graph.components.get(e,t)}getMainComponents(e){return this.graph.system.graph.components.getArray(e)}getMainComponentsByTag(e){return this.graph.system.graph.components.getByTag(e)}hasMainComponent(e){return this.graph.system.graph.components.has(e)}getSystemComponent(e,t=!1){return this.graph.system.components.get(e,t)}getSystemComponents(e){return this.graph.system.components.getArray(e)}getSystemComponentsByTag(e){return this.graph.system.components.getByTag(e)}hasSystemComponent(e){return this.graph.system.components.has(e)}getComponentById(e){return this.graph.system.components.getById(e)}getNode(e,t=!1){return this.graph.nodes.get(e,t)}getNodes(e){return this.graph.nodes.getArray(e)}getNodesByTag(e){return this.graph.nodes.getByTag(e)}hasNode(e){return this.graph.nodes.has(e)}getMainNode(e,t=!1){return this.graph.system.graph.nodes.get(e,t)}getMainNodes(e){return this.graph.system.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.graph.system.graph.nodes.getByTag(e)}hasMainNode(e){return this.graph.system.graph.nodes.has(e)}getSystemNode(e,t=!1){return this.graph.system.nodes.get(e,t)}getSystemNodes(e){return this.graph.system.nodes.getArray(e)}getSystemNodesByTag(e){return this.graph.system.nodes.getByTag(e)}hasSystemNode(e){return this.graph.system.nodes.has(e)}getNodeById(e){return this.graph.system.nodes.getById(e)}lock(){if(!1===this._isLocked)throw new Error("can't lock an unlocked node again");this._isLocked=!0}unlock(){this._isLocked=!1}create(){this.graph._addNode(this)}createComponents(){}clear(){this.components.getArray().slice().forEach((e=>e.dispose()))}dispose(){this.components.cloneArray().reverse().forEach((e=>e.dispose())),this.emit({type:"dispose",node:this}),this.graph&&(this.graph._removeNode(this),this.graph=null)}createComponent(e,t,n){if(!0===this._isLocked)throw new Error("node is locked, can't create component");const r=this.system.registry.getType(e);if(!r)throw new Error(`component type '${W.getTypeName(e)}' not registered`);const s=new r(this,n||i(12,this.system.components.getDictionary()));return s.create(),t&&(s.name=t),s}is(e){const t=$.getTypeName(e);let n=this;do{if(n=Object.getPrototypeOf(n),n.constructor.typeName===t)return!0}while(n.constructor.typeName!==$.typeName);return!1}toString(e=!1){const t=this.components.getArray(),n=`Node '${this.name}' - ${t.length} components`;return e?n+"\n"+t.map((e=>"  "+e.toString())).join("\n"):n}dump(e=""){console.log(e+`%cNode '${this.typeName}' (${this.displayName})`,"color: blue"),this.components.getArray().forEach((t=>t.dump(e+"  ")))}toJSON(){const e={},t=[];this._isLocked&&(e.locked=!0);const n=this.components.getArray();for(let e=0,r=n.length;e<r;++e){const r=n[e],s=this.componentToJSON(r);s&&(s.type=r.typeName,s.id=r.id,r.name&&(s.name=r.name),t.push(s))}return t.length>0&&(e.components=t),e}fromJSON(e){this._isLocked=!!e.locked,e.components&&e.components.forEach((e=>this.componentFromJSON(e)))}componentFromJSON(e){this.createComponent(e.type,e.name,e.id).fromJSON(e)}referencesFromJSON(e){e.components&&e.components.forEach((e=>{this.components.getById(e.id).referencesFromJSON(e)}))}componentToJSON(e){return e.toJSON()}_addComponent(e){if(e.isNodeSingleton&&this.components.has(e))throw new Error(`only one component of type '${e.typeName}' allowed per node`);this.components.add(e),this.graph._addComponent(e)}_removeComponent(e){this.graph._removeComponent(e),this.components.remove(e)}_addComponentTag(e,t){this.components.addByTag(e,t),this.graph._addComponentTag(e,t)}_removeComponentTag(e,t){this.graph._removeComponentTag(e,t),this.components.removeByTag(e,t)}}$.typeName="Node",$.text="",$.icon="";class W extends c{constructor(e,t){super({knownEvents:!1}),this.ins=new H(this),this.outs=new H(this),this.changed=!0,this.updated=!1,this._name="",this._tags=new Set,this._trackers=[],this.node=e,this.id=t}static getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e||W.typeName}create(){this.node._addComponent(this),this.graph.isActive&&this.activate&&this.activate()}dispose(){this.graph.isActive&&this.deactivate&&this.deactivate(),this.emit({type:"dispose",component:this}),this.ins.dispose(),this.outs.dispose(),this._trackers.forEach((e=>e.dispose())),this.node&&(this.node._removeComponent(this),this.node=null)}get isNodeSingleton(){return this.constructor.isNodeSingleton}get isGraphSingleton(){return this.constructor.isGraphSingleton}get isSystemSingleton(){return this.constructor.isSystemSingleton}get typeName(){return this.constructor.typeName}get displayTypeName(){const e=this.typeName;return"Component"===e?e:e.substr(1)}get text(){return this.constructor.text}get icon(){return this.constructor.icon}get name(){return this._name}get displayName(){return this._name||this.text||this.displayTypeName}set name(e){this._name=e,this.emit({type:"change",component:this,what:"name"})}get tags(){return this._tags}addTag(e){this._tags.has(e)||(this._tags.add(e),this.node._addComponentTag(e,this))}removeTag(e){this._tags.has(e)&&(this._tags.delete(e),this.node._removeComponentTag(e,this))}get graph(){return this.node.graph}get system(){return this.node.system}get components(){return this.node.components}get isActive(){return this.graph.isActive}getComponent(e,t=!1){return this.node.components.get(e,t)}getComponents(e){return this.node.components.getArray(e)}getComponentsByTag(e){return this.node.components.getByTag(e)}createComponent(e){return this.node.createComponent(e)}getOrCreateComponent(e){return this.node.components.get(e,!0)||this.node.createComponent(e)}hasComponent(e){return this.node.components.has(e)}getGraphComponent(e,t=!1){return this.node.graph.components.get(e,t)}getGraphComponents(e){return this.node.graph.components.getArray(e)}getGraphComponentsByTag(e){return this.node.graph.components.getByTag(e)}hasGraphComponent(e){return this.node.graph.components.has(e)}getMainComponent(e,t=!1){return this.node.system.graph.components.get(e,t)}getMainComponents(e){return this.node.system.graph.components.getArray(e)}getMainComponentsByTag(e){return this.node.system.graph.components.getByTag(e)}hasMainComponent(e){return this.node.system.graph.components.has(e)}getSystemComponent(e,t=!1){return this.node.system.components.get(e,t)}getSystemComponents(e){return this.node.system.components.getArray(e)}getSystemComponentsByTag(e){return this.node.system.components.getByTag(e)}hasSystemComponent(e){return this.node.system.components.has(e)}getComponentById(e){return this.node.system.components.getById(e)}getNode(e,t=!1){return this.node.graph.nodes.get(e,t)}getNodes(e){return this.node.graph.nodes.getArray(e)}getNodesByTag(e){return this.node.graph.nodes.getByTag(e)}hasNode(e){return this.node.graph.nodes.has(e)}getMainNode(e,t=!1){return this.node.system.graph.nodes.get(e,t)}getMainNodes(e){return this.node.system.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.node.system.graph.nodes.getByTag(e)}hasMainNode(e){return this.node.system.graph.nodes.has(e)}getSystemNode(e,t=!1){return this.node.system.nodes.get(e,t)}getSystemNodes(e){return this.node.system.nodes.getArray(e)}getSystemNodesByTag(e){return this.node.system.nodes.getByTag(e)}hasSystemNode(e){return this.node.system.nodes.has(e)}getNodeById(e){return this.node.system.nodes.getById(e)}activate(){}update(e){throw new Error("this should never be called")}tick(e){throw new Error("this should never be called")}tock(e){throw new Error("this should never be called")}deactivate(){}requestSort(){this.graph.requestSort()}is(e){const t=W.getTypeName(e);let n=this;do{if(n=Object.getPrototypeOf(n),n.constructor.typeName===t)return!0}while(n.constructor.typeName!==W.typeName);return!1}unlinkAllProperties(){this.ins.unlinkAllProperties(),this.outs.unlinkAllProperties()}resetChanged(){this.changed=!1;const e=this.ins.properties;for(let t=0,n=e.length;t<n;++t)e[t].changed=!1;const t=this.outs.properties;for(let e=0,n=t.length;e<n;++e)t[e].changed=!1}trackComponent(e,t,n){const r=new j(this.node.components,e,t,n);return this._trackers.push(r),r}referenceComponent(e){return new U(this.system,e)}toString(){return`${this.typeName}${this.name?" ("+this.name+")":""}`}dump(e=""){console.log(e+`%cComponent '${this.typeName}' (${this.displayName})`,"color: green"),this.ins.properties.forEach((t=>t.dump(e+"  IN  "))),this.outs.properties.forEach((t=>t.dump(e+"  OUT ")))}toJSON(){let e={};const t=this.ins.toJSON();t&&(e.ins=t);const n=this.outs.toJSON();return n&&(e.outs=n),e}fromJSON(e){e.ins&&this.ins.fromJSON(e.ins),e.outs&&this.outs.fromJSON(e.outs)}referencesFromJSON(e){const t=this.system.components.getDictionary();e.ins&&this.ins.linksFromJSON(e.ins,t),e.outs&&this.outs.linksFromJSON(e.outs,t)}addCustomInput(e,t,n){return this.changed=!0,this.ins.createCustomProperty(e,t,n)}allowCustomInput(e){return!1}addCustomOutput(e,t,n){return this.outs.createCustomProperty(e,t,n)}allowCustomOutput(e){return!1}addInputs(e,t){return this.ins.createProperties(e,t)}addOutputs(e,t){return this.outs.createProperties(e,t)}}W.typeName="Component",W.text="",W.icon="",W.isNodeSingleton=!0,W.isGraphSingleton=!1,W.isSystemSingleton=!1,W.prototype.activate=null,W.prototype.update=null,W.prototype.tick=null,W.prototype.tock=null,W.prototype.deactivate=null;class G{constructor(){this.visited={},this.visiting={},this.sorted=[]}sort(e){for(let t=0,n=e.length;t<n;++t)this.visit(e[t]);const t=this.sorted;return this.visited={},this.visiting={},this.sorted=[],t}visit(e){const t=this.visited,n=this.visiting;if(t[e.id]||n[e.id])return;n[e.id]=!0;const r=e.outs.properties.concat(e.ins.properties);for(let e=0,t=r.length;e<t;++e){const t=r[e].outLinks;for(let e=0,n=t.length;e<n;++e){const n=t[e].destination.group,r=n.properties;for(let e=0,t=r.length;e<t;++e){const t=r[e].outLinks;for(let e=0,n=t.length;e<n;++e){const n=t[e].destination.group;this.visit(n.linkable)}}this.visit(n.linkable)}}n[e.id]=void 0,t[e.id]=!0,this.sorted.unshift(e)}}class q extends c{constructor(e,t){super({knownEvents:!1}),this.nodes=new V($),this.components=new V(W),this.roots=[],this._sorter=new G,this._sortRequested=!0,this._sortedList=null,this._tockList=[],this._isActive=!1,this.system=e,this.parent=t}get isActive(){return this._isActive}getComponent(e,t=!1){return this.components.get(e,t)}getComponents(e){return this.components.getArray(e)}getComponentsByTag(e){return this.components.getByTag(e)}hasComponent(e){return this.components.has(e)}getMainComponent(e,t=!1){return this.system.graph.components.get(e,t)}getMainComponents(e){return this.system.graph.components.getArray(e)}getMainComponentsByTag(e){return this.system.graph.components.getByTag(e)}hasMainComponent(e){return this.system.graph.components.has(e)}getSystemComponent(e,t=!1){return this.system.components.get(e,t)}getSystemComponents(e){return this.system.components.getArray(e)}getSystemComponentsByTag(e){return this.system.components.getByTag(e)}hasSystemComponent(e){return this.system.components.has(e)}getComponentById(e){return this.system.components.getById(e)}getNode(e,t=!1){return this.nodes.get(e,t)}getNodes(e){return this.nodes.getArray(e)}getNodesByTag(e){return this.nodes.getByTag(e)}hasNode(e){return this.nodes.has(e)}getMainNode(e,t=!1){return this.system.graph.nodes.get(e,t)}getMainNodes(e){return this.system.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.system.graph.nodes.getByTag(e)}hasMainNode(e){return this.system.graph.nodes.has(e)}getSystemNode(e,t=!1){return this.system.nodes.get(e,t)}getSystemNodes(e){return this.system.nodes.getArray(e)}getSystemNodesByTag(e){return this.system.nodes.getByTag(e)}hasSystemNode(e){return this.system.nodes.has(e)}getNodeById(e){return this.system.nodes.getById(e)}activate(){if(this._isActive)return;this._isActive=!0,this._sortRequested&&(this._sortRequested=!1,this.sort());const e=this._sortedList;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.activate&&n.activate()}}deactivate(){if(!this._isActive)return;this._isActive=!1;const e=this._sortedList;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.deactivate&&n.deactivate()}}tick(e){if(!this._isActive)return;this._sortRequested&&(this._sortRequested=!1,this.sort());const t=this._sortedList;let n=!1;for(let r=0,s=t.length;r<s;++r){const s=t[r];s.updated=!1,s.changed?(s.update&&s.update(e)&&(s.updated=!0),s.tick&&s.tick(e)&&(s.updated=!0),s.resetChanged()):s.tick&&s.tick(e)&&(s.updated=!0),s.updated&&(n=!0,s.emit("update"))}return n}tock(e){if(!this._isActive)return;const t=this._tockList;let n=!1;for(let r=0,s=t.length;r<s;++r)n=t[r].tock(e)||n;return n}clear(){const e=this.nodes.cloneArray().reverse();for(let t=0,n=e.length;t<n;++t)e[t].dispose();if(this.nodes.length>0)throw new Error("graph not empty")}requestSort(){this._sortRequested=!0}sort(){this._sortedList=this._sorter.sort(this.components.getArray());this.parent&&(this.parent.name||this.parent.typeName)}createCustomNode(e,t,n){const r=this.system.registry.getType(e);if(!r)throw new Error(`node type '${$.getTypeName(e)}' not registered`);const s=new r(this,n||i(12,this.system.nodes.getDictionary()));return s.create(),t&&(s.name=t),n||(s.createComponents(),s.unlock()),s}createNode(e,t){const n=new $(this,t||i(12,this.system.nodes.getDictionary()));return n.create(),e&&(n.name=e),n.unlock(),n}findNodeByName(e,t){const n=this.nodes.getArray(t);for(let t=0,r=n.length;t<r;++t)if(n[t].name===e)return n[t]}findRootNodes(e){const t=this.nodes.getArray(e),n=[];for(let e=0,r=t.length;e<r;++e){const r=t[e].components.get("CHierarchy",!0);r&&r.parent||n.push(t[e])}return n}toString(e=!1){const t=this.nodes.getArray(),n=this.components.count(),r=`Graph - ${t.length} nodes, ${n} components.`;return e?r+"\n"+t.map((e=>e.toString(!0))).join("\n"):r}dump(e=""){console.log(e+"%cGraph","color: red");this.findRootNodes().forEach((t=>t.dump(e+"  ")))}toJSON(){const e={},t=[],n=this.nodes.getArray();for(let e=0,r=n.length;e<r;++e){const r=n[e],s=this.nodeToJSON(r);s.type=r.typeName,s.id=r.id,r.name&&(s.name=r.name),t.push(s)}return t.length>0&&(e.nodes=t),e}fromJSON(e){e.nodes&&(e.nodes.forEach((e=>{this.createCustomNode(e.type,e.name,e.id).fromJSON(e)})),e.nodes.forEach((e=>{this.nodes.getById(e.id).referencesFromJSON(e)})))}nodeToJSON(e){return e.toJSON()}_addNode(e){this.nodes.add(e),this.system._addNode(e)}_removeNode(e){this.system._removeNode(e),this.nodes.remove(e)}_addNodeTag(e,t){this.nodes.addByTag(e,t),this.system._addNodeTag(e,t)}_removeNodeTag(e,t){this.system._removeNodeTag(e,t),this.nodes.removeByTag(e,t)}_addComponent(e){if(e.isGraphSingleton&&this.components.has(e))throw new Error(`only one component of type '${e.typeName}' allowed per graph`);this.components.add(e),this.system._addComponent(e),e.tock&&this._tockList.push(e),this._sortRequested=!0}_removeComponent(e){this.system._removeComponent(e),this.components.remove(e),e.tock&&this._tockList.splice(this._tockList.indexOf(e),1),this._sortRequested=!0}_addComponentTag(e,t){this.components.addByTag(e,t),this.system._addComponentTag(e,t)}_removeComponentTag(e,t){this.system._removeComponentTag(e,t),this.components.removeByTag(e,t)}_addRoot(e){this.roots.push(e),this.parent&&this.parent.onAddInnerRoot(e)}_removeRoot(e){this.parent&&this.parent.onRemoveInnerRoot(e),this.roots.splice(this.roots.indexOf(e),1)}}class X extends W{constructor(e,t){super(e,t),this.ins=this.addInputs(X.graphIns),this._innerGraph=null,this._innerRoot=null,this._innerGraph=new q(this.system,this)}get innerGraph(){return this._innerGraph}get innerNodes(){return this._innerGraph.nodes}get innerComponents(){return this._innerGraph.components}get innerRoots(){return this._innerGraph.roots}getInnerComponent(e,t=!1){return this._innerGraph.components.get(e,t)}getInnerComponents(e){return this._innerGraph.components.getArray(e)}hasInnerComponent(e){return this._innerGraph.components.has(e)}getInnerNode(e,t=!1){return this._innerGraph.nodes.get(e,t)}getInnerNodes(e){return this._innerGraph.nodes.getArray(e)}hasInnerNode(e){return this._innerGraph.nodes.has(e)}isEmpty(){return 0===this._innerGraph.nodes.count()}update(e){const t=this.ins;if(t.active.changed){const e=t.active.value;e!==this._innerGraph.isActive&&(e?this.activateInnerGraph():this.deactivateInnerGraph())}return!0}tick(e){return this._innerGraph.tick(e)}tock(e){return this._innerGraph.tock(e)}dispose(){this._innerGraph.clear(),this._innerGraph=null,this._innerRoot=null,super.dispose()}clearInnerGraph(){this._innerGraph.clear()}fromJSON(e){super.fromJSON(e),this._innerGraph.clear(),this._innerGraph.fromJSON(e.graph)}toJSON(){const e=super.toJSON();return e.graph=this._innerGraph.toJSON(),e}dump(e=""){super.dump(e),this.innerGraph.dump(e+"  ")}onAddInnerRoot(e){}onRemoveInnerRoot(e){}activateInnerGraph(){this._innerGraph.activate()}deactivateInnerGraph(){this._innerGraph.deactivate()}}X.typeName="CGraph",X.graphIns={active:O("Graph.Active",!0)};class K{constructor(e,t){this._args=e,this._props=t,this._args=e,this._state=null}get name(){return this._props.name||this._props.do.name.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()))}do(){if(this._state)throw new Error("undo should be called before execute can be applied again");this._state=this._props.do.apply(this._props.target,this._args)}undo(){if(!this._props.undo)throw new Error("can't undo this command");if(!this._state)throw new Error("execute should be called before undo can be applied");this._props.undo.call(this._props.target,this._state),this._state=null}canDo(){return!this._props.canDo||this._props.canDo()}canUndo(){return!!this._props.undo}}class J extends c{constructor(e){super(),this.addEvent("update"),this.stack=[],this.pointer=-1,this.capacity=void 0!==e?e:J.defaultCapacity}register(e){let t;t="function"==typeof e?e:t=>new K(t,e);return(...e)=>{const n=t(e);this.do(n)}}setCapacity(e){for(this.capacity=e;this.stack.length>e;)this.stack.shift(),this.pointer--;this.pointer<0&&(this.stack=[],this.pointer=-1)}do(e){console.log(`Commander.do - '${e.name}'`),e.do(),e.canUndo()&&(this.stack.splice(this.pointer+1),this.stack.push(e),this.stack.length>this.capacity&&this.stack.shift(),this.pointer=this.stack.length-1,this.emit("update"))}undo(){if(this.pointer>=0){this.stack[this.pointer].undo(),this.pointer--,this.emit("update")}}redo(){if(this.pointer<this.stack.length-1){this.pointer++;this.stack[this.pointer].do(),this.emit("update")}}clear(){this.stack.length>0&&(this.stack=[],this.pointer=-1,this.emit("update"))}canUndo(){return this.pointer>=0}canRedo(){return this.pointer<this.stack.length-1}getUndoText(){return this.pointer>=0?"Undo "+this.stack[this.pointer].name:"Can't Undo"}getRedoText(){return this.pointer<this.stack.length-1?"Redo "+this.stack[this.pointer+1].name:"Can't Redo"}}J.defaultCapacity=30;class Z extends W{createActions(e){return{}}}Z.typeName="CController",Z.isSystemSingleton=!0;class Q extends Z{constructor(e,t){super(e,t),this.outs=this.addOutputs(Q.selOuts),this.multiSelect=!1,this.exclusiveSelect=!0,this.selectedNodes=new V($),this.selectedComponents=new V(W),this._activeGraph=null,this.addEvents("select-node","select-component","active-graph","update"),this.selectedNodes.on($,(e=>this.onSelectNode(e.object,e.add))),this.selectedComponents.on(W,(e=>this.onSelectComponent(e.object,e.add))),this._activeGraph=this.system.graph}getSelectedNode(e){return this.selectedNodes.get(e,!0)}getSelectedNodes(e){return this.selectedNodes.getArray(e)}getSelectedComponent(e){return this.selectedComponents.get(e,!0)}getSelectedComponents(e){return this.selectedComponents.getArray(e)}get activeGraph(){return this._activeGraph}set activeGraph(e){if(e!==this.activeGraph){this.clearSelection();const t=this._activeGraph;this._activeGraph=e,this.onActiveGraph(e),this.emit({type:"active-graph",previous:t,next:e})}}hasParentGraph(){return this._activeGraph&&this._activeGraph.parent}activateParentGraph(){this._activeGraph&&this._activeGraph.parent.graph&&(this.activeGraph=this._activeGraph.parent.graph)}hasChildGraph(){return this.selectedComponents.has(X)}activateChildGraph(){const e=this.selectedComponents.get(X,!0);e&&(this.activeGraph=e.innerGraph)}create(){super.create(),this.system.nodes.on($,this.onSystemNode,this),this.system.components.on(W,this.onSystemComponent,this)}dispose(){this.system.nodes.off($,this.onSystemNode,this),this.system.components.off(W,this.onSystemComponent,this),super.dispose()}createActions(e){return{selectNode:e.register({name:"Select Node",do:this.selectNode,target:this}),selectComponent:e.register({name:"Select Component",do:this.selectComponent,target:this}),clearSelection:e.register({name:"Clear Selection",do:this.clearSelection,target:this})}}nodeContainsSelectedComponent(e){const t=e.components.getArray();for(let e=0,n=t.length;e<n;++e)if(this.selectedComponents.contains(t[e]))return!0;return!1}selectNode(e,t=!1){this.activeGraph=e.graph;const n=this.selectedNodes,r=this.multiSelect&&t;e&&n.contains(e)?r&&n.remove(e):(this.exclusiveSelect&&this.selectedComponents.clear(),r||n.clear(),e&&n.add(e)),this.updateStats()}selectComponent(e,t=!1){this.activeGraph=e.graph;const n=this.selectedComponents,r=this.multiSelect&&t;e&&n.contains(e)?r&&n.remove(e):(this.exclusiveSelect&&this.selectedNodes.clear(),r||n.clear(),e&&n.add(e)),this.updateStats()}clearSelection(){this.selectedNodes.clear(),this.selectedComponents.clear(),this.updateStats()}onSelectNode(e,t){}onSelectComponent(e,t){}onActiveGraph(e){}onSystemNode(e){e.remove&&this.selectedNodes.contains(e.object)&&(this.selectedNodes.remove(e.object),this.updateStats())}onSystemComponent(e){e.remove&&this.selectedComponents.contains(e.object)&&(this.selectedComponents.remove(e.object),this.updateStats())}updateStats(){const e=this.outs;e.selNodeCount.setValue(this.selectedNodes.length),e.selComponentCount.setValue(this.selectedComponents.length)}}Q.typeName="CSelection",Q.selOuts={selNodeCount:T("Selection.Nodes"),selComponentCount:T("Selection.Components")};const ee=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const te=Math.PI/180,ne=180/Math.PI;function re(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ee[255&e]+ee[e>>8&255]+ee[e>>16&255]+ee[e>>24&255]+"-"+ee[255&t]+ee[t>>8&255]+"-"+ee[t>>16&15|64]+ee[t>>24&255]+"-"+ee[63&n|128]+ee[n>>8&255]+"-"+ee[n>>16&255]+ee[n>>24&255]+ee[255&r]+ee[r>>8&255]+ee[r>>16&255]+ee[r>>24&255]).toLowerCase()}function se(e,t,n){return Math.max(t,Math.min(n,e))}function ie(e,t){return(e%t+t)%t}function oe(e,t,n){return(1-n)*e+n*t}function ae(e){return 0==(e&e-1)&&0!==e}function le(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ce(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function de(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class ue{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,i,o){let a=n[r+0],l=n[r+1],c=n[r+2],d=n[r+3];const u=s[i+0],h=s[i+1],m=s[i+2],p=s[i+3];if(0===o)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===o)return e[t+0]=u,e[t+1]=h,e[t+2]=m,void(e[t+3]=p);if(d!==p||a!==u||l!==h||c!==m){let e=1-o;const t=a*u+l*h+c*m+d*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const s=Math.sqrt(r),i=Math.atan2(s,t*n);e=Math.sin(e*i)/s,o=Math.sin(o*i)/s}const s=o*n;if(a=a*e+u*s,l=l*e+h*s,c=c*e+m*s,d=d*e+p*s,e===1-o){const e=1/Math.sqrt(a*a+l*l+c*c+d*d);a*=e,l*=e,c*=e,d*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,s,i){const o=n[r],a=n[r+1],l=n[r+2],c=n[r+3],d=s[i],u=s[i+1],h=s[i+2],m=s[i+3];return e[t]=o*m+c*d+a*h-l*u,e[t+1]=a*m+c*u+l*d-o*h,e[t+2]=l*m+c*h+o*u-a*d,e[t+3]=c*m-o*d-a*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,i=e._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(r/2),d=o(s/2),u=a(n/2),h=a(r/2),m=a(s/2);switch(i){case"XYZ":this._x=u*c*d+l*h*m,this._y=l*h*d-u*c*m,this._z=l*c*m+u*h*d,this._w=l*c*d-u*h*m;break;case"YXZ":this._x=u*c*d+l*h*m,this._y=l*h*d-u*c*m,this._z=l*c*m-u*h*d,this._w=l*c*d+u*h*m;break;case"ZXY":this._x=u*c*d-l*h*m,this._y=l*h*d+u*c*m,this._z=l*c*m+u*h*d,this._w=l*c*d-u*h*m;break;case"ZYX":this._x=u*c*d-l*h*m,this._y=l*h*d+u*c*m,this._z=l*c*m-u*h*d,this._w=l*c*d+u*h*m;break;case"YZX":this._x=u*c*d+l*h*m,this._y=l*h*d+u*c*m,this._z=l*c*m-u*h*d,this._w=l*c*d-u*h*m;break;case"XZY":this._x=u*c*d-l*h*m,this._y=l*h*d-u*c*m,this._z=l*c*m+u*h*d,this._w=l*c*d+u*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],i=t[1],o=t[5],a=t[9],l=t[2],c=t[6],d=t[10],u=n+o+d;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-a)*e,this._y=(s-l)*e,this._z=(i-r)*e}else if(n>o&&n>d){const e=2*Math.sqrt(1+n-o-d);this._w=(c-a)/e,this._x=.25*e,this._y=(r+i)/e,this._z=(s+l)/e}else if(o>d){const e=2*Math.sqrt(1+o-n-d);this._w=(s-l)/e,this._x=(r+i)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+d-n-o);this._w=(i-r)/e,this._x=(s+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(se(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,i=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+i*o+r*l-s*a,this._y=r*c+i*a+s*o-n*l,this._z=s*c+i*l+n*a-r*o,this._w=i*c-n*o-r*a-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,i=this._w;let o=i*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=i,this._x=n,this._y=r,this._z=s,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*i+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),d=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=i*d+this._w*u,this._x=n*d+this._x*u,this._y=r*d+this._y*u,this._z=s*d+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,t=0,n=0){he.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(pe.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(pe.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,i=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*i,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*i,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*i,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,i=e.y,o=e.z,a=e.w,l=a*t+i*r-o*n,c=a*n+o*t-s*r,d=a*r+s*n-i*t,u=-s*t-i*n-o*r;return this.x=l*a+u*-s+c*-o-d*-i,this.y=c*a+u*-i+d*-s-l*-o,this.z=d*a+u*-o+l*-i-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,i=t.x,o=t.y,a=t.z;return this.x=r*a-s*o,this.y=s*i-n*a,this.z=n*o-r*i,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return me.copy(this).projectOnVector(e),this.sub(me)}reflect(e){return this.sub(me.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(se(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const me=new he,pe=new ue;class fe{constructor(){fe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,i,o,a,l,c,d,u,h,m,p,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=s,g[5]=i,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=m,g[11]=p,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new fe).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ge.setFromMatrixColumn(e,0).length(),s=1/ge.setFromMatrixColumn(e,1).length(),i=1/ge.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const e=i*c,n=i*d,r=o*c,s=o*d;t[0]=a*c,t[4]=-a*d,t[8]=l,t[1]=n+r*l,t[5]=e-s*l,t[9]=-o*a,t[2]=s-e*l,t[6]=r+n*l,t[10]=i*a}else if("YXZ"===e.order){const e=a*c,n=a*d,r=l*c,s=l*d;t[0]=e+s*o,t[4]=r*o-n,t[8]=i*l,t[1]=i*d,t[5]=i*c,t[9]=-o,t[2]=n*o-r,t[6]=s+e*o,t[10]=i*a}else if("ZXY"===e.order){const e=a*c,n=a*d,r=l*c,s=l*d;t[0]=e-s*o,t[4]=-i*d,t[8]=r+n*o,t[1]=n+r*o,t[5]=i*c,t[9]=s-e*o,t[2]=-i*l,t[6]=o,t[10]=i*a}else if("ZYX"===e.order){const e=i*c,n=i*d,r=o*c,s=o*d;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+s,t[1]=a*d,t[5]=s*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*a,t[10]=i*a}else if("YZX"===e.order){const e=i*a,n=i*l,r=o*a,s=o*l;t[0]=a*c,t[4]=s-e*d,t[8]=r*d+n,t[1]=d,t[5]=i*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*d+r,t[10]=e-s*d}else if("XZY"===e.order){const e=i*a,n=i*l,r=o*a,s=o*l;t[0]=a*c,t[4]=-d,t[8]=l*c,t[1]=e*d+s,t[5]=i*c,t[9]=n*d-r,t[2]=r*d-n,t[6]=o*c,t[10]=s*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ye,e,_e)}lookAt(e,t,n){const r=this.elements;return xe.subVectors(e,t),0===xe.lengthSq()&&(xe.z=1),xe.normalize(),be.crossVectors(n,xe),0===be.lengthSq()&&(1===Math.abs(n.z)?xe.x+=1e-4:xe.z+=1e-4,xe.normalize(),be.crossVectors(n,xe)),be.normalize(),we.crossVectors(xe,be),r[0]=be.x,r[4]=we.x,r[8]=xe.x,r[1]=be.y,r[5]=we.y,r[9]=xe.y,r[2]=be.z,r[6]=we.z,r[10]=xe.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,i=n[0],o=n[4],a=n[8],l=n[12],c=n[1],d=n[5],u=n[9],h=n[13],m=n[2],p=n[6],f=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],w=r[0],x=r[4],M=r[8],S=r[12],T=r[1],C=r[5],E=r[9],k=r[13],L=r[2],A=r[6],D=r[10],O=r[14],R=r[3],P=r[7],N=r[11],I=r[15];return s[0]=i*w+o*T+a*L+l*R,s[4]=i*x+o*C+a*A+l*P,s[8]=i*M+o*E+a*D+l*N,s[12]=i*S+o*k+a*O+l*I,s[1]=c*w+d*T+u*L+h*R,s[5]=c*x+d*C+u*A+h*P,s[9]=c*M+d*E+u*D+h*N,s[13]=c*S+d*k+u*O+h*I,s[2]=m*w+p*T+f*L+g*R,s[6]=m*x+p*C+f*A+g*P,s[10]=m*M+p*E+f*D+g*N,s[14]=m*S+p*k+f*O+g*I,s[3]=v*w+y*T+_*L+b*R,s[7]=v*x+y*C+_*A+b*P,s[11]=v*M+y*E+_*D+b*N,s[15]=v*S+y*k+_*O+b*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],i=e[1],o=e[5],a=e[9],l=e[13],c=e[2],d=e[6],u=e[10],h=e[14];return e[3]*(+s*a*d-r*l*d-s*o*u+n*l*u+r*o*h-n*a*h)+e[7]*(+t*a*h-t*l*u+s*i*u-r*i*h+r*l*c-s*a*c)+e[11]*(+t*l*d-t*o*h-s*i*d+n*i*h+s*o*c-n*l*c)+e[15]*(-r*o*c-t*a*d+t*o*u+r*i*d-n*i*u+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],m=e[12],p=e[13],f=e[14],g=e[15],v=d*f*l-p*u*l+p*a*h-o*f*h-d*a*g+o*u*g,y=m*u*l-c*f*l-m*a*h+i*f*h+c*a*g-i*u*g,_=c*p*l-m*d*l+m*o*h-i*p*h-c*o*g+i*d*g,b=m*d*a-c*p*a-m*o*u+i*p*u+c*o*f-i*d*f,w=t*v+n*y+r*_+s*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=v*x,e[1]=(p*u*s-d*f*s-p*r*h+n*f*h+d*r*g-n*u*g)*x,e[2]=(o*f*s-p*a*s+p*r*l-n*f*l-o*r*g+n*a*g)*x,e[3]=(d*a*s-o*u*s-d*r*l+n*u*l+o*r*h-n*a*h)*x,e[4]=y*x,e[5]=(c*f*s-m*u*s+m*r*h-t*f*h-c*r*g+t*u*g)*x,e[6]=(m*a*s-i*f*s-m*r*l+t*f*l+i*r*g-t*a*g)*x,e[7]=(i*u*s-c*a*s+c*r*l-t*u*l-i*r*h+t*a*h)*x,e[8]=_*x,e[9]=(m*d*s-c*p*s-m*n*h+t*p*h+c*n*g-t*d*g)*x,e[10]=(i*p*s-m*o*s+m*n*l-t*p*l-i*n*g+t*o*g)*x,e[11]=(c*o*s-i*d*s-c*n*l+t*d*l+i*n*h-t*o*h)*x,e[12]=b*x,e[13]=(c*p*r-m*d*r+m*n*u-t*p*u-c*n*f+t*d*f)*x,e[14]=(m*o*r-i*p*r-m*n*a+t*p*a+i*n*f-t*o*f)*x,e[15]=(i*d*r-c*o*r+c*n*a-t*d*a-i*n*u+t*o*u)*x,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,i=e.x,o=e.y,a=e.z,l=s*i,c=s*o;return this.set(l*i+n,l*o-r*a,l*a+r*o,0,l*o+r*a,c*o+n,c*a-r*i,0,l*a-r*o,c*a+r*i,s*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,i){return this.set(1,n,s,0,e,1,i,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,i=t._y,o=t._z,a=t._w,l=s+s,c=i+i,d=o+o,u=s*l,h=s*c,m=s*d,p=i*c,f=i*d,g=o*d,v=a*l,y=a*c,_=a*d,b=n.x,w=n.y,x=n.z;return r[0]=(1-(p+g))*b,r[1]=(h+_)*b,r[2]=(m-y)*b,r[3]=0,r[4]=(h-_)*w,r[5]=(1-(u+g))*w,r[6]=(f+v)*w,r[7]=0,r[8]=(m+y)*x,r[9]=(f-v)*x,r[10]=(1-(u+p))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=ge.set(r[0],r[1],r[2]).length();const i=ge.set(r[4],r[5],r[6]).length(),o=ge.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ve.copy(this);const a=1/s,l=1/i,c=1/o;return ve.elements[0]*=a,ve.elements[1]*=a,ve.elements[2]*=a,ve.elements[4]*=l,ve.elements[5]*=l,ve.elements[6]*=l,ve.elements[8]*=c,ve.elements[9]*=c,ve.elements[10]*=c,t.setFromRotationMatrix(ve),n.x=s,n.y=i,n.z=o,this}makePerspective(e,t,n,r,s,i){const o=this.elements,a=2*s/(t-e),l=2*s/(n-r),c=(t+e)/(t-e),d=(n+r)/(n-r),u=-(i+s)/(i-s),h=-2*i*s/(i-s);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,s,i){const o=this.elements,a=1/(t-e),l=1/(n-r),c=1/(i-s),d=(t+e)*a,u=(n+r)*l,h=(i+s)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ge=new he,ve=new fe,ye=new he(0,0,0),_e=new he(1,1,1),be=new he,we=new he,xe=new he;class Me{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,s=-1/0,i=-1/0,o=-1/0;for(let a=0,l=e.length;a<l;a+=3){const l=e[a],c=e[a+1],d=e[a+2];l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>s&&(s=l),c>i&&(i=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(s,i,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,s=-1/0,i=-1/0,o=-1/0;for(let a=0,l=e.count;a<l;a++){const l=e.getX(a),c=e.getY(a),d=e.getZ(a);l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>s&&(s=l),c>i&&(i=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(s,i,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Te.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)Te.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(Te)}else null===n.boundingBox&&n.computeBoundingBox(),Ce.copy(n.boundingBox),Ce.applyMatrix4(e.matrixWorld),this.union(Ce);const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Te),Te.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Re),Pe.subVectors(this.max,Re),Ee.subVectors(e.a,Re),ke.subVectors(e.b,Re),Le.subVectors(e.c,Re),Ae.subVectors(ke,Ee),De.subVectors(Le,ke),Oe.subVectors(Ee,Le);let t=[0,-Ae.z,Ae.y,0,-De.z,De.y,0,-Oe.z,Oe.y,Ae.z,0,-Ae.x,De.z,0,-De.x,Oe.z,0,-Oe.x,-Ae.y,Ae.x,0,-De.y,De.x,0,-Oe.y,Oe.x,0];return!!ze(t,Ee,ke,Le,Pe)&&(t=[1,0,0,0,1,0,0,0,1],!!ze(t,Ee,ke,Le,Pe)&&(Ne.crossVectors(Ae,De),t=[Ne.x,Ne.y,Ne.z],ze(t,Ee,ke,Le,Pe)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Te.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Te).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Se[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Se[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Se[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Se[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Se[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Se[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Se[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Se[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Se)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Se=[new he,new he,new he,new he,new he,new he,new he,new he],Te=new he,Ce=new Me,Ee=new he,ke=new he,Le=new he,Ae=new he,De=new he,Oe=new he,Re=new he,Pe=new he,Ne=new he,Ie=new he;function ze(e,t,n,r,s){for(let i=0,o=e.length-3;i<=o;i+=3){Ie.fromArray(e,i);const o=s.x*Math.abs(Ie.x)+s.y*Math.abs(Ie.y)+s.z*Math.abs(Ie.z),a=t.dot(Ie),l=n.dot(Ie),c=r.dot(Ie);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>o)return!1}return!0}const Be=new Me,Fe=new he,He=new he;class je{constructor(e=new he,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Be.setFromPoints(e).getCenter(n);let r=0;for(let t=0,s=e.length;t<s;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Fe.subVectors(e,this.center);const t=Fe.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Fe,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(He.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Fe.copy(e.center).add(He)),this.expandByPoint(Fe.copy(e.center).sub(He))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ue=new he,Ye=new he,Ve=new he,$e=new he,We=new he,Ge=new he,qe=new he;class Xe{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ue)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ue.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ue.copy(this.direction).multiplyScalar(t).add(this.origin),Ue.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Ye.copy(e).add(t).multiplyScalar(.5),Ve.copy(t).sub(e).normalize(),$e.copy(this.origin).sub(Ye);const s=.5*e.distanceTo(t),i=-this.direction.dot(Ve),o=$e.dot(this.direction),a=-$e.dot(Ve),l=$e.lengthSq(),c=Math.abs(1-i*i);let d,u,h,m;if(c>0)if(d=i*a-o,u=i*o-a,m=s*c,d>=0)if(u>=-m)if(u<=m){const e=1/c;d*=e,u*=e,h=d*(d+i*u+2*o)+u*(i*d+u+2*a)+l}else u=s,d=Math.max(0,-(i*u+o)),h=-d*d+u*(u+2*a)+l;else u=-s,d=Math.max(0,-(i*u+o)),h=-d*d+u*(u+2*a)+l;else u<=-m?(d=Math.max(0,-(-i*s+o)),u=d>0?-s:Math.min(Math.max(-s,-a),s),h=-d*d+u*(u+2*a)+l):u<=m?(d=0,u=Math.min(Math.max(-s,-a),s),h=u*(u+2*a)+l):(d=Math.max(0,-(i*s+o)),u=d>0?s:Math.min(Math.max(-s,-a),s),h=-d*d+u*(u+2*a)+l);else u=i>0?-s:s,d=Math.max(0,-(i*u+o)),h=-d*d+u*(u+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Ve).multiplyScalar(u).add(Ye),h}intersectSphere(e,t){Ue.subVectors(e.center,this.origin);const n=Ue.dot(this.direction),r=Ue.dot(Ue)-n*n,s=e.radius*e.radius;if(r>s)return null;const i=Math.sqrt(s-r),o=n-i,a=n+i;return o<0&&a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,i,o,a;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),c>=0?(s=(e.min.y-u.y)*c,i=(e.max.y-u.y)*c):(s=(e.max.y-u.y)*c,i=(e.min.y-u.y)*c),n>i||s>r?null:((s>n||isNaN(n))&&(n=s),(i<r||isNaN(r))&&(r=i),d>=0?(o=(e.min.z-u.z)*d,a=(e.max.z-u.z)*d):(o=(e.max.z-u.z)*d,a=(e.min.z-u.z)*d),n>a||o>r?null:((o>n||n!=n)&&(n=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Ue)}intersectTriangle(e,t,n,r,s){We.subVectors(t,e),Ge.subVectors(n,e),qe.crossVectors(We,Ge);let i,o=this.direction.dot(qe);if(o>0){if(r)return null;i=1}else{if(!(o<0))return null;i=-1,o=-o}$e.subVectors(this.origin,e);const a=i*this.direction.dot(Ge.crossVectors($e,Ge));if(a<0)return null;const l=i*this.direction.dot(We.cross($e));if(l<0)return null;if(a+l>o)return null;const c=-i*$e.dot(qe);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ke{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Je=new fe,Ze=new ue;class Qe{constructor(e=0,t=0,n=0,r=Qe.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],i=r[4],o=r[8],a=r[1],l=r[5],c=r[9],d=r[2],u=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(se(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-i,s)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-se(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(se(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-i,l)):(this._y=0,this._z=Math.atan2(a,s));break;case"ZYX":this._y=Math.asin(-se(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,s)):(this._x=0,this._z=Math.atan2(-i,l));break;case"YZX":this._z=Math.asin(se(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-se(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Je.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Je,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ze.setFromEuler(this),this.setFromQuaternion(Ze,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Qe.DefaultOrder="XYZ",Qe.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class et{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}class tt{constructor(){tt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,i,o,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=s,c[5]=a,c[6]=n,c[7]=i,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,i=n[0],o=n[3],a=n[6],l=n[1],c=n[4],d=n[7],u=n[2],h=n[5],m=n[8],p=r[0],f=r[3],g=r[6],v=r[1],y=r[4],_=r[7],b=r[2],w=r[5],x=r[8];return s[0]=i*p+o*v+a*b,s[3]=i*f+o*y+a*w,s[6]=i*g+o*_+a*x,s[1]=l*p+c*v+d*b,s[4]=l*f+c*y+d*w,s[7]=l*g+c*_+d*x,s[2]=u*p+h*v+m*b,s[5]=u*f+h*y+m*w,s[8]=u*g+h*_+m*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*i*c-t*o*l-n*s*c+n*o*a+r*s*l-r*i*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],o=e[5],a=e[6],l=e[7],c=e[8],d=c*i-o*l,u=o*a-c*s,h=l*s-i*a,m=t*d+n*u+r*h;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const p=1/m;return e[0]=d*p,e[1]=(r*l-c*n)*p,e[2]=(o*n-r*i)*p,e[3]=u*p,e[4]=(c*t-r*a)*p,e[5]=(r*s-o*t)*p,e[6]=h*p,e[7]=(n*a-l*t)*p,e[8]=(i*t-n*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,i,o){const a=Math.cos(s),l=Math.sin(s);return this.set(n*a,n*l,-n*(a*i+l*o)+i+e,-r*l,r*a,-r*(-l*i+a*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,s=r[0],i=r[3],o=r[6],a=r[1],l=r[4],c=r[7];return r[0]=t*s+n*a,r[3]=t*i+n*l,r[6]=t*o+n*c,r[1]=-n*s+t*a,r[4]=-n*i+t*l,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let nt=0;const rt=new he,st=new ue,it=new fe,ot=new he,at=new he,lt=new he,ct=new ue,dt=new he(1,0,0),ut=new he(0,1,0),ht=new he(0,0,1),mt={type:"added"},pt={type:"removed"};class ft extends Ke{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nt++}),this.uuid=re(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ft.DefaultUp.clone();const e=new he,t=new Qe,n=new ue,r=new he(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new fe},normalMatrix:{value:new tt}}),this.matrix=new fe,this.matrixWorld=new fe,this.matrixAutoUpdate=ft.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ft.DefaultMatrixWorldAutoUpdate,this.layers=new et,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return st.setFromAxisAngle(e,t),this.quaternion.multiply(st),this}rotateOnWorldAxis(e,t){return st.setFromAxisAngle(e,t),this.quaternion.premultiply(st),this}rotateX(e){return this.rotateOnAxis(dt,e)}rotateY(e){return this.rotateOnAxis(ut,e)}rotateZ(e){return this.rotateOnAxis(ht,e)}translateOnAxis(e,t){return rt.copy(e).applyQuaternion(this.quaternion),this.position.add(rt.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(dt,e)}translateY(e){return this.translateOnAxis(ut,e)}translateZ(e){return this.translateOnAxis(ht,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(it.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ot.copy(e):ot.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),at.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?it.lookAt(at,ot,this.up):it.lookAt(ot,at,this.up),this.quaternion.setFromRotationMatrix(it),r&&(it.extractRotation(r.matrixWorld),st.setFromRotationMatrix(it),this.quaternion.premultiply(st.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(mt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(pt)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(pt)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),it.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),it.multiply(e.parent.matrixWorld)),e.applyMatrix4(it),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(at,e,lt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(at,ct,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function s(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];s(e.shapes,r)}else s(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(s(e.materials,this.material[n]));r.material=t}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(s(e.animations,n))}}if(t){const t=i(e.geometries),r=i(e.materials),s=i(e.textures),o=i(e.images),a=i(e.shapes),l=i(e.skeletons),c=i(e.animations),d=i(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),s.length>0&&(n.textures=s),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),d.length>0&&(n.nodes=d)}return n.object=r,n;function i(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}ft.DefaultUp=new he(0,1,0),ft.DefaultMatrixAutoUpdate=!0,ft.DefaultMatrixWorldAutoUpdate=!0;const gt=100,vt=301,yt=302,_t=303,bt=306,wt=1e3,xt=1001,Mt=1002,St=1003,Tt=1004,Ct=1005,Et=1006,kt=1008,Lt=1009,At=1014,Dt=1015,Ot=1016,Rt=1020,Pt=1023,Nt=1026,It=1027,zt=33776,Bt=33777,Ft=33778,Ht=33779,jt=2300,Ut=2301,Yt=2302,Vt=3e3,$t=3001,Wt="srgb",Gt="srgb-linear",qt=7680,Xt=35044,Kt="300 es",Jt=1035;let Zt=0;class Qt extends Ke{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zt++}),this.uuid=re(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=gt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qt,this.stencilZFail=qt,this.stencilZPass=qt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),s=r(e.images);t.length>0&&(n.textures=t),s.length>0&&(n.images=s)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}function en(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function tn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const nn={[Wt]:{[Gt]:en},[Gt]:{[Wt]:tn}},rn={legacyMode:!0,get workingColorSpace(){return Gt},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(nn[t]&&void 0!==nn[t][n]){const r=nn[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},sn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},on={r:0,g:0,b:0},an={h:0,s:0,l:0},ln={h:0,s:0,l:0};function cn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function dn(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class un{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t="srgb"){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,rn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r="srgb-linear"){return this.r=e,this.g=t,this.b=n,rn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r="srgb-linear"){if(e=ie(e,1),t=se(t,0,1),n=se(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,s=2*n-r;this.r=cn(s,r,e+1/3),this.g=cn(s,r,e),this.b=cn(s,r,e-1/3)}return rn.toWorkingColorSpace(this,r),this}setStyle(e,t="srgb"){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const s=r[1],i=r[2];switch(s){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,rn.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,rn.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const r=parseFloat(e[1])/360,s=parseFloat(e[2])/100,i=parseFloat(e[3])/100;return n(e[4]),this.setHSL(r,s,i,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,rn.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,rn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t="srgb"){const n=sn[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=en(e.r),this.g=en(e.g),this.b=en(e.b),this}copyLinearToSRGB(e){return this.r=tn(e.r),this.g=tn(e.g),this.b=tn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e="srgb"){return rn.fromWorkingColorSpace(dn(this,on),e),se(255*on.r,0,255)<<16^se(255*on.g,0,255)<<8^se(255*on.b,0,255)<<0}getHexString(e="srgb"){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t="srgb-linear"){rn.fromWorkingColorSpace(dn(this,on),t);const n=on.r,r=on.g,s=on.b,i=Math.max(n,r,s),o=Math.min(n,r,s);let a,l;const c=(o+i)/2;if(o===i)a=0,l=0;else{const e=i-o;switch(l=c<=.5?e/(i+o):e/(2-i-o),i){case n:a=(r-s)/e+(r<s?6:0);break;case r:a=(s-n)/e+2;break;case s:a=(n-r)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t="srgb-linear"){return rn.fromWorkingColorSpace(dn(this,on),t),e.r=on.r,e.g=on.g,e.b=on.b,e}getStyle(e="srgb"){return rn.fromWorkingColorSpace(dn(this,on),e),e!==Wt?`color(${e} ${on.r} ${on.g} ${on.b})`:`rgb(${255*on.r|0},${255*on.g|0},${255*on.b|0})`}offsetHSL(e,t,n){return this.getHSL(an),an.h+=e,an.s+=t,an.l+=n,this.setHSL(an.h,an.s,an.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(an),e.getHSL(ln);const n=oe(an.h,ln.h,t),r=oe(an.s,ln.s,t),s=oe(an.l,ln.l,t);return this.setHSL(n,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}un.NAMES=sn;class hn extends Qt{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new un(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}class mn{constructor(e=0,t=0){mn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,i=this.y-e.y;return this.x=s*n-i*r+e.x,this.y=s*r+i*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}const pn=new he,fn=new mn;class gn{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Xt,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)fn.fromBufferAttribute(this,t),fn.applyMatrix3(e),this.setXY(t,fn.x,fn.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)pn.fromBufferAttribute(this,t),pn.applyMatrix3(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)pn.fromBufferAttribute(this,t),pn.applyMatrix4(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)pn.fromBufferAttribute(this,t),pn.applyNormalMatrix(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)pn.fromBufferAttribute(this,t),pn.transformDirection(e),this.setXYZ(t,pn.x,pn.y,pn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ce(t,this.array)),t}setX(e,t){return this.normalized&&(t=de(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ce(t,this.array)),t}setY(e,t){return this.normalized&&(t=de(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ce(t,this.array)),t}setZ(e,t){return this.normalized&&(t=de(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ce(t,this.array)),t}setW(e,t){return this.normalized&&(t=de(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=de(t,this.array),n=de(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=de(t,this.array),n=de(n,this.array),r=de(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=de(t,this.array),n=de(n,this.array),r=de(r,this.array),s=de(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Xt&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class vn extends gn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class yn extends gn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class _n extends gn{constructor(e,t,n){super(new Float32Array(e),t,n)}}function bn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function wn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}let xn=0;const Mn=new fe,Sn=new ft,Tn=new he,Cn=new Me,En=new Me,kn=new he;class Ln extends Ke{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xn++}),this.uuid=re(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(bn(e)?yn:vn)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new tt).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Mn.makeRotationFromQuaternion(e),this.applyMatrix4(Mn),this}rotateX(e){return Mn.makeRotationX(e),this.applyMatrix4(Mn),this}rotateY(e){return Mn.makeRotationY(e),this.applyMatrix4(Mn),this}rotateZ(e){return Mn.makeRotationZ(e),this.applyMatrix4(Mn),this}translate(e,t,n){return Mn.makeTranslation(e,t,n),this.applyMatrix4(Mn),this}scale(e,t,n){return Mn.makeScale(e,t,n),this.applyMatrix4(Mn),this}lookAt(e){return Sn.lookAt(e),Sn.updateMatrix(),this.applyMatrix4(Sn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tn).negate(),this.translate(Tn.x,Tn.y,Tn.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new _n(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Me);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Cn.setFromBufferAttribute(n),this.morphTargetsRelative?(kn.addVectors(this.boundingBox.min,Cn.min),this.boundingBox.expandByPoint(kn),kn.addVectors(this.boundingBox.max,Cn.max),this.boundingBox.expandByPoint(kn)):(this.boundingBox.expandByPoint(Cn.min),this.boundingBox.expandByPoint(Cn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new je);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new he,1/0);if(e){const n=this.boundingSphere.center;if(Cn.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];En.setFromBufferAttribute(n),this.morphTargetsRelative?(kn.addVectors(Cn.min,En.min),Cn.expandByPoint(kn),kn.addVectors(Cn.max,En.max),Cn.expandByPoint(kn)):(Cn.expandByPoint(En.min),Cn.expandByPoint(En.max))}Cn.getCenter(n);let r=0;for(let t=0,s=e.count;t<s;t++)kn.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(kn));if(t)for(let s=0,i=t.length;s<i;s++){const i=t[s],o=this.morphTargetsRelative;for(let t=0,s=i.count;t<s;t++)kn.fromBufferAttribute(i,t),o&&(Tn.fromBufferAttribute(e,t),kn.add(Tn)),r=Math.max(r,n.distanceToSquared(kn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,i=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new gn(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<o;e++)l[e]=new he,c[e]=new he;const d=new he,u=new he,h=new he,m=new mn,p=new mn,f=new mn,g=new he,v=new he;function y(e,t,n){d.fromArray(r,3*e),u.fromArray(r,3*t),h.fromArray(r,3*n),m.fromArray(i,2*e),p.fromArray(i,2*t),f.fromArray(i,2*n),u.sub(d),h.sub(d),p.sub(m),f.sub(m);const s=1/(p.x*f.y-f.x*p.y);isFinite(s)&&(g.copy(u).multiplyScalar(f.y).addScaledVector(h,-p.y).multiplyScalar(s),v.copy(h).multiplyScalar(p.x).addScaledVector(u,-f.x).multiplyScalar(s),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,s=r+t.count;e<s;e+=3)y(n[e+0],n[e+1],n[e+2])}const b=new he,w=new he,x=new he,M=new he;function S(e){x.fromArray(s,3*e),M.copy(x);const t=l[e];b.copy(t),b.sub(x.multiplyScalar(x.dot(t))).normalize(),w.crossVectors(M,t);const n=w.dot(c[e])<0?-1:1;a[4*e]=b.x,a[4*e+1]=b.y,a[4*e+2]=b.z,a[4*e+3]=n}for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,s=r+t.count;e<s;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new gn(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new he,s=new he,i=new he,o=new he,a=new he,l=new he,c=new he,d=new he;if(e)for(let u=0,h=e.count;u<h;u+=3){const h=e.getX(u+0),m=e.getX(u+1),p=e.getX(u+2);r.fromBufferAttribute(t,h),s.fromBufferAttribute(t,m),i.fromBufferAttribute(t,p),c.subVectors(i,s),d.subVectors(r,s),c.cross(d),o.fromBufferAttribute(n,h),a.fromBufferAttribute(n,m),l.fromBufferAttribute(n,p),o.add(c),a.add(c),l.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(m,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),s.fromBufferAttribute(t,e+1),i.fromBufferAttribute(t,e+2),c.subVectors(i,s),d.subVectors(r,s),c.cross(d),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)kn.fromBufferAttribute(e,t),kn.normalize(),e.setXYZ(t,kn.x,kn.y,kn.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,s=e.normalized,i=new n.constructor(t.length*r);let o=0,a=0;for(let s=0,l=t.length;s<l;s++){o=e.isInterleavedBufferAttribute?t[s]*e.data.stride+e.offset:t[s]*r;for(let e=0;e<r;e++)i[a++]=n[o++]}return new gn(i,r,s)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ln,n=this.index.array,r=this.attributes;for(const s in r){const i=e(r[s],n);t.setAttribute(s,i)}const s=this.morphAttributes;for(const r in s){const i=[],o=s[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);i.push(r)}t.morphAttributes[r]=i}t.morphTargetsRelative=this.morphTargetsRelative;const i=this.groups;for(let e=0,n=i.length;e<n;e++){const n=i[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let s=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],i=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];i.push(r.toJSON(e.data))}i.length>0&&(r[t]=i,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const i=this.groups;i.length>0&&(e.data.groups=JSON.parse(JSON.stringify(i)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const s=e.morphAttributes;for(const e in s){const n=[],r=s[e];for(let e=0,s=r.length;e<s;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const i=e.groups;for(let e=0,t=i.length;e<t;e++){const t=i[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const An=new he,Dn=new he,On=new fe,Rn=new Xe,Pn=new je;class Nn extends ft{constructor(e=new Ln,t=new hn){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)An.fromBufferAttribute(t,e-1),Dn.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=An.distanceTo(Dn);e.setAttribute("lineDistance",new _n(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Pn.copy(n.boundingSphere),Pn.applyMatrix4(r),Pn.radius+=s,!1===e.ray.intersectsSphere(Pn))return;On.copy(r).invert(),Rn.copy(e.ray).applyMatrix4(On);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new he,c=new he,d=new he,u=new he,h=this.isLineSegments?2:1,m=n.index,p=n.attributes.position;if(null!==m){for(let n=Math.max(0,i.start),r=Math.min(m.count,i.start+i.count)-1;n<r;n+=h){const r=m.getX(n),s=m.getX(n+1);l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,s);if(Rn.distanceSqToSegment(l,c,u,d)>a)continue;u.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(u);i<e.near||i>e.far||t.push({distance:i,point:d.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,i.start),r=Math.min(p.count,i.start+i.count)-1;n<r;n+=h){l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1);if(Rn.distanceSqToSegment(l,c,u,d)>a)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:d.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const In=new he,zn=new he;class Bn extends Nn{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)In.fromBufferAttribute(t,e),zn.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+In.distanceTo(zn);e.setAttribute("lineDistance",new _n(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}const Fn=new he,Hn=new fe,jn=new Qe;new ue;function Un(e,t,n){const r=n||new ue;return Fn.fromArray(e).multiplyScalar(te),jn.setFromVector3(Fn,t),r.setFromEuler(jn),r}function Yn(e,t,n){const r=n||[0,0,0];return jn.setFromQuaternion(e,t),Fn.setFromEuler(jn),Fn.multiplyScalar(ne).toArray(r),r}function Vn(e){const t=new Map,n=new Map,r=new Map;e.traverse((e=>{const s=e;if(s.isMesh){const e=s.geometry;e&&t.set(e.uuid,e);const i=s.material;if(i){n.set(i.uuid,i);for(let e in i){const t=i[e];t&&t.isTexture&&r.set(t.uuid,t)}}}}));for(let e of r)e[1].dispose();for(let e of n)e[1].dispose();for(let e of t)e[1].dispose()}function $n(e,t,n){n||(n=e);const r=e.geometry;if(r&&e.visible){let s=e;for(Hn.identity();s&&s!==n;)Hn.premultiply(s.matrix),s=s.parent;if(r.isGeometry){const e=r.vertices;for(let n=0,r=e.length;n<r;++n)Fn.copy(e[n]).applyMatrix4(Hn),t.expandByPoint(Fn)}else if(r.isBufferGeometry){const e=r.attributes.position;if(void 0!==e)for(let n=0,r=e.count;n<r;++n)Fn.fromBufferAttribute(e,n).applyMatrix4(Hn),t.expandByPoint(Fn)}}const s=e.children;for(let e=0,r=s.length;e<r;++e)$n(s[e],t,n)}const Wn=new he,Gn=new fe;class qn extends Bn{constructor(e,t){t=Object.assign({},qn.defaultProps,t);const n=new Me;n.makeEmpty(),$n(e,n);const r=t.length,s=[n.min.x,n.min.y,n.min.z],i=[n.max.x,n.max.y,n.max.z],o=[(i[0]-s[0])*r,(i[1]-s[1])*r,(i[2]-s[2])*r];let a;a=isFinite(o[0])&&isFinite(o[1])&&isFinite(o[2])?[s[0],s[1],s[2],s[0]+o[0],s[1],s[2],s[0],s[1],s[2],s[0],s[1]+o[1],s[2],s[0],s[1],s[2],s[0],s[1],s[2]+o[2],i[0],s[1],s[2],i[0]-o[0],s[1],s[2],i[0],s[1],s[2],i[0],s[1]+o[1],s[2],i[0],s[1],s[2],i[0],s[1],s[2]+o[2],s[0],i[1],s[2],s[0]+o[0],i[1],s[2],s[0],i[1],s[2],s[0],i[1]-o[1],s[2],s[0],i[1],s[2],s[0],i[1],s[2]+o[2],s[0],s[1],i[2],s[0]+o[0],s[1],i[2],s[0],s[1],i[2],s[0],s[1]+o[1],i[2],s[0],s[1],i[2],s[0],s[1],i[2]-o[2],s[0],i[1],i[2],s[0]+o[0],i[1],i[2],s[0],i[1],i[2],s[0],i[1]-o[1],i[2],s[0],i[1],i[2],s[0],i[1],i[2]-o[2],i[0],s[1],i[2],i[0]-o[0],s[1],i[2],i[0],s[1],i[2],i[0],s[1]+o[1],i[2],i[0],s[1],i[2],i[0],s[1],i[2]-o[2],i[0],i[1],s[2],i[0]-o[0],i[1],s[2],i[0],i[1],s[2],i[0],i[1]-o[1],s[2],i[0],i[1],s[2],i[0],i[1],s[2]+o[2],i[0],i[1],i[2],i[0]-o[0],i[1],i[2],i[0],i[1],i[2],i[0],i[1]-o[1],i[2],i[0],i[1],i[2],i[0],i[1],i[2]-o[2]]:[-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1];const l=new Ln;l.setAttribute("position",new _n(a,3));super(l,new hn({color:t.color,depthTest:!1})),this.renderOrder=1,this.onBeforeRender=()=>{e.updateMatrixWorld(!1),this.matrixWorld.copy(e.matrixWorld)}}dispose(){this.parent&&this.parent.remove(this),this.geometry.dispose()}static expandBoundingBox(e,t,n){const r=e.geometry;if(void 0!==r){let s=e;for(Gn.identity();s&&s!==t;)Gn.premultiply(s.matrix),s=s.parent;if(r.isGeometry){const e=r.vertices;for(let t=0,r=e.length;t<r;++t)Wn.copy(e[t]).applyMatrix4(Gn),n.expandByPoint(Wn)}else if(r.isBufferGeometry){const e=r.attributes.position;if(void 0!==e)for(let t=0,r=e.count;t<r;++t)Wn.fromBufferAttribute(e,t).applyMatrix4(Gn),n.expandByPoint(Wn)}}const s=e.children;for(let e=0,r=s.length;e<r;++e)qn.expandBoundingBox(s[e],t,n)}}let Xn;qn.defaultProps={color:new un("#ffd633"),length:.25};class Kn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Xn&&(Xn=wn("canvas")),Xn.width=e.width,Xn.height=e.height;const n=Xn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Xn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=wn("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let e=0;e<s.length;e++)s[e]=255*en(s[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*en(t[e]/255)):t[e]=en(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Jn{constructor(e=null){this.isSource=!0,this.uuid=re(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Zn(r[t].image)):e.push(Zn(r[t]))}else e=Zn(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Zn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Kn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Qn=0;class er extends Ke{constructor(e=er.DEFAULT_IMAGE,t=er.DEFAULT_MAPPING,n=1001,r=1001,s=1006,i=1008,o=1023,a=1009,l=1,c=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Qn++}),this.uuid=re(),this.name="",this.source=new Jn(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=i,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new mn(0,0),this.repeat=new mn(1,1),this.center=new mn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wt:e.x=e.x-Math.floor(e.x);break;case xt:e.x=e.x<0?0:1;break;case Mt:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case wt:e.y=e.y-Math.floor(e.y);break;case xt:e.y=e.y<0?0:1;break;case Mt:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}er.DEFAULT_IMAGE=null,er.DEFAULT_MAPPING=300;class tr{constructor(e=0,t=0,n=0,r=1){tr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*s,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*s,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*s,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const i=.01,o=.1,a=e.elements,l=a[0],c=a[4],d=a[8],u=a[1],h=a[5],m=a[9],p=a[2],f=a[6],g=a[10];if(Math.abs(c-u)<i&&Math.abs(d-p)<i&&Math.abs(m-f)<i){if(Math.abs(c+u)<o&&Math.abs(d+p)<o&&Math.abs(m+f)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(h+1)/2,v=(g+1)/2,y=(c+u)/4,_=(d+p)/4,b=(m+f)/4;return e>a&&e>v?e<i?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(e),r=y/n,s=_/n):a>v?a<i?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(a),n=y/r,s=b/r):v<i?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(v),n=_/s,r=b/s),this.set(n,r,s,t),this}let v=Math.sqrt((f-m)*(f-m)+(d-p)*(d-p)+(u-c)*(u-c));return Math.abs(v)<.001&&(v=1),this.x=(f-m)/v,this.y=(d-p)/v,this.z=(u-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nr extends Ke{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new tr(0,0,e,t),this.scissorTest=!1,this.viewport=new tr(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new er(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Et,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Jn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}function rr(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const s=e[n][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?t[n][r]=s.clone():Array.isArray(s)?t[n][r]=s.slice():t[n][r]=s}}return t}function sr(e){const t={};for(let n=0;n<e.length;n++){const r=rr(e[n]);for(const e in r)t[e]=r[e]}return t}const ir={clone:rr,merge:sr};class or extends Qt{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",this.fragmentShader="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rr(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ar extends or{constructor(){super(...arguments),this.isIndexShader=!0,this.uniformsNeedUpdate=!1,this.lights=!1,this.uniforms={index:{value:[0,0,0]}},this.vertexShader=["void main() {","  #include <begin_vertex>","  #include <project_vertex>","}"].join("\n"),this.fragmentShader=["uniform vec3 index;","void main() {","  gl_FragColor = vec4(index, 1.0);","}"].join("\n")}static indexFromPixel(e){return e[0]+e[1]<<8+e[2]<<16}static zoneFromPixel(e){return e[3]}setIndex(e){const t=e>>16,n=(e>>8)-(t<<8),r=e-(t<<16)-(n<<8),s=this.uniforms.index.value;s[0]=r/255,s[1]=n/255,s[2]=t/255,this.uniformsNeedUpdate=!0}}class lr extends or{constructor(){super(...arguments),this.isPositionShader=!0,this.uniforms={index:{value:0},range:{value:[-1,1]}},this.vertexShader=["varying vec3 vLocalPosition;","void main() {","  #include <begin_vertex>","  #include <project_vertex>","  vLocalPosition = vec3(position);","}"].join("\n"),this.fragmentShader=["uniform float index;","uniform vec2 range;","varying vec3 vLocalPosition;","vec4 toVec4(float v) {","  float vn = (v - range.x) / (range.y - range.x);","  float b0 = floor(vn * 255.0) / 255.0; vn = (vn - b0) * 256.0;","  float b1 = floor(vn * 255.0) / 255.0; vn = (vn - b1) * 256.0;","  float b2 = floor(vn * 255.0) / 255.0; vn = (vn - b2) * 256.0;","  float b3 = floor(vn * 255.0) / 255.0;","  return vec4(clamp(b0, 0.0, 1.0), clamp(b1, 0.0, 1.0), clamp(b2, 0.0, 1.0), clamp(b3, 0.0, 1.0));","}","void main() {","  gl_FragColor = (index == 0.0 ? toVec4(vLocalPosition.x)","    : (index == 1.0 ? toVec4(vLocalPosition.y) : toVec4(vLocalPosition.z)));","}"].join("\n")}}class cr extends or{constructor(){super(...arguments),this.isNormalShader=!0,this.uniforms={index:{value:0}},this.vertexShader=["varying vec3 vLocalNormal;","void main() {","  #include <beginnormal_vertex>","  #include <begin_vertex>","  #include <project_vertex>","  vLocalNormal = vec3(normal);","}"].join("\n"),this.fragmentShader=["uniform vec3 index;","varying vec3 vLocalNormal;","void main() {","  vec3 normal = normalize(vLocalNormal);","  gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);","}"].join("\n")}}const dr=new he,ur=new un,hr=1e4,mr=new Me(new he(-1e4,-1e4,-1e4),new he(hr,hr,hr));class pr{constructor(e){this.renderer=e,this.pickTextures=[];for(let e=0;e<3;++e)this.pickTextures[e]=new nr(1,1,{stencilBuffer:!1});this.pickBuffer=new Uint8Array(4),this.indexShader=new ar,this.positionShader=new lr,this.normalShader=new cr}static add(e,t){const n=e=>{e.material&&(e.onBeforeRender=function(t,n,r,s,i){i.isIndexShader&&i.setIndex(e.id)})};t?e.traverse((e=>n(e))):n(e)}static remove(e,t){const n=e=>{e.material&&(e.onBeforeRender=null)};t?e.traverse((e=>n(e))):n(e)}pickObject(e,t,n){const r=this.pickIndex(e,t,n);if(r>0)return e.getObjectById(r)}pickIndex(e,t,n){const r=n.viewport;(t=r.updateCamera(t)).layers.disable(1);const s=e.overrideMaterial;e.overrideMaterial=this.indexShader;const i=this.renderer,o=this.pickTextures[0];i.getClearColor(ur),r.applyPickViewport(o,n),i.setRenderTarget(o),i.setClearColor(0);const a=i.xr.enabled;i.xr.enabled=!1,i.clear(),i.render(e,t),i.xr.enabled=a,i.setRenderTarget(null),i.setClearColor(ur),e.overrideMaterial=s,t.layers.enable(1);const l=this.pickBuffer;return i.readRenderTargetPixels(o,0,0,1,1,l),l[0]+256*l[1]+65536*l[2]}pickPosition(e,t,n,r,s){r=r||mr,s=s||new he;const i=n.viewport;(t=i.updateCamera(t)).layers.disable(1);const o=e.overrideMaterial,a=e.overrideMaterial=this.positionShader,l=this.renderer,c=this.pickTextures;l.getClearColor(ur),l.setClearColor(0);for(let s=0;s<3;++s)a.uniforms.index.value=s,a.uniforms.range.value[0]=r.min.getComponent(s),a.uniforms.range.value[1]=r.max.getComponent(s),i.applyPickViewport(c[s],n),l.setRenderTarget(c[s]),l.clear(),l.render(e,t);l.setRenderTarget(null),l.setClearColor(ur),e.overrideMaterial=o,t.layers.enable(1);const d=this.pickBuffer;for(let e=0;e<3;++e)l.readRenderTargetPixels(c[e],0,0,1,1,d),s.setComponent(e,2.337437050015319e-10*d[3]+5.983838848039216e-8*d[2]+1531862745098039e-20*d[1]+.003921568627451*d[0]);return r.getSize(dr),s.multiply(dr).add(r.min)}pickNormal(e,t,n,r){r=r||new he;const s=n.viewport;(t=s.updateCamera(t)).layers.disable(1);const i=e.overrideMaterial;e.overrideMaterial=this.normalShader;const o=this.renderer,a=this.pickTextures[0];o.getClearColor(ur),s.applyPickViewport(a,n),o.setRenderTarget(a),o.setClearColor(0),o.clear(),o.render(e,t),o.setRenderTarget(null),o.setClearColor(ur),e.overrideMaterial=i,t.layers.enable(1);const l=this.pickBuffer;return o.readRenderTargetPixels(a,0,0,1,1,l),r.set(l[0]/255*2-1,l[1]/255*2-1,l[2]/255*2-1).normalize()}}class fr extends ft{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class gr extends W{constructor(e,t){super(e,t),this.outs=this.addOutputs(gr.pulseOuts),this._tockUpdated=!1,this.addEvent("pulse"),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.context={time:new Date,secondsElapsed:0,secondsDelta:0,frameNumber:0},this._secondsStarted=.001*Date.now(),this._secondsStopped=this._secondsStarted,this._animHandler=0,this._pulseEvent={type:"pulse",context:this.context,systemUpdated:!1}}start(){0===this._animHandler&&(this._secondsStopped>0&&(this._secondsStarted+=.001*Date.now()-this._secondsStopped,this._secondsStopped=0),this._animHandler=window.requestAnimationFrame(this.onAnimationFrame))}stop(){0!==this._animHandler&&(0===this._secondsStopped&&(this._secondsStopped=.001*Date.now()),window.cancelAnimationFrame(this._animHandler),this._animHandler=0)}pulse(e){const{outs:t,context:n,_pulseEvent:r}=this;n.time.setTime(e);const s=.001*e-this._secondsStarted;n.secondsDelta=s-n.secondsElapsed,n.secondsElapsed=s,n.frameNumber++,t.time.setValue(n.secondsElapsed),t.frame.setValue(n.frameNumber);const i=this.system.graph.tick(n);r.systemUpdated=i||this._tockUpdated,this.emit(r),this._tockUpdated=this.system.graph.tock(n)}onAnimationFrame(){this.pulse(Date.now()),this._animHandler=window.requestAnimationFrame(this.onAnimationFrame)}}var vr;gr.typeName="CPulse",gr.isSystemSingleton=!0,gr.pulseOuts={time:S("Pulse.Time"),frame:T("Pulse.Frame")},function(e){e[e.Basic=0]="Basic",e[e.PCF=1]="PCF",e[e.PCFSoft=2]="PCFSoft"}(vr||(vr={}));const yr={[vr.Basic]:0,[vr.PCF]:1,[vr.PCFSoft]:2};class _r extends W{constructor(e,t){super(e,t),this.ins=this.addInputs(_r.ins),this.outs=this.addOutputs(_r.outs),this.views=[],this._activeSceneComponent=null,this._forceRender=!1,this.addEvents("active-scene","active-camera")}get activeSceneComponent(){return this._activeSceneComponent}set activeSceneComponent(e){if(e!==this._activeSceneComponent){const t=this._activeSceneComponent,n=this.activeCameraComponent;t&&t.off("active-camera",this.onActiveCamera,this),e&&e.on("active-camera",this.onActiveCamera,this),this._activeSceneComponent=e;const r=this.activeCameraComponent,s={type:"active-scene",previous:t,next:e};this.emit(s);const i={type:"active-camera",previous:n,next:r};this.emit(i)}}get activeSceneGraph(){return this._activeSceneComponent?this._activeSceneComponent.graph:null}get activeScene(){return this._activeSceneComponent?this._activeSceneComponent.scene:null}get activeCameraComponent(){return this._activeSceneComponent?this._activeSceneComponent.activeCameraComponent:null}get activeCamera(){const e=this._activeSceneComponent?this._activeSceneComponent.activeCameraComponent:null;return e?e.camera:null}forceRender(){this._forceRender=!0}create(){super.create(),this.trackComponent(gr,(e=>{e.on("pulse",this.onPulse,this)}),(e=>{e.off("pulse",this.onPulse,this)}))}update(){const e=this.ins;return e.exposure.changed&&this.views.forEach((t=>t.renderer.toneMappingExposure=e.exposure.value)),e.gamma.changed,e.shadowsEnabled.changed&&this.views.forEach((t=>t.renderer.shadowMap.enabled=e.shadowsEnabled.value)),e.shadowMapType.changed&&this.views.forEach((t=>t.renderer.shadowMap.type=yr[e.shadowMapType.getValidatedValue()])),!0}attachView(e){if(0===this.views.length){const t=e.renderer,n=this.outs;n.maxTextureSize.setValue(t.capabilities.maxTextureSize),n.maxCubemapSize.setValue(t.capabilities.maxCubemapSize)}this.views.push(e)}detachView(e){const t=this.views.indexOf(e);if(t<0)throw new Error("render view not registered");this.views.splice(t,1)}logInfo(){this.views.forEach((e=>{console.log(e.renderer.info)}))}onPulse(e){(e.systemUpdated||this._forceRender)&&(this.views.forEach((e=>{e.renderer.xr.isPresenting||e.render()})),this._forceRender=!1)}onActiveCamera(e){this.emit(e)}}_r.typeName="CRenderer",_r.isSystemSingleton=!0,_r.ins={exposure:S("Shading.Exposure",1),gamma:S("Shading.Gamma",2),shadowsEnabled:O("Shadows.Enabled",!0),shadowMapType:N("Shadows.MapType",vr,vr.PCF)},_r.outs={maxTextureSize:T("Caps.MaxTextureSize"),maxCubemapSize:T("Caps.MaxCubemapSize")};const br={PI:3.141592653589793,DOUBLE_PI:6.283185307179586,HALF_PI:1.5707963267948966,QUARTER_PI:.7853981633974483,DEG2RAD:.017453292519943295,RAD2DEG:57.29577951308232,limit:(e,t,n)=>e<t?t:e>n?n:e,limitInt:function(e,t,n){return(e=Math.trunc(e))<t?t:e>n?n:e},normalize:(e,t,n)=>(e-t)/(n-t),normalizeLimit:(e,t,n)=>(e=(e-t)/(n-t))<0?0:e>1?1:e,denormalize:(e,t,n)=>(t+e)*(n-t),scale:(e,t,n,r,s)=>r+(e-t)/(n-t)*(s-r),scaleLimit:(e,t,n,r,s)=>r+((e=e<t?t:e>n?n:e)-t)/(n-t)*(s-r),deg2rad:function(e){return.017453292519943295*e},rad2deg:function(e){return 57.29577951308232*e},deltaRadians:function(e,t){return e=(e%=br.DOUBLE_PI)<0?e+br.DOUBLE_PI:e,(t=(t%=br.DOUBLE_PI)<0?t+br.DOUBLE_PI:t)-e>br.PI&&(e+=br.DOUBLE_PI),t-e},deltaDegrees:function(e,t){return e=(e%=br.DOUBLE_PI)<0?e+br.DOUBLE_PI:e,(t=(t%=br.DOUBLE_PI)<0?t+br.DOUBLE_PI:t)-e>br.PI&&(e+=br.DOUBLE_PI),t-e},curves:{linear:e=>e,easeIn:e=>Math.sin(e*br.HALF_PI),easeOut:e=>Math.cos(e*br.HALF_PI-br.PI)+1,ease:e=>.5*Math.cos(e*br.PI-br.PI)+.5,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e}},wr=br,xr=(e,t,n)=>{let r;const s=e.children;for(let e=0,n=s.length;e<n;++e)if(r=s[e].components.has(t),r)return!0;if(n)for(let e=0,n=s.length;e<n;++e)if(r=xr(s[e],t,!0),r)return!0;return!1},Mr=(e,t,n)=>{let r;const s=e.children;for(let e=0,n=s.length;e<n;++e)if(r=s[e].components.get(t),r)return r;if(n)for(let e=0,n=s.length;e<n;++e)if(r=Mr(s[e],t,!0),r)return r;return null},Sr=(e,t,n)=>{let r=[];const s=e.children;for(let e=0,n=s.length;e<n;++e)r=r.concat(s[e].components.getArray(t));if(n)for(let e=0,n=s.length;e<n;++e)r=r.concat(Sr(s[e],t,!0));return r};class Tr extends W{constructor(){super(...arguments),this._parent=null,this._children=[]}get parent(){return this._parent}get children(){return this._children||[]}create(){super.create(),this.graph._addRoot(this),this.node.components.on(W,this.onComponent,this)}dispose(){this.node.components.off(W,this.onComponent,this),this._children.slice().forEach((e=>e.node.dispose())),this._parent&&this._parent.removeChild(this),this.graph._removeRoot(this),super.dispose()}getRootComponent(e){let t=this;for(;t._parent;)t=t._parent;return t?t.node.components.get(e):null}getParentComponent(e,t){let n=this;for(;;){if(n=n._parent,!n){const e=this.graph.parent;n=e?e.components.get(Tr):void 0}if(!n)return;const r=n.node.components.get(e,!0);if(r)return r;if(!t)return}}getParentNode(e,t){let n=this;for(;;){if(n=n._parent,!n){const e=this.graph.parent;n=e?e.components.get(Tr):void 0}if(!n)return;const r=n.node;if(r.is(e))return r;if(!t)return}}getSiblingNode(e){return this.getSiblingNodes(e)[0]}getSiblingNodes(e){const t=this._parent;return this.graph.nodes.getArray(e).filter((e=>{const n=e.components.get(Tr);return(n?n._parent:null)==t}))}hasChildComponents(e,t){return xr(this,e,t)}getChildComponent(e,t){return Mr(this,e,t)}getChildComponents(e,t){return Sr(this,e,t)}traverseUp(e,t,n,r){if(e)if(t){const e=this.node.components.getArray();for(let t=0,n=e.length;t<n;++t)if(r(e[t]))return}else if(r(this))return;let s=this._parent;if(!s&&n){const e=this.node.graph.parent;s=e?e.getComponent(Tr,!0):null}s&&s.traverseUp(!0,t,n,r)}traverseDown(e,t,n,r){if(e)if(t){const e=this.node.components.getArray();for(let t=0,n=e.length;t<n;++t)if(r(e[t]))return}else if(r(this))return;if(n){const e=this.node.components.getArray(X);for(let s=0,i=e.length;s<i;++s){const i=e[s].innerRoots;for(let e=0,s=i.length;e<s;++e)i[e].traverseDown(!0,t,n,r)}}const s=this._children;for(let e=0,i=s.length;e<i;++e)s[e].traverseDown(!0,t,n,r)}propagateUp(e,t,n){this.traverseUp(!0,e,t,(e=>(e.emit(n),n.stopPropagation)))}propagateDown(e,t,n){this.traverseDown(!0,e,t,(e=>(e.emit(n),n.stopPropagation)))}addChild(e){if(e===this)throw new Error("can't add self as child");if(e._parent)throw new Error("can't add child, component has a parent");if(e.graph!==this.graph)throw new Error("can't add child, component in different graph");e._parent=this,this._children.push(e),this.graph._removeRoot(e);const t={type:"hierarchy",add:!0,remove:!1,parent:this,child:e};this.traverseUp(!0,!1,!0,(e=>e.emit(t))),this.traverseDown(!1,!1,!0,(e=>e.emit(t))),this.system.emit(t)}removeChild(e){if(e._parent!==this)throw new Error("component not a child of this");const t={type:"hierarchy",add:!1,remove:!0,parent:this,child:e};this.traverseUp(!0,!1,!0,(e=>e.emit(t))),this.traverseDown(!1,!1,!0,(e=>e.emit(t))),this.system.emit(t);const n=this._children.indexOf(e);this._children.splice(n,1),e._parent=null,this.graph._addRoot(e)}onComponent(e){if(e.object===this)return;const t={type:"child",add:e.add,remove:e.remove,component:e.object};this.traverseUp(!0,!1,!0,(e=>e.emit(t)))}toJSON(){const e=super.toJSON();return this._children.length>0&&(e.children=this._children.map((e=>e.id))),e}referencesFromJSON(e){super.referencesFromJSON(e);const t=this.system.components.getDictionary();e.children&&e.children.forEach((e=>{const n=t[e];this.addChild(n)}))}toString(){return super.toString()+` - children: ${this.children.length}`}dump(e=""){super.dump(e),this.children.length>0&&(console.log(e+"%cChildren","color: purple"),this.children.forEach((t=>t.node.dump(e+"  "))))}}Tr.typeName="CHierarchy";const Cr=new he,Er=new he,kr=new ue,Lr=new Qe;var Ar;!function(e){e[e.XYZ=0]="XYZ",e[e.YZX=1]="YZX",e[e.ZXY=2]="ZXY",e[e.XZY=3]="XZY",e[e.YXZ=4]="YXZ",e[e.ZYX=5]="ZYX"}(Ar||(Ar={}));class Dr extends Tr{constructor(e,t){super(e,t),this.ins=this.addInputs(Dr.transformIns),this.outs=this.addOutputs(Dr.transformOuts),this._object3D=this.createObject3D(),this._object3D.matrixAutoUpdate=!1}get transform(){return this}get object3D(){return this._object3D}get children(){return this._children||[]}get matrix(){return this._object3D.matrix}update(e){const t=this._object3D,{position:n,rotation:r,order:s,scale:i}=this.ins,{matrix:o}=this.outs;t.position.fromArray(n.value),Cr.fromArray(r.value).multiplyScalar(wr.DEG2RAD);const a=s.getOptionText();return t.rotation.setFromVector3(Cr,a),t.scale.fromArray(i.value),t.updateMatrix(),t.matrix.toArray(o.value),o.set(),!0}dispose(){this._object3D&&(this._object3D.children.slice().forEach((e=>this._object3D.remove(e))),this._object3D.parent&&this._object3D.parent.remove(this._object3D)),super.dispose()}setPropertiesFromMatrix(e){const t=!e;e=e||this._object3D.matrix;const{position:n,rotation:r,order:s,scale:i}=this.ins;e.decompose(Cr,kr,Er),Cr.toArray(n.value);const o=s.getOptionText();Lr.setFromQuaternion(kr,o),Cr.setFromEuler(Lr),Cr.multiplyScalar(wr.RAD2DEG).toArray(r.value),Er.toArray(i.value),n.set(t),r.set(t),i.set(t)}addChild(e){super.addChild(e),this._object3D.add(e._object3D)}removeChild(e){this._object3D.remove(e._object3D),super.removeChild(e)}createObject3D(){return new ft}}Dr.typeName="CTransform",Dr.transformIns={position:E("Transform.Position"),rotation:E("Transform.Rotation"),order:N("Transform.Order",Ar),scale:A("Transform.Scale")},Dr.transformOuts={matrix:k("Transform.Matrix")};const Or={view:null,viewport:null,renderer:null,scene:null,camera:null},Rr={type:"before-render",component:null,context:Or},Pr={type:"after-render",component:null,context:Or},Nr={activate:B("Scene.Activate")};class Ir extends Dr{constructor(e,t){super(e,t),this._activeCameraComponent=null,this._preRenderList=[],this._postRenderList=[],this._renderListsNeedUpdate=!0,this.ins=this.addInputs(Nr,0),this.addEvents("before-render","after-render","active-camera")}get scene(){return this.object3D}get activeCameraComponent(){return this._activeCameraComponent}set activeCameraComponent(e){if(e!==this._activeCameraComponent){const t=this._activeCameraComponent;this._activeCameraComponent=e;const n={type:"active-camera",previous:t,next:e};this.emit(n)}}get activeCamera(){return this._activeCameraComponent?this._activeCameraComponent.camera:null}get renderer(){return this.getMainComponent(_r)}create(){super.create(),this.on("hierarchy",this.shouldUpdateRenderLists,this),this.on("child",this.shouldUpdateRenderLists,this);const e=this.renderer;e&&!e.activeSceneComponent&&(e.activeSceneComponent=this)}update(e){if(super.update(e),this.ins.activate.changed){const e=this.renderer;e&&(e.activeSceneComponent=this)}return!0}tick(e){return this._renderListsNeedUpdate&&(this.updateRenderLists(),this._renderListsNeedUpdate=!1),!1}dispose(){const e=this.renderer;e&&e.activeSceneComponent===this&&(e.activeSceneComponent=null),this.off("hierarchy",this.shouldUpdateRenderLists,this),this.off("child",this.shouldUpdateRenderLists,this),super.dispose()}preRender(e){const t=this._preRenderList;for(let n=0,r=t.length;n<r;++n)t[n].preRender(e)}postRender(e){const t=this._postRenderList;for(let n=0,r=t.length;n<r;++n)t[n].postRender(e)}createObject3D(){const e=new fr;return e.onBeforeRender=this._onBeforeRender.bind(this),e.onAfterRender=this._onAfterRender.bind(this),e}shouldUpdateRenderLists(){this._renderListsNeedUpdate=!0}updateRenderLists(){this._preRenderList=[],this._postRenderList=[],this.traverseDown(!1,!0,!0,(e=>(e.preRender&&this._preRenderList.push(e),e.postRender&&this._postRenderList.push(e),!1))),this.changed=!0}_onBeforeRender(e,t,n){Or.view=e.__view,Or.viewport=e.__viewport,Or.renderer=e,Or.scene=t,Or.camera=n,this.preRender(Or),Rr.component=this,this.emit(Rr)}_onAfterRender(e,t,n){Or.view=e.__view,Or.viewport=e.__viewport,Or.renderer=e,Or.scene=t,Or.camera=n,this.postRender(Or),Pr.component=this,this.emit(Pr)}}Ir.typeName="CScene",Ir.isGraphSingleton=!0;const zr=new he;class Br extends W{constructor(e,t){super(e,t),this.ins=this.addInputs(Br.object3DIns),this.outs=this.addOutputs(Br.object3DOuts),this._object3D=null,this._isPickable=!1,this.addEvent("object"),this.node.components.on(this.parentComponentClass,this._onParent,this)}get parentComponentClass(){return this.constructor.parentComponentClass}get parentComponent(){return this.node.components.get(this.parentComponentClass,!0)}get transform(){return this.node.components.get(Dr,!0)}get scene(){const e=this.transform;return e?e.getParentComponent(Ir,!0):void 0}get object3D(){return this._object3D}set object3D(e){const t=this._object3D;if(t&&(t.userData.component=null,this.unregisterPickableObject3D(t,!0),t.parent&&this.onRemoveFromParent(t.parent)),this.emit({type:"object",current:t,next:e}),this._object3D=e,e){e.userData.component=this,e.matrixAutoUpdate=!1,e.visible=this.ins.visible.value,this.registerPickableObject3D(e,!0);const t=this.parentComponent;t&&this.onAddToParent(t.object3D)}}update(e){const{visible:t,pickable:n}=this.ins;return t.changed&&this._object3D&&(this._object3D.visible=t.value),n.changed&&n.value!==this._isPickable&&(this._isPickable=n.value,n.value?this.enablePointerEvents():this.disablePointerEvents()),!0}dispose(){this.object3D=null,this.ins.pickable.value&&this.disablePointerEvents(),this.node.components.off(this.parentComponentClass,this._onParent,this),super.dispose()}preRender(e){}postRender(e){}toString(){return super.toString()+(this._object3D?` - type: ${this._object3D.type}`:" - (null)")}onPointer(e){const t=this.outs;"pointer-down"===e.type?(t.pointerDown.set(),t.pointerActive.setValue(!0)):"pointer-up"===e.type&&(t.pointerUp.set(),t.pointerActive.setValue(!1)),e.stopPropagation=!0}enablePointerEvents(){this.on("pointer-down",this.onPointer,this),this.on("pointer-up",this.onPointer,this)}disablePointerEvents(){this.off("pointer-down",this.onPointer,this),this.off("pointer-up",this.onPointer,this);const e=this.outs;e.pointerActive.value&&(e.pointerUp.set(),e.pointerActive.setValue(!1))}updateTransform(){const e=this._object3D;if(!e)return;const{position:t,rotation:n,order:r,scale:s}=this.ins;if(t.changed||n.changed||r.changed||s.changed){e.position.fromArray(t.value),zr.fromArray(n.value).multiplyScalar(te);const i=r.getOptionText();e.rotation.setFromVector3(zr,i),e.scale.fromArray(s.value),e.updateMatrix()}return!0}onAddToParent(e){e.add(this._object3D)}onRemoveFromParent(e){e.remove(this._object3D)}addObject3D(e){this._object3D.add(e),this.registerPickableObject3D(e,!0)}removeObject3D(e){this.unregisterPickableObject3D(e,!0),this._object3D.remove(e)}registerPickableObject3D(e,t){pr.add(e,t)}unregisterPickableObject3D(e,t){pr.remove(e,t)}_onParent(e){this._object3D&&!this._object3D.parent&&e.add&&this.onAddToParent(e.object.object3D)}}Br.typeName="CObject3D",Br.parentComponentClass=Dr,Br.object3DIns={visible:O("Object.Visible",!0),pickable:O("Object.Pickable")},Br.object3DOuts={pointerDown:B("Pointer.Down"),pointerUp:B("Pointer.Up"),pointerActive:O("Pointer.Active")},Br.transformIns=Dr.transformIns,Br.prototype.preRender=null,Br.prototype.postRender=null;const Fr=new he,Hr=new he,jr=new he;class Ur extends ft{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new Ln;r.setAttribute("position",new _n([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new hn({fog:!1,toneMapped:!1});this.lightPlane=new Nn(r,s),this.add(this.lightPlane),r=new Ln,r.setAttribute("position",new _n([0,0,0,0,0,1],3)),this.targetLine=new Nn(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Fr.setFromMatrixPosition(this.light.matrixWorld),Hr.setFromMatrixPosition(this.light.target.matrixWorld),jr.subVectors(Hr,Fr),this.lightPlane.lookAt(Hr),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hr),this.targetLine.scale.z=jr.length()}}class Yr extends ft{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new un(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const Vr=new he,$r=new he,Wr=new tt;class Gr{constructor(e=new he(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Vr.subVectors(n,t).cross($r.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Vr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(n).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Wr.getNormalMatrix(e),r=this.coplanarPoint(Vr).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const qr=new je,Xr=new he;class Kr{constructor(e=new Gr,t=new Gr,n=new Gr,r=new Gr,s=new Gr,i=new Gr){this.planes=[e,t,n,r,s,i]}set(e,t,n,r,s,i){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(i),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],i=n[2],o=n[3],a=n[4],l=n[5],c=n[6],d=n[7],u=n[8],h=n[9],m=n[10],p=n[11],f=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,d-a,p-u,y-f).normalize(),t[1].setComponents(o+r,d+a,p+u,y+f).normalize(),t[2].setComponents(o+s,d+l,p+h,y+g).normalize(),t[3].setComponents(o-s,d-l,p-h,y-g).normalize(),t[4].setComponents(o-i,d-c,p-m,y-v).normalize(),t[5].setComponents(o+i,d+c,p+m,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),qr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(qr)}intersectsSprite(e){return qr.center.set(0,0,0),qr.radius=.7071067811865476,qr.applyMatrix4(e.matrixWorld),this.intersectsSphere(qr)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Xr.x=r.normal.x>0?e.max.x:e.min.x,Xr.y=r.normal.y>0?e.max.y:e.min.y,Xr.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Xr)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const Jr=new fe,Zr=new he,Qr=new he;class es{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mn(512,512),this.map=null,this.mapPass=null,this.matrix=new fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kr,this._frameExtents=new mn(1,1),this._viewportCount=1,this._viewports=[new tr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Zr.setFromMatrixPosition(e.matrixWorld),t.position.copy(Zr),Qr.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Qr),t.updateMatrixWorld(),Jr.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jr),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Jr)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ts extends ft{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fe,this.projectionMatrix=new fe,this.projectionMatrixInverse=new fe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ns extends ts{constructor(e=-1,t=1,n=1,r=-1,s=.1,i=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=i,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,i=n+e,o=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=e*this.view.offsetX,i=s+e*this.view.width,o-=t*this.view.offsetY,a=o-t*this.view.height}this.projectionMatrix.makeOrthographic(s,i,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class rs extends es{constructor(){super(new ns(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ss extends Yr{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ft.DefaultUp),this.updateMatrix(),this.target=new ft,this.shadow=new rs}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const is={viewportPicking:O("Viewport.Picking",!0),viewportBrackets:O("Viewport.Brackets",!0)};class os extends Q{constructor(){super(...arguments),this.ins=this.addInputs(is),this._brackets=new Map,this._sceneTracker=null}create(){super.create(),this.system.on("pointer-up",this.onPointerUp,this),this._sceneTracker=new j(this.system.components,Ir,(e=>{e.on("after-render",this.onSceneAfterRender,this)}),(e=>{e.off("after-render",this.onSceneAfterRender,this)}))}dispose(){this._sceneTracker.dispose(),this.system.off("pointer-up",this.onPointerUp,this),this._sceneTracker.dispose(),super.dispose()}update(){return!0}onSelectNode(e,t){super.onSelectNode(e,t);const n=e.getComponent(Dr,!0);n&&this.updateBracket(n,t)}onSelectComponent(e,t){super.onSelectComponent(e,t),(e instanceof Br||e instanceof Dr)&&this.updateBracket(e,t)}onPointerUp(e){this.ins.viewportPicking.value&&e.isPrimary&&!e.isDragging&&(e.component?this.selectComponent(e.component,e.ctrlKey):e.ctrlKey||this.clearSelection())}onSceneAfterRender(e){if(!this.ins.viewportBrackets.value)return;const t=e.context.renderer,n=e.context.camera;for(let e of this._brackets)e[1]instanceof Ur&&e[1].update(),t.render(e[1],n)}updateBracket(e,t){if(e){if(t){const t=e.object3D;if(t)if(t.children[0]instanceof ss){const n=new Ur(t.children[0],1,16766515);this._brackets.set(e,n)}else{const t=new qn(e.object3D);this._brackets.set(e,t)}}else{const t=this._brackets.get(e);t&&(this._brackets.delete(e),t.dispose())}this.changed=!0}}}os.typeName="CPickSelection";const as=JSON.parse('{"asset":{"type":"application/si-dpo-3d.document+json","version":"1.0","copyright":"(c) Smithsonian Institution, all rights reserved","generator":"Voyager"},"scene":0,"scenes":[{"nodes":[0,1],"setup":0}],"nodes":[{"translation":[0,0,15],"camera":0},{"name":"Lights","children":[2,3,4,5]},{"translation":[0,0,2],"rotation":[0.4829741,-0.1070728,0.1880998,0.8484633],"scale":[1,1,1],"name":"Key","light":0},{"rotation":[0.3546969,0.163893,-0.3861077,0.8356136],"scale":[1,1,1],"name":"Fill #1","light":1},{"translation":[0,0,1],"rotation":[0.9374013,-0.3018693,0.0532277,0.1652891],"name":"Fill #2","light":2},{"translation":[1,0,-1],"rotation":[0.373256,0.6426073,-0.5786063,0.3360813],"scale":[1,1,1],"name":"Rim","light":3}],"setups":[{"units":"cm","interface":{"visible":true,"logo":true,"menu":true,"tools":true},"viewer":{"shader":"Default","exposure":1,"gamma":2,"annotationsVisible":false},"reader":{"enabled":false,"position":"Overlay"},"navigation":{"type":"Orbit","enabled":true,"autoZoom":true,"lightsFollowCamera":true,"autoRotation":false,"orbit":{"orbit":[-24,-26,0],"offset":[0,0,150],"minOrbit":[-90,null,null],"maxOrbit":[90,null,null],"minOffset":[null,null,0.1],"maxOffset":[null,null,10000]}},"background":{"style":"RadialGradient","color0":[0.2,0.25,0.3],"color1":[0.01,0.03,0.05]},"floor":{"visible":false,"position":[0,-25,0],"size":50,"color":[0.6,0.75,0.8],"opacity":0.5,"receiveShadow":false},"grid":{"visible":false,"color":[0.5,0.7,0.8]},"tape":{"enabled":false,"startPosition":[0,0,0],"startDirection":[0,0,0],"endPosition":[0,0,0],"endDirection":[0,0,0]},"slicer":{"enabled":false,"axis":"X","inverted":false,"position":0.5}}],"cameras":[{"type":"perspective","perspective":{"yfov":52,"znear":0.1,"zfar":100000}}],"lights":[{"color":[1,0.95,0.9],"intensity":1,"type":"directional","shadowEnabled":true},{"color":[0.9,0.95,1],"intensity":0.7,"type":"directional","shadowEnabled":true},{"color":[0.8,0.85,1],"intensity":0.5,"type":"directional"},{"color":[0.85,0.9078313,1],"intensity":0.6,"type":"directional"}]}');class ls extends c{constructor(){super(),this._dict={},this.addEvent("type")}add(e){if(Array.isArray(e))return void e.forEach((e=>this.add(e)));const t=e.typeName;if(!t)throw new Error("type must have a 'typeName' member");if(this._dict[t])throw new Error(`type '${t}' already registered`);this._dict[t]=e,this.emit({type:"type",add:!0,remove:!1,classType:e})}remove(e){if(Array.isArray(e))return void e.forEach((e=>this.remove(e)));const t=e.typeName;if(!t)throw new Error("type must have a 'typeName' member");if(!this._dict[t])throw new Error(`type '${t}' not registered`);delete this._dict[t],this.emit({type:"type",add:!1,remove:!0,classType:e})}getType(e){let t=e;return"function"==typeof e?t=e.typeName:"object"==typeof e&&(t=e.constructor.typeName),this._dict[t]}createInstance(e,...t){const n=this.getType(e);if(!n)throw new Error(`type '${e}' not registered`);return new n(...t)}}const cs="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,ds=(e,t,n=null)=>{for(;t!==n;){const n=t.nextSibling;e.removeChild(t),t=n}},us=`{{lit-${String(Math.random()).slice(2)}}}`,hs=`\x3c!--${us}--\x3e`,ms=new RegExp(`${us}|${hs}`),ps="$lit$";class fs{constructor(e,t){this.parts=[],this.element=t;const n=[],r=[],s=document.createTreeWalker(t.content,133,null,!1);let i=0,o=-1,a=0;const{strings:l,values:{length:c}}=e;for(;a<c;){const e=s.nextNode();if(null!==e){if(o++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:n}=t;let r=0;for(let e=0;e<n;e++)gs(t[e].name,ps)&&r++;for(;r-- >0;){const t=l[a],n=_s.exec(t)[2],r=n.toLowerCase()+ps,s=e.getAttribute(r);e.removeAttribute(r);const i=s.split(ms);this.parts.push({type:"attribute",index:o,name:n,strings:i}),a+=i.length-1}}"TEMPLATE"===e.tagName&&(r.push(e),s.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(us)>=0){const r=e.parentNode,s=t.split(ms),i=s.length-1;for(let t=0;t<i;t++){let n,i=s[t];if(""===i)n=ys();else{const e=_s.exec(i);null!==e&&gs(e[2],ps)&&(i=i.slice(0,e.index)+e[1]+e[2].slice(0,-ps.length)+e[3]),n=document.createTextNode(i)}r.insertBefore(n,e),this.parts.push({type:"node",index:++o})}""===s[i]?(r.insertBefore(ys(),e),n.push(e)):e.data=s[i],a+=i}}else if(8===e.nodeType)if(e.data===us){const t=e.parentNode;null!==e.previousSibling&&o!==i||(o++,t.insertBefore(ys(),e)),i=o,this.parts.push({type:"node",index:o}),null===e.nextSibling?e.data="":(n.push(e),o--),a++}else{let t=-1;for(;-1!==(t=e.data.indexOf(us,t+1));)this.parts.push({type:"node",index:-1}),a++}}else s.currentNode=r.pop()}for(const e of n)e.parentNode.removeChild(e)}}const gs=(e,t)=>{const n=e.length-t.length;return n>=0&&e.slice(n)===t},vs=e=>-1!==e.index,ys=()=>document.createComment(""),_s=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function bs(e,t){const{element:{content:n},parts:r}=e,s=document.createTreeWalker(n,133,null,!1);let i=xs(r),o=r[i],a=-1,l=0;const c=[];let d=null;for(;s.nextNode();){a++;const e=s.currentNode;for(e.previousSibling===d&&(d=null),t.has(e)&&(c.push(e),null===d&&(d=e)),null!==d&&l++;void 0!==o&&o.index===a;)o.index=null!==d?-1:o.index-l,i=xs(r,i),o=r[i]}c.forEach((e=>e.parentNode.removeChild(e)))}const ws=e=>{let t=11===e.nodeType?0:1;const n=document.createTreeWalker(e,133,null,!1);for(;n.nextNode();)t++;return t},xs=(e,t=-1)=>{for(let n=t+1;n<e.length;n++){const t=e[n];if(vs(t))return n}return-1};const Ms=new WeakMap,Ss=e=>(...t)=>{const n=e(...t);return Ms.set(n,!0),n},Ts=e=>"function"==typeof e&&Ms.has(e),Cs={},Es={};class ks{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=cs?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],n=this.template.parts,r=document.createTreeWalker(e,133,null,!1);let s,i=0,o=0,a=r.nextNode();for(;i<n.length;)if(s=n[i],vs(s)){for(;o<s.index;)o++,"TEMPLATE"===a.nodeName&&(t.push(a),r.currentNode=a.content),null===(a=r.nextNode())&&(r.currentNode=t.pop(),a=r.nextNode());if("node"===s.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(a.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,s.name,s.strings,this.options));i++}else this.__parts.push(void 0),i++;return cs&&(document.adoptNode(e),customElements.upgrade(e)),e}}const Ls=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),As=` ${us} `;class Ds{constructor(e,t,n,r){this.strings=e,this.values=t,this.type=n,this.processor=r}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let r=0;r<e;r++){const e=this.strings[r],s=e.lastIndexOf("\x3c!--");n=(s>-1||n)&&-1===e.indexOf("--\x3e",s+1);const i=_s.exec(e);t+=null===i?e+(n?As:hs):e.substr(0,i.index)+i[1]+i[2]+ps+i[3]+us}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==Ls&&(t=Ls.createHTML(t)),e.innerHTML=t,e}}const Os=e=>null===e||!("object"==typeof e||"function"==typeof e),Rs=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class Ps{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new Ns(this)}_getValue(){const e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=n[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!Rs(e))return e}let r="";for(let s=0;s<t;s++){r+=e[s];const t=n[s];if(void 0!==t){const e=t.value;if(Os(e)||!Rs(e))r+="string"==typeof e?e:String(e);else for(const t of e)r+="string"==typeof t?t:String(t)}}return r+=e[t],r}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Ns{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===Cs||Os(e)&&e===this.value||(this.value=e,Ts(e)||(this.committer.dirty=!0))}commit(){for(;Ts(this.value);){const e=this.value;this.value=Cs,e(this)}this.value!==Cs&&this.committer.commit()}}class Is{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(ys()),this.endNode=e.appendChild(ys())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=ys()),e.__insert(this.endNode=ys())}insertAfterPart(e){e.__insert(this.startNode=ys()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;Ts(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Cs,e(this)}const e=this.__pendingValue;e!==Cs&&(Os(e)?e!==this.value&&this.__commitText(e):e instanceof Ds?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):Rs(e)?this.__commitIterable(e):e===Es?(this.value=Es,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof ks&&this.value.template===t)this.value.update(e.values);else{const n=new ks(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,r=0;for(const s of e)n=t[r],void 0===n&&(n=new Is(this.options),t.push(n),0===r?n.appendIntoPart(this):n.insertAfterPart(t[r-1])),n.setValue(s),n.commit(),r++;r<t.length&&(t.length=r,this.clear(n&&n.endNode))}clear(e=this.startNode){ds(this.startNode.parentNode,e.nextSibling,this.endNode)}}class zs{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;Ts(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Cs,e(this)}if(this.__pendingValue===Cs)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=Cs}}class Bs extends Ps{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new Fs(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Fs extends Ns{}let Hs=!1;(()=>{try{const e={get capture(){return Hs=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class js{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;Ts(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Cs,e(this)}if(this.__pendingValue===Cs)return;const e=this.__pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),r=null!=e&&(null==t||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=Us(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=Cs}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const Us=e=>e&&(Hs?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);function Ys(e){let t=Vs.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},Vs.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const r=e.strings.join(us);return n=t.keyString.get(r),void 0===n&&(n=new fs(e,e.getTemplateElement()),t.keyString.set(r,n)),t.stringsArray.set(e.strings,n),n}const Vs=new Map,$s=new WeakMap,Ws=(e,t,n)=>{let r=$s.get(t);void 0===r&&(ds(t,t.firstChild),$s.set(t,r=new Is(Object.assign({templateFactory:Ys},n))),r.appendInto(t)),r.setValue(e),r.commit()};const Gs=new class{handleAttributeExpressions(e,t,n,r){const s=t[0];if("."===s){return new Bs(e,t.slice(1),n).parts}if("@"===s)return[new js(e,t.slice(1),r.eventContext)];if("?"===s)return[new zs(e,t.slice(1),n)];return new Ps(e,t,n).parts}handleTextExpression(e){return new Is(e)}};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const qs=(e,...t)=>new Ds(e,t,"html",Gs),Xs=(e,t)=>`${e}--${t}`;let Ks=!0;void 0===window.ShadyCSS?Ks=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),Ks=!1);const Js=e=>t=>{const n=Xs(t.type,e);let r=Vs.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},Vs.set(n,r));let s=r.stringsArray.get(t.strings);if(void 0!==s)return s;const i=t.strings.join(us);if(s=r.keyString.get(i),void 0===s){const n=t.getTemplateElement();Ks&&window.ShadyCSS.prepareTemplateDom(n,e),s=new fs(t,n),r.keyString.set(i,s)}return r.stringsArray.set(t.strings,s),s},Zs=["html","svg"],Qs=new Set,ei=(e,t,n)=>{Qs.add(e);const r=n?n.element:document.createElement("template"),s=t.querySelectorAll("style"),{length:i}=s;if(0===i)return void window.ShadyCSS.prepareTemplateStyles(r,e);const o=document.createElement("style");for(let e=0;e<i;e++){const t=s[e];t.parentNode.removeChild(t),o.textContent+=t.textContent}(e=>{Zs.forEach((t=>{const n=Vs.get(Xs(t,e));void 0!==n&&n.keyString.forEach((e=>{const{element:{content:t}}=e,n=new Set;Array.from(t.querySelectorAll("style")).forEach((e=>{n.add(e)})),bs(e,n)}))}))})(e);const a=r.content;n?function(e,t,n=null){const{element:{content:r},parts:s}=e;if(null==n)return void r.appendChild(t);const i=document.createTreeWalker(r,133,null,!1);let o=xs(s),a=0,l=-1;for(;i.nextNode();)for(l++,i.currentNode===n&&(a=ws(t),n.parentNode.insertBefore(t,n));-1!==o&&s[o].index===l;){if(a>0){for(;-1!==o;)s[o].index+=a,o=xs(s,o);return}o=xs(s,o)}}(n,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)t.insertBefore(l.cloneNode(!0),t.firstChild);else if(n){a.insertBefore(o,a.firstChild);const e=new Set;e.add(o),bs(n,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const ti={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},ni=(e,t)=>t!==e&&(t==t||e==e),ri={attribute:!0,type:String,converter:ti,reflect:!1,hasChanged:ni},si="finalized";class ii extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach(((t,n)=>{const r=this._attributeNameForProperty(n,t);void 0!==r&&(this._attributeToPropertyMap.set(r,n),e.push(r))})),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach(((e,t)=>this._classProperties.set(t,e)))}}static createProperty(e,t=ri){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const n="symbol"==typeof e?Symbol():`__${e}`,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){const s=this[e];this[t]=r,this.requestUpdateInternal(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||ri}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(si)||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const n of t)this.createProperty(n,e[n])}}static _attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,n=ni){return n(e,t)}static _propertyValueFromAttribute(e,t){const n=t.type,r=t.converter||ti,s="function"==typeof r?r:r.fromAttribute;return s?s(e,n):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const n=t.type,r=t.converter;return(r&&r.toAttribute||ti.toAttribute)(e,n)}initialize(){this._updateState=0,this._updatePromise=new Promise((e=>this._enableUpdatingResolver=e)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((e,t)=>this[t]=e)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,t,n=ri){const r=this.constructor,s=r._attributeNameForProperty(e,n);if(void 0!==s){const e=r._propertyValueToAttribute(t,n);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(s):this.setAttribute(s,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){const e=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,n){let r=!0;if(void 0!==e){const s=this.constructor;n=n||s.getPropertyOptions(e),s._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((e,t)=>this._propertyToAttribute(t,this[t],e))),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}ii.finalized=!0;const oi=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}};function ai(e){return(t,n)=>void 0!==n?((e,t,n)=>{t.constructor.createProperty(n,e)})(e,t,n):oi(e,t)}const li=Element.prototype;li.msMatchesSelector||li.webkitMatchesSelector;const ci=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,di=Symbol();class ui{constructor(e,t){if(t!==di)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(ci?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const hi={};class mi extends ii{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,n)=>e.reduceRight(((e,n)=>Array.isArray(n)?t(n,e):(e.add(n),e)),n),n=t(e,new Set),r=[];n.forEach((e=>r.unshift(e))),this._styles=r}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((e=>{if(e instanceof CSSStyleSheet&&!ci){const t=Array.prototype.slice.call(e.cssRules).reduce(((e,t)=>e+t.cssText),"");return new ui(String(t),di)}return e}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?ci?this.renderRoot.adoptedStyleSheets=e.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((e=>e.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==hi&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)})))}render(){return hi}}mi.finalized=!0,mi.render=(e,t,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const r=n.scopeName,s=$s.has(t),i=Ks&&11===t.nodeType&&!!t.host,o=i&&!Qs.has(r),a=o?document.createDocumentFragment():t;if(Ws(e,a,Object.assign({templateFactory:Js(r)},n)),o){const e=$s.get(a);$s.delete(a);const n=e.value instanceof ks?e.value.template:void 0;ei(r,a,n),ds(t,t.firstChild),t.appendChild(a),$s.set(t,e)}!s&&i&&window.ShadyCSS.styleElement(t.host)},mi.shadowRootOptions={mode:"open"};const pi=(e,t)=>{const n=e.startNode.parentNode,r=void 0===t?e.endNode:t.startNode,s=n.insertBefore(ys(),r);n.insertBefore(ys(),r);const i=new Is(e.options);return i.insertAfterNode(s),i},fi=(e,t)=>(e.setValue(t),e.commit(),e),gi=(e,t,n)=>{const r=e.startNode.parentNode,s=n?n.startNode:e.endNode,i=t.endNode.nextSibling;i!==s&&((e,t,n=null,r=null)=>{for(;t!==n;){const n=t.nextSibling;e.insertBefore(t,r),t=n}})(r,t.startNode,i,s)},vi=e=>{ds(e.startNode.parentNode,e.startNode,e.endNode.nextSibling)},yi=(e,t,n)=>{const r=new Map;for(let s=t;s<=n;s++)r.set(e[s],s);return r},_i=new WeakMap,bi=new WeakMap,wi=Ss(((e,t,n)=>{let r;return void 0===n?n=t:void 0!==t&&(r=t),t=>{if(!(t instanceof Is))throw new Error("repeat can only be used in text bindings");const s=_i.get(t)||[],i=bi.get(t)||[],o=[],a=[],l=[];let c,d,u=0;for(const t of e)l[u]=r?r(t,u):u,a[u]=n(t,u),u++;let h=0,m=s.length-1,p=0,f=a.length-1;for(;h<=m&&p<=f;)if(null===s[h])h++;else if(null===s[m])m--;else if(i[h]===l[p])o[p]=fi(s[h],a[p]),h++,p++;else if(i[m]===l[f])o[f]=fi(s[m],a[f]),m--,f--;else if(i[h]===l[f])o[f]=fi(s[h],a[f]),gi(t,s[h],o[f+1]),h++,f--;else if(i[m]===l[p])o[p]=fi(s[m],a[p]),gi(t,s[m],s[h]),m--,p++;else if(void 0===c&&(c=yi(l,p,f),d=yi(i,h,m)),c.has(i[h]))if(c.has(i[m])){const e=d.get(l[p]),n=void 0!==e?s[e]:null;if(null===n){const e=pi(t,s[h]);fi(e,a[p]),o[p]=e}else o[p]=fi(n,a[p]),gi(t,n,s[h]),s[e]=null;p++}else vi(s[m]),m--;else vi(s[h]),h++;for(;p<=f;){const e=pi(t,o[f+1]);fi(e,a[p]),o[p++]=e}for(;h<=m;){const e=s[h++];null!==e&&vi(e)}_i.set(t,o),bi.set(t,l)}}));var xi,Mi=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Si=xi=class extends mi{constructor(){super(...arguments),this._isFirstConnected=!1}static setStyle(e,t){Object.assign(e.style,t)}static setAttribs(e,t){for(let n in t)e.setAttribute(n,t[n])}get shady(){return this.constructor.shady}appendTo(e){return e.appendChild(this),this}removeChildren(){for(;this.firstChild;)this.removeChild(this.firstChild)}getChildrenArray(){return Array.from(this.children)}appendElement(e,t){return this.createElement(e,t,this)}createElement(e,t,n){let r;return r="string"==typeof e?document.createElement(e):e instanceof HTMLElement?e:new e,t&&Object.assign(r.style,t),n&&n.appendChild(r),r}setStyle(e){return xi.setStyle(this,e),this}setAttribute(e,t){return super.setAttribute(e,t),this}setAttributes(e){return xi.setAttribs(this,e),this}addClass(...e){return e.forEach((e=>this.classList.add(e))),this}removeClass(...e){return e.forEach((e=>this.classList.remove(e))),this}setClass(e,t){return t?this.classList.add(e):this.classList.remove(e),this}hasFocus(){return document.activeElement===this}on(e,t,n){return this.addEventListener(e,t,n),this}off(e,t,n){return this.removeEventListener(e,t,n),this}connectedCallback(){this._isFirstConnected||(this._isFirstConnected=!0,this.firstConnected()),this.connected(),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.disconnected()}createRenderRoot(){return this.shady?super.createRenderRoot():this}firstConnected(){}connected(){}disconnected(){}onUpdate(){this.requestUpdate()}};Si.tagName="ff-custom-element",Si.shady=!1,Si=xi=Mi([Ci("ff-custom-element")],Si);const Ti=Si;function Ci(e){return t=>(t.tagName=e,customElements.define(t.tagName,t),t)}var Ei,ki=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Li=Ei=class extends Ti{constructor(e){super(),this.template=null,this.name=e||""}static add(e,t){if(Ei.templates[e])throw new Error(`icon already registered: '${e}'`);Ei.templates[e]=t}static getTemplateNames(){return Object.keys(Ei.templates)}firstConnected(){this.classList.add("ff-icon")}render(){if(this.name){const e=this.constructor.templates[this.name];return e||console.warn(`icon not found: '${this.name}'`),e}return this.template?this.template:qs`[icon undefined]`}};Li.templates={},ki([ai({attribute:!1})],Li.prototype,"template",void 0),ki([ai({type:String})],Li.prototype,"name",void 0),Li=Ei=ki([Ci("ff-icon")],Li);const Ai=Li;Li.add("empty",qs``),Li.add("check",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg>`),Li.add("close",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>`),Li.add("grip",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg>`),Li.add("up",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg>`),Li.add("down",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"/></svg>`),Li.add("caret-up",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"/></svg>`),Li.add("caret-down",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"/></svg>`),Li.add("folder",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"/></svg>`),Li.add("file",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"/></svg>`),Li.add("info",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>`),Li.add("warning",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>`),Li.add("error",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>`),Li.add("prompt",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"/></svg>`);var Di,Oi=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const Ri={info:"ff-info",success:"ff-success",warning:"ff-warning",error:"ff-error"},Pi={info:"info",success:"check",warning:"warning",error:"error"},Ni={info:2e3,success:2e3,warning:5e3,error:0};let Ii=Di=class extends Ti{constructor(e,t,n){super(),this._handler=0,this.on("transitionend",this.remove.bind(this)),this.message=e||"<messge>",this.level=t||"info",this.timeout=void 0!==n?n:Ni[this.level];const r=(Di.shadowRootNode||document).getElementById(Di.stackId);r?r.appendChild(this):console.warn(`element '#${Di.stackId}' not found`)}static show(e,t,n){new Di(e,t,n)}close(){this._handler>0&&(window.clearTimeout(this._handler),this._handler=0),this.classList.add("ff-out")}firstUpdated(){this.classList.add("ff-notification",Ri[this.level]),this.timeout>0&&(this._handler=window.setTimeout((()=>this.close()),this.timeout))}render(){const e=Pi[this.level];return qs`<ff-icon name=${e}></ff-icon>
            <div class="ff-text">${this.message}</div>
            <ff-button inline icon="close" @click=${this.onClose}>`}onClose(e){e.stopPropagation(),this.close()}};Ii.stackId="ff-notification-stack",Ii.shadowRootNode=null,Oi([ai({type:String})],Ii.prototype,"message",void 0),Oi([ai({type:String})],Ii.prototype,"level",void 0),Oi([ai({type:Number})],Ii.prototype,"timeout",void 0),Ii=Di=Oi([Ci("ff-notification")],Ii);const zi=Ii;class Bi extends c{constructor(e){super({knownEvents:!1}),this.nodes=new V($),this.components=new V(W),this.registry=e||new ls,this.graph=new q(this,null),this.graph.activate()}getComponent(e,t=!1){return this.components.get(e,t)}getComponents(e){return this.components.getArray(e)}getComponentsByTag(e){return this.components.getByTag(e)}hasComponents(e){return this.components.has(e)}getMainComponent(e,t=!1){return this.graph.components.get(e,t)}getMainComponents(e){return this.graph.components.getArray(e)}getMainComponentsByTag(e){return this.graph.components.getByTag(e)}hasMainComponents(e){return this.graph.components.has(e)}getNode(e,t=!1){return this.nodes.get(e,t)}getNodes(e){return this.nodes.getArray(e)}getNodesByTag(e){return this.nodes.getByTag(e)}hasNodes(e){return this.nodes.has(e)}getMainNode(e,t=!1){return this.graph.nodes.get(e,t)}getMainNodes(e){return this.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.graph.nodes.getByTag(e)}hasMainNodes(e){return this.graph.nodes.has(e)}findNodeByName(e,t){const n=this.nodes.getArray(t);for(let t=0,r=n.length;t<r;++t)if(n[t].name===e)return n[t]}toJSON(){return this.graph.toJSON()}fromJSON(e){this.graph.clear(),this.graph.fromJSON(e)}toString(e=!1){const t=this.nodes.getArray(),n=this.components.count(),r=`System - ${t.length} nodes, ${n} components.`;return e?r+"\n"+t.map((e=>e.toString(!0))).join("\n"):r}_addNode(e){this.nodes.add(e)}_removeNode(e){this.nodes.remove(e)}_addNodeTag(e,t){this.nodes.addByTag(e,t)}_removeNodeTag(e,t){this.nodes.removeByTag(e,t)}_addComponent(e){if(e.isSystemSingleton&&this.components.has(e))throw new Error(`only one component of type '${e.typeName}' allowed per system`);this.components.add(e)}_removeComponent(e){this.components.remove(e)}_addComponentTag(e,t){this.components.addByTag(e,t)}_removeComponentTag(e,t){this.components.removeByTag(e,t)}}var Fi,Hi;!function(e){e[e.Node=0]="Node",e[e.Graph=1]="Graph",e[e.Main=2]="Main",e[e.System=3]="System"}(Fi||(Fi={}));class ji extends W{constructor(){super(...arguments),this._scope=Fi.Node,this._scopedNode=null,this._scopedGraph=null,this._activeComponent=null}get componentType(){return this.constructor.componentType}get followComponentSelection(){return this.constructor.followComponentSelection}get followNodeSelection(){return this.constructor.followNodeSelection}get retainSelection(){return this.constructor.retainSelection}get scope(){return this._scope}set scope(e){this._scope=e,this._activeComponent&&!this.isComponentInScope(this._activeComponent)&&(this.activeComponent=null)}get scopedNode(){return this._scopedNode}set scopedNode(e){e!==this._scopedNode&&(this._scopedNode=e,this._activeComponent&&!this.isComponentInScope(this._activeComponent)&&(this.activeComponent=null),this.onScopedComponents(),this.emit({type:"scoped-components"}))}get scopedGraph(){return this._scopedGraph}set scopedGraph(e){e!==this._scopedGraph&&(this._scopedGraph=e,this._activeComponent&&!this.isComponentInScope(this._activeComponent)&&(this.activeComponent=null),this.onScopedComponents(),this.emit({type:"scoped-components"}))}get scopedComponents(){switch(this._scope){case Fi.Node:return(this._scopedNode||this.node).getComponents(this.componentType);case Fi.Graph:return(this._scopedGraph?this._scopedGraph.innerGraph:this.graph).getComponents(this.componentType);case Fi.Main:return this.getMainComponents(this.componentType);case Fi.System:return this.getSystemComponents(this.componentType)}}get activeComponent(){return this._activeComponent}set activeComponent(e){const t=this.activeComponent;if(e!==t){if(t&&this.deactivateComponent(t),e){if(!this.isComponentInScope(e))throw new Error("can't activate, component out of scope");this.activateComponent(e)}this._activeComponent=e,this.onActiveComponent(t,e),this.emit({type:"active-component",previous:t,next:e})}}get selection(){return this.getSystemComponent(Q)}create(){super.create(),this.system.components.on(W,this.onComponent,this),this.followComponentSelection&&this.selection.selectedComponents.on(this.componentType,this.onSelectComponent,this),this.followNodeSelection&&this.selection.selectedNodes.on($,this.onSelectNode,this)}dispose(){this.activeComponent&&(this.activeComponent=null),this.system.components.off(W,this.onComponent,this),this.followComponentSelection&&this.selection.selectedComponents.off(this.componentType,this.onSelectComponent,this),this.followNodeSelection&&this.selection.selectedNodes.off($,this.onSelectNode,this),super.dispose()}activateComponent(e){}deactivateComponent(e){}onActiveComponent(e,t){}onScopedComponents(){}onComponent(e){e.remove&&e.object===this.activeComponent&&(this.activeComponent=null),this.isComponentInScope(e.object)&&(this.onScopedComponents(),this.emit({type:"scoped-components"}))}onSelectComponent(e){const t=e.object;this.isComponentInScope(t)&&(e.add?this.activeComponent=t:e.remove&&!this.retainSelection&&t===this.activeComponent&&(this.activeComponent=null))}onSelectNode(e){const t=e.object;if(this.isNodeInScope(t)){const n=t.getComponent(this.componentType);n&&this.onSelectComponent({type:n.typeName,object:n,add:e.add,remove:e.remove})}}isComponentInScope(e){if(!e.is(this.componentType))return!1;switch(this._scope){case Fi.Node:const t=this._scopedNode||this.node;return e.node===t;case Fi.Graph:const n=this._scopedGraph?this._scopedGraph.innerGraph:this.graph;return e.graph===n;case Fi.Main:return e.graph===this.system.graph;case Fi.System:return!0}return!1}isNodeInScope(e){switch(this._scope){case Fi.Node:return e===(this._scopedNode||this.node);case Fi.Graph:const t=this._scopedGraph?this._scopedGraph.innerGraph:this.graph;return e.graph===t;case Fi.Main:return e.graph===this.system.graph;case Fi.System:return!0}}}ji.typeName="CComponentProvider",ji.componentType=W,ji.followComponentSelection=!0,ji.followNodeSelection=!1,ji.retainSelection=!0,function(e){e[e.Graph=0]="Graph",e[e.Main=1]="Main",e[e.System=2]="System"}(Hi||(Hi={}));class Ui extends W{constructor(){super(...arguments),this._scope=Hi.Graph,this._scopedGraph=null,this._activeNode=null}get nodeType(){return this.constructor.nodeType}get followNodeSelection(){return this.constructor.followNodeSelection}get followComponentSelection(){return this.constructor.followComponentSelection}get retainSelection(){return this.constructor.retainSelection}get scope(){return this._scope}set scope(e){this._scope=e,this._activeNode&&!this.isNodeInScope(this._activeNode)&&(this.activeNode=null)}get scopedGraph(){return this._scopedGraph}set scopedGraph(e){e!==this._scopedGraph&&(this._scopedGraph=e,this._activeNode&&!this.isNodeInScope(this._activeNode)&&(this.activeNode=null),this.onScopedNodes(),this.emit({type:"scoped-nodes"}))}get scopedNodes(){switch(this._scope){case Hi.Graph:return(this._scopedGraph?this._scopedGraph.innerGraph:this.graph).getNodes(this.nodeType);case Hi.Main:return this.getMainNodes(this.nodeType);case Hi.System:return this.getSystemNodes(this.nodeType)}}get activeNode(){return this._activeNode}set activeNode(e){const t=this.activeNode;if(e!==t){if(t&&this.deactivateNode(t),e){if(!this.isNodeInScope(e))throw new Error("can't activate, node out of scope");this.activateNode(e)}this._activeNode=e,this.onActiveNode(t,e),this.emit({type:"active-node",previous:t,next:e})}}get selection(){return this.getSystemComponent(Q)}create(){super.create(),this.system.nodes.on($,this.onNode,this),this.followNodeSelection&&this.selection.selectedNodes.on(this.nodeType,this.onSelectNode,this),this.followComponentSelection&&this.selection.selectedComponents.on(W,this.onSelectComponent,this)}dispose(){this.activeNode&&(this.activeNode=null),this.system.nodes.off($,this.onNode,this),this.followNodeSelection&&this.selection.selectedNodes.off(this.nodeType,this.onSelectNode,this),this.followComponentSelection&&this.selection.selectedComponents.off(W,this.onSelectComponent,this),super.dispose()}activateNode(e){}deactivateNode(e){}onActiveNode(e,t){}onScopedNodes(){}onNode(e){e.remove&&e.object===this.activeNode&&(this.activeNode=null),this.isNodeInScope(e.object)&&(this.onScopedNodes(),this.emit({type:"scoped-nodes"}))}onSelectNode(e){const t=e.object;this.isNodeInScope(t)&&(e.add?this.activeNode=t:e.remove&&!this.retainSelection&&t===this.activeNode&&(this.activeNode=null))}onSelectComponent(e){const t=e.object.node;t.is(this.nodeType)&&this.onSelectNode({type:t.typeName,object:t,add:e.add,remove:e.remove})}isNodeInScope(e){if(!e.is(this.nodeType))return!1;switch(this._scope){case Hi.Graph:const t=this._scopedGraph?this._scopedGraph.innerGraph:this.graph;return e.graph===t;case Hi.Main:return e.graph===this.system.graph;case Hi.System:return!0}return!1}}Ui.typeName="CNodeProvider",Ui.nodeType=$,Ui.followNodeSelection=!0,Ui.followComponentSelection=!1,Ui.retainSelection=!0;const Yi=Math.PI,Vi=.5*Yi;var $i;!function(e){e[e.Linear=0]="Linear",e[e.EaseQuad=1]="EaseQuad",e[e.EaseInQuad=2]="EaseInQuad",e[e.EaseOutQuad=3]="EaseOutQuad",e[e.EaseCubic=4]="EaseCubic",e[e.EaseInCubic=5]="EaseInCubic",e[e.EaseOutCubic=6]="EaseOutCubic",e[e.EaseQuart=7]="EaseQuart",e[e.EaseInQuart=8]="EaseInQuart",e[e.EaseOutQuart=9]="EaseOutQuart",e[e.EaseQuint=10]="EaseQuint",e[e.EaseInQuint=11]="EaseInQuint",e[e.EaseOutQuint=12]="EaseOutQuint",e[e.EaseSine=13]="EaseSine",e[e.EaseInSine=14]="EaseInSine",e[e.EaseOutSine=15]="EaseOutSine"}($i||($i={}));const Wi={Linear:function(e){return e},EaseQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},EaseInQuad:function(e){return e*e},EaseOutQuad:function(e){return e*(2-e)},EaseCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},EaseInCubic:function(e){return e*e*e},EaseOutCubic:function(e){return--e*e*e+1},EaseQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},EaseInQuart:function(e){return e*e*e*e},EaseOutQuart:function(e){return 1- --e*e*e*e},EaseQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},EaseInQuint:function(e){return e*e*e*e*e},EaseOutQuint:function(e){return 1+--e*e*e*e*e},EaseSine:function(e){return-.5*(Math.cos(e*Yi)-1)},EaseInSine:function(e){return 1-Math.cos(e*Vi)},EaseOutSine:function(e){return Math.sin(e*Vi)}};class Gi extends W{constructor(){super(...arguments),this.ins=this.addInputs(Gi.ins),this.outs=this.addOutputs(Gi.outs),this.targets=[],this.states={},this._currentValues=null,this._targetState=null,this._startTime=0,this._easingFunction=null}getState(e){return this.states[e]}setState(e){return e.id=e.id||i(6),this.states[e.id]=e,e.id}deleteState(e){delete this.states[e]}clear(){this.targets.forEach((e=>e.property.off("dispose",this.onPropertyDispose,this))),this.targets.length=0,this.states={},this._currentValues=null,this._targetState=null,this._startTime=0,this._easingFunction=null}dispose(){this.clear(),super.dispose()}tweenTo(e,t){const n=this.states[e],r=this.outs;if(n)return this._targetState=n,this._currentValues=this.getCurrentValues(),this._startTime=t,this._easingFunction=(s=n.curve,Wi[$i[s]]),r.switched.setValue(!1),r.tweening.setValue(!0),r.start.set(),!0;var s}update(e){const t=this.ins,n=this.states,r=t.id.value,s=n[r];if(s){if((t.tween.changed||t.recall.changed)&&(t.curve.setValue(s.curve),t.duration.setValue(s.duration),t.threshold.setValue(s.threshold)),t.tween.changed)return this.tweenTo(r,e.secondsElapsed),!0;if(t.recall.changed)return this.setValues(s.values),!0;(t.curve.changed||t.duration.changed||t.threshold.changed)&&(s.curve=t.curve.value,s.duration=t.duration.value,s.threshold=t.threshold.value),t.store.changed&&(s.values=this.getCurrentValues()),t.delete.changed&&delete n[r]}else if(r&&t.store.changed){const e={id:this.ins.id.value,curve:this.ins.curve.getValidatedValue(),duration:this.ins.duration.value,threshold:this.ins.threshold.value,values:this.getCurrentValues()};n[e.id]=e}return!0}tick(e){const t=this._targetState;if(!t)return!1;const n=this.outs,r=this._currentValues,s=this._startTime,i=e.secondsElapsed-s,o=i/t.duration;if(o<1){const e=this._easingFunction(o),s=o>=t.threshold&&!n.switched.value;this.setValues(r,t.values,e,s),n.time.setValue(i),n.completed.setValue(o),s&&(n.switched.setValue(!0),n.switch.set())}else this.setValues(r,t.values,1,!n.switched.value),n.tweening.setValue(!1),n.time.setValue(t.duration),n.completed.setValue(1),n.end.set(),n.switched.value||n.switched.setValue(!0),this._currentValues=null,this._targetState=null,this._startTime=0,this._easingFunction=null;return!0}addTargetProperty(e){if("object"===e.type||e.schema.event)throw new Error("can't add object or event properties");if(this.getTarget(e))throw new Error("can't add, target already exists");e.on("dispose",this.onPropertyDispose,this);const t="number"===e.type&&!e.schema.options,n=e.isArray();this.targets.push({property:e,isNumber:t,isArray:n});const r=this.states,s=Object.keys(r);for(let t=0,n=s.length;t<n;++t)r[s[t]].values.push(e.cloneValue());this._currentValues&&this._currentValues.push(e.cloneValue())}removeTargetProperty(e){const t=this.getTarget(e);if(!t)throw new Error("can't remove, target doesn't exist");this.removeTarget(t)}hasTargetProperty(e){return!!this.getTarget(e)}fromJSON(e){super.fromJSON(e),e.state&&this.stateFromJSON(e.state)}stateFromJSON(e){e.targets&&(this.targets=e.targets.map((e=>{const t=this.getProperty(e.id,e.key);return{property:t,isNumber:!!t&&"number"===t.type&&!t.schema.options,isArray:!!t&&t.isArray()}}))),e.states&&e.states.forEach((e=>this.states[e.id]=e)),this._startTime=0}toJSON(){const e=super.toJSON(),t=this.stateToJSON();return t&&(e.state=t),e}stateToJSON(){const e={},t=this.targets;t.length>0&&(e.targets=t.map((e=>({id:e.property.group.linkable.id,key:e.property.key}))));const n=Object.keys(this.states);return n.length>0&&(e.states=n.map((e=>this.states[e]))),e}getTargetProperties(){return this.targets.map((e=>e.property))}onPropertyDispose(e){e.property.off("dispose",this.onPropertyDispose,this);const t=this.getTarget(e.property);this.removeTarget(t)}removeTarget(e){const t=this.targets.indexOf(e);this.targets.splice(t,1),this.removeChannel(t)}removeChannel(e){const t=this.states,n=Object.keys(t);for(let r=0,s=n.length;r<s;++r)t[n[r]].values.splice(e,1);this._currentValues&&this._currentValues.splice(e,1)}getTarget(e){return this.targets.find((t=>t.property===e))}getProperty(e,t){const n=this.system.components.getById(e);return n?n.ins[t]:null}setValues(e,t,n,r){const s=this.targets;for(let i=0,o=s.length;i<o;++i){const o=s[i],a=o.property;if(o.isNumber&&t){const r=e[i],s=t[i];if(o.isArray){let e=!1;for(let t=0,i=r.length;t<i;++t){const i=r[t]+n*(s[t]-r[t]);e=a.value[t]!==i||e,a.value[t]=i}e&&a.set()}else{const e=r+n*(s-r);e!==a.value&&a.setValue(e)}}else if(!t||r){const n=t?t[i]:e[i];if(o.isArray){let e=!1;for(let t=0,r=n.length;t<r;++t)e=a.value[t]!==n[t]||e,a.value[t]=n[t];e&&a.set()}else n!==a.value&&a.setValue(n)}}}getCurrentValues(){const e=[],t=this.targets;for(let n=0,r=t.length;n<r;++n)e.push(t[n].property.cloneValue());return e}}Gi.typeName="CTweenMachine",Gi.ins={id:R("Snapshot.Id"),curve:N("Tween.Curve",$i),duration:S("Tween.Duration",2),threshold:C("Tween.Threshold",.5),tween:B("Control.Tween"),recall:B("Control.Recall"),store:B("Control.Store"),delete:B("Control.Delete"),clear:B("Control.Clear")},Gi.outs={count:T("Snapshots.Count"),tweening:O("Tween.IsTweening"),time:S("Tween.Time"),completed:C("Tween.Completed"),switched:O("Tween.Switched"),start:B("Tween.Start"),switch:B("Tween.Switch"),end:B("Tween.End")};class qi extends W{constructor(e,t){super(e,t),this.ins=this.addInputs(qi.ins),this.outs=this.addOutputs(qi.outs),this._fullscreenElement=null,this.onFullscreenChange=this.onFullscreenChange.bind(this);const n=document.documentElement,r=n.requestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullscreen;this.outs.fullscreenAvailable.setValue(!!r),this.ins.toggle.on("value",this.toggle,this)}get fullscreenElement(){return this._fullscreenElement}set fullscreenElement(e){e!==this._fullscreenElement&&(this._fullscreenElement&&this._fullscreenElement.removeEventListener("fullscreenchange",this.onFullscreenChange),this._fullscreenElement=e,e&&e.addEventListener("fullscreenchange",this.onFullscreenChange))}update(e){return!0}toggle(){const e=this.outs,t=this._fullscreenElement;if(t){const n=e.fullscreenActive.value;if(!n&&e.fullscreenAvailable.value)t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else if(n){const e=document;e.exitFullscreen?e.exitFullscreen():e.cancelFullScreen?e.cancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()}}}onFullscreenChange(e){const t=document,n=t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement;this.outs.fullscreenActive.setValue(!!n)}}qi.typeName="CFullscreen",qi.ins={toggle:B("Fullscreen.Toggle")},qi.outs={fullscreenAvailable:O("Fullscreen.Available",!1),fullscreenActive:O("Fullscreen.Active",!1)};class Xi extends W{constructor(){super(...arguments),this._title="Untitled",this._timerStart=0}startTimer(){0===this._timerStart&&(this._timerStart=Date.now())}resetTimer(){this._timerStart=0}getTimerTime(){return this._timerStart>0?Date.now()-this._timerStart:0}setTitle(e){this._title=e}sendProperty(e,t){if("function"==typeof ga){const n=void 0!==t?t.toString():void 0;ga("send","event",this._title,e,n)}}}Xi.typeName="CVAnalytics",Xi.text="Analytics",Xi.icon="",Xi.isSystemSingleton=!0;class Ki{constructor(e,t,n){const r=this;let s,i=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Ji=new Ki;class Zi extends W{constructor(){super(...arguments),this.ins=this.addInputs(Zi.ins),this.outs=this.addOutputs(Zi.outs),this._loadingManager=new Qi(this),this._baseUrl=window.location.href,this._initialLoad=!1}get loadingManager(){return this._loadingManager}get baseUrl(){return this._baseUrl}set baseUrl(e){this._baseUrl=new URL(e,window.location.href).href}get initialLoad(){return this._initialLoad}set initialLoad(e){this._initialLoad=e}getAssetName(e){return e.split("/").pop()}getAssetUrl(e){const t=new URL(e,this._baseUrl).href;return this.loadingManager.resolveURL(t)}getAssetPath(e){const t=this._baseUrl,n=e.indexOf(t);return n>=0?e.substr(n+t.length):e}getAssetBasePath(e){const t=this.getAssetPath(e).split("/");t.pop();const n=t.join("/");return n?n+"/":n}getRelativeAssetPath(e,t){const n=this.getAssetUrl(e),r=this.getAssetUrl(t),s=n.indexOf(r);return s>=0?n.substr(s+r.length):this.getAssetPath(n)}create(){super.create()}update(){const{ins:e,outs:t}=this;if(e.busy.changed){const n=e.busy.value||this._loadingManager.isBusy;t.busy.setValue(n),n||t.completed.set()}return!0}}Zi.typeName="CVAssetManager",Zi.text="AssetManager",Zi.icon="",Zi.isSystemSingleton=!0,Zi.ins={busy:O("State.Busy"),baseUrlValid:O("Settings.BaseURLValid")},Zi.outs={busy:O("State.Busy"),completed:B("State.Completed")};class Qi extends Ki{constructor(e){super(),this._manager=e,this._isBusy=!1,this.onStart=this.onLoadingStart.bind(this),this.onProgress=this.onLoadingProgress.bind(this),this.onLoad=this.onLoadingCompleted.bind(this),this.onError=this.onLoadingError.bind(this)}get isBusy(){return this._isBusy}onLoadingStart(){this._isBusy=!0,this._manager.ins.busy.set()}onLoadingProgress(e,t,n){0}onLoadingCompleted(){this._isBusy=!1,this._manager.ins.busy.set()}onLoadingError(){this._isBusy=!1,this._manager.ins.busy.set()}}const eo=async function(e,t,n){return fetch(e,{headers:{Accept:"text/plain","Content-Type":"text/plain"},method:t,credentials:"same-origin",body:n}).then((e=>{if(!e.ok)throw new Error(`status: ${e.status}`);return e.text()})).catch((n=>{throw console.warn(`fetch.text (${t} at '${e}'), error: ${n.message}`),n}))},to=async function(e,t,n,r=!0){const s={method:t,credentials:"include",body:n};return r||(s.headers={"Content-Type":"application/octet-stream"}),fetch(e,s).then((e=>{if(!e.ok)throw new Error(`status: ${e.status}`);return e})).catch((n=>{throw console.warn(`fetch.file (${t} at '${e}'), error: ${n.message}`),n}))};class no{constructor(e){this._loadingManager=e}async get(e){return this._loadingManager.itemStart(e),fetch(e,{headers:{Accept:"application/json"}}).then((t=>{if(!t.ok)throw this._loadingManager.itemError(e),this._loadingManager.itemEnd(e),new Error(`failed to fetch from '${e}', status: ${t.status} ${t.statusText}`);return this._loadingManager.itemEnd(e),t.json()}))}}class ro{constructor(e){this.manager=void 0!==e?e:Ji,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,s){n.load(e,r,t,s)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const so={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},io={};class oo extends Error{constructor(e,t){super(e),this.response=t}}class ao extends ro{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=so.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout((()=>{t&&t(s),this.manager.itemEnd(e)}),0),s;if(void 0!==io[e])return void io[e].push({onLoad:t,onProgress:n,onError:r});io[e]=[],io[e].push({onLoad:t,onProgress:n,onError:r});const i=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(i).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=io[e],r=t.body.getReader(),s=t.headers.get("Content-Length"),i=s?parseInt(s):0,o=0!==i;let a=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:s})=>{if(r)e.close();else{a+=s.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:i});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(s),t()}}))}()}});return new Response(l)}throw new oo(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{so.add(e,t);const n=io[e];delete io[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=io[e];if(void 0===n)throw this.manager.itemError(e),t;delete io[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}const lo=new WeakMap;class co extends ro{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new ao(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(e=>{this.decodeDracoFile(e,t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};return this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(lo.has(e)){const t=lo.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,i=e.byteLength,o=this._getWorker(s,i).then((n=>(r=n,new Promise(((n,i)=>{r._callbacks[s]={resolve:n,reject:i},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return o.catch((()=>!0)).then((()=>{r&&s&&this._releaseTask(r,s)})),lo.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new Ln;e.index&&t.setIndex(new gn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,i=r.array,o=r.itemSize;t.setAttribute(s,new gn(i,o))}return t}_loadLibrary(e,t){const n=new ao(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=uo.toString(),s=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function uo(){let e,t;function n(e,t,n,r,s,i){const o=i.num_components(),a=n.num_points()*o,l=a*s.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,s),d=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,i,c,l,d);const u=new s(e.HEAPF32.buffer,d,a).slice();return e._free(d),{name:r,array:u,itemSize:o}}onmessage=function(r){const s=r.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=s.buffer,i=s.taskConfig;t.then((e=>{const t=e.draco,o=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(r),r.byteLength);try{const e=function(e,t,r,s){const i=s.attributeIDs,o=s.attributeTypes;let a,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,l=t.DecodeBufferToMesh(r,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,l=t.DecodeBufferToPointCloud(r,a)}if(!l.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const d={index:null,attributes:[]};for(const r in i){const l=self[o[r]];let c,u;if(s.useUniqueIDs)u=i[r],c=t.GetAttributeByUniqueId(a,u);else{if(u=t.GetAttributeId(a,e[i[r]]),-1===u)continue;c=t.GetAttribute(a,u)}d.attributes.push(n(e,t,a,r,l,c))}c===e.TRIANGULAR_MESH&&(d.index=function(e,t,n){const r=3*n.num_faces(),s=4*r,i=e._malloc(s);t.GetTrianglesUInt32Array(n,s,i);const o=new Uint32Array(e.HEAPF32.buffer,i,r).slice();return e._free(i),{array:o,itemSize:1}}(e,t,a));return e.destroy(a),d}(t,o,a,i),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:e},r)}catch(e){console.error(e),self.postMessage({type:"error",id:s.id,error:e.message})}finally{t.destroy(a),t.destroy(o)}}))}}}class ho{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mo extends ts{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ne*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*te*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ne*Math.atan(Math.tan(.5*te*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*te*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const i=this.view;if(null!==this.view&&this.view.enabled){const e=i.fullWidth,o=i.fullHeight;s+=i.offsetX*r/e,t-=i.offsetY*n/o,r*=i.width/e,n*=i.height/o}const o=this.filmOffset;0!==o&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const po=new fe,fo=new he,go=new he;class vo extends es{constructor(){super(new mo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mn(4,2),this._viewportCount=6,this._viewports=[new tr(2,1,1,1),new tr(0,1,1,1),new tr(3,1,1,1),new tr(1,1,1,1),new tr(3,0,1,1),new tr(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),fo.setFromMatrixPosition(e.matrixWorld),n.position.copy(fo),go.copy(n.position),go.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(go),n.updateMatrixWorld(),r.makeTranslation(-fo.x,-fo.y,-fo.z),po.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(po)}}class yo extends Yr{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new vo}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _o extends es{constructor(){super(new mo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ne*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;n===t.fov&&r===t.aspect&&s===t.far||(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class bo extends Yr{constructor(e,t,n=0,r=Math.PI/3,s=0,i=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ft.DefaultUp),this.updateMatrix(),this.target=new ft,this.distance=n,this.angle=r,this.penumbra=s,this.decay=i,this.map=null,this.shadow=new _o}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class wo extends Qt{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new un(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class xo extends Qt{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new un(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mo extends xo{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return se(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new un(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new un(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new un(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class So extends gn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const To=new he,Co=new he,Eo=new he,ko=new he,Lo=new he,Ao=new he,Do=new he,Oo=new he,Ro=new he,Po=new he;class No{constructor(e=new he,t=new he,n=new he){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),To.subVectors(e,t),r.cross(To);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){To.subVectors(r,t),Co.subVectors(n,t),Eo.subVectors(e,t);const i=To.dot(To),o=To.dot(Co),a=To.dot(Eo),l=Co.dot(Co),c=Co.dot(Eo),d=i*l-o*o;if(0===d)return s.set(-2,-1,-1);const u=1/d,h=(l*a-o*c)*u,m=(i*c-o*a)*u;return s.set(1-h-m,m,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ko),ko.x>=0&&ko.y>=0&&ko.x+ko.y<=1}static getUV(e,t,n,r,s,i,o,a){return this.getBarycoord(e,t,n,r,ko),a.set(0,0),a.addScaledVector(s,ko.x),a.addScaledVector(i,ko.y),a.addScaledVector(o,ko.z),a}static isFrontFacing(e,t,n,r){return To.subVectors(n,t),Co.subVectors(e,t),To.cross(Co).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return To.subVectors(this.c,this.b),Co.subVectors(this.a,this.b),.5*To.cross(Co).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return No.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return No.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return No.getUV(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return No.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return No.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let i,o;Lo.subVectors(r,n),Ao.subVectors(s,n),Oo.subVectors(e,n);const a=Lo.dot(Oo),l=Ao.dot(Oo);if(a<=0&&l<=0)return t.copy(n);Ro.subVectors(e,r);const c=Lo.dot(Ro),d=Ao.dot(Ro);if(c>=0&&d<=c)return t.copy(r);const u=a*d-c*l;if(u<=0&&a>=0&&c<=0)return i=a/(a-c),t.copy(n).addScaledVector(Lo,i);Po.subVectors(e,s);const h=Lo.dot(Po),m=Ao.dot(Po);if(m>=0&&h<=m)return t.copy(s);const p=h*l-a*m;if(p<=0&&l>=0&&m<=0)return o=l/(l-m),t.copy(n).addScaledVector(Ao,o);const f=c*m-h*d;if(f<=0&&d-c>=0&&h-m>=0)return Do.subVectors(s,r),o=(d-c)/(d-c+(h-m)),t.copy(r).addScaledVector(Do,o);const g=1/(f+p+u);return i=p*g,o=u*g,t.copy(n).addScaledVector(Lo,i).addScaledVector(Ao,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Io=new fe,zo=new Xe,Bo=new je,Fo=new he,Ho=new he,jo=new he,Uo=new he,Yo=new he,Vo=new he,$o=new he,Wo=new he,Go=new he,qo=new mn,Xo=new mn,Ko=new mn,Jo=new he,Zo=new he;class Qo extends ft{constructor(e=new Ln,t=new wo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Bo.copy(n.boundingSphere),Bo.applyMatrix4(s),!1===e.ray.intersectsSphere(Bo))return;if(Io.copy(s).invert(),zo.copy(e.ray).applyMatrix4(Io),null!==n.boundingBox&&!1===zo.intersectsBox(n.boundingBox))return;let i;const o=n.index,a=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,d=n.attributes.uv,u=n.attributes.uv2,h=n.groups,m=n.drawRange;if(null!==o)if(Array.isArray(r))for(let n=0,s=h.length;n<s;n++){const s=h[n],p=r[s.materialIndex];for(let n=Math.max(s.start,m.start),r=Math.min(o.count,Math.min(s.start+s.count,m.start+m.count));n<r;n+=3){const r=o.getX(n),h=o.getX(n+1),m=o.getX(n+2);i=ea(this,p,e,zo,a,l,c,d,u,r,h,m),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=s.materialIndex,t.push(i))}}else{for(let n=Math.max(0,m.start),s=Math.min(o.count,m.start+m.count);n<s;n+=3){const s=o.getX(n),h=o.getX(n+1),m=o.getX(n+2);i=ea(this,r,e,zo,a,l,c,d,u,s,h,m),i&&(i.faceIndex=Math.floor(n/3),t.push(i))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,s=h.length;n<s;n++){const s=h[n],o=r[s.materialIndex];for(let n=Math.max(s.start,m.start),r=Math.min(a.count,Math.min(s.start+s.count,m.start+m.count));n<r;n+=3){i=ea(this,o,e,zo,a,l,c,d,u,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=s.materialIndex,t.push(i))}}else{for(let n=Math.max(0,m.start),s=Math.min(a.count,m.start+m.count);n<s;n+=3){i=ea(this,r,e,zo,a,l,c,d,u,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),t.push(i))}}}}function ea(e,t,n,r,s,i,o,a,l,c,d,u){Fo.fromBufferAttribute(s,c),Ho.fromBufferAttribute(s,d),jo.fromBufferAttribute(s,u);const h=e.morphTargetInfluences;if(i&&h){$o.set(0,0,0),Wo.set(0,0,0),Go.set(0,0,0);for(let e=0,t=i.length;e<t;e++){const t=h[e],n=i[e];0!==t&&(Uo.fromBufferAttribute(n,c),Yo.fromBufferAttribute(n,d),Vo.fromBufferAttribute(n,u),o?($o.addScaledVector(Uo,t),Wo.addScaledVector(Yo,t),Go.addScaledVector(Vo,t)):($o.addScaledVector(Uo.sub(Fo),t),Wo.addScaledVector(Yo.sub(Ho),t),Go.addScaledVector(Vo.sub(jo),t)))}Fo.add($o),Ho.add(Wo),jo.add(Go)}e.isSkinnedMesh&&(e.boneTransform(c,Fo),e.boneTransform(d,Ho),e.boneTransform(u,jo));const m=function(e,t,n,r,s,i,o,a){let l;if(l=1===t.side?r.intersectTriangle(o,i,s,!0,a):r.intersectTriangle(s,i,o,2!==t.side,a),null===l)return null;Zo.copy(a),Zo.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Zo);return c<n.near||c>n.far?null:{distance:c,point:Zo.clone(),object:e}}(e,t,n,r,Fo,Ho,jo,Jo);if(m){a&&(qo.fromBufferAttribute(a,c),Xo.fromBufferAttribute(a,d),Ko.fromBufferAttribute(a,u),m.uv=No.getUV(Jo,Fo,Ho,jo,qo,Xo,Ko,new mn)),l&&(qo.fromBufferAttribute(l,c),Xo.fromBufferAttribute(l,d),Ko.fromBufferAttribute(l,u),m.uv2=No.getUV(Jo,Fo,Ho,jo,qo,Xo,Ko,new mn));const e={a:c,b:d,c:u,normal:new he,materialIndex:0};No.getNormal(Fo,Ho,jo,e.normal),m.face=e}return m}const ta=new fe,na=new fe,ra=[],sa=new fe,ia=new Qo;class oa extends Qo{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new So(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let e=0;e<n;e++)this.setMatrixAt(e,sa)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ia.geometry=this.geometry,ia.material=this.material,void 0!==ia.material)for(let s=0;s<r;s++){this.getMatrixAt(s,ta),na.multiplyMatrices(n,ta),ia.matrixWorld=na,ia.raycast(e,ra);for(let e=0,n=ra.length;e<n;e++){const n=ra[e];n.instanceId=s,n.object=this,t.push(n)}ra.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new So(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class aa{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let i;n:{r:if(!(e<r)){for(let i=n+2;;){if(void 0===r){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===i)break;if(s=r,r=t[++n],e<r)break t}i=t.length;break n}if(e>=s)break e;{const o=t[1];e<o&&(n=2,s=o);for(let i=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===i)break;if(r=s,s=t[--n-1],e>=s)break t}i=n,n=0}}for(;n<i;){const r=n+i>>>1;e<t[r]?i=r:n=r+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let e=0;e!==r;++e)t[e]=n[s+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class la extends ro{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,i=so.get(e);if(void 0!==i)return s.manager.itemStart(e),setTimeout((function(){t&&t(i),s.manager.itemEnd(e)}),0),i;const o=wn("img");function a(){c(),so.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(t){c(),r&&r(t),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class ca extends ro{constructor(e){super(e)}load(e,t,n,r){const s=new er,i=new la(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(e){s.image=e,s.needsUpdate=!0,void 0!==t&&t(s)}),n,r),s}}class da extends ro{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,i=so.get(e);if(void 0!==i)return s.manager.itemStart(e),setTimeout((function(){t&&t(i),s.manager.itemEnd(e)}),0),i;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(s.options,{colorSpaceConversion:"none"}))})).then((function(n){so.add(e,n),t&&t(n),s.manager.itemEnd(e)})).catch((function(t){r&&r(t),s.manager.itemError(e),s.manager.itemEnd(e)})),s.manager.itemStart(e)}}class ua{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Xt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=re()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=re()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=re()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ha=new he;class ma{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ha.fromBufferAttribute(this,t),ha.applyMatrix4(e),this.setXYZ(t,ha.x,ha.y,ha.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ha.fromBufferAttribute(this,t),ha.applyNormalMatrix(e),this.setXYZ(t,ha.x,ha.y,ha.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ha.fromBufferAttribute(this,t),ha.transformDirection(e),this.setXYZ(t,ha.x,ha.y,ha.z);return this}setX(e,t){return this.normalized&&(t=de(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=de(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=de(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=de(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ce(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ce(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ce(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ce(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=de(t,this.array),n=de(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=de(t,this.array),n=de(n,this.array),r=de(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=de(t,this.array),n=de(n,this.array),r=de(r,this.array),s=de(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new gn(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ma(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class pa extends Qt{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new un(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const fa="\\[\\]\\.:\\/",va=new RegExp("[\\[\\]\\.:\\/]","g"),ya="[^\\[\\]\\.:\\/]",_a="[^"+fa.replace("\\.","")+"]",ba=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",ya)+/(WCOD+)?/.source.replace("WCOD",_a)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ya)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ya)+"$"),wa=["material","materials","bones","map"];class xa{constructor(e,t,n){this.path=t,this.parsedPath=n||xa.parseTrackName(t),this.node=xa.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new xa.Composite(e,t,n):new xa(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(va,"")}static parseTrackName(e){const t=ba.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==wa.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const s=e[r];if(s.name===t||s.uuid===t)return s;const i=n(s.children);if(i)return i}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=xa.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const i=e[r];if(void 0===i){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[s]&&(s=e.morphTargetDictionary[s])}a=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=s}else void 0!==i.fromArray&&void 0!==i.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(a=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xa.Composite=class{constructor(e,t,n){const r=n||xa.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},xa.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},xa.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},xa.prototype.GetterByBindingType=[xa.prototype._getValue_direct,xa.prototype._getValue_array,xa.prototype._getValue_arrayElement,xa.prototype._getValue_toArray],xa.prototype.SetterByBindingTypeAndVersioning=[[xa.prototype._setValue_direct,xa.prototype._setValue_direct_setNeedsUpdate,xa.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xa.prototype._setValue_array,xa.prototype._setValue_array_setNeedsUpdate,xa.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xa.prototype._setValue_arrayElement,xa.prototype._setValue_arrayElement_setNeedsUpdate,xa.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xa.prototype._setValue_fromArray,xa.prototype._setValue_fromArray_setNeedsUpdate,xa.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];const Ma=new he,Sa=new tr,Ta=new tr,Ca=new he,Ea=new fe;class ka extends Qo{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new fe,this.bindMatrixInverse=new fe}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new tr,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Sa.fromBufferAttribute(r.attributes.skinIndex,e),Ta.fromBufferAttribute(r.attributes.skinWeight,e),Ma.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Ta.getComponent(e);if(0!==r){const s=Sa.getComponent(e);Ea.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),t.addScaledVector(Ca.copy(Ma).applyMatrix4(Ea),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class La extends Nn{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}const Aa=new fe,Da=new Xe,Oa=new je,Ra=new he;class Pa extends ft{constructor(e=new Ln,t=new pa){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Oa.copy(n.boundingSphere),Oa.applyMatrix4(r),Oa.radius+=s,!1===e.ray.intersectsSphere(Oa))return;Aa.copy(r).invert(),Da.copy(e.ray).applyMatrix4(Aa);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,i.start),s=Math.min(l.count,i.start+i.count);n<s;n++){const s=l.getX(n);Ra.fromBufferAttribute(c,s),Na(Ra,s,a,r,e,t,this)}}else{for(let n=Math.max(0,i.start),s=Math.min(c.count,i.start+i.count);n<s;n++)Ra.fromBufferAttribute(c,n),Na(Ra,n,a,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Na(e,t,n,r,s,i,o){const a=Da.distanceSqToPoint(e);if(a<n){const n=new he;Da.closestPointToPoint(e,n),n.applyMatrix4(r);const l=s.ray.origin.distanceTo(n);if(l<s.near||l>s.far)return;i.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:o})}}class Ia extends ft{constructor(){super(),this.isGroup=!0,this.type="Group"}}class za extends aa{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,i=e+1,o=r[s],a=r[i];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:s=e,o=2*t-n;break;case 2402:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:i=e,a=2*n-t;break;case 2402:i=1,a=n+r[1]-r[0];break;default:i=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=s*c,this._offsetNext=i*c}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,d=this._offsetNext,u=this._weightPrev,h=this._weightNext,m=(n-t)/(r-t),p=m*m,f=p*m,g=-u*f+2*u*p-u*m,v=(1+u)*f+(-1.5-2*u)*p+(-.5+u)*m+1,y=(-1-h)*f+(1.5+h)*p+.5*m,_=h*f-h*p;for(let e=0;e!==o;++e)s[e]=g*i[c+e]+v*i[l+e]+y*i[a+e]+_*i[d+e];return s}}class Ba extends aa{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(r-t),d=1-c;for(let e=0;e!==o;++e)s[e]=i[l+e]*d+i[a+e]*c;return s}}class Fa extends aa{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}function Ha(e,t,n){return Ua(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function ja(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Ua(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ya(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function Va(e,t,n){const r=e.length,s=new e.constructor(r);for(let i=0,o=0;o!==r;++i){const r=n[i]*t;for(let n=0;n!==t;++n)s[o++]=e[r+n]}return s}function $a(e,t,n,r){let s=1,i=e[0];for(;void 0!==i&&void 0===i[r];)i=e[s++];if(void 0===i)return;let o=i[r];if(void 0!==o)if(Array.isArray(o))do{o=i[r],void 0!==o&&(t.push(i.time),n.push.apply(n,o)),i=e[s++]}while(void 0!==i);else if(void 0!==o.toArray)do{o=i[r],void 0!==o&&(t.push(i.time),o.toArray(n,n.length)),i=e[s++]}while(void 0!==i);else do{o=i[r],void 0!==o&&(t.push(i.time),n.push(o)),i=e[s++]}while(void 0!==i)}class Wa{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ja(t,this.TimeBufferType),this.values=ja(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ja(e.times,Array),values:ja(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Fa(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ba(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new za(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case jt:t=this.InterpolantFactoryMethodDiscrete;break;case Ut:t=this.InterpolantFactoryMethodLinear;break;case Yt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jt;case this.InterpolantFactoryMethodLinear:return Ut;case this.InterpolantFactoryMethodSmooth:return Yt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,i=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==s||i!==r){s>=i&&(i=Math.max(i,1),s=i-1);const e=this.getValueSize();this.times=Ha(n,s,i),this.values=Ha(this.values,s*e,i*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let i=null;for(let t=0;t!==s;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==i&&i>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,i),e=!1;break}i=r}if(void 0!==r&&Ua(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=Ha(this.times),t=Ha(this.values),n=this.getValueSize(),r=this.getInterpolation()===Yt,s=e.length-1;let i=1;for(let o=1;o<s;++o){let s=!1;const a=e[o];if(a!==e[o+1]&&(1!==o||a!==e[0]))if(r)s=!0;else{const e=o*n,r=e-n,i=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[i+o]){s=!0;break}}}if(s){if(o!==i){e[i]=e[o];const r=o*n,s=i*n;for(let e=0;e!==n;++e)t[s+e]=t[r+e]}++i}}if(s>0){e[i]=e[s];for(let e=s*n,r=i*n,o=0;o!==n;++o)t[r+o]=t[e+o];++i}return i!==e.length?(this.times=Ha(e,0,i),this.values=Ha(t,0,i*n)):(this.times=e,this.values=t),this}clone(){const e=Ha(this.times,0),t=Ha(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Wa.prototype.TimeBufferType=Float32Array,Wa.prototype.ValueBufferType=Float32Array,Wa.prototype.DefaultInterpolation=Ut;class Ga extends Wa{}Ga.prototype.ValueTypeName="number";class qa extends aa{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,o=this.valueSize,a=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)ue.slerpFlat(s,0,i,l-o,i,l,a);return s}}class Xa extends Wa{InterpolantFactoryMethodLinear(e){return new qa(this.times,this.values,this.getValueSize(),e)}}Xa.prototype.ValueTypeName="quaternion",Xa.prototype.DefaultInterpolation=Ut,Xa.prototype.InterpolantFactoryMethodSmooth=void 0;class Ka extends Wa{}Ka.prototype.ValueTypeName="vector";class Ja extends Wa{}Ja.prototype.ValueTypeName="bool",Ja.prototype.ValueBufferType=Array,Ja.prototype.DefaultInterpolation=jt,Ja.prototype.InterpolantFactoryMethodLinear=void 0,Ja.prototype.InterpolantFactoryMethodSmooth=void 0;class Za extends Wa{}Za.prototype.ValueTypeName="color";class Qa extends Wa{}Qa.prototype.ValueTypeName="string",Qa.prototype.ValueBufferType=Array,Qa.prototype.DefaultInterpolation=jt,Qa.prototype.InterpolantFactoryMethodLinear=void 0,Qa.prototype.InterpolantFactoryMethodSmooth=void 0;class el{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=re(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,s=n.length;e!==s;++e)t.push(tl(n[e]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(Wa.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,i=[];for(let e=0;e<s;e++){let o=[],a=[];o.push((e+s-1)%s,e,(e+1)%s),a.push(0,1,0);const l=Ya(o);o=Va(o,1,l),a=Va(a,1,l),r||0!==o[0]||(o.push(s),a.push(a[0])),i.push(new Ga(".morphTargetInfluences["+t[e].name+"]",o,a).scale(1/n))}return new this(e,-1,i)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.name.match(s);if(i&&i.length>1){const e=i[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const i=[];for(const e in r)i.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return i}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,s){if(0!==n.length){const i=[],o=[];$a(n,i,o,r),0!==i.length&&s.push(new e(t,i,o))}},r=[],s=e.name||"default",i=e.fps||30,o=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const s=l[e].keys;if(s&&0!==s.length)if(s[0].morphTargets){const e={};let t;for(t=0;t<s.length;t++)if(s[t].morphTargets)for(let n=0;n<s[t].morphTargets.length;n++)e[s[t].morphTargets[n]]=-1;for(const n in e){const e=[],i=[];for(let r=0;r!==s[t].morphTargets.length;++r){const r=s[t];e.push(r.time),i.push(r.morphTarget===n?1:0)}r.push(new Ga(".morphTargetInfluence["+n+"]",e,i))}a=e.length*i}else{const i=".bones["+t[e].name+"]";n(Ka,i+".position",s,"pos",r),n(Xa,i+".quaternion",s,"rot",r),n(Ka,i+".scale",s,"scl",r)}}if(0===r.length)return null;return new this(s,a,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function tl(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ga;case"vector":case"vector2":case"vector3":case"vector4":return Ka;case"color":return Za;case"quaternion":return Xa;case"bool":case"boolean":return Ja;case"string":return Qa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];$a(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}class nl extends ft{constructor(){super(),this.isBone=!0,this.type="Bone"}}class rl extends er{constructor(e=null,t=1,n=1,r,s,i,o,a,l=1003,c=1003,d,u){super(null,i,o,a,l,c,r,s,d,u),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const sl=new fe,il=new fe;class ol{constructor(e=[],t=[]){this.uuid=re(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new fe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new fe;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,s=e.length;r<s;r++){const s=e[r]?e[r].matrixWorld:il;sl.multiplyMatrices(s,t[r]),sl.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new ol(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);var t;t=e,e=Math.pow(2,Math.ceil(Math.log(t)/Math.LN2)),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new rl(n,e,e,Pt,Dt);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let s=t[r];void 0===s&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),s=new nl),this.bones.push(s),this.boneInverses.push((new fe).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const s=t[r];e.bones.push(s.uuid);const i=n[r];e.boneInverses.push(i.toArray())}return e}}class al extends ro{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new ml(e)})),this.register((function(e){return new bl(e)})),this.register((function(e){return new wl(e)})),this.register((function(e){return new fl(e)})),this.register((function(e){return new gl(e)})),this.register((function(e){return new vl(e)})),this.register((function(e){return new yl(e)})),this.register((function(e){return new hl(e)})),this.register((function(e){return new _l(e)})),this.register((function(e){return new pl(e)})),this.register((function(e){return new dl(e)})),this.register((function(e){return new xl(e)})),this.register((function(e){return new Ml(e)}))}load(e,t,n,r){const s=this;let i;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:ho.extractUrlBase(e),this.manager.itemStart(e);const o=function(t){r?r(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},a=new ao(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{s.parse(n,i,(function(n){t(n),s.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const i={},o={};if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer){if(ho.decodeText(new Uint8Array(e,0,4))===Sl){try{i[cl.KHR_BINARY_GLTF]=new El(e)}catch(e){return void(r&&r(e))}s=JSON.parse(i[cl.KHR_BINARY_GLTF].content)}else s=JSON.parse(ho.decodeText(new Uint8Array(e)))}else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const a=new Ql(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](a);o[t.name]=t,i[t.name]=!0}if(s.extensionsUsed)for(let e=0;e<s.extensionsUsed.length;++e){const t=s.extensionsUsed[e],n=s.extensionsRequired||[];switch(t){case cl.KHR_MATERIALS_UNLIT:i[t]=new ul;break;case cl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[t]=new Dl;break;case cl.KHR_DRACO_MESH_COMPRESSION:i[t]=new kl(s,this.dracoLoader);break;case cl.KHR_TEXTURE_TRANSFORM:i[t]=new Ll;break;case cl.KHR_MESH_QUANTIZATION:i[t]=new Ol;break;default:n.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}a.setExtensions(i),a.setPlugins(o),a.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,s){n.parse(e,t,r,s)}))}}function ll(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const cl={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class dl{constructor(e){this.parser=e,this.name=cl.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,i=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let o;const a=new un(16777215);void 0!==i.color&&a.fromArray(i.color);const l=void 0!==i.range?i.range:0;switch(i.type){case"directional":o=new ss(a),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new yo(a),o.distance=l;break;case"spot":o=new bo(a),o.distance=l,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,o.angle=i.spot.outerConeAngle,o.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+i.type)}return o.position.set(0,0,0),o.decay=2,void 0!==i.intensity&&(o.intensity=i.intensity),o.name=t.createUniqueName(i.name||"light_"+e),r=Promise.resolve(o),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],s=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===s?null:this._loadLight(s).then((function(e){return n._getNodeRef(t.cache,s,e)}))}}class ul{constructor(){this.name=cl.KHR_MATERIALS_UNLIT}getMaterialType(){return wo}extendParams(e,t,n){const r=[];e.color=new un(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture,$t))}return Promise.all(r)}}class hl{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class ml{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Mo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){const e=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new mn(e,e)}return Promise.all(s)}}class pl{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Mo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return void 0!==i.iridescenceFactor&&(t.iridescence=i.iridescenceFactor),void 0!==i.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),void 0!==i.iridescenceIor&&(t.iridescenceIOR=i.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==i.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),void 0!==i.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),void 0!==i.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(s)}}class fl{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Mo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new un(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=r.extensions[this.name];return void 0!==i.sheenColorFactor&&t.sheenColor.fromArray(i.sheenColorFactor),void 0!==i.sheenRoughnessFactor&&(t.sheenRoughness=i.sheenRoughnessFactor),void 0!==i.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",i.sheenColorTexture,$t)),void 0!==i.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(s)}}class gl{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Mo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(s)}}class vl{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Mo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||1/0;const o=i.attenuationColor||[1,1,1];return t.attenuationColor=new un(o[0],o[1],o[2]),Promise.all(s)}}class yl{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Mo:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class _l{constructor(e){this.parser=e,this.name=cl.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Mo:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",i.specularTexture));const o=i.specularColorFactor||[1,1,1];return t.specularColor=new un(o[0],o[1],o[2]),void 0!==i.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",i.specularColorTexture,$t)),Promise.all(s)}}class bl{constructor(e){this.parser=e,this.name=cl.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,i)}}class wl{constructor(e){this.parser=e,this.name=cl.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const i=s.extensions[t],o=r.images[i.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(s){if(s)return n.loadTextureImage(e,i.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class xl{constructor(e){this.name=cl.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,i=e.count,o=e.byteStride,a=new Uint8Array(t,n,r);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(i,o,a,e.mode,e.filter).then((function(e){return e.buffer})):s.ready.then((function(){const t=new ArrayBuffer(i*o);return s.decodeGltfBuffer(new Uint8Array(t),i,o,a,e.mode,e.filter),t}))}))}return null}}class Ml{constructor(e){this.name=cl.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const e of r.primitives)if(e.mode!==Il.TRIANGLES&&e.mode!==Il.TRIANGLE_STRIP&&e.mode!==Il.TRIANGLE_FAN&&void 0!==e.mode)return null;const s=n.extensions[this.name].attributes,i=[],o={};for(const e in s)i.push(this.parser.getDependency("accessor",s[e]).then((t=>(o[e]=t,o[e]))));return i.length<1?null:(i.push(this.parser.createNodeMesh(e)),Promise.all(i).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,s=[];for(const e of n){const t=new fe,n=new he,i=new ue,a=new he(1,1,1),l=new oa(e.geometry,e.material,r);for(let e=0;e<r;e++)o.TRANSLATION&&n.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&i.fromBufferAttribute(o.ROTATION,e),o.SCALE&&a.fromBufferAttribute(o.SCALE,e),l.setMatrixAt(e,t.compose(n,i,a));for(const t in o)"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);ft.prototype.copy.call(l,e),l.frustumCulled=!1,this.parser.assignFinalMaterial(l),s.push(l)}return t.isGroup?(t.clear(),t.add(...s),t):s[0]})))}}const Sl="glTF",Tl=1313821514,Cl=5130562;class El{constructor(e){this.name=cl.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:ho.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Sl)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let s=0;for(;s<n;){const t=r.getUint32(s,!0);s+=4;const n=r.getUint32(s,!0);if(s+=4,n===Tl){const n=new Uint8Array(e,12+s,t);this.content=ho.decodeText(n)}else if(n===Cl){const n=12+s;this.body=e.slice(n,n+t)}s+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class kl{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=cl.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,o={},a={},l={};for(const e in i){const t=jl[e]||e.toLowerCase();o[t]=i[e]}for(const t in e.attributes){const r=jl[t]||t.toLowerCase();if(void 0!==i[t]){const s=n.accessors[e.attributes[t]],i=zl[s.componentType];l[r]=i.name,a[r]=!0===s.normalized}}return t.getDependency("bufferView",s).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=a[t];void 0!==r&&(n.normalized=r)}t(e)}),o,l)}))}))}}class Ll{constructor(){this.name=cl.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Al extends xo{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),i=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new un).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(e){for(const t in o)e.uniforms[t]=o[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",i)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(e){o.specular.value=e}},specularMap:{get:function(){return o.specularMap.value},set:function(e){o.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(e){o.glossiness.value=e}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(e){o.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Dl{constructor(){this.name=cl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return Al}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new un(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&s.push(n.assignTexture(e,"map",r.diffuseTexture,$t)),e.emissive=new un(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new un(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",t)),s.push(n.assignTexture(e,"specularMap",t,$t))}return Promise.all(s)}createMaterial(e){const t=new Al(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}class Ol{constructor(){this.name=cl.KHR_MESH_QUANTIZATION}}class Rl extends aa{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[s+e];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=r-t,d=(n-t)/c,u=d*d,h=u*d,m=e*l,p=m-l,f=-2*h+3*u,g=h-u,v=1-f,y=g-u+d;for(let e=0;e!==o;e++){const t=i[p+e+o],n=i[p+e+a]*c,r=i[m+e+o],l=i[m+e]*c;s[e]=v*t+y*n+f*r+g*l}return s}}const Pl=new ue;class Nl extends Rl{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Pl.fromArray(s).normalize().toArray(s),s}}const Il={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Bl={9728:St,9729:Et,9984:Tt,9985:1007,9986:Ct,9987:kt},Fl={33071:xt,33648:Mt,10497:wt},Hl={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jl={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ul={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Yl={CUBICSPLINE:void 0,LINEAR:Ut,STEP:jt},Vl="OPAQUE",$l="MASK",Wl="BLEND";function Gl(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function ql(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Xl(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Kl(e){const t=e.extensions&&e.extensions[cl.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+Jl(t.attributes):e.indices+":"+Jl(e.attributes)+":"+e.mode,n}function Jl(e){let t="";const n=Object.keys(e).sort();for(let r=0,s=n.length;r<s;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Zl(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Ql{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ll,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||n||r&&s<98?this.textureLoader=new ca(this.options.manager):this.textureLoader=new da(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ao(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const i={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};Gl(s,i,r),ql(i,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())s(r,t.children[n])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[cl.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,s){n.load(ho.resolveURL(t.uri,r.path),e,void 0,(function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const s=[];return void 0!==r.bufferView?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then((function(e){const s=e[0],i=Hl[r.type],o=zl[r.componentType],a=o.BYTES_PER_ELEMENT,l=a*i,c=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,u=!0===r.normalized;let h,m;if(d&&d!==l){const e=Math.floor(c/d),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(h=new o(s,e*d,r.count*d/a),l=new ua(h,d/a),t.cache.add(n,l)),m=new ma(l,i,c%d/a,u)}else h=null===s?new o(r.count*i):new o(s,c,r.count*i),m=new gn(h,i,u);if(void 0!==r.sparse){const t=Hl.SCALAR,n=zl[r.sparse.indices.componentType],a=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],a,r.sparse.count*t),d=new o(e[2],l,r.sparse.count*i);null!==s&&(m=new gn(m.array.slice(),m.itemSize,m.normalized));for(let e=0,t=c.length;e<t;e++){const t=c[e];if(m.setX(t,d[e*i]),i>=2&&m.setY(t,d[e*i+1]),i>=3&&m.setZ(t,d[e*i+2]),i>=4&&m.setW(t,d[e*i+3]),i>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,s=t.images[r];let i=this.textureLoader;if(s.uri){const e=n.manager.getHandler(s.uri);null!==e&&(i=e)}return this.loadTextureImage(e,r,i)}loadTextureImage(e,t,n){const r=this,s=this.json,i=s.textures[e],o=s.images[t],a=(o.uri||o.bufferView)+":"+i.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=i.name||o.name||"";const n=(s.samplers||{})[i.sampler]||{};return t.magFilter=Bl[n.magFilter]||Et,t.minFilter=Bl[n.minFilter]||kt,t.wrapS=Fl[n.wrapS]||wt,t.wrapT=Fl[n.wrapT]||wt,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[a]=l,l}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const i=r.images[e],o=self.URL||self.webkitURL;let a=i.uri||"",l=!1;if(void 0!==i.bufferView)a=n.getDependency("bufferView",i.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:i.mimeType});return a=o.createObjectURL(t),a}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(a).then((function(e){return new Promise((function(n,r){let i=n;!0===t.isImageBitmapLoader&&(i=function(e){const t=new er(e);t.needsUpdate=!0,n(t)}),t.load(ho.resolveURL(e,s.path),i,void 0,r)}))})).then((function(e){var t;return!0===l&&o.revokeObjectURL(a),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[cl.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[cl.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(i);i=s.extensions[cl.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),s.associations.set(i,t)}}return void 0!==r&&(i.encoding=r),e[t]=i,i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new pa,Qt.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new hn,Qt.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||s||i){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),s&&(e+="vertex-colors:"),i&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),s&&(t.vertexColors=!0),i&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return xo}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let i;const o={},a=s.extensions||{},l=[];if(a[cl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[cl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];i=e.getMaterialType(),l.push(e.extendParams(o,s,t))}else if(a[cl.KHR_MATERIALS_UNLIT]){const e=r[cl.KHR_MATERIALS_UNLIT];i=e.getMaterialType(),l.push(e.extendParams(o,s,t))}else{const n=s.pbrMetallicRoughness||{};if(o.color=new un(1,1,1),o.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;o.color.fromArray(e),o.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(o,"map",n.baseColorTexture,$t)),o.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,o.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(o,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(o,"roughnessMap",n.metallicRoughnessTexture))),i=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===s.doubleSided&&(o.side=2);const c=s.alphaMode||Vl;if(c===Wl?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===$l&&(o.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&i!==wo&&(l.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new mn(1,1),void 0!==s.normalTexture.scale)){const e=s.normalTexture.scale;o.normalScale.set(e,e)}return void 0!==s.occlusionTexture&&i!==wo&&(l.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(o.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&i!==wo&&(o.emissive=(new un).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&i!==wo&&l.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,$t)),Promise.all(l).then((function(){let n;return n=i===Al?r[cl.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new i(o),s.name&&(n.name=s.name),ql(n,s),t.associations.set(n,{materials:e}),s.extensions&&Gl(r,n,s),n}))}createUniqueName(e){const t=xa.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(e){return n[cl.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return tc(n,e,t)}))}const i=[];for(let n=0,o=e.length;n<o;n++){const o=e[n],a=Kl(o),l=r[a];if(l)i.push(l.promise);else{let e;e=o.extensions&&o.extensions[cl.KHR_DRACO_MESH_COMPRESSION]?s(o):tc(new Ln,o,t),r[a]={primitive:o,promise:e},i.push(e)}}return Promise.all(i)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],i=s.primitives,o=[];for(let e=0,t=i.length;e<t;e++){const t=void 0===i[e].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new xo({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),a.DefaultMaterial):this.getDependency("material",i[e].material);o.push(t)}var a;return o.push(t.loadGeometries(i)),Promise.all(o).then((function(n){const o=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let n=0,c=a.length;n<c;n++){const c=a[n],d=i[n];let u;const h=o[n];if(d.mode===Il.TRIANGLES||d.mode===Il.TRIANGLE_STRIP||d.mode===Il.TRIANGLE_FAN||void 0===d.mode)u=!0===s.isSkinnedMesh?new ka(c,h):new Qo(c,h),!0!==u.isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),d.mode===Il.TRIANGLE_STRIP?u.geometry=nc(u.geometry,1):d.mode===Il.TRIANGLE_FAN&&(u.geometry=nc(u.geometry,2));else if(d.mode===Il.LINES)u=new Bn(c,h);else if(d.mode===Il.LINE_STRIP)u=new Nn(c,h);else if(d.mode===Il.LINE_LOOP)u=new La(c,h);else{if(d.mode!==Il.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);u=new Pa(c,h)}Object.keys(u.geometry.morphAttributes).length>0&&Xl(u,s),u.name=t.createUniqueName(s.name||"mesh_"+e),ql(u,s),d.extensions&&Gl(r,u,d),t.assignFinalMaterial(u),l.push(u)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return l[0];const c=new Ia;t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new mo(r.yfov*ne,r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new ns(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ql(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],s=[],i=[],o=[];for(let e=0,a=t.channels.length;e<a;e++){const a=t.channels[e],l=t.samplers[a.sampler],c=a.target,d=c.node,u=void 0!==t.parameters?t.parameters[l.input]:l.input,h=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",u)),s.push(this.getDependency("accessor",h)),i.push(l),o.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(s),Promise.all(i),Promise.all(o)]).then((function(n){const r=n[0],s=n[1],i=n[2],o=n[3],a=n[4],l=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=s[e],c=i[e],d=o[e],u=a[e];if(void 0===t)continue;let h;switch(t.updateMatrix(),Ul[u.path]){case Ul.weights:h=Ga;break;case Ul.rotation:h=Xa;break;default:h=Ka}const m=t.name?t.name:t.uuid,p=void 0!==d.interpolation?Yl[d.interpolation]:Ut,f=[];Ul[u.path]===Ul.weights?t.traverse((function(e){e.morphTargetInfluences&&f.push(e.name?e.name:e.uuid)})):f.push(m);let g=c.array;if(c.normalized){const e=Zl(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,t=f.length;e<t;e++){const t=new h(f[e]+"."+Ul[u.path],n.array,g,p);"CUBICSPLINE"===d.interpolation&&(t.createInterpolant=function(e){return new(this instanceof Xa?Nl:Rl)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const c=t.name?t.name:"animation_"+e;return new el(c,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,s=t.nodes[e],i=s.name?r.createUniqueName(s.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==s.camera&&t.push(r.getDependency("camera",s.camera).then((function(e){return r._getNodeRef(r.cameraCache,s.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let o;if(o=!0===s.isBone?new nl:t.length>1?new Ia:1===t.length?t[0]:new ft,o!==t[0])for(let e=0,n=t.length;e<n;e++)o.add(t[e]);if(s.name&&(o.userData.name=s.name,o.name=i),ql(o,s),s.extensions&&Gl(n,o,s),void 0!==s.matrix){const e=new fe;e.fromArray(s.matrix),o.applyMatrix4(e)}else void 0!==s.translation&&o.position.fromArray(s.translation),void 0!==s.rotation&&o.quaternion.fromArray(s.rotation),void 0!==s.scale&&o.scale.fromArray(s.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],s=this,i=new Ia;r.name&&(i.name=s.createUniqueName(r.name)),ql(i,r),r.extensions&&Gl(n,i,r);const o=r.nodes||[],a=[];for(let e=0,n=o.length;e<n;e++)a.push(ec(o[e],i,t,s));return Promise.all(a).then((function(){return s.associations=(e=>{const t=new Map;for(const[e,n]of s.associations)(e instanceof Qt||e instanceof er)&&t.set(e,n);return e.traverse((e=>{const n=s.associations.get(e);null!=n&&t.set(e,n)})),t})(i),i}))}}function ec(e,t,n,r){const s=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===s.skin)return e;let t;return r.getDependency("skin",s.skin).then((function(e){t=e;const n=[];for(let e=0,s=t.joints.length;e<s;e++)n.push(r.getDependency("node",t.joints[e]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],s=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];if(i){r.push(i);const n=new fe;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*e),s.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new ol(r,s),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const i=[];if(s.children){const t=s.children;for(let s=0,o=t.length;s<o;s++){const o=t[s];i.push(ec(o,e,n,r))}}return Promise.all(i)}))}function tc(e,t,n){const r=t.attributes,s=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in r){const n=jl[t]||t.toLowerCase();n in e.attributes||s.push(i(r[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));s.push(r)}return ql(e,t),function(e,t,n){const r=t.attributes,s=new Me;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,i=e.max;if(void 0===t||void 0===i)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new he(t[0],t[1],t[2]),new he(i[0],i[1],i[2])),e.normalized){const t=Zl(zl[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}const i=t.targets;if(void 0!==i){const e=new he,t=new he;for(let r=0,s=i.length;r<s;r++){const s=i[r];if(void 0!==s.POSITION){const r=n.json.accessors[s.POSITION],i=r.min,o=r.max;if(void 0!==i&&void 0!==o){if(t.setX(Math.max(Math.abs(i[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(i[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(i[2]),Math.abs(o[2]))),r.normalized){const e=Zl(zl[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(e)}e.boundingBox=s;const o=new je;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=o}(e,t,n),Promise.all(s).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,s=!1,i=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(s=!0),void 0!==n.COLOR_0&&(i=!0),r&&s&&i)break}if(!r&&!s&&!i)return Promise.resolve(e);const o=[],a=[],l=[];for(let c=0,d=t.length;c<d;c++){const d=t[c];if(r){const t=void 0!==d.POSITION?n.getDependency("accessor",d.POSITION):e.attributes.position;o.push(t)}if(s){const t=void 0!==d.NORMAL?n.getDependency("accessor",d.NORMAL):e.attributes.normal;a.push(t)}if(i){const t=void 0!==d.COLOR_0?n.getDependency("accessor",d.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then((function(t){const n=t[0],o=t[1],a=t[2];return r&&(e.morphAttributes.position=n),s&&(e.morphAttributes.normal=o),i&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function nc(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,s=[];if(2===t)for(let e=1;e<=r;e++)s.push(n.getX(0)),s.push(n.getX(e)),s.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(s.push(n.getX(e)),s.push(n.getX(e+1)),s.push(n.getX(e+2))):(s.push(n.getX(e+2)),s.push(n.getX(e+1)),s.push(n.getX(e)));s.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=e.clone();return i.setIndex(s),i}const rc={alphamap_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",alphamap_pars_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",alphatest_fragment:"\n#ifdef USE_ALPHATEST\n\n\tif ( diffuseColor.a < alphaTest ) discard;\n\n#endif\n",alphatest_pars_fragment:"\n#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif\n",aomap_fragment:"\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\n\t#endif\n\n#endif\n",aomap_pars_fragment:"\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",bsdfs:"\n\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( V * D );\n\n}\n\n#ifdef USE_IRIDESCENCE\n\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\n\t\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\t\tfloat D = D_GGX( alpha, dotNH );\n\n\t\treturn F * ( V * D );\n\n\t}\n\n#endif\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat D_Charlie( float roughness, float dotNH ) {\n\n\tfloat alpha = pow2( roughness );\n\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 ); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n\n}\n\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\n\treturn sheenColor * ( D * V );\n\n}\n\n#endif\n",iridescence_fragment:"\n\n#ifdef USE_IRIDESCENCE\n\n\t// XYZ to linear-sRGB color space\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\n\t// Assume air interface for top\n\t// Note: We don't handle the case fresnel0 == 1\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\n\t}\n\n\t// Conversion FO/IOR\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\n\t}\n\n\t// ior is a value between 1.0 and 3.0. 1.0 is air interface\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\n\t}\n\n\t// Fresnel equations for dielectric/dielectric interfaces.\n\t// Ref: https://belcour.github.io/blog/research/2017/05/01/brdf-thin-film.html\n\t// Evaluation XYZ sensitivity curves in Fourier space\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\n\t}\n\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\n\t\tvec3 I;\n\n\t\t// Force iridescenceIOR -> outsideIOR when thinFilmThickness -> 0.0\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\t// Evaluate the cosTheta on the base layer (Snell law)\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\n\t\t// Handle TIR:\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\n\t\t\t return vec3( 1.0 );\n\n\t\t}\n\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\n\t\t// First interface\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\n\t\t// Second interface\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) ); // guard against 1.0\n\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\n\t\t// Phase shift\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\n\t\t// Compound terms\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\n\t\t// Reflectance term for m = 0 (DC term amplitude)\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\n\t\t// Reflectance term for m > 0 (pairs of diracs)\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\n\t\t}\n\n\t\t// Since out of gamut colors might be produced, negative color values are clamped to 0.\n\t\treturn max( I, vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n",bumpmap_pars_fragment:"\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// https://mmikk.github.io/papers3d/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm; // normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",clipping_planes_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",clipping_planes_pars_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",clipping_planes_pars_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n",clipping_planes_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n",color_fragment:"\n#if defined( USE_COLOR_ALPHA )\n\n\tdiffuseColor *= vColor;\n\n#elif defined( USE_COLOR )\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",color_pars_fragment:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n",color_pars_vertex:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n",color_vertex:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvColor = vec4( 1.0 );\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvColor = vec3( 1.0 );\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvColor *= color;\n\n#endif\n\n#ifdef USE_INSTANCING_COLOR\n\n\tvColor.xyz *= instanceColor.xyz;\n\n#endif\n",common:"\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\n\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\n\treturn fract( sin( sn ) * c );\n\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\nfloat luminance( const in vec3 rgb ) {\n\n\t// assumes rgb is in linear color space with sRGB primaries and D65 white point\n\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\n\treturn dot( weights, rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n\treturn m[ 2 ][ 3 ] == - 1.0;\n\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\n\t// dir is assumed to be unit length\n\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\treturn vec2( u, v );\n\n}\n",cube_uv_reflection_fragment:"\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized ).\n\n\tfloat getFace( vec3 direction ) {\n\n\t\tvec3 absDirection = abs( direction );\n\n\t\tfloat face = - 1.0;\n\n\t\tif ( absDirection.x > absDirection.z ) {\n\n\t\t\tif ( absDirection.x > absDirection.y )\n\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t} else {\n\n\t\t\tif ( absDirection.z > absDirection.y )\n\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n\t// RH coordinate system; PMREM face-indexing convention\n\tvec2 getUV( vec3 direction, float face ) {\n\n\t\tvec2 uv;\n\n\t\tif ( face == 0.0 ) {\n\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\n\t\t} else if ( face == 1.0 ) {\n\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\n\t\t} else if ( face == 2.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\n\t\t} else if ( face == 3.0 ) {\n\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\n\t\t} else if ( face == 4.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\n\t\t} else {\n\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\n\t\t}\n\n\t\treturn 0.5 * ( uv + 1.0 );\n\n\t}\n\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\n\t\tfloat face = getFace( direction );\n\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\n\t\tfloat faceSize = exp2( mipInt );\n\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\n\t\tif ( face > 2.0 ) {\n\n\t\t\tuv.y += faceSize;\n\n\t\t\tface -= 3.0;\n\n\t\t}\n\n\t\tuv.x += face * faceSize;\n\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\n\t\t#ifdef texture2DGradEXT\n\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb; // disable anisotropic filtering\n\n\t\t#else\n\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\n\t\t#endif\n\n\t}\n\n\t// These defines must match with PMREMGenerator\n\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\n\tfloat roughnessToMip( float roughness ) {\n\n\t\tfloat mip = 0.0;\n\n\t\tif ( roughness >= cubeUV_r1 ) {\n\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\n\t\t} else {\n\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t}\n\n\t\treturn mip;\n\n\t}\n\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\n\t\tfloat mipF = fract( mip );\n\n\t\tfloat mipInt = floor( mip );\n\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\n\t\tif ( mipF == 0.0 ) {\n\n\t\t\treturn vec4( color0, 1.0 );\n\n\t\t} else {\n\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\n\t\t}\n\n\t}\n\n#endif\n",defaultnormal_vertex:"\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",displacementmap_pars_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",displacementmap_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",emissivemap_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",emissivemap_pars_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",encodings_fragment:"\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\n",envmap_fragment:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",envmap_common_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",envmap_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",envmap_pars_vertex:"\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",envmap_physical_pars_fragment:"\n#if defined( USE_ENVMAP )\n\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n#endif\n",envmap_vertex:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\n\n\tvFogDepth = - mvPosition.z;\n\n#endif\n",fog_pars_vertex:"\n#ifdef USE_FOG\n\n\tvarying float vFogDepth;\n\n#endif\n",fog_fragment:"\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",fog_pars_fragment:"\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",gradientmap_pars_fragment:"\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\n\t#else\n\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\n\t#endif\n\n}\n",lightmap_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n\n#endif\n",lightmap_pars_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",lights_lambert_fragment:"\nLambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;\n",lights_lambert_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct LambertMaterial {\n\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_pars_begin:"\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\treturn irradiance;\n\n}\n\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t\t// page 32, equation 26: E[window1]\n\t\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\t\tif ( cutoffDistance > 0.0 ) {\n\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t\t}\n\n\t\treturn distanceFalloff;\n\n\t#else\n\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t\t}\n\n\t\treturn 1.0;\n\n\t#endif\n\n}\n\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\tif ( spotAttenuation > 0.0 ) {\n\n\t\t\tfloat lightDistance = length( lVector );\n\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t\t} else {\n\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\n\t\t}\n\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",lights_toon_fragment:"\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\n",lights_toon_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct ToonMaterial {\n\n\tvec3 diffuseColor;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_phong_fragment:"\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.roughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n\n#ifdef IOR\n\n\tmaterial.ior = ior;\n\n\t#ifdef SPECULAR\n\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\n\t\t#endif\n\n\t\t#ifdef USE_SPECULARCOLORMAP\n\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\n\t\t#endif\n\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\n\t#else\n\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\n\t#endif\n\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n\n#endif\n\n#ifdef USE_CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_IRIDESCENCE\n\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\n\t#ifdef USE_IRIDESCENCEMAP\n\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\n\t#else\n\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\n\t#endif\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheenColor;\n\n\t#ifdef USE_SHEENCOLORMAP\n\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\n\t#endif\n\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\n\t#ifdef USE_SHEENROUGHNESSMAP\n\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\n\t#endif\n\n#endif\n",lights_physical_pars_fragment:'\nstruct PhysicalMaterial {\n\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\n};\n\n// temporary\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\n\n// This is a curve-fit approxmation to the "Charlie sheen" BRDF integrated over the hemisphere from \n// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF". The analysis can be found\n// in the Sheen section of https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tfloat r2 = roughness * roughness;\n\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\n\treturn saturate( DG * RECIPROCAL_PI );\n\n}\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\n\treturn fab;\n\n}\n\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\treturn specularColor * fab.x + specularF90 * fab.y;\n\n}\n\n// Fdez-Agüera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\n\t#else\n\n\t\tvec3 Fr = specularColor;\n\n\t#endif\n\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\n\t#endif\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\n\t#else\n\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\n\t#endif\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\t#ifdef USE_IRIDESCENCE\n\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\n\t#else\n\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\n\t#endif\n\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n',lights_fragment_begin:"\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef USE_CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\n#ifdef USE_IRIDESCENCE\n\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\n\tif ( material.iridescenceThickness == 0.0 ) {\n\n\t\tmaterial.iridescence = 0.0;\n\n\t} else {\n\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\n\t}\n\n\tif ( material.iridescence > 0.0 ) {\n\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\n\t\t// Iridescence F0 approximation\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\n\t}\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\n\t\t// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",lights_fragment_maps:"\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\n\t#endif\n\n#endif\n",lights_fragment_end:"\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",logdepthbuf_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",logdepthbuf_pars_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",logdepthbuf_pars_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",logdepthbuf_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",map_fragment:"\n#ifdef USE_MAP\n\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\n\t#ifdef DECODE_VIDEO_TEXTURE\n\n\t\t// inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\n\t#endif\n\n\tdiffuseColor *= sampledDiffuseColor;\n\n#endif\n",map_pars_fragment:"\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",map_particle_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, uv );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",map_particle_pars_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",metalnessmap_fragment:"\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",metalnessmap_pars_fragment:"\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",morphcolor_vertex:"\n#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tvColor *= morphTargetBaseInfluence;\n\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t#if defined( USE_COLOR_ALPHA )\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\n\t\t#elif defined( USE_COLOR )\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\n\t\t#endif\n\n\t}\n\n#endif\n",morphnormal_vertex:"\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\n\t\t}\n\n\t#else\n\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n\t#endif\n\n#endif\n",morphtarget_pars_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\n\t\t}\n\n\t#else\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\n\t\t#else\n\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",morphtarget_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\n\t\t}\n\n\t#else\n\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",normal_fragment_begin:"\nfloat faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n\n#ifdef FLAT_SHADED\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",normal_fragment_maps:"\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n\n#endif\n",normal_pars_fragment:"\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n",normal_pars_vertex:"\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n",normal_vertex:"\n#ifndef FLAT_SHADED // normal is computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n",normalmap_pars_fragment:"\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Normal Mapping Without Precomputed Tangents\n\t// http://www.thetenthplanet.de/archives/1180\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 N = surf_norm; // normalized\n\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\n\t}\n\n#endif\n",clearcoat_normal_fragment_begin:"\n#ifdef USE_CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",clearcoat_normal_fragment_maps:"\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\n\t#endif\n\n#endif\n",clearcoat_pars_fragment:"\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",iridescence_pars_fragment:"\n\n#ifdef USE_IRIDESCENCEMAP\n\n\tuniform sampler2D iridescenceMap;\n\n#endif\n\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\n\tuniform sampler2D iridescenceThicknessMap;\n\n#endif\n",output_fragment:"\n#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n\n// https://github.com/mrdoob/three.js/pull/22425\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\n\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n",packing:"\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\n\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\n\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\n// NOTE: https://twitter.com/gonnavis/status/1377183786949959682\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",project_vertex:"\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",dithering_pars_fragment:"\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift according to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",roughnessmap_fragment:"\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",roughnessmap_pars_fragment:"\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",shadowmap_pars_fragment:"\n#if NUM_SPOT_LIGHT_COORDS > 0\n\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n\n#endif\n\n#if NUM_SPOT_LIGHT_MAPS > 0\n\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",shadowmap_pars_vertex:"\n\n#if NUM_SPOT_LIGHT_COORDS > 0\n\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n\n#endif\n\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",shadowmap_vertex:"\n#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\t// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\n\t#endif\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",shadowmask_pars_fragment:"\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",skinbase_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",skinning_pars_vertex:"\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\n\tmat4 getBoneMatrix( const in float i ) {\n\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\ty = dy * ( y + 0.5 );\n\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\treturn bone;\n\n\t}\n\n#endif\n",skinning_vertex:"\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",skinnormal_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",specularmap_fragment:"\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",specularmap_pars_fragment:"\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",tonemapping_fragment:"\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",tonemapping_pars_fragment:"\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/docs/techreports/2002/pdf/UUCS-02-001.pdf\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs\nvec3 RRTAndODTFit( vec3 v ) {\n\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n\n}\n\n// this implementation of ACES is modified to accommodate a brighter viewing environment.\n// the scale factor of 1/0.6 is subjective. see discussion in #19621.\n\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\t// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ), // transposed from source\n\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\n\t// ODT_SAT => XYZ => D60_2_D65 => sRGB\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ), // transposed from source\n\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\n\tcolor *= toneMappingExposure / 0.6;\n\n\tcolor = ACESInputMat * color;\n\n\t// Apply RRT and ODT\n\tcolor = RRTAndODTFit( color );\n\n\tcolor = ACESOutputMat * color;\n\n\t// Clamp to [0, 1]\n\treturn saturate( color );\n\n}\n\nvec3 CustomToneMapping( vec3 color ) { return color; }\n",transmission_fragment:"\n#ifdef USE_TRANSMISSION\n\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\n\t#endif\n\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n\n#endif\n",transmission_pars_fragment:"\n#ifdef USE_TRANSMISSION\n\n\t// Transmission code is based on glTF-Sampler-Viewer\n\t// https://github.com/KhronosGroup/glTF-Sample-Viewer\n\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\tuniform sampler2D transmissionMap;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tuniform sampler2D thicknessMap;\n\n\t#endif\n\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec3 vWorldPosition;\n\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\n\t\t// Direction of refracted light.\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\n\t\t// Compute rotation-independant scaling of the model matrix.\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t// The thickness is specified in local space.\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\n\t}\n\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\n\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\n\t}\n\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\n\t\t#ifdef texture2DLodEXT\n\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\n\t\t#else\n\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\n\t\t#endif\n\n\t}\n\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\n\t\tif ( isinf( attenuationDistance ) ) {\n\n\t\t\t// Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.\n\t\t\treturn radiance;\n\n\t\t} else {\n\n\t\t\t// Compute light attenuation using Beer's law.\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n\t\t\treturn transmittance * radiance;\n\n\t\t}\n\n\t}\n\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\n\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\n\t\t// Get the specular component.\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\n\t}\n#endif\n",uv_pars_fragment:"\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",uv_pars_vertex:"\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",uv_vertex:"\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",uv2_pars_fragment:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",uv2_pars_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n",uv2_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n",worldpos_vertex:"\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",background_vert:"\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",background_frag:"\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tgl_FragColor = texture2D( t2D, vUv );\n\n\t#ifdef DECODE_VIDEO_TEXTURE\n\n\t\t// inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\n\t#endif\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",backgroundCube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",backgroundCube_frag:"\n\n#ifdef ENVMAP_TYPE_CUBE\n\n\tuniform samplerCube envMap;\n\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\tuniform sampler2D envMap;\n\n#endif\n\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\n\t#else\n\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t#endif\n\n\tgl_FragColor = texColor;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",cube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",cube_frag:"\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\nvoid main() {\n\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",depth_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n",depth_frag:"\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n",distanceRGBA_vert:"\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",distanceRGBA_frag:"\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",equirect_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",equirect_frag:"\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV = equirectUv( direction );\n\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",linedashed_vert:"\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",linedashed_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",meshbasic_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshbasic_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshlambert_vert:"\n#define LAMBERT\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshlambert_frag:"\n#define LAMBERT\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshmatcap_vert:"\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",meshmatcap_frag:"\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 ); // default if matcap is missing\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshnormal_vert:"\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",meshnormal_frag:"\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n\t#ifdef OPAQUE\n\n\t\tgl_FragColor.a = 1.0;\n\n\t#endif\n\n}\n",meshphong_vert:"\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphong_frag:"\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphysical_vert:"\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifdef USE_TRANSMISSION\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n#ifdef USE_TRANSMISSION\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n}\n",meshphysical_frag:"\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\n\tuniform float ior;\n#endif\n\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n\t#include <transmission_fragment>\n\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n\t#ifdef USE_SHEEN\n\n\t\t// Sheen energy compensation approximation calculation can be found at the end of\n\t\t// https://drive.google.com/file/d/1T0D1VSyR4AllqIJTQAraEIzjlb5h4FKH/view?usp=sharing\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\n\t#endif\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshtoon_vert:"\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshtoon_frag:"\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",points_vert:"\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",points_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",shadow_vert:"\n#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",shadow_frag:"\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",sprite_vert:"\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",sprite_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},sc={common:{diffuse:{value:new un(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new tt},uv2Transform:{value:new tt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new mn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new un(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new un(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new tt}},sprite:{diffuse:{value:new un(16777215)},opacity:{value:1},center:{value:new mn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new tt}}},ic={basic:{uniforms:sr([sc.common,sc.specularmap,sc.envmap,sc.aomap,sc.lightmap,sc.fog]),vertexShader:rc.meshbasic_vert,fragmentShader:rc.meshbasic_frag},lambert:{uniforms:sr([sc.common,sc.specularmap,sc.envmap,sc.aomap,sc.lightmap,sc.emissivemap,sc.bumpmap,sc.normalmap,sc.displacementmap,sc.fog,sc.lights,{emissive:{value:new un(0)}}]),vertexShader:rc.meshlambert_vert,fragmentShader:rc.meshlambert_frag},phong:{uniforms:sr([sc.common,sc.specularmap,sc.envmap,sc.aomap,sc.lightmap,sc.emissivemap,sc.bumpmap,sc.normalmap,sc.displacementmap,sc.fog,sc.lights,{emissive:{value:new un(0)},specular:{value:new un(1118481)},shininess:{value:30}}]),vertexShader:rc.meshphong_vert,fragmentShader:rc.meshphong_frag},standard:{uniforms:sr([sc.common,sc.envmap,sc.aomap,sc.lightmap,sc.emissivemap,sc.bumpmap,sc.normalmap,sc.displacementmap,sc.roughnessmap,sc.metalnessmap,sc.fog,sc.lights,{emissive:{value:new un(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rc.meshphysical_vert,fragmentShader:rc.meshphysical_frag},toon:{uniforms:sr([sc.common,sc.aomap,sc.lightmap,sc.emissivemap,sc.bumpmap,sc.normalmap,sc.displacementmap,sc.gradientmap,sc.fog,sc.lights,{emissive:{value:new un(0)}}]),vertexShader:rc.meshtoon_vert,fragmentShader:rc.meshtoon_frag},matcap:{uniforms:sr([sc.common,sc.bumpmap,sc.normalmap,sc.displacementmap,sc.fog,{matcap:{value:null}}]),vertexShader:rc.meshmatcap_vert,fragmentShader:rc.meshmatcap_frag},points:{uniforms:sr([sc.points,sc.fog]),vertexShader:rc.points_vert,fragmentShader:rc.points_frag},dashed:{uniforms:sr([sc.common,sc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rc.linedashed_vert,fragmentShader:rc.linedashed_frag},depth:{uniforms:sr([sc.common,sc.displacementmap]),vertexShader:rc.depth_vert,fragmentShader:rc.depth_frag},normal:{uniforms:sr([sc.common,sc.bumpmap,sc.normalmap,sc.displacementmap,{opacity:{value:1}}]),vertexShader:rc.meshnormal_vert,fragmentShader:rc.meshnormal_frag},sprite:{uniforms:sr([sc.sprite,sc.fog]),vertexShader:rc.sprite_vert,fragmentShader:rc.sprite_frag},background:{uniforms:{uvTransform:{value:new tt},t2D:{value:null}},vertexShader:rc.background_vert,fragmentShader:rc.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:rc.backgroundCube_vert,fragmentShader:rc.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rc.cube_vert,fragmentShader:rc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rc.equirect_vert,fragmentShader:rc.equirect_frag},distanceRGBA:{uniforms:sr([sc.common,sc.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rc.distanceRGBA_vert,fragmentShader:rc.distanceRGBA_frag},shadow:{uniforms:sr([sc.lights,sc.fog,{color:{value:new un(0)},opacity:{value:1}}]),vertexShader:rc.shadow_vert,fragmentShader:rc.shadow_frag}};var oc,ac,lc,cc,dc;ic.physical={uniforms:sr([ic.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new mn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new un(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new mn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new un(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new un(1,1,1)},specularColorMap:{value:null}}]),vertexShader:rc.meshphysical_vert,fragmentShader:rc.meshphysical_frag},function(e){e[e.Default=0]="Default",e[e.Clay=1]="Clay",e[e.XRay=2]="XRay",e[e.Normals=3]="Normals",e[e.Wireframe=4]="Wireframe"}(oc||(oc={})),function(e){e[e.Solid=0]="Solid",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"}(ac||(ac={})),function(e){e[e.Orbit=0]="Orbit",e[e.Walk=1]="Walk"}(lc||(lc={})),function(e){e[e.Overlay=0]="Overlay",e[e.Left=1]="Left",e[e.Right=2]="Right"}(cc||(cc={})),function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(dc||(dc={}));const uc=n(8669).Z,hc=n(9849).Z;class mc extends xo{constructor(e){super(),this._clayColor=new un("#a67a6c"),this._wireColor=new un("#004966"),this._wireEmissiveColor=new un("#004966"),this._objectSpaceNormalMap=!1,this._paramCopy={},this._sideCopy=0,this.type="UberPBRMaterial",this.isUberPBRMaterial=!0,this.isMeshStandardMaterial=!0,this.isMeshPhysicalMaterial=!1,this.defines={STANDARD:!0,PHYSICAL:!1,OBJECTSPACE_NORMALMAP:!1,MODE_NORMALS:!1,MODE_XRAY:!1,CUT_PLANE:!1,USE_ZONEMAP:!1},this.uniforms=ir.merge([ic.standard.uniforms,{aoMapMix:{value:new he(.25,.25,.25)},cutPlaneDirection:{value:new tr(0,0,-1,0)},cutPlaneColor:{value:new he(1,0,0)},zoneMap:{value:null}}]),this._aoMapMix=this.uniforms.aoMapMix.value,this._cutPlaneDirection=this.uniforms.cutPlaneDirection.value,this._cutPlaneColor=this.uniforms.cutPlaneColor.value,this._zoneMap=this.uniforms.zoneMap.value,this.vertexShader=hc,this.fragmentShader=uc,this.color=new un(16777215),this.roughness=.7,this.metalness=0,e&&this.setValues(e)}set cutPlaneDirection(e){this._cutPlaneDirection.copy(e)}get cutPlaneDirection(){return this._cutPlaneDirection}set cutPlaneColor(e){this._cutPlaneColor.copy(e)}get cutPlaneColor(){return this._cutPlaneColor}set aoMapMix(e){this._aoMapMix.copy(e)}get aoMapMix(){return this._aoMapMix}set zoneMap(e){this._zoneMap=e,this.uniforms.zoneMap.value=e,this.needsUpdate=!0}get zoneMap(){return this._zoneMap}setShaderMode(e){switch(Object.assign(this,this._paramCopy),this.defines.MODE_NORMALS=!1,this.defines.MODE_XRAY=!1,this.defines.OBJECTSPACE_NORMALMAP=!(!this.normalMap||!this._objectSpaceNormalMap),this.side=this.defines.CUT_PLANE?2:this.side,this.needsUpdate=!0,e){case oc.Clay:this._paramCopy={color:this.color,map:this.map,roughness:this.roughness,metalness:this.metalness,aoMapIntensity:this.aoMapIntensity,blending:this.blending,transparent:this.transparent,depthWrite:this.depthWrite},this.color=this._clayColor,this.map=null,this.roughness=1,this.metalness=0,this.aoMapIntensity*=1,this.blending=0,this.transparent=!1,this.depthWrite=!0;break;case oc.Normals:this._paramCopy={blending:this.blending,transparent:this.transparent,depthWrite:this.depthWrite},this.defines.MODE_NORMALS=!0,this.blending=0,this.transparent=!1,this.depthWrite=!0;break;case oc.XRay:this._paramCopy={side:this.side,blending:this.blending,transparent:this.transparent,depthWrite:this.depthWrite},this.defines.MODE_XRAY=!0,this.side=2,this.blending=2,this.transparent=!0,this.depthWrite=!1;break;case oc.Wireframe:this._paramCopy={color:this.color,emissive:this.emissive,roughness:this.roughness,metalness:this.metalness,wireframe:this.wireframe,map:this.map,aoMap:this.aoMap,emissiveMap:this.emissiveMap,normalMap:this.normalMap},this.color=this._wireColor,this.emissive=this._wireEmissiveColor,this.roughness=.8,this.metalness=.1,this.wireframe=!0,this.map=null,this.aoMap=null,this.emissiveMap=null,this.normalMap=null,this.defines.OBJECTSPACE_NORMALMAP=!1}}enableCutPlane(e){this.defines.CUT_PLANE=e,e?(this._sideCopy=this.side,this.side=2):this.side=this._sideCopy}enableObjectSpaceNormalMap(e){e!==this._objectSpaceNormalMap&&(this._objectSpaceNormalMap=e),this.normalMap&&(this.defines.OBJECTSPACE_NORMALMAP=e,this.needsUpdate=!0)}enableZoneMap(e){this.defines.USE_ZONEMAP=e}copyStandardMaterial(e){return this.color=e.color,this.opacity=e.opacity,this.transparent=e.opacity<1||!!e.alphaMap||e.transparent,this.alphaTest=e.alphaTest,this.roughness=e.roughness,this.roughnessMap=e.roughnessMap,this.metalness=e.metalness,this.metalnessMap=e.metalnessMap,this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.normalMap=e.normalMap,this.shadowSide=e.shadowSide,this.flatShading=e.flatShading,this}}class pc{constructor(e){this.customDracoPath=null,this.loadingManager=e;const t=new co;t.setDecoderPath(this.customDracoPath||"https://www.gstatic.com/draco/versioned/decoders/1.3.6/"),this.gltfLoader=new al(e),this.gltfLoader.setDRACOLoader(t)}set dracoPath(e){this.customDracoPath=e,null!==this.gltfLoader.dracoLoader&&this.gltfLoader.dracoLoader.setDecoderPath(this.customDracoPath)}dispose(){this.gltfLoader.dracoLoader.dispose(),this.gltfLoader.setDRACOLoader(null),this.gltfLoader=null}isValid(e){const t=e.split(".").pop().toLowerCase();return pc.extensions.indexOf(t)>=0}isValidMimeType(e){return pc.mimeTypes.indexOf(e)>=0}get(e){return new Promise(((t,n)=>{this.gltfLoader.load(e,(e=>{t(this.createModelGroup(e))}),null,(r=>{null===this.gltfLoader||null===this.gltfLoader.dracoLoader?t(null):(console.error(`failed to load '${e}': ${r}`),n(new Error(r)))}))}))}createModelGroup(e){const t=e.scene;return t.traverse((e=>{if("Mesh"===e.type){const t=e;t.castShadow=!0;const n=t.material;n.map&&(n.map.encoding=$t),t.geometry.computeBoundingBox();const r=new mc;"MeshStandardMaterial"===n.type&&r.copyStandardMaterial(n),n.userData.objectSpaceNormals&&r.enableObjectSpaceNormalMap(!0),t.material=r}})),t}}pc.extensions=["gltf","glb"],pc.mimeTypes=["model/gltf+json","model/gltf-binary"];class fc extends Qt{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new un(16777215),this.specular=new un(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new mn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}const gc=/^[og]\s*(.+)?/,vc=/^mtllib /,yc=/^usemtl /,_c=/^usemap /,bc=/\s+/,wc=new he,xc=new he,Mc=new he,Sc=new he,Tc=new he,Cc=new un;function Ec(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,s=this.object.geometry.normals;wc.fromArray(r,e),xc.fromArray(r,t),Mc.fromArray(r,n),Tc.subVectors(Mc,xc),Sc.subVectors(wc,xc),Tc.cross(Sc),Tc.normalize(),s.push(Tc.x,Tc.y,Tc.z),s.push(Tc.x,Tc.y,Tc.z),s.push(Tc.x,Tc.y,Tc.z)},addColor:function(e,t,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,s,i,o,a,l){const c=this.vertices.length;let d=this.parseVertexIndex(e,c),u=this.parseVertexIndex(t,c),h=this.parseVertexIndex(n,c);if(this.addVertex(d,u,h),this.addColor(d,u,h),void 0!==o&&""!==o){const e=this.normals.length;d=this.parseNormalIndex(o,e),u=this.parseNormalIndex(a,e),h=this.parseNormalIndex(l,e),this.addNormal(d,u,h)}else this.addFaceNormal(d,u,h);if(void 0!==r&&""!==r){const e=this.uvs.length;d=this.parseUVIndex(r,e),u=this.parseUVIndex(s,e),h=this.parseUVIndex(i,e),this.addUV(d,u,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const r=this.parseVertexIndex(e[n],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let t=0,r=e.length;t<r;t++)this.addVertexLine(this.parseVertexIndex(e[t],n));for(let e=0,n=t.length;e<n;e++)this.addUVLine(this.parseUVIndex(t[e],r))}};return e.startObject("",!1),e}class kc extends ro{constructor(e){super(e),this.materials=null}load(e,t,n,r){const s=this,i=new ao(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{t(s.parse(n))}catch(t){r?r(t):console.error(t),s.manager.itemError(e)}}),n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Ec;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r=[];for(let e=0,s=n.length;e<s;e++){const s=n[e].trimStart();if(0===s.length)continue;const i=s.charAt(0);if("#"!==i)if("v"===i){const e=s.split(bc);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(Cc.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])).convertSRGBToLinear(),t.colors.push(Cc.r,Cc.g,Cc.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===i){const e=s.slice(1).trim().split(bc),n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const r=n[0];for(let e=1,s=n.length-1;e<s;e++){const s=n[e],i=n[e+1];t.addFace(r[0],s[0],i[0],r[1],s[1],i[1],r[2],s[2],i[2])}}else if("l"===i){const e=s.substring(1).trim().split(" ");let n=[];const r=[];if(-1===s.indexOf("/"))n=e;else for(let t=0,s=e.length;t<s;t++){const s=e[t].split("/");""!==s[0]&&n.push(s[0]),""!==s[1]&&r.push(s[1])}t.addLineGeometry(n,r)}else if("p"===i){const e=s.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(r=gc.exec(s))){const e=(" "+r[0].slice(1).trim()).slice(1);t.startObject(e)}else if(yc.test(s))t.object.startMaterial(s.substring(7).trim(),t.materialLibraries);else if(vc.test(s))t.materialLibraries.push(s.substring(7).trim());else if(_c.test(s))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===i){if(r=s.split(" "),r.length>1){const e=r[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===s)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+s+'"')}}t.finalize();const s=new Ia;s.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,n=t.objects.length;e<n;e++){const n=t.objects[e],r=n.geometry,i=n.materials,o="Line"===r.type,a="Points"===r.type;let l=!1;if(0===r.vertices.length)continue;const c=new Ln;c.setAttribute("position",new _n(r.vertices,3)),r.normals.length>0&&c.setAttribute("normal",new _n(r.normals,3)),r.colors.length>0&&(l=!0,c.setAttribute("color",new _n(r.colors,3))),!0===r.hasUVIndices&&c.setAttribute("uv",new _n(r.uvs,2));const d=[];for(let e=0,n=i.length;e<n;e++){const n=i[e],r=n.name+"_"+n.smooth+"_"+l;let s=t.materials[r];if(null!==this.materials)if(s=this.materials.create(n.name),!o||!s||s instanceof hn){if(a&&s&&!(s instanceof pa)){const e=new pa({size:10,sizeAttenuation:!1});Qt.prototype.copy.call(e,s),e.color.copy(s.color),e.map=s.map,s=e}}else{const e=new hn;Qt.prototype.copy.call(e,s),e.color.copy(s.color),s=e}void 0===s&&(s=o?new hn:a?new pa({size:1,sizeAttenuation:!1}):new fc,s.name=n.name,s.flatShading=!n.smooth,s.vertexColors=l,t.materials[r]=s),d.push(s)}let u;if(d.length>1){for(let e=0,t=i.length;e<t;e++){const t=i[e];c.addGroup(t.groupStart,t.groupCount,e)}u=o?new Bn(c,d):a?new Pa(c,d):new Qo(c,d)}else u=o?new Bn(c,d[0]):a?new Pa(c,d[0]):new Qo(c,d[0]);u.name=n.name,s.add(u)}else if(t.vertices.length>0){const e=new pa({size:1,sizeAttenuation:!1}),n=new Ln;n.setAttribute("position",new _n(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new _n(t.colors,3)),e.vertexColors=!0);const r=new Pa(n,e);s.add(r)}return s}}const Lc=new un;class Ac extends ro{constructor(e){super(e),this.propertyNameMapping={}}load(e,t,n,r){const s=this,i=new ao(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{t(s.parse(n))}catch(t){r?r(t):console.error(t),s.manager.itemError(e)}}),n,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}parse(e){function t(e){let t="",n=0;const r=/^ply([\s\S]*)end_header(\r\n|\r|\n)/.exec(e);null!==r&&(t=r[1],n=new Blob([r[0]]).size);const s={comments:[],elements:[],headerLength:n,objInfo:""},i=t.split(/\r\n|\r|\n/);let o;function a(e,t){const n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],n.name in t&&(n.name=t[n.name]),n}for(let e=0;e<i.length;e++){let t=i[e];if(t=t.trim(),""===t)continue;const n=t.split(/\s+/),r=n.shift();switch(t=n.join(" "),r){case"format":s.format=n[0],s.version=n[1];break;case"comment":s.comments.push(t);break;case"element":void 0!==o&&s.elements.push(o),o={},o.name=n[0],o.count=parseInt(n[1]),o.properties=[];break;case"property":o.properties.push(a(n,d.propertyNameMapping));break;case"obj_info":s.objInfo=t;break;default:console.log("unhandled",r,n)}}return void 0!==o&&s.elements.push(o),s}function n(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function r(e,t){const r=t.split(/\s+/),s={};for(let t=0;t<e.length;t++)if("list"===e[t].type){const i=[],o=n(r.shift(),e[t].countType);for(let s=0;s<o;s++)i.push(n(r.shift(),e[t].itemType));s[e[t].name]=i}else s[e[t].name]=n(r.shift(),e[t].type);return s}function s(e,t){const n={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let s;let a="";null!==(s=/end_header\s([\s\S]*)$/.exec(e))&&(a=s[1]);const l=a.split(/\r\n|\r|\n/);let c=0,d=0;for(let e=0;e<l.length;e++){let s=l[e];if(s=s.trim(),""===s)continue;d>=t.elements[c].count&&(c++,d=0);const i=r(t.elements[c].properties,s);o(n,t.elements[c].name,i),d++}return i(n)}function i(e){let t=new Ln;return e.indices.length>0&&t.setIndex(e.indices),t.setAttribute("position",new _n(e.vertices,3)),e.normals.length>0&&t.setAttribute("normal",new _n(e.normals,3)),e.uvs.length>0&&t.setAttribute("uv",new _n(e.uvs,2)),e.colors.length>0&&t.setAttribute("color",new _n(e.colors,3)),e.faceVertexUvs.length>0&&(t=t.toNonIndexed(),t.setAttribute("uv",new _n(e.faceVertexUvs,2))),t.computeBoundingSphere(),t}function o(e,t,n){function r(e){for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r in n)return r}return null}const s=r(["x","px","posx"])||"x",i=r(["y","py","posy"])||"y",o=r(["z","pz","posz"])||"z",a=r(["nx","normalx"]),l=r(["ny","normaly"]),c=r(["nz","normalz"]),d=r(["s","u","texture_u","tx"]),u=r(["t","v","texture_v","ty"]),h=r(["red","diffuse_red","r","diffuse_r"]),m=r(["green","diffuse_green","g","diffuse_g"]),p=r(["blue","diffuse_blue","b","diffuse_b"]);if("vertex"===t)e.vertices.push(n[s],n[i],n[o]),null!==a&&null!==l&&null!==c&&e.normals.push(n[a],n[l],n[c]),null!==d&&null!==u&&e.uvs.push(n[d],n[u]),null!==h&&null!==m&&null!==p&&(Lc.setRGB(n[h]/255,n[m]/255,n[p]/255).convertSRGBToLinear(),e.colors.push(Lc.r,Lc.g,Lc.b));else if("face"===t){const t=n.vertex_indices||n.vertex_index,r=n.texcoord;3===t.length?(e.indices.push(t[0],t[1],t[2]),r&&6===r.length&&(e.faceVertexUvs.push(r[0],r[1]),e.faceVertexUvs.push(r[2],r[3]),e.faceVertexUvs.push(r[4],r[5]))):4===t.length&&(e.indices.push(t[0],t[1],t[3]),e.indices.push(t[1],t[2],t[3]))}}function a(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}}function l(e,t,n,r){const s={};let i,o=0;for(let l=0;l<n.length;l++)if("list"===n[l].type){const c=[];i=a(e,t+o,n[l].countType,r);const d=i[0];o+=i[1];for(let s=0;s<d;s++)i=a(e,t+o,n[l].itemType,r),c.push(i[0]),o+=i[1];s[n[l].name]=c}else i=a(e,t+o,n[l].type,r),s[n[l].name]=i[0],o+=i[1];return[s,o]}let c;const d=this;if(e instanceof ArrayBuffer){const n=ho.decodeText(new Uint8Array(e)),r=t(n);c="ascii"===r.format?s(n,r):function(e,t){const n={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},r="binary_little_endian"===t.format,s=new DataView(e,t.headerLength);let a,c=0;for(let e=0;e<t.elements.length;e++)for(let i=0;i<t.elements[e].count;i++){a=l(s,c,t.elements[e].properties,r),c+=a[1];const i=a[0];o(n,t.elements[e].name,i)}return i(n)}(e,r)}else c=s(e,t(e));return c}}class Dc{constructor(e){this.objLoader=new kc(e),this.plyLoader=new Ac(e)}isValid(e){const t=e.split(".").pop().toLowerCase();return Dc.extensions.indexOf(t)>=0}get(e){const t=e.split(".").pop().toLowerCase();return new Promise(((n,r)=>{if("obj"===t)this.objLoader.load(e,(t=>{const s=t.children[0].geometry;return s&&"Geometry"===s.type||"BufferGeometry"===s.type?n(s):r(new Error(`Can't parse geometry from '${e}'`))}));else{if("ply"!==t)throw new Error(`Can't load geometry, unknown extension: '${t}' in '${e}'`);this.plyLoader.load(e,(t=>t&&"Geometry"===t.type||"BufferGeometry"===t.type?n(t):r(new Error(`Can't parse geometry from '${e}'`))))}}))}}Dc.extensions=["obj","ply"];class Oc{constructor(e){this.textureLoader=new ca(e)}isValid(e){const t=e.split(".").pop().toLowerCase();return Oc.extensions.indexOf(t)>=0}isValidMimeType(e){return Oc.mimeTypes.indexOf(e)>=0}get(e){return new Promise(((t,n)=>{this.textureLoader.load(e,(e=>{t(e)}),null,(e=>{console.error(e),n(new Error(e.message))}))}))}getImmediate(e){return this.textureLoader.load(e,null,null,(e=>{console.error(e)}))}}Oc.extensions=["jpg","png"],Oc.mimeTypes=["image/jpeg","image/png"];class Rc{constructor(e){this._customFontPath=null,this._loadingManager=e,this._textureLoader=new ca(e),this._cache={}}set fontPath(e){this._customFontPath=e}get fontPath(){return this._customFontPath}get(e){return this._cache[e]}async load(e){if(this._cache[e])return Promise.resolve(this._cache[e]);this._loadingManager.itemStart(e);const t=this.fontPath,n=t?t+e+".json":Pc+e+".json",r=t?t+e+".png":Pc+e+".png",s=fetch(n,{headers:{Accept:"application/json"}}).then((t=>{if(!t.ok)throw this._loadingManager.itemError(e),new Error(`failed to load bitmap font descriptor: '${n}', status: ${t.status} ${t.statusText}`);return t.json()})),i=new Promise(((e,t)=>{this._textureLoader.load(r,(n=>n?e(n):t(new Error(`failed to load font texture from '${r}'`))))}));return Promise.all([s,i]).then((t=>{const n={descriptor:t[0],texture:t[1]};return this._cache[e]=n,this._loadingManager.itemEnd(e),n}))}}const Pc="https://cdn.jsdelivr.net/gh/smithsonian/dpo-voyager@latest/assets/";class Nc extends W{constructor(e,t){super(e,t),this.systemAssetPath=null;const n=this.assetManager.loadingManager;this.jsonLoader=new no(n),this.modelLoader=new pc(n),this.geometryLoader=new Dc(n),this.textureLoader=new Oc(n),this.fontReader=new Rc(n)}dispose(){this.modelLoader.dispose(),super.dispose()}get assetManager(){return this.getMainComponent(Zi)}setDracoPath(e){this.modelLoader.dracoPath=e}setSystemAssetPath(e){this.fontReader.fontPath=e,this.systemAssetPath=e}getSystemAssetUrl(e){return(this.systemAssetPath||Pc)+e}async getJSON(e){const t=this.assetManager.getAssetUrl(e);return this.jsonLoader.get(t)}async getText(e){const t=this.assetManager.getAssetUrl(e);return eo(t,"GET")}async getModel(e){const t=this.assetManager.getAssetUrl(e);return this.modelLoader.get(t)}async getGeometry(e){const t=this.assetManager.getAssetUrl(e);return this.geometryLoader.get(t)}async getTexture(e){const t=this.assetManager.getAssetUrl(e);return this.textureLoader.get(t)}async getFont(e){const t=this.assetManager.getAssetUrl(e);return this.fontReader.load(t)}async getSystemTexture(e){const t=this.getSystemAssetUrl(e);return this.textureLoader.get(t)}async getSystemJSON(e){const t=this.getSystemAssetUrl(e);return this.jsonLoader.get(t)}}Nc.typeName="CVAssetReader",Nc.text="AssetReader",Nc.icon="",Nc.isSystemSingleton=!0;const Ic=function(e,t){const n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)},zc=function(e,t){"object"==typeof e&&(e=JSON.stringify(e));const n=window.URL.createObjectURL(new Blob([e],{type:"text/json"}));Ic(n,t)},Bc=function(e,t){Ic(e,t)};class Fc extends X{constructor(e,t){super(e,t),this.ins=this.addInputs(Fc.rgIns),this._object3D=null,this._isAttached=!1,this._object3D=new ft,this._object3D.matrixAutoUpdate=!1}get transform(){return this.node.components.get(Dr,!0)}get scene(){const e=this.transform;return e?e.getParentComponent(Ir,!0):void 0}get object3D(){return this._object3D}create(){super.create(),this.innerRoots.filter((e=>e.is(Dr))).forEach((e=>this._object3D.add(e.object3D))),this.trackComponent(Dr,(e=>this.ins.visible.value&&this.attachObject3D(e)),(e=>this.detachObject3D(e)))}dispose(){this.detachObject3D(this.transform),this.innerRoots.filter((e=>e.is(Dr))).forEach((e=>this._object3D.remove(e.object3D))),super.dispose()}update(e){super.update(e);const t=this.ins;if(t.visible.changed){const e=this.transform;t.visible.value?this.attachObject3D(e):this.detachObject3D(e)}return!0}onAddInnerRoot(e){e.is(Dr)&&this._object3D.add(e.object3D)}onRemoveInnerRoot(e){e.is(Dr)&&this._object3D.remove(e.object3D)}attachObject3D(e){this._isAttached||e&&(e.object3D.add(this._object3D),this._isAttached=!0)}detachObject3D(e){this._isAttached&&e&&(e.object3D.remove(this._object3D),this._isAttached=!1)}}Fc.typeName="CRenderGraph",Fc.rgIns={visible:O("Graph.Visible",!0)};var Hc=n(5310),jc=n.n(Hc);const Uc=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/document.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Smithsonian 3D Document","description":"Describes a 3D document containing a scene with 3D models.","definitions":{"scene":{"$id":"#scene","type":"object","properties":{"nodes":{"type":"array","description":"The indices of the scene\'s root nodes.","items":{"type":"integer","minimum":0},"uniqueItems":true,"minItems":1},"setup":{"description":"The index of the scene\'s setup.","type":"integer","minimum":0}}},"node":{"$id":"#node","type":"object","properties":{"name":{"type":"string"},"children":{"type":"array","description":"The indices of this node\'s children.","items":{"type":"integer","minimum":0},"uniqueItems":true,"minItems":1},"matrix":{"description":"A floating-point 4x4 transformation matrix stored in column-major order.","type":"array","items":{"type":"number"},"minItems":16,"maxItems":16,"default":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},"translation":{"description":"The node\'s translation along the x, y, and z axes.","type":"array","items":{"type":"number"},"minItems":3,"maxItems":3,"default":[0,0,0]},"rotation":{"description":"The node\'s unit quaternion rotation in the order (x, y, z, w), where w is the scalar.","type":"array","items":{"type":"number","minimum":-1,"maximum":1},"minItems":4,"maxItems":4,"default":[0,0,0,1]},"scale":{"description":"The node\'s non-uniform scale, given as the scaling factors along the x, y, and z axes.","type":"array","items":{"type":"number"},"minItems":3,"maxItems":3,"default":[1,1,1]},"camera":{"description":"The index of the camera component of this node.","type":"integer","minimum":0},"light":{"description":"The index of the light component of this node.","type":"integer","minimum":0},"meta":{"description":"The index of the meta data component of this node.","type":"integer","minimum":0},"model":{"description":"The index of the model component of this node.","type":"integer","minimum":0}},"not":{"anyOf":[{"required":["matrix","translation"]},{"required":["matrix","rotation"]},{"required":["matrix","scale"]}]}},"camera":{"$id":"#camera","type":"object","properties":{"type":{"description":"Specifies if the camera uses a perspective or orthographic projection.","type":"string","enum":["perspective","orthographic"]},"perspective":{"description":"A perspective camera containing properties to create a perspective projection matrix.","type":"object","properties":{"yfov":{"type":"number","description":"The floating-point vertical field of view in radians.","exclusiveMinimum":0},"aspectRatio":{"type":"number","description":"The floating-point aspect ratio of the field of view.","exclusiveMinimum":0},"znear":{"type":"number","description":"The floating-point distance to the near clipping plane.","exclusiveMinimum":0},"zfar":{"type":"number","description":"The floating-point distance to the far clipping plane.","exclusiveMinimum":0}},"required":["yfov","znear"]},"orthographic":{"description":"An orthographic camera containing properties to create an orthographic projection matrix.","type":"object","properties":{"xmag":{"type":"number","description":"The floating-point horizontal magnification of the view. Must not be zero."},"ymag":{"type":"number","description":"The floating-point vertical magnification of the view. Must not be zero."},"znear":{"type":"number","description":"The floating-point distance to the near clipping plane.","exclusiveMinimum":0},"zfar":{"type":"number","description":"The floating-point distance to the far clipping plane. `zfar` must be greater than `znear`.","exclusiveMinimum":0}},"required":["ymag","znear","zfar"]}},"required":["type"],"not":{"required":["perspective","orthographic"]}},"light":{"$id":"#light","type":"object","properties":{"type":{"description":"Specifies the type of the light source.","type":"string","enum":["ambient","directional","point","spot","hemisphere"]},"color":{"$ref":"#/definitions/colorRGB"},"intensity":{"type":"number","minimum":0,"default":1},"castShadow":{"type":"boolean","default":false},"point":{"type":"object","properties":{"distance":{"type":"number","minimum":0},"decay":{"type":"number","minimum":0}}},"spot":{"type":"object","properties":{"distance":{"type":"number","minimum":0},"decay":{"type":"number","minimum":0},"angle":{"type":"number","minimum":0},"penumbra":{"type":"number","minimum":0}}},"hemisphere":{"type":"object","properties":{"groundColor":{"$ref":"#/definitions/colorRGB"}}}},"required":["type"],"not":{"required":["point","spot","hemisphere"]}},"colorRGB":{"$id":"#colorRGB","type":"array","items":{"type":"number","minimum":0,"maximum":1},"minItems":3,"maxItems":3,"default":[1,1,1]}},"type":"object","properties":{"asset":{"type":"object","properties":{"type":{"type":"string","const":"application/si-dpo-3d.document+json"},"version":{"description":"Version of this presentation description.","type":"string","minLength":1},"copyright":{"description":"A copyright message to credit the content creator.","type":"string","minLength":1},"generator":{"description":"Tool that generated this presentation description.","type":"string","minLength":1}},"required":["type","version"]},"scene":{"description":"Index of the root scene of the document.","type":"integer","minimum":0},"scenes":{"description":"An array of scenes.","type":"array","items":{"$ref":"#/definitions/scene"}},"nodes":{"description":"An array of nodes.","type":"array","items":{"$ref":"#/definitions/node"},"minItems":1},"metas":{"description":"An array of meta data components.","type":"array","items":{"$ref":"./meta.schema.json"}},"setups":{"description":"An array of setup components.","type":"array","items":{"$ref":"./setup.schema.json"},"minItems":1},"cameras":{"description":"An array of camera components.","type":"array","items":{"$ref":"#/definitions/camera"},"minItems":1},"lights":{"description":"An array of light components.","type":"array","items":{"$ref":"#/definitions/light"},"minItems":1},"models":{"description":"An array of model components.","type":"array","items":{"$ref":"./model.schema.json"},"minItems":1}},"required":["asset","scene","scenes"],"additionalProperties":false}'),Yc=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/common.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Math","description":"Definitions for mathematical compound objects such as vectors and matrices.","definitions":{"units":{"$id":"#units","type":"string","enum":["inherit","mm","cm","m","km","in","ft","yd","mi"]},"vector2":{"description":"2-component vector.","$id":"#vector2","type":"array","items":{"type":"number"},"minItems":2,"maxItems":2,"default":[0,0]},"vector3":{"description":"3-component vector.","$id":"#vector3","type":"array","items":{"type":"number"},"minItems":3,"maxItems":3,"default":[0,0,0]},"vector4":{"description":"4-component vector.","$id":"#vector4","type":"array","items":{"type":"number"},"minItems":4,"maxItems":4,"default":[0,0,0,0]},"matrix3":{"description":"3 by 3, matrix, storage: column-major.","$id":"#matrix3","type":"array","items":{"type":"number"},"minItems":9,"maxItems":9,"default":[1,0,0,0,1,0,0,0,1]},"matrix4":{"description":"4 by 4 matrix, storage: column-major.","$id":"#matrix4","type":"array","items":{"type":"number"},"minItems":16,"maxItems":16,"default":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},"boundingBox":{"description":"Axis-aligned 3D bounding box.","$id":"#boundingBox","type":"object","properties":{"min":{"$ref":"#/definitions/vector3"},"max":{"$ref":"#/definitions/vector3"}},"required":["min","max"]}}}'),Vc=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/meta.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Meta","description":"Meta data for a scene or model item.","definitions":{"image":{"$id":"image","description":"Reference to a preview image","type":"object","properties":{"uri":{"description":"Location of the image resource, absolute URL or path relative to this document","type":"string","minLength":1},"quality":{"type":"string","enum":["Thumb","Low","Medium","High"]},"byteSize":{"type":"integer","minimum":1},"width":{"type":"integer","minimum":1},"height":{"type":"integer","minimum":1}},"required":["uri","quality"]},"article":{"$id":"#article","description":"Reference to an external document (HTML)","type":"object","properties":{"id":{"type":"string","minLength":1},"title":{"description":"Short title.","type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"lead":{"description":"Short lead text.","type":"string"},"leads":{"description":"Short lead text with language key.","type":"object"},"tags":{"description":"Array of tags, categorizing the article.","type":"array","items":{"type":"string"}},"taglist":{"description":"Array of tags, categorizing the annotation with language key.","type":"object"},"uri":{"description":"Location of the article resource, absolute URL or path relative to this document","type":"string","minLength":1},"uris":{"description":"Location of the article resource, absolute URL or path relative to this document with language key","type":"object"},"mimeType":{"description":"MIME type of the resource.","type":"string"},"thumbnailUri":{"description":"Location of a thumbnail/preview image of the resource.","type":"string"}},"required":["id"],"additionalProperties":false},"audioclip":{"$id":"audioclip","description":"Reference to an audio file","type":"object","properties":{"id":{"type":"string","minLength":1},"name":{"description":"Short name.","type":"string"},"uris":{"description":"Location of the audio resource, absolute URL or path relative to this document with language key","type":"object"}},"required":["id","uris"]}},"type":"object","properties":{"collection":{"description":"Information retrieved from the collection record for the item.","type":"object"},"process":{"description":"Information about how the item was processed.","type":"object"},"images":{"type":"array","items":{"$ref":"#/definitions/image"},"minItems":1},"articles":{"type":"array","items":{"$ref":"#/definitions/article"},"minItems":1},"leadArticle":{"description":"Index of the main article. This is the default article displayed with the item.","type":"integer","minimum":0},"audio":{"type":"array","items":{"$ref":"#/definitions/audioclip"},"minItems":0}},"additionalProperties":false}'),$c=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/model.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Model","description":"Describes the visual representations (models, derivatives) of a 3D item.","definitions":{"annotation":{"description":"Spatial annotation (hot spot, hot zone) on a model. Annotations can reference articles.","type":"object","properties":{"id":{"type":"string","minLength":1},"title":{"type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"lead":{"type":"string"},"leads":{"description":"Short lead text with language key.","type":"object"},"marker":{"type":"string"},"tags":{"description":"Array of tags, categorizing the annotation.","type":"array","items":{"type":"string"}},"taglist":{"description":"Array of tags, categorizing the annotation with language key.","type":"object"},"articleId":{"description":"Id of an article related to this annotation.","type":"string","minLength":1},"imageUri":{"description":"URI of an image resource for this annotation.","type":"string","minLength":1},"style":{"type":"string"},"visible":{"description":"Flag indicating whether the annotation is visible.","type":"boolean","default":true},"expanded":{"description":"Flag indicating whether the annotation is displayed in expanded state.","type":"boolean","default":false},"scale":{"description":"Scales the annotation relative to its default size.","type":"number","default":1},"offset":{"description":"Offsets the annotation along its direction.","type":"number","default":0},"tilt":{"description":"Tilt angle of the annotation relative to the direction vector in degrees.","type":"number","default":0},"azimuth":{"description":"Azimuth angle of a tilted annotation.","type":"number","default":0},"color":{"description":"Color of the annotation","type":"array","minItems":3,"maxItems":3,"items":{"type":"number"}},"position":{"description":"Position where the annotation is anchored, in local item coordinates.","$ref":"./common.schema.json#/definitions/vector3"},"direction":{"description":"Direction of the stem of this annotation, usually corresponds to the surface normal.","$ref":"./common.schema.json#/definitions/vector3"},"zoneIndex":{"description":"Index of the zone on the zone texture.","type":"integer","minimum":0}},"required":["id"],"additionalProperties":false},"derivative":{"description":"Visual representation derived from the master model.","type":"object","properties":{"usage":{"description":"usage categories for a derivative.","type":"string","enum":["Image2D","Web3D","App3D","iOSApp3D","Print3D","Editorial3D"]},"quality":{"type":"string","enum":["Thumb","Low","Medium","High","Highest","AR"]},"assets":{"description":"List of individual resources this derivative is composed of.","type":"array","items":{"$ref":"#/definitions/asset"}}}},"asset":{"description":"an individual resource for a 3D model.","type":"object","properties":{"uri":{"type":"string","minLength":1},"type":{"type":"string","enum":["Model","Geometry","Image","Texture","Points","Volume"]},"part":{"type":"string","minLength":1},"mimeType":{"type":"string","minLength":1},"byteSize":{"type":"integer","minimum":1},"numFaces":{"type":"integer","minimum":1},"imageSize":{"type":"integer","minimum":1},"mapType":{"type":"string","enum":["Color","Normal","Occlusion","Emissive","MetallicRoughness","Zone"]}},"required":["uri","type"]},"material":{"description":"Surface properties for this model, shared by all derivatives.","type":"object","properties":{}}},"type":"object","properties":{"units":{"$ref":"./common.schema.json#/definitions/units"},"tags":{"type":"string"},"visible":{"type":"boolean"},"renderOrder":{"type":"number"},"overlayMap":{"type":"number"},"shadowSide":{"type":"string","enum":["Front","Back","Double"]},"derivatives":{"type":"array","items":{"$ref":"#/definitions/derivative"}},"translation":{"description":"Translation vector. Must be applied to bring model into its \'neutral\' pose.","$ref":"./common.schema.json#/definitions/vector3"},"rotation":{"description":"Rotation quaternion. Must be applied to bring model into its \'neutral\' pose.","$ref":"./common.schema.json#/definitions/vector4"},"boundingBox":{"description":"Bounding box for this model, shared by all derivatives.","$ref":"./common.schema.json#/definitions/boundingBox"},"material":{"$ref":"#/definitions/material"},"annotations":{"description":"List of annotations to be displayed with the model","type":"array","items":{"$ref":"#/definitions/annotation"}}},"required":["units","derivatives"],"additionalProperties":false}'),Wc=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/setup.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Setup","description":"Tours and settings for explorer documents (background, interface, etc.)","definitions":{"viewer":{"type":"object","properties":{"shader":{"type":"string"},"exposure":{"type":"number"},"gamma":{"type":"number"},"annotationsVisible":{"type":"boolean"},"activeTags":{"type":"string"},"sortedTags":{"type":"string"},"radioTags":{"type":"boolean"}},"required":["shader","exposure","gamma"]},"reader":{"type":"object","properties":{"enabled":{"type":"boolean"},"position":{"type":"string"},"articleId":{"description":"Id of the article currently displayed in the reader.","type":"string","minLength":1}}},"interface":{"type":"object","properties":{"visible":{"type":"boolean"},"logo":{"type":"boolean"},"menu":{"type":"boolean"},"tools":{"type":"boolean"}}},"navigation":{"type":"object","properties":{"type":{"type":"string","enum":["Orbit","Walk"]},"enabled":{"type":"boolean"},"autoZoom":{"type":"boolean"},"orbit":{"$comment":"TODO: Implement","type":"object","properties":{}},"walk":{"$comment":"TODO: Implement","type":"object","properties":{}}}},"background":{"type":"object","properties":{"style":{"type":"string","enum":["Solid","LinearGradient","RadialGradient"]},"color0":{"$ref":"./common.schema.json#/definitions/vector3"},"color1":{"$ref":"./common.schema.json#/definitions/vector3"}}},"floor":{"type":"object","properties":{"visible":{"type":"boolean"},"position":{"$ref":"./common.schema.json#/definitions/vector3"},"size":{"type":"number"},"color":{"$ref":"./common.schema.json#/definitions/vector3"},"opacity":{"type":"number"},"receiveShadow":{"type":"boolean"}}},"grid":{"type":"object","properties":{"visible":{"type":"boolean"},"color":{"$ref":"./common.schema.json#/definitions/vector3"}}},"tape":{"type":"object","properties":{"enabled":{"type":"boolean"},"startPosition":{"$ref":"./common.schema.json#/definitions/vector3"},"startDirection":{"$ref":"./common.schema.json#/definitions/vector3"},"endPosition":{"$ref":"./common.schema.json#/definitions/vector3"},"endDirection":{"$ref":"./common.schema.json#/definitions/vector3"}}},"slicer":{"type":"object","properties":{"enabled":{"type":"boolean"},"axis":{"type":"string","enum":["X","Y","Z"]},"inverted":{"type":"boolean"},"position":{"type":"number"}}},"tours":{"description":"Animated tours.","type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"lead":{"type":"string"},"leads":{"description":"Short lead text with language key.","type":"object"},"tags":{"description":"Array of tags, categorizing the tour.","type":"array","items":{"type":"string"}},"taglist":{"description":"Array of tags, categorizing the annotation with language key.","type":"object"},"steps":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"id":{"type":"string"}}}}}}},"snapshots":{"description":"Snapshots are animatable scene states.","type":"object","properties":{"features":{"type":"array","items":{"type":"string"}},"targets":{"type":"array","items":{"type":"string"}},"states":{"type":"array","items":{"type":"object"}}}}},"type":"object","properties":{"units":{"$ref":"./common.schema.json#/definitions/units"},"interface":{"$ref":"#/definitions/interface"},"viewer":{"$ref":"#/definitions/viewer"},"reader":{"$ref":"#/definitions/reader"},"navigation":{"$ref":"#/definitions/navigation"},"background":{"$ref":"#/definitions/background"},"floor":{"$ref":"#/definitions/floor"},"grid":{"$ref":"#/definitions/grid"},"tape":{"$ref":"#/definitions/tape"},"slicer":{"$ref":"#/definitions/slicer"},"tours":{"$ref":"#/definitions/tours"}}}');const Gc=new he,qc=new he,Xc=new fe,Kc=new ue,Jc=new Qe;class Zc extends Dr{get settingProperties(){return[this.ins.position,this.ins.rotation,this.ins.scale]}get snapshotProperties(){return[this.ins.position,this.ins.rotation,this.ins.scale]}fromData(e){const{position:t,rotation:n,order:r,scale:s}=this.ins,i=Ar[r.getValidatedValue()];e.matrix?(Xc.fromArray(e.matrix),Xc.decompose(Gc,Kc,qc),Gc.toArray(t.value),Jc.setFromQuaternion(Kc,i),Gc.setFromEuler(Jc).multiplyScalar(ne).toArray(n.value),qc.toArray(s.value),t.set(),n.set(),s.set()):(e.translation&&t.setValue(e.translation.slice()),e.rotation&&(Kc.fromArray(e.rotation),Jc.setFromQuaternion(Kc,i),Gc.setFromEuler(Jc).multiplyScalar(ne).toArray(n.value),n.set()),e.scale&&s.setValue(e.scale.slice()),this.transform.changed=!0)}toData(){this.object3D.matrix.decompose(Gc,Kc,qc);const e={};return 0===Gc.x&&0===Gc.y&&0===Gc.z||(e.translation=Gc.toArray()),0===Kc.x&&0===Kc.y&&0===Kc.z&&1===Kc.w||(e.rotation=Kc.toArray()),1===qc.x&&1===qc.y&&1===qc.z||(e.scale=qc.toArray()),e}}Zc.typeName="CVNode",Zc.text="Transform",Zc.icon="";const Qc=.5*Math.PI,ed=new Me,td=new he,nd=new he,rd=new he,sd=new fe,id=(new fe,[new he(0,-Qc,0),new he(0,Qc,0),new he(-Qc,0,0),new he(Qc,0,0),new he(0,0,0),new he(0,Math.PI,0)]);var od,ad;!function(e){e[e.Perspective=0]="Perspective",e[e.Orthographic=1]="Orthographic"}(od||(od={})),function(e){e[e.None=-1]="None",e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom",e[e.Front=4]="Front",e[e.Back=5]="Back"}(ad||(ad={}));class ld extends ts{constructor(e){super(),this.isUniversalCamera=!0,this.fov=50,this.size=20,this.aspect=1,this.distance=20,this.zoom=1,this.near=.1,this.far=2e3,this.focus=10,this.filmGauge=35,this.filmOffset=0,this.view=null,this.setProjection(e)}setProjection(e){e===od.Orthographic?(this.type="OrthographicCamera",this.isPerspectiveCamera=!1,this.isOrthographicCamera=!0):(this.type="PerspectiveCamera",this.isPerspectiveCamera=!0,this.isOrthographicCamera=!1),this.updateProjectionMatrix()}getProjection(){return this.isOrthographicCamera?od.Orthographic:od.Perspective}setPreset(e){e!==ad.None?(this.rotation.setFromVector3(id[e],"XYZ"),this.position.set(0,0,this.distance).applyQuaternion(this.quaternion)):(this.rotation.set(0,0,0),this.position.set(0,0,0)),this.updateMatrix()}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ne*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*te*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ne*Math.atan(Math.tan(.5*te*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,i){this.isPerspectiveCamera?mo.prototype.setViewOffset.call(this,e,t,n,r,s,i):ns.prototype.setViewOffset.call(this,e,t,n,r,s,i)}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}zoomToView(){}moveToView(e){this.updateMatrixWorld(!1),ed.copy(e),sd.extractRotation(this.matrixWorldInverse),ed.applyMatrix4(sd),ed.getSize(td),ed.getCenter(nd);const t=Math.max(td.x/this.aspect,td.y);rd.set(-nd.x,-nd.y,0),this.isPerspectiveCamera?rd.z=td.z/(2*Math.tan(this.fov*wr.DEG2RAD*.5)):(this.size=.5*t,rd.z=2*td.z,this.far=Math.max(this.far,2*rd.z)),sd.extractRotation(this.matrixWorld),rd.applyMatrix4(sd),this.matrix.decompose(this.position,this.quaternion,this.scale),this.position.copy(rd),this.updateMatrix()}updateProjectionMatrix(){const e=this.near,t=this.far,n=this.aspect,r=this.zoom,s=this.view;if(this.isOrthographicCamera){const i=this.size,o=i/(2*r),a=o*n;let l=-a,c=a,d=o,u=-o;if(s&&s.enabled){const e=r/(s.width/s.fullWidth),t=r/(s.height/s.fullHeight),o=i*n/s.width,a=i/s.height;l+=o*(s.offsetX/e),c=l+o*(s.width/e),d-=a*(s.offsetY/t),u=d-a*(s.height/t)}this.projectionMatrix.makeOrthographic(l,c,d,u,e,t)}else{let o=e*Math.tan(.5*te*this.fov)/r,a=2*o,l=n*a,c=-.5*l;s&&s.enabled&&(c+=s.offsetX*l/s.fullWidth,o-=s.offsetY*a/s.fullHeight,l*=s.width/s.fullWidth,a*=s.height/s.fullHeight);var i=this.filmOffset;0!==i&&(c+=e*i/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+l,o,o-a,e,t)}this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}copy(e,t){return super.copy(e,t),this.type=e.type,this.isOrthographicCamera=e.isOrthographicCamera,this.isPerspectiveCamera=e.isPerspectiveCamera,this.fov=e.fov,this.size=e.size,this.aspect=e.aspect,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.view=e.view?Object.assign({},e.view):null,this}clone(){return(new this.constructor).copy(this)}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.size=this.size,t.object.aspect=this.aspect,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const cd=new he,dd=new he,ud=new Qe,hd=new ue;class md extends Br{constructor(e,t){super(e,t),this.ins=this.addInputs(md.camIns),this.object3D=new ld}get camera(){return this.object3D}update(){const{autoActivate:e,activate:t}=this.ins;if(t.changed||e.changed&&e.value){const e=this.scene;e&&(e.activeCameraComponent=this)}const n=this.camera,{position:r,rotation:s,projection:i,fov:o,size:a,zoom:l,near:c,far:d}=this.ins;return(r.changed||s.changed)&&(n.position.fromArray(r.value),n.rotation.fromArray(s.value),n.updateMatrix()),i.changed&&n.setProjection(i.getValidatedValue()),n.fov=o.value,n.size=a.value,n.zoom=l.value,n.near=c.value,n.far=d.value,n.updateProjectionMatrix(),!0}dispose(){const e=this.scene;e&&e.activeCameraComponent===this&&(e.activeCameraComponent=null),super.dispose()}setPropertiesFromMatrix(e){const t=!e;e=e||this.object3D.matrix;const{position:n,rotation:r,order:s}=this.ins;e.decompose(cd,hd,dd),cd.toArray(n.value);const i=s.getOptionText();ud.setFromQuaternion(hd,i),cd.setFromEuler(ud),cd.multiplyScalar(wr.RAD2DEG).toArray(r.value),n.set(t),r.set(t)}}md.typeName="CCamera",md.camIns={autoActivate:O("Camera.AutoActivate",!0),activate:B("Camera.Activate"),position:E("Transform.Position"),rotation:E("Transform.Rotation"),order:N("Transform.Order",Ar,Ar.ZYX),projection:N("Projection.Type",od,od.Perspective),fov:S("Projection.FovY",52),size:S("Projection.Size",20),zoom:S("Projection.Zoom",1),near:S("Frustum.ZNear",.01),far:S("Frustum.ZFar",1e4)};class pd extends md{constructor(e,t){super(e,t),this.object3D.layers.enable(1)}get settingProperties(){return[this.ins.projection,this.ins.fov,this.ins.size,this.ins.near,this.ins.far]}fromDocument(e,t){if(!isFinite(t.camera))throw new Error("camera property missing in node");const n=e.cameras[t.camera];return"perspective"===n.type?this.ins.copyValues({projection:od.Perspective,fov:n.perspective.yfov,near:n.perspective.znear,far:n.perspective.zfar}):this.ins.copyValues({projection:od.Orthographic,size:n.orthographic.ymag,near:n.orthographic.znear,far:n.orthographic.zfar}),t.camera}toDocument(e,t){const n=this.ins,r={};n.projection.getValidatedValue()===od.Perspective?(r.type="perspective",r.perspective={yfov:n.fov.value,znear:n.near.value,zfar:n.far.value}):(r.type="orthographic",r.orthographic={ymag:n.size.value,znear:n.near.value,zfar:n.far.value}),e.cameras=e.cameras||[];const s=e.cameras.length;return e.cameras.push(r),s}}var fd;pd.typeName="CVCamera",pd.text="Camera",pd.icon="video",function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(fd||(fd={}));const gd={[fd.Low]:512,[fd.Medium]:1024,[fd.High]:2048};class vd extends Br{constructor(){super(...arguments),this.ins=this.addInputs(vd.lightIns)}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;if((n.color.changed||n.intensity.changed)&&(t.color.fromArray(n.color.value),t.intensity=n.intensity.value),(n.shadowEnabled.changed||n.shadowEnabled.value&&(n.shadowResolution.changed||n.shadowBlur.changed))&&(t.castShadow=n.shadowEnabled.value,t.shadow.radius=n.shadowBlur.value,n.shadowResolution.changed)){const e=gd[n.shadowResolution.getValidatedValue()];t.shadow.mapSize.set(e,e),t.shadow.map=null}return!0}}vd.typeName="CLight",vd.lightIns={color:D("Light.Color"),intensity:S("Light.Intensity",1),shadowEnabled:O("Shadow.Enabled"),shadowResolution:N("Shadow.Resolution",fd,fd.Medium),shadowBlur:S("Shadow.Blur",1)};class yd extends vd{constructor(e,t){super(e,t),this.ins=this.addInputs(yd.dirLightIns),this.object3D=new ss,this.light.target.matrixAutoUpdate=!1}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;if((n.position.changed||n.target.changed)&&(t.position.fromArray(n.position.value),t.target.position.fromArray(n.target.value),t.updateMatrix(),t.target.updateMatrix()),n.shadowSize.changed){const e=t.shadow.camera,r=.5*n.shadowSize.value;e.left=e.bottom=-r,e.right=e.top=r,e.updateProjectionMatrix()}return!0}onAddToParent(e){super.onAddToParent(e),e.add(this.light.target)}onRemoveFromParent(e){super.onRemoveFromParent(e),e.remove(this.light.target)}}yd.typeName="CDirectionalLight",yd.dirLightIns={position:E("Light.Position"),target:E("Light.Target",[0,-1,0]),shadowSize:S("Shadow.Size",100)};class _d extends yd{get settingProperties(){return[this.ins.color,this.ins.intensity,this.ins.shadowEnabled,this.ins.shadowSize,this.ins.shadowResolution,this.ins.shadowBlur]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],r=this.ins;if("directional"!==n.type)throw new Error("light type mismatch: not a directional light");return r.copyValues({color:void 0!==n.color?n.color:r.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:r.intensity.schema.preset,position:r.position.schema.preset,target:r.target.schema.preset,shadowEnabled:n.shadowEnabled||!1,shadowSize:void 0!==n.shadowSize?n.shadowSize:r.shadowSize.schema.preset,shadowResolution:void 0!==n.shadowResolution?fd[n.shadowResolution]||0:r.shadowResolution.schema.preset,shadowBlur:void 0!==n.shadowBlur?n.shadowBlur:r.shadowBlur.schema.preset}),t.light}toDocument(e,t){const n=this.ins,r={color:n.color.cloneValue(),intensity:n.intensity.value,type:"directional"};n.shadowEnabled.value&&(r.shadowEnabled=!0,n.shadowSize.isDefault()||(r.shadowSize=n.shadowSize.value),n.shadowBlur.isDefault()||(r.shadowBlur=n.shadowBlur.value),n.shadowResolution.isDefault()||(r.shadowResolution=fd[n.shadowResolution.value])),e.lights=e.lights||[];const s=e.lights.length;return e.lights.push(r),s}}_d.typeName="CVDirectionalLight",_d.text="Directional Light",_d.icon="bulb";new he;class bd extends vd{constructor(e,t){super(e,t),this.ins=this.addInputs(bd.pointLightIns),this.object3D=new yo}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;return n.position.changed&&(t.position.fromArray(n.position.value),t.updateMatrix()),(n.distance.changed||n.decay.changed)&&(t.distance=n.distance.value,t.decay=n.decay.value),t.updateMatrix(),!0}}bd.typeName="CPointLight",bd.pointLightIns={position:E("Light.Position"),distance:S("Light.Distance"),decay:S("Light.Decay",1)};class wd extends bd{get settingProperties(){return[this.ins.color,this.ins.intensity,this.ins.distance,this.ins.decay,this.ins.shadowEnabled,this.ins.shadowResolution,this.ins.shadowBlur]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],r=this.ins;if("point"!==n.type)throw new Error("light type mismatch: not a point light");return n.point=n.point||{},r.copyValues({color:void 0!==n.color?n.color:r.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:r.intensity.schema.preset,position:r.position.schema.preset,distance:n.point.distance||r.distance.schema.preset,decay:void 0!==n.point.decay?n.point.decay:r.decay.schema.preset,shadowEnabled:n.shadowEnabled||!1,shadowResolution:void 0!==n.shadowResolution&&fd[n.shadowResolution]||1,shadowBlur:void 0!==n.shadowBlur?n.shadowBlur:r.shadowBlur.schema.preset}),t.light}toDocument(e,t){const n=this.ins,r={color:n.color.cloneValue(),intensity:n.intensity.value,point:{distance:n.distance.value,decay:n.decay.value},type:"point"};n.shadowEnabled.value&&(r.shadowEnabled=!0,n.shadowBlur.isDefault()||(r.shadowBlur=n.shadowBlur.value),n.shadowResolution.isDefault()||(r.shadowResolution=fd[n.shadowResolution.value])),e.lights=e.lights||[];const s=e.lights.length;return e.lights.push(r),s}}wd.typeName="CVPointLight",wd.text="Point Light",wd.icon="bulb";class xd extends vd{constructor(e,t){super(e,t),this.ins=this.addInputs(xd.spotLightIns),this.object3D=new bo,this.light.target.matrixAutoUpdate=!1}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;return(n.position.changed||n.target.changed)&&(t.position.fromArray(n.position.value),t.target.position.fromArray(n.target.value),t.updateMatrix(),t.target.updateMatrix()),(n.distance.changed||n.decay.changed||n.angle.changed||n.penumbra.changed)&&(t.distance=n.distance.value,t.decay=n.decay.value,t.angle=n.angle.value*te,t.penumbra=n.penumbra.value),!0}onAddToParent(e){super.onAddToParent(e),e.add(this.light.target)}onRemoveFromParent(e){super.onRemoveFromParent(e),e.remove(this.light.target)}}xd.typeName="CSpotLight",xd.spotLightIns={position:E("Light.Position"),target:E("Light.Target",[0,-1,0]),distance:S("Light.Distance"),decay:S("Light.Decay",1),angle:S("Light.Angle",45),penumbra:C("Light.Penumbra",.5)};class Md extends xd{get settingProperties(){return[this.ins.color,this.ins.intensity,this.ins.distance,this.ins.decay,this.ins.angle,this.ins.penumbra,this.ins.shadowEnabled,this.ins.shadowResolution,this.ins.shadowBlur]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],r=this.ins;if("spot"!==n.type)throw new Error("light type mismatch: not a spot light");return n.spot=n.spot||{},r.copyValues({color:void 0!==n.color?n.color:r.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:r.intensity.schema.preset,position:r.position.schema.preset,target:r.target.schema.preset,distance:n.spot.distance||r.distance.schema.preset,decay:void 0!==n.spot.decay?n.spot.decay:r.decay.schema.preset,angle:void 0!==n.spot.angle?n.spot.angle:r.angle.schema.preset,penumbra:n.spot.penumbra||r.penumbra.schema.preset,shadowEnabled:n.shadowEnabled||!1,shadowResolution:void 0!==n.shadowResolution&&fd[n.shadowResolution]||1,shadowBlur:void 0!==n.shadowBlur?n.shadowBlur:r.shadowBlur.schema.preset}),t.light}toDocument(e,t){const n=this.ins,r={color:n.color.cloneValue(),intensity:n.intensity.value,spot:{distance:n.distance.value,decay:n.decay.value,angle:n.angle.value,penumbra:n.penumbra.value},type:"spot"};n.shadowEnabled.value&&(r.shadowEnabled=!0,n.shadowBlur.isDefault()||(r.shadowBlur=n.shadowBlur.value),n.shadowResolution.isDefault()||(r.shadowResolution=fd[n.shadowResolution.value])),e.lights=e.lights||[];const s=e.lights.length;return e.lights.push(r),s}}Md.typeName="CVSpotLight",Md.text="Spot Light",Md.icon="bulb";class Sd extends c{constructor(e){super(),this.addEvent("update"),this._list=e||[],this._dict={},e&&e.forEach((e=>{e.id&&(this._dict[e.id]=e)}))}get length(){return this._list.length}get ids(){return Object.keys(this._dict)}get items(){return this._list}set items(e){this._list=e,this._dict={},e.forEach((e=>{e.id&&(this._dict[e.id]=e)})),this.emit({type:"update",item:null,what:"update"})}append(e){this._list.push(e),e.id&&(this._dict[e.id]=e),this.emit({type:"update",item:e,what:"add"})}insertBefore(e,t){const n=this._list.indexOf(t);n>=0&&this.insertAt(e,n)}insertAt(e,t){this._list.splice(t,0,e),e.id&&(this._dict[e.id]=e),this.emit({type:"update",item:e,what:"add"})}replaceItem(e,t){const n=this._list.indexOf(t);n>=0&&this.replaceAt(e,n)}replaceAt(e,t){const n=this._list[t];n.id&&delete this._dict[n.id],this._list[t]=e,e.id&&(this._dict[e.id]=e),this.emit({type:"update",item:e,what:"replace"})}moveItem(e,t){const n=this._list.indexOf(e);this.moveAt(n,t)}moveAt(e,t){const n=this._list;if(e+t<0||e+t>=n.length)return;const r=n[e];if(t>0){for(let r=0;r<t;++r)n[e+r]=n[e+r+1];n[e+t]=r}else{if(!(t<0))return;for(let r=0;r>t;--r)n[e+r]=n[e+r-1];n[e+t]=r}this.emit({type:"update",item:r,what:"move"})}removeById(e){const t=this._dict[e];return t&&this.removeItem(t),t}removeItem(e){const t=this._list.indexOf(e);return this.removeAt(t),t}removeAt(e){const t=this._list;if(e<0||e>=t.length)return;const n=t[e];return t.splice(e,1),n.id&&delete this._dict[n.id],this.emit({type:"update",item:n,what:"remove"}),n}getAt(e){return this._list[e]}getById(e){return this._dict[e]}getIndexOf(e){return this._list.indexOf(e)}copy(e){this.items=e.slice()}clone(){return this._list.slice()}}Sd.prototype[Symbol.iterator]=function(){return{index:0,list:this._list,next:function(){return this.index<this.list.length?{value:this.list[this.index++],done:!1}:{done:!0}}}};class Td extends c{constructor(e){super(),this.addEvent("update"),this._dict={},e&&e.forEach((e=>{e.id&&(this._dict[e.id]=e)}))}get length(){return this.ids.length}get items(){return this.ids.map((e=>this._dict[e]))}set items(e){e.forEach((e=>{e.id&&(this._dict[e.id]=e)})),this.emit({type:"update",item:null,what:"update"})}get ids(){return Object.keys(this._dict)}get dictionary(){return this._dict}set dictionary(e){this._dict=e,this.emit({type:"update",item:null,what:"update"})}insert(e,t){if(!(t=t||e.id))throw new Error("can't insert, missing id");this._dict[t]=e,this.emit({type:"update",item:e,what:"insert"})}remove(e){const t="string"==typeof e?e:e.id,n=this._dict[t];void 0!==n&&(delete this._dict[t],this.emit({type:"update",item:n,what:"remove"}))}get(e){return this._dict[e]}getOrCreate(e,t){let n=this._dict[e];return n||(n=this._dict[e]=t,this.emit({type:"update",item:n,what:"insert"})),n}copy(e){this.dictionary=Object.assign({},e)}clone(){return Object.assign({},this._dict)}}class Cd extends c{constructor(e){super(),this.addEvents("update","dispose"),e?this.fromJSON(e):this._data=this.init()}static generateId(){return i()}get id(){return this._data.id}get data(){return this._data}set(e,t){this._data[e]=t,this.update()}get(e){return this._data[e]}update(){this.emit({type:"update",document:this})}dispose(){this.emit({type:"dispose",document:this}),this._data=null}fromJSON(e){return this._data={},this.inflate(e,this._data),this.update(),this}toJSON(e){return e=e||{},this.deflate(this._data,e),e}init(){return{}}inflate(e,t){Object.assign(t,e)}deflate(e,t){t=t||{},Object.assign(t,this._data)}}var Ed,kd,Ld;!function(e){e[e.mm=0]="mm",e[e.cm=1]="cm",e[e.m=2]="m",e[e.km=3]="km",e[e.in=4]="in",e[e.ft=5]="ft",e[e.yd=6]="yd",e[e.mi=7]="mi"}(Ed||(Ed={})),function(e){e[e.EN=0]="EN",e[e.ES=1]="ES",e[e.DE=2]="DE",e[e.NL=3]="NL",e[e.JA=4]="JA"}(kd||(kd={})),function(e){e.EN="English",e.ES="Spanish (Español)",e.DE="German (Deutsche)",e.NL="Dutch (Nederlands)",e.JA="Japanese (日本語)"}(Ld||(Ld={}));class Ad extends Cd{constructor(){super(...arguments),this._language=kd.EN}static fromJSON(e){return new Ad(e)}toString(){return this.title}get title(){return 0===Object.keys(this.data.titles).length&&(this.data.titles.EN=this.data.title),this.data.titles[kd[this.language]]||"undefined"}set title(e){this.data.titles[kd[this.language]]=e,this.update()}get defaultTitle(){return 0===Object.keys(this.data.titles).length&&(this.data.titles.EN=this.data.title),this.data.titles.EN||"undefined"}get uri(){return 0===Object.keys(this.data.uris).length&&(this.data.uris.EN=this.data.uri),this.data.uris[kd[this.language]]}set uri(e){this.data.uris[kd[this.language]]=e,this.update()}get lead(){return 0===Object.keys(this.data.leads).length&&(this.data.leads.EN=this.data.lead),this.data.leads[kd[this.language]]||""}set lead(e){this.data.leads[kd[this.language]]=e,this.update()}get tags(){return 0===Object.keys(this.data.taglist).length&&this.data.tags.length>0&&(this.data.taglist.EN=this.data.tags),this.data.taglist[kd[this.language]]||[]}set tags(e){this.data.taglist[kd[this.language]]=e,this.update()}get language(){return this._language}set language(e){this._language=e}init(){return{id:Cd.generateId(),title:"New Article",titles:{},lead:"",leads:{},tags:[],taglist:{},uri:"",uris:{},mimeType:"",thumbnailUri:""}}deflate(e,t){t.id=e.id,Object.keys(this.data.uris).length>0?(t.uris={},Object.keys(this.data.uris).forEach((n=>{t.uris[n]=e.uris[n]}))):e.uri&&(t.uri=e.uri),Object.keys(this.data.titles).length>0?(t.titles={},Object.keys(this.data.titles).forEach((n=>{t.titles[n]=e.titles[n]}))):e.title&&(t.title=e.title),Object.keys(this.data.leads).length>0?(t.leads={},Object.keys(this.data.leads).forEach((n=>{t.leads[n]=e.leads[n]}))):e.lead&&(t.lead=e.lead),Object.keys(this.data.taglist).length>0?(t.taglist={},Object.keys(this.data.taglist).forEach((n=>{t.taglist[n]=e.taglist[n].slice()}))):e.tags.length>0&&(t.tags=e.tags.slice()),e.mimeType&&(t.mimeType=e.mimeType),e.thumbnailUri&&(t.thumbnailUri=e.thumbnailUri)}inflate(e,t){t.id=e.id,t.uri=e.uri||"",t.uris=e.uris||{},t.title=e.title||"",t.titles=e.titles||{},t.lead=e.lead||"",t.leads=e.leads||{},t.tags=e.tags||[],t.taglist=e.taglist||{},t.mimeType=e.mimeType||"",t.thumbnailUri=e.thumbnailUri||""}}class Dd extends W{constructor(){super(...arguments),this._activeLanguages=[],this._translations={},this.ins=this.addInputs(Dd.ins),this.outs=this.addOutputs(Dd.outs),this.updateLanguage=e=>{const{ins:t,outs:n}=this;n.language.setValue(e),this.emit({type:"tag-update"})}}get assetReader(){return this.getMainComponent(Nc)}get activeLanguages(){return this._activeLanguages}toString(){return Ld[kd[this.ins.language.value]]}create(){super.create()}update(){const{ins:e,outs:t}=this;if(0==this.activeLanguages.length&&this.addLanguage(t.language.value),e.language.changed&&e.language.value!=t.language.value){const t=e.language.value;this.assetReader.getSystemJSON("language/string.resources."+kd[this.ins.language.value].toLowerCase()+".json").then((e=>{this._translations=e,this.updateLanguage(t)}))}return!0}fromData(e){const{ins:t,outs:n}=this,r=kd[(e=e||{}).language||"EN"];r!=n.language.value&&t.language.value===n.language.value&&(t.language.setValue(isFinite(r)?r:kd.EN),this.updateLanguage(r))}toData(){const e=this.ins;return{language:kd[e.language.getValidatedValue()]}}addLanguage(e){this._activeLanguages.find((t=>t.id===e))||this._activeLanguages.push({id:e,name:Ld[kd[e]]})}getLocalizedString(e){const t=this._translations;return void 0===t?e:t[e]||e}}Dd.typeName="CVLanguageManager",Dd.text="Language",Dd.icon="",Dd.isSystemSingleton=!0,Dd.ins={enabled:O("Language.Enabled",!1),language:N("Interface.Language",kd,kd.EN)},Dd.outs={language:N("Interface.Language",kd,kd.EN)};class Od extends W{constructor(){super(...arguments),this.collection=new Td,this.process=new Td,this.images=new Td,this.articles=new Sd,this.leadArticle=null,this.notes=[],this.audio=new Td}get language(){return this.getGraphComponent(Dd,!0)}fromDocument(e,t){if(!isFinite(t.meta))throw new Error("info property missing in node");const n=e.metas[t.meta];if(n.collection&&(this.collection.dictionary=n.collection),n.process&&(this.process.dictionary=n.process),n.images){const e={};n.images.forEach((t=>e[t.quality]=t)),this.images.dictionary=e}if(n.articles&&(this.articles.items=n.articles.map((e=>Ad.fromJSON(e))),void 0!==n.leadArticle&&(this.leadArticle=this.articles.getAt(n.leadArticle)),this.articles.items.forEach((e=>{Object.keys(e.data.titles).forEach((e=>{this.language.addLanguage(kd[e])}))}))),n.audio){const e={};n.audio.forEach((t=>e[t.id]=t)),this.audio.dictionary=e}return this.emit("load"),t.meta}toDocument(e,t){let n=null;if(this.collection.length>0&&(n={collection:this.collection.dictionary}),this.process.length>0&&(n=n||{},n.process=this.process.dictionary),this.images.length>0&&(n=n||{},n.images=this.images.items),this.articles.length>0){n=n||{};const e=this.articles.items;n.articles=e.map((e=>e.toJSON())),this.leadArticle&&(n.leadArticle=e.indexOf(this.leadArticle))}if(this.audio.length>0&&(n=n||{},n.audio=this.audio.items),n){e.metas=e.metas||[];const t=e.metas.length;return e.metas.push(n),t}}}Od.typeName="CVMeta",Od.text="Meta",Od.icon="document";class Rd extends Bn{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Ln;r.setIndex(new gn(n,1)),r.setAttribute("position",new _n([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new hn({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}var Pd,Nd,Id,zd,Bd;!function(e){e[e.Image2D=0]="Image2D",e[e.Web3D=1]="Web3D",e[e.App3D=2]="App3D",e[e.iOSApp3D=3]="iOSApp3D",e[e.Print3D=4]="Print3D",e[e.Editorial3D=5]="Editorial3D"}(Pd||(Pd={})),function(e){e[e.Thumb=0]="Thumb",e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.High=3]="High",e[e.Highest=4]="Highest",e[e.AR=5]="AR"}(Nd||(Nd={})),function(e){e[e.Model=0]="Model",e[e.Geometry=1]="Geometry",e[e.Image=2]="Image",e[e.Texture=3]="Texture",e[e.Points=4]="Points",e[e.Volume=5]="Volume"}(Id||(Id={})),function(e){e[e.Color=0]="Color",e[e.Emissive=1]="Emissive",e[e.Occlusion=2]="Occlusion",e[e.Normal=3]="Normal",e[e.MetallicRoughness=4]="MetallicRoughness",e[e.Zone=5]="Zone"}(zd||(zd={})),function(e){e[e.Front=0]="Front",e[e.Back=1]="Back",e[e.Double=2]="Double"}(Bd||(Bd={}));const Fd={mm:{mm:1,cm:.1,m:.001,km:1,in:.0393701,ft:.00328084,yd:.00109361,mi:1},cm:{mm:10,cm:1,m:.01,km:1,in:.393701,ft:.0328084,yd:.0109361,mi:1},m:{mm:1e3,cm:100,m:1,km:1,in:39.3701,ft:3.28084,yd:1.09361,mi:1},km:{mm:1e6,cm:1e5,m:1e3,km:1,in:39370.1,ft:3280.84,yd:1093.61,mi:1},in:{mm:25.4,cm:2.54,m:.0254,km:1,in:1,ft:.0833333,yd:.0277778,mi:1},ft:{mm:304.8,cm:30.48,m:.3048,km:1,in:12,ft:1,yd:.333334,mi:1},yd:{mm:914.4,cm:91.44,m:.9144,km:1,in:36,ft:3,yd:1,mi:1},mi:{mm:1609e3,cm:160900,m:1609,km:1,in:63346456.693,ft:5278871.391,yd:1759623.797,mi:1}};function Hd(e,t){const n=Ed[e],r=Ed[t];return Fd[n][r]||1}class jd extends Cd{setModel(e){this.data.uri=e,this.data.type=Id.Model,this.data.mimeType=this.guessAssetMimeType()}setGeometry(e){this.data.uri=e,this.data.type=Id.Geometry,this.data.mimeType=this.guessAssetMimeType()}setTexture(e,t){this.data.uri=e,this.data.type=Id.Image,this.data.mimeType=this.guessAssetMimeType(),this.data.mapType=t}isValid(){return!!this.data.uri&&void 0!==this.data.type}toString(){const e=this.data;return`Asset - type: '${Id[e.type]}', uri: '${e.uri}', mime type: '${e.mimeType||"(not set)"}'`}init(){return{uri:"",mimeType:"",type:void 0,mapType:void 0,byteSize:0,numFaces:0,numVertices:0,imageSize:0}}deflate(e,t){t.uri=e.uri,t.type=Id[e.type],e.mimeType&&(t.mimeType=e.mimeType),void 0!==e.mapType&&(t.mapType=zd[e.mapType]),e.byteSize>0&&(t.byteSize=e.byteSize),e.type!==Id.Model&&e.type!==Id.Geometry||e.numFaces>0&&(t.numFaces=e.numFaces),e.type!==Id.Model&&e.type!==Id.Image&&e.type!==Id.Texture||e.imageSize>0&&(t.imageSize=e.imageSize)}inflate(e,t){t.uri=e.uri,t.mimeType=e.mimeType||"",t.type=Id[e.type],t.mapType=zd[e.mapType],t.byteSize=e.byteSize||0,t.numFaces=e.numFaces||0,t.imageSize=e.imageSize||0,void 0===t.type&&(t.type=this.guessAssetType(),void 0===t.type&&console.warn(`failed to determine asset type from asset: ${t.uri}`))}guessAssetType(){const e=this.data;if(void 0!==e.type&&Id[e.type])return e.type;if(e.mimeType){if(e.mimeType===jd.mimeType.gltfJson||e.mimeType===jd.mimeType.gltfBinary)return Id.Model;if(e.mimeType===jd.mimeType.imageJpeg||e.mimeType===jd.mimeType.imagePng)return Id.Image}const t=e.uri.split(".").pop().toLowerCase();return"gltf"===t||"glb"===t?Id.Model:"obj"===t||"ply"===t?Id.Geometry:"jpg"===t||"png"===t?Id.Image:void 0}guessAssetMimeType(){const e=this.data;if(e.mimeType)return e.mimeType;const t=e.uri.split(".").pop().toLowerCase();return"gltf"===t?jd.mimeType.gltfJson:"glb"===t?jd.mimeType.gltfBinary:"jpg"===t?jd.mimeType.imageJpeg:"png"===t?jd.mimeType.imagePng:""}}jd.mimeType={gltfJson:"model/gltf+json",gltfBinary:"model/gltf-binary",imageJpeg:"image/jpeg",imagePng:"image/png"};class Ud extends Cd{constructor(){super(...arguments),this.model=null}static fromJSON(e){return new Ud(e)}dispose(){this.unload(),super.dispose()}load(e){if(this.data.usage!==Pd.Web3D)throw new Error("can't load, not a Web3D derivative");const t=this.findAsset(Id.Model);if(t)return e.getModel(t.data.uri).then((e=>(this.model&&Vn(this.model),this.model=e,e)));const n=this.findAsset(Id.Geometry),r=this.findAssets(Id.Image);return n?e.getGeometry(n.data.uri).then((t=>(this.model=new Qo(t,new mc),Promise.all(r.map((t=>e.getTexture(t.data.uri)))).catch((e=>(console.warn("failed to load texture files"),[])))))).then((e=>{const t=this.model.material;return this.assignTextures(r,e,t),t.map||(t.color.setScalar(.5),t.roughness=.8,t.metalness=0),this.model})):void 0}unload(){this.model&&(Vn(this.model),this.model=null)}createAsset(e,t){const n=new jd;return n.data.type=e,n.data.uri=t,this.addAsset(n),n}addAsset(e){if(!e.data.uri)throw new Error("uri must be specified");this.data.assets.push(e),this.update()}removeAsset(e){const t=this.data.assets.indexOf(e);t>=0&&this.data.assets.splice(t,1)}findAsset(e){return this.data.assets.find((t=>t.data.type===e))}findAssets(e){return this.data.assets.filter((t=>t.data.type===e))}toString(e=!1){const t=this.data;return e?`Derivative - usage: '${Pd[t.usage]}', quality: '${Nd[t.quality]}'\n   `+t.assets.map((e=>e.toString())).join("\n   "):`Derivative - usage: '${Pd[t.usage]}', quality: '${Nd[t.quality]}', #assets: ${t.assets.length})`}init(){return{usage:Pd.Web3D,quality:Nd.Medium,assets:[]}}deflate(e,t){t.usage=Pd[e.usage],t.quality=Nd[e.quality],t.assets=e.assets.map((e=>e.toJSON()))}inflate(e,t){if(t.usage=Pd[e.usage],void 0===t.usage)throw new Error(`unknown derivative usage: ${e.usage}`);if(t.quality=Nd[e.quality],void 0===t.quality)throw new Error(`unknown derivative quality: ${e.quality}`);t.assets=e.assets.map((e=>new jd(e)))}assignTextures(e,t,n){for(let r=0;r<e.length;++r){const s=e[r],i=t[r];switch(s.data.mapType){case zd.Color:n.map=i;break;case zd.Occlusion:n.aoMap=i;break;case zd.Emissive:n.emissiveMap=i;break;case zd.MetallicRoughness:n.metalnessMap=i,n.roughnessMap=i;break;case zd.Normal:n.normalMap=i}}}}const Yd=[],Vd=[Nd.Thumb,Nd.AR,Nd.Low,Nd.Medium,Nd.High,Nd.Highest];class $d{constructor(){this.derivatives={}}select(e,t){const n=Pd[e],r=Nd[t],s=Vd.indexOf(t);if(s<0)return console.warn(`derivative quality not supported: '${r}'`),null;const i=this.get(e,t);if(i)return i;for(let t=s+1;t<Vd.length;++t){const n=this.get(e,Vd[t]);if(n)return console.warn(`derivative quality '${r}' not available, using higher quality`),n}for(let t=s-1;t>=0;--t){const n=this.get(e,Vd[t]);if(n)return console.warn(`derivative quality '${r}' not available, using lower quality`),n}return console.warn(`no suitable derivative found for quality '${r}' and usage '${n}'`),null}getByUsage(e){const t=Pd[e];return(this.derivatives[t]||Yd).sort(((e,t)=>e.data.quality<t.data.quality?-1:e.data.quality>t.data.quality?1:0))}getByQuality(e){return this.getArray().filter((t=>t.data.quality===e))}getArray(){return Object.keys(this.derivatives).reduce(((e,t)=>e.concat(this.derivatives[t])),[])}get(e,t){const n=Pd[e],r=this.derivatives[n];if(r)for(let e=0,n=r.length;e<n;++e)if(r[e].data.quality===t)return r[e];return null}getOrCreate(e,t){const n=this.getOrCreateBin(e);for(let e=0,r=n.length;e<r;++e)if(n[e].data.quality===t)return n[e];const r=new Ud;return r.set("usage",e),r.set("quality",t),n.push(r),r}remove(e,t){const n=this.get(e,t);if(n){const t=this.getOrCreateBin(e),r=t.indexOf(n);r>-1&&t.splice(r,1)}}createModelAsset(e,t){t="string"==typeof t?Nd[t]:t,t=isFinite(t)?t:Nd.Medium;const n=this.getOrCreate(Pd.Web3D,t),r=new jd;return r.setModel(e),n.addAsset(r),n}createMeshAsset(e,t,n,r,s){s="string"==typeof s?Nd[s]:s,s=isFinite(s)?s:Nd.Medium;const i=this.getOrCreate(Pd.Web3D,s),o=new jd;if(o.setGeometry(e),i.addAsset(o),t){const e=new jd;e.setTexture(t,zd.Color),i.addAsset(e)}if(n){const e=new jd;e.setTexture(n,zd.Occlusion),i.addAsset(e)}if(r){const e=new jd;e.setTexture(r,zd.Normal),i.addAsset(e)}return i}clear(){for(let e in this.derivatives)this.derivatives[e].forEach((e=>e.dispose()));this.derivatives={}}toJSON(){const e=[];for(let t in this.derivatives)this.derivatives[t].forEach((t=>e.push(t.toJSON())));return e}fromJSON(e){this.clear(),e.forEach((e=>{this.getOrCreateBin(Pd[e.usage]).push(new Ud(e))}))}toString(e=!1){const t=this.derivatives,n=Object.keys(t);return e?`Derivatives (${n.length}) \n `+n.map((e=>t[e].map((e=>e.toString(!0))).join("\n "))).join("\n "):`Derivatives (${n.length}) `+n.map((e=>`${e} (${t[e].length})`)).join(", ")}getOrCreateBin(e){const t=Pd[e];return this.derivatives[t]||(this.derivatives[t]=[])}}var Wd=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const Gd=new he,qd=new he,Xd=new he,Kd=new he,Jd=new mn,Zd=new mn;var Qd;!function(e){e[e.TopRight=0]="TopRight",e[e.TopLeft=1]="TopLeft",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight"}(Qd||(Qd={}));class eu extends ft{constructor(){super(),this.isHTMLSprite=!0,this.viewAngle=0,this.orientationAngle=0,this.orientationQuadrant=Qd.TopLeft,this._elements=new Map,this._visible=!0,this.frustumCulled=!1}getVisible(){return this._visible}setVisible(e){e!==this._visible&&this._elements&&(this._visible=e,this._elements.forEach((t=>{t&&t.setVisible(e)})))}dispose(){this._elements.forEach(((e,t)=>{e&&t.removeChild(e)})),this._elements.clear()}disposeHTMLElement(e){const t=this._elements.get(e);t&&(this._elements.delete(e),e.removeChild(t))}update(){this._elements.forEach((e=>{e&&this.updateHTMLElement(e)}))}renderHTMLElement(e,t,n,r,s){r=r||this,Gd.set(0,0,0),Gd.applyMatrix4(r.modelViewMatrix),s?qd.copy(s):qd.set(0,1,0),qd.applyMatrix4(r.modelViewMatrix),Xd.copy(qd).sub(Gd).normalize(),Kd.set(0,0,1),this.viewAngle=Xd.angleTo(Kd),Gd.applyMatrix4(n.projectionMatrix),qd.applyMatrix4(n.projectionMatrix),Zd.set(qd.x,qd.y),Jd.set(Gd.x,Gd.y),Zd.sub(Jd);const i=.5*(qd.x+1)*t.clientWidth,o=.5*(1-qd.y)*t.clientHeight;e.setPosition(i,o);const a=this.orientationAngle=Zd.angle();this.orientationQuadrant=Math.floor(2*a/Math.PI)}getHTMLElement(e){let t=this._elements.get(e);return t||(t=this.createHTMLElement(),t&&(t.setVisible(this._visible),e.appendChild(t),this._elements.set(e,t))),t}createHTMLElement(){return null}updateHTMLElement(e){e.requestUpdate()}}let tu=class extends Ti{setVisible(e){this.style.display=e?"block":"none"}setOpacity(e){this.style.opacity=e.toString(),this.style.visibility=e>0?"visible":"hidden"}setPosition(e,t){this.style.left=e.toString()+"px",this.style.top=t.toString()+"px"}};tu=Wd([Ci("ff-sprite-element")],tu);class nu extends ft{constructor(){super(...arguments),this.isHTMLSpriteGroup=!0,this._visible=!0}getVisible(){return this._visible}setVisible(e){if(e!==this._visible){this._visible=e;const t=this.children;for(let n=0,r=t.length;n<r;++n)t[n].setVisible(e)}}dispose(){const e=this.children;for(let t=0,n=e.length;t<n;++t)e[t].dispose()}disposeHTMLElements(e){const t=this.children;for(let n=0,r=t.length;n<r;++n)t[n].disposeHTMLElement(e)}render(e,t){if(!this.visible)return;const n=this.children;for(let r=0,s=n.length;r<s;++r){const s=n[r],i=s.getHTMLElement(e);i&&s.renderHTMLElement(i,e,t)}}update(){const e=this.children;for(let t=0,n=e.length;t<n;++t)e[t].update()}}class ru extends W{constructor(){super(...arguments),this.ins=this.addInputs(ru.ins),this.outs=this.addOutputs(ru.outs)}get settingProperties(){return[this.ins.enabled,this.ins.position]}get snapshotProperties(){return[this.ins.enabled,this.ins.articleId]}get articles(){return Object.keys(this._articles).map((e=>this._articles[e]))}get activeArticle(){return this.outs.article.value}get assetManager(){return this.getMainComponent(Zi)}get assetReader(){return this.getMainComponent(Nc)}get analytics(){return this.getMainComponent(Xi)}get language(){return this.getGraphComponent(Dd)}create(){super.create(),this.getGraphComponents(Od).forEach((e=>e.on("update",this.updateArticles,this))),this.graph.components.on(Od,this.onMetaComponent,this),this.graph.components.on(Dd,this.onLanguageComponent,this),this.updateArticles()}dispose(){this.graph.components.off(Dd,this.onLanguageComponent,this),this.graph.components.off(Od,this.onMetaComponent,this),this.getGraphComponents(Od).forEach((e=>e.off("update",this.updateArticles,this))),super.dispose()}update(e){const t=this.ins,n=this.outs;if(t.enabled.changed,t.articleId.changed){const e=this._articles[t.articleId.value]||null,r=e&&e.article;n.article.setValue(r),n.content.setValue(""),r&&(this.readArticle(r),this.analytics.sendProperty("Reader.ArticleId",r.defaultTitle))}return!0}readArticle(e){const t=this.outs,n=e.uri;if(n)return this.assetReader.getText(n).then((e=>this.parseArticle(e,n))).then((e=>t.content.setValue(e))).catch((e=>t.content.setValue(`<h2>Article not found at ${n}</h2>`)));t.content.setValue("<h2>Can't display article: no URI.</h2>")}parseArticle(e,t){e=e.replace(/[\n\r]/g,"");const n=this.assetManager.getAssetBasePath(t);return e=e.replace(/(src=\")(.*?)(\")/g,((e,t,r,s)=>(r.startsWith("/")||r.startsWith("http")||(r=this.assetManager.getAssetUrl(n+r)),t+r+s))),Promise.resolve(e)}onMetaComponent(e){e.add&&e.object.articles.on("update",this.updateArticles,this),e.remove&&e.object.articles.off("update",this.updateArticles,this),this.updateArticles()}onLanguageComponent(e){e.add&&e.object.outs.language.on("value",this.updateLanguage,this),e.remove&&e.object.outs.language.off("value",this.updateLanguage,this)}updateArticles(){const e=this.getGraphComponents(Od),t=this._articles={};e.forEach((e=>{const n=e.articles,r=e.node;n.items.forEach((e=>{t[e.id]={article:e,node:r}}))}))}updateLanguage(){const e=this.ins;this.articles.forEach((e=>{e.article.language=this.language.outs.language.value})),e.articleId.set()}fromData(e){e=e||{},this.ins.setValues({enabled:!!e.enabled,position:cc[e.position]||cc.Overlay})}toData(){const e=this.ins;return{enabled:e.enabled.value,position:cc[e.position.value]||"Overlay"}}}ru.typeName="CVReader",ru.text="Reader",ru.icon="",ru.ins={enabled:O("Reader.Enabled"),visible:O("Reader.Visible",!0),closed:B("Reader.Closed"),position:N("Reader.Position",cc),articleId:R("Article.ID"),focus:O("Reader.Focus")},ru.outs={article:z("Article.Active",Ad),content:R("Article.Content"),count:T("Article.Count")};class su{static registerType(e){if(this.types[e.typeName])throw new Error(`Annotation type '${e.typeName}' already registered.`);this.types[e.typeName]=e}static registerDefaultType(e){this.defaultType=e}static get typeNames(){return[this.defaultTypeName,...Object.keys(this.types).sort()]}static get defaultTypeName(){return this.defaultType.typeName}static getType(e){const t=this.types[e]||this.defaultType;if(!t)throw new Error(`type '${e}' not registered and no default type set.`);return t}static createInstance(e,t,n){return"Circle"===(t=t||e.data.style)?new(this.getType(t))(e,n):new(this.getType(t))(e)}}su.types={},su.defaultType=null;class iu extends Cd{constructor(){super(...arguments),this._language=kd.EN}get title(){return 0===Object.keys(this.data.titles).length&&(this.data.titles.EN=this.data.title),this.data.titles[kd[this.language]]||"undefined"}set title(e){this.data.titles[kd[this.language]]=e,this.update()}get lead(){return 0===Object.keys(this.data.leads).length&&(this.data.leads.EN=this.data.lead),this.data.leads[kd[this.language]]||""}set lead(e){this.data.leads[kd[this.language]]=e,this.update()}get tags(){return 0===Object.keys(this.data.taglist).length&&this.data.tags.length>0&&(this.data.taglist.EN=this.data.tags),this.data.taglist[kd[this.language]]||[]}set tags(e){this.data.taglist[kd[this.language]]=e,this.update()}get language(){return this._language}set language(e){this._language=e}static fromJSON(e){return new iu(e)}init(){return{id:Cd.generateId(),title:"New Annotation",titles:{},lead:"",leads:{},marker:"",tags:[],taglist:{},articleId:"",imageUri:"",style:su.defaultTypeName,visible:!0,expanded:!1,position:null,direction:null,scale:1,offset:0,tilt:0,azimuth:0,color:[0,.61,.87],zoneIndex:-1}}deflate(e,t){t.id=e.id,Object.keys(this.data.titles).length>0?(t.titles={},Object.keys(this.data.titles).forEach((n=>{t.titles[n]=e.titles[n]}))):e.title&&(t.title=e.title),Object.keys(this.data.leads).length>0?(t.leads={},Object.keys(this.data.leads).forEach((n=>{t.leads[n]=e.leads[n]}))):e.lead&&(t.lead=e.lead),e.marker&&(t.marker=e.marker),Object.keys(this.data.taglist).length>0?(t.taglist={},Object.keys(this.data.taglist).forEach((n=>{t.taglist[n]=e.taglist[n].slice()}))):e.tags.length>0&&(t.tags=e.tags),e.articleId&&(t.articleId=e.articleId),e.imageUri&&(t.imageUri=e.imageUri),e.style!==su.defaultTypeName&&(t.style=e.style),!1===e.visible&&(t.visible=e.visible),e.position&&(t.position=e.position.slice()),e.direction&&(t.direction=e.direction.slice()),1!==e.scale&&(t.scale=e.scale),0!==e.offset&&(t.offset=e.offset),0!==e.tilt&&(t.tilt=e.tilt),0!==e.azimuth&&(t.azimuth=e.azimuth);const n=e.color;return!n||1===n[0]&&1===n[1]&&1===n[2]||(t.color=n.slice()),e.zoneIndex>-1&&(t.zoneIndex=e.zoneIndex),e}inflate(e,t){t.id=e.id,t.title=e.title||"",t.titles=e.titles||{},t.lead=e.lead||"",t.leads=e.leads||{},t.marker=e.marker||"",t.tags=e.tags||[],t.taglist=e.taglist||{},t.articleId=e.articleId||"",t.imageUri=e.imageUri||"",t.style=e.style||su.defaultTypeName,t.visible=void 0===e.visible||e.visible,t.expanded=!1,t.position=e.position.slice(),t.direction=e.direction.slice(),t.scale=void 0!==e.scale?e.scale:1,t.offset=e.offset||0,t.tilt=e.tilt||0,t.azimuth=e.azimuth||0,t.color=e.color||iu.defaultColor.slice(),t.zoneIndex=void 0!==e.zoneIndex?e.zoneIndex:-1}}iu.defaultColor=[0,.61,.87];class ou{constructor(e,t){this.x=e||0,this.y=t||0}static makeZeros(){return new ou(0,0)}static makeOnes(){return new ou(1,1)}static makeUnitX(){return new ou(1,0)}static makeUnitY(){return new ou(0,1)}static makeCopy(e){return new ou(e.x,e.y)}static makeFromScalar(e){return new ou(e,e)}static makeFromArray(e){return new ou(e[0],e[1])}static toString(e){return`[${e.x}, ${e.y}]`}copy(e){return this.x=e.x,this.y=e.y,this}set(e,t){return this.x=e,this.y=t,this}setFromScalar(e){return this.x=e,this.y=e,this}setFromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}setZeros(){return this.x=0,this.y=0,this}setOnes(){return this.x=1,this.y=1,this}setUnitX(){return this.x=1,this.y=0,this}setUnitY(){return this.x=0,this.y=1,this}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}mul(e){return this.x*=e.x,this.y*=e.y,this}div(e){return this.x/=e.x,this.y/=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}subScalar(e){return this.x-=e,this.y-=e,this}mulScalar(e){return this.x*=e,this.y*=e,this}divScalar(e){return this.x/=e,this.y/=e,this}translate(e,t){return this.x+=e,this.y+=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.x,s=this.y;return this.x=t*r-n*s,this.y=n*r+t*s,this}scale(e,t){return this.x*=e,this.y*=t,this}invert(){return this.x=1/this.x,this.y=1/this.y,this}negate(){return this.x=-this.x,this.y=-this.y,this}normalize(){const e=1/Math.sqrt(this.x*this.x+this.y*this.y);return this.x*=e,this.y*=e,this}dot(e){return this.x*e.x+this.y*e.y}length(){const e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}lengthSquared(){const e=this.x,t=this.y;return e*e+t*t}distanceTo(e){const t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)}angle(){return Math.atan2(this.y,this.x)}angleTo(e){const t=this.x,n=this.y,r=e.x,s=e.y;return Math.acos((t*r+n*s)/(Math.sqrt(t*t+n*n)+Math.sqrt(r*r+s*s)))}min(){return this.x<this.y?this.x:this.y}max(){return this.x>this.y?this.x:this.y}isZero(){return 0===this.x&&0===this.y}clone(){return new ou(this.x,this.y)}toArray(e,t){return e?(void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e):[this.x,this.y]}toString(){return ou.toString(this)}}ou.zeros=new ou(0,0),ou.ones=new ou(1,1),ou.unitX=new ou(1,0),ou.unitY=new ou(0,1);class au{constructor(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}static makeZeros(){return new au(0,0,0)}static makeOnes(){return new au(1,1,1)}static makeUnitX(){return new au(1,0,0)}static makeUnitY(){return new au(0,1,0)}static makeUnitZ(){return new au(0,0,1)}static makeCopy(e){return new au(e.x,e.y,e.z)}static makeFromScalar(e){return new au(e,e,e)}static makeFromArray(e){return new au(e[0],e[1],e[2])}static toString(e){return`[${e.x}, ${e.y}, ${e.z}]`}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}set(e,t,n){return this.x=e,this.y=t,this.z=n,this}setFromScalar(e){return this.x=e,this.y=e,this.z=e,this}setFromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}setZeros(){return this.x=0,this.y=0,this.z=0,this}setOnes(){return this.x=1,this.y=1,this.z=1,this}setUnitX(){return this.x=1,this.y=0,this.z=0,this}setUnitY(){return this.x=0,this.y=1,this.z=0,this}setUnitZ(){return this.x=0,this.y=0,this.z=1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}mul(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}div(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}mulScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}divScalar(e){return this.x/=e,this.y/=e,this.z/=e,this}translate(e,t,n){return this.x+=e,this.y+=t,this.z+=n,this}rotateX(e){const t=Math.cos(e),n=Math.sin(e),r=this.y,s=this.z;return this.y=t*r-n*s,this.z=n*r+t*s,this}rotateY(e){const t=Math.cos(e),n=Math.sin(e),r=this.x,s=this.z;return this.x=t*r+n*s,this.z=-n*r+t*s,this}rotateZ(e){const t=Math.cos(e),n=Math.sin(e),r=this.x,s=this.y;return this.x=t*r-n*s,this.y=n*r+t*s,this}scale(e,t,n){return this.x*=e,this.y*=t,this.z*=n,this}invert(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}normalize(){const e=1/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this.x*=e,this.y*=e,this.z*=e,this}homogenize(){return this.x/=this.z,this.y/=this.z,this.z=1,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}cross(e){const t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,r=this.x*e.y-this.y*e.x;return this.x=t,this.y=n,this.z=r,this}length(){const e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}lengthSquared(){const e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n}distanceTo(e){const t=e.x-this.x,n=e.y-this.y,r=e.z-this.z;return Math.sqrt(t*t+n*n+r*r)}min(){return this.x<this.y?this.x<this.z?this.x:this.z:this.y<this.z?this.y:this.z}max(){return this.x>this.y?this.x>this.z?this.x:this.z:this.y>this.z?this.y:this.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}clone(){return new au(this.x,this.y,this.z)}toArray(e,t){return e?(void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e):[this.x,this.y,this.z]}toVector2(e){return e?(e.x=this.x,e.y=this.y,e):new ou(this.x,this.y)}toString(){return au.toString(this)}}au.zeros=new au(0,0,0),au.ones=new au(1,1,1),au.unitX=new au(1,0,0),au.unitY=new au(0,1,0),au.unitZ=new au(0,0,1);class lu{constructor(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r||0}static makeZeros(){return new lu(0,0,0,0)}static makeOnes(){return new lu(1,1,1,1)}static makeUnitX(){return new lu(1,0,0,0)}static makeUnitY(){return new lu(0,1,0,0)}static makeUnitZ(){return new lu(0,0,1,0)}static makeUnitW(){return new lu(0,0,0,1)}static makeCopy(e){return new lu(e.x,e.y,e.z,e.w)}static makeFromScalar(e){return new lu(e,e,e,e)}static makeFromArray(e){return new lu(e[0],e[1],e[2],e[3])}static makeFromPosition(e){return new lu(e.x,e.y,e.z,1)}static makeFromDirection(e){return new lu(e.x,e.y,e.z,0)}static toString(e){return`[${e.x}, ${e.y}, ${e.z}, ${e.w}]`}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=void 0===r?1:r,this}setFromScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setFromArray(e,t=1){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}setPosition(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=1,this}setDirection(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=0,this}setZeros(){return this.x=0,this.y=0,this.z=0,this.w=0,this}setOnes(){return this.x=1,this.y=1,this.z=1,this.w=1,this}setUnitX(){return this.x=1,this.y=0,this.z=0,this.w=0,this}setUnitY(){return this.x=0,this.y=1,this.z=0,this.w=0,this}setUnitZ(){return this.x=0,this.y=0,this.z=1,this.w=0,this}setUnitW(){return this.x=0,this.y=0,this.z=0,this.w=1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}mul(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}div(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}normalize(){const e=1/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}homogenize(){return this.x/=this.w,this.y/=this.w,this.z/=this.w,this.w=1,this}project(e){const t=this.dot(e)/this.lengthSquared();return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}length(){const e=this.x,t=this.y,n=this.z,r=this.w;return Math.sqrt(e*e+t*t+n*n+r*r)}lengthSquared(){const e=this.x,t=this.y,n=this.z,r=this.w;return e*e+t*t+n*n+r*r}isZero(){return 0===this.x&&0===this.y&&0===this.z&&0===this.w}clone(){return new lu(this.x,this.y,this.z,this.w)}toArray(e,t){return e?(void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e):[this.x,this.y,this.z,this.w]}toVector3(e){return e?(e.x=this.x,e.y=this.y,e.z=this.z,e):new au(this.x,this.y,this.z)}toString(){return lu.toString(this)}}lu.zeros=new lu(0,0,0,0),lu.ones=new lu(1,1,1,1),lu.unitX=new lu(1,0,0,0),lu.unitY=new lu(0,1,0,0),lu.unitZ=new lu(0,0,1,0),lu.unitW=new lu(0,0,0,1);class cu{constructor(e=0,t=0,n=0,r=1){e instanceof cu?(this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w):Array.isArray(e)?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0,this.w=void 0!==e[3]?e[3]:1):"string"==typeof e?this.setString(e):(this.x=e,this.y=t,this.z=n,this.w=r)}static fromString(e){return(new cu).setString(e)}static fromArray(e){return new cu(e)}get r(){return this.x}get g(){return this.y}get b(){return this.z}get a(){return this.w}set r(e){this.x=e}set g(e){this.y=e}set b(e){this.z=e}set a(e){this.w=e}get red(){return this.x}get green(){return this.y}get blue(){return this.z}get alpha(){return this.w}set red(e){this.x=e}set green(e){this.y=e}set blue(e){this.z=e}set alpha(e){this.w=e}get redByte(){return Math.floor(255*this.x)}get greenByte(){return Math.floor(255*this.y)}get blueByte(){return Math.floor(255*this.z)}get alphaByte(){return Math.floor(255*this.w)}set redByte(e){this.x=e/255}set greenByte(e){this.y=e/255}set blueByte(e){this.z=e/255}set alphaByte(e){this.w=e/255}inverseMultiply(e){return this.x=this.x*(1-e)+e,this.y=this.y*(1-e)+e,this.z=this.z*(1-e)+e,this}multiply(e){return this.x*=e,this.y*=e,this.z*=e,this}copy(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w}clone(){return new cu(this.x,this.y,this.z,this.w)}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=void 0===r?1:r,this}setBytes(e,t,n,r){return this.x=e/255,this.y=t/255,this.z=n/255,this.w=void 0===r?1:r/255,this}setUInt24RGB(e){return this.x=e>>16&255,this.y=e>>8&255,this.z=255&e,this.w=1,this}setUInt32RGBA(e){return this.x=e>>24&255,this.y=e>>16&255,this.z=e>>8&255,this.w=255&e,this.w=1,this}setRed(e){return this.x=e,this}setGreen(e){return this.y=e,this}setBlue(e){return this.z=e,this}setAlpha(e){return this.w=e,this}setRedByte(e){return this.x=e/255,this}setGreenByte(e){return this.y=e/255,this}setBlueByte(e){return this.z=e/255,this}setAlphaByte(e){return this.w=e/255,this}setHSV(e,t=1,n=1,r){"object"==typeof e&&(t=e.y,n=e.z,r=void 0!==e.w?e.w:r,e=e.x);const s=Math.floor(e/60),i=e/60-s,o=n*(1-t),a=n*(1-i*t),l=n*(1-(1-i)*t);let c,d,u;switch(s%6){case 0:c=n,d=l,u=o;break;case 1:c=a,d=n,u=o;break;case 2:c=o,d=n,u=l;break;case 3:c=o,d=a,u=n;break;case 4:c=l,d=o,u=n;break;case 5:c=n,d=o,u=a}return this.x=c,this.y=d,this.z=u,void 0!==r&&(this.w=r),this}setHSL(e,t=1,n=1,r){if("object"==typeof e&&(t=e.y,n=e.z,r=void 0!==e.w?e.w:r,e=e.x),0===t)this.x=this.y=this.z=n;else{function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e/=360;var s=n<.5?n*(1+t):n+t-n*t,i=2*n-s;this.x=o(i,s,e+1/3),this.y=o(i,s,e),this.z=o(i,s,e-1/3)}return void 0!==r&&(this.w=r),this}fromArray(e){this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0,this.w=void 0!==e[3]?e[3]:1}setString(e,t=1,n=!0){e=e.trim().toLowerCase();let r=(e=cu.presets[e]||e).match(/^#?([0-9a-f]{3})$/i);if(r){const e=r[1],n=1/15;return this.x=Number.parseInt(e.charAt(0),16)*n,this.y=Number.parseInt(e.charAt(1),16)*n,this.z=Number.parseInt(e.charAt(2),16)*n,this.w=t,this}if(r=e.match(/^#?([0-9a-f]{6})$/i),r){const e=r[1],n=1/255;return this.x=Number.parseInt(e.substr(0,2),16)*n,this.y=Number.parseInt(e.substr(2,2),16)*n,this.z=Number.parseInt(e.substr(4,2),16)*n,this.w=t,this}if(0===e.indexOf("rgb")){let n=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(n){const e=1/255;return this.x=Number.parseInt(n[1])*e,this.y=Number.parseInt(n[2])*e,this.z=Number.parseInt(n[3])*e,this.w=t,this}if(n=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+.*\d*)\s*\)$/i),n){const e=1/255;return this.x=Number.parseInt(n[1])*e,this.y=Number.parseInt(n[2])*e,this.z=Number.parseInt(n[3])*e,this.w=Number.parseFloat(n[4]),this}}if(0===e.indexOf("hsl")){let n=e.match(/(\d+(\.\d+)?)/g);return n&&this.setHSL(Number.parseFloat(n[0]),.01*Number.parseFloat(n[1]),.01*Number.parseFloat(n[2]),void 0!==n[3]?Number.parseFloat(n[3]):t),this}if(n)throw new RangeError("failed to parse color from string: "+e);return this}toUInt24RGB(){return Math.floor(255*this.x)<<16+Math.floor(255*this.y)<<8+Math.floor(255*this.z)}toUInt32RGBA(){return Math.floor(255*this.x)<<24+Math.floor(255*this.y)<<16+Math.floor(255*this.z)<<8+Math.floor(255*this.w)}toVector3(e){return e?(e.x=this.r,e.y=this.g,e.z=this.b,e):new au(this.r,this.g,this.b)}toVector4(e){return e?(e.x=this.r,e.y=this.g,e.z=this.b,e.w=this.a,e):new lu(this.r,this.g,this.b,this.a)}toHSV(e){let t=this.x,n=this.y,r=this.z,s=Math.min(t,n,r),i=Math.max(t,n,r),o=i-s,a=0,l=0===i?0:o/i,c=i;return 0!==o&&(a=60*(t===i?(n-r)/o+(n<r?6:0):n===i?(r-t)/o+2:(t-n)/o+4)),e?(e.x=a,e.y=l,e.z=c,e):new au(a,l,c)}toHSL(e){let t=this.x,n=this.y,r=this.z,s=Math.min(t,n,r),i=Math.max(t,n,r),o=i-s,a=0,l=0,c=.5*(i+s);return 0!==o&&(l=c>.5?o/(2-i-s):o/(i+s),a=60*(t===i?(n-r)/o+(n<r?6:0):n===i?2+(r-t)/o:4+(t-n)/o)),e?(e.x=a,e.y=l,e.z=c,e):new au(a,l,c)}toRGBArray(e){return e?(e[0]=this.r,e[1]=this.g,e[2]=this.b,e):[this.r,this.g,this.b]}toRGBAArray(e){return e?(e[0]=this.r,e[1]=this.g,e[2]=this.b,e[3]=this.a,e):[this.r,this.g,this.b,this.a]}toString(e=!0){if(e&&this.w<1)return`rgba(${this.redByte}, ${this.greenByte}, ${this.blueByte}, ${this.w})`;return`#${((1<<24)+(this.redByte<<16)+(this.greenByte<<8)+this.blueByte).toString(16).slice(1)}`}}cu.presets={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var du=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let uu=class extends Ti{constructor(){super(),this.name="",this.index=0,this.selectedIndex=-1,this.tabbingIndex=0,this.selected=!1,this.selectable=!1,this.disabled=!1,this.icon="",this.role="button",this.caret=!1,this.inline=!1,this.transparent=!1,this.addEventListener("click",(e=>this.onClick(e))),this.addEventListener("keydown",(e=>this.onKeyDown(e)))}firstConnected(){this.tabIndex=this.tabbingIndex,this.setAttribute("role",this.role),this.classList.add("ff-button")}shouldUpdate(e){return(e.has("selectedIndex")||e.has("index"))&&this.selectedIndex>=0&&(this.selected=this.index===this.selectedIndex),e.has("disabled")&&this.setClass("ff-disabled",this.disabled),!0}update(e){this.classList.remove("ff-inline","ff-transparent","ff-control"),this.inline?this.classList.add("ff-inline"):this.transparent?this.classList.add("ff-transparent"):this.classList.add("ff-control"),super.update(e)}render(){return qs`${this.renderIcon()}${this.renderText()}${this.renderCaret()}`}renderIcon(){return this.icon?qs`<ff-icon class="ff-off" name=${this.icon}></ff-icon>`:null}renderText(){return this.text?qs`<div class="ff-text ff-off">${this.text}</div>`:null}renderCaret(){return this.caret?qs`<div class="ff-caret-down ff-off"></div>`:null}onClick(e){this.selectable&&(this.selected=!this.selected)}onKeyDown(e){(document.activeElement.shadowRoot?document.activeElement.shadowRoot.activeElement:document.activeElement)!==this||"Space"!==e.code&&"Enter"!==e.code||(e.preventDefault(),this.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}};du([ai({type:String})],uu.prototype,"name",void 0),du([ai({type:Number})],uu.prototype,"index",void 0),du([ai({type:Number})],uu.prototype,"selectedIndex",void 0),du([ai({type:Number})],uu.prototype,"tabbingIndex",void 0),du([ai({type:Boolean,reflect:!0})],uu.prototype,"selected",void 0),du([ai({type:Boolean})],uu.prototype,"selectable",void 0),du([ai({type:Boolean})],uu.prototype,"disabled",void 0),du([ai()],uu.prototype,"text",void 0),du([ai()],uu.prototype,"icon",void 0),du([ai()],uu.prototype,"role",void 0),du([ai({type:Boolean})],uu.prototype,"caret",void 0),du([ai({type:Boolean})],uu.prototype,"inline",void 0),du([ai({type:Boolean})],uu.prototype,"transparent",void 0),uu=du([Ci("ff-button")],uu);const hu=uu;class mu extends mo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}const pu=new he(0,1,0),fu=new he,gu=new he,vu=new he;class yu extends eu{constructor(e,t){super(),this.isAdaptive=!0,this.annotation=e,this.matrixAutoUpdate=!1}get typeName(){return this.constructor.typeName}update(){super.update();const e=this.annotation.data;this.position.fromArray(e.position),fu.fromArray(e.direction).normalize(),this.quaternion.setFromUnitVectors(pu,fu),this.updateMatrix()}emitClickEvent(){const e={type:"click",annotation:this.annotation,sprite:this};this.dispatchEvent(e)}emitLinkEvent(e){const t={type:"link",annotation:this.annotation,sprite:this,link:e};this.dispatchEvent(t)}isBehindCamera(e,t){let n=null;n=t instanceof mu&&t.cameras.length>0?t.cameras[0]:t;const r=n.matrixWorld.elements;return e.updateMatrixWorld(),gu.setFromMatrixPosition(e.matrixWorld),vu.setFromMatrixPosition(n.matrixWorld),fu.set(-r[8],-r[9],-r[10]).normalize(),vu.addScaledVector(fu,n.near),vu.sub(gu),vu.angleTo(fu)<=Math.PI/2}}yu.typeName="Annotation";class _u extends tu{constructor(e){super(),this.sprite=e,this.discardEvent=this.discardEvent.bind(this),this.addEventListener("pointerdown",this.discardEvent),this.addEventListener("pointercancel",this.discardEvent),this.addEventListener("click",this.discardEvent)}firstConnected(){super.firstConnected(),this.classList.add("sv-annotation")}discardEvent(e){e.stopPropagation()}}var bu=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const wu=["sv-q0","sv-q1","sv-q2","sv-q3"],xu=new cu,Mu=new he(0,1,0);class Su extends yu{constructor(e){super(e),this.quadrant=-1,this.adaptive=!0;const t=[];t.push(new he(0,0,0)),t.push(new he(0,1,0));const n=(new Ln).setFromPoints(t),r=new hn({color:"#009cde",transparent:!0});this.stemLine=new Nn(n,r),this.stemLine.frustumCulled=!1,this.stemLine.matrixAutoUpdate=!1,this.add(this.stemLine),this.update()}update(){const e=this.annotation.data;this.stemLine.scale.setScalar(e.scale),this.stemLine.position.y=e.offset,this.stemLine.updateMatrix();this.stemLine.material.color.fromArray(e.color),super.update()}renderHTMLElement(e,t,n){super.renderHTMLElement(e,t,n,this.stemLine,Mu);const r=wr.scaleLimit(this.viewAngle*wr.RAD2DEG,90,100,1,0),s=this.annotation.data.visible?r:0;this.stemLine.material.opacity=s,e.setOpacity(s),this.orientationQuadrant!==this.quadrant&&(e.classList.remove(wu[this.quadrant]),e.classList.add(wu[this.orientationQuadrant]),this.quadrant=this.orientationQuadrant),this.adaptive!==this.isAdaptive&&(this.isAdaptive?e.classList.remove("sv-static-width"):e.classList.add("sv-static-width"),this.adaptive=this.isAdaptive),this.setVisible(!this.isBehindCamera(this.stemLine,n))}createHTMLElement(){return new Tu(this)}}Su.typeName="Standard",su.registerDefaultType(Su);let Tu=class extends _u{constructor(e){super(e),this.onClickTitle=this.onClickTitle.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.titleElement=this.appendElement("div"),this.titleElement.classList.add("sv-title"),this.titleElement.addEventListener("click",this.onClickTitle)}firstConnected(){super.firstConnected(),this.classList.add("sv-standard-annotation")}update(e){super.update(e);const t=this.sprite.annotation.data;this.titleElement.innerText=this.sprite.annotation.title,xu.fromArray(t.color),this.style.borderColor=xu.toString()}onClickTitle(e){e.stopPropagation(),this.sprite.emitClickEvent()}onKeyDown(e){"Space"!==e.code&&"Enter"!==e.code||(e.stopPropagation(),this.sprite.emitClickEvent())}};Tu=bu([Ci("sv-standard-annotation")],Tu);const Cu=new WeakMap,Eu=Ss((e=>t=>{if(!(t instanceof Is))throw new Error("unsafeHTML can only be used in text bindings");const n=Cu.get(t);if(void 0!==n&&Os(e)&&e===n.value&&t.value===n.fragment)return;const r=document.createElement("template");r.innerHTML=e;const s=document.importNode(r.content,!0);t.setValue(s),Cu.set(t,{value:e,fragment:s})}));var ku=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const Lu=["sv-q0","sv-q1","sv-q2","sv-q3"],Au=new cu,Du=new he(0,1,0);class Ou extends yu{constructor(e){super(e),this.quadrant=-1,this.adaptive=!0;const t=[];t.push(new he(0,0,0)),t.push(new he(0,1,0));const n=(new Ln).setFromPoints(t),r=new hn({color:"#009cde",transparent:!0});this.stemLine=new Nn(n,r),this.stemLine.frustumCulled=!1,this.stemLine.matrixAutoUpdate=!1,this.add(this.stemLine),this.update()}update(){const e=this.annotation.data;this.stemLine.scale.setScalar(e.scale),this.stemLine.position.y=e.offset,this.stemLine.updateMatrix();this.stemLine.material.color.fromArray(e.color),super.update()}renderHTMLElement(e,t,n){super.renderHTMLElement(e,t,n,this.stemLine,Du);const r=wr.scaleLimit(this.viewAngle*wr.RAD2DEG,90,100,1,0),s=this.annotation.data.visible?r:0;this.stemLine.material.opacity=s,e.setOpacity(s),this.orientationQuadrant!==this.quadrant&&(e.classList.remove(Lu[this.quadrant]),e.classList.add(Lu[this.orientationQuadrant]),this.quadrant=this.orientationQuadrant),this.adaptive!==this.isAdaptive&&(this.isAdaptive?e.classList.remove("sv-static-width"):e.classList.add("sv-static-width"),this.adaptive=this.isAdaptive),this.setVisible(!this.isBehindCamera(this.stemLine,n))}createHTMLElement(){return new Ru(this)}}Ou.typeName="Extended",su.registerType(Ou);let Ru=class extends _u{constructor(e){super(e),this.handler=0,this.isExpanded=void 0,this.onClickTitle=this.onClickTitle.bind(this),this.onClickArticle=this.onClickArticle.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.titleElement=this.appendElement("div"),this.titleElement.classList.add("sv-title"),this.titleElement.addEventListener("click",this.onClickTitle),this.wrapperElement=this.appendElement("div"),this.contentElement=this.createElement("div",null,this.wrapperElement),this.contentElement.classList.add("sv-content"),this.contentElement.style.display="none"}firstConnected(){super.firstConnected(),this.classList.add("sv-extended-annotation")}update(e){super.update(e);const t=this.sprite.annotation.data;this.titleElement.innerText=this.sprite.annotation.title;const n=qs`<p>${Eu(this.sprite.annotation.lead)}</p>
            ${t.articleId?qs`<ff-button inline text="Read more..." icon="document" @click=${this.onClickArticle}></ff-button>`:null}`;Ws(n,this.contentElement),Au.fromArray(t.color),this.style.borderColor=Au.toString(),this.isExpanded&&(this.contentElement.style.height="auto"),this.isExpanded!==t.expanded&&(this.isExpanded=t.expanded,window.clearTimeout(this.handler),this.isExpanded?(this.classList.add("sv-expanded"),this.style.minWidth=this.sprite.annotation.lead.length<40?"0":"",this.contentElement.style.display="inherit",this.contentElement.style.height=this.contentElement.scrollHeight+"px"):(this.classList.remove("sv-expanded"),this.contentElement.style.height="0",this.handler=window.setTimeout((()=>this.contentElement.style.display="none"),300)))}onClickTitle(e){e.stopPropagation(),this.sprite.emitClickEvent()}onClickArticle(e){e.stopPropagation(),this.sprite.emitLinkEvent(this.sprite.annotation.data.articleId)}onKeyDown(e){"Space"!==e.code&&"Enter"!==e.code||(e.stopPropagation(),this.sprite.emitClickEvent())}};Ru=ku([Ci("sv-extended-annotation")],Ru);class Pu extends Ln{constructor(e=.5,t=1,n=8,r=1,s=0,i=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:i},n=Math.max(3,n);const o=[],a=[],l=[],c=[];let d=e;const u=(t-e)/(r=Math.max(1,r)),h=new he,m=new mn;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=s+e/n*i;h.x=d*Math.cos(r),h.y=d*Math.sin(r),a.push(h.x,h.y,h.z),l.push(0,0,1),m.x=(h.x/t+1)/2,m.y=(h.y/t+1)/2,c.push(m.x,m.y)}d+=u}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,s=r,i=r+n+1,a=r+n+2,l=r+1;o.push(s,i,l),o.push(i,a,l)}}this.setIndex(o),this.setAttribute("position",new _n(a,3)),this.setAttribute("normal",new _n(l,3)),this.setAttribute("uv",new _n(c,2))}static fromJSON(e){return new Pu(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Nu extends Ln{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],i=[],o=[],a=[],l=new he,c=new mn;i.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let s=0,d=3;s<=t;s++,d+=3){const u=n+s/t*r;l.x=e*Math.cos(u),l.y=e*Math.sin(u),i.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(i[d]/e+1)/2,c.y=(i[d+1]/e+1)/2,a.push(c.x,c.y)}for(let e=1;e<=t;e++)s.push(e,e+1,0);this.setIndex(s),this.setAttribute("position",new _n(i,3)),this.setAttribute("normal",new _n(o,3)),this.setAttribute("uv",new _n(a,2))}static fromJSON(e){return new Nu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Iu extends or{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}var zu=n(1952),Bu=(n(9105),n(8910)),Fu=n(2732),Hu=n(2205);class ju extends Ln{constructor(e){super(),"string"==typeof e&&(e={text:e}),this._opt=Object.assign({},e),e&&this.update(e)}update(e){if("string"==typeof e&&(e={text:e}),!(e=Object.assign({},this._opt,e)).font)throw new TypeError("must specify a { font } in options");this.layout=zu(e);var t=!1!==e.flipY,n=e.font,r=n.common.scaleW,s=n.common.scaleH,i=this.layout.glyphs.filter((function(e){var t=e.data;return t.width*t.height>0}));this.visibleGlyphs=i;var o=Fu.positions(i),a=Fu.uvs(i,r,s,t),l=Bu([],{clockwise:!0,type:"uint16",count:i.length});if(this.setIndex(l),this.setAttribute("position",new gn(o,2)),this.setAttribute("uv",new gn(a,2)),!e.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(e.multipage){var c=Fu.pages(i);this.setAttribute("page",new gn(c,1))}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new je);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);Hu.computeSphere(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Me);var e=this.boundingBox,t=this.attributes.position.array,n=this.attributes.position.itemSize;!t||!n||t.length<2?e.makeEmpty():Hu.computeBox(t,e)}}var Uu=n(4439);function Yu(e){var t="number"==typeof(e=e||{}).opacity?e.opacity:1,n="number"==typeof e.alphaTest?e.alphaTest:1e-4,r=e.precision||"highp",s=e.color,i=e.map,o="boolean"!=typeof e.negate||e.negate,a=e.isWebGL2||!1;return delete e.map,delete e.color,delete e.precision,delete e.opacity,delete e.negate,delete e.isWebGL2,Uu(a?{uniforms:{opacity:{type:"f",value:t},map:{type:"t",value:i||new er},color:{type:"c",value:new un(s)}},vertexShader:["#version 300 es","in vec2 uv;","in vec4 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUv;","void main() {","  vUv = uv;","  gl_Position = projectionMatrix * modelViewMatrix * position;","}"].join("\n"),fragmentShader:["#version 300 es","precision "+r+" float;","uniform float opacity;","uniform vec3 color;","uniform sampler2D map;","in vec2 vUv;","out vec4 myOutputColor;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","void main() {","  vec3 s = "+(o?"1.0 - ":"")+"texture(map, vUv).rgb;","  float sigDist = median(s.r, s.g, s.b) - 0.5;","  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);","  myOutputColor = vec4(color.xyz, alpha * opacity);",0===n?"":"  if (myOutputColor.a < "+n+") discard;","}"].join("\n")}:{uniforms:{opacity:{type:"f",value:t},map:{type:"t",value:i||new er},color:{type:"c",value:new un(s)}},vertexShader:["attribute vec2 uv;","attribute vec4 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * position;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives : enable","#endif","precision "+r+" float;","uniform float opacity;","uniform vec3 color;","uniform sampler2D map;","varying vec2 vUv;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","void main() {","  vec3 sample = "+(o?"1.0 - ":"")+"texture2D(map, vUv).rgb;","  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;","  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);","  gl_FragColor = vec4(color.xyz, alpha * opacity);",0===n?"":"  if (gl_FragColor.a < "+n+") discard;","}"].join("\n")},e)}var Vu=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const $u=new he,Wu=new he,Gu=new ue,qu=new fe;class Xu extends yu{constructor(e,t){super(e),this._isExpanded=!1,this.xrScale=1,this.isWebGL2=!1,this._isExpanded=e.data.expanded,this.offset=new Ia,this.offset.matrixAutoUpdate=!1,this.add(this.offset),this.ringGeometry=new Pu(.45,.5,32),this.ringMaterialA=new wo,this.ringMaterialB=new wo({depthFunc:6,depthWrite:!1,opacity:Xu.behindOpacity,transparent:!0}),this.ringMesh=new Qo(this.ringGeometry,this.ringMaterialA);const n=new Qo(this.ringGeometry,this.ringMaterialB),r=new Qo(new Nu(.45,32),new wo({color:0,opacity:.65,transparent:!0}));r.matrixAutoUpdate=!1,r.position.set(0,0,.005),r.updateMatrix(),this.anchorMesh=new Qo(new Ln,new wo),this.anchorMesh.frustumCulled=!1,this.offset.add(this.anchorMesh,this.ringMesh,n,r),this.markerGeometry=null,this.markerA=null,this.markerB=null,t.fontReader.load("fonts/Roboto-Bold").then((e=>{var t;this.markerMaterialA=new Iu(Yu({map:e.texture,transparent:!0,color:16777215,isWebGL2:this.isWebGL2})),this.markerMaterialB=new Iu(Yu({map:e.texture,transparent:!0,opacity:Xu.behindOpacity,color:16777215,depthFunc:6,depthWrite:!1,isWebGL2:this.isWebGL2})),this.markerGeometry=(t={font:e.descriptor},new ju(t)),this.markerA=new Qo(this.markerGeometry,this.markerMaterialA),this.markerA.matrixAutoUpdate=!1,this.markerB=new Qo(this.markerGeometry,this.markerMaterialB),this.markerB.matrixAutoUpdate=!1,pr.add(this.markerA,!1),pr.add(this.markerB,!1),this.offset.add(this.markerA,this.markerB),this.update()})),this.update()}dispose(){this.offset=null,this.anchorMesh=null,this.ringMesh=null,this.ringGeometry=null,this.ringMaterialA=null,this.ringMaterialB=null,this.markerGeometry=null,this.markerMaterialA=null,this.markerMaterialB=null,this.markerA=null,this.markerB=null,super.dispose()}update(){const e=this.annotation.data,t=e.color;if(this.ringMaterialA.color.setRGB(t[0],t[1],t[2]),this.ringMaterialB.color.setRGB(t[0],t[1],t[2]),this.markerA){const t=e.marker.length>1?.013:.016,n=this.markerGeometry;n.update(e.marker),n.computeBoundingBox(),n.boundingBox.getCenter($u),this.markerA.position.set(-t*($u.x+1),t*$u.y,.01),this.markerA.scale.set(t,-t,-1),this.markerA.updateMatrix(),this.markerB.position.set(-t*($u.x+1),t*$u.y,.01),this.markerB.scale.set(t,-t,-1),this.markerB.updateMatrix()}super.update()}renderHTMLElement(e,t,n){const r=this.annotation.data;let s=null;const i=this.annotation.data.visible;n instanceof mu&&(s=n.cameras[0]),s?qu.copy(s.matrixWorldInverse):qu.copy(n.matrixWorldInverse),qu.multiply(this.matrixWorld),qu.decompose($u,Gu,Wu),this.offset.quaternion.copy(Gu.invert()),this.offset.parent.matrixWorld.decompose($u,Gu,Wu);const o=1/Wu.x*(1/r.scale)*this.xrScale,a=t.offsetHeight+250,l=55*r.scale/a*o;let c=1;if(n.isPerspectiveCamera){const e=-$u.set(0,0,0).applyMatrix4(qu).z,t=n.fov*te*.5;c=Math.tan(t)*e*l}else c=.5*n.size*l;if(this.offset.scale.setScalar(c),this.offset.position.set(0,(r.offset+1)*c*.5,0),this.offset.updateMatrix(),this.setVisible(!this.isBehindCamera(this.offset,n)&&i),this.getVisible()||e.setVisible(this.getVisible()),r.expanded){$u.set(0,0,0).applyMatrix4(this.anchorMesh.modelViewMatrix).applyMatrix4(n.projectionMatrix),Wu.set(.6,.5,0).applyMatrix4(this.anchorMesh.modelViewMatrix).applyMatrix4(n.projectionMatrix);const r=.5*($u.x+1)*t.clientWidth,s=.5*(1-$u.y)*t.clientHeight,i=.5*(Wu.x+1)*t.clientWidth-r,o=.5*(1-Wu.y)*t.clientHeight-s;let a=r+i,l=s+o;e.classList.remove("sv-align-right","sv-align-bottom"),a+e.offsetWidth>=t.offsetWidth&&(a=r-i,e.classList.add("sv-align-right")),l+e.offsetHeight>=t.offsetHeight&&(l=s-o,e.classList.add("sv-align-bottom")),e.setPosition(a,l)}this._isExpanded!==r.expanded&&(e.style.visibility="",this._isExpanded=r.expanded)}createHTMLElement(){return new Ku(this)}updateHTMLElement(e){e.setVisible(this.getVisible()),this.annotation.data.expanded&&this._isExpanded!==this.annotation.data.expanded&&(e.style.visibility="hidden"),e.requestUpdate()}}Xu.typeName="Circle",Xu.behindOpacity=.2,su.registerType(Xu);let Ku=class extends _u{constructor(e){super(e)}setVisible(e){super.setVisible(e&&this.sprite.annotation.data.expanded)}firstConnected(){super.firstConnected(),this.classList.add("sv-circle-annotation")}render(){const e=this.sprite.annotation,t=e.data;return qs`<div class="sv-title">${e.title}</div>
            <div class="sv-content"><p>${Eu(e.lead)}</p></div>
            ${t.articleId?qs`<ff-button inline text="Read more..." icon="document" @click=${this.onClickArticle}></ff-button>`:null}`}onClickArticle(e){e.stopPropagation(),this.sprite.emitLinkEvent(this.sprite.annotation.data.articleId)}};Ku=Vu([Ci("sv-circle-annotation")],Ku);class Ju{constructor(e,t,n=0,r=1/0){this.ray=new Xe(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new et,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Qu(e,this,n,t),n.sort(Zu),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)Qu(e[r],this,n,t);return n.sort(Zu),n}}function Zu(e,t){return e.distance-t.distance}function Qu(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,s=r.length;e<s;e++)Qu(r[e],t,n,!0)}}class eh extends Ln{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,i=t/2,o=Math.floor(n),a=Math.floor(r),l=o+1,c=a+1,d=e/o,u=t/a,h=[],m=[],p=[],f=[];for(let e=0;e<c;e++){const t=e*u-i;for(let n=0;n<l;n++){const r=n*d-s;m.push(r,-t,0),p.push(0,0,1),f.push(n/o),f.push(1-e/a)}}for(let e=0;e<a;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),s=t+1+l*(e+1),i=t+1+l*e;h.push(n,r,i),h.push(r,s,i)}this.setIndex(h),this.setAttribute("position",new _n(m,3)),this.setAttribute("normal",new _n(p,3)),this.setAttribute("uv",new _n(f,2))}static fromJSON(e){return new eh(e.width,e.height,e.widthSegments,e.heightSegments)}}class th{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let i=1;i<=e;i++)n=this.getPoint(i/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let i;i=t||e*n[s-1];let o,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),o=n[r]-i,o<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===i)return r/(s-1);const c=n[r];return(r+(i-c)/(n[r+1]-c))/(s-1)}getTangent(e,t){const n=1e-4;let r=e-n,s=e+n;r<0&&(r=0),s>1&&(s=1);const i=this.getPoint(r),o=this.getPoint(s),a=t||(i.isVector2?new mn:new he);return a.copy(o).sub(i).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new he,r=[],s=[],i=[],o=new he,a=new fe;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new he)}s[0]=new he,i[0]=new he;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),d=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],o),i[0].crossVectors(r[0],s[0]);for(let t=1;t<=e;t++){if(s[t]=s[t-1].clone(),i[t]=i[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(se(r[t-1].dot(r[t]),-1,1));s[t].applyMatrix4(a.makeRotationAxis(o,e))}i[t].crossVectors(r[t],s[t])}if(!0===t){let t=Math.acos(se(s[0].dot(s[e]),-1,1));t/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(t=-t);for(let n=1;n<=e;n++)s[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),i[n].crossVectors(r[n],s[n])}return{tangents:r,normals:s,binormals:i}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nh extends th{constructor(e=0,t=0,n=1,r=1,s=0,i=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=i,this.aClockwise=o,this.aRotation=a}getPoint(e,t){const n=t||new mn,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const i=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=i?0:r),!0!==this.aClockwise||i||(s===r?s=-r:s-=r);const o=this.aStartAngle+e*s;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rh extends nh{constructor(e,t,n,r,s,i){super(e,t,n,n,r,s,i),this.isArcCurve=!0,this.type="ArcCurve"}}function sh(){let e=0,t=0,n=0,r=0;function s(s,i,o,a){e=s,t=o,n=-3*s+3*i-2*o-a,r=2*s-2*i+o+a}return{initCatmullRom:function(e,t,n,r,i){s(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,o,a){let l=(t-e)/i-(n-e)/(i+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+a)+(r-n)/a;l*=o,c*=o,s(t,n,l,c)},calc:function(s){const i=s*s;return e+t*s+n*i+r*(i*s)}}}const ih=new he,oh=new sh,ah=new sh,lh=new sh;class ch extends th{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new he){const n=t,r=this.points,s=r.length,i=(s-(this.closed?0:1))*e;let o,a,l=Math.floor(i),c=i-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===c&&l===s-1&&(l=s-2,c=1),this.closed||l>0?o=r[(l-1)%s]:(ih.subVectors(r[0],r[1]).add(r[0]),o=ih);const d=r[l%s],u=r[(l+1)%s];if(this.closed||l+2<s?a=r[(l+2)%s]:(ih.subVectors(r[s-1],r[s-2]).add(r[s-1]),a=ih),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(d),e),n=Math.pow(d.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),oh.initNonuniformCatmullRom(o.x,d.x,u.x,a.x,t,n,r),ah.initNonuniformCatmullRom(o.y,d.y,u.y,a.y,t,n,r),lh.initNonuniformCatmullRom(o.z,d.z,u.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(oh.initCatmullRom(o.x,d.x,u.x,a.x,this.tension),ah.initCatmullRom(o.y,d.y,u.y,a.y,this.tension),lh.initCatmullRom(o.z,d.z,u.z,a.z,this.tension));return n.set(oh.calc(c),ah.calc(c),lh.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new he).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function dh(e,t,n,r,s){const i=.5*(r-t),o=.5*(s-n),a=e*e;return(2*n-2*r+i+o)*(e*a)+(-3*n+3*r-2*i-o)*a+i*e+n}function uh(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function hh(e,t,n,r,s){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,s)}class mh extends th{constructor(e=new mn,t=new mn,n=new mn,r=new mn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new mn){const n=t,r=this.v0,s=this.v1,i=this.v2,o=this.v3;return n.set(hh(e,r.x,s.x,i.x,o.x),hh(e,r.y,s.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ph extends th{constructor(e=new he,t=new he,n=new he,r=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new he){const n=t,r=this.v0,s=this.v1,i=this.v2,o=this.v3;return n.set(hh(e,r.x,s.x,i.x,o.x),hh(e,r.y,s.y,i.y,o.y),hh(e,r.z,s.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class fh extends th{constructor(e=new mn,t=new mn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new mn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new mn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gh extends th{constructor(e=new he,t=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new he){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vh extends th{constructor(e=new mn,t=new mn,n=new mn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new mn){const n=t,r=this.v0,s=this.v1,i=this.v2;return n.set(uh(e,r.x,s.x,i.x),uh(e,r.y,s.y,i.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class yh extends th{constructor(e=new he,t=new he,n=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new he){const n=t,r=this.v0,s=this.v1,i=this.v2;return n.set(uh(e,r.x,s.x,i.x),uh(e,r.y,s.y,i.y),uh(e,r.z,s.z,i.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _h extends th{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new mn){const n=t,r=this.points,s=(r.length-1)*e,i=Math.floor(s),o=s-i,a=r[0===i?i:i-1],l=r[i],c=r[i>r.length-2?r.length-1:i+1],d=r[i>r.length-3?r.length-1:i+2];return n.set(dh(o,a.x,l.x,c.x,d.x),dh(o,a.y,l.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new mn).fromArray(n))}return this}}class bh extends th{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new fh(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const e=r[s]-n,i=this.curves[s],o=i.getLength(),a=0===o?0:1-e/o;return i.getPointAt(a,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const i=s[r],o=i.isEllipseCurve?2*e:i.isLineCurve||i.isLineCurve3?1:i.isSplineCurve?e*i.points.length:e,a=i.getPoints(o);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new r[n.type]).fromJSON(n))}return this}}class wh extends bh{constructor(e){super(),this.type="Path",this.currentPoint=new mn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new fh(this.currentPoint.clone(),new mn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new vh(this.currentPoint.clone(),new mn(e,t),new mn(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,i){const o=new mh(this.currentPoint.clone(),new mn(e,t),new mn(n,r),new mn(s,i));return this.curves.push(o),this.currentPoint.set(s,i),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new _h(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,i){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,r,s,i),this}absarc(e,t,n,r,s,i){return this.absellipse(e,t,n,n,r,s,i),this}ellipse(e,t,n,r,s,i,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,s,i,o,a),this}absellipse(e,t,n,r,s,i,o,a){const l=new nh(e,t,n,r,s,i,o,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class xh extends wh{constructor(e){super(e),this.uuid=re(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new wh).fromJSON(n))}return this}}const Mh=function(e,t,n=2){const r=t&&t.length,s=r?t[0]*n:e.length;let i=Sh(e,0,s,n,!0);const o=[];if(!i||i.next===i.prev)return o;let a,l,c,d,u,h,m;if(r&&(i=function(e,t,n,r){const s=[];let i,o,a,l,c;for(i=0,o=t.length;i<o;i++)a=t[i]*r,l=i<o-1?t[i+1]*r:e.length,c=Sh(e,a,l,r,!1),c===c.next&&(c.steiner=!0),s.push(Nh(c));for(s.sort(Dh),i=0;i<s.length;i++)n=Oh(s[i],n);return n}(e,t,i,n)),e.length>80*n){a=c=e[0],l=d=e[1];for(let t=n;t<s;t+=n)u=e[t],h=e[t+1],u<a&&(a=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);m=Math.max(c-a,d-l),m=0!==m?32767/m:0}return Ch(i,o,n,a,l,m,0),o};function Sh(e,t,n,r,s){let i,o;if(s===function(e,t,n,r){let s=0;for(let i=t,o=n-r;i<n;i+=r)s+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return s}(e,t,n,r)>0)for(i=t;i<n;i+=r)o=$h(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=$h(i,e[i],e[i+1],o);return o&&Fh(o,o.next)&&(Wh(o),o=o.next),o}function Th(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Fh(r,r.next)&&0!==Bh(r.prev,r,r.next))r=r.next;else{if(Wh(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Ch(e,t,n,r,s,i,o){if(!e)return;!o&&i&&function(e,t,n,r){let s=e;do{0===s.z&&(s.z=Ph(s.x,s.y,t,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){let t,n,r,s,i,o,a,l,c=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ,r);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(s=n,n=n.nextZ,a--):(s=r,r=r.nextZ,l--),i?i.nextZ=s:e=s,s.prevZ=i,i=s;n=r}i.nextZ=null,c*=2}while(o>1)}(s)}(e,r,s,i);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,i?kh(e,r,s,i):Eh(e))t.push(a.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Wh(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Ch(e=Lh(Th(e),t,n),t,n,r,s,i,2):2===o&&Ah(e,t,n,r,s,i):Ch(Th(e),t,n,r,s,i,1);break}}function Eh(e){const t=e.prev,n=e,r=e.next;if(Bh(t,n,r)>=0)return!1;const s=t.x,i=n.x,o=r.x,a=t.y,l=n.y,c=r.y,d=s<i?s<o?s:o:i<o?i:o,u=a<l?a<c?a:c:l<c?l:c,h=s>i?s>o?s:o:i>o?i:o,m=a>l?a>c?a:c:l>c?l:c;let p=r.next;for(;p!==t;){if(p.x>=d&&p.x<=h&&p.y>=u&&p.y<=m&&Ih(s,a,i,l,o,c,p.x,p.y)&&Bh(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function kh(e,t,n,r){const s=e.prev,i=e,o=e.next;if(Bh(s,i,o)>=0)return!1;const a=s.x,l=i.x,c=o.x,d=s.y,u=i.y,h=o.y,m=a<l?a<c?a:c:l<c?l:c,p=d<u?d<h?d:h:u<h?u:h,f=a>l?a>c?a:c:l>c?l:c,g=d>u?d>h?d:h:u>h?u:h,v=Ph(m,p,t,n,r),y=Ph(f,g,t,n,r);let _=e.prevZ,b=e.nextZ;for(;_&&_.z>=v&&b&&b.z<=y;){if(_.x>=m&&_.x<=f&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Ih(a,d,l,u,c,h,_.x,_.y)&&Bh(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=m&&b.x<=f&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&Ih(a,d,l,u,c,h,b.x,b.y)&&Bh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=v;){if(_.x>=m&&_.x<=f&&_.y>=p&&_.y<=g&&_!==s&&_!==o&&Ih(a,d,l,u,c,h,_.x,_.y)&&Bh(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=y;){if(b.x>=m&&b.x<=f&&b.y>=p&&b.y<=g&&b!==s&&b!==o&&Ih(a,d,l,u,c,h,b.x,b.y)&&Bh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Lh(e,t,n){let r=e;do{const s=r.prev,i=r.next.next;!Fh(s,i)&&Hh(s,r,r.next,i)&&Yh(s,i)&&Yh(i,s)&&(t.push(s.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),Wh(r),Wh(r.next),r=e=i),r=r.next}while(r!==e);return Th(r)}function Ah(e,t,n,r,s,i){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&zh(o,e)){let a=Vh(o,e);return o=Th(o,o.next),a=Th(a,a.next),Ch(o,t,n,r,s,i,0),void Ch(a,t,n,r,s,i,0)}e=e.next}o=o.next}while(o!==e)}function Dh(e,t){return e.x-t.x}function Oh(e,t){const n=function(e,t){let n,r=t,s=-1/0;const i=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){const e=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=i&&e>s&&(s=e,n=r.x<r.next.x?r:r.next,e===i))return n}r=r.next}while(r!==t);if(!n)return null;const a=n,l=n.x,c=n.y;let d,u=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&Ih(o<c?i:s,o,l,c,o<c?s:i,o,r.x,r.y)&&(d=Math.abs(o-r.y)/(i-r.x),Yh(r,e)&&(d<u||d===u&&(r.x>n.x||r.x===n.x&&Rh(n,r)))&&(n=r,u=d)),r=r.next}while(r!==a);return n}(e,t);if(!n)return t;const r=Vh(n,e);return Th(r,r.next),Th(n,n.next)}function Rh(e,t){return Bh(e.prev,e,t.prev)<0&&Bh(t.next,e,e.next)<0}function Ph(e,t,n,r,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Nh(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ih(e,t,n,r,s,i,o,a){return(s-o)*(t-a)>=(e-o)*(i-a)&&(e-o)*(r-a)>=(n-o)*(t-a)&&(n-o)*(i-a)>=(s-o)*(r-a)}function zh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Hh(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Yh(e,t)&&Yh(t,e)&&function(e,t){let n=e,r=!1;const s=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&s<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Bh(e.prev,e,t.prev)||Bh(e,t.prev,t))||Fh(e,t)&&Bh(e.prev,e,e.next)>0&&Bh(t.prev,t,t.next)>0)}function Bh(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Fh(e,t){return e.x===t.x&&e.y===t.y}function Hh(e,t,n,r){const s=Uh(Bh(e,t,n)),i=Uh(Bh(e,t,r)),o=Uh(Bh(n,r,e)),a=Uh(Bh(n,r,t));return s!==i&&o!==a||(!(0!==s||!jh(e,n,t))||(!(0!==i||!jh(e,r,t))||(!(0!==o||!jh(n,e,r))||!(0!==a||!jh(n,t,r)))))}function jh(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uh(e){return e>0?1:e<0?-1:0}function Yh(e,t){return Bh(e.prev,e,e.next)<0?Bh(e,t,e.next)>=0&&Bh(e,e.prev,t)>=0:Bh(e,t,e.prev)<0||Bh(e,e.next,t)<0}function Vh(e,t){const n=new Gh(e.i,e.x,e.y),r=new Gh(t.i,t.x,t.y),s=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=s,s.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function $h(e,t,n,r){const s=new Gh(e,t,n);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function Wh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Gh(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class qh{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*n}static isClockWise(e){return qh.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];Xh(e),Kh(n,e);let i=e.length;t.forEach(Xh);for(let e=0;e<t.length;e++)r.push(i),i+=t[e].length,Kh(n,t[e]);const o=Mh(n,r);for(let e=0;e<o.length;e+=3)s.push(o.slice(e,e+3));return s}}function Xh(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Kh(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Jh extends Ln{constructor(e=new xh([new mn(0,.5),new mn(-.5,-.5),new mn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],i=[];let o=0,a=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,a,t),o+=a,a=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let c=l.shape;const d=l.holes;!1===qh.isClockWise(c)&&(c=c.reverse());for(let e=0,t=d.length;e<t;e++){const t=d[e];!0===qh.isClockWise(t)&&(d[e]=t.reverse())}const u=qh.triangulateShape(c,d);for(let e=0,t=d.length;e<t;e++){const t=d[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),s.push(0,0,1),i.push(t.x,t.y)}for(let e=0,t=u.length;e<t;e++){const t=u[e],r=t[0]+o,s=t[1]+o,i=t[2]+o;n.push(r,s,i),a+=3}}this.setIndex(n),this.setAttribute("position",new _n(r,3)),this.setAttribute("normal",new _n(s,3)),this.setAttribute("uv",new _n(i,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const s=t[e.shapes[r]];n.push(s)}return new Jh(n,e.curveSegments)}}const Zh=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported&&self.XRSession.prototype.requestHitTestSource,Qh=(()=>{const e=navigator.userAgent||navigator.vendor||self.opera;let t=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t})(),em=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,tm=(()=>{const e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))})(),nm=(/\bCrOS\b/.test(navigator.userAgent),/android/i.test(navigator.userAgent));var rm;!function(e){e[e.none=0]="none",e[e.menu=1]="menu",e[e.title=2]="title",e[e.logo=4]="logo",e[e.language=8]="language"}(rm||(rm={}));class sm extends W{constructor(){super(...arguments),this.ins=this.addInputs(sm.ins),this.outs=this.addOutputs(sm.outs)}update(e){return!0}fromData(e){e=e||{},this.ins.setValues({visible:void 0===e.visible||e.visible,logo:void 0===e.logo||e.logo,menu:void 0===e.menu||e.menu,tools:void 0===e.tools||e.tools})}toData(){const e=this.ins;return{visible:e.visible.value,logo:e.logo.value,menu:e.menu.value,tools:e.tools.value}}isShowing(e){return(e&this.ins.visibleElements.value)===e}}sm.typeName="CVInterface",sm.ins={visible:O("Interface.Visible",!0),logo:O("Interface.Logo",!0),menu:O("Interface.Menu",!0),tools:O("Interface.Tools",!0),visibleElements:S("Interface.VisibleElements",15)},sm.outs={documentTitle:R("Document.Title")};class im extends W{constructor(){super(...arguments),this._rootElement=null,this.ins=this.addInputs(im.ins),this.outs=this.addOutputs(im.outs)}get settingProperties(){return[this.ins.annotationsVisible,this.ins.activeTags,this.ins.sortedTags,this.ins.radioTags,this.ins.shader,this.ins.toneMapping,this.ins.exposure,this.ins.gamma]}get snapshotProperties(){return[this.ins.annotationsVisible,this.ins.activeAnnotation,this.ins.activeTags,this.ins.shader,this.ins.exposure]}get analytics(){return this.getMainComponent(Xi)}get renderer(){return this.getMainComponent(_r)}get rootElement(){return this._rootElement}set rootElement(e){this._rootElement=e}create(){super.create(),this.graph.components.on(Tp,this.onModelComponent,this),this.graph.components.on(bp,this.onAnnotationsComponent,this),this.graph.components.on(Dd,this.onLanguageComponent,this)}dispose(){this.graph.components.off(Tp,this.onModelComponent,this),this.graph.components.off(bp,this.onAnnotationsComponent,this),this.graph.components.off(Dd,this.onLanguageComponent,this),super.dispose()}update(e){const t=this.ins;if(t.shader.changed){const e=t.shader.getValidatedValue();this.getGraphComponents(Tp).forEach((t=>t.ins.shader.setValue(e)))}if(t.exposure.changed&&this.renderer.ins.exposure.setValue(t.exposure.value),t.toneMapping.changed){this.renderer.views.forEach((e=>e.renderer.toneMapping=t.toneMapping.value?4:0));const e=this.renderer.activeScene;e&&e.traverse((e=>{const t=e;t.isMesh&&(Array.isArray(t.material)?t.material.forEach((e=>e.needsUpdate=!0)):t.material.needsUpdate=!0)}))}if(t.gamma.changed,t.quality.changed){const e=t.quality.getValidatedValue();this.getGraphComponents(Tp).forEach((t=>t.ins.quality.setValue(e)))}if(t.activeAnnotation.changed){const e=t.activeAnnotation.value;this.getGraphComponents(bp).forEach((t=>t.setActiveAnnotationById(e)))}if(t.annotationsVisible.changed){const e=t.annotationsVisible.value;this.getGraphComponents(bp).forEach((t=>t.ins.visible.setValue(e)))}if(t.activeTags.changed){const e=t.activeTags.value;this.getGraphComponents(bp).forEach((t=>t.ins.activeTags.setValue(e))),this.getGraphComponents(Tp).forEach((t=>t.ins.activeTags.setValue(e)))}return t.sortedTags.changed&&this.refreshTagCloud(),!0}fromData(e){const t=this.ins;t.copyValues({shader:oc[e.shader]||oc.Default,exposure:void 0!==e.exposure?e.exposure:t.exposure.schema.preset,toneMapping:e.toneMapping||!1,gamma:void 0!==e.gamma?e.gamma:t.gamma.schema.preset,annotationsVisible:!!e.annotationsVisible,activeTags:e.activeTags||"",sortedTags:e.sortedTags||"",radioTags:void 0!==e.radioTags?!!e.radioTags:t.radioTags.schema.preset})}toData(){const e=this.ins,t={shader:oc[e.shader.value],exposure:e.exposure.value,toneMapping:e.toneMapping.value,gamma:e.gamma.value};return e.annotationsVisible.value&&(t.annotationsVisible=!0),e.activeTags.value&&(t.activeTags=e.activeTags.value),e.sortedTags.value&&(t.sortedTags=e.sortedTags.value),e.radioTags.value&&(t.radioTags=e.radioTags.value),t}refreshTagCloud(){const e=new Set;this.getGraphComponents(Tp).forEach((t=>{t.ins.tags.value.split(",").map((e=>e.trim())).filter((e=>e)).forEach((t=>e.add(t)))}));this.getGraphComponents(bp).forEach((t=>{t.getAnnotations().forEach((t=>{t.tags.forEach((t=>{e.add(t)}))}))}));const t=Array.from(e),n=this.ins.sortedTags.value.split(",").map((e=>e.trim())).filter((e=>e));t.sort(((e,t)=>{const r=n.indexOf(e),s=n.indexOf(t);return r<s?-1:r>s?1:0})),this.outs.tagCloud.setValue(t.join(", ")),this.ins.activeTags.set(),this.ins.annotationsVisible.set()}onAnnotationClick(e){const t=e.annotation?e.annotation.id:"";this.ins.activeAnnotation.setValue(t),this.rootElement.dispatchEvent(new CustomEvent("annotation-active",{detail:t}))}onModelComponent(e){const t=e.object;e.add?(t.on("tag-update",this.refreshTagCloud,this),t.on("model-load",this.onModelLoad,this)):e.remove&&(t.off("tag-update",this.refreshTagCloud,this),t.off("model-load",this.onModelLoad,this))}onAnnotationsComponent(e){const t=e.object;e.add?(t.on("tag-update",this.refreshTagCloud,this),t.on("click",this.onAnnotationClick,this),t.ins.visible.setValue(this.ins.annotationsVisible.value)):e.remove&&(t.off("tag-update",this.refreshTagCloud,this),t.off("click",this.onAnnotationClick,this))}onLanguageComponent(e){const t=e.object;e.add?t.on("tag-update",this.refreshTagCloud,this):e.remove&&t.off("tag-update",this.refreshTagCloud,this)}onModelLoad(e){this.rootElement.dispatchEvent(new CustomEvent("model-load",{detail:Nd[e.quality]})),this.refreshTagCloud()}}im.typeName="CVViewer",im.text="Viewer",im.icon="",im.ins={annotationsVisible:O("Annotations.Visible"),activeAnnotation:R("Annotations.ActiveId"),activeTags:R("Tags.Active"),sortedTags:R("Tags.Sorted"),radioTags:O("Tags.Radio"),shader:N("Renderer.Shader",oc),toneMapping:O("Renderer.ToneMapping",!1),exposure:S("Renderer.Exposure",1),gamma:S("Renderer.Gamma",2),quality:N("Models.Quality",Nd,Nd.High)},im.outs={tagCloud:R("Tags.Cloud")};const om=new tr,am=(new tr,new he),lm=new he,cm=new fe,dm=new Qe,um=new ue,hm={PI:3.141592653589793,DOUBLE_PI:6.283185307179586,HALF_PI:1.5707963267948966,QUARTER_PI:.7853981633974483,DEG2RAD:.017453292519943295,RAD2DEG:57.29577951308232,composeOrbitMatrix:function(e,t,n){const r=e.x,s=e.y,i=e.z,o=t.x,a=t.y,l=t.z,c=Math.sin(r),d=Math.cos(r),u=Math.sin(s),h=Math.cos(s),m=Math.sin(i),p=Math.cos(i),f=h*p,g=p*u*c-m*d,v=p*u*d+m*c,y=h*m,_=c*u*m+p*d,b=m*u*d-p*c,w=-u,x=h*c,M=h*d,S=(n=n||new fe).elements;return S[0]=f,S[1]=y,S[2]=w,S[3]=0,S[4]=g,S[5]=_,S[6]=x,S[7]=0,S[8]=v,S[9]=b,S[10]=M,S[11]=0,S[12]=o*f+a*g+l*v,S[13]=o*y+a*_+l*b,S[14]=o*w+a*x+l*M,S[15]=1,n},decomposeOrbitMatrix:function(e,t,n){dm.setFromRotationMatrix(e,"ZYX"),t.setFromEuler(dm),cm.copy(e).invert(),om.set(0,0,0,1),om.applyMatrix4(cm),n.x=-om.x,n.y=-om.y,n.z=-om.z},isMatrix4Identity:function(e){const t=e.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},decomposeTransformMatrix:function(e,t,n,r){cm.fromArray(e),cm.decompose(am,um,lm),dm.setFromQuaternion(um,"XYZ"),am.toArray(t),lm.toArray(r),am.setFromEuler(dm),om.multiplyScalar(wr.RAD2DEG),am.toArray(n)}},mm=hm,pm=new fe,fm=new Me,gm=new he,vm=new he;var ym,_m,bm,wm,xm;!function(e){e[e.Orbit=0]="Orbit",e[e.FirstPerson=1]="FirstPerson"}(ym||(ym={})),function(e){e[e.Off=0]="Off",e[e.Pan=1]="Pan",e[e.Orbit=2]="Orbit",e[e.Dolly=3]="Dolly",e[e.Zoom=4]="Zoom",e[e.PanDolly=5]="PanDolly",e[e.Roll=6]="Roll"}(_m||(_m={})),function(e){e[e.Off=0]="Off",e[e.Active=1]="Active",e[e.Release=2]="Release"}(bm||(bm={}));class Mm{constructor(e){this.orbit=new he(0,0,0),this.offset=new he(0,0,50),this.minOrbit=new he(-90,-1/0,-1/0),this.maxOrbit=new he(90,1/0,1/0),this.minOffset=new he(-1/0,-1/0,.1),this.maxOffset=new he(1/0,1/0,1e3),this.orientationEnabled=!0,this.offsetEnabled=!0,this.mode=_m.Off,this.phase=bm.Off,this.prevPinchDist=0,this.deltaX=0,this.deltaY=0,this.deltaPinch=0,this.deltaWheel=0,this.viewportWidth=100,this.viewportHeight=100,this.camera=e}onPointer(e){if(e.isPrimary)if("pointer-down"===e.type)this.phase=bm.Active;else if("pointer-up"===e.type)return this.phase=bm.Release,!0;"pointer-down"===e.type&&(this.mode=this.getModeFromEvent(e));if(this.deltaX+=1*e.movementX,this.deltaY+=1*e.movementY,2===e.pointerCount){const t=e.activePositions,n=t[1].clientX-t[0].clientX,r=t[1].clientY-t[0].clientY,s=Math.sqrt(n*n+r*r),i=this.prevPinchDist||s;this.deltaPinch*=i>0?s/i:1,this.prevPinchDist=s}else this.deltaPinch=1,this.prevPinchDist=0;return!0}onTrigger(e){return"wheel"===e.type&&(this.deltaWheel+=wr.limit(e.wheel,-1,1),!0)}onKeypress(e){if("ArrowUp"===e.key||"ArrowDown"===e.key){const t="ArrowUp"===e.key?-1:1;return this.deltaY=20*t,this.mode=e.shiftKey?_m.Pan:e.ctrlKey?_m.Dolly:_m.Orbit,!0}if("ArrowLeft"===e.key||"ArrowRight"===e.key){const t="ArrowLeft"===e.key?-1:1;return this.deltaX=20*t,this.mode=e.shiftKey?_m.Pan:_m.Orbit,!0}return!1}setViewportSize(e,t){this.viewportWidth=e,this.viewportHeight=t}updateController(e,t){const n=this.camera;e=e||n;const r=this.orbit,s=this.offset;mm.decomposeOrbitMatrix(e.matrix,r,s),this.orbit.multiplyScalar(mm.RAD2DEG),t&&(this.minOffset.min(s),this.maxOffset.max(s))}zoomExtents(e){const t=this.camera,n=this.offset;if(!t)return void console.warn("CameraController.zoomExtents - camera not set");gm.copy(this.orbit).multiplyScalar(wr.DEG2RAD),vm.setScalar(0),mm.composeOrbitMatrix(gm,vm,pm),fm.copy(e).applyMatrix4(pm.transpose()),fm.getSize(gm),fm.getCenter(vm),n.x=vm.x,n.y=vm.y;const r=Math.max(gm.x/t.aspect,gm.y);if(t.isOrthographicCamera)n.z=1.1*r;else{const e=1/(2*Math.tan(t.fov*wr.DEG2RAD*.5));n.z=vm.z+r*e+.25*gm.z}n.z>this.maxOffset.z&&(this.maxOffset.z=2*n.length())}updateCamera(e,t){const n=this.camera;return e=e||n,!(!this.update()&&!t)&&(gm.copy(this.orbit).multiplyScalar(wr.DEG2RAD),vm.copy(this.offset),n.isOrthographicCamera&&(vm.z=this.maxOffset.z,n.size=this.offset.z,n.far=2*this.maxOffset.z,n.updateProjectionMatrix()),mm.composeOrbitMatrix(gm,vm,e.matrix),e.matrixWorldNeedsUpdate=!0,!0)}update(){if(this.phase===bm.Off&&0===this.deltaWheel&&0===this.deltaX&&0===this.deltaY)return!1;if(0!==this.deltaWheel)return this.updatePose(0,0,.07*this.deltaWheel+1,0,0,0),this.deltaWheel=0,!0;if(this.phase===bm.Active)return(0!==this.deltaX||0!==this.deltaY||1!==this.deltaPinch)&&(this.updateByMode(),this.deltaX=0,this.deltaY=0,this.deltaPinch=1,!0);if(this.phase===bm.Release){this.deltaX*=.85,this.deltaY*=.85,this.deltaPinch=1,this.updateByMode();return Math.abs(this.deltaX)+Math.abs(this.deltaY)<.1&&(this.mode=_m.Off,this.phase=bm.Off),!0}return(0!==this.deltaX||0!==this.deltaY)&&(this.updateByMode(),this.deltaX=0,this.deltaY=0,this.mode=_m.Off,!0)}updateByMode(){switch(this.mode){case _m.Orbit:this.updatePose(0,0,1,this.deltaY,this.deltaX,0);break;case _m.Pan:this.updatePose(this.deltaX,this.deltaY,1,0,0,0);break;case _m.Roll:this.updatePose(0,0,1,0,0,this.deltaX);break;case _m.Dolly:this.updatePose(0,0,.0075*this.deltaY+1,0,0,0);break;case _m.PanDolly:const e=.42*(this.deltaPinch-1)+1;this.updatePose(.75*this.deltaX,.75*this.deltaY,1/e,0,0,0)}}updatePose(e,t,n,r,s,i){const{orbit:o,minOrbit:a,maxOrbit:l,offset:c,minOffset:d,maxOffset:u}=this;if(this.orientationEnabled&&(o.x+=-1*r*220/this.viewportHeight,o.y+=-1*s*220/this.viewportHeight,o.z+=-1*i*220/this.viewportHeight,o.x=wr.limit(o.x,a.x,l.x),o.y=wr.limit(o.y,a.y,l.y),o.z=wr.limit(o.z,a.z,l.z)),this.offsetEnabled){const r=c.z=n*c.z;c.x+=e*r*-1/this.viewportHeight,c.y-=t*r*-1/this.viewportHeight,c.x=wr.limit(c.x,d.x,u.x),c.y=wr.limit(c.y,d.y,u.y),c.z=wr.limit(c.z,d.z,u.z)}}getModeFromEvent(e){if("mouse"===e.source){const t=e.originalEvent.button;if(0===t)return e.ctrlKey?_m.Pan:e.altKey?_m.Dolly:_m.Orbit;if(2===t)return e.altKey?_m.Roll:_m.Pan;if(1===t)return _m.Dolly}else if("touch"===e.source){const t=e.pointerCount;return 1===t?_m.Orbit:2===t?_m.PanDolly:_m.Pan}}}!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom",e[e.Front=4]="Front",e[e.Back=5]="Back",e[e.None=6]="None"}(wm||(wm={})),function(e){e[e.Orbit=0]="Orbit",e[e.Zoom=1]="Zoom",e[e.Pan=2]="Pan"}(xm||(xm={}));const Sm=[];Sm[wm.Left]=[0,-90,0],Sm[wm.Right]=[0,90,0],Sm[wm.Front]=[0,0,0],Sm[wm.Back]=[0,180,0],Sm[wm.Top]=[-90,0,0],Sm[wm.Bottom]=[90,0,0];const Tm=function(e,t){for(let n=0,r=e.length;n<r;++n)e[n]=null===e[n]?t:e[n];return e};class Cm extends Br{constructor(e,t){super(e,t),this.ins=this.addInputs(Cm.ins),this._controller=new Mm,this._scene=null,this._modelBoundingBox=null,this._hasChanged=!1,this._hasZoomed=!1,this._isAutoZooming=!1,this._autoRotationStartTime=null,this._scene=this.scene}get settingProperties(){return[this.ins.enabled,this.ins.orbit,this.ins.offset,this.ins.autoZoom,this.ins.autoRotation,this.ins.autoRotationSpeed,this.ins.lightsFollowCamera,this.ins.minOrbit,this.ins.minOffset,this.ins.maxOrbit,this.ins.maxOffset]}get snapshotProperties(){return[this.ins.orbit,this.ins.offset]}get assetManager(){return this.getMainComponent(Zi)}get sceneNode(){return this.getSystemComponent(up)}create(){super.create(),this.system.on(["pointer-down","pointer-up","pointer-move"],this.onPointer,this),this.system.on("wheel",this.onTrigger,this),this.system.on("keydown",this.onKeyboard,this),this.assetManager.outs.completed.on("value",this.onLoadingCompleted,this)}dispose(){this.assetManager.outs.completed.off("value",this.onLoadingCompleted,this),this.system.off(["pointer-down","pointer-up","pointer-move"],this.onPointer,this),this.system.off("wheel",this.onTrigger,this),this.system.off("keydown",this.onKeyboard,this),super.dispose()}update(){const e=this.ins,t=this._controller,n=this._scene.activeCameraComponent,r=n?n.camera:null,{projection:s,preset:i,orbit:o,offset:a}=e;if(n&&s.changed&&(r.setProjection(s.getValidatedValue()),n.ins.projection.setValue(s.value,!0)),i.changed&&i.value!==wm.None&&o.setValue(Sm[i.getValidatedValue()].slice()),e.lightsFollowCamera.changed){const t=this.getLightTransform();t&&(e.lightsFollowCamera.value?(t.ins.order.setValue(Ar.ZXY),t.ins.rotation.reset(),t.ins.rotation.linkFrom(o,1,1)):(t.ins.rotation.unlinkFrom(o,1,1),t.ins.rotation.reset()))}const{minOrbit:l,minOffset:c,maxOrbit:d,maxOffset:u}=e;if((o.changed||a.changed)&&(t.orbit.fromArray(o.value),t.offset.fromArray(a.value)),(l.changed||c.changed||d.changed||u.changed)&&(t.minOrbit.fromArray(l.value),t.minOffset.fromArray(c.value),t.maxOrbit.fromArray(d.value),t.maxOffset.fromArray(u.value)),r&&e.zoomExtents.changed){const e=this.getGraphComponent(up);e.models.some((e=>e.outs.updated.changed))&&e.update(null),this._modelBoundingBox=e.outs.boundingBox.value,(!this._isAutoZooming||this.ins.autoZoom.value&&!this._modelBoundingBox.isEmpty())&&(t.camera&&(n.camera.aspect=t.camera.aspect),t.camera=n.camera,t.zoomExtents(this._modelBoundingBox),n.ins.zoom.set(),this._hasZoomed=!0),this._isAutoZooming=!1}return e.autoRotation.changed&&(this._autoRotationStartTime=e.autoRotation.value?performance.now():null),!0}tick(){const e=this.ins,t=this._scene.activeCameraComponent;if(!e.enabled.value||!t)return;const n=this._controller;n.camera=t.camera;const r=t.transform,s=this.changed||e.autoRotation.value;if(e.autoRotation.value&&this._autoRotationStartTime){const t=performance.now(),r=t-this._autoRotationStartTime;n.orbit.y=(n.orbit.y+e.autoRotationSpeed.value*r*.001)%360,this._autoRotationStartTime=t}return!!n.updateCamera(r.object3D,s)&&(n.orbit.toArray(e.orbit.value),e.orbit.set(!0),n.offset.toArray(e.offset.value),e.offset.set(!0),e.preset.value===wm.None||e.preset.changed||e.preset.setValue(wm.None,!0),r?r.setPropertiesFromMatrix():t.setPropertiesFromMatrix(),!0)}preRender(e){this._modelBoundingBox&&e.viewport.zoomExtents(this._modelBoundingBox)}setChanged(e){this._hasChanged=e}tock(){return this._modelBoundingBox=null,!1}fromData(e){const t=(e=e||{}).orbit||{orbit:[-25,-25,0],offset:[0,0,100],minOrbit:[-90,-1/0,-1/0],minOffset:[-1/0,-1/0,.1],maxOrbit:[90,1/0,1/0],maxOffset:[1/0,1/0,1/0]};this.ins.copyValues({enabled:!!e.enabled,autoZoom:!!e.autoZoom,autoRotation:!!e.autoRotation,lightsFollowCamera:!!e.lightsFollowCamera,orbit:t.orbit,offset:t.offset,minOrbit:Tm(t.minOrbit,-1/0),maxOrbit:Tm(t.maxOrbit,1/0),minOffset:Tm(t.minOffset,-1/0),maxOffset:Tm(t.maxOffset,1/0)})}toData(){const e=this.ins,t={};return t.enabled=e.enabled.value,t.autoZoom=e.autoZoom.value,t.autoRotation=e.autoRotation.value,t.lightsFollowCamera=e.lightsFollowCamera.value,t.type="Orbit",t.orbit={orbit:e.orbit.cloneValue(),offset:e.offset.cloneValue(),minOrbit:e.minOrbit.cloneValue(),maxOrbit:e.maxOrbit.cloneValue(),minOffset:e.minOffset.cloneValue(),maxOffset:e.maxOffset.cloneValue()},t}getLightTransform(){const e=this.graph.findNodeByName("Lights");return e&&e.getComponent(Dr,!0)}onPointer(e){const t=e.viewport;t.camera||(this.ins.enabled.value&&this._scene.activeCameraComponent&&(this._controller.setViewportSize(t.width,t.height),this._controller.onPointer(e),e.stopPropagation=!0),this._hasChanged=!0)}onTrigger(e){const t=e.viewport;t.camera||(this.ins.enabled.value&&this._scene.activeCameraComponent&&(this._controller.setViewportSize(t.width,t.height),this._controller.onTrigger(e),e.stopPropagation=!0),this._hasChanged=!0)}onKeyboard(e){const t=e.viewport;t.camera||(this.ins.enabled.value&&this._scene.activeCameraComponent&&(e.key.includes("Arrow")&&(e.ctrlKey?this.ins.keyNavActive.setValue(xm.Zoom):e.shiftKey?this.ins.keyNavActive.setValue(xm.Pan):this.ins.keyNavActive.setValue(xm.Orbit)),this._controller.setViewportSize(t.width,t.height),this._controller.onKeypress(e)&&e.originalEvent.preventDefault(),e.stopPropagation=!0),this._hasChanged=!0)}onLoadingCompleted(e){!this.ins.autoZoom.value||this._hasChanged&&this._hasZoomed||(this.ins.zoomExtents.set(),this._isAutoZooming=!0)}}var Em;Cm.typeName="CVOrbitNavigation",Cm.text="Orbit Navigation",Cm.icon="",Cm.ins={enabled:O("Settings.Enabled",!0),pointerEnabled:O("Settings.PointerEnabled",!0),preset:N("Camera.ViewPreset",wm,wm.None),projection:N("Camera.Projection",od,od.Perspective),lightsFollowCamera:O("Navigation.LightsFollowCam",!0),autoRotation:O("Navigation.AutoRotation",!1),autoRotationSpeed:S("Navigation.AutoRotationSpeed",10),zoomExtents:B("Settings.ZoomExtents"),autoZoom:O("Settings.AutoZoom",!0),orbit:E("Current.Orbit",[-25,-25,0]),offset:E("Current.Offset",[0,0,100]),minOrbit:E("Limits.Min.Orbit",[-90,-1/0,-1/0]),minOffset:E("Limits.Min.Offset",[-1/0,-1/0,.1]),maxOrbit:E("Limits.Max.Orbit",[90,1/0,1/0]),maxOffset:E("Limits.Max.Offset",[1/0,1/0,1/0]),keyNavActive:N("Navigation.KeyNavActive",xm)},function(e){e[e.Solid=0]="Solid",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"}(Em||(Em={}));class km extends Qo{constructor(){super(new Lm,new Am),this.frustumCulled=!1,this.renderOrder=-1/0,this.matrixAutoUpdate=!1}dispose(){this.geometry.dispose(),this.material.dispose()}updateMatrixWorld(e){}}class Lm extends Ln{constructor(){super();const e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),t=new ua(e,5);this.setIndex([0,1,2,0,2,3]),this.setAttribute("position",new ma(t,3,0,!1)),this.setAttribute("uv",new ma(t,2,3,!1))}}class Am extends Iu{constructor(){super(...arguments),this.depthTest=!1,this.depthWrite=!1,this.transparent=!1,this.uniforms={style:{value:Em.LinearGradient},color0:{value:new he(.15,.2,.25)},color1:{value:new he(0,0,0)},noise:{value:.02}},this.vertexShader=["precision highp float;","attribute vec3 position;","attribute vec2 uv;","varying vec2 ndc;","void main() {","  ndc = position.xy;","  gl_Position = vec4(position, 1.0);","}"].join("\n"),this.fragmentShader=["precision highp float;","uniform vec3 color0;","uniform vec3 color1;","uniform float noise;","uniform int style;","varying vec2 ndc;","float rand(vec2 co) {","float dt = dot(co.xy ,vec2(12.9898, 78.233));","float sn = mod(dt, 3.14);","return fract(sin(sn) * 43758.5453);","}","void main() {","  float f = style == 0 ? 0.0 : (style == 1 ? ndc.y * 0.5 + 0.5 : length(ndc) * 0.707);","  gl_FragColor = vec4(mix(color0, color1, f) + noise * rand(ndc), 1.0);","}"].join("\n")}set style(e){this.uniforms.style.value=e}get style(){return this.uniforms.style.value}set color0(e){if(e instanceof un){const t=this.uniforms.color0.value;t.x=e.r,t.y=e.g,t.z=e.b}else this.uniforms.color0.value.copy(e)}get color0(){return this.uniforms.color0.value}set color1(e){if(e instanceof un){const t=this.uniforms.color1.value;t.x=e.r,t.y=e.g,t.z=e.b}else this.uniforms.color1.value.copy(e)}get color1(){return this.uniforms.color1.value}set noise(e){this.uniforms.noise.value=e}get noise(){return this.uniforms.noise.value}}class Dm extends Br{constructor(e,t){super(e,t),this.ins=this.addInputs(Dm.backgroundIns),this.object3D=new km}get background(){return this.object3D}update(e){super.update(e);const t=this.ins,n=this.background.material;return t.style.changed&&(n.style=t.style.getValidatedValue()),t.color0.changed&&n.color0.fromArray(t.color0.value),t.color1.changed&&n.color1.fromArray(t.color1.value),t.noise.changed&&(n.noise=t.noise.value),!0}dispose(){this.background.dispose(),super.dispose()}}Dm.typeName="CBackground",Dm.backgroundIns={style:N("Background.Style",Em,Em.RadialGradient),color0:D("Background.Color0",[.2,.25,.3]),color1:D("Background.Color1",[.01,.03,.05]),noise:S("Background.Noise",{min:0,max:1,bar:!0,preset:.02})};class Om extends Dm{constructor(e,t){super(e,t),this.background.layers.set(1)}get settingProperties(){return[this.ins.style,this.ins.color0,this.ins.color1]}get snapshotProperties(){return[this.ins.color0,this.ins.color1]}hide(){this.background.visible=!1}show(){this.background.visible=!0}fromData(e){this.ins.copyValues({style:Em[e.style]||Em.Solid,color0:e.color0||[.2,.25,.3],color1:e.color1||[.01,.03,.05]})}toData(){const e=this.ins;return{style:Em[e.style.value],color0:e.color0.cloneValue(),color1:e.color1.cloneValue()}}}Om.typeName="CVBackground";const Rm=n(3523).Z,Pm=n(2001).Z;class Nm extends Qo{constructor(){super(new eh(2,2,1,1),new Im),this.geometry.rotateX(-90*te),this.receiveShadow=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}class Im extends fc{constructor(e){super(e),this.defines={},this.type="FloorMaterial",this.isMeshPhongMaterial=!0,this.isFloorMaterial=!0,this.defines={},this.uniforms=ir.merge([ic.phong.uniforms]),this.vertexShader=Pm,this.fragmentShader=Rm,this.transparent=!0,this.shininess=0}}class zm extends Br{constructor(e,t){super(e,t),this.ins=this.addInputs(zm.floorIns),this.object3D=new Nm}get floor(){return this.object3D}update(e){super.update(e);const t=this.ins,n=this.floor;return(t.position.changed||t.radius.changed)&&(n.position.fromArray(t.position.value),n.scale.setScalar(t.radius.value),n.updateMatrix()),t.color.changed&&n.material.color.fromArray(t.color.value),t.opacity.changed&&(n.material.opacity=t.opacity.value),!0}dispose(){this.floor.dispose(),super.dispose()}}zm.typeName="CFloor",zm.floorIns={position:E("Floor.Position",[0,-25,0]),radius:S("Floor.Radius",50),color:D("Floor.Color",[.6,.75,.8]),opacity:C("Floor.Opacity",.5),castShadow:O("Shadow.Cast"),receiveShadow:O("Shadow.Receive")};const Bm=new he;class Fm extends zm{constructor(e,t){super(e,t),this.addIns=this.addInputs(Fm.floorAddIns),this.ins.visible.setValue(!1),this.ins.receiveShadow.setValue(!0),this.floor.renderOrder=-1}get settingProperties(){return[this.ins.visible,this.ins.position,this.ins.radius,this.ins.color,this.ins.opacity,this.ins.receiveShadow,this.addIns.autoSize]}get snapshotProperties(){return[this.ins.opacity]}get sceneNode(){return this.getSystemComponent(up)}create(){super.create(),this.sceneNode.outs.boundingBox.on("value",this.recalculateSize,this)}dispose(){this.sceneNode.outs.boundingBox.off("value",this.recalculateSize,this),super.dispose()}update(e){const t=this.addIns;return t.autoSize.changed&&t.autoSize.value&&this.recalculateSize(),super.update(e),!0}recalculateSize(){const{addIns:e}=this;if(e.autoSize.value){const e=this.sceneNode.outs.boundingBox.value;e.getSize(Bm);const t=Math.max(Bm.x,Bm.y,Bm.z),{min:n,max:r}=e;this.ins.radius.setValue(t),this.ins.position.setValue([(n.x+r.x)/2,n.y,(n.z+r.z)/2])}}fromData(e){e=e||{},this.ins.copyValues({visible:!!e.visible,position:e.position||[0,-25,0],radius:void 0!==e.size?e.size:50,color:e.color||[.6,.75,.8],opacity:void 0!==e.opacity?e.opacity:.5,receiveShadow:!!e.receiveShadow})}toData(){const e=this.ins;return{visible:e.visible.value,position:e.position.cloneValue(),size:e.radius.value,color:e.color.cloneValue(),opacity:e.opacity.value,receiveShadow:e.receiveShadow.value}}}Fm.typeName="CVFloor",Fm.text="Floor",Fm.icon="",Fm.floorAddIns={autoSize:O("Floor.AutoSize",!0)};class Hm extends Bn{constructor(e){super(Hm.generate(e),new hn({color:4294967295,vertexColors:!0}))}set opacity(e){this.material.opacity=e,this.material.transparent=e<1}update(e){this.geometry&&this.geometry.dispose(),this.geometry=Hm.generate(e)}static generate(e){const t=new un(e.mainColor),n=new un(e.subColor),r=e.mainDivisions*e.subDivisions,s=e.size/r,i=.5*e.size,o=[],a=[];for(let l=0,c=0,d=-i;l<=r;++l,d+=s){o.push(-i,0,d,i,0,d),o.push(d,0,-i,d,0,i);const r=l%e.subDivisions==0?t:n;r.toArray(a,c),c+=3,r.toArray(a,c),c+=3,r.toArray(a,c),c+=3,r.toArray(a,c),c+=3}const l=new Ln;return l.setAttribute("position",new _n(o,3)),l.setAttribute("color",new _n(a,3)),l}}const jm=new he,Um=new he,Ym=(new fe).makeRotationX(.5*Math.PI),Vm=new fe;class $m extends Br{constructor(){super(...arguments),this.ins=this.addInputs($m.gridIns),this.outs=this.addOutputs($m.gridOuts),this._lastViewport=null,this._gridProps={size:20,mainDivisions:2,subDivisions:10,mainColor:new un(.5,.7,.8),subColor:new un(.25,.35,.4)}}get settingProperties(){return[this.ins.visible,this.ins.color,this.ins.opacity]}get snapshotProperties(){return[this.ins.opacity]}get grid(){return this.object3D}create(){this.ins.pickable.setValue(!1),this.ins.visible.setValue(!1),super.create()}activate(){this.getGraphComponent(up).outs.boundingBox.linkTo(this.ins.boundingBox)}update(){const e=this.ins;if(e.color.changed||e.boundingBox.changed){const t=this._gridProps;if(e.color.changed){const n=t.mainColor,r=t.subColor;n.fromArray(e.color.value),r.r=.5*n.r,r.g=.5*n.g,r.b=.5*n.b}if(e.boundingBox.changed){const e=this.getGraphComponent(up),n=e.outs.boundingBox.value,r=e.ins.units.value;n.getSize(jm);let s=Math.max(jm.x,jm.y,jm.z),i=1;for(;s/i>5;)i*=10;s=Math.ceil(s/i)*i*2,t.size=s,this.outs.size.setValue(s),this.outs.units.setValue(r),t.mainDivisions=s/i,t.subDivisions=10,Um.set(0,n.min.y,0)}this.object3D?this.grid.update(t):this.object3D=new Hm(t),e.boundingBox.changed&&(this.grid.position.copy(Um),this.grid.updateMatrix())}return e.visible.changed&&(this.grid.visible=e.visible.value),e.opacity.changed&&(this.grid.opacity=e.opacity.value),!0}preRender(e){const t=e.viewport,n=this.object3D;if(t!==this._lastViewport){this._lastViewport=t;const r=e.viewport.camera;r?n.matrix.extractRotation(r.matrixWorld).multiply(Ym):n.matrix.extractRotation(Vm),n.updateMatrixWorld(!0)}}postRender(e){this.object3D.matrix.extractRotation(Vm)}fromData(e){e=e||{},this.ins.copyValues({visible:!!e.visible,color:e.color||[.5,.7,.8]})}toData(){const e=this.ins;return{visible:e.visible.cloneValue(),color:e.color.cloneValue()}}}$m.typeName="CVGrid",$m.text="Grid",$m.icon="",$m.gridIns={color:D("Grid.Color",[.5,.7,.8]),opacity:C("Grid.Opacity",1),boundingBox:z("Scene.BoundingBox",Me)},$m.gridOuts={size:S("Size"),units:N("Units",Ed)};class Wm extends Ln{constructor(e=[new mn(0,-.5),new mn(.5,0),new mn(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=se(r,0,2*Math.PI);const s=[],i=[],o=[],a=[],l=[],c=1/t,d=new he,u=new mn,h=new he,m=new he,p=new he;let f=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:f=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-f,h.z=0*g,p.copy(h),h.normalize(),a.push(h.x,h.y,h.z);break;case e.length-1:a.push(p.x,p.y,p.z);break;default:f=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-f,h.z=0*g,m.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),a.push(h.x,h.y,h.z),p.copy(m)}for(let s=0;s<=t;s++){const h=n+s*c*r,m=Math.sin(h),p=Math.cos(h);for(let n=0;n<=e.length-1;n++){d.x=e[n].x*m,d.y=e[n].y,d.z=e[n].x*p,i.push(d.x,d.y,d.z),u.x=s/t,u.y=n/(e.length-1),o.push(u.x,u.y);const r=a[3*n+0]*m,c=a[3*n+1],h=a[3*n+0]*p;l.push(r,c,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,i=r,o=r+e.length,a=r+e.length+1,l=r+1;s.push(i,o,l),s.push(a,l,o)}this.setIndex(s),this.setAttribute("position",new _n(i,3)),this.setAttribute("uv",new _n(o,2)),this.setAttribute("normal",new _n(l,3))}static fromJSON(e){return new Wm(e.points,e.segments,e.phiStart,e.phiLength)}}class Gm extends Ia{constructor(){super();const e=new xo({color:"white",metalness:1});e.transparent=!0;const t=new Qo(this.createLatheGeometry([0,0,.25,.4,.4,10]),e),n=new xo({color:"#ffcd00",roughness:.8,metalness:.1});n.transparent=!0;const r=new Qo(this.createLatheGeometry([0,10,3.4,10,3.5,10.1,3.5,11,3.45,11.1,2.05,12.5,2,12.6,2,17.4,2.05,17.5,3.45,18.9,3.5,19,3.5,19.9,3.4,20,0,20]),n);t.matrixAutoUpdate=!1,this.add(t),r.matrixAutoUpdate=!1,this.add(r)}dispose(){}createLatheGeometry(e){const t=[];for(let n=0,r=e.length;n<r;n+=2)t.push(new mn(e[n],e[n+1]));return new Wm(t,16)}}function qm(e,t,n){return Math.min(Math.max(e,t),n)}function Xm(e,t){var n=new fe,r=new fe;n.identity();do{r.compose(t.position,t.quaternion,t.scale),n.multiply(r.invert()),t=t.parent}while(e!==t);return n}const Km=new tt,Jm=new he,Zm=new he,Qm=new he(0,1,0);var ep;!function(e){e[e.SetStart=0]="SetStart",e[e.SetEnd=1]="SetEnd"}(ep||(ep={}));class tp extends Br{constructor(e,t){super(e,t),this.ins=this.addInputs(tp.tapeIns),this.outs=this.addOutputs(tp.tapeOuts),this.startPin=null,this.endPin=null,this.line=null,this.object3D=new Ia,this.startPin=new Gm,this.startPin.matrixAutoUpdate=!1,this.startPin.visible=!1,this.endPin=new Gm,this.endPin.matrixAutoUpdate=!1,this.endPin.visible=!1;const n=[];n.push(new he(0,0,0)),n.push(new he(0,0,0));const r=(new Ln).setFromPoints(n),s=new hn;s.depthTest=!1,s.transparent=!0,this.line=new Nn(r,s),this.line.visible=!1,this.object3D.add(this.startPin,this.endPin,this.line)}get settingProperties(){return[this.ins.visible]}get snapshotProperties(){return[this.ins.visible,this.ins.startPosition,this.ins.startDirection,this.ins.endPosition,this.ins.endDirection]}create(){super.create();const e=this.getGraphComponent(up);this.ins.boundingBox.linkFrom(e.outs.boundingBox),this.ins.globalUnits.linkFrom(e.ins.units)}dispose(){this.startPin=null,this.endPin=null,this.line=null,super.dispose()}update(e){const t=this.line.geometry,{startPin:n,endPin:r,line:s,ins:i}=this;if(i.enabled.changed&&i.visible.setValue(i.enabled.value),super.update(e),i.boundingBox.changed&&i.boundingBox.value){i.boundingBox.value.getSize(Jm);const e=.5*Jm.length();n.scale.setScalar(.003*e),n.updateMatrix(),r.scale.setScalar(.003*e),r.updateMatrix()}if(i.enabled.changed&&(i.enabled.value?this.system.on("pointer-up",this.onPointerUp,this):this.system.off("pointer-up",this.onPointerUp,this)),i.visible.changed&&i.visible.value){const e=i.startPosition.value,t=i.endPosition.value;e[0]!=t[0]&&e[1]!=t[1]&&e[2]!=t[2]&&(n.visible=!0,r.visible=!0,s.visible=!0)}if(i.globalUnits.changed&&this.updateUnitScale(),i.startPosition.changed||i.startDirection.changed){n.position.fromArray(i.startPosition.value),Jm.fromArray(i.startDirection.value),n.quaternion.setFromUnitVectors(Qm,Jm),n.updateMatrix();const e=t.attributes.position.array;e[0]=n.position.x,e[1]=n.position.y,e[2]=n.position.z,t.attributes.position.needsUpdate=!0}if(i.endPosition.changed||i.endDirection.changed){r.position.fromArray(i.endPosition.value),Jm.fromArray(i.endDirection.value),r.quaternion.setFromUnitVectors(Qm,Jm),r.updateMatrix();const e=t.attributes.position.array;e[3]=r.position.x,e[4]=r.position.y,e[5]=r.position.z,t.attributes.position.needsUpdate=!0}return Jm.fromArray(i.startPosition.value),Zm.fromArray(i.endPosition.value),this.outs.distance.setValue(Jm.distanceTo(Zm)),!0}fromData(e){this.ins.copyValues({visible:e.enabled})}toData(){return{enabled:this.ins.visible.cloneValue()}}onPointerUp(e){if(e.isDragging||!e.component||!e.component.is(Tp))return;const t=e.component,n=Xm(t.object3D,e.object3D),r=t.localBoundingBox.clone().applyMatrix4(n),s=e.object3D.matrixWorld;Km.getNormalMatrix(s);const i=e.view.pickPosition(e,r).applyMatrix4(s),o=e.view.pickNormal(e).applyMatrix3(Km).normalize(),{startPin:a,endPin:l,line:c,ins:d,outs:u}=this;u.state.value===ep.SetStart?(i.toArray(d.startPosition.value),o.toArray(d.startDirection.value),d.startPosition.set(),d.startDirection.set(),a.visible=!0,l.visible=!1,c.visible=!1,u.state.setValue(ep.SetEnd)):(i.toArray(d.endPosition.value),o.toArray(d.endDirection.value),d.endPosition.set(),d.endDirection.set(),a.visible=!0,l.visible=!0,c.visible=!0,u.state.setValue(ep.SetStart))}updateUnitScale(){const e=this.ins,t=e.localUnits.getValidatedValue(),n=e.globalUnits.getValidatedValue();this.outs.unitScale.setValue(Hd(t,n)),Jm.fromArray(e.startPosition.value),e.startPosition.setValue(Jm.multiplyScalar(this.outs.unitScale.value).toArray()),Jm.fromArray(e.endPosition.value),e.endPosition.setValue(Jm.multiplyScalar(this.outs.unitScale.value).toArray()),e.localUnits.setValue(n)}}tp.typeName="CVTape",tp.text="Tape",tp.icon="",tp.tapeIns={startPosition:E("Start.Position"),startDirection:E("Start.Direction"),endPosition:E("End.Position"),endDirection:E("End.Direction"),boundingBox:z("Scene.BoundingBox",Me),globalUnits:N("Model.GlobalUnits",Ed,Ed.cm),localUnits:N("Model.LocalUnits",Ed,Ed.cm),enabled:O("Tape.Enabled",!1)},tp.tapeOuts={state:N("Tape.State",ep),distance:S("Tape.Distance"),unitScale:S("UnitScale",{preset:1,precision:5})};const np=[[-1,0,0,0],[0,-1,0,0],[0,0,-1,0],[1,0,0,0],[0,1,0,0],[0,0,1,0]];class rp extends W{constructor(){super(...arguments),this.ins=this.addInputs(rp.ins),this.plane=null,this.axisIndex=-1}get settingProperties(){return[this.ins.enabled]}get snapshotProperties(){return[this.ins.enabled,this.ins.axis,this.ins.position,this.ins.inverted]}create(){super.create();const e=this.getGraphComponent(up);this.ins.boundingBox.linkFrom(e.outs.boundingBox)}update(e){const t=this.ins;if(t.axis.changed){const e=t.axis.getValidatedValue();e===this.axisIndex?t.inverted.setValue(!t.inverted.value):(t.inverted.setValue(!1),this.axisIndex=e)}if(!t.enabled.value&&!t.enabled.changed)return!1;const n=t.axis.getValidatedValue(),r=t.inverted.value,s=n+(r?3:0),i=this.ins.boundingBox.value;if(!i)return!0;this.plane=np[s];const o=i.min.getComponent(n),a=i.max.getComponent(n),l=1-t.position.value;this.plane[3]=r?l*(a-o)-a:a-l*(a-o);return this.getGraphComponents(Tp).forEach((e=>{e.object3D.traverse((e=>{if(e.isMesh){const t=e.material;t.isUberPBRMaterial&&this.updateMaterial(t)}}))})),!0}fromData(e){e=e||{},this.ins.setValues({enabled:e.enabled||!1,axis:dc[e.axis]||dc.X,position:e.position||0,inverted:e.inverted||!1})}toData(){const e=this.ins;return{enabled:e.enabled.value,axis:dc[e.axis.getValidatedValue()],position:e.position.value,inverted:e.inverted.value}}updateMaterial(e){const t=this.ins;t.enabled.changed&&(e.enableCutPlane(t.enabled.value),e.needsUpdate=!0),e.cutPlaneDirection.fromArray(this.plane),e.cutPlaneColor.fromArray(t.color.value)}}rp.typeName="CVSlicer",rp.text="Slicer",rp.icon="",rp.ins={enabled:O("Slice.Enabled"),axis:N("Slice.Axis",dc),position:S("Slice.Position",{min:0,max:1,preset:.5}),inverted:O("Slice.Inverted"),color:D("Slice.Color",[0,.61,.87]),boundingBox:z("Scene.BoundingBox",Me)};class sp extends Gi{constructor(){super(...arguments),this.targetFeatures={}}create(){super.create();const e=this.getGraphComponent(cp);Object.keys(e.featureMap).forEach((e=>{this.targetFeatures[e]=!1})),this.targetFeatures.models=!1,this.targetFeatures.lights=!1,this.initializeTargetFeatures()}initializeTargetFeatures(){const e=this.targetFeatures;Object.keys(e).forEach((t=>e[t]=!1)),e.navigation=!0,e.reader=!0,this.updateTargets()}updateTargets(){const e=this.targetFeatures,t=this.getGraphComponent(cp);Object.keys(e).forEach((n=>{const r=t[n],s=e[n];r&&this.updateComponentTarget(r,s)}));this.getGraphComponents(Tp).forEach((t=>{this.updateComponentTarget(t.transform,!!e.models),this.updateComponentTarget(t,!!e.models)}));this.getGraphComponents(vd).forEach((t=>this.updateComponentTarget(t,!!e.lights)))}updateComponentTarget(e,t){const n=e.snapshotProperties;n&&n.forEach((e=>{if(!e.schema.event&&"object"!==e.type){const n=this.hasTargetProperty(e);t&&!n?this.addTargetProperty(e):!t&&n&&this.removeTargetProperty(e)}}))}fromData(e,t){this.clear();const n=this.targetFeatures,r=Object.keys(n);e.features?r.forEach((t=>n[t]=e.features.indexOf(t)>=0)):this.initializeTargetFeatures();const s=new Set;e.targets.forEach(((e,n)=>{const r=e.lastIndexOf("/"),i=e.substr(0,r),o=e.substr(r+1),a=t.get(i),l=a?a.ins[o]:null;l?this.addTargetProperty(l):(console.warn(`missing snapshot target property for '${e}'`),s.add(n))})),e.states.forEach((e=>{this.setState({id:e.id,curve:void 0!==e.curve?$i[e.curve]:$i.EaseQuad,duration:void 0!==e.duration?e.duration:2,threshold:void 0!==e.threshold?e.threshold:.5,values:e.values.filter(((e,t)=>!s.has(t)))})}))}toData(e){const t=this.targetFeatures,n={features:Object.keys(t).filter((e=>t[e])),targets:this.targets.map((t=>{const n=t.property.group.linkable,r=t.property.key,s=e.get(n);if(!s)throw new Error(`snapshot path not registered for component '${n.displayName}'`);return s+"/"+r})),states:Object.keys(this.states).map((e=>{const t=this.states[e],n={id:t.id,values:t.values};return t.curve!==$i.EaseQuad&&(n.curve=$i[t.curve]),2!==t.duration&&(n.duration=t.duration),.5!==t.threshold&&(n.threshold=t.threshold),n}))};return n.targets.length>0&&n.states.length>0?n:null}}sp.typeName="CVSnapshots";class ip extends W{constructor(){super(...arguments),this.ins=this.addInputs(ip.ins),this.outs=this.addOutputs(ip.outs),this._tours=[]}get analytics(){return this.getMainComponent(Xi)}get language(){return this.getGraphComponent(Dd)}get setup(){return this.getGraphComponent(cp)}get snapshots(){return this.getComponent(sp)}get tours(){return this._tours}get activeSteps(){const e=this.activeTour;return e?e.steps:null}get activeTour(){return this._tours[this.outs.tourIndex.value]}get activeStep(){const e=this.activeTour;return e?e.steps[this.outs.stepIndex.value]:null}get title(){const e=this.activeTour;return 0===Object.keys(e.titles).length&&(e.titles.EN=e.title),e.titles[kd[this.language.outs.language.value]]||"undefined"}set title(e){this.activeTour.titles[kd[this.language.outs.language.value]]=e}get lead(){const e=this.activeTour;return 0===Object.keys(e.leads).length&&(e.leads.EN=e.lead),e.leads[kd[this.language.outs.language.value]]||""}set lead(e){this.activeTour.leads[kd[this.language.outs.language.value]]=e}get taglist(){const e=this.activeTour;return 0===Object.keys(e.taglist).length&&e.tags.length>0&&(e.taglist.EN=e.tags),e.taglist[kd[this.language.outs.language.value]]||[]}set taglist(e){this.activeTour.taglist[kd[this.language.outs.language.value]]=e}get stepTitle(){const e=this.activeStep;return e?(0===Object.keys(e.titles).length&&(e.titles.EN=e.title),e.titles[kd[this.language.outs.language.value]]||"undefined"):null}set stepTitle(e){const t=this.activeStep;t&&(t.titles[kd[this.language.outs.language.value]]=e)}create(){super.create(),this.language.outs.language.on("value",this.update,this)}dispose(){this.language.outs.language.off("value",this.update,this),super.dispose()}update(e){const{ins:t,outs:n}=this,r=this._tours,s=this.snapshots,i=this.setup.navigation;if(t.enabled.changed){if(!t.enabled.value)return n.tourIndex.set(),s.tweenTo(ip.sceneSnapshotId,e.secondsElapsed),s.deleteState(ip.sceneSnapshotId),!0;{const e={id:ip.sceneSnapshotId,curve:$i.EaseOutQuad,duration:1,threshold:0,values:s.getCurrentValues()};s.setState(e)}}const o=Math.min(r.length-1,Math.max(-1,t.tourIndex.value)),a=r[o],l=a?a.steps.length:0;n.stepCount.setValue(l);let c=-1;if((t.tourIndex.changed||t.enabled.changed)&&(o!==n.tourIndex.value&&(c=0),n.tourIndex.setValue(o),n.tourTitle.setValue(a?this.title:""),n.tourLead.setValue(a?this.lead:"")),0===l)return n.stepIndex.setValue(-1),n.stepTitle.setValue(""),!0;let d=!0;if(t.enabled.changed&&(c=n.stepIndex.value),t.stepIndex.changed&&(c=Math.min(a.steps.length-1,Math.max(0,t.stepIndex.value)),d=!1),t.first.changed&&(c=0),t.next.changed&&(c=n.stepIndex.value+1,c>=l&&(n.ending.setValue(!0),n.tourIndex.setValue(-1),n.tourTitle.setValue(""),n.tourLead.setValue(""),n.stepIndex.set(),c=-1)),t.previous.changed&&(c=(n.stepIndex.value+l-1)%l),c>=0){i.setChanged(!0);const e=a.steps[c];n.stepIndex.setValue(c),n.stepTitle.setValue(this.stepTitle||"undefined"),s.ins.id.setValue(e.id),d?s.ins.tween.set():s.ins.recall.set()}return!0}fromData(e){this._tours=e.map((e=>({title:e.title,titles:e.titles||{},steps:e.steps.map((e=>({title:e.title,titles:e.titles||{},id:e.id}))),lead:e.lead||"",leads:e.leads||{},tags:e.tags||[],taglist:e.taglist||{}}))),this._tours.forEach((e=>{Object.keys(e.titles).forEach((e=>{this.language.addLanguage(kd[e])})),e.steps.forEach((e=>{0==Object.keys(e.titles).length&&(e.titles.EN=e.title||null)}))})),this.ins.tourIndex.setValue(-1),this.outs.count.setValue(this._tours.length)}toData(){return 0===this._tours.length?null:this._tours.map((e=>{const t={steps:e.steps.map((e=>{const t={};return t.id=e.id,Object.keys(e.titles).length>0?t.titles=e.titles:e.title&&(t.title=e.title),t}))};return Object.keys(e.titles).length>0?t.titles=e.titles:e.title&&(t.title=e.title),Object.keys(e.leads).length>0?t.leads=e.leads:e.lead&&(t.lead=e.lead),Object.keys(e.taglist).length>0?t.taglist=e.taglist:e.tags.length>0&&(t.tags=e.tags),t}))}}ip.typeName="CVTours",ip.sceneSnapshotId="scene-default",ip.ins={enabled:O("Tours.Enabled"),tourIndex:T("Tours.Index",-1),closed:B("Tours.Closed"),stepIndex:T("Step.Index"),next:B("Step.Next"),previous:B("Step.Previous"),first:B("Step.First")},ip.outs={count:T("Tours.Count"),tourIndex:T("Tour.Index",-1),tourTitle:R("Tour.Title"),tourLead:R("Tour.Lead"),stepCount:T("Tour.Steps"),ending:O("Tour.Ending"),stepIndex:T("Step.Index"),stepTitle:R("Step.Title")};const op=["Footprint_Court_1k_TMap.jpg","spruit_sunrise_1k_LDR.jpg","campbell_env.jpg"];class ap extends W{constructor(){super(...arguments),this.ins=this.addInputs(ap.envIns),this._texture=null,this._currentIdx=0,this.shouldUseEnvMap=!1}get assetReader(){return this.getMainComponent(Nc)}update(){const e=this.ins,t=this.getGraphComponent(up);return e.dirty.changed&&(this.shouldUseEnvMap=!1,t.models.forEach((t=>{t.object3D.traverse((t=>{const n=t.material;n&&n.isUberPBRMaterial&&(n.roughnessMap||n.metalnessMap)&&(this.shouldUseEnvMap=!0,null!==this._texture&&(this._texture.dispose(),this._texture=null),e.imageIndex.set())}))}))),e.imageIndex.changed&&this.shouldUseEnvMap&&(e.imageIndex.value==this._currentIdx&&null!==this._texture||(null!==this._texture&&this._texture.dispose(),this.assetReader.getSystemTexture("images/"+op[e.imageIndex.value]).then((e=>{t.models.forEach((t=>{t.object3D.traverse((t=>{const n=t.material;"Group"!==t.type&&n&&n.isUberPBRMaterial&&(this._texture=e,this._texture.mapping=_t,n.envMap=this._texture,n.needsUpdate=!0)}))}))})),this._currentIdx=e.imageIndex.value)),!0}fromData(e){this.ins.copyValues({imageIndex:e.index})}toData(){return{index:this.ins.imageIndex.cloneValue()}}}ap.typeName="CVEnvironment",ap.text="Environment",ap.envIns={imageIndex:T("Environment.Index",{preset:0,options:op.map((function(e,t){return t.toString()}))}),dirty:B("Environment.Dirty")};class lp extends W{constructor(){super(...arguments),this._narrationId=null,this.audioClips={},this.audioPlayer=null,this.isPlaying=!1,this.ins=this.addInputs(lp.ins),this.outs=this.addOutputs(lp.outs),this.onEnd=()=>{const{outs:e}=this;this.isPlaying=!1,e.narrationPlaying.setValue(!1)}}get assetManager(){return this.getMainComponent(Zi)}get language(){return this.getGraphComponent(Dd,!0)}get narrationId(){return this._narrationId||""}set narrationId(e){this._narrationId=e,this.outs.narrationEnabled.setValue(e.length>0)}create(){super.create(),this.graph.components.on(Od,this.onMetaComponent,this)}dispose(){this.graph.components.off(Od,this.onMetaComponent,this),super.dispose()}update(){const{ins:e,outs:t}=this;return e.playNarration.changed&&this.audioPlayer&&this._narrationId&&(this.isPlaying?this.stop():this.play(this._narrationId)),!0}getAudioList(){return Object.keys(this.audioClips).map((e=>this.audioClips[e]))}getAudioClip(e){return this.audioClips[e]}addAudioClip(e){this.audioClips[e.id]=e}removeAudioClip(e){e==this._narrationId&&(this.isPlaying&&this.stop(),this.narrationId=""),delete this.audioClips[e]}onMetaComponent(e){const t=e.object;"NVScene"===t.node.typeName&&e.add&&(this.audioClips=t.audio.dictionary,t.once("load",(()=>{this.audioClips=t.audio.dictionary})))}fromData(e){const{outs:t}=this;e=e||{},this._narrationId=e.narrationId||null,t.narrationEnabled.setValue(null!=this._narrationId),this.audioClips[this._narrationId]||(t.narrationEnabled.setValue(!1),console.warn("Invalid narration audio ID"))}toData(){let e=null;return null!==this._narrationId&&(e={narrationId:this._narrationId}),e}play(e){if(!this.audioPlayer)return void zi.show("Error - Audio Player not initialized.","error");const{outs:t}=this,n=this.audioClips[e].uris[kd[this.language.outs.language.getValidatedValue()]];this.audioPlayer.setAttribute("src",this.assetManager.getAssetUrl(n)),this.audioPlayer.play().then((()=>{this.isPlaying=!0,t.narrationPlaying.setValue(!0)})).catch((e=>zi.show(`Failed to play audio at '${this.audioPlayer.getAttribute("src")}':${e}`,"warning")))}stop(){this.audioPlayer.pause(),this.audioPlayer.currentTime=0,this.onEnd()}setupAudio(){null===this.audioPlayer&&(this.audioPlayer=document.createElement("audio"),this.audioPlayer.onended=this.onEnd)}}lp.typeName="CVAudioManager",lp.text="Audio",lp.icon="",lp.isSystemSingleton=!0,lp.ins={playNarration:B("Audio.PlayNarration")},lp.outs={narrationEnabled:O("Audio.NarrationEnabled",!1),narrationPlaying:O("Audio.NarrationPlaying",!1)};class cp extends W{constructor(){super(...arguments),this._savedSetupData={},this.ins=this.addInputs(cp.ins)}get featureMap(){return this.constructor.featureMap}get transform(){return this.getComponent(Dr)}create(){super.create();const e=this.node,t=cp.featureMap;for(const n in t)this[n]=e.createComponent(t[n]);this.snapshots=e.createComponent(sp)}update(){const e=this.ins;return e.saveState.changed&&this.cacheSetupState(),e.restoreState.changed&&this.restoreSetupState(),!0}fromDocument(e,t,n){const r=e.scenes[t];if(!isFinite(r.setup))throw new Error("setup property missing in node");const s=this._savedSetupData=e.setups[r.setup],i=cp.featureMap;for(const e in i){n.set(`scenes/${t}/setup/${e}`,this[e]);const r=s[e];r&&this[e].fromData(r)}}toDocument(e,t,n){const r=this._savedSetupData,s=cp.featureMap;for(const e in s)n.set(this[e],`scenes/${t}/setup/${e}`);const i=this.tours.toData();i&&(r.tours=i);const o=this.snapshots.toData(n);if(o&&(r.snapshots=o),r){e.setups=e.setups||[];const n=e.setups.length;e.setups.push(r),e.scenes[t].setup=n}}cacheSetupState(){const e=cp.featureMap;for(const t in e){const e=this[t].toData();e&&(this._savedSetupData[t]=e)}}restoreSetupState(){const e=this._savedSetupData,t=cp.featureMap;for(const n in t){const t=e[n];t&&"tours"!==n&&this[n].fromData(t)}}}cp.typeName="CVSetup",cp.ins={saveState:B("Setup.SaveState"),restoreState:B("Setup.RestoreState")},cp.featureMap={interface:sm,reader:ru,viewer:im,navigation:Cm,background:Om,environment:ap,language:Dd,floor:Fm,grid:$m,tape:tp,slicer:rp,tours:ip,audio:lp};const dp=new he;class up extends Zc{constructor(){super(...arguments),this.ins=this.addInputs(up.ins),this.outs=this.addOutputs(up.outs),this.updateCameraHelper=()=>{const e=this.setup.navigation.ins.offset.value,t=dp.set(e[0],e[1],e[2]).length();if(!this.system.getComponent("CVStoryApplication",!0)){const e=2.5*Math.max(t,this.outs.boundingRadius.value),n=this.setup.navigation.ins.maxOffset.value;this.setup.navigation.ins.maxOffset.setValue([n[0],n[1],e])}this.cameras.forEach((e=>{const n=4*Math.max(t,this.outs.boundingRadius.value),r=Math.min(n/1e3,this.outs.boundingRadius.value/100);(n<e.ins.far.value||e.ins.far.value<2*this.setup.navigation.ins.maxOffset.value[2])&&(e.ins.far.setValue(n),e.ins.near.setValue(r))}))}}get settingProperties(){return null}get snapshotProperties(){return null}get models(){return this.getGraphComponents(Tp)}get cameras(){return this.getGraphComponents(pd)}get setup(){return this.getGraphComponent(cp)}get renderer(){return this.getMainComponent(_r)}create(){super.create(),this.outs.boundingBox.setValue(new Me),this.graph.components.on(Tp,this.onModelComponent,this),this.models.forEach((e=>{e.ins.globalUnits.linkFrom(this.ins.units),this.ins.modelUpdated.linkFrom(e.outs.updated)}))}update(e){const t=this.ins,n=this.outs;return t.units.changed&&(this.updateTransformHierarchy(),this.updateModelBoundingBox(),this.updateLights(),this.updateCameras(),n.units.setValue(t.units.value)),t.modelUpdated.changed&&(this.updateModelBoundingBox(),this.updateLights(),this.updateCameras()),t.sceneTransformed.changed&&this.updateModelBoundingBox(),!0}dispose(){this.graph.components.off(Tp,this.onModelComponent,this),super.dispose()}fromDocument(e,t){this.ins.units.setValue(Ed[t.units]||0),this.outs.units.setValue(Ed[t.units]||0)}toDocument(e,t){t.units=Ed[this.ins.units.getValidatedValue()]}onModelComponent(e){const t=e.object;e.add&&(t.ins.globalUnits.linkFrom(this.ins.units),this.ins.modelUpdated.linkFrom(t.outs.updated)),this.updateModelBoundingBox()}updateModelBoundingBox(){const e=this.outs.boundingBox.value;e.makeEmpty(),this.models.forEach((t=>e.expandByObject(t.object3D))),e.getSize(dp),this.outs.boundingBox.set(),this.outs.boundingRadius.setValue(.5*dp.length())}updateTransformHierarchy(){if(0===this.models.length)return;const{ins:e,outs:t}=this,n=Hd(t.units.value,e.units.value),r=this.models[0].object3D.parent.parent;r.position.multiplyScalar(n),r.updateMatrix(),r.updateMatrixWorld(!0),this.models.forEach((e=>{const t=e.object3D.parent;t.position.multiplyScalar(n),t.updateMatrix(),t.updateMatrixWorld(!0)}))}updateLights(){const{ins:e,outs:t}=this,n=this.graph.findNodeByName("Lights");if(n){const r=n.getComponent(Dr,!0),s=Hd(t.units.value,e.units.value);dp.setScalar(this.outs.boundingRadius.value*s*.05),r.ins.scale.setValue(dp.toArray()),r.object3D.updateMatrixWorld(!0)}}updateCameras(){this.renderer.views[0].renderer.xr.isPresenting||this.updateCameraHelper()}}up.typeName="CVScene",up.text="Scene",up.icon="hierarchy",up.ins={units:N("Scene.Units",Ed,Ed.cm),modelUpdated:B("Scene.ModelUpdated"),sceneTransformed:B("Scene.Transformed")},up.outs={units:N("Scene.Units",Ed,Ed.cm),boundingBox:z("Models.BoundingBox",Me),boundingRadius:S("Models.BoundingRadius")};class hp extends Qt{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new un(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class mp extends ss{constructor(e,t,n){super(),this.shadowMaterial=new hp,this.boundingBox=new Me,this.size=new he,this.isAnimated=!1,this.needsUpdate=!1,this.intensity=0,this.castShadow=!0,this.frustumCulled=!1,this.floor=new Qo(new eh,this.shadowMaterial),this.floor.rotateX(-Math.PI/2),this.floor.receiveShadow=!0,this.floor.castShadow=!1,this.floor.frustumCulled=!1,this.add(this.floor),this.shadow.camera.up.set(0,0,1),t.add(this),this.target=t,this.setModel(e,n)}setModel(e,t){this.boundingBox.copy(e.outs.boundingBox.value),e.outs.boundingBox.value.getSize(this.size);const{boundingBox:n,size:r}=this;if(this.isAnimated){const e=2*Math.max(r.x,r.y,r.z);r.y=e,n.expandByVector(r.subScalar(e).multiplyScalar(-.5)),n.max.y=n.min.y+e,r.set(e,e,e)}const s=.001*r.y;this.position.y=n.max.y+s,n.getCenter(this.floor.position),this.setSoftness(t)}setSoftness(e){const t=Math.pow(2,9-3*e);this.setMapSize(t)}setMapSize(e){const{camera:t,mapSize:n,map:r}=this.shadow,{size:s,boundingBox:i}=this;null!=r&&(r.dispose(),this.shadow.map=null),this.isAnimated&&(e*=2);const o=Math.floor(s.x>s.z?e:e*s.x/s.z),a=Math.floor(s.x>s.z?e*s.z/s.x:e);n.set(o,a);const l=2.5*s.x/o,c=2.5*s.z/a;t.left=-i.max.x-l,t.right=-i.min.x+l,t.bottom=i.min.z-c,t.top=i.max.z+c,this.setScaleAndOffset(t.zoom,0),this.shadow.updateMatrices(this),this.floor.scale.set(s.x+2*l,s.z+2*c,1),this.needsUpdate=!0}setIntensity(e){this.shadowMaterial.opacity=e,e>0?(this.visible=!0,this.floor.visible=!0):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.shadowMaterial.opacity}setRotation(e){this.shadow.camera.up.set(Math.sin(e),0,Math.cos(e)),this.shadow.updateMatrices(this)}setScaleAndOffset(e,t){const n=this.size.y,r=1/e,s=.001*n;this.floor.position.y=2*s-n+t*r;const{camera:i}=this.shadow;i.zoom=e,i.near=0,i.far=n*e-t,i.projectionMatrix.makeOrthographic(i.left*e,i.right*e,i.top*e,i.bottom*e,i.near,i.far),i.projectionMatrixInverse.copy(i.projectionMatrix).invert(),this.shadow.updateMatrices(this)}updateMatrices(){this.shadow.updateMatrices(this)}dispose(){const{floor:e,shadowMaterial:t}=this;e.geometry.dispose(),t.dispose(),this.floor=null,this.shadowMaterial=null}}const pp=new fe,fp=new he,gp=new he,vp=new Me,yp=new ue;class _p extends W{constructor(){super(...arguments),this._shadowRoot=null,this.ins=this.addInputs(_p.ins),this.outs=this.addOutputs(_p.outs),this.arLink=document.createElement("a"),this.raycaster=new Ju,this.initialHitTestSource=null,this.inputSource=null,this.transientHitTestSource=null,this.refSpace=null,this.frame=null,this.vScene=null,this.camera=null,this.cameraParent=null,this.cachedView=null,this.cachedQuality=null,this.cachedNearPlane=0,this.cachedFarPlane=0,this.xrCamera=null,this.hitPlane=null,this.selectionRing=null,this.session=null,this.setup=null,this.originalUnits=null,this.isTranslating=!1,this.isRotating=!1,this.isScaling=!1,this.lastDragValueX=0,this.lastDragValueY=0,this.totalDrag=0,this.lastScale=0,this.lastHitPosition=new he,this.lastFrameTime=0,this.targetOpacity=0,this.modelFloorOffset=0,this.optimalCameraDistance=0,this.shadow=null,this.lightTransform=null,this.lightsToReset=[],this.featuresToReset=[],this.annotationsAtLaunch=!1,this.onSessionEnded=()=>{this.outs.isPresenting.setValue(!1);const e=this.renderer.views[0].renderer;this.resetScene(),e.shadowMap.autoUpdate=!0;const t=this.initialHitTestSource;null!=t&&(t.cancel(),this.initialHitTestSource=null);const n=this.transientHitTestSource;null!=n&&(n.cancel(),this.transientHitTestSource=null),this.refSpace=null,this.frame=null,this.inputSource=null,this.xrCamera=null,this.cachedView=null,this.vScene=null,this.cachedView=null,this.camera=null;const r=this.session;r&&(r.removeEventListener("end",this.onSessionEnded),r.removeEventListener("selectstart",this.onSelectStart),r.removeEventListener("selectend",this.onSelectEnd),this.session=null),this.setup.reader.ins.enabled.off("value",this.endSession,this),e.setAnimationLoop(null),e.xr.enabled=!1,this.outs.isPlaced.setValue(!1),this.setup.navigation.ins.enabled.setValue(!0),this.renderer.views[0].render()},this.render=(e,t)=>{this.frame=t;const n=this.renderer.views[0].renderer,{camera:r,xrCamera:s,refSpace:i,initialHitTestSource:o,vScene:a,sceneNode:l,shadow:c,lastFrameTime:d}=this;if(!t||!t.getViewerPose(i))return;if(!s&&this.session){const e=n.xr.getCamera();return void(this.xrCamera=e.cameras[0])}if(s&&(n.xr.updateCamera(r),r.updateMatrixWorld(!0),r.projectionMatrix.fromArray(s.projectionMatrix.elements),r.projectionMatrixInverse.copy(s.projectionMatrix).invert()),null!=o&&s){const e=a.scene,{position:n}=e,r=2*l.outs.boundingRadius.value+s.near;s.projectionMatrixInverse.copy(s.projectionMatrix).invert();const o=t.getViewerPose(i),c=o.views[0].transform.matrix;n.set(-c[8],-c[9],-c[10]).normalize(),n.multiplyScalar(r);const d=o.views[0].transform.position;fp.set(d.x,d.y,d.z),n.add(fp),vp.getCenter(fp),n.add(fp.negate()),e.updateMatrix(),e.updateMatrixWorld()}if(this.setInitialPosition(t),this.handleInput(t),this.outs.isPlaced.value){const t=e-d;this.updateOpacity(t,this.targetOpacity),this.lastFrameTime=e}const u=n.getContext();u.depthMask(!1),u.clear(u.DEPTH_BUFFER_BIT),u.depthMask(!0),c.needsUpdate&&(n.shadowMap.needsUpdate=!0,c.needsUpdate=!1),n.render(a.scene,r)},this.onSelectStart=e=>{const t=this.vScene.scene,n=this.transientHitTestSource;if(null==n)return;this.targetOpacity=.5;const r=this.frame.getHitTestResultsForTransientInput(n);if(1===r.length){this.inputSource=e.inputSource;const{axes:t}=this.inputSource.gamepad,n=this.raycaster;n.setFromCamera({x:t[0],y:-t[1]},this.xrCamera);const r=n.intersectObject(this.hitPlane);r.length>0?(this.isTranslating=!0,this.lastHitPosition.copy(r[0].point)):this.isRotating=!0,this.lastDragValueX=t[0],this.lastDragValueY=t[1]}else 2===r.length&&(this.isScaling=!0,this.lastScale=this.getFingerSeparation(r)/t.scale.x)},this.onSelectEnd=()=>{this.targetOpacity=0,this.totalDrag=0,this.isTranslating=!1,this.isRotating=!1,this.isScaling=!1,this.inputSource=null}}get renderer(){return this.getMainComponent(_r)}get pulse(){return this.getMainComponent(gr)}get sceneNode(){return this.getSystemComponent(up)}get analytics(){return this.system.getMainComponent(Xi)}get assetManager(){return this.getMainComponent(Zi)}get shadowRoot(){return this._shadowRoot}set shadowRoot(e){this._shadowRoot=e}update(){const{ins:e,outs:t}=this;if(e.enabled.changed){let n=e.enabled.value;n&&(Zh?(this.launchWebXR(),this.analytics.sendProperty("AR.Enabled","WebXR")):nm?(this.launchSceneViewer(),this.analytics.sendProperty("AR.Enabled","SceneViewer")):em&&tm?(this.launchQuickLook(),this.analytics.sendProperty("AR.Enabled","QuickLook")):(n=!1,this.analytics.sendProperty("AR.Enabled","Unavailable"))),t.enabled.setValue(n)}return!0}launchWebXR(){var e,t,n;const r=null===(e=this.renderer)||void 0===e?void 0:e.views[0].renderer,s=this.vScene=null===(t=this.renderer)||void 0===t?void 0:t.activeSceneComponent,i=this.camera=null==s?void 0:s.activeCamera;this.cameraParent=i.parent;if(!(this.setup=this.getSystemComponent(cp)))return!1;const o=null===(n=this.sceneNode)||void 0===n?void 0:n.getGraphComponents(Tp);(o[0]?o[0].derivatives.get(Pd.Web3D,Nd.AR):null)&&(this.setup.navigation.setChanged(!0),this.cachedQuality=o[0].ins.quality.value,o.forEach((e=>{e.ins.quality.setValue(Nd.AR)})),r.setAnimationLoop(((e,t)=>this.render(e,t))),navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"],domOverlay:{root:this.shadowRoot.querySelector("ff-viewport-overlay")}}).then((e=>this.onSessionStarted(r,e))).catch((e=>{console.log("Error starting session: "+e),zi.show("AR available but blocked. Please check your browser settings.","warning")})))}async onSessionStarted(e,t){const n=this.renderer.views[0].renderer.getContext();await n.makeXRCompatible(),t.updateRenderState({baseLayer:new XRWebGLLayer(t,n,{alpha:!0})}),this.setupScene(),e.shadowMap.autoUpdate=!1,e.xr.enabled=!0,e.xr.setReferenceSpaceType("local"),e.xr.setSession(t),t.addEventListener("end",this.onSessionEnded),this.refSpace=await t.requestReferenceSpace("local");const r=await t.requestReferenceSpace("viewer"),s=20*Math.PI/180,i=new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(s),z:-Math.cos(s)});t.requestHitTestSource({space:r,offsetRay:i}).then((e=>{this.initialHitTestSource=e})),this.outs.isPresenting.setValue(!0),this.session=t,this.lastFrameTime=performance.now(),this.setup.reader.ins.enabled.on("value",this.endSession,this)}endSession(){this.session&&this.session.end()}setupScene(){const{cameraParent:e,setup:t,featuresToReset:n}=this,r=this.sceneNode;e&&e.remove(this.camera),this.setup.background.hide(),this.setup.navigation.ins.enabled.setValue(!1);const s=r.graph.findNodeByName("Lights");(this.lightTransform=s.getComponent(Dr,!0)).ins.rotation.reset(),n.push(t.floor.ins.visible.value?1:0),n.push(t.grid.ins.visible.value?1:0),n.push(t.tape.ins.visible.value?1:0),n.push(t.slicer.ins.enabled.value?1:0),n.push(t.viewer.ins.shader.value),this.annotationsAtLaunch=t.viewer.ins.annotationsVisible.value,t.floor.ins.visible.setValue(!1),t.grid.ins.visible.setValue(!1),t.tape.ins.visible.setValue(!1),t.slicer.ins.enabled.setValue(!1),t.viewer.ins.shader.value!==oc.Default&&t.viewer.ins.shader.setValue(oc.Default),t.viewer.ins.annotationsVisible.setValue(!1);(this.originalUnits=r.ins.units.getValidatedValue())!=Ed.m&&this.sceneNode.ins.units.setValue(Ed.m);r.getGraphComponents(bp).forEach((e=>{e.setXRScale(2)}));r.getGraphComponents(_d).forEach((e=>{e.ins.shadowEnabled.value&&(e.ins.shadowEnabled.setValue(!1),this.lightsToReset.push(e))})),this.pulse.pulse(Date.now()),r.update(null);(this.shadow=new mp(this.sceneNode,this.vScene.scene,.5)).setIntensity(0),vp.copy(this.sceneNode.outs.boundingBox.value),vp.getSize(fp),this.cachedNearPlane=this.camera.near,this.cachedFarPlane=this.camera.far,this.vScene.activeCameraComponent.ins.near.setValue(.01),this.vScene.activeCameraComponent.ins.far.setValue(1e3)}resetScene(){const{camera:e,cameraParent:t,setup:n,featuresToReset:r}=this,s=this.vScene.scene;t&&t.add(e),e.position.set(0,0,0),e.rotation.set(0,0,0),this.vScene.activeCameraComponent.ins.near.setValue(this.cachedNearPlane),this.vScene.activeCameraComponent.ins.far.setValue(this.cachedFarPlane),e.updateMatrix(),this.lightTransform.object3D.rotation.set(0,0,0),this.lightTransform.object3D.updateMatrix(),this.sceneNode.ins.units.setValue(this.originalUnits),s.position.setScalar(0),s.rotation.y=0,s.scale.setScalar(1),s.updateMatrix(),s.updateMatrixWorld(!0),r.reverse(),n.floor.ins.visible.setValue(!!r.pop()),n.grid.ins.visible.setValue(!!r.pop()),n.tape.ins.visible.setValue(!!r.pop()),n.slicer.ins.enabled.setValue(!!r.pop());const i=r.pop();i!==oc.Default&&n.viewer.ins.shader.setValue(i);this.sceneNode.getGraphComponents(bp).forEach((e=>{e.setXRScale(1)})),this.lightsToReset.forEach((e=>{e.ins.shadowEnabled.setValue(!0)})),this.lightsToReset.length=0,n.background.show();this.sceneNode.getGraphComponents(Tp).forEach((e=>{e.ins.quality.setValue(this.cachedQuality)}));const o=this.hitPlane;null!=o&&(s.remove(o),o.geometry.dispose(),o.material.dispose(),this.hitPlane=null);const a=this.selectionRing;null!=a&&(s.remove(a),a.geometry.dispose(),a.material.dispose(),this.selectionRing=null);const l=this.shadow;null!=l&&(s.remove(l),l.dispose(),this.shadow=null),e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()}setInitialPosition(e){const t=this.initialHitTestSource;if(null==t)return;const n=e.getHitTestResults(t);if(0==n.length)return;const r=n[0],s=this.getHitPoint(r);if(null==s)return;this.placeModel(s),t.cancel(),this.initialHitTestSource=null;const{session:i}=e;i.addEventListener("selectstart",this.onSelectStart),i.addEventListener("selectend",this.onSelectEnd),i.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((e=>{this.transientHitTestSource=e})),this.shadow.updateMatrices(),this.shadow.setIntensity(.3),this.setup.viewer.ins.annotationsVisible.setValue(this.annotationsAtLaunch)}getHitPoint(e){const t=e.getPose(this.refSpace);if(null==t)return null;const n=pp.fromArray(t.transform.matrix);return n.elements[5]>.75?gp.setFromMatrixPosition(n):null}handleInput(e){const t=this.transientHitTestSource;if(null==t)return;if(!this.isTranslating&&!this.isScaling&&!this.isRotating)return;const n=e.getHitTestResultsForTransientInput(t),r=this.vScene.scene,s=r.scale.x;if(this.isScaling)if(n.length<2)this.isScaling=!1;else{const e=this.getFingerSeparation(n)/this.lastScale;r.scale.setScalar(e),r.position.y=this.lastHitPosition.y-this.modelFloorOffset*r.scale.y,r.updateMatrix(),r.updateMatrixWorld(),this.shadow.setScaleAndOffset(e,0),this.updateBoundingBox()}else{if(2===n.length)return this.isTranslating=!1,this.isRotating=!1,this.isScaling=!0,void(this.lastScale=this.getFingerSeparation(n)/s);if(this.isRotating){const e=this.inputSource.gamepad.axes[0];r.rotation.y+=1.5*(e-this.lastDragValueX),r.updateMatrix(),yp.copy(r.quaternion),yp.invert(),this.lightTransform.object3D.rotation.setFromQuaternion(yp),this.lightTransform.object3D.updateMatrix(),this.shadow.setRotation(r.rotation.y),this.lastDragValueX=e}else if(this.isTranslating){const e=this.inputSource.gamepad.axes,t=e[0]-this.lastDragValueX,s=e[1]-this.lastDragValueY;this.totalDrag+=Math.hypot(t,s),n.forEach((e=>{if(this.totalDrag<.01||e.inputSource!==this.inputSource||e.results.length<1)return;const t=this.getHitPoint(e.results[0]);null!=t&&(fp.copy(t),fp.sub(this.lastHitPosition),r.position.add(fp),r.updateMatrix(),r.updateMatrixWorld(),this.lastHitPosition.copy(t),this.updateBoundingBox())})),this.shadow.updateMatrices()}}}getFingerSeparation(e){const t=e[0].inputSource.gamepad.axes,n=e[1].inputSource.gamepad.axes,r=n[0]-t[0],s=n[1]-t[1];return Math.sqrt(r*r+s*s)}placeModel(e){const t=this.vScene.scene,{min:n,max:r}=vp,s=this.sceneNode.outs.boundingRadius.value,i=Math.max(1.25*(r.x-n.x),.15),o=Math.max(1.25*(r.z-n.z),.15),a=(n.x+r.x)/2,l=(n.z+r.z)/2;this.lastHitPosition.copy(e);const c=this.hitPlane=new Qo(new eh(i,o),new wo);c.position.set(a,n.y,l),c.rotation.set(-Math.PI/2,0,0),c.visible=!1,t.add(c);const d=new xh,u=new xh,h=i>o?.025*i:.025*o;this.roundedRect(d,-i/2,-o/2,i,o,.5*h),this.roundedRect(u,-i/2+h,-o/2+h,i-2*h,o-2*h,.4*h),d.holes.push(u);let m=new Jh(d);const p=this.selectionRing=new Qo(m,new wo({side:2,opacity:0}));p.position.set(a,n.y,l),p.rotation.set(-Math.PI/2,0,0),p.material.transparent=!0,p.visible=!1,t.add(p),this.modelFloorOffset=n.y,t.position.set(e.x,e.y-n.y,e.z),t.updateMatrix(),t.updateMatrixWorld(!0),this.updateBoundingBox(),this.pulse.pulse(Date.now());const f=this.camera.position.clone(),g=e.clone().sub(f);if(g.length()<s){const n=g.normalize();f.sub(n.multiplyScalar(1.5*s));const i=new Xe(f,n.normalize()),o=new he;r.y+=10,i.intersectBox(this.sceneNode.outs.boundingBox.value,o),r.y-=10,null!=o&&(t.position.x+=e.x-o.x,t.position.z+=e.z-o.z,t.updateMatrix(),t.updateMatrixWorld(!0))}this.updateBoundingBox(),this.outs.isPlaced.setValue(!0)}launchSceneViewer(){const e=this.sceneNode.getGraphComponents(Tp),t=e.findIndex((e=>null!==e.derivatives.get(Pd.App3D,Nd.AR))),n=t>-1?e[t].derivatives.get(Pd.App3D,Nd.AR):null;if(n){const e=this.arLink,t=n.findAsset(Id.Model),r=`intent://arvr.google.com/scene-viewer/1.0?file=${this.assetManager.getAssetUrl(t.data.uri)}&mode=ar_only#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;end;`;e.setAttribute("href",r),e.click()}}launchQuickLook(){const e=this.sceneNode.getGraphComponents(Tp),t=e.findIndex((e=>null!==e.derivatives.get(Pd.iOSApp3D,Nd.AR))),n=t>-1?e[t].derivatives.get(Pd.iOSApp3D,Nd.AR):null;if(n){const e=this.arLink,t=n.findAsset(Id.Model),r=this.assetManager.getAssetUrl(t.data.uri);e.setAttribute("rel","ar");const s=document.createElement("img");e.appendChild(s),e.setAttribute("href",r.toString()),e.click(),e.removeChild(s)}}updateBoundingBox(){this.sceneNode.ins.sceneTransformed.set()}updateOpacity(e,t){const n=this.selectionRing.material,r=n.opacity;if(t===r)return;const s=t-r;n.opacity=s>0?Math.min(r+.002*e,t):Math.max(r-.002*e,t),this.selectionRing.visible=n.opacity>0}roundedRect(e,t,n,r,s,i){e.moveTo(t,n+i),e.lineTo(t,n+s-i),e.quadraticCurveTo(t,n+s,t+i,n+s),e.lineTo(t+r-i,n+s),e.quadraticCurveTo(t+r,n+s,t+r,n+s-i),e.lineTo(t+r,n+i),e.quadraticCurveTo(t+r,n,t+r-i,n),e.lineTo(t+i,n),e.quadraticCurveTo(t,n,t,n+i)}}_p.typeName="CVARManager",_p.text="ARManager",_p.icon="",_p.isSystemSingleton=!0,_p.ins={enabled:O("State.Enabled")},_p.outs={enabled:O("State.Enabled"),available:O("State.Available",Qh),isPlaced:O("AR.Placed",!1),isPresenting:O("AR.Presenting",!1)};class bp extends Br{constructor(e,t){super(e,t),this.ins=this.addInputs(bp.ins),this._activeAnnotation=null,this._annotations={},this._viewports=new Set,this._sprites={},this.addEvents("active-annotation","group"),this.onSpriteClick=this.onSpriteClick.bind(this),this.onSpriteLink=this.onSpriteLink.bind(this),this.on("pointer-up",this.onPointerUp,this),this.system.on("pointer-up",this.onSystemPointerUp,this),this.arManager.outs.isPresenting.on("value",this.handleARStateChange,this),this.language.outs.language.on("value",this.updateLanguage,this),this.object3D=new nu}get model(){return this.getComponent(Tp)}get meta(){return this.getComponent(Od,!0)}get reader(){return this.getGraphComponent(ru,!0)}get language(){return this.getGraphComponent(Dd,!0)}get articles(){const e=this.meta;return e?e.articles:null}get arManager(){return this.system.getMainComponent(_p)}get renderer(){return this.getMainComponent(_r)}get assetReader(){return this.getMainComponent(Nc)}get activeAnnotation(){return this._activeAnnotation}set activeAnnotation(e){if(e!==this._activeAnnotation){const t=this._activeAnnotation;t&&(t.set("expanded",!1),this.updateSprite(t)),this._activeAnnotation=e,e&&(e.set("expanded",!0),this.updateSprite(e));const n=this.ins;n.marker.setValue(e?e.data.marker:"",!0),n.title.setValue(e?e.title:"",!0),n.lead.setValue(e?e.lead:"",!0),n.tags.setValue(e?e.tags.join(", "):"",!0),n.style.setOption(e?e.data.style:su.defaultTypeName,!0),n.scale.setValue(e?100*e.data.scale*Hd(this.model.ins.localUnits.getValidatedValue(),Ed.m):1,!0),n.offset.setValue(e?100*e.data.offset*Hd(this.model.ins.localUnits.getValidatedValue(),Ed.m):0,!0),n.tilt.setValue(e?e.data.tilt:0,!0),n.azimuth.setValue(e?e.data.azimuth:0,!0),n.color.setValue(e?e.data.color.slice():[1,1,1],!0);const r=this.articles;if(r){const t=r.items.map((e=>e.title));t.unshift("(none)"),n.article.setOptions(t);const s=e?r.getById(e.data.articleId):null;n.article.setValue(s?r.getIndexOf(s)+1:0,!0)}else n.article.setOptions(["(none)"]),n.article.setValue(0);n.image.setValue(e?e.data.imageUri:"",!0),this.emit({type:"annotation-update",annotation:e})}}get hasAnnotations(){return Object.keys(this._annotations).length>0}setActiveAnnotationById(e){this.activeAnnotation=this._annotations[e]}update(e){super.update(e);const t=this.ins,n=this.object3D,r=this.activeAnnotation;if(t.unitScale.changed&&(n.scale.setScalar(t.unitScale.value),n.updateMatrix()),t.activeTags.changed){const e=t.activeTags.value.split(",").map((e=>e.trim())).filter((e=>e));for(const t in this._annotations){const n=this._annotations[t],r=n.tags;let s=0===r.length;e.forEach((e=>{r.indexOf(e)>=0&&(s=!0)})),n.set("visible",s),this.updateSprite(n)}}if(t.visible.changed&&n.setVisible(t.visible.value),r){if(t.marker.changed&&r.set("marker",t.marker.value),t.title.changed&&(r.title=t.title.value),t.lead.changed&&(r.lead=t.lead.value),t.tags.changed&&(r.tags=t.tags.value.split(",").map((e=>e.trim())).filter((e=>e)),this.emit({type:"tag-update"})),t.style.changed&&(r.set("style",t.style.getOptionText()),this.createSprite(r)),t.scale.changed&&r.set("scale",t.scale.value*Hd(Ed.m,this.model.ins.localUnits.getValidatedValue())*.01),t.offset.changed&&r.set("offset",t.offset.value*Hd(Ed.m,this.model.ins.localUnits.getValidatedValue())*.01),t.tilt.changed&&r.set("tilt",t.tilt.value),t.azimuth.changed&&r.set("azimuth",t.azimuth.value),t.color.changed&&r.set("color",t.color.value.slice()),t.image.changed&&r.set("imageUri",t.image.value),t.article.changed){const e=this.articles,n=e&&e.getAt(t.article.getValidatedValue()-1);r.set("articleId",n?n.id:"")}this.updateSprite(r),this.emit({type:"annotation-update",annotation:r})}return!0}tock(){if(this.updated)return!0}postRender(e){const t=e.viewport;this._viewports.has(t)||(t.on("dispose",this.onViewportDispose,this),this._viewports.add(t));this.object3D.render(t.overlay,e.camera)}dispose(){this.object3D.dispose(),this.off("pointer-up",this.onPointerUp,this),this.system.off("pointer-up",this.onSystemPointerUp,this),this.arManager.outs.isPresenting.off("value",this.handleARStateChange,this),this.language.outs.language.off("value",this.updateLanguage,this),this._viewports.forEach((e=>e.off("dispose",this.onViewportDispose,this))),this._viewports.clear(),super.dispose()}getAnnotations(){return Object.keys(this._annotations).map((e=>this._annotations[e]))}addAnnotation(e){this._annotations[e.id]=e,this.createSprite(e),Object.keys(e.data.titles).forEach((e=>{this.language.addLanguage(kd[e])})),Object.keys(e.data.leads).forEach((e=>{this.language.addLanguage(kd[e])})),this.changed=!0}removeAnnotation(e){const t=Object.keys(this._annotations);if(delete this._annotations[e.id],this.removeSprite(e),e===this.activeAnnotation){const n=Math.min(t.indexOf(e.id)+1,t.length-1);this.activeAnnotation=n<0?null:this._annotations[t[n]],e.tags.length>0&&this.emit({type:"tag-update"})}this.changed=!0}updateAnnotation(e){this.changed=!0}toJSON(){const e=super.toJSON(),t=this.toData();return t&&(e.data=t),e}fromJSON(e){e.data&&this.fromData(e.data)}toData(){const e=Object.keys(this._annotations);return 0===e.length?null:e.map((e=>this._annotations[e].toJSON()))}fromData(e){e.forEach((e=>this.addAnnotation(new iu(e)))),this.emit({type:"tag-update"})}setXRScale(e){for(const t in this._annotations){const n=this._annotations[t];if("Circle"===n.get("style")){const t=this._sprites[n.id];t&&(t.xrScale=e)}}}handleARStateChange(){for(const e in this._annotations){const t=this._annotations[e];this._sprites[t.id].isAdaptive=!this.arManager.outs.isPresenting.value}}onPointerUp(e){if(e.isDragging)return;let t=e.object3D;for(;t&&!t.isHTMLSprite;)t=t.parent;const n=t&&t.annotation;n&&(this.emit({type:"click",sprite:t,annotation:n}),e.stopPropagation=!0)}onSystemPointerUp(e){e.isDragging||this.emit({type:"click",sprite:null,annotation:null})}onViewportDispose(e){this.object3D.disposeHTMLElements(e.viewport.overlay)}onSpriteClick(e){this.emit(e)}onSpriteLink(e){this.reader&&(this.reader.ins.articleId.setValue(e.annotation.data.articleId),this.reader.ins.enabled.setValue(!0))}createSprite(e){this.removeSprite(e);const t="Circle"===e.data.style,n=t?su.createInstance(e,"Circle",this.assetReader):su.createInstance(e);n.addEventListener("click",this.onSpriteClick),n.addEventListener("link",this.onSpriteLink),this._sprites[e.id]=n,this.object3D.add(n),this.registerPickableObject3D(n,!0),t&&(n.isWebGL2=this.renderer.views[0].renderer.capabilities.isWebGL2)}removeSprite(e){const t=this._sprites[e.id];t&&(t.removeEventListener("click",this.onSpriteClick),t.removeEventListener("link",this.onSpriteLink),t.dispose(),this._sprites[e.id]=void 0,this.object3D.remove(t),this.unregisterPickableObject3D(t,!0))}updateSprite(e){const t=this._sprites[e.id];t&&t.update()}updateLanguage(){const e=this.ins,t=this._activeAnnotation,n=this.language;this.getAnnotations().forEach((e=>{e.language=n.outs.language.value})),e.activeTags.set();for(const e in this._annotations){const t=this._annotations[e],n=this._sprites[t.id];n&&n.update()}e.title.setValue(t?t.title:"",!0),e.lead.setValue(t?t.lead:"",!0),e.tags.setValue(t?t.tags.join(", "):"")}}bp.typeName="CVAnnotationView",bp.ins={unitScale:S("Transform.UnitScale",{preset:1,precision:5}),activeTags:R("Tags.Active"),title:R("Annotation.Title"),lead:R("Annotation.Lead"),marker:R("Annotation.Marker"),tags:R("Annotation.Tags"),style:I("Annotation.Style",su.typeNames),scale:L("Annotation.Scale",{preset:1,precision:3}),offset:S("Annotation.Offset",{preset:0,precision:3}),article:I("Annotation.Article",[]),image:R("Annotation.Image"),tilt:S("Annotation.Tilt"),azimuth:S("Annotation.Azimuth"),color:D("Annotation.Color")};const wp=new he,xp=new he,Mp=new ue,Sp=new Me;class Tp extends Br{constructor(e,t){super(e,t),this.ins=this.addInputs(Tp.ins),this.outs=this.addOutputs(Tp.outs),this._derivatives=new $d,this._activeDerivative=null,this._visible=!0,this._boxFrame=null,this._localBoundingBox=new Me,this.object3D=new Ia}get settingProperties(){return[this.ins.name,this.ins.visible,this.ins.quality,this.ins.localUnits,this.ins.tags,this.ins.renderOrder,this.ins.shadowSide,this.ins.shader,this.ins.overlayMap,this.ins.override,this.ins.color,this.ins.opacity,this.ins.hiddenOpacity,this.ins.roughness,this.ins.metalness,this.ins.occlusion,this.ins.doubleSided]}get snapshotProperties(){return[this.ins.visible,this.ins.quality,this.ins.overlayMap,this.ins.override,this.ins.opacity]}get derivatives(){return this._derivatives}get activeDerivative(){return this._activeDerivative}get localBoundingBox(){return this._localBoundingBox}get assetManager(){return this.getMainComponent(Zi)}get assetReader(){return this.getMainComponent(Nc)}get renderer(){return this.getMainComponent(_r)}create(){super.create();this.node.createComponent(bp).ins.unitScale.linkFrom(this.outs.unitScale);const e=this.renderer.outs.maxTextureSize.value;e<2048?this.ins.quality.setValue(Nd.Low):e<4096?this.ins.quality.setValue(Nd.Medium):this.ins.quality.setValue(Nd.High)}update(){const e=this.ins;if(e.name.changed&&(this.node.name=e.name.value),e.tags.changed||e.activeTags.changed||e.visible.changed){let t=e.visible.value;if(t){const n=e.tags.value.split(",").map((e=>e.trim())).filter((e=>e)),r=e.activeTags.value.split(",").map((e=>e.trim())).filter((e=>e));t=!n.length,r.forEach((e=>{n.indexOf(e)>=0&&(t=!0)}))}const n=this.ins.override.value;this._visible=t,t?(this.object3D.visible=!0,n&&this.updateMaterial()):e.visible.value&&n&&this.ins.hiddenOpacity.value>0?(this.object3D.visible=!0,this.updateMaterial()):this.object3D.visible=!1}if(e.tags.changed&&this.emit({type:"tag-update"}),!this.activeDerivative&&e.autoLoad.changed&&e.autoLoad.value)this.autoLoad(e.quality.value);else if(e.quality.changed){const t=this.derivatives.select(Pd.Web3D,e.quality.value);t&&t!==this.activeDerivative&&this.loadDerivative(t).catch((e=>{console.warn("Model.update - failed to load derivative"),console.warn(e)}))}return e.renderOrder.changed&&this.updateRenderOrder(this.object3D,e.renderOrder.value),(e.localUnits.changed||e.globalUnits.changed)&&this.updateUnitScale(),e.shader.changed&&this.updateShader(),e.overlayMap.changed&&this.updateOverlayMap(),e.override.value&&e.shader.value===oc.Default&&(e.override.changed||e.color.changed||e.opacity.changed||e.roughness.changed||e.metalness.changed||e.occlusion.changed)&&this.updateMaterial(),e.center.changed&&this.center(),(e.position.changed||e.rotation.changed)&&this.updateMatrixFromProps(),e.dumpDerivatives.changed&&console.log(this.derivatives.toString(!0)),!0}dispose(){this.derivatives.clear(),this._activeDerivative=null,super.dispose()}center(){const e=this.object3D,t=this.ins.position;e.matrix.decompose(wp,Mp,xp),e.matrix.makeRotationFromQuaternion(Mp),Sp.makeEmpty(),$n(e,Sp,e.parent),Sp.getCenter(wp),wp.multiplyScalar(-1).toArray(t.value),t.set()}setFromMatrix(e){const t=this.ins;e.decompose(wp,Mp,xp),wp.multiplyScalar(1/this.outs.unitScale.value).toArray(t.position.value),t.position.set(),Yn(Mp,Tp.rotationOrder,t.rotation.value),t.rotation.set()}fromDocument(e,t){const{ins:n,outs:r}=this;if(!isFinite(t.model))throw new Error("model property missing in node");const s=e.models[t.model];n.name.setValue(t.name);const i=Ed[s.units||"cm"];n.localUnits.setValue(isFinite(i)?i:Ed.cm),n.visible.setValue(void 0===s.visible||s.visible),n.tags.setValue(s.tags||""),n.renderOrder.setValue(void 0!==s.renderOrder?s.renderOrder:0);const o=Bd[s.shadowSide||"Back"];if(n.shadowSide.setValue(isFinite(o)?o:Bd.Back),n.position.reset(),n.rotation.reset(),s.translation&&n.position.copyValue(s.translation),s.rotation&&(Mp.fromArray(s.rotation),Yn(Mp,Tp.rotationOrder,n.rotation.value),n.rotation.set()),s.boundingBox){const e=this._localBoundingBox;e.min.fromArray(s.boundingBox.min),e.max.fromArray(s.boundingBox.max),this._boxFrame=new Rd(e,"#009cde"),this.addObject3D(this._boxFrame),this._boxFrame.updateMatrixWorld(!0);const t=this.getGraphComponent(cp,!0);t&&t.navigation.ins.autoZoom.value&&t.navigation.ins.zoomExtents.set(),r.updated.set(),this.updateUnitScale()}if(s.derivatives&&this.derivatives.fromJSON(s.derivatives),s.material){const e=s.material;n.copyValues({override:!0,color:e.color||n.color.schema.preset,opacity:void 0!==e.opacity?e.opacity:n.opacity.schema.preset,hiddenOpacity:void 0!==e.hiddenOpacity?e.hiddenOpacity:n.hiddenOpacity.schema.preset,roughness:void 0!==e.roughness?e.roughness:n.roughness.schema.preset,metalness:void 0!==e.metalness?e.metalness:n.metalness.schema.preset,occlusion:void 0!==e.occlusion?e.occlusion:n.occlusion.schema.preset,doubleSided:void 0!==e.doubleSided?e.doubleSided:n.doubleSided.schema.preset})}return s.overlayMap&&n.overlayMap.setValue(s.overlayMap),s.annotations&&this.getComponent(bp).fromData(s.annotations),this.emit({type:"tag-update"}),this.ins.autoLoad.set(),t.model}toDocument(e,t){const n={units:Ed[this.ins.localUnits.getValidatedValue()]},r=this.ins;r.visible.value||(n.visible=!1),r.tags.value&&(n.tags=r.tags.value),0!==r.renderOrder.value&&(n.renderOrder=r.renderOrder.value),r.shadowSide.value!=Bd.Back&&(n.shadowSide=Bd[this.ins.shadowSide.getValidatedValue()]);const s=r.position.value;0===s[0]&&0===s[1]&&0===s[2]||(n.translation=r.position.value);const i=r.rotation.value;0===i[0]&&0===i[1]&&0===i[2]||(Un(i,Tp.rotationOrder,Mp),n.rotation=Mp.toArray()),r.override.value&&(n.material={color:r.color.value,opacity:r.opacity.value,hiddenOpacity:r.hiddenOpacity.value,roughness:r.roughness.value,metalness:r.metalness.value,occlusion:r.occlusion.value,doubleSided:r.doubleSided.value}),0!==r.overlayMap.value&&(n.overlayMap=r.overlayMap.value),n.boundingBox={min:this._localBoundingBox.min.toArray(),max:this._localBoundingBox.max.toArray()},n.derivatives=this.derivatives.toJSON();const o=this.getComponent(bp).toData();o&&o.length>0&&(n.annotations=o),e.models=e.models||[];const a=e.models.length;return e.models.push(n),a}updateShader(){const e=this.ins.shader.getValidatedValue();this.object3D.traverse((t=>{const n=t.material;n&&n.isUberPBRMaterial&&n.setShaderMode(e)}))}updateOverlayMap(){const e=this.getGraphComponent(cp,!0);if(e&&e.snapshots.outs.tweening.value)return void e.snapshots.outs.end.once("value",(()=>{this.ins.overlayMap.set(),this.update()}));const t=this.ins.overlayMap.getOptionText();"None"!==t?this.assetReader.getTexture(t).then((e=>{this.object3D.traverse((t=>{const n=t.material;n&&n.isUberPBRMaterial&&(e.flipY=!1,n.zoneMap=e,n.enableZoneMap(!0))}))})):this.object3D.traverse((e=>{const t=e.material;t&&t.isUberPBRMaterial&&(t.enableZoneMap(!1),t.zoneMap=null)}))}updateMaterial(){const e=this.ins;this.object3D.traverse((t=>{const n=t.material;n&&n.isUberPBRMaterial&&(n.aoMapMix.setScalar(e.occlusion.value),n.color.fromArray(e.color.value),n.opacity=this._visible?e.opacity.value:e.hiddenOpacity.value,n.transparent=n.opacity<1||!!n.alphaMap,n.roughness=e.roughness.value,n.metalness=e.metalness.value,n.side=e.doubleSided.value?2:0)}))}updateUnitScale(){const e=this.ins.localUnits.getValidatedValue(),t=this.ins.globalUnits.getValidatedValue();this.outs.unitScale.setValue(Hd(e,t)),this.updateMatrixFromProps()}updateMatrixFromProps(){const e=this.ins,t=this.outs.unitScale.value,n=this.object3D;wp.fromArray(e.position.value).multiplyScalar(t),Un(e.rotation.value,Tp.rotationOrder,Mp),xp.setScalar(t),n.matrix.compose(wp,Mp,xp),n.matrixWorldNeedsUpdate=!0,this.outs.updated.set()}updateRenderOrder(e,t){e.renderOrder=t,e.children.forEach((e=>this.updateRenderOrder(e,t)))}autoLoad(e){const t=[],n=this.derivatives.select(Pd.Web3D,Nd.Thumb);n&&t.push(n);const r=this.derivatives.select(Pd.Web3D,e);return r&&r!==n&&t.push(r),0===t.length?(zi.show(`No 3D derivatives available for '${this.displayName}'.`),Promise.resolve()):t.reduce(((e,t)=>e.then((()=>{this.loadDerivative(t)}))),Promise.resolve())}loadDerivative(e){if(this.node&&this.assetReader)return e.load(this.assetReader).then((()=>{if(!e.model)return;this.assetManager.initialLoad||this._activeDerivative||(this.assetManager.initialLoad=!0),this._activeDerivative&&(this.removeObject3D(this._activeDerivative.model),this._activeDerivative.unload()),this._activeDerivative=e,this.addObject3D(e.model),this.renderer.activeSceneComponent.scene.updateMatrixWorld(!0),this._boxFrame&&(this.removeObject3D(this._boxFrame),this._boxFrame.geometry.dispose(),this._boxFrame=null),this._localBoundingBox.makeEmpty(),$n(e.model,this._localBoundingBox),this.outs.updated.set(),this.outs.quality.setValue(e.data.quality),this.ins.override.value&&this.updateMaterial(),this.ins.shadowSide.value!=Bd.Back&&this.object3D.traverse((e=>{const t=e.material;t&&t.isUberPBRMaterial&&(this.ins.shadowSide.value==Bd.Front?t.shadowSide=0:t.shadowSide=1)})),this.getGraphComponent(ap).ins.dirty.set(),0!==this.ins.renderOrder.value&&this.updateRenderOrder(this.object3D,this.ins.renderOrder.value);const t=["None"];t.push(...e.findAssets(Id.Image).filter((e=>e.data.mapType===zd.Zone)).map((e=>e.data.uri))),this.ins.overlayMap.setOptions(t),0!==this.ins.overlayMap.value&&this.ins.overlayMap.set(),this.emit({type:"model-load",quality:e.data.quality})})).catch((e=>zi.show(`Failed to load model derivative: ${e.message}`)));console.warn("Model load interrupted.")}addObject3D(e){this.object3D.add(e),this.object3D.traverse((e=>{"Mesh"===e.type&&this.registerPickableObject3D(e,!0)}))}}Tp.typeName="CVModel2",Tp.text="Model",Tp.icon="cube",Tp.rotationOrder="ZYX",Tp.ins={name:R("Model.Name"),globalUnits:N("Model.GlobalUnits",Ed,Ed.cm),localUnits:N("Model.LocalUnits",Ed,Ed.cm),quality:N("Model.Quality",Nd,Nd.High),tags:R("Model.Tags"),renderOrder:S("Model.RenderOrder",0),shadowSide:N("Model.ShadowSide",Bd,Bd.Back),activeTags:R("Model.ActiveTags"),autoLoad:O("Model.AutoLoad",!0),position:E("Model.Position"),rotation:E("Model.Rotation"),center:B("Model.Center"),shader:N("Material.Shader",oc,oc.Default),overlayMap:I("Material.OverlayMap",["None"],0),override:O("Material.Override",!1),color:D("Material.BaseColor"),opacity:C("Material.Opacity",1),hiddenOpacity:C("Material.HiddenOpacity",0),roughness:C("Material.Roughness",.8),metalness:C("Material.Metalness",.1),occlusion:C("Material.Occlusion",.25),doubleSided:O("Material.DoubleSided",!1),dumpDerivatives:B("Derivatives.Dump")},Tp.outs={unitScale:S("UnitScale",{preset:1,precision:5}),quality:N("LoadedQuality",Nd),updated:B("Updated")};class Cp extends ${get transform(){return this.components.get(Zc)}get meta(){return this.components.get(Od,!0)}get model(){return this.components.get(Tp,!0)}get camera(){return this.components.get(pd,!0)}get light(){return this.components.get(vd,!0)}get scene(){return this.components.get(up,!0)}createComponents(){this.name="Node",this.createComponent(Zc)}createModel(){this.name="Model",this.createComponent(Od),this.createComponent(Tp)}fromDocument(e,t,n){const r=e.nodes[t];this.transform.fromData(r),n.set(`node/${t}`,this.transform);let s="Node";if(isFinite(r.meta)&&(this.createComponent(Od).fromDocument(e,r),n.set(`meta/${r.meta}`,this.meta),s="Meta"),isFinite(r.model)&&(this.createComponent(Tp).fromDocument(e,r),n.set(`model/${r.model}`,this.model),s="Model"),isFinite(r.camera)&&(this.createComponent(pd).fromDocument(e,r),n.set(`camera/${r.camera}`,this.camera),s="Camera"),isFinite(r.light)){const t=e.lights[r.light].type;switch(t){case"directional":this.createComponent(_d).fromDocument(e,r),s="Directional Light";break;case"point":this.createComponent(wd).fromDocument(e,r),s="Point Light";break;case"spot":this.createComponent(Md).fromDocument(e,r),s="Spot Light";break;default:throw new Error(`unknown light type: '${t}'`)}n.set(`light/${r.light}`,this.light)}this.name=r.name||s;const i=r.children;i&&i.forEach((t=>{const r=this.graph.createCustomNode(Cp);this.transform.addChild(r.transform),r.fromDocument(e,t,n)}))}toDocument(e,t,n){n=n||{meta:!0,setup:!0,model:!0,camera:!0,light:!0},e.nodes=e.nodes||[];const r=e.nodes.length,s=this.transform.toData();e.nodes.push(s),t.set(this.transform,`node/${r}`),this.name&&(s.name=this.name),this.model&&n.model&&(s.model=this.model.toDocument(e,s),t.set(this.model,`model/${s.model}`)),this.camera&&n.camera&&(s.camera=this.camera.toDocument(e,s),t.set(this.camera,`camera/${s.camera}`)),this.light&&n.light&&(s.light=this.light.toDocument(e,s),t.set(this.light,`light/${s.light}`)),this.meta&&n.meta&&(s.meta=this.meta.toDocument(e,s),t.set(this.meta,`info/${s.meta}`));const i=this.transform.children.map((e=>e.node)).filter((e=>e.is(Cp)));return i.forEach((r=>{if(r.hasNodeComponents(n)){const i=r.toDocument(e,t,n);s.children=s.children||[],s.children.push(i)}})),r}hasNodeComponents(e){if(!e)return!0;const t=this.transform,n=this.components;return!(!e.model||!n.has(Tp)&&!t.hasChildComponents(Tp,!0))||(!(!e.camera||!n.has(pd)&&!t.hasChildComponents(pd,!0))||!(!e.light||!n.has(vd)&&!t.hasChildComponents(vd,!0)))}}Cp.typeName="NVNode";class Ep extends Cp{get setup(){return this.components.get(cp,!0)}createComponents(){this.createComponent(up),this.createComponent(cp),this.createComponent(Od)}fromDocument(e,t,n){const r=e.scenes[t];r.name&&(this.name=r.name),this.scene.fromDocument(e,r),isFinite(r.meta)&&(this.meta.fromDocument(e,r),n.set(`meta/${r.meta}`,this.meta)),isFinite(r.setup)&&this.setup.fromDocument(e,t,n);const s=r.nodes;if(s&&s.forEach((t=>{const r=this.graph.createCustomNode(Cp);this.transform.addChild(r.transform),r.fromDocument(e,t,n)})),isFinite(r.setup)){const t=e.setups[r.setup];t.snapshots&&this.setup.snapshots.fromData(t.snapshots,n)}}toDocument(e,t,n){e.scenes=e.scenes||[];const r=e.scenes.length,s={units:"cm"};e.scenes.push(s),this.name&&(s.name=this.name),this.scene.toDocument(e,s);return this.transform.children.map((e=>e.node)).filter((e=>e.is(Cp))).forEach((r=>{if(r.hasNodeComponents(n)){const i=r.toDocument(e,t,n);s.nodes=s.nodes||[],s.nodes.push(i)}})),n&&!n.setup||(this.meta&&(s.meta=this.meta.toDocument(e,s),t.set(this.meta,`meta/${s.meta}`)),this.setup&&this.setup.toDocument(e,r,t)),r}}Ep.typeName="NVScene";class kp extends Fc{constructor(e,t){super(e,t),this.titles={},this.meta=null,this.ins=this.addInputs(kp.ins),this.outs=this.addOutputs(kp.outs),this.innerGraph.createCustomNode(Ep),this.ins.active.setValue(!1),this.ins.visible.setValue(!1)}get root(){return this.innerNodes.get(Ep)}get setup(){return this.innerComponents.get(cp)}get assetPath(){return this.outs.assetPath.value}get assetBaseName(){let e=this.assetPath;const t=e.indexOf(".svx.json");return t>=0&&(e=e.substr(0,t)),e}get analytics(){return this.getMainComponent(Xi)}create(){super.create(),this.innerGraph.components.on(Od,this.onMetaComponent,this),this.setup.language.outs.language.on("value",this.updateTitle,this)}dispose(){this.setup.language.outs.language.off("value",this.updateTitle,this),this.innerGraph.components.off(Od,this.onMetaComponent,this),super.dispose()}update(e){super.update(e);const{ins:t,outs:n}=this;if(t.dumpJson.changed){const e=this.deflateDocument();console.log("-------------------- VOYAGER DOCUMENT --------------------"),console.log(JSON.stringify(e,((e,t)=>"number"==typeof t?parseFloat(t.toFixed(5)):t),2))}if(t.dumpTree.changed&&(console.log("-------------------- VOYAGER DOCUMENT --------------------"),this.dump()),t.download.changed){const e=n.assetPath.value.split("/").pop()||"voyager-document.json";zc(this.deflateDocument(),e)}if(t.title.changed&&this.titles){const e=this.setup.language;t.title.setValue(t.title.value,!0),n.title.setValue(t.title.value),t.title.value&&(this.titles[kd[e.outs.language.value]]=t.title.value,this.updateTitlesMeta())}return!0}clearNodeTree(){this.root.transform.children.slice().forEach((e=>e.node.dispose()))}openDocument(e,t,n){if(!kp.validator.validate(e))throw new Error("document schema validation failed");n||(this.clearNodeTree(),this.ins.title.setValue(null)),this.onMetaComponent({type:"CVMeta",object:this.root.meta,add:!0,remove:!1});let r="object"==typeof n?n:this.root;if(r.graph!==this.innerGraph)throw new Error("invalid parent node");const s=new Map;if(r instanceof Ep)r.fromDocument(e,e.scene,s);else{e.scenes[e.scene].nodes.forEach((t=>{const n=this.innerGraph.createCustomNode(Cp);r.transform.addChild(n.transform),n.fromDocument(e,t,s)}))}t&&(this.outs.assetPath.setValue(t),this.name=this.getMainComponent(Zi).getAssetName(t))}appendModel(e,t,n){if(n&&n.graph!==this.innerGraph)throw new Error("invalid parent node");if(this.isEmpty())throw new Error("empty document, can't append model");n=n||this.root;const r=this.innerGraph.createCustomNode(Cp);n.transform.addChild(r.transform),r.createModel();const s=r.model;return s.derivatives.createModelAsset(e,t),s}appendGeometry(e,t,n,r,s,i){if(i&&i.graph!==this.innerGraph)throw new Error("invalid parent node");if(this.isEmpty())throw new Error("empty document, can't append geometry");i=i||this.root;const o=this.innerGraph.createCustomNode(Cp);i.transform.addChild(o.transform),o.createModel();o.model.derivatives.createMeshAsset(e,t,n,r,s)}deflateDocument(e){if(this.isEmpty())throw new Error("empty document, can't serialize");const t={asset:{type:kp.mimeType,version:kp.version,generator:"Voyager",copyright:"(c) Smithsonian Institution. All rights reserved."},scene:0,scenes:[]},n=new Map;return t.scene=this.root.toDocument(t,n,e),t}onMetaComponent(e){const t=e.object,n=this.ins.title,r=this.setup.language;null===this.meta&&(this.meta=t),e.add&&!n.value&&t.once("load",(()=>{this.titles=t.collection.get("titles")||{},0===Object.keys(this.titles).length&&(this.titles[kd[r.outs.language.value]]=t.collection.get("title")||"",t.collection.dictionary.titles=this.titles);const e=this.titles[kd[r.outs.language.value]];n.setValue(e),this.analytics.setTitle(e),this.meta=t}))}updateTitle(){const e=this.setup.language,t=this.titles[kd[e.outs.language.value]];this.ins.title.setValue(t)}updateTitlesMeta(){const e=this.meta;e&&(e.collection.dictionary.titles=this.titles)}}kp.typeName="CVDocument",kp.mimeType="application/si-dpo-3d.document+json",kp.version="1.0",kp.validator=new class{constructor(){this._schemaValidator=new(jc())({schemas:[Uc,Yc,Vc,$c,Wc],allErrors:!0}),this._validateDocument=this._schemaValidator.getSchema("https://schemas.3d.si.edu/voyager/document.schema.json")}validate(e){return!!this._validateDocument(e)||(console.warn(this._schemaValidator.errorsText(this._validateDocument.errors,{separator:", ",dataVar:"document"})),!1)}},kp.ins={dumpJson:B("Document.DumpJSON"),dumpTree:B("Document.DumpTree"),download:B("Document.Download"),title:R("Document.Title")},kp.outs={assetPath:P("Asset.Path",{preset:"scene.svx.json"}),title:R("Document.Title")};class Lp extends ji{constructor(e,t){super(e,t),this.outs=this.addOutputs(Lp.outs),this.scope=Fi.Node}createDocument(e,t){const n=this.node.createComponent(kp);return this.activeComponent=n,e&&n.openDocument(e,t),n}amendDocument(e,t,n){const r=this.activeComponent;if(!r)throw new Error("no active document, can't amend");return r.openDocument(e,t,n),r}refreshDocument(){this.emit({type:"active-component",previous:null,next:this.activeComponent})}appendModel(e,t){const n=this.activeComponent;if(!n)throw new Error("no active document, can't append model");return n.appendModel(e,t),n}appendGeometry(e,t,n,r,s){const i=this.activeComponent;if(!i)throw new Error("no active document, can't append geometry");return i.appendGeometry(e,t,n,r,s),i}removeActiveDocument(){const e=this.activeComponent;e&&e.dispose()}activateComponent(e){e.ins.visible.setValue(!0),e.ins.active.setValue(!0)}deactivateComponent(e){e.ins.visible.setValue(!1),e.ins.active.setValue(!1)}onActiveComponent(e,t){this.outs.activeDocument.setValue(t)}onScopedComponents(){this.outs.changedDocuments.set()}}Lp.typeName="CVDocumentProvider",Lp.componentType=kp,Lp.outs={activeDocument:z("Documents.Active",kp),changedDocuments:B("Documents.Changed")};class Ap extends W{constructor(){super(...arguments),this.ins=this.addInputs(Ap.ins)}get model(){return this.getComponent(Tp)}update(e){return!0}}Ap.typeName="CVAnnotations",Ap.ins={};class Dp extends ${get pulse(){return this.components.get(gr)}get renderer(){return this.components.get(_r)}get fullscreen(){return this.components.get(qi)}get selection(){return this.components.get(os)}get assetManager(){return this.components.get(Zi)}get assetReader(){return this.components.get(Nc)}get analytics(){return this.components.get(Xi)}get arManager(){return this.components.get(_p)}createComponents(){this.createComponent(gr),this.createComponent(_r),this.createComponent(qi),this.createComponent(Zi),this.createComponent(Nc),this.createComponent(Xi),this.createComponent(_p);this.createComponent(os).ins.viewportBrackets.setValue(!1)}}Dp.typeName="NVEngine";class Op extends Ui{constructor(e,t){super(e,t),this.outs=this.addOutputs(Op.outs),this.scope=Hi.Graph}get documentProvider(){return this.getComponent(Lp)}create(){super.create(),this.documentProvider.on("active-component",this.onActiveDocument,this)}dispose(){this.documentProvider.off("active-component",this.onActiveDocument,this),super.dispose()}onActiveDocument(e){this.scopedGraph=e.next}onActiveNode(e,t){this.outs.activeNode.setValue(t);const n=this.selection;t?n.nodeContainsSelectedComponent(t)||n.selectNode(t):e&&n.clearSelection()}onScopedNodes(){this.outs.changedNodes.set()}}Op.typeName="CVNodeProvider",Op.nodeType=Cp,Op.followComponentSelection=!0,Op.outs={activeNode:z("Nodes.Active",Cp),changedNodes:B("Nodes.Changed")};class Rp extends ${get scene(){return this.components.get(Ir)}get documentProvider(){return this.components.get(Lp)}get nodeProvider(){return this.components.get(Op)}createComponents(){this.createComponent(Ir,"Master Scene"),this.createComponent(Lp),this.createComponent(Op)}}Rp.typeName="NVDocuments";const Pp=[X,gr,ji,Ui,Gi,_r,qi,os,Ir,$,Xi,_p,Zi,Nc,kp,Lp,up,cp,Zc,Od,Tp,Ap,bp,pd,_d,wd,Md,sm,im,ru,Cm,Om,Fm,$m,tp,rp,ip,sp,ap,Dd,lp,Dp,Rp,Ep,Cp];class Np extends W{constructor(){super(...arguments),this.activeDocument=null}get documentProvider(){return this.getGraphComponent(Lp)}startObserving(){const e=this.documentProvider;e.on("active-component",this.onActiveDocumentEvent,this),e.activeComponent&&(this.activeDocument=e.activeComponent,this.onActiveDocument(null,e.activeComponent))}stopObserving(){const e=this.documentProvider;e.off("active-component",this.onActiveDocumentEvent,this),e.activeComponent&&(this.activeDocument=null,this.onActiveDocument(e.activeComponent,null))}onActiveDocument(e,t){}onActiveDocumentEvent(e){this.activeDocument=e.next,this.onActiveDocument(e.previous,e.next)}}Np.typeName="CVDocumentObserver";class Ip extends Np{constructor(){super(...arguments),this.activeNode=null}get nodeProvider(){return this.getGraphComponent(Op)}startObserving(){super.startObserving();const e=this.nodeProvider;e.on("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=e.activeNode,this.onActiveNode(null,e.activeNode))}stopObserving(){const e=this.nodeProvider;e.off("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=null,this.onActiveNode(e.activeNode,null)),super.stopObserving()}onActiveNode(e,t){}onActiveNodeEvent(e){this.activeNode=e.next,this.onActiveNode(e.previous,e.next)}}Ip.typeName="CVNodeObserver";var zp=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class Bp extends Ti{constructor(e){super(),this.system=e}}zp([ai({attribute:!1})],Bp.prototype,"system",void 0);class Fp extends Bp{constructor(){super(...arguments),this.activeDocument=null}get documentProvider(){return this.system.getMainComponent(Lp)}connected(){const e=this.documentProvider;e.on("active-component",this.onActiveDocumentEvent,this);const t=e.activeComponent;t&&(this.activeDocument=t,this.onActiveDocument(null,t))}disconnected(){this.documentProvider.off("active-component",this.onActiveDocumentEvent,this);const e=this.activeDocument;e&&(this.activeDocument=null,this.onActiveDocument(e,null))}onActiveDocument(e,t){}onActiveDocumentEvent(e){this.activeDocument=e.next,this.onActiveDocument(e.previous,e.next)}}class Hp extends Fp{constructor(){super(...arguments),this.activeNode=null}get nodeProvider(){return this.system.getMainComponent(Op)}connected(){super.connected();const e=this.nodeProvider;e.on("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=e.activeNode,this.onActiveNode(null,e.activeNode))}disconnected(){const e=this.nodeProvider;e.off("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=null,this.onActiveNode(e.activeNode,null)),super.disconnected()}onActiveNode(e,t){this.requestUpdate()}onActiveNodeEvent(e){this.activeNode=e.next,this.onActiveNode(e.previous,e.next)}}var jp=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class Up extends Ip{constructor(){super(...arguments),this.ins=this.addInputs(Up.toolIns),this.outs=this.addOutputs(Up.toolOuts),this._isActiveTool=!1}get isActiveTool(){return this._isActiveTool}dispose(){this._isActiveTool&&this.deactivateTool(),super.dispose()}createView(){throw new Error("must override")}activateTool(){this._isActiveTool=!0,this.startObserving()}deactivateTool(){this.stopObserving(),this._isActiveTool=!1}}Up.typeName="CVTool",Up.toolIns={},Up.toolOuts={};class Yp extends Hp{constructor(e){super(e.system),this.tool=null,this.needsFocus=!1,this.tool=e}get analytics(){return this.system.getMainComponent(Xi)}firstConnected(){this.classList.add("sv-group","sv-tool-view"),this.needsFocus=!0}connected(){super.connected(),this.tool.on("update",this.onUpdate,this)}disconnected(){this.tool.off("update",this.onUpdate,this),super.disconnected()}updated(e){super.updated(e),this.needsFocus&&(this.setFocus(),this.needsFocus=!1)}setFocus(){}}jp([ai({attribute:!1})],Yp.prototype,"tool",void 0);class Vp extends ji{constructor(e,t){super(e,t),this.ins=this.addInputs(Vp.ins),this.scope=Fi.Node}get analytics(){return this.getMainComponent(Xi)}update(e){return this.ins.visible.changed,!0}activateComponent(e){e.activateTool(),this.analytics.sendProperty("Tools.ActiveTool",e.text)}deactivateComponent(e){e.deactivateTool()}onActiveComponent(e,t){}}Vp.typeName="CVToolProvider",Vp.isSystemSingleton=!0,Vp.componentType=Up,Vp.ins={visible:O("Tools.Visible"),closed:B("Tools.Closed")};var $p=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Wp=class extends Ti{constructor(){super(...arguments),this.property=null,this.name="",this.options=null,this.indexMap=null,this.language=null}firstConnected(){this.classList.add("sv-property-view","sv-property-options")}update(e){if(!this.property)throw new Error("missing property attribute");if("number"!==this.property.type||!this.property.schema.options)throw new Error("not an options property");if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.indexMap,n=this.name||e.name,r=this.options||e.schema.options,s=e.value,i=this.language;let o;return o=t?t.map((e=>qs`<ff-button role="radio" aria-checked=${e===s} tabbingIndex=${t.includes(s)?e===s?0:-1:e===t[0]?0:-1} .text=${i?i.getLocalizedString(r[e]):r[e]} .index=${e} .selectedIndex=${s} @click=${this.onButtonClick}>
                    </ff-button>`)):r.map(((e,t)=>qs`<ff-button role="radio" aria-checked=${t===s} tabbingIndex=${t===s?0:-1} .text=${i?i.getLocalizedString(e):e} .index=${t} .selectedIndex=${s} @click=${this.onButtonClick}>
                    </ff-button>`)),qs`<label class="ff-label ff-off">${n}</label><div role="radiogroup" @keydown=${e=>this.onKeyDown(e)} title=${n} class="sv-options">${o}</div>`}onButtonClick(e){const t=e.target.index;this.property.setValue(t)}onKeyDown(e){if("ArrowUp"===e.code||"ArrowLeft"===e.code){const t=this.getElementsByTagName("ff-button"),n=Array.from(t).findIndex((t=>e.target===t));n>0&&(t[n].setAttribute("tabIndex","-1"),t[n-1].setAttribute("tabIndex","0"),t[n-1].focus())}else if("ArrowDown"===e.code||"ArrowRight"===e.code){const t=this.getElementsByTagName("ff-button"),n=Array.from(t).findIndex((t=>e.target===t));n<t.length-1&&(t[n].setAttribute("tabIndex","-1"),t[n+1].setAttribute("tabIndex","0"),t[n+1].focus())}else"Tab"===e.code&&this.addEventListener("blur",this.tabReset,{once:!0,capture:!0})}focus(){const e=this.getElementsByTagName("ff-button");e[Math.max(Array.from(e).findIndex((e=>0===e.tabIndex)),0)].focus()}tabReset(e){const t=this.getElementsByTagName("ff-button"),n=Array.from(t),r=n.findIndex((e=>0===e.tabIndex)),s=n.findIndex((e=>"true"===e.getAttribute("aria-checked")));if(r!=s){t[r].setAttribute("tabIndex","-1");t[s>-1?s:0].setAttribute("tabIndex","0")}}};$p([ai({attribute:!1})],Wp.prototype,"property",void 0),$p([ai({type:String})],Wp.prototype,"name",void 0),$p([ai({attribute:!1})],Wp.prototype,"options",void 0),$p([ai({attribute:!1})],Wp.prototype,"indexMap",void 0),$p([ai({attribute:!1})],Wp.prototype,"language",void 0),Wp=$p([Ci("sv-property-options")],Wp);var Gp=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let qp=class extends Ti{constructor(){super(...arguments),this.property=null,this.name="",this.text="",this.icon=""}firstConnected(){this.classList.add("sv-property-view","sv-property-event")}update(e){if(!this.property)throw new Error("missing property attribute");if(!this.property.schema.event)throw new Error(`not an event property: '${this.property.path}'`);if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=this.text,r=this.icon;return qs`<label id="${t}-label" class="ff-label ff-off">${t}</label>
            <div class="sv-options">
                <ff-button aria-labelledby="${t}-label" .text=${n} .icon=${r} @click=${this.onButtonClick}></ff-button>
            </div>`}onButtonClick(e){this.property.set()}};Gp([ai({attribute:!1})],qp.prototype,"property",void 0),Gp([ai({type:String})],qp.prototype,"name",void 0),Gp([ai({type:String})],qp.prototype,"text",void 0),Gp([ai({type:String})],qp.prototype,"icon",void 0),qp=Gp([Ci("sv-property-event")],qp);var Xp=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class Kp extends Up{createView(){return new Jp(this)}}Kp.typeName="CVViewTool",Kp.text="View",Kp.icon="eye";let Jp=class extends Yp{firstConnected(){super.firstConnected(),this.classList.add("sv-view-tool-view")}render(){const e=this.activeDocument;if(!e)return qs``;this.tool;const t=e.setup.navigation,n=e.setup.language,r=t.ins.projection,s=t.ins.preset,i=t.ins.zoomExtents,o=[wm.Front,wm.Back,wm.Left,wm.Right,wm.Top,wm.Bottom];return qs`<div role="toolbar" aria-label="View tool" class="sv-section"><ff-button class="sv-section-lead" title=${n.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-options .property=${r} .language=${n} name=${n.getLocalizedString("Projection")}></sv-property-options>
                <sv-property-options .property=${s} .language=${n} name=${n.getLocalizedString("View")} .indexMap=${o}></sv-property-options>
                <sv-property-event .property=${i} name=${n.getLocalizedString("Center")} icon="zoom"></sv-property-event>
            </div>
        </div>`}onActiveDocument(e,t){this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("sv-property-options")[0].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};Jp=Xp([Ci("sv-view-tool-view")],Jp);var Zp=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class Qp extends Up{createView(){return new ef(this)}}Qp.typeName="CVRenderTool",Qp.text="Material",Qp.icon="palette";let ef=class extends Yp{constructor(){super(...arguments),this.viewer=null}firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-render-tool-view")}render(){this.tool;const e=this.activeDocument,t=this.viewer;if(!t)return qs``;const n=t.ins.shader,r=e.setup.language;return qs`<div class="sv-section"><ff-button class="sv-section-lead" title=${r.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-options .property=${n} .language=${r} name=${r.getLocalizedString("Material")}></sv-property-options>
            </div>
        </div>`}onActiveDocument(e,t){this.viewer&&(this.viewer.ins.shader.off("value",this.onUpdate,this),this.viewer=null),t&&(this.viewer=t.setup.viewer,this.viewer.ins.shader.on("value",this.onUpdate,this))}async setFocus(){await this.updateComplete;this.getElementsByTagName("sv-property-options")[0].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};ef=Zp([Ci("sv-render-tool-view")],ef);var tf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class nf extends Up{createView(){return new rf(this)}}nf.typeName="CVEnvironmentTool",nf.text="Environment",nf.icon="environment";let rf=class extends Yp{firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-environment-tool-view")}render(){this.tool;if(!this.activeDocument)return qs`No active document`;const e=this.activeDocument.setup,t=e.grid,n=e.floor,r=e.background,s=r.ins.style.getValidatedValue()===Em.Solid,i=e.environment,o=e.language;return qs`<div class="sv-section"><ff-button class="sv-section-lead" title=${o.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-options .property=${r.ins.style} .language=${o} .options=${["Solid","Linear","Radial"]} name=${o.getLocalizedString("Background")}></sv-property-options>
                <sv-property-color title="Background Color 1" class="sv-nogap" .property=${r.ins.color0} name=" "></sv-property-color>
                ${s?null:qs`<sv-property-color title="Background Color 2" class="sv-nogap" .property=${r.ins.color1} name=" "></sv-property-color>`}
                <sv-property-boolean .property=${t.ins.visible} .language=${o} name=${o.getLocalizedString("Grid")}></sv-property-boolean>
                <sv-property-color title="Grid Color" class="sv-nogap" .property=${t.ins.color} name=" "></sv-property-color>
                <sv-property-boolean .property=${n.ins.visible} .language=${o} name=${o.getLocalizedString("Floor")}></sv-property-boolean>
                <sv-property-color title="Floor Color" class="sv-nogap" .property=${n.ins.color} name=" "></sv-property-color>
                <sv-property-options .property=${i.ins.imageIndex} name="Env Map"></sv-property-options>
            </div>
        </div>`}onActiveDocument(e,t){if(e){e.setup.background.ins.style.off("value",this.onUpdate,this)}if(t){t.setup.background.ins.style.on("value",this.onUpdate,this)}this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("sv-property-options")[0].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};rf=tf([Ci("sv-environment-tool-view")],rf);var sf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let of=class extends Ti{constructor(){super(...arguments),this.property=null,this.name="",this.text=null,this.language=null,this.disabled=!1,this.customLabelStyle=""}firstConnected(){this.classList.add("sv-property-view","sv-property-boolean")}update(e){if(!this.property)throw new Error("missing property attribute");if("boolean"!==this.property.type)throw new Error("not a boolean property");if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=t.replace(/\s/g,""),r=this.text,s=this.language,i=this.customLabelStyle;let o=e.value?Array.isArray(r)?r[1]:r||"On":Array.isArray(r)?r[0]:r||"Off";return qs`<label id="${n}-label" class="ff-label ff-off  ${i}">${t}</label>
        <div title="${t}"><ff-button role="switch" aria-labelledby="${n}-label" aria-checked=${e.value} .text=${s?s.getLocalizedString(o):o} ?disabled=${this.disabled} ?selected=${e.value} @click=${this.onButtonClick}></ff-button></div>`}onButtonClick(e){this.property.setValue(!this.property.value)}};sf([ai({attribute:!1})],of.prototype,"property",void 0),sf([ai({type:String})],of.prototype,"name",void 0),sf([ai({attribute:!1})],of.prototype,"text",void 0),sf([ai({attribute:!1})],of.prototype,"language",void 0),sf([ai({type:Boolean})],of.prototype,"disabled",void 0),sf([ai({type:String})],of.prototype,"customLabelStyle",void 0),of=sf([Ci("sv-property-boolean")],of);class af{constructor(e){this.isEnabled=!0,this._isDragging=!1,this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this.target=e,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),e.addEventListener("pointercancel",this.onPointerUp)}get isDragging(){return this._isDragging}get startX(){return this._startX}get startY(){return this._startY}onPointerDown(e){e.isPrimary&&this.isEnabled&&(this._isDragging=!0,this._startX=this._lastX=e.clientX,this._startY=this._lastY=e.clientY,this.target.setPointerCapture(e.pointerId),this.target.dragStart(e)),e.stopPropagation(),e.preventDefault()}onPointerMove(e){if(e.isPrimary&&this._isDragging){const t=e.clientX-this._lastX;this._lastX=e.clientX;const n=e.clientY-this._lastY;this._lastY=e.clientY,this.target.dragMove(e,t,n)}e.stopPropagation(),e.preventDefault()}onPointerUp(e){this._isDragging&&e.isPrimary&&(this.target.dragEnd(e),this.target.releasePointerCapture(e.pointerId),this._isDragging=!1),e.stopPropagation(),e.preventDefault()}}var lf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let cf=class extends Ti{constructor(){super(),this.direction="horizontal",this.value=0,this._isVertical=!1,this._offsetX=0,this._offsetY=0,this._knob=(new Ti).addClass("ff-knob").setStyle({display:"block",position:"relative "}),new af(this)}dragStart(e){const t=this._knob,n=this.getBoundingClientRect();e.target===this._knob?(this._offsetX=e.clientX-t.offsetLeft+.5*(t.clientWidth-t.offsetWidth),this._offsetY=e.clientY-t.offsetTop+.5*(t.clientHeight-t.offsetHeight)):(this._offsetX=n.left+.8*t.clientWidth,this._offsetY=n.top+.8*t.clientHeight),this.dragMove(e)}dragMove(e){const t=this._knob,n=e.clientX-this._offsetX,r=e.clientY-this._offsetY;let s=this._isVertical?1-r/(this.clientHeight-t.clientHeight):n/(this.clientWidth-t.clientWidth);s=wr.limit(s,0,1),s!==this.value&&(this.value=s,this.emitChangeEvent(!0))}dragEnd(){this.emitChangeEvent(!1)}firstConnected(){this.setStyle({position:"relative",touchAction:"none"}),this.setAttribute("touch-action","none"),this.setAttribute("tabindex","0"),this.classList.add("ff-control","ff-linear-slider"),this.appendChild(this._knob)}update(e){if(e.has("direction")&&(this._isVertical="vertical"===this.direction,this.setClass("ff-horizontal",!this._isVertical),this.setClass("ff-vertical",this._isVertical)),e.has("value")){const e=wr.limit(this.value,0,1),t=this._isVertical?0:100*e,n=this._isVertical?100*(1-e):0;this._knob.style.left=`${t.toFixed(3)}%`,this._knob.style.top=`${n.toFixed(3)}%`}super.update(e)}emitChangeEvent(e){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value,isDragging:e},bubbles:!0}))}};lf([ai({type:String})],cf.prototype,"direction",void 0),lf([ai({type:Number})],cf.prototype,"value",void 0),cf=lf([Ci("ff-linear-slider")],cf);const df=cf;var uf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let hf=class extends Ti{constructor(){super(...arguments),this.property=null,this.name="",this.min=void 0,this.max=void 0}firstConnected(){super.firstConnected(),this.classList.add("sv-property-view","sv-property-slider")}update(e){if(!this.property)throw new Error("missing property attribute");if("number"!==this.property.type)throw new Error(`not a number property: '${this.property.path}'`);if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=e.getValidatedValue(),r=isFinite(this.min)?this.min:e.schema.min,s=isFinite(this.max)?this.max:e.schema.max,i=(n-r)/(s-r);return qs`<label id="${t}-label" class="ff-label ff-off">${t}</label>
            <ff-linear-slider aria-labelledby="${t}-label" aria-valuemin=${r.toString()} aria-valuemax=${s.toString()} aria-valuenow=${n.toFixed(3)} role="slider" .value=${i} @keydown=${this.onKeyDown} @change=${this.onSliderChange}></ff-linear-slider>`}onSliderChange(e){const t=this.property,n=isFinite(this.min)?this.min:t.schema.min,r=isFinite(this.max)?this.max:t.schema.max,s=n+e.detail.value*(r-n);t.setValue(s)}onKeyDown(e){const t=this.property;"ArrowRight"===e.code||"ArrowUp"===e.code||"PageUp"===e.code?t.setValue(this.clamp("PageUp"===e.code?t.value+.1:t.value+.01)):"ArrowLeft"!==e.code&&"ArrowDown"!==e.code&&"PageDown"!==e.code||t.setValue(this.clamp("PageDown"===e.code?t.value-.1:t.value-.01))}clamp(e){const t=this.property,n=isFinite(this.min)?this.min:t.schema.min,r=isFinite(this.max)?this.max:t.schema.max;return Math.min(Math.max(e,n),r)}};uf([ai({attribute:!1})],hf.prototype,"property",void 0),uf([ai({type:String})],hf.prototype,"name",void 0),uf([ai({type:Number})],hf.prototype,"min",void 0),uf([ai({type:Number})],hf.prototype,"max",void 0),hf=uf([Ci("sv-property-slider")],hf);var mf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let pf=class extends Ti{constructor(){super(...arguments),this.name="",this.index=0,this.text="",this.placeholder="",this.align="left",this.initialValue="",this.requestFocus=!1}get inputElement(){return this.getElementsByTagName("input").item(0)}focus(){this.requestFocus=!0,this.performUpdate()}hasFocus(){const e=document.activeElement.shadowRoot?document.activeElement.shadowRoot.activeElement:document.activeElement;return this.inputElement===e}firstConnected(){this.classList.add("ff-control","ff-line-edit")}shouldUpdate(e){return!this.hasFocus()&&super.shouldUpdate(e)}render(){return qs`<input
            type="text" .value=${this.text} placeholder=${this.placeholder}
            @keydown=${this.onKeyDown} @change=${this.onChange} @input=${this.onInput}
            @focus=${this.onFocus} @blur=${this.onBlur}
            style="box-sizing: border-box; width:100%; text-align: ${this.align};">`}updated(){this.requestFocus&&(this.requestFocus=!1,this.inputElement.focus())}onKeyDown(e){const t=e.target;"Enter"===e.key?(this.commit(t),t.blur()):"Escape"===e.key&&(this.revert(t),t.blur())}onChange(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!1)}onInput(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!0)}onFocus(e){this.initialValue=e.target.value,e.target.select()}onBlur(e){this.commit(e.target),this.requestUpdate()}revert(e){e.value=this.initialValue,this.dispatchChangeEvent(e.value,!1)}commit(e){this.initialValue=e.value,this.dispatchChangeEvent(e.value,!1)}dispatchChangeEvent(e,t){this.dispatchEvent(new CustomEvent("change",{detail:{text:e,isEditing:t}}))}};mf([ai({type:String})],pf.prototype,"name",void 0),mf([ai({type:Number})],pf.prototype,"index",void 0),mf([ai({type:String})],pf.prototype,"text",void 0),mf([ai({type:String})],pf.prototype,"placeholder",void 0),mf([ai({type:String})],pf.prototype,"align",void 0),pf=mf([Ci("ff-line-edit")],pf);const ff=pf;var gf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let vf=class extends Ti{constructor(){super(),this.value=new ou,this._offsetX=0,this._offsetY=0,this._knob=(new Ti).addClass("ff-knob").setStyle({display:"block",position:"relative "}),new af(this)}setXY(e,t){this.value.set(e,t),this.requestUpdate()}dragStart(e){const t=this._knob,n=this.getBoundingClientRect();e.target===this._knob?(this._offsetX=e.clientX-t.offsetLeft+.5*(t.clientWidth-t.offsetWidth),this._offsetY=e.clientY-t.offsetTop+.5*(t.clientHeight-t.offsetHeight)):(this._offsetX=n.left+.8*t.clientWidth,this._offsetY=n.top+.8*t.clientHeight),this.dragMove(e)}dragMove(e){const t=this._knob,n=e.clientX-this._offsetX,r=e.clientY-this._offsetY;let s=n/(this.clientWidth-t.clientWidth);s=wr.limit(s,0,1);let i=1-r/(this.clientHeight-t.clientHeight);i=wr.limit(i,0,1),s===this.value.x&&i===this.value.y||(this.value=this.value.set(s,i),this.emitChangeEvent(!0))}dragEnd(){this.emitChangeEvent(!1)}firstConnected(){this.setStyle({position:"relative",touchAction:"none"}),this.setAttribute("touch-action","none"),this.setAttribute("tabindex","0"),this.classList.add("ff-control","ff-vector-slider"),this.appendChild(this._knob)}update(e){const t=100*this.value.x,n=100*(1-this.value.y);this._knob.style.left=`${t.toFixed(3)}%`,this._knob.style.top=`${n.toFixed(3)}%`,super.update(e)}emitChangeEvent(e){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value,isDragging:e},bubbles:!0}))}};gf([ai({attribute:!1})],vf.prototype,"value",void 0),vf=gf([Ci("ff-vector-slider")],vf);const yf=vf;var _f=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const bf=new cu;let wf=class extends Ti{constructor(){super(),this.color=new cu,this.alpha=!1,this.numeric=!1,this.onLumSatChange=this.onLumSatChange.bind(this),this.onHueChange=this.onHueChange.bind(this),this.onAlphaChange=this.onAlphaChange.bind(this),this.addEventListener("click",(e=>e.stopPropagation())),this._hsv=new au,this._lumSatSlider=(new yf).on("change",this.onLumSatChange),this._hueSlider=(new df).addClass("ff-hue-slider").on("change",this.onHueChange),this._hueSlider.direction="vertical"}firstConnected(){this.classList.add("ff-flex-column","ff-control","ff-color-edit")}update(e){e.has("color")&&this.color.toHSV(this._hsv),e.has("alpha")&&(this.alpha&&!this._alphaSlider?(this._alphaSlider=(new df).addClass("ff-alpha-slider").on("change",this.onAlphaChange),this._alphaSlider.direction="vertical"):!this.alpha&&this._alphaSlider&&this._alphaSlider.remove()),super.update(e)}render(){let e=null;if(this.numeric){const t=this.color,n=t.toString(!1).substr(1),r=this.alpha?qs`
                <div class="ff-text">A</div><ff-line-edit name="alphaByte" text=${t.alphaByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
            `:null;e=qs`<div class="ff-flex-row ff-numeric-controls">
                <div class="ff-text">R</div><ff-line-edit name="redByte" text=${t.redByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
                <div class="ff-text">G</div><ff-line-edit name="greenByte" text=${t.greenByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
                <div class="ff-text">B</div><ff-line-edit name="blueByte" text=${t.blueByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
                ${r}
                <div class="ff-text">#</div><ff-line-edit name="string" text=${n} class="ff-wide" align="center" @change=${this.onNumericEdit}></ff-line-edit>
            </div>`}return qs`<div class="ff-flex-row ff-slider-controls" role="application" @keydown=${this.onKeyDown}>
                ${this._lumSatSlider}${this._hueSlider}${this._alphaSlider}
            </div>${e}`}updated(){this._hueSlider.value=1-this._hsv.x/360;const e=`linear-gradient(to bottom, transparent, black), linear-gradient(to right, white, ${bf.setHSV(this._hsv.x).toString(!1)})`;if(this._lumSatSlider.style.backgroundImage=e,this._lumSatSlider.setXY(this._hsv.y,this._hsv.z),this.alpha){const e=this.color.toString(!1),t=getComputedStyle(this._alphaSlider).color,n=`linear-gradient(to top, transparent, ${e}), repeating-linear-gradient(-45deg, transparent, transparent 8px, ${t} 8px, ${t} 16px)`;this._alphaSlider.style.backgroundImage=n,this._alphaSlider.value=this.color.alpha}}onLumSatChange(e){e.stopPropagation();const t=e.detail.value;this._hsv.y=t.x,this._hsv.z=t.y,this.color.setHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(e.detail.isDragging)}onHueChange(e){e.stopPropagation(),this._hsv.x=360*(1-e.target.value),this.color.setHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(e.detail.isDragging)}onAlphaChange(e){e.stopPropagation(),this.color.alpha=e.target.value,this.requestUpdate(),this.emitChangeEvent(e.detail.isDragging)}onNumericEdit(e){e.stopPropagation();const t=e.target.name;if("string"===t)this.color.setString(e.detail.text,1,!1);else{let n=parseInt(e.detail.text);if(!isFinite(n))return;this.color[t]=wr.limit(n,0,255)}this.color.toHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(e.detail.isEditing)}onKeyDown(e){const t="ArrowRight"===e.code||"ArrowUp"===e.code,n="PageUp"===e.code,r="ArrowLeft"===e.code||"ArrowDown"===e.code,s="PageDown"===e.code;if(t||n||r||s)if(e.target===this._hueSlider||e.target===this._alphaSlider){const s=t||n?-1:1,i=t||r?.01:.1;e.target===this._hueSlider?(this._hsv.x=wr.limit(this._hsv.x+360*i*s,0,360),this.color.setHSV(this._hsv)):this.color.alpha=wr.limit(this.color.alpha+i*s,0,1),this.requestUpdate(),this.emitChangeEvent(!1)}else if(e.target===this._lumSatSlider&&(t||r)){const n=t?1:-1,r=e.shiftKey?.1:.01;"ArrowRight"===e.code||"ArrowLeft"===e.code?this._hsv.y=wr.limit(this._hsv.y+r*n,0,1):this._hsv.z=wr.limit(this._hsv.z+r*n,0,1),this.color.setHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(!1)}}emitChangeEvent(e){this.dispatchEvent(new CustomEvent("change",{detail:{color:this.color,isDragging:e},bubbles:!0}))}};_f([ai({attribute:!1})],wf.prototype,"color",void 0),_f([ai({type:Boolean})],wf.prototype,"alpha",void 0),_f([ai({type:Boolean})],wf.prototype,"numeric",void 0),wf=_f([Ci("ff-color-edit")],wf);const xf=wf;function Mf(e){return[...e.querySelectorAll('a[href], button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')].filter((e=>!e.hasAttribute("disabled")&&!e.getAttribute("aria-hidden")&&"-1"!==e.getAttribute("tabindex")))}function Sf(e,t){const n=e[0],r=e[e.length-1];t.shiftKey?t.target===n&&(t.preventDefault(),r.focus()):t.target===r&&(t.preventDefault(),n.focus())}var Tf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Cf=class extends Ti{constructor(){super(),this.property=null,this.name="",this.color=new cu,this.pickerActive=!1,this.onPointerDown=this.onPointerDown.bind(this)}firstConnected(){super.firstConnected(),this.classList.add("sv-property-view","sv-property-color")}connected(){document.addEventListener("pointerdown",this.onPointerDown,{capture:!0,passive:!0})}disconnected(){document.removeEventListener("pointerdown",this.onPointerDown)}update(e){if(!this.property)throw new Error("missing property attribute");if("number"!==this.property.type||3!==this.property.elementCount)throw new Error(`not an color property: '${this.property.path}'`);if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onPropertyChange,this),this.property&&(this.property.on("value",this.onPropertyChange,this),this.color.fromArray(this.property.value))}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=this.color.toString();return qs`<label class="ff-label ff-off">${t}</label>
            <ff-button style="background-color: ${n}" title="${t} Color Picker" @click=${this.onButtonClick}></ff-button>
            ${this.pickerActive?qs`<ff-color-edit .color=${this.color} @keydown=${e=>this.onKeyDown(e)} @change=${this.onColorEditChange}></ff-color-edit>`:null}`}async setPickerFocus(){await this.updateComplete;Mf(this.getElementsByTagName("ff-color-edit").item(0))[0].focus()}onButtonClick(e){this.pickerActive=!this.pickerActive,this.requestUpdate(),this.pickerActive&&this.setPickerFocus()}onColorEditChange(e){this.property.setValue(e.detail.color.toRGBArray())}onPropertyChange(e){this.color.fromArray(e),this.requestUpdate()}onPointerDown(e){this.pickerActive&&(e.composedPath()[0]instanceof Node&&this.contains(e.composedPath()[0])||(this.pickerActive=!1,this.requestUpdate()))}onKeyDown(e){if("Escape"===e.code)e.preventDefault(),e.stopPropagation(),this.pickerActive=!1,this.requestUpdate(),this.getElementsByTagName("ff-button")[0].focus();else if("Tab"===e.code){Sf(Mf(this.getElementsByTagName("ff-color-edit")[0]),e)}}};Tf([ai({attribute:!1})],Cf.prototype,"property",void 0),Tf([ai({type:String})],Cf.prototype,"name",void 0),Cf=Tf([Ci("sv-property-color")],Cf);var Ef=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class kf extends Up{constructor(){super(...arguments),this.lights=[],this.ins=this.addInputs(kf.ins),this.outs=this.addOutputs(kf.outs)}update(e){return this.outs.light.setValue(this.lights[this.ins.light.getValidatedValue()]),!0}createView(){return new Lf(this)}onActiveDocument(e,t){this.lights=t?t.getInnerComponents(vd):[],this.ins.light.setOptions(this.lights.map((e=>e.node.name))),this.outs.light.setValue(this.lights[0]),super.onActiveDocument(e,t)}}kf.typeName="CVLightTool",kf.text="Lights",kf.icon="bulb",kf.ins={light:I("Tool.Light",[])},kf.outs={light:z("Tool.SelectedLight",vd)};let Lf=class extends Yp{constructor(){super(...arguments),this.lights=null}firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-light-tool-view")}connected(){super.connected(),this.tool.outs.light.on("value",this.onUpdate,this)}disconnected(){this.tool.outs.light.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.tool,t=e.lights,n=this.activeDocument;if(!t||!n)return qs`No editable lights in this scene.`;const r=e.outs.light.value,s=n.setup.navigation,i=n.setup.language,o=r?qs`<div class="sv-section">
            <ff-button class="sv-section-lead" transparent tabbingIndex="-1" icon="cog"></ff-button>
            <div class="sv-tool-controls">
                <!-- <sv-property-boolean .property=${r.ins.visible} name="Switch"></sv-property-boolean> -->
                <sv-property-slider .property=${r.ins.intensity} name=${i.getLocalizedString("Intensity")} min="0" max="2"></sv-property-slider>
                <sv-property-color .property=${r.ins.color} name=${i.getLocalizedString("Color")}></sv-property-color>
            </div>
        </div>`:null;return qs`${o}<div class="sv-section"><ff-button class="sv-section-lead" title=${i.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <!-- <sv-property-boolean .property=${s.ins.lightsFollowCamera} name="Follow Camera"></sv-property-boolean> -->
                <sv-property-options .property=${e.ins.light} .language=${i} name=${i.getLocalizedString("Select Scene Light")}></sv-property-options>
            </div>
        </div>`}onActiveDocument(e,t){e&&e.setup.navigation.ins.lightsFollowCamera.off("value",this.onUpdate,this),t&&t.setup.navigation.ins.lightsFollowCamera.on("value",this.onUpdate,this),this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("sv-property-options")[0].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};Lf=Ef([Ci("sv-light-tool-view")],Lf);var Af=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Df=class extends Ti{constructor(){super(...arguments),this.property=null,this.name=""}firstConnected(){this.classList.add("sv-property-view","sv-property-string")}update(e){if(!this.property)throw new Error("missing property attribute");if("string"!==this.property.type)throw new Error(`not a string property: '${this.property.path}'`);if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=e.value;return qs`<label class="ff-label ff-off">${t}</label>
            <div class="ff-string">${n}</div>`}};Af([ai({attribute:!1})],Df.prototype,"property",void 0),Af([ai({type:String})],Df.prototype,"name",void 0),Df=Af([Ci("sv-property-string")],Df);var Of=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class Rf extends Up{createView(){return new Pf(this)}}Rf.typeName="CVTapeTool",Rf.text="Measure",Rf.icon="tape";let Pf=class extends Yp{constructor(){super(...arguments),this.firstRender=!0,this.statusMsg=""}firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-tape-tool-view")}render(){const e=this.activeDocument;if(!e)return qs``;this.tool;const t=e.setup.tape,n=t.ins.enabled,r=t.outs.state.value,s=t.outs.distance.value,i=e.setup.language;let o;if(n.value)if(0===s)o=i.getLocalizedString("Tap on model to set start of tape")+".";else if(r===ep.SetStart){const t=e.root.scene.ins.units.getOptionText();o=`${s.toFixed(2)} ${t}`}else o=i.getLocalizedString("Tap on model to set end of tape")+".";else o=i.getLocalizedString("Switch on to take measurements")+".";return this.statusMsg=o,qs`<div class="sv-section"><ff-button class="sv-section-lead" title=${i.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-boolean .property=${n} .language=${i} name=${i.getLocalizedString("Tape Tool")}></sv-property-boolean>
                <div class="sv-property-view"><label class="ff-label ff-off">${i.getLocalizedString("Measured Distance")}</label>
                <div class="ff-string" aria-live="polite" aria-atomic="true"></div></div>
            </div></div>`}updated(e){super.updated(e);const t=this.getElementsByClassName("ff-string").item(0);t&&(t.innerHTML=this.statusMsg,this.firstRender&&(setTimeout((()=>{t.innerHTML=`<div>${this.statusMsg}</div>`}),200),this.firstRender=!1))}onActiveDocument(e,t){e&&e.setup.tape.off("update",this.onUpdate,this),t&&t.setup.tape.on("update",this.onUpdate,this),this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("ff-button")[1].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};Pf=Of([Ci("sv-tape-tool-view")],Pf);var Nf=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class If extends Up{createView(){return new zf(this)}}If.typeName="CVSliceTool",If.text="Slice",If.icon="knife";let zf=class extends Yp{firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-slice-tool-view")}render(){const e=this.activeDocument;if(!e)return qs``;this.tool;const t=e.setup.slicer,n=t.ins.enabled,r=t.ins.axis,s=t.ins.position,i=e.setup.language;return qs`<div class="sv-section"><ff-button class="sv-section-lead" title=${i.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-boolean .property=${n} .language=${i} name=${i.getLocalizedString("Slice Tool")}></sv-property-boolean>
                <sv-property-options .property=${r} .language=${i} name=${i.getLocalizedString("Axis")}></sv-property-options>
                <sv-property-slider .property=${s} name=${i.getLocalizedString("Position")}></sv-property-slider>
            </div>
        </div>`}onActiveDocument(e,t){this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("ff-button")[1].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};zf=Nf([Ci("sv-slice-tool-view")],zf);class Bf extends ${get toolProvider(){return this.getComponent(Vp)}createComponents(){this.createComponent(Vp),this.createComponent(Kp),this.createComponent(Qp),this.createComponent(nf),this.createComponent(kf),this.createComponent(Rf),this.createComponent(If)}}Bf.typeName="NVTools";const Ff=[Op,Vp,Kp,Qp,nf,kf,Rf,If,Bf];class Hf{constructor(e,t,n){this._type=e,this._callback=t,this._context=n,this._publishers=[]}on(...e){return e.forEach((e=>{this._publishers.push(e),e.on(this._type,this._callback,this._context)})),this}off(){return this._publishers.forEach((e=>e.off(this._type,this._callback,this._context))),this._publishers.length=0,this}}class jf{constructor(e){this.next=null,this.activePositions=[],this.activeType="",this.centerX=0,this.centerY=0,this.startX=0,this.startY=0,this.isDragging=!1,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUpOrCancel=this.onPointerUpOrCancel.bind(this),this.onDoubleClick=this.onDoubleClick.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),e&&(e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUpOrCancel),e.addEventListener("pointercancel",this.onPointerUpOrCancel),e.addEventListener("contextmenu",this.onContextMenu),e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown))}onPointerDown(e){if(this.activeType&&e.pointerType!==this.activeType)return;0===this.activePositions.length&&(this.startX=e.clientX,this.startY=e.clientY,this.isDragging=!1),this.activeType=e.pointerType,this.activePositions.push({id:e.pointerId,clientX:e.clientX,clientY:e.clientY}),e.currentTarget.setPointerCapture(e.pointerId);const t=this.createManipPointerEvent(e,"pointer-down");this.sendPointerEvent(t)&&e.stopPropagation()}onPointerMove(e){const t=this.activePositions;for(let n=0,r=t.length;n<r;++n){const r=t[n];e.pointerId===r.id&&(r.clientX=e.clientX,r.clientY=e.clientY)}if(t.length>0&&!this.isDragging){Math.abs(e.clientX-this.startX)+Math.abs(e.clientY-this.startY)>4&&(this.isDragging=!0)}const n=t.length?"pointer-move":"pointer-hover",r=this.createManipPointerEvent(e,n);this.sendPointerEvent(r)&&e.stopPropagation()}onPointerUpOrCancel(e){const t=this.activePositions;let n=!1;for(let r=0,s=t.length;r<s;++r)if(e.pointerId===t[r].id){t.splice(r,1),n=!0;break}if(!n)return;const r=this.createManipPointerEvent(e,"pointer-up");0===t.length&&(this.activeType=""),this.sendPointerEvent(r)&&e.stopPropagation(),e.preventDefault()}onDoubleClick(e){this.sendTriggerEvent(this.createManipTriggerEvent(e,"double-click"))&&e.preventDefault()}onContextMenu(e){this.sendTriggerEvent(this.createManipTriggerEvent(e,"context-menu")),e.preventDefault()}onWheel(e){this.sendTriggerEvent(this.createManipTriggerEvent(e,"wheel"))&&e.preventDefault()}onKeyDown(e){this.sendKeyboardEvent(this.createManipKeyboardEvent(e))}createManipPointerEvent(e,t){let n=0,r=0,s=0,i=0,o=0,a=0;const l=this.activePositions,c=l.length;if(c>0){for(let e=0;e<c;++e)n+=l[e].clientX,r+=l[e].clientY;n/=c,r/=c,"pointer-move"!==t&&"pointer-hover"!==t||(o=n-this.centerX,a=r-this.centerY),this.centerX=n,this.centerY=r}else n=this.centerX,r=this.centerY;const d=e.currentTarget;if(d instanceof Element){const t=d.getBoundingClientRect();s=e.clientX-t.left,i=e.clientY-t.top}return{originalEvent:e,type:t,source:e.pointerType,isPrimary:e.isPrimary,isDragging:this.isDragging,activePositions:l,pointerCount:c,centerX:n,centerY:r,localX:s,localY:i,movementX:o,movementY:a,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}}createManipTriggerEvent(e,t){let n=0;"wheel"===t&&(n=e.deltaY);let r=0,s=0;const i=e.currentTarget;if(i instanceof Element){const t=i.getBoundingClientRect();r=e.clientX-t.left,s=e.clientY-t.top}return{originalEvent:e,type:t,wheel:n,centerX:e.clientX,centerY:e.clientY,localX:r,localY:s,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}}createManipKeyboardEvent(e){return{originalEvent:e,type:"keydown",key:e.code,centerX:0,centerY:0,localX:0,localY:0,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}}sendPointerEvent(e){return this.next&&this.next.onPointer(e)}sendTriggerEvent(e){return this.next&&this.next.onTrigger(e)}sendKeyboardEvent(e){return this.next&&this.next.onKeypress(e)}}function Uf(){let e=null,t=!1,n=null,r=null;function s(t,i){n(t,i),r=e.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(s),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Yf(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,s){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const i=r.get(t);void 0===i?r.set(t,function(t,r){const s=t.array,i=t.usage,o=e.createBuffer();let a;if(e.bindBuffer(r,o),e.bufferData(r,s,i),t.onUploadCallback(),s instanceof Float32Array)a=e.FLOAT;else if(s instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=e.HALF_FLOAT}else a=e.UNSIGNED_SHORT;else if(s instanceof Int16Array)a=e.SHORT;else if(s instanceof Uint32Array)a=e.UNSIGNED_INT;else if(s instanceof Int32Array)a=e.INT;else if(s instanceof Int8Array)a=e.BYTE;else if(s instanceof Uint8Array)a=e.UNSIGNED_BYTE;else{if(!(s instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+s);a=e.UNSIGNED_BYTE}return{buffer:o,type:a,bytesPerElement:s.BYTES_PER_ELEMENT,version:t.version}}(t,s)):i.version<t.version&&(!function(t,r,s){const i=r.array,o=r.updateRange;e.bindBuffer(s,t),-1===o.count?e.bufferSubData(s,0,i):(n?e.bufferSubData(s,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count):e.bufferSubData(s,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,t,s),i.version=t.version)}}}class Vf extends Ln{constructor(e=1,t=1,n=1,r=1,s=1,i=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:i};const o=this;r=Math.floor(r),s=Math.floor(s),i=Math.floor(i);const a=[],l=[],c=[],d=[];let u=0,h=0;function m(e,t,n,r,s,i,m,p,f,g,v){const y=i/f,_=m/g,b=i/2,w=m/2,x=p/2,M=f+1,S=g+1;let T=0,C=0;const E=new he;for(let i=0;i<S;i++){const o=i*_-w;for(let a=0;a<M;a++){const u=a*y-b;E[e]=u*r,E[t]=o*s,E[n]=x,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=p>0?1:-1,c.push(E.x,E.y,E.z),d.push(a/f),d.push(1-i/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<f;t++){const n=u+t+M*e,r=u+t+M*(e+1),s=u+(t+1)+M*(e+1),i=u+(t+1)+M*e;a.push(n,r,i),a.push(r,s,i),C+=6}o.addGroup(h,C,v),h+=C,u+=T}m("z","y","x",-1,-1,n,t,e,i,s,0),m("z","y","x",1,-1,n,t,-e,i,s,1),m("x","z","y",1,1,e,n,t,r,i,2),m("x","z","y",1,-1,e,n,-t,r,i,3),m("x","y","z",1,-1,e,t,n,r,s,4),m("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(a),this.setAttribute("position",new _n(l,3)),this.setAttribute("normal",new _n(c,3)),this.setAttribute("uv",new _n(d,2))}static fromJSON(e){return new Vf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $f(e,t,n,r,s,i,o){const a=new un(0);let l,c,d=!0===i?0:1,u=null,h=0,m=null;function p(e,t){r.buffers.color.setClear(e.r,e.g,e.b,t,o)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),d=t,p(a,d)},getClearAlpha:function(){return d},setClearAlpha:function(e){d=e,p(a,d)},render:function(r,i){let o=!1,f=!0===i.isScene?i.background:null;if(f&&f.isTexture){f=(i.backgroundBlurriness>0?n:t).get(f)}const g=e.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(f=null),null===f?p(a,d):f&&f.isColor&&(p(f,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===bt)?(void 0===c&&(c=new Qo(new Vf(1,1,1),new or({name:"BackgroundCubeMaterial",uniforms:rr(ic.backgroundCube.uniforms),vertexShader:ic.backgroundCube.vertexShader,fragmentShader:ic.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(c)),c.material.uniforms.envMap.value=f,c.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=i.backgroundBlurriness,u===f&&h===f.version&&m===e.toneMapping||(c.material.needsUpdate=!0,u=f,h=f.version,m=e.toneMapping),c.layers.enableAll(),r.unshift(c,c.geometry,c.material,0,0,null)):f&&f.isTexture&&(void 0===l&&(l=new Qo(new eh(2,2),new or({name:"BackgroundMaterial",uniforms:rr(ic.background.uniforms),vertexShader:ic.background.vertexShader,fragmentShader:ic.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(l)),l.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),l.material.uniforms.uvTransform.value.copy(f.matrix),u===f&&h===f.version&&m===e.toneMapping||(l.material.needsUpdate=!0,u=f,h=f.version,m=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function Wf(e,t,n,r){const s=e.getParameter(e.MAX_VERTEX_ATTRIBS),i=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==i,a={},l=m(null);let c=l,d=!1;function u(t){return r.isWebGL2?e.bindVertexArray(t):i.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):i.deleteVertexArrayOES(t)}function m(e){const t=[],n=[],r=[];for(let e=0;e<s;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){g(e,0)}function g(n,s){const i=c.newAttributes,o=c.enabledAttributes,a=c.attributeDivisors;if(i[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),a[n]!==s){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,s),a[n]=s}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,s=n.length;r<s;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,s,i,o,a){!0!==r.isWebGL2||s!==e.INT&&s!==e.UNSIGNED_INT?e.vertexAttribPointer(t,n,s,i,o,a):e.vertexAttribIPointer(t,n,s,o,a)}function _(){b(),d=!0,c!==l&&(c=l,u(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(s,l,h,_,b){let w=!1;if(o){const t=function(t,n,s){const o=!0===s.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let d=c[o];void 0===d&&(d=m(r.isWebGL2?e.createVertexArray():i.createVertexArrayOES()),c[o]=d);return d}(_,h,l);c!==t&&(c=t,u(c.object)),w=function(e,t,n,r){const s=c.attributes,i=t.attributes;let o=0;const a=n.getAttributes();for(const t in a){if(a[t].location>=0){const n=s[t];let r=i[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;o++}}return c.attributesNum!==o||c.index!==r}(s,_,h,b),w&&function(e,t,n,r){const s={},i=t.attributes;let o=0;const a=n.getAttributes();for(const t in a){if(a[t].location>=0){let n=i[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),s[t]=r,o++}}c.attributes=s,c.attributesNum=o,c.index=r}(s,_,h,b)}else{const e=!0===l.wireframe;c.geometry===_.id&&c.program===h.id&&c.wireframe===e||(c.geometry=_.id,c.program=h.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(w||d)&&(d=!1,function(s,i,o,a){if(!1===r.isWebGL2&&(s.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=a.attributes,c=o.getAttributes(),d=i.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let i=l[t];if(void 0===i&&("instanceMatrix"===t&&s.instanceMatrix&&(i=s.instanceMatrix),"instanceColor"===t&&s.instanceColor&&(i=s.instanceColor)),void 0!==i){const t=i.normalized,o=i.itemSize,l=n.get(i);if(void 0===l)continue;const c=l.buffer,d=l.type,u=l.bytesPerElement;if(i.isInterleavedBufferAttribute){const n=i.data,l=n.stride,h=i.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==s.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,d,t,l*u,(h+o/r.locationSize*e)*u)}else{if(i.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,i.meshPerAttribute);!0!==s.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<r.locationSize;e++)f(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,d,t,o*u,o/r.locationSize*e*u)}}else if(void 0!==d){const n=d[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(s,l,h,_),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:_,resetDefaultState:b,dispose:function(){_();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:v}}function Gf(e,t,n,r){const s=r.isWebGL2;let i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,a){if(0===a)return;let l,c;if(s)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](i,r,o,a),n.update(o,i,a)}}function qf(e,t,n){let r;function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const i="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=s(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=i||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),m=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=u>0,_=i||t.has("OES_texture_float");return{isWebGL2:i,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:m,maxAttributes:p,maxVertexUniforms:f,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:i?e.getParameter(e.MAX_SAMPLES):0}}function Xf(e){const t=this;let n=null,r=0,s=!1,i=!1;const o=new Gr,a=new tt,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function d(e,n,r,s){const i=null!==e?e.length:0;let c=null;if(0!==i){if(c=l.value,!0!==s||null===c){const t=r+4*i,s=n.matrixWorldInverse;a.getNormalMatrix(s),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==i;++t,n+=4)o.copy(e[t]).applyMatrix4(s,a),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){const o=0!==e.length||t||0!==r||s;return s=t,n=d(e,i,0),r=e.length,o},this.beginShadows=function(){i=!0,d(null)},this.endShadows=function(){i=!1,c()},this.setState=function(t,o,a){const u=t.clippingPlanes,h=t.clipIntersection,m=t.clipShadows,p=e.get(t);if(!s||null===u||0===u.length||i&&!m)i?d(null):c();else{const e=i?0:r,t=4*e;let s=p.clippingState||null;l.value=s,s=d(u,o,t,a);for(let e=0;e!==t;++e)s[e]=n[e];p.clippingState=s,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}const Kf=90;class Jf extends ft{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new mo(Kf,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new he(1,0,0)),this.add(r);const s=new mo(Kf,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new he(-1,0,0)),this.add(s);const i=new mo(Kf,1,e,t);i.layers=this.layers,i.up.set(0,0,1),i.lookAt(new he(0,1,0)),this.add(i);const o=new mo(Kf,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new he(0,-1,0)),this.add(o);const a=new mo(Kf,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new he(0,0,1)),this.add(a);const l=new mo(Kf,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new he(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,i,o,a,l]=this.children,c=e.getRenderTarget(),d=e.toneMapping,u=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,i),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=u,n.texture.needsPMREMUpdate=!0}}class Zf extends er{constructor(e,t,n,r,s,i,o,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:vt,n,r,s,i,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Qf extends nr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Zf(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Et}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Vf(5,5,5),s=new or({name:"CubemapFromEquirect",uniforms:rr(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const i=new Qo(r,s),o=t.minFilter;t.minFilter===kt&&(t.minFilter=Et);return new Jf(1,10,this).update(e,i),t.minFilter=o,i.geometry.dispose(),i.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,r);e.setRenderTarget(s)}}function eg(e){let t=new WeakMap;function n(e,t){return t===_t?e.mapping=vt:304===t&&(e.mapping=yt),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const s=t.get(n);void 0!==s&&(t.delete(n),s.dispose())}return{get:function(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){const i=s.mapping;if(i===_t||304===i){if(t.has(s)){return n(t.get(s).texture,s.mapping)}{const i=s.image;if(i&&i.height>0){const o=new Qf(i.height/2);return o.fromEquirectangularTexture(e,s),t.set(s,o),s.addEventListener("dispose",r),n(o.texture,s.mapping)}return null}}}return s},dispose:function(){t=new WeakMap}}}const tg=[.125,.215,.35,.446,.526,.582],ng=20,rg=new ns,sg=new un;let ig=null;const og=(1+Math.sqrt(5))/2,ag=1/og,lg=[new he(1,1,1),new he(-1,1,1),new he(1,1,-1),new he(-1,1,-1),new he(0,og,ag),new he(0,og,-ag),new he(ag,0,og),new he(-ag,0,og),new he(og,ag,0),new he(-og,ag,0)];class cg{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){ig=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=mg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=hg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ig),e.scissorTest=!1,ug(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===vt||e.mapping===yt?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ig=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Et,minFilter:Et,generateMipmaps:!1,type:Ot,format:Pt,encoding:Vt,depthBuffer:!1},r=dg(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=dg(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let s=e;const i=e-4+1+tg.length;for(let o=0;o<i;o++){const i=Math.pow(2,s);n.push(i);let a=1/i;o>e-4?a=tg[o-e+4-1]:0===o&&(a=0),r.push(a);const l=1/(i-2),c=-l,d=1+l,u=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,m=6,p=3,f=2,g=1,v=new Float32Array(p*m*h),y=new Float32Array(f*m*h),_=new Float32Array(g*m*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*m*e),y.set(u,f*m*e);const s=[e,e,e,e,e,e];_.set(s,g*m*e)}const b=new Ln;b.setAttribute("position",new gn(v,p)),b.setAttribute("uv",new gn(y,f)),b.setAttribute("faceIndex",new gn(_,g)),t.push(b),s>4&&s--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(ng),s=new he(0,1,0);return new or({name:"SphericalGaussianBlur",defines:{n:ng,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:pg(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new Qo(this._lodPlanes[0],e);this._renderer.compile(t,rg)}_sceneToCubeUV(e,t,n,r){const s=new mo(90,1,t,n),i=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(sg),a.toneMapping=0,a.autoClear=!1;const d=new wo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new Qo(new Vf,d);let h=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,h=!0):(d.color.copy(sg),h=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(s.up.set(0,i[t],0),s.lookAt(o[t],0,0)):1===n?(s.up.set(0,0,i[t]),s.lookAt(0,o[t],0)):(s.up.set(0,i[t],0),s.lookAt(0,0,o[t]));const l=this._cubeSize;ug(r,n*l,t>2?l:0,l,l),a.setRenderTarget(r),h&&a.render(u,s),a.render(e,s)}u.geometry.dispose(),u.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=m}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===vt||e.mapping===yt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=mg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=hg());const s=r?this._cubemapMaterial:this._equirectMaterial,i=new Qo(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const o=this._cubeSize;ug(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(i,rg)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=lg[(t-1)%lg.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,s){const i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",s),this._halfBlur(i,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,i,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Qo(this._lodPlanes[r],l),d=l.uniforms,u=this._sizeLods[n]-1,h=isFinite(s)?Math.PI/(2*u):2*Math.PI/39,m=s/h,p=isFinite(s)?1+Math.floor(3*m):ng;p>ng&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const f=[];let g=0;for(let e=0;e<ng;++e){const t=e/m,n=Math.exp(-t*t/2);f.push(n),0===e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<f.length;e++)f[e]=f[e]/g;d.envMap.value=e.texture,d.samples.value=p,d.weights.value=f,d.latitudinal.value="latitudinal"===i,o&&(d.poleAxis.value=o);const{_lodMax:v}=this;d.dTheta.value=h,d.mipInt.value=v-n;const y=this._sizeLods[r];ug(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(t),a.render(c,rg)}}function dg(e,t,n){const r=new nr(e,t,n);return r.texture.mapping=bt,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ug(e,t,n,r,s){e.viewport.set(t,n,r,s),e.scissor.set(t,n,r,s)}function hg(){return new or({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:pg(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function mg(){return new or({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:pg(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function pg(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function fg(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const s=t.get(n);void 0!==s&&(t.delete(n),s.dispose())}return{get:function(s){if(s&&s.isTexture){const i=s.mapping,o=i===_t||304===i,a=i===vt||i===yt;if(o||a){if(s.isRenderTargetTexture&&!0===s.needsPMREMUpdate){s.needsPMREMUpdate=!1;let r=t.get(s);return null===n&&(n=new cg(e)),r=o?n.fromEquirectangular(s,r):n.fromCubemap(s,r),t.set(s,r),r.texture}if(t.has(s))return t.get(s).texture;{const i=s.image;if(o&&i&&i.height>0||a&&i&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(i)){null===n&&(n=new cg(e));const i=o?n.fromEquirectangular(s):n.fromCubemap(s);return t.set(s,i),s.addEventListener("dispose",r),i.texture}return null}}}return s},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function gg(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function vg(e,t,n,r){const s={},i=new WeakMap;function o(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const e in a.attributes)t.remove(a.attributes[e]);a.removeEventListener("dispose",o),delete s[a.id];const l=i.get(a);l&&(t.remove(l),i.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,s=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],s=e[t+1],i=e[t+2];n.push(r,s,s,i,i,r)}}else{const e=s.array;o=s.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,s=t+2;n.push(e,r,r,s,s,e)}}const a=new(bn(n)?yn:vn)(n,1);a.version=o;const l=i.get(e);l&&t.remove(l),i.set(e,a)}return{get:function(e,t){return!0===s[t.id]||(t.addEventListener("dispose",o),s[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER);const s=n.morphAttributes;for(const n in s){const r=s[n];for(let n=0,s=r.length;n<s;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=i.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return i.get(e)}}}function yg(e,t,n,r){const s=r.isWebGL2;let i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i,1)},this.renderInstances=function(r,l,c){if(0===c)return;let d,u;if(s)d=e,u="drawElementsInstanced";else if(d=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===d)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[u](i,l,o,r*a,c),n.update(l,i,c)}}function _g(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,s){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=s*(n/3);break;case e.LINES:t.lines+=s*(n/2);break;case e.LINE_STRIP:t.lines+=s*(n-1);break;case e.LINE_LOOP:t.lines+=s*n;break;case e.POINTS:t.points+=s*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}class bg extends er{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=St,this.minFilter=St,this.wrapR=xt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function wg(e,t){return e[0]-t[0]}function xg(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Mg(e,t,n){const r={},s=new Float32Array(8),i=new WeakMap,o=new tr,a=[];for(let e=0;e<8;e++)a[e]=[e,0];return{update:function(l,c,d,u){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==m?m.length:0;let f=i.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const y=void 0!==c.morphAttributes.position,_=void 0!==c.morphAttributes.normal,b=void 0!==c.morphAttributes.color,w=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],M=c.morphAttributes.color||[];let S=0;!0===y&&(S=1),!0===_&&(S=2),!0===b&&(S=3);let T=c.attributes.position.count*S,C=1;T>t.maxTextureSize&&(C=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);const E=new Float32Array(T*C*4*p),k=new bg(E,T,C,p);k.type=Dt,k.needsUpdate=!0;const L=4*S;for(let D=0;D<p;D++){const O=w[D],R=x[D],P=M[D],N=T*C*4*D;for(let I=0;I<O.count;I++){const z=I*L;!0===y&&(o.fromBufferAttribute(O,I),E[N+z+0]=o.x,E[N+z+1]=o.y,E[N+z+2]=o.z,E[N+z+3]=0),!0===_&&(o.fromBufferAttribute(R,I),E[N+z+4]=o.x,E[N+z+5]=o.y,E[N+z+6]=o.z,E[N+z+7]=0),!0===b&&(o.fromBufferAttribute(P,I),E[N+z+8]=o.x,E[N+z+9]=o.y,E[N+z+10]=o.z,E[N+z+11]=4===P.itemSize?o.w:1)}}function A(){k.dispose(),i.delete(c),c.removeEventListener("dispose",A)}f={count:p,texture:k,size:new mn(T,C)},i.set(c,f),c.addEventListener("dispose",A)}let g=0;for(let B=0;B<h.length;B++)g+=h[B];const v=c.morphTargetsRelative?1:1-g;u.getUniforms().setValue(e,"morphTargetBaseInfluence",v),u.getUniforms().setValue(e,"morphTargetInfluences",h),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const F=void 0===h?0:h.length;let H=r[c.id];if(void 0===H||H.length!==F){H=[];for(let $=0;$<F;$++)H[$]=[$,0];r[c.id]=H}for(let W=0;W<F;W++){const G=H[W];G[0]=W,G[1]=h[W]}H.sort(xg);for(let q=0;q<8;q++)q<F&&H[q][1]?(a[q][0]=H[q][0],a[q][1]=H[q][1]):(a[q][0]=Number.MAX_SAFE_INTEGER,a[q][1]=0);a.sort(wg);const j=c.morphAttributes.position,U=c.morphAttributes.normal;let Y=0;for(let X=0;X<8;X++){const K=a[X],J=K[0],Z=K[1];J!==Number.MAX_SAFE_INTEGER&&Z?(j&&c.getAttribute("morphTarget"+X)!==j[J]&&c.setAttribute("morphTarget"+X,j[J]),U&&c.getAttribute("morphNormal"+X)!==U[J]&&c.setAttribute("morphNormal"+X,U[J]),s[X]=Z,Y+=Z):(j&&!0===c.hasAttribute("morphTarget"+X)&&c.deleteAttribute("morphTarget"+X),U&&!0===c.hasAttribute("morphNormal"+X)&&c.deleteAttribute("morphNormal"+X),s[X]=0)}const V=c.morphTargetsRelative?1:1-Y;u.getUniforms().setValue(e,"morphTargetBaseInfluence",V),u.getUniforms().setValue(e,"morphTargetInfluences",s)}}}}function Sg(e,t,n,r){let s=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const a=r.render.frame,l=o.geometry,c=t.get(o,l);return s.get(c)!==a&&(t.update(c),s.set(c,a)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",i)&&o.addEventListener("dispose",i),n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER)),c},dispose:function(){s=new WeakMap}}}class Tg extends er{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=St,this.minFilter=St,this.wrapR=xt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Cg=new er,Eg=new bg,kg=new Tg,Lg=new Zf,Ag=[],Dg=[],Og=new Float32Array(16),Rg=new Float32Array(9),Pg=new Float32Array(4);function Ng(e,t,n){const r=e[0];if(r<=0||r>0)return e;const s=t*n;let i=Ag[s];if(void 0===i&&(i=new Float32Array(s),Ag[s]=i),0!==t){r.toArray(i,0);for(let r=1,s=0;r!==t;++r)s+=n,e[r].toArray(i,s)}return i}function Ig(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function zg(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Bg(e,t){let n=Dg[t];void 0===n&&(n=new Int32Array(t),Dg[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Fg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Hg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ig(n,t))return;e.uniform2fv(this.addr,t),zg(n,t)}}function jg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ig(n,t))return;e.uniform3fv(this.addr,t),zg(n,t)}}function Ug(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ig(n,t))return;e.uniform4fv(this.addr,t),zg(n,t)}}function Yg(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ig(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),zg(n,t)}else{if(Ig(n,r))return;Pg.set(r),e.uniformMatrix2fv(this.addr,!1,Pg),zg(n,r)}}function Vg(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ig(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),zg(n,t)}else{if(Ig(n,r))return;Rg.set(r),e.uniformMatrix3fv(this.addr,!1,Rg),zg(n,r)}}function $g(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ig(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),zg(n,t)}else{if(Ig(n,r))return;Og.set(r),e.uniformMatrix4fv(this.addr,!1,Og),zg(n,r)}}function Wg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Gg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ig(n,t))return;e.uniform2iv(this.addr,t),zg(n,t)}}function qg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ig(n,t))return;e.uniform3iv(this.addr,t),zg(n,t)}}function Xg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ig(n,t))return;e.uniform4iv(this.addr,t),zg(n,t)}}function Kg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Jg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ig(n,t))return;e.uniform2uiv(this.addr,t),zg(n,t)}}function Zg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ig(n,t))return;e.uniform3uiv(this.addr,t),zg(n,t)}}function Qg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ig(n,t))return;e.uniform4uiv(this.addr,t),zg(n,t)}}function ev(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTexture2D(t||Cg,s)}function tv(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTexture3D(t||kg,s)}function nv(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTextureCube(t||Lg,s)}function rv(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTexture2DArray(t||Eg,s)}function sv(e,t){e.uniform1fv(this.addr,t)}function iv(e,t){const n=Ng(t,this.size,2);e.uniform2fv(this.addr,n)}function ov(e,t){const n=Ng(t,this.size,3);e.uniform3fv(this.addr,n)}function av(e,t){const n=Ng(t,this.size,4);e.uniform4fv(this.addr,n)}function lv(e,t){const n=Ng(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function cv(e,t){const n=Ng(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function dv(e,t){const n=Ng(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function uv(e,t){e.uniform1iv(this.addr,t)}function hv(e,t){e.uniform2iv(this.addr,t)}function mv(e,t){e.uniform3iv(this.addr,t)}function pv(e,t){e.uniform4iv(this.addr,t)}function fv(e,t){e.uniform1uiv(this.addr,t)}function gv(e,t){e.uniform2uiv(this.addr,t)}function vv(e,t){e.uniform3uiv(this.addr,t)}function yv(e,t){e.uniform4uiv(this.addr,t)}function _v(e,t,n){const r=this.cache,s=t.length,i=Bg(n,s);Ig(r,i)||(e.uniform1iv(this.addr,i),zg(r,i));for(let e=0;e!==s;++e)n.setTexture2D(t[e]||Cg,i[e])}function bv(e,t,n){const r=this.cache,s=t.length,i=Bg(n,s);Ig(r,i)||(e.uniform1iv(this.addr,i),zg(r,i));for(let e=0;e!==s;++e)n.setTexture3D(t[e]||kg,i[e])}function wv(e,t,n){const r=this.cache,s=t.length,i=Bg(n,s);Ig(r,i)||(e.uniform1iv(this.addr,i),zg(r,i));for(let e=0;e!==s;++e)n.setTextureCube(t[e]||Lg,i[e])}function xv(e,t,n){const r=this.cache,s=t.length,i=Bg(n,s);Ig(r,i)||(e.uniform1iv(this.addr,i),zg(r,i));for(let e=0;e!==s;++e)n.setTexture2DArray(t[e]||Eg,i[e])}class Mv{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Fg;case 35664:return Hg;case 35665:return jg;case 35666:return Ug;case 35674:return Yg;case 35675:return Vg;case 35676:return $g;case 5124:case 35670:return Wg;case 35667:case 35671:return Gg;case 35668:case 35672:return qg;case 35669:case 35673:return Xg;case 5125:return Kg;case 36294:return Jg;case 36295:return Zg;case 36296:return Qg;case 35678:case 36198:case 36298:case 36306:case 35682:return ev;case 35679:case 36299:case 36307:return tv;case 35680:case 36300:case 36308:case 36293:return nv;case 36289:case 36303:case 36311:case 36292:return rv}}(t.type)}}class Sv{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return sv;case 35664:return iv;case 35665:return ov;case 35666:return av;case 35674:return lv;case 35675:return cv;case 35676:return dv;case 5124:case 35670:return uv;case 35667:case 35671:return hv;case 35668:case 35672:return mv;case 35669:case 35673:return pv;case 5125:return fv;case 36294:return gv;case 36295:return vv;case 36296:return yv;case 35678:case 36198:case 36298:case 36306:case 35682:return _v;case 35679:case 36299:case 36307:return bv;case 35680:case 36300:case 36308:case 36293:return wv;case 36289:case 36303:case 36311:case 36292:return xv}}(t.type)}}class Tv{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,i=r.length;s!==i;++s){const i=r[s];i.setValue(e,t[i.id],n)}}}const Cv=/(\w+)(\])?(\[|\.)?/g;function Ev(e,t){e.seq.push(t),e.map[t.id]=t}function kv(e,t,n){const r=e.name,s=r.length;for(Cv.lastIndex=0;;){const i=Cv.exec(r),o=Cv.lastIndex;let a=i[1];const l="]"===i[2],c=i[3];if(l&&(a|=0),void 0===c||"["===c&&o+2===s){Ev(n,void 0===c?new Mv(a,e,t):new Sv(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new Tv(a),Ev(n,e)),n=e}}}class Lv{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);kv(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,i=t.length;s!==i;++s){const i=t[s],o=n[i.id];!1!==o.needsUpdate&&i.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const s=e[r];s.id in t&&n.push(s)}return n}}function Av(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let Dv=0;function Ov(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(r&&""===s)return"";const i=/ERROR: 0:(\d+)/.exec(s);if(i){const r=parseInt(i[1]);return n.toUpperCase()+"\n\n"+s+"\n\n"+function(e,t){const n=e.split("\n"),r=[],s=Math.max(t-6,0),i=Math.min(t+6,n.length);for(let e=s;e<i;e++){const s=e+1;r.push(`${s===t?">":" "} ${s}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return s}function Rv(e,t){const n=function(e){switch(e){case Vt:return["Linear","( value )"];case $t:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Pv(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Nv(e){return""!==e}function Iv(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function zv(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Bv=/^[ \t]*#include +<([\w\d./]+)>/gm;function Fv(e){return e.replace(Bv,Hv)}function Hv(e,t){const n=rc[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Fv(n)}const jv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Uv(e){return e.replace(jv,Yv)}function Yv(e,t,n,r){let s="";for(let e=parseInt(t);e<parseInt(n);e++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return s}function Vv(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function $v(e,t,n,r){const s=e.getContext(),i=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case vt:case yt:t="ENVMAP_TYPE_CUBE";break;case bt:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===yt&&(t="ENVMAP_MODE_REFRACTION");return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nv).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(i),f=s.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(Nv).join("\n"),g.length>0&&(g+="\n"),v=[m,p].filter(Nv).join("\n"),v.length>0&&(v+="\n")):(g=[Vv(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nv).join("\n"),v=[m,Vv(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?rc.tonemapping_pars_fragment:"",0!==n.toneMapping?Pv("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",rc.encodings_pars_fragment,Rv("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Nv).join("\n")),o=Fv(o),o=Iv(o,n),o=zv(o,n),a=Fv(a),a=Iv(a,n),a=zv(a,n),o=Uv(o),a=Uv(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Kt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Kt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const _=y+g+o,b=y+v+a,w=Av(s,s.VERTEX_SHADER,_),x=Av(s,s.FRAGMENT_SHADER,b);if(s.attachShader(f,w),s.attachShader(f,x),void 0!==n.index0AttributeName?s.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(f,0,"position"),s.linkProgram(f),e.debug.checkShaderErrors){const e=s.getProgramInfoLog(f).trim(),t=s.getShaderInfoLog(w).trim(),n=s.getShaderInfoLog(x).trim();let r=!0,i=!0;if(!1===s.getProgramParameter(f,s.LINK_STATUS)){r=!1;const t=Ov(s,w,"vertex"),n=Ov(s,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(f,s.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(i=!1);i&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let M,S;return s.deleteShader(w),s.deleteShader(x),this.getUniforms=function(){return void 0===M&&(M=new Lv(s,f)),M},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const r=e.getActiveAttrib(t,s),i=r.name;let o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[i]={type:r.type,location:e.getAttribLocation(t,i),locationSize:o}}return n}(s,f)),S},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(f),this.program=void 0},this.name=n.shaderName,this.id=Dv++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=w,this.fragmentShader=x,this}let Wv=0;class Gv{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),i=this._getShaderCacheForMaterial(e);return!1===i.has(r)&&(i.add(r),r.usedTimes++),!1===i.has(s)&&(i.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new qv(e),t.set(e,n)),n}}class qv{constructor(e){this.id=Wv++,this.code=e,this.usedTimes=0}}function Xv(e,t,n,r,s,i,o){const a=new et,l=new Gv,c=[],d=s.isWebGL2,u=s.logarithmicDepthBuffer,h=s.vertexTextures;let m=s.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(i,a,c,f,g){const v=f.fog,y=g.geometry,_=i.isMeshStandardMaterial?f.environment:null,b=(i.isMeshStandardMaterial?n:t).get(i.envMap||_),w=b&&b.mapping===bt?b.image.height:null,x=p[i.type];null!==i.precision&&(m=s.getMaxPrecision(i.precision),m!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",m,"instead."));const M=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,S=void 0!==M?M.length:0;let T,C,E,k,L=0;if(void 0!==y.morphAttributes.position&&(L=1),void 0!==y.morphAttributes.normal&&(L=2),void 0!==y.morphAttributes.color&&(L=3),x){const e=ic[x];T=e.vertexShader,C=e.fragmentShader}else T=i.vertexShader,C=i.fragmentShader,l.update(i),E=l.getVertexShaderID(i),k=l.getFragmentShaderID(i);const A=e.getRenderTarget(),D=i.alphaTest>0,O=i.clearcoat>0,R=i.iridescence>0;return{isWebGL2:d,shaderID:x,shaderName:i.type,vertexShader:T,fragmentShader:C,defines:i.defines,customVertexShaderID:E,customFragmentShaderID:k,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:m,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null===A?e.outputEncoding:!0===A.isXRRenderTarget?A.texture.encoding:Vt,map:!!i.map,matcap:!!i.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:w,lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,decodeVideoTexture:!!i.map&&!0===i.map.isVideoTexture&&i.map.encoding===$t,clearcoat:O,clearcoatMap:O&&!!i.clearcoatMap,clearcoatRoughnessMap:O&&!!i.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!i.clearcoatNormalMap,iridescence:R,iridescenceMap:R&&!!i.iridescenceMap,iridescenceThicknessMap:R&&!!i.iridescenceThicknessMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,specularIntensityMap:!!i.specularIntensityMap,specularColorMap:!!i.specularColorMap,opaque:!1===i.transparent&&1===i.blending,alphaMap:!!i.alphaMap,alphaTest:D,gradientMap:!!i.gradientMap,sheen:i.sheen>0,sheenColorMap:!!i.sheenColorMap,sheenRoughnessMap:!!i.sheenRoughnessMap,transmission:i.transmission>0,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:!!i.normalMap&&!!y.attributes.tangent,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.iridescenceMap||i.iridescenceThicknessMap||i.displacementMap||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularColorMap||i.sheenColorMap||i.sheenRoughnessMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.iridescenceMap||i.iridescenceThicknessMap||i.transmission>0||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularColorMap||i.sheen>0||i.sheenColorMap||i.sheenRoughnessMap||!i.displacementMap),fog:!!v,useFog:!0===i.fog,fogExp2:v&&v.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:S,morphTextureStride:L,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,doubleSided:2===i.side,flipSided:1===i.side,useDepthPacking:!!i.depthPacking,depthPacking:i.depthPacking||0,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.isWebGL2&&a.enable(0);t.supportsVertexTextures&&a.enable(1);t.instancing&&a.enable(2);t.instancingColor&&a.enable(3);t.map&&a.enable(4);t.matcap&&a.enable(5);t.envMap&&a.enable(6);t.lightMap&&a.enable(7);t.aoMap&&a.enable(8);t.emissiveMap&&a.enable(9);t.bumpMap&&a.enable(10);t.normalMap&&a.enable(11);t.objectSpaceNormalMap&&a.enable(12);t.tangentSpaceNormalMap&&a.enable(13);t.clearcoat&&a.enable(14);t.clearcoatMap&&a.enable(15);t.clearcoatRoughnessMap&&a.enable(16);t.clearcoatNormalMap&&a.enable(17);t.iridescence&&a.enable(18);t.iridescenceMap&&a.enable(19);t.iridescenceThicknessMap&&a.enable(20);t.displacementMap&&a.enable(21);t.specularMap&&a.enable(22);t.roughnessMap&&a.enable(23);t.metalnessMap&&a.enable(24);t.gradientMap&&a.enable(25);t.alphaMap&&a.enable(26);t.alphaTest&&a.enable(27);t.vertexColors&&a.enable(28);t.vertexAlphas&&a.enable(29);t.vertexUvs&&a.enable(30);t.vertexTangents&&a.enable(31);t.uvsVertexOnly&&a.enable(32);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.skinning&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.morphColors&&a.enable(7);t.premultipliedAlpha&&a.enable(8);t.shadowMapEnabled&&a.enable(9);t.physicallyCorrectLights&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.specularIntensityMap&&a.enable(15);t.specularColorMap&&a.enable(16);t.transmission&&a.enable(17);t.transmissionMap&&a.enable(18);t.thicknessMap&&a.enable(19);t.sheen&&a.enable(20);t.sheenColorMap&&a.enable(21);t.sheenRoughnessMap&&a.enable(22);t.decodeVideoTexture&&a.enable(23);t.opaque&&a.enable(24);e.push(a.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=ic[t];n=ir.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new $v(e,n,t,i),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Kv(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Jv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Zv(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Qv(){const e=[];let t=0;const n=[],r=[],s=[];function i(n,r,s,i,o,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:s,groupOrder:i,renderOrder:n.renderOrder,z:o,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=s,l.groupOrder=i,l.renderOrder=n.renderOrder,l.z=o,l.group=a),t++,l}return{opaque:n,transmissive:r,transparent:s,init:function(){t=0,n.length=0,r.length=0,s.length=0},push:function(e,t,o,a,l,c){const d=i(e,t,o,a,l,c);o.transmission>0?r.push(d):!0===o.transparent?s.push(d):n.push(d)},unshift:function(e,t,o,a,l,c){const d=i(e,t,o,a,l,c);o.transmission>0?r.unshift(d):!0===o.transparent?s.unshift(d):n.unshift(d)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Jv),r.length>1&&r.sort(t||Zv),s.length>1&&s.sort(t||Zv)}}}function ey(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let s;return void 0===r?(s=new Qv,e.set(t,[s])):n>=r.length?(s=new Qv,r.push(s)):s=r[n],s},dispose:function(){e=new WeakMap}}}function ty(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new he,color:new un};break;case"SpotLight":n={position:new he,direction:new he,color:new un,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new he,color:new un,distance:0,decay:0};break;case"HemisphereLight":n={direction:new he,skyColor:new un,groundColor:new un};break;case"RectAreaLight":n={color:new un,position:new he,halfWidth:new he,halfHeight:new he}}return e[t.id]=n,n}}}let ny=0;function ry(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function sy(e,t){const n=new ty,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)s.probe.push(new he);const i=new he,o=new fe,a=new fe;return{setup:function(i,o){let a=0,l=0,c=0;for(let e=0;e<9;e++)s.probe[e].set(0,0,0);let d=0,u=0,h=0,m=0,p=0,f=0,g=0,v=0,y=0,_=0;i.sort(ry);const b=!0!==o?Math.PI:1;for(let e=0,t=i.length;e<t;e++){const t=i[e],o=t.color,w=t.intensity,x=t.distance,M=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=o.r*w*b,l+=o.g*w*b,c+=o.b*w*b;else if(t.isLightProbe)for(let e=0;e<9;e++)s.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,s.directionalShadow[d]=n,s.directionalShadowMap[d]=M,s.directionalShadowMatrix[d]=t.shadow.matrix,f++}s.directional[d]=e,d++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(w*b),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,s.spot[h]=e;const i=t.shadow;if(t.map&&(s.spotLightMap[y]=t.map,y++,i.updateMatrices(t),t.castShadow&&_++),s.spotLightMatrix[h]=i.matrix,t.castShadow){const e=r.get(t);e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,s.spotShadow[h]=e,s.spotShadowMap[h]=M,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),s.rectArea[m]=e,m++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,s.pointShadow[u]=n,s.pointShadowMap[u]=M,s.pointShadowMatrix[u]=t.shadow.matrix,g++}s.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*b),e.groundColor.copy(t.groundColor).multiplyScalar(w*b),s.hemi[p]=e,p++}}m>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(s.rectAreaLTC1=sc.LTC_FLOAT_1,s.rectAreaLTC2=sc.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=sc.LTC_HALF_1,s.rectAreaLTC2=sc.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=a,s.ambient[1]=l,s.ambient[2]=c;const w=s.hash;w.directionalLength===d&&w.pointLength===u&&w.spotLength===h&&w.rectAreaLength===m&&w.hemiLength===p&&w.numDirectionalShadows===f&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y||(s.directional.length=d,s.spot.length=h,s.rectArea.length=m,s.point.length=u,s.hemi.length=p,s.directionalShadow.length=f,s.directionalShadowMap.length=f,s.pointShadow.length=g,s.pointShadowMap.length=g,s.spotShadow.length=v,s.spotShadowMap.length=v,s.directionalShadowMatrix.length=f,s.pointShadowMatrix.length=g,s.spotLightMatrix.length=v+y-_,s.spotLightMap.length=y,s.numSpotLightShadowsWithMaps=_,w.directionalLength=d,w.pointLength=u,w.spotLength=h,w.rectAreaLength=m,w.hemiLength=p,w.numDirectionalShadows=f,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,s.version=ny++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,d=0;const u=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=s.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),i.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(u),n++}else if(h.isSpotLight){const e=s.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(h.matrixWorld),i.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(u),l++}else if(h.isRectAreaLight){const e=s.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),a.identity(),o.copy(h.matrixWorld),o.premultiply(u),a.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(h.isPointLight){const e=s.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),r++}else if(h.isHemisphereLight){const e=s.hemi[d];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(u),d++}}},state:s}}function iy(e,t){const n=new sy(e,t),r=[],s=[];return{init:function(){r.length=0,s.length=0},state:{lightsArray:r,shadowsArray:s,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){s.push(e)}}}function oy(e,t){let n=new WeakMap;return{get:function(r,s=0){const i=n.get(r);let o;return void 0===i?(o=new iy(e,t),n.set(r,[o])):s>=i.length?(o=new iy(e,t),i.push(o)):o=i[s],o},dispose:function(){n=new WeakMap}}}class ay extends Qt{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ly extends Qt{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new he,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function cy(e,t,n){let r=new Kr;const s=new mn,i=new mn,o=new tr,a=new ay({depthPacking:3201}),l=new ly,c={},d=n.maxTextureSize,u={0:1,1:0,2:2},h=new or({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mn},radius:{value:4}},vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:"\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n\tconst float samples = float( VSM_SAMPLES );\n\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\n\t\t#ifdef HORIZONTAL_PASS\n\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n\t\t#else\n\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\n\t\t#endif\n\n\t}\n\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n"}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const p=new Ln;p.setAttribute("position",new gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new Qo(p,h),g=this;function v(n,r){const i=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,m.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new nr(s.x,s.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,f,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,m,f,null)}function y(t,n,r,s,i,o){let d=null;const h=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(d=void 0!==h?h:!0===r.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=d.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let s=r[t];void 0===s&&(s=d.clone(),r[t]=s),d=s}return d.visible=n.visible,d.wireframe=n.wireframe,d.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],d.alphaMap=n.alphaMap,d.alphaTest=n.alphaTest,d.clipShadows=n.clipShadows,d.clippingPlanes=n.clippingPlanes,d.clipIntersection=n.clipIntersection,d.displacementMap=n.displacementMap,d.displacementScale=n.displacementScale,d.displacementBias=n.displacementBias,d.wireframeLinewidth=n.wireframeLinewidth,d.linewidth=n.linewidth,!0===r.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(r.matrixWorld),d.nearDistance=s,d.farDistance=i),d}function _(n,s,i,o,a){if(!1===n.visible)return;if(n.layers.test(s.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===a)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);const r=t.update(n),s=n.material;if(Array.isArray(s)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],d=s[c.materialIndex];if(d&&d.visible){const t=y(n,d,o,i.near,i.far,a);e.renderBufferDirect(i,null,r,t,n,c)}}}else if(s.visible){const t=y(n,s,o,i.near,i.far,a);e.renderBufferDirect(i,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)_(l[e],s,i,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;s.copy(u.mapSize);const m=u.getFrameExtents();if(s.multiply(m),i.copy(u.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(i.x=Math.floor(d/m.x),s.x=i.x*m.x,u.mapSize.x=i.x),s.y>d&&(i.y=Math.floor(d/m.y),s.y=i.y*m.y,u.mapSize.y=i.y)),null===u.map){const e=3!==this.type?{minFilter:St,magFilter:St}:{};u.map=new nr(s.x,s.y,e),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const p=u.getViewportCount();for(let e=0;e<p;e++){const t=u.getViewport(e);o.set(i.x*t.x,i.y*t.y,i.x*t.z,i.y*t.w),h.viewport(o),u.updateMatrices(c,e),r=u.getFrustum(),_(n,a,u.camera,c,this.type)}!0!==u.isPointLightShadow&&3===this.type&&v(u,a),u.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function dy(e,t,n){const r=n.isWebGL2;const s=new function(){let t=!1;const n=new tr;let r=null;const s=new tr(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,a){!0===a&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===s.equals(n)&&(e.clearColor(t,r,i,o),s.copy(n))},reset:function(){t=!1,r=null,s.set(-1,0,0,0)}}},i=new function(){let t=!1,n=null,r=null,s=null;return{setTest:function(t){t?H(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){s!==t&&(e.clearDepth(t),s=t)},reset:function(){t=!1,n=null,r=null,s=null}}},o=new function(){let t=!1,n=null,r=null,s=null,i=null,o=null,a=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):j(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&s===n&&i===o||(e.stencilFunc(t,n,o),r=t,s=n,i=o)},setOp:function(t,n,r){o===t&&a===n&&l===r||(e.stencilOp(t,n,r),o=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,s=null,i=null,o=null,a=null,l=null,c=null}}},a=new WeakMap,l=new WeakMap;let c={},d={},u=new WeakMap,h=[],m=null,p=!1,f=null,g=null,v=null,y=null,_=null,b=null,w=null,x=!1,M=null,S=null,T=null,C=null,E=null;const k=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,A=0;const D=e.getParameter(e.VERSION);-1!==D.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(D)[1]),L=A>=1):-1!==D.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),L=A>=2);let O=null,R={};const P=e.getParameter(e.SCISSOR_BOX),N=e.getParameter(e.VIEWPORT),I=(new tr).fromArray(P),z=(new tr).fromArray(N);function B(t,n,r){const s=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let t=0;t<r;t++)e.texImage2D(n+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s);return i}const F={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function j(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}F[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),s.setClear(0,0,0,1),i.setClear(1),o.setClear(0),H(e.DEPTH_TEST),i.setFunc(3),$(!1),W(1),H(e.CULL_FACE),V(0);const U={[gt]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(r)U[103]=e.MIN,U[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(U[103]=e.MIN_EXT,U[104]=e.MAX_EXT)}const Y={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA};function V(t,n,r,s,i,o,a,l){if(0!==t){if(!1===p&&(H(e.BLEND),p=!0),5===t)i=i||n,o=o||r,a=a||s,n===g&&i===_||(e.blendEquationSeparate(U[n],U[i]),g=n,_=i),r===v&&s===y&&o===b&&a===w||(e.blendFuncSeparate(Y[r],Y[s],Y[o],Y[a]),v=r,y=s,b=o,w=a),f=t,x=null;else if(t!==f||l!==x){if(g===gt&&_===gt||(e.blendEquation(e.FUNC_ADD),g=gt,_=gt),l)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,b=null,w=null,f=t,x=l}}else!0===p&&(j(e.BLEND),p=!1)}function $(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function W(t){0!==t?(H(e.CULL_FACE),t!==S&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),S=t}function G(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),C===n&&E===r||(e.polygonOffset(n,r),C=n,E=r)):j(e.POLYGON_OFFSET_FILL)}return{buffers:{color:s,depth:i,stencil:o},enable:H,disable:j,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(d[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(d[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,s){let i=h,o=!1;if(r)if(i=u.get(s),void 0===i&&(i=[],u.set(s,i)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(i.length!==t.length||i[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)i[n]=e.COLOR_ATTACHMENT0+n;i.length=t.length,o=!0}}else i[0]!==e.COLOR_ATTACHMENT0&&(i[0]=e.COLOR_ATTACHMENT0,o=!0);else i[0]!==e.BACK&&(i[0]=e.BACK,o=!0);o&&(n.isWebGL2?e.drawBuffers(i):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(i))},useProgram:function(t){return m!==t&&(e.useProgram(t),m=t,!0)},setBlending:V,setMaterial:function(t,n){2===t.side?j(e.CULL_FACE):H(e.CULL_FACE);let r=1===t.side;n&&(r=!r),$(r),1===t.blending&&!1===t.transparent?V(0):V(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),s.setMask(t.colorWrite);const a=t.stencilWrite;o.setTest(a),a&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),G(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):j(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:$,setCullFace:W,setLineWidth:function(t){t!==T&&(L&&e.lineWidth(t),T=t)},setPolygonOffset:G,setScissorTest:function(t){t?H(e.SCISSOR_TEST):j(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+k-1),O!==t&&(e.activeTexture(t),O=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===O?e.TEXTURE0+k-1:O);let s=R[r];void 0===s&&(s={type:void 0,texture:void 0},R[r]=s),s.type===t&&s.texture===n||(O!==r&&(e.activeTexture(r),O=r),e.bindTexture(t,n||F[t]),s.type=t,s.texture=n)},unbindTexture:function(){const t=R[O];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let s=r.get(t);void 0===s&&(s=e.getUniformBlockIndex(n,t.name),r.set(t,s))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);a.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},O=null,R={},d={},u=new WeakMap,h=[],m=null,p=!1,f=null,g=null,v=null,y=null,_=null,b=null,w=null,x=!1,M=null,S=null,T=null,C=null,E=null,I.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),s.reset(),i.reset(),o.reset()}}}function uy(e,t,n,r,s,i,o){const a=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,d=s.maxTextureSize,u=s.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test("undefined"==typeof navigator?"":navigator.userAgent),p=new WeakMap;let f;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return v?new OffscreenCanvas(e,t):wn("canvas")}function _(e,t,n,r){let s=1;if((e.width>r||e.height>r)&&(s=r/Math.max(e.width,e.height)),s<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?le:Math.floor,i=r(s*e.width),o=r(s*e.height);void 0===f&&(f=y(i,o));const a=n?y(i,o):f;a.width=i,a.height=o;return a.getContext("2d").drawImage(e,0,0,i,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+i+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return ae(e.width)&&ae(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==St&&e.minFilter!==Et}function x(t){e.generateMipmap(t)}function M(n,r,s,i,o=!1){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return r===e.RED&&(s===e.FLOAT&&(l=e.R32F),s===e.HALF_FLOAT&&(l=e.R16F),s===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RG&&(s===e.FLOAT&&(l=e.RG32F),s===e.HALF_FLOAT&&(l=e.RG16F),s===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA&&(s===e.FLOAT&&(l=e.RGBA32F),s===e.HALF_FLOAT&&(l=e.RGBA16F),s===e.UNSIGNED_BYTE&&(l=i===$t&&!1===o?e.SRGB8_ALPHA8:e.RGBA8),s===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),s===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function S(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==St&&e.minFilter!==Et?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(t){return t===St||t===Tt||t===Ct?e.NEAREST:e.LINEAR}function C(e){const t=e.target;t.removeEventListener("dispose",C),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,s=g.get(n);if(s){const r=s[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&k(e),0===Object.keys(s).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=t.texture,s=r.get(t),i=r.get(n);void 0!==i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(s.__webglFramebuffer[t]),s.__webglDepthbuffer&&e.deleteRenderbuffer(s.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(s.__webglFramebuffer),s.__webglDepthbuffer&&e.deleteRenderbuffer(s.__webglDepthbuffer),s.__webglMultisampledFramebuffer&&e.deleteFramebuffer(s.__webglMultisampledFramebuffer),s.__webglColorRenderbuffer)for(let t=0;t<s.__webglColorRenderbuffer.length;t++)s.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(s.__webglColorRenderbuffer[t]);s.__webglDepthRenderbuffer&&e.deleteRenderbuffer(s.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,s=n.length;t<s;t++){const s=r.get(n[t]);s.__webglTexture&&(e.deleteTexture(s.__webglTexture),o.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function k(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const s=t.source;delete g.get(s)[n.__cacheKey],o.memory.textures--}let L=0;function A(t,s){const i=r.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void N(i,t,s);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,i.__webglTexture,e.TEXTURE0+s)}const D={[wt]:e.REPEAT,[xt]:e.CLAMP_TO_EDGE,[Mt]:e.MIRRORED_REPEAT},O={[St]:e.NEAREST,[Tt]:e.NEAREST_MIPMAP_NEAREST,[Ct]:e.NEAREST_MIPMAP_LINEAR,[Et]:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,[kt]:e.LINEAR_MIPMAP_LINEAR};function R(n,i,o){if(o?(e.texParameteri(n,e.TEXTURE_WRAP_S,D[i.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,D[i.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,D[i.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,O[i.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,O[i.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),i.wrapS===xt&&i.wrapT===xt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T(i.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T(i.minFilter)),i.minFilter!==St&&i.minFilter!==Et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(i.type===Dt&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&i.type===Ot&&!1===t.has("OES_texture_half_float_linear"))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,s.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function P(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));const s=n.source;let i=g.get(s);void 0===i&&(i={},g.set(s,i));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(a!==t.__cacheKey){void 0===i[a]&&(i[a]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),i[a].usedTimes++;const s=i[t.__cacheKey];void 0!==s&&(i[t.__cacheKey].usedTimes--,0===s.usedTimes&&k(n)),t.__cacheKey=a,t.__webglTexture=i[a].texture}return r}function N(t,s,o){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);const c=P(t,s),u=s.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const h=r.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=function(e){return!a&&(e.wrapS!==xt||e.wrapT!==xt||e.minFilter!==St&&e.minFilter!==Et)}(s)&&!1===b(s.image);let r=_(s.image,t,!1,d);r=j(s,r);const m=b(r)||a,p=i.convert(s.format,s.encoding);let f,g=i.convert(s.type),v=M(s.internalFormat,p,g,s.encoding,s.isVideoTexture);R(l,s,m);const y=s.mipmaps,T=a&&!0!==s.isVideoTexture,C=void 0===h.__version||!0===c,E=S(s,r,m);if(s.isDepthTexture)v=e.DEPTH_COMPONENT,a?v=s.type===Dt?e.DEPTH_COMPONENT32F:s.type===At?e.DEPTH_COMPONENT24:s.type===Rt?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:s.type===Dt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===Nt&&v===e.DEPTH_COMPONENT&&1012!==s.type&&s.type!==At&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=At,g=i.convert(s.type)),s.format===It&&v===e.DEPTH_COMPONENT&&(v=e.DEPTH_STENCIL,s.type!==Rt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=Rt,g=i.convert(s.type))),C&&(T?n.texStorage2D(e.TEXTURE_2D,1,v,r.width,r.height):n.texImage2D(e.TEXTURE_2D,0,v,r.width,r.height,0,p,g,null));else if(s.isDataTexture)if(y.length>0&&m){T&&C&&n.texStorage2D(e.TEXTURE_2D,E,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)f=y[t],T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,f.width,f.height,p,g,f.data):n.texImage2D(e.TEXTURE_2D,t,v,f.width,f.height,0,p,g,f.data);s.generateMipmaps=!1}else T?(C&&n.texStorage2D(e.TEXTURE_2D,E,v,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,p,g,r.data)):n.texImage2D(e.TEXTURE_2D,0,v,r.width,r.height,0,p,g,r.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){T&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,E,v,y[0].width,y[0].height,r.depth);for(let t=0,i=y.length;t<i;t++)f=y[t],s.format!==Pt?null!==p?T?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,f.width,f.height,r.depth,p,f.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,v,f.width,f.height,r.depth,0,f.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,f.width,f.height,r.depth,p,g,f.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,v,f.width,f.height,r.depth,0,p,g,f.data)}else{T&&C&&n.texStorage2D(e.TEXTURE_2D,E,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)f=y[t],s.format!==Pt?null!==p?T?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,f.width,f.height,p,f.data):n.compressedTexImage2D(e.TEXTURE_2D,t,v,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,f.width,f.height,p,g,f.data):n.texImage2D(e.TEXTURE_2D,t,v,f.width,f.height,0,p,g,f.data)}else if(s.isDataArrayTexture)T?(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,E,v,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(s.isData3DTexture)T?(C&&n.texStorage3D(e.TEXTURE_3D,E,v,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(e.TEXTURE_3D,0,v,r.width,r.height,r.depth,0,p,g,r.data);else if(s.isFramebufferTexture){if(C)if(T)n.texStorage2D(e.TEXTURE_2D,E,v,r.width,r.height);else{let t=r.width,s=r.height;for(let r=0;r<E;r++)n.texImage2D(e.TEXTURE_2D,r,v,t,s,0,p,g,null),t>>=1,s>>=1}}else if(y.length>0&&m){T&&C&&n.texStorage2D(e.TEXTURE_2D,E,v,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)f=y[t],T?n.texSubImage2D(e.TEXTURE_2D,t,0,0,p,g,f):n.texImage2D(e.TEXTURE_2D,t,v,p,g,f);s.generateMipmaps=!1}else T?(C&&n.texStorage2D(e.TEXTURE_2D,E,v,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,p,g,r)):n.texImage2D(e.TEXTURE_2D,0,v,p,g,r);w(s,m)&&x(l),h.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function I(t,s,o,a,l){const c=i.convert(o.format,o.encoding),d=i.convert(o.type),u=M(o.internalFormat,c,d,o.encoding);r.get(s).__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,0,u,s.width,s.height,s.depth,0,c,d,null):n.texImage2D(l,0,u,s.width,s.height,0,c,d,null)),n.bindFramebuffer(e.FRAMEBUFFER,t),H(s)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,l,r.get(o).__webglTexture,0,F(s)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,l,r.get(o).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function z(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let s=e.DEPTH_COMPONENT16;if(r||H(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Dt?s=e.DEPTH_COMPONENT32F:t.type===At&&(s=e.DEPTH_COMPONENT24));const r=F(n);H(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,s,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,s,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const s=F(n);r&&!1===H(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,s,e.DEPTH24_STENCIL8,n.width,n.height):H(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,s,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let s=0;s<t.length;s++){const o=t[s],a=i.convert(o.format,o.encoding),l=i.convert(o.type),c=M(o.internalFormat,a,l,o.encoding),d=F(n);r&&!1===H(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,c,n.width,n.height):H(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function B(t){const s=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!s.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,s){if(s&&s.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(s.depthTexture).__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),A(s.depthTexture,0);const i=r.get(s.depthTexture).__webglTexture,o=F(s);if(s.depthTexture.format===Nt)H(s)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(s.depthTexture.format!==It)throw new Error("Unknown depthTexture format");H(s)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(s.__webglFramebuffer,t)}else if(i){s.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer[r]),s.__webglDepthbuffer[r]=e.createRenderbuffer(),z(s.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer),s.__webglDepthbuffer=e.createRenderbuffer(),z(s.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(e){return Math.min(u,e.samples)}function H(e){const n=r.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function j(e,n){const r=e.encoding,s=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Jt||r!==Vt&&(r===$t?!1===a?!0===t.has("EXT_sRGB")&&s===Pt?(e.format=Jt,e.minFilter=Et,e.generateMipmaps=!1):n=Kn.sRGBToLinear(n):s===Pt&&i===Lt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=L;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),L+=1,e},this.resetTextureUnits=function(){L=0},this.setTexture2D=A,this.setTexture2DArray=function(t,s){const i=r.get(t);t.version>0&&i.__version!==t.version?N(i,t,s):n.bindTexture(e.TEXTURE_2D_ARRAY,i.__webglTexture,e.TEXTURE0+s)},this.setTexture3D=function(t,s){const i=r.get(t);t.version>0&&i.__version!==t.version?N(i,t,s):n.bindTexture(e.TEXTURE_3D,i.__webglTexture,e.TEXTURE0+s)},this.setTextureCube=function(t,s){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,s,o){if(6!==s.image.length)return;const l=P(t,s),d=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const u=r.get(d);if(d.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=s.isCompressedTexture||s.image[0].isCompressedTexture,r=s.image[0]&&s.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=t||r?r?s.image[e].image:s.image[e]:_(s.image[e],!1,!0,c),h[e]=j(s,h[e]);const m=h[0],p=b(m)||a,f=i.convert(s.format,s.encoding),g=i.convert(s.type),v=M(s.internalFormat,f,g,s.encoding),y=a&&!0!==s.isVideoTexture,T=void 0===u.__version||!0===l;let C,E=S(s,m,p);if(R(e.TEXTURE_CUBE_MAP,s,p),t){y&&T&&n.texStorage2D(e.TEXTURE_CUBE_MAP,E,v,m.width,m.height);for(let t=0;t<6;t++){C=h[t].mipmaps;for(let r=0;r<C.length;r++){const i=C[r];s.format!==Pt?null!==f?y?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,f,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,v,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,f,g,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,v,i.width,i.height,0,f,g,i.data)}}}else{C=s.mipmaps,y&&T&&(C.length>0&&E++,n.texStorage2D(e.TEXTURE_CUBE_MAP,E,v,h[0].width,h[0].height));for(let t=0;t<6;t++)if(r){y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,h[t].width,h[t].height,f,g,h[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,h[t].width,h[t].height,0,f,g,h[t].data);for(let r=0;r<C.length;r++){const s=C[r].image[t].image;y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,s.width,s.height,f,g,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,v,s.width,s.height,0,f,g,s.data)}}else{y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f,g,h[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,f,g,h[t]);for(let r=0;r<C.length;r++){const s=C[r];y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,f,g,s.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,v,f,g,s.image[t])}}}w(s,p)&&x(e.TEXTURE_CUBE_MAP),u.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(o,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,s){const i=r.get(t);void 0!==n&&I(i.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==s&&B(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),d=r.get(l);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(void 0===d.__webglTexture&&(d.__webglTexture=e.createTexture()),d.__version=l.version,o.memory.textures++);const u=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,m=b(t)||a;if(u){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h)if(s.drawBuffers){const n=t.texture;for(let t=0,s=n.length;t<s;t++){const s=r.get(n[t]);void 0===s.__webglTexture&&(s.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===H(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const s=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const o=i.convert(s.format,s.encoding),a=i.convert(s.type),l=M(s.internalFormat,o,a,s.encoding,!0===t.isXRRenderTarget),d=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,d,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),z(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,d.__webglTexture),R(e.TEXTURE_CUBE_MAP,l,m);for(let n=0;n<6;n++)I(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n);w(l,m)&&x(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const s=t.texture;for(let i=0,o=s.length;i<o;i++){const o=s[i],a=r.get(o);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),R(e.TEXTURE_2D,o,m),I(c.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D),w(o,m)&&x(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,d.__webglTexture),R(r,l,m),I(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r),w(l,m)&&x(r),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(t){const s=b(t)||a,i=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(w(a,s)){const s=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,i=r.get(a).__webglTexture;n.bindTexture(s,i),x(s),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(a&&t.samples>0&&!1===H(t)){const s=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],i=t.width,o=t.height;let a=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=r.get(t),u=!0===t.isWebGLMultipleRenderTargets;if(u)for(let t=0;t<s.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<s.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const h=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),u&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),u){const t=r.get(s[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,i,o,0,0,i,o,a,e.NEAREST),m&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),u)for(let t=0;t<s.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const i=r.get(s[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,i,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=I,this.useMultisampledRTT=H}function hy(e,t,n){const r=n.isWebGL2;return{convert:function(n,s=null){let i;if(n===Lt)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(1012===n)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(n===At)return e.UNSIGNED_INT;if(n===Dt)return e.FLOAT;if(n===Ot)return r?e.HALF_FLOAT:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===Pt)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===Nt)return e.DEPTH_COMPONENT;if(n===It)return e.DEPTH_STENCIL;if(1028===n)return e.RED;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),e.RGBA;if(n===Jt)return i=t.get("EXT_sRGB"),null!==i?i.SRGB_ALPHA_EXT:null;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===zt||n===Bt||n===Ft||n===Ht)if(s===$t){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===zt)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Bt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ft)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ht)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===zt)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Bt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ft)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ht)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(35840===n)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(37492===n)return s===$t?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(37808===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return s===$t?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(36492===n)return s===$t?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Rt?r?e.UNSIGNED_INT_24_8:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}const my={type:"move"};class py{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ia,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ia,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ia,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,i=null;const o=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){i=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new Ia;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const s=l.joints[r.jointName];null!==e&&(s.matrix.fromArray(e.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.jointRadius=e.radius),s.visible=null!==e}const r=l.joints["index-finger-tip"],s=l.joints["thumb-tip"],o=r.position.distanceTo(s.position),a=.02,c=.005;l.inputState.pinching&&o>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(my)))}return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==s),null!==l&&(l.visible=null!==i),this}}class fy extends er{constructor(e,t,n,r,s,i,o,a,l,c){if((c=void 0!==c?c:Nt)!==Nt&&c!==It)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Nt&&(n=At),void 0===n&&c===It&&(n=Rt),super(null,r,s,i,o,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:St,this.minFilter=void 0!==a?a:St,this.flipY=!1,this.generateMipmaps=!1}}class gy extends Ke{constructor(e,t){super();const n=this;let r=null,s=1,i=null,o="local-floor",a=null,l=null,c=null,d=null,u=null,h=null;const m=t.getContextAttributes();let p=null,f=null;const g=[],v=[],y=new mo;y.layers.enable(1),y.viewport=new tr;const _=new mo;_.layers.enable(2),_.viewport=new tr;const b=[y,_],w=new mu;w.layers.enable(1),w.layers.enable(2);let x=null,M=null;function S(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function T(){r.removeEventListener("select",S),r.removeEventListener("selectstart",S),r.removeEventListener("selectend",S),r.removeEventListener("squeeze",S),r.removeEventListener("squeezestart",S),r.removeEventListener("squeezeend",S),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",C);for(let e=0;e<g.length;e++){const t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}x=null,M=null,e.setRenderTarget(p),u=null,d=null,c=null,r=null,f=null,D.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const s=g[r];s&&s.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new py,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new py,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new py,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||i},this.setReferenceSpace=function(e){a=e},this.getBaseLayer=function(){return null!==d?d:u},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",S),r.addEventListener("selectstart",S),r.addEventListener("selectend",S),r.addEventListener("squeeze",S),r.addEventListener("squeezestart",S),r.addEventListener("squeezeend",S),r.addEventListener("end",T),r.addEventListener("inputsourceschange",C),!0!==m.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||m.antialias,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};u=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:u}),f=new nr(u.framebufferWidth,u.framebufferHeight,{format:Pt,type:Lt,encoding:e.outputEncoding,stencilBuffer:m.stencil})}else{let n=null,i=null,o=null;m.depth&&(o=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?It:Nt,i=m.stencil?Rt:At);const a={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:s};c=new XRWebGLBinding(r,t),d=c.createProjectionLayer(a),r.updateRenderState({layers:[d]}),f=new nr(d.textureWidth,d.textureHeight,{format:Pt,type:Lt,depthTexture:new fy(d.textureWidth,d.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0});e.properties.get(f).__ignoreDepthValues=d.ignoreDepthValues}f.isXRRenderTarget=!0,this.setFoveation(1),a=null,i=await r.requestReferenceSpace(o),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const E=new he,k=new he;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;w.near=_.near=y.near=e.near,w.far=_.far=y.far=e.far,x===w.near&&M===w.far||(r.updateRenderState({depthNear:w.near,depthFar:w.far}),x=w.near,M=w.far);const t=e.parent,n=w.cameras;L(w,t);for(let e=0;e<n.length;e++)L(n[e],t);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),e.matrix.copy(w.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const s=e.children;for(let e=0,t=s.length;e<t;e++)s[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){E.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const r=E.distanceTo(k),s=t.projectionMatrix.elements,i=n.projectionMatrix.elements,o=s[14]/(s[10]-1),a=s[14]/(s[10]+1),l=(s[9]+1)/s[5],c=(s[9]-1)/s[5],d=(s[8]-1)/s[0],u=(i[8]+1)/i[0],h=o*d,m=o*u,p=r/(-d+u),f=p*-d;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+p,v=a+p,y=h-f,_=m+(r-f),b=l*a/v*g,w=c*a/v*g;e.projectionMatrix.makePerspective(y,_,b,w,g,v)}(w,y,_):w.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==u?u.fixedFoveation:void 0},this.setFoveation=function(e){null!==d&&(d.fixedFoveation=e),null!==u&&void 0!==u.fixedFoveation&&(u.fixedFoveation=e)};let A=null;const D=new Uf;D.setAnimationLoop((function(t,n){if(l=n.getViewerPose(a||i),h=n,null!==l){const t=l.views;null!==u&&(e.setRenderTargetFramebuffer(f,u.framebuffer),e.setRenderTarget(f));let n=!1;t.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const s=t[r];let i=null;if(null!==u)i=u.getViewport(s);else{const t=c.getViewSubImage(d,s);i=t.viewport,0===r&&(e.setRenderTargetTextures(f,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(f))}let o=b[r];void 0===o&&(o=new mo,o.layers.enable(r),o.viewport=new tr,b[r]=o),o.matrix.fromArray(s.transform.matrix),o.projectionMatrix.fromArray(s.projectionMatrix),o.viewport.set(i.x,i.y,i.width,i.height),0===r&&w.matrix.copy(o.matrix),!0===n&&w.cameras.push(o)}}for(let e=0;e<g.length;e++){const t=v[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,a||i)}A&&A(t,n),h=null})),this.setAnimationLoop=function(e){A=e},this.dispose=function(){}}}function vy(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const s=t.get(r).envMap;if(s&&(n.envMap.value=s,n.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let i,o;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap?i=r.emissiveMap:r.clearcoatMap?i=r.clearcoatMap:r.clearcoatNormalMap?i=r.clearcoatNormalMap:r.clearcoatRoughnessMap?i=r.clearcoatRoughnessMap:r.iridescenceMap?i=r.iridescenceMap:r.iridescenceThicknessMap?i=r.iridescenceThicknessMap:r.specularIntensityMap?i=r.specularIntensityMap:r.specularColorMap?i=r.specularColorMap:r.transmissionMap?i=r.transmissionMap:r.thicknessMap?i=r.thicknessMap:r.sheenColorMap?i=r.sheenColorMap:r.sheenRoughnessMap&&(i=r.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uvTransform.value.copy(i.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,s,i,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let s;t.map?s=t.map:t.alphaMap&&(s=t.alphaMap);void 0!==s&&(!0===s.matrixAutoUpdate&&s.updateMatrix(),e.uvTransform.value.copy(s.matrix))}(e,r,s,i):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function yy(e,t,n,r){let s={},i={},o=[];const a=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n){const r=e.value;if(void 0===n[t])return n[t]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=n[t];if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function d(t){const n=t.target;n.removeEventListener("dispose",d);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(s[n.id]),delete s[n.id],delete i[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,u){let h=s[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const r=16;let s=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],o=c(i);if(i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0){s=n%r;const e=r-s;0!==s&&e-o.boundary<0&&(n+=r-s,i.__offset=n)}n+=o.storage}s=n%r,s>0&&(n+=r-s);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),s=t.__size,i=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,s,i),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),s[n.id]=h,n.addEventListener("dispose",d));const m=u.program;r.updateUBOMapping(n,m);const p=t.render.frame;i[n.id]!==p&&(!function(t){const n=s[t.id],r=t.uniforms,i=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,i)){const t=n.value,r=n.__offset;"number"==typeof t?(n.__data[0]=t,e.bufferSubData(e.UNIFORM_BUFFER,r,n.__data)):(n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):t.toArray(n.__data),e.bufferSubData(e.UNIFORM_BUFFER,r,n.__data))}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),i[n.id]=p)},dispose:function(){for(const t in s)e.deleteBuffer(s[t]);o=[],s={},i={}}}}function _y(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=wn("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,i=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,a=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let d;d=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let u=null,h=null;const m=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Vt,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const f=this;let g=!1,v=0,y=0,_=null,b=-1,w=null;const x=new tr,M=new tr;let S=null,T=t.width,C=t.height,E=1,k=null,L=null;const A=new tr(0,0,T,C),D=new tr(0,0,T,C);let O=!1;const R=new Kr;let P=!1,N=!1,I=null;const z=new fe,B=new mn,F=new he,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===_?E:1}let U,Y,V,$,W,G,q,X,K,J,Z,Q,ee,te,ne,re,se,ie,oe,ae,ce,de,ue,me,pe=n;function ge(e,n){for(let r=0;r<e.length;r++){const s=e[r],i=t.getContext(s,n);if(null!==i)return i}return null}try{const e={alpha:!0,depth:r,stencil:s,antialias:i,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",_e,!1),t.addEventListener("webglcontextrestored",be,!1),t.addEventListener("webglcontextcreationerror",we,!1),null===pe){const t=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&t.shift(),pe=ge(t,e),null===pe)throw ge(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===pe.getShaderPrecisionFormat&&(pe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ve(){U=new gg(pe),Y=new qf(pe,U,e),U.init(Y),de=new hy(pe,U,Y),V=new dy(pe,U,Y),$=new _g(pe),W=new Kv,G=new uy(pe,U,V,W,Y,de,$),q=new eg(f),X=new fg(f),K=new Yf(pe,Y),ue=new Wf(pe,U,K,Y),J=new vg(pe,K,$,ue),Z=new Sg(pe,J,K,$),oe=new Mg(pe,Y,G),re=new Xf(W),Q=new Xv(f,q,X,U,Y,ue,re),ee=new vy(f,W),te=new ey,ne=new oy(U,Y),ie=new $f(f,q,X,V,Z,d,o),se=new cy(f,Z,Y),me=new yy(pe,$,Y,V),ae=new Gf(pe,U,$,Y),ce=new yg(pe,U,$,Y),$.programs=Q.programs,f.capabilities=Y,f.extensions=U,f.properties=W,f.renderLists=te,f.shadowMap=se,f.state=V,f.info=$}ve();const ye=new gy(f,pe);function _e(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function be(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=$.autoReset,t=se.enabled,n=se.autoUpdate,r=se.needsUpdate,s=se.type;ve(),$.autoReset=e,se.enabled=t,se.autoUpdate=n,se.needsUpdate=r,se.type=s}function we(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function xe(e){const t=e.target;t.removeEventListener("dispose",xe),function(e){(function(e){const t=W.get(e).programs;void 0!==t&&(t.forEach((function(e){Q.releaseProgram(e)})),e.isShaderMaterial&&Q.releaseShaderCache(e))})(e),W.remove(e)}(t)}this.xr=ye,this.getContext=function(){return pe},this.getContextAttributes=function(){return pe.getContextAttributes()},this.forceContextLoss=function(){const e=U.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=U.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(T,C,!1))},this.getSize=function(e){return e.set(T,C)},this.setSize=function(e,n,r){ye.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,C=n,t.width=Math.floor(e*E),t.height=Math.floor(n*E),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*E,C*E).floor()},this.setDrawingBufferSize=function(e,n,r){T=e,C=n,E=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(A)},this.setViewport=function(e,t,n,r){e.isVector4?A.set(e.x,e.y,e.z,e.w):A.set(e,t,n,r),V.viewport(x.copy(A).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),V.scissor(M.copy(D).multiplyScalar(E).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){V.setScissorTest(O=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=pe.COLOR_BUFFER_BIT),t&&(r|=pe.DEPTH_BUFFER_BIT),n&&(r|=pe.STENCIL_BUFFER_BIT),pe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",_e,!1),t.removeEventListener("webglcontextrestored",be,!1),t.removeEventListener("webglcontextcreationerror",we,!1),te.dispose(),ne.dispose(),W.dispose(),q.dispose(),X.dispose(),Z.dispose(),ue.dispose(),me.dispose(),Q.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",Se),ye.removeEventListener("sessionend",Te),I&&(I.dispose(),I=null),Ce.stop()},this.renderBufferDirect=function(e,t,n,r,s,i){null===t&&(t=H);const o=s.isMesh&&s.matrixWorld.determinant()<0,a=function(e,t,n,r,s){!0!==t.isScene&&(t=H);G.resetTextureUnits();const i=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=null===_?f.outputEncoding:!0===_.isXRRenderTarget?_.texture.encoding:Vt,l=(r.isMeshStandardMaterial?X:q).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,d=!!r.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,m=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=r.toneMapped?f.toneMapping:0,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,x=W.get(r),M=h.state.lights;if(!0===P&&(!0===N||e!==w)){const t=e===w&&r.id===b;re.setState(r,e,t)}let S=!1;r.version===x.__version?x.needsLights&&x.lightsStateVersion!==M.state.version||x.outputEncoding!==a||s.isInstancedMesh&&!1===x.instancing?S=!0:s.isInstancedMesh||!0!==x.instancing?s.isSkinnedMesh&&!1===x.skinning?S=!0:s.isSkinnedMesh||!0!==x.skinning?x.envMap!==l||!0===r.fog&&x.fog!==i?S=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===re.numPlanes&&x.numIntersection===re.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==d||x.morphTargets!==u||x.morphNormals!==m||x.morphColors!==p||x.toneMapping!==g||!0===Y.isWebGL2&&x.morphTargetsCount!==y)&&(S=!0):S=!0:S=!0:S=!0:(S=!0,x.__version=r.version);let T=x.currentProgram;!0===S&&(T=De(r,t,s));let k=!1,L=!1,A=!1;const D=T.getUniforms(),O=x.uniforms;V.useProgram(T.program)&&(k=!0,L=!0,A=!0);r.id!==b&&(b=r.id,L=!0);if(k||w!==e){if(D.setValue(pe,"projectionMatrix",e.projectionMatrix),Y.logarithmicDepthBuffer&&D.setValue(pe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,L=!0,A=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=D.map.cameraPosition;void 0!==t&&t.setValue(pe,F.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&D.setValue(pe,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||s.isSkinnedMesh)&&D.setValue(pe,"viewMatrix",e.matrixWorldInverse)}if(s.isSkinnedMesh){D.setOptional(pe,s,"bindMatrix"),D.setOptional(pe,s,"bindMatrixInverse");const e=s.skeleton;e&&(Y.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),D.setValue(pe,"boneTexture",e.boneTexture,G),D.setValue(pe,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const R=n.morphAttributes;(void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===Y.isWebGL2)&&oe.update(s,n,r,T);(L||x.receiveShadow!==s.receiveShadow)&&(x.receiveShadow=s.receiveShadow,D.setValue(pe,"receiveShadow",s.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);L&&(D.setValue(pe,"toneMappingExposure",f.toneMappingExposure),x.needsLights&&(B=A,(z=O).ambientLightColor.needsUpdate=B,z.lightProbe.needsUpdate=B,z.directionalLights.needsUpdate=B,z.directionalLightShadows.needsUpdate=B,z.pointLights.needsUpdate=B,z.pointLightShadows.needsUpdate=B,z.spotLights.needsUpdate=B,z.spotLightShadows.needsUpdate=B,z.rectAreaLights.needsUpdate=B,z.hemisphereLights.needsUpdate=B),i&&!0===r.fog&&ee.refreshFogUniforms(O,i),ee.refreshMaterialUniforms(O,r,E,C,I),Lv.upload(pe,x.uniformsList,O,G));var z,B;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Lv.upload(pe,x.uniformsList,O,G),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&D.setValue(pe,"center",s.center);if(D.setValue(pe,"modelViewMatrix",s.modelViewMatrix),D.setValue(pe,"normalMatrix",s.normalMatrix),D.setValue(pe,"modelMatrix",s.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Y.isWebGL2){const n=e[t];me.update(n,T),me.bind(n,T)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return T}(e,t,n,r,s);V.setMaterial(r,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let d,u=1;!0===r.wireframe&&(l=J.getWireframeAttribute(n),u=2),ue.setup(s,r,a,n,l);let m=ae;null!==l&&(d=K.get(l),m=ce,m.setIndex(d));const p=null!==l?l.count:c.count,g=n.drawRange.start*u,v=n.drawRange.count*u,y=null!==i?i.start*u:0,x=null!==i?i.count*u:1/0,M=Math.max(g,y),S=Math.min(p,g+v,y+x)-1,T=Math.max(0,S-M+1);if(0!==T){if(s.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*j()),m.setMode(pe.LINES)):m.setMode(pe.TRIANGLES);else if(s.isLine){let e=r.linewidth;void 0===e&&(e=1),V.setLineWidth(e*j()),s.isLineSegments?m.setMode(pe.LINES):s.isLineLoop?m.setMode(pe.LINE_LOOP):m.setMode(pe.LINE_STRIP)}else s.isPoints?m.setMode(pe.POINTS):s.isSprite&&m.setMode(pe.TRIANGLES);if(s.isInstancedMesh)m.renderInstances(M,T,s.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);m.renderInstances(M,T,e)}else m.render(M,T)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&2===e.side?(e.side=1,e.needsUpdate=!0,De(e,t,n),e.side=0,e.needsUpdate=!0,De(e,t,n),e.side=2):De(e,t,n)}h=ne.get(e),h.init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(f.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let s=0;s<r.length;s++){n(r[s],e,t)}else n(r,e,t)})),p.pop(),h=null};let Me=null;function Se(){Ce.stop()}function Te(){Ce.start()}const Ce=new Uf;function Ee(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||R.intersectsSprite(e)){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Z.update(e),s=e.material;s.visible&&u.push(e,t,s,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==$.render.frame&&(e.skeleton.update(),e.skeleton.frame=$.render.frame),!e.frustumCulled||R.intersectsObject(e))){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Z.update(e),s=e.material;if(Array.isArray(s)){const r=t.groups;for(let i=0,o=r.length;i<o;i++){const o=r[i],a=s[o.materialIndex];a&&a.visible&&u.push(e,t,a,n,F.z,o)}}else s.visible&&u.push(e,t,s,n,F.z,null)}const s=e.children;for(let e=0,i=s.length;e<i;e++)Ee(s[e],t,n,r)}function ke(e,t,n,r){const s=e.opaque,o=e.transmissive,a=e.transparent;h.setupLightsView(n),o.length>0&&function(e,t,n){const r=Y.isWebGL2;null===I&&(I=new nr(1,1,{generateMipmaps:!0,type:U.has("EXT_color_buffer_half_float")?Ot:Lt,minFilter:kt,samples:r&&!0===i?4:0}));f.getDrawingBufferSize(B),r?I.setSize(B.x,B.y):I.setSize(le(B.x),le(B.y));const s=f.getRenderTarget();f.setRenderTarget(I),f.clear();const o=f.toneMapping;f.toneMapping=0,Le(e,t,n),f.toneMapping=o,G.updateMultisampleRenderTarget(I),G.updateRenderTargetMipmap(I),f.setRenderTarget(s)}(s,t,n),r&&V.viewport(x.copy(r)),s.length>0&&Le(s,t,n),o.length>0&&Le(o,t,n),a.length>0&&Le(a,t,n),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1)}function Le(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let s=0,i=e.length;s<i;s++){const i=e[s],o=i.object,a=i.geometry,l=null===r?i.material:r,c=i.group;o.layers.test(n.layers)&&Ae(o,t,n,a,l,c)}}function Ae(e,t,n,r,s,i){e.onBeforeRender(f,t,n,r,s,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),s.onBeforeRender(f,t,n,r,e,i),!0===s.transparent&&2===s.side?(s.side=1,s.needsUpdate=!0,f.renderBufferDirect(n,t,r,s,e,i),s.side=0,s.needsUpdate=!0,f.renderBufferDirect(n,t,r,s,e,i),s.side=2):f.renderBufferDirect(n,t,r,s,e,i),e.onAfterRender(f,t,n,r,s,i)}function De(e,t,n){!0!==t.isScene&&(t=H);const r=W.get(e),s=h.state.lights,i=h.state.shadowsArray,o=s.state.version,a=Q.getParameters(e,s.state,i,t,n),l=Q.getProgramCacheKey(a);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?X:q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",xe),c=new Map,r.programs=c);let d=c.get(l);if(void 0!==d){if(r.currentProgram===d&&r.lightsStateVersion===o)return Oe(e,a),d}else a.uniforms=Q.getUniforms(e),e.onBuild(n,a,f),e.onBeforeCompile(a,f),d=Q.acquireProgram(a,l),c.set(l,d),r.uniforms=a.uniforms;const u=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=re.uniform),Oe(e,a),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(u.ambientLightColor.value=s.state.ambient,u.lightProbe.value=s.state.probe,u.directionalLights.value=s.state.directional,u.directionalLightShadows.value=s.state.directionalShadow,u.spotLights.value=s.state.spot,u.spotLightShadows.value=s.state.spotShadow,u.rectAreaLights.value=s.state.rectArea,u.ltc_1.value=s.state.rectAreaLTC1,u.ltc_2.value=s.state.rectAreaLTC2,u.pointLights.value=s.state.point,u.pointLightShadows.value=s.state.pointShadow,u.hemisphereLights.value=s.state.hemi,u.directionalShadowMap.value=s.state.directionalShadowMap,u.directionalShadowMatrix.value=s.state.directionalShadowMatrix,u.spotShadowMap.value=s.state.spotShadowMap,u.spotLightMatrix.value=s.state.spotLightMatrix,u.spotLightMap.value=s.state.spotLightMap,u.pointShadowMap.value=s.state.pointShadowMap,u.pointShadowMatrix.value=s.state.pointShadowMatrix);const m=d.getUniforms(),p=Lv.seqWithValue(m.seq,u);return r.currentProgram=d,r.uniformsList=p,d}function Oe(e,t){const n=W.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ce.setAnimationLoop((function(e){Me&&Me(e)})),"undefined"!=typeof self&&Ce.setContext(self),this.setAnimationLoop=function(e){Me=e,ye.setAnimationLoop(e),null===e?Ce.stop():Ce.start()},ye.addEventListener("sessionstart",Se),ye.addEventListener("sessionend",Te),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===ye.enabled&&!0===ye.isPresenting&&(!0===ye.cameraAutoUpdate&&ye.updateCamera(t),t=ye.getCamera()),!0===e.isScene&&e.onBeforeRender(f,e,t,_),h=ne.get(e,p.length),h.init(),p.push(h),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(z),N=this.localClippingEnabled,P=re.init(this.clippingPlanes,N,t),u=te.get(e,m.length),u.init(),m.push(u),Ee(e,t,0,f.sortObjects),u.finish(),!0===f.sortObjects&&u.sort(k,L),!0===P&&re.beginShadows();const n=h.state.shadowsArray;if(se.render(n,e,t),!0===P&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(u,e),h.setupLights(f.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];ke(u,e,r,r.viewport)}}else ke(u,e,t);null!==_&&(G.updateMultisampleRenderTarget(_),G.updateRenderTargetMipmap(_)),!0===e.isScene&&e.onAfterRender(f,e,t),ue.resetDefaultState(),b=-1,w=null,p.pop(),h=p.length>0?p[p.length-1]:null,m.pop(),u=m.length>0?m[m.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(e,t,n){W.get(e.texture).__webglTexture=t,W.get(e.depthTexture).__webglTexture=n;const r=W.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===U.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=W.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){_=e,v=t,y=n;let r=!0,s=null,i=!1,o=!1;if(e){const n=W.get(e);void 0!==n.__useDefaultFramebuffer?(V.bindFramebuffer(pe.FRAMEBUFFER,null),r=!1):void 0===n.__webglFramebuffer?G.setupRenderTarget(e):n.__hasExternalTextures&&G.rebindTextures(e,W.get(e.texture).__webglTexture,W.get(e.depthTexture).__webglTexture);const a=e.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(o=!0);const l=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(s=l[t],i=!0):s=Y.isWebGL2&&e.samples>0&&!1===G.useMultisampledRTT(e)?W.get(e).__webglMultisampledFramebuffer:l,x.copy(e.viewport),M.copy(e.scissor),S=e.scissorTest}else x.copy(A).multiplyScalar(E).floor(),M.copy(D).multiplyScalar(E).floor(),S=O;if(V.bindFramebuffer(pe.FRAMEBUFFER,s)&&Y.drawBuffers&&r&&V.drawBuffers(e,s),V.viewport(x),V.scissor(M),V.setScissorTest(S),i){const r=W.get(e.texture);pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=W.get(e.texture),s=t||0;pe.framebufferTextureLayer(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,r.__webglTexture,n||0,s)}b=-1},this.readRenderTargetPixels=function(e,t,n,r,s,i,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){V.bindFramebuffer(pe.FRAMEBUFFER,a);try{const o=e.texture,a=o.format,l=o.type;if(a!==Pt&&de.convert(a)!==pe.getParameter(pe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Ot&&(U.has("EXT_color_buffer_half_float")||Y.isWebGL2&&U.has("EXT_color_buffer_float"));if(!(l===Lt||de.convert(l)===pe.getParameter(pe.IMPLEMENTATION_COLOR_READ_TYPE)||l===Dt&&(Y.isWebGL2||U.has("OES_texture_float")||U.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-s&&pe.readPixels(t,n,r,s,de.convert(a),de.convert(l),i)}finally{const e=null!==_?W.get(_).__webglFramebuffer:null;V.bindFramebuffer(pe.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),s=Math.floor(t.image.width*r),i=Math.floor(t.image.height*r);G.setTexture2D(t,0),pe.copyTexSubImage2D(pe.TEXTURE_2D,n,0,0,e.x,e.y,s,i),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const s=t.image.width,i=t.image.height,o=de.convert(n.format),a=de.convert(n.type);G.setTexture2D(n,0),pe.pixelStorei(pe.UNPACK_FLIP_Y_WEBGL,n.flipY),pe.pixelStorei(pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),pe.pixelStorei(pe.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?pe.texSubImage2D(pe.TEXTURE_2D,r,e.x,e.y,s,i,o,a,t.image.data):t.isCompressedTexture?pe.compressedTexSubImage2D(pe.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):pe.texSubImage2D(pe.TEXTURE_2D,r,e.x,e.y,o,a,t.image),0===r&&n.generateMipmaps&&pe.generateMipmap(pe.TEXTURE_2D),V.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,s=0){if(f.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const i=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,l=de.convert(r.format),c=de.convert(r.type);let d;if(r.isData3DTexture)G.setTexture3D(r,0),d=pe.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");G.setTexture2DArray(r,0),d=pe.TEXTURE_2D_ARRAY}pe.pixelStorei(pe.UNPACK_FLIP_Y_WEBGL,r.flipY),pe.pixelStorei(pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),pe.pixelStorei(pe.UNPACK_ALIGNMENT,r.unpackAlignment);const u=pe.getParameter(pe.UNPACK_ROW_LENGTH),h=pe.getParameter(pe.UNPACK_IMAGE_HEIGHT),m=pe.getParameter(pe.UNPACK_SKIP_PIXELS),p=pe.getParameter(pe.UNPACK_SKIP_ROWS),g=pe.getParameter(pe.UNPACK_SKIP_IMAGES),v=n.isCompressedTexture?n.mipmaps[0]:n.image;pe.pixelStorei(pe.UNPACK_ROW_LENGTH,v.width),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,v.height),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,e.min.x),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,e.min.y),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?pe.texSubImage3D(d,s,t.x,t.y,t.z,i,o,a,l,c,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),pe.compressedTexSubImage3D(d,s,t.x,t.y,t.z,i,o,a,l,v.data)):pe.texSubImage3D(d,s,t.x,t.y,t.z,i,o,a,l,c,v),pe.pixelStorei(pe.UNPACK_ROW_LENGTH,u),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,h),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,m),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,p),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,g),0===s&&r.generateMipmaps&&pe.generateMipmap(d),V.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?G.setTextureCube(e,0):e.isData3DTexture?G.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?G.setTexture2DArray(e,0):G.setTexture2D(e,0),V.unbindTexture()},this.resetState=function(){v=0,y=0,_=null,V.reset(),ue.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var by,wy=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopCenter=1]="TopCenter",e[e.TopRight=2]="TopRight",e[e.BottomLeft=3]="BottomLeft",e[e.BottomCenter=4]="BottomCenter",e[e.BottomRight=5]="BottomRight"}(by||(by={}));let xy=class extends Ti{constructor(){super(),this.labels=[],this.labels.push({},{},{},{},{},{})}setLabel(e,t,n,r){this.labels[e][t]={text:n,className:r},this.requestUpdate()}unsetLabel(e,t){delete this.labels[e][t],this.requestUpdate()}firstConnected(){this.classList.add("ff-container","ff-viewport-overlay")}render(){const e=this.labels;return qs`<div class="ff-row">
            <div class="ff-labels ff-top-left">${Object.keys(e[by.TopLeft]).map((t=>{const n=e[by.TopLeft][t];return qs`<div class=${"ff-label "+n.className||0}>${n.text}</div>`}))}</div>
            <div class="ff-labels ff-top-center">${Object.keys(e[by.TopCenter]).map((t=>{const n=e[by.TopCenter][t];return qs`<div class=${"ff-label "+n.className||0}>${n.text}</div>`}))}</div>
            <div class="ff-labels ff-top-right">${Object.keys(e[by.TopRight]).map((t=>{const n=e[by.TopRight][t];return qs`<div class=${"ff-label "+n.className||0}>${n.text}</div>`}))}</div>
        </div><div class="ff-row">
            <div class="ff-labels ff-bottom-left">${Object.keys(e[by.BottomLeft]).map((t=>{const n=e[by.BottomLeft][t];return qs`<div class=${"ff-label "+n.className||0}>${n.text}</div>`}))}</div>
            <div class="ff-labels ff-bottom-center">${Object.keys(e[by.BottomCenter]).map((t=>{const n=e[by.BottomCenter][t];return qs`<div class=${"ff-label "+n.className||0}>${n.text}</div>`}))}</div>
            <div class="ff-labels ff-bottom-right">${Object.keys(e[by.BottomRight]).map((t=>{const n=e[by.BottomRight][t];return qs`<div class=${"ff-label "+n.className||0}>${n.text}</div>`}))}</div>
        </div>`}};xy=wy([Ci("ff-viewport-overlay")],xy);const My=xy;class Sy extends c{constructor(e){super(),this.next=null,this._canvasWidth=1,this._canvasHeight=1,this._overlay=null,this._camera=null,this._controller=null,this.addEvent("dispose"),this.next=null,e=e||{},this._relRect={x:e.x||0,y:e.y||0,width:e.width||1,height:e.height||1},this._absRect={x:0,y:0,width:1,height:1},e.overlay&&(this._overlay=e.overlay)}get x(){return this._absRect.x}get y(){return this._absRect.y}get width(){return this._absRect.width}get height(){return this._absRect.height}get canvasWidth(){return this._canvasWidth}get canvasHeight(){return this._canvasHeight}get camera(){return this._camera}get controller(){return this._controller}get overlay(){return this._overlay}set overlay(e){this._overlay=e,this.updateGeometry()}dispose(){this.emit({type:"dispose",viewport:this}),this._overlay&&(this._overlay.remove(),this._overlay=null)}setSize(e,t,n,r){const s=this._relRect;s.x=e,s.y=t,s.width=n,s.height=r,this.updateGeometry()}setCanvasSize(e,t){this._canvasWidth=e,this._canvasHeight=t,this.updateGeometry(),this._controller&&this._controller.setViewportSize(e,t)}setBuiltInCamera(e,t){this._camera?this._camera.setProjection(e):(this._camera=new ld(e),this._camera.matrixAutoUpdate=!1),void 0!==t&&(this._camera.setPreset(t),this.overlay.setLabel(by.TopRight,"view",ad[t],"ff-label-box"))}unsetBuiltInCamera(){this._camera=null,this._controller=null,this.overlay.unsetLabel(by.TopRight,"view")}enableCameraControl(e){return!e&&this._controller?this._controller=null:e&&this._camera&&(this._controller||(this._controller=new Mm(this._camera),this._controller.setViewportSize(this.width,this.height),this._controller.updateController())),this._controller}zoomExtents(e){const t=this._camera,n=this._controller;t&&n&&(n.zoomExtents(e),n.updateCamera(null,!0))}isInside(e){return this.isPointInside(e.localX,e.localY)}isPointInside(e,t){const n=this._absRect;return t=this.canvasHeight-t,e>=n.x&&e<n.x+n.width&&t>=n.y&&t<n.y+n.height}getDevicePoint(e,t,n){const r=this._absRect,s=(e-r.x)/r.width*2-1,i=(this.canvasHeight-t-r.y)/r.height*2-1;return n?n.set(s,i):new mn(s,i)}getDeviceX(e){const t=this._absRect;return(e-t.x)/t.width*2-1}getDeviceY(e){const t=this._absRect;return(this.canvasHeight-e-t.y)/t.height*2-1}updateCamera(e){let t=e;if(this._camera&&(t=this._camera,this._controller&&this._controller.updateCamera()),!t)return;const n=this._absRect,r=n.width/n.height;if(r!==t.userData.aspect)if(t.userData.aspect=r,t.isUniversalCamera||t.isPerspectiveCamera)t.aspect=r,t.updateProjectionMatrix();else if(t.isOrthographicCamera){const e=.5*(t.top-t.bottom);t.left=-e*r,t.right=e*r,t.updateProjectionMatrix()}return t}applyViewport(e){const t=this._absRect;e.setViewport(t.x,t.y,t.width,t.height),e.viewport=this}applyPickViewport(e,t){const n=this._absRect,r=t.localX-n.x,s=this.canvasHeight-t.localY-n.y;e.viewport.set(-r,-s,n.width,n.height)}toViewportEvent(e){const t=e;return t.viewport=this,t.deviceX=this.getDeviceX(e.localX),t.deviceY=this.getDeviceY(e.localY),t}onPointer(e){return!!this._controller&&this._controller.onPointer(e)}onTrigger(e){return!!this._controller&&this._controller.onTrigger(e)}onKeyboard(e){return!!this._controller&&this._controller.onKeypress(e)}toString(){return`Viewport (x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height})`}updateGeometry(){const e=this._relRect,t=this._absRect,n=this._canvasWidth,r=this._canvasHeight;t.x=Math.round(e.x*n),t.y=Math.round(e.y*r),t.width=Math.round(e.width*n),t.height=Math.round(e.height*r);const s=this._overlay;if(s){const e=this.canvasHeight-t.y-t.height;s.style.left=t.x?t.x.toFixed()+"px":"0",s.style.top=e?e.toFixed()+"px":"0",s.style.width=t.width.toFixed()+"px",s.style.height=t.height.toFixed()+"px"}}}class Ty extends c{constructor(e,t,n){super(),this.viewports=[],this.rendererComponent=null,this.targetViewport=null,this.targetObject3D=null,this.targetComponent=null,this.targetScene=null,this.targetCamera=null,this.defaultScene=new fr,this.defaultCamera=new ld,this.system=e,this.canvas=t,this.overlay=n,this.renderer=new _y({canvas:t,antialias:!0}),this.renderer.autoClear=!1,this.renderer.outputEncoding=$t,this.picker=new pr(this.renderer)}dispose(){this.renderer.dispose(),this.viewports.forEach((e=>e.dispose()))}get canvasWidth(){return this.canvas.width}get canvasHeight(){return this.canvas.height}attach(){const e=this.canvasWidth,t=this.canvasHeight;this.viewports.forEach((n=>n.setCanvasSize(e,t))),this.renderer.setSize(e,t,!1),this.rendererComponent=this.system.getComponent(_r,!0),this.rendererComponent.attachView(this)}detach(){this.rendererComponent=this.system.getComponent(_r,!0),this.rendererComponent.detachView(this),this.rendererComponent=null}renderImage(e,t,n,r){const s=this.canvas.width,i=this.canvas.height;this.setRenderSize(e,t),this.render();const o=this.canvas.toDataURL(n,r);return this.setRenderSize(s,i),o}render(){const e=this.rendererComponent.activeSceneComponent;if(!e)return;let t=e.scene,n=e.activeCamera;t&&n||(t=this.defaultScene,n=this.defaultCamera);const r=this.renderer;r.clear(),r.__view=this;const s=this.viewports;for(let e=0,i=s.length;e<i;++e){const i=s[e];let o=r.getContext();o.clear(o.DEPTH_BUFFER_BIT),o.finish(),r.__viewport=i;const a=i.updateCamera(n);i.applyViewport(this.renderer),r.render(t,a)}}setRenderSize(e,t){this.canvas.width=e,this.canvas.height=t,this.viewports.forEach((n=>n.setCanvasSize(e,t))),this.renderer.xr.isPresenting||this.renderer.setSize(e,t,!1)}resize(){this.setRenderSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.xr.isPresenting||this.render()}setViewportCount(e){const t=this.viewports;for(let n=e;n<t.length;++n)t[n].dispose();for(let n=t.length;n<e;++n){const e=(new My).appendTo(this.overlay);t[n]=new Sy,t[n].setCanvasSize(this.canvasWidth,this.canvasHeight),t[n].overlay=e}t.length=e}getViewportCount(){return this.viewports.length}onPointer(e){if(!this.system)return!1;let t=!1,n=!1;"pointer-hover"===e.type?n=!0:e.isPrimary&&"pointer-down"===e.type&&(n=!0,t=!0);const r=this.routeEvent(e,n,t);if(r){const e=r.component;if(e){e.emit(r);const t=e.getComponent(Tr);!r.stopPropagation&&t&&t.propagateUp(!1,!0,r)}if(r.stopPropagation||this.system.emit(r),!r.stopPropagation){r.viewport.onPointer(r)&&this.system.getMainComponent(_r).forceRender()}return!0}return!1}onTrigger(e){if(!this.system)return!1;const t=this.routeEvent(e,!0,!0);if(t){const e=t.component;if(e){e.emit(t);const n=e.getComponent(Tr);!t.stopPropagation&&n&&n.propagateUp(!1,!0,t)}if(t.stopPropagation||this.system.emit(t),!t.stopPropagation){t.viewport.onTrigger(t)&&this.system.getMainComponent(_r).forceRender()}return!0}return!1}onKeypress(e){if(!this.system)return!1;const t=this.routeEvent(e,!1,!1);if(t){const e=t.component;if(e){e.emit(t);const n=e.getComponent(Tr);!t.stopPropagation&&n&&n.propagateUp(!1,!0,t)}if(t.stopPropagation||this.system.emit(t),!t.stopPropagation){t.viewport.onKeyboard(t)&&this.system.getMainComponent(_r).forceRender()}return!0}return!1}pickPosition(e,t,n){return this.picker.pickPosition(this.targetScene,this.targetCamera,e,t,n)}pickNormal(e,t){return this.picker.pickNormal(this.targetScene,this.targetCamera,e,t)}routeEvent(e,t,n){let r=this.targetViewport,s=this.targetObject3D,i=this.targetComponent;if(t){r=null;const t=this.viewports;for(let n=0,s=t.length;n<s;++n){const s=t[n];if(s.isInside(e)){r=s;break}}}if(!r)return null;const o=e;if(o.view=this,o.viewport=r,o.deviceX=r.getDeviceX(e.localX),o.deviceY=r.getDeviceY(e.localY),o.stopPropagation=!1,n){const t=this.rendererComponent.activeSceneComponent,n=this.targetScene=t&&t.scene,r=this.targetCamera=t&&t.activeCamera;if(s=null,i=null,n&&r)if(s=this.picker.pickObject(n,r,e),void 0===s)0;else{let e=s;for(;e&&!i;)i=e.userData.component,i||(e=e.parent);0}}return o.object3D=s,o.component=i,this.targetViewport=r,this.targetObject3D=s,this.targetComponent=i,o}}var Cy;!function(e){e[e.Single=0]="Single",e[e.HorizontalSplit=1]="HorizontalSplit",e[e.VerticalSplit=2]="VerticalSplit",e[e.Quad=3]="Quad"}(Cy||(Cy={}));class Ey extends Ty{constructor(e,t,n){super(e,t,n),this._layout=Cy.Quad,this._horizontalSplit=.5,this._verticalSplit=.5,this.addEvent("layout"),this.layout=Cy.Single}set layout(e){if(e===this._layout)return;this._layout=e;const t=this.viewports;switch(this._layout){case Cy.Single:this.setViewportCount(1);break;case Cy.HorizontalSplit:case Cy.VerticalSplit:this.setViewportCount(2);break;case Cy.Quad:this.setViewportCount(4)}this.updateSplitPositions(),t[1]&&(t[1].setBuiltInCamera(od.Orthographic,ad.Top),t[1].enableCameraControl(!0).orientationEnabled=!1),t[2]&&(t[2].setBuiltInCamera(od.Orthographic,ad.Left),t[2].enableCameraControl(!0).orientationEnabled=!1),t[3]&&(t[3].setBuiltInCamera(od.Orthographic,ad.Front),t[3].enableCameraControl(!0).orientationEnabled=!1),this.emit({type:"layout",layout:e})}get layout(){return this._layout}set horizontalSplit(e){this._horizontalSplit=e,this.updateSplitPositions()}get horizontalSplit(){return this._horizontalSplit}set verticalSplit(e){this._verticalSplit=e,this.updateSplitPositions()}get verticalSplit(){return this._verticalSplit}updateSplitPositions(){const e=this._horizontalSplit,t=this._verticalSplit;switch(this._layout){case Cy.Single:this.viewports[0].setSize(0,0,1,1);break;case Cy.HorizontalSplit:this.viewports[0].setSize(0,0,e,1),this.viewports[1].setSize(e,0,1-e,1);break;case Cy.VerticalSplit:this.viewports[0].setSize(0,1-t,1,t),this.viewports[1].setSize(0,0,1,1-t);break;case Cy.Quad:this.viewports[0].setSize(0,1-t,e,t),this.viewports[1].setSize(e,1-t,1-e,t),this.viewports[2].setSize(0,0,e,1-t),this.viewports[3].setSize(e,0,1-e,1-t)}}}var ky,Ly=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Ay=ky=class extends Ti{constructor(){super(),this.direction="horizontal",this.width=5,this.margin=20,this.detached=!1,this._isActive=!1,this._offset=0,this._position=0,this.addEventListener("pointerdown",(e=>this.onPointerDown(e))),this.addEventListener("pointermove",(e=>this.onPointerMove(e))),this.addEventListener("pointerup",(e=>this.onPointerUpOrCancel(e))),this.addEventListener("pointercancel",(e=>this.onPointerUpOrCancel(e)))}get position(){return this._position}isHorizontal(){return"horizontal"===this.direction}update(e){super.update(e);const t=this.isHorizontal(),n=this.width;this.setStyle({padding:t?`0 ${n}px`:`${n}px 0`,margin:t?`0 ${-n}px`:-n+"px 0",cursor:t?"col-resize":"row-resize"})}firstUpdated(){this.classList.add("ff-splitter"),this.setAttribute("touch-action","none"),this.setStyle({position:"relative",display:"block",zIndex:"1",touchAction:"none"})}onPointerDown(e){if(e.isPrimary){e.stopPropagation(),e.preventDefault(),this._isActive=!0,this.setPointerCapture(e.pointerId);const t=this.getBoundingClientRect();this._offset=this.isHorizontal()?t.left+.5*t.width-e.clientX:t.top+.5*t.height-e.clientY}}onPointerMove(e){if(e.isPrimary&&this._isActive){e.stopPropagation(),e.preventDefault();const t=this.parentElement;if(!t)return;const n=t.getBoundingClientRect(),r=this.isHorizontal(),s=r?n.width:n.height;let i=this._offset+(r?e.clientX-n.left:e.clientY-n.top),o=i/s;if(!this.detached){const e=this.previousElementSibling,n=this.nextElementSibling;if(e instanceof HTMLElement&&n instanceof HTMLElement){const a=Array.from(t.children);let l=0,c=s,d=!1;a.forEach((t=>{if(t instanceof ky)return;if(t===e||t===n)return void(d=!0);const s=t.getBoundingClientRect(),i=r?s.width:s.height;c-=i,d||(l+=i)}));const u=this.margin,h=c-u;i-=l,i=i<u?u:i>h?h:i;const m=(c-i)/s;o=i/s,e.style.flexBasis=(100*o).toFixed(3)+"%",n.style.flexBasis=(100*m).toFixed(3)+"%",setTimeout((()=>window.dispatchEvent(new CustomEvent("resize"))),0)}}this._position=o,this.dispatchEvent(new CustomEvent(ky.changeEvent,{detail:{direction:this.direction,position:this._position,isDragging:!0}}))}}onPointerUpOrCancel(e){e.isPrimary&&(e.stopPropagation(),e.preventDefault(),this._isActive=!1,this.dispatchEvent(new CustomEvent(ky.changeEvent,{detail:{direction:this.direction,position:this._position,isDragging:!1}})))}};Ay.changeEvent="ff-splitter-change",Ly([ai({type:String})],Ay.prototype,"direction",void 0),Ly([ai({type:Number})],Ay.prototype,"width",void 0),Ly([ai({type:Number})],Ay.prototype,"margin",void 0),Ly([ai({type:Boolean})],Ay.prototype,"detached",void 0),Ay=ky=Ly([Ci("ff-splitter")],Ay);const Dy=Ay;var Oy,Ry=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e[e.Single=0]="Single",e[e.HorizontalSplit=1]="HorizontalSplit",e[e.VerticalSplit=2]="VerticalSplit",e[e.Quad=3]="Quad"}(Oy||(Oy={}));let Py=class extends Ti{constructor(){super(...arguments),this.layout=Oy.Single,this.horizontalPosition=.5,this.verticalPosition=.5}firstConnected(){this.classList.add("ff-quad-splitter")}render(){const e=this.layout;if(e===Oy.Single)return qs``;const t=[];return e!==Oy.HorizontalSplit&&e!==Oy.Quad||t.push(qs`
                <div class="ff-horizontal" style="position:absolute; top:0; bottom:0; left:0; right:0; display:flex;">
                    <div class="ff-left" style="flex:1 1;"></div>
                    <ff-splitter direction="horizontal" position=${this.horizontalPosition} @ff-splitter-change=${this.onSplitterChange}></ff-splitter>
                    <div style="flex:1 1;"></div>
                </div>
            `),e!==Oy.VerticalSplit&&e!==Oy.Quad||t.push(qs`
                <div class="ff-vertical" style="position:absolute; top:0; bottom:0; left:0; right:0; display:flex; flex-direction: column">
                    <div class="ff-top" style="flex:1 1;"></div>
                    <ff-splitter direction="vertical" position=${this.verticalPosition} @ff-splitter-change=${this.onSplitterChange}></ff-splitter>
                    <div style="flex:1 1;"></div>
                </div>
            `),qs`${t}`}onSplitterChange(e){"horizontal"===e.detail.direction?this.horizontalPosition=e.detail.position:this.verticalPosition=e.detail.position,this.onChange&&this.onChange({layout:this.layout,horizontalSplit:this.horizontalPosition,verticalSplit:this.verticalPosition,isDragging:e.detail.isDragging})}};Ry([ai({attribute:!1})],Py.prototype,"layout",void 0),Ry([ai({attribute:!1})],Py.prototype,"horizontalPosition",void 0),Ry([ai({attribute:!1})],Py.prototype,"verticalPosition",void 0),Py=Ry([Ci("ff-quad-splitter")],Py);const Ny=Py;var Iy=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let zy=class extends Bp{constructor(e){super(e),this.view=null,this.canvas=null,this.overlay=null,this.srAnnouncement=null,this.splitter=null,this.resizeObserver=null,this.pointerEventsEnabled=!1,this.manipTarget=new jf,this.addEventListener("pointerdown",this.manipTarget.onPointerDown),this.addEventListener("pointermove",this.manipTarget.onPointerMove),this.addEventListener("pointerup",this.manipTarget.onPointerUpOrCancel),this.addEventListener("pointercancel",this.manipTarget.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointermove",this.manipTarget.onPointerMove),this.ownerDocument.addEventListener("pointerup",this.manipTarget.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointercancel",this.manipTarget.onPointerUpOrCancel),this.addEventListener("wheel",this.manipTarget.onWheel),this.addEventListener("contextmenu",this.manipTarget.onContextMenu),this.addEventListener("keydown",this.manipTarget.onKeyDown),this.pointerEventsEnabled=!0}firstConnected(){this.classList.add("sv-scene-view"),this.style.touchAction="none",this.setAttribute("touch-action","none"),this.tabIndex=0,this.ariaLabel="Interactive 3D Model. Use mouse, touch, or arrow keys to rotate.",this.setAttribute("role","application"),this.srAnnouncement=this.appendElement("div"),this.srAnnouncement.classList.add("sr-only"),this.srAnnouncement.setAttribute("aria-live","polite"),this.canvas=this.appendElement("canvas",{display:"block",width:"100%",height:"100%"}),this.overlay=this.appendElement("div",{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",overflow:"hidden"}),this.overlay.classList.add("sv-content-overlay"),this.splitter=this.appendElement(Ny,{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",overflow:"hidden"}),this.splitter.onChange=e=>{this.view.horizontalSplit=e.horizontalSplit,this.view.verticalSplit=e.verticalSplit},this.view=new Ey(this.system,this.canvas,this.overlay),this.view.on("layout",(e=>this.splitter.layout=e.layout)),this.view.layout=Oy.Single,this.splitter.layout=Oy.Single,this.manipTarget.next=this.view}connected(){this.view.attach(),this.resizeObserver||(this.resizeObserver=new ResizeObserver((()=>this.view.resize()))),this.resizeObserver.observe(this.view.renderer.domElement),this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins.pointerEnabled.on("value",this.enablePointerEvents,this),this.system.getComponent(Cm).ins.keyNavActive.on("value",this.onKeyboardNavigation,this)}disconnected(){this.resizeObserver.disconnect(),this.system.getComponent(Cm).ins.keyNavActive.off("value",this.onKeyboardNavigation,this),this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins.pointerEnabled.off("value",this.enablePointerEvents,this),this.view.detach()}enablePointerEvents(){const e=this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins.pointerEnabled.value;e&&!this.pointerEventsEnabled?(this.addEventListener("pointerdown",this.manipTarget.onPointerDown),this.addEventListener("pointermove",this.manipTarget.onPointerMove),this.addEventListener("pointerup",this.manipTarget.onPointerUpOrCancel),this.addEventListener("pointercancel",this.manipTarget.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointermove",this.manipTarget.onPointerMove),this.ownerDocument.addEventListener("pointerup",this.manipTarget.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointercancel",this.manipTarget.onPointerUpOrCancel),this.addEventListener("wheel",this.manipTarget.onWheel),this.addEventListener("contextmenu",this.manipTarget.onContextMenu),this.addEventListener("keydown",this.manipTarget.onKeyDown),this.style.touchAction="none",this.setAttribute("touch-action","none"),this.pointerEventsEnabled=!0):!e&&this.pointerEventsEnabled&&(this.removeEventListener("pointerdown",this.manipTarget.onPointerDown),this.removeEventListener("pointermove",this.manipTarget.onPointerMove),this.removeEventListener("pointerup",this.manipTarget.onPointerUpOrCancel),this.removeEventListener("pointercancel",this.manipTarget.onPointerUpOrCancel),this.ownerDocument.removeEventListener("pointermove",this.manipTarget.onPointerMove),this.ownerDocument.removeEventListener("pointerup",this.manipTarget.onPointerUpOrCancel),this.ownerDocument.removeEventListener("pointercancel",this.manipTarget.onPointerUpOrCancel),this.removeEventListener("wheel",this.manipTarget.onWheel),this.removeEventListener("contextmenu",this.manipTarget.onContextMenu),this.removeEventListener("keydown",this.manipTarget.onKeyDown),this.style.touchAction="auto",this.setAttribute("touch-action","auto"),this.pointerEventsEnabled=!1)}onKeyboardNavigation(){const e=this.system.getComponent(Cm).ins;switch(e.keyNavActive.value){case xm.Orbit:this.srAnnouncement.textContent="Orbit "+e.orbit.value[0].toFixed(0)+", "+e.orbit.value[1].toFixed(0)+", "+e.orbit.value[2].toFixed(0);break;case xm.Pan:case xm.Zoom:this.srAnnouncement.textContent="Offset "+e.offset.value[0].toFixed(0)+", "+e.offset.value[1].toFixed(0)+", "+e.offset.value[2].toFixed(0)}}};zy=Iy([Ci("sv-scene-view")],zy);const By=zy;var Fy,Hy=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let jy=Fy=class extends Ti{constructor(){super(...arguments),this.visible=!1}firstConnected(){super.firstConnected(),this.classList.add("sv-spinner")}render(){return this.style.visibility=this.visible?"visible":"hidden",Fy.template}};jy.template=qs`<div class="sv-spinner-wheel"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><style type="text/css">.st0{fill:none;stroke:#009ADE;stroke-width:5;stroke-miterlimit:10;}.st1{fill:none;stroke:#FFCD00;stroke-width:5;stroke-miterlimit:10;}</style><circle class="st0" cx="256.6" cy="256" r="252"/><path class="st1" d="M408.6,307c-16.3-28-42.1-28.4-45.3-28.3c0,0,0-0.1,0-0.1L472,256l-108.7-22.6l0,0c1.1-1,22.3-19.7,54-20.2 c23.9-0.4,44.6-29.6,31.4-52.1c0,0-3.9,35.4-48.6,23.6c-31.4-8.3-49.9,9.7-52,12l0,0l60.9-93L316,164.5c0,0,0,0,0,0 c0.1-1.4,1.8-29.6,23.9-52.4c16.7-17.2,10.6-52.5-14.6-59.1c0,0,22.2,27.8-17.7,51c-28.1,16.3-28.4,42.1-28.3,45.3l-0.1,0 L256.6,40.5l-22.7,108.7c0,0,0,0,0,0c-0.9-1-19.7-22.2-20.2-54c-0.4-23.9-29.6-44.6-52.1-31.4c0,0,35.3,3.9,23.6,48.6 c-8.3,31.5,9.8,49.9,12,52.1l0,0l-93-60.9l0,0l0,0l49.6,75.7l11.3,17.2c0,0,0,0,0,0c-0.9,0-29.4-1.6-52.5-23.9 c-17.2-16.7-52.5-10.6-59.1,14.6c0,0,27.8-22.2,51,17.7c16.4,28.1,42.3,28.4,45.3,28.3c0,0,0,0,0,0L41.1,256l108.8,22.7v0 c-0.7,0.7-22,19.7-54,20.2c-23.9,0.4-44.6,29.6-31.4,52.1c0,0,3.9-35.4,48.6-23.6c31.5,8.3,50-9.9,52.1-12c0,0,0,0.1,0.1,0.1 l-60.9,92.9l92.9-60.9c0,1-1.6,29.5-23.9,52.5c-16.7,17.2-10.6,52.5,14.6,59.1c0,0-22.2-27.8,17.7-51c28.1-16.4,28.4-42.2,28.3-45.3 c0,0,0.1,0,0.1,0l22.7,108.7l22.7-108.7l0,0c0.8,0.9,19.7,22.1,20.2,54c0.4,23.9,29.6,44.6,52.1,31.4c0,0-35.3-3.9-23.6-48.5 c8.3-31.5-9.8-49.9-12-52.1c0,0,0.1,0,0.1-0.1l92.9,60.9l-32.1-49.1L348,315.4l0,0c1.3,0.1,29.6,1.7,52.4,23.9 c17.2,16.7,52.5,10.6,59.1-14.6C459.6,324.7,431.8,346.9,408.6,307z"/></svg></div>`,Hy([ai({type:Boolean})],jy.prototype,"visible",void 0),jy=Fy=Hy([Ci("sv-spinner")],jy);var Uy=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Yy=class extends Fp{constructor(){super(...arguments),this.reader=null,this.language=null,this.firstRender=!0}firstConnected(){super.firstConnected(),this.classList.add("sv-reader-view")}renderMenuEntry(e,t){const n=e.article;return qs`<div role="option" title="article" tabindex=${0===t?"0":"-1"} @keydown=${e=>this.onKeyDown(e,n.id)} class="sv-entry" @click=${e=>this.onClickArticle(e,n.id)}>
            <h1>${n.title}</h1>
            <p>${n.lead}</p>
        </div>`}render(){const e=this.reader,t=this.language;if(!e)return qs`<div class="ff-placeholder">Please select a document to display its articles.</div>`;if(!e.activeArticle){const n=e.articles;return qs`<div class="sv-left"></div><div role="listbox" aria-label="articles" class="sv-article">
                <!--ff-button class="sv-nav-button" inline title=${t.getLocalizedString("Close Article Reader")} icon="close" @click=${this.onClickClose}></ff-button-->
                ${n.map(((e,t)=>this.renderMenuEntry(e,t)))}
            </div><div class="sv-right"></div>`}return qs`<div class="sv-left"></div><div class="sv-article" @keydown=${t=>this.onKeyDown(t,e.activeArticle.id)} >
                <ff-button class="sv-nav-button" inline title=${t.getLocalizedString("Close Article Reader")} icon="close" @click=${this.onClickClose}></ff-button>
                <ff-button class="sv-nav-button" inline title=${t.getLocalizedString("Article Menu")} icon="bars" @click=${this.onClickMenu}></ff-button>
                <div role="region" aria-live="polite" aria-atomic="true" title="article" class="sv-container"></div>
            </div><div class="sv-right"></div>`}onClickMenu(e){e.stopPropagation(),this.reader.ins.articleId.setValue(""),this.reader.ins.focus.setValue(!0)}onClickClose(e){e.stopPropagation(),this.dispatchEvent(new CustomEvent("close"))}onClickArticle(e,t){this.reader.ins.articleId.setValue(t)}updated(e){super.updated(e);const t=this.reader;if(t){if(t.activeArticle){const e=this.getElementsByClassName("sv-container").item(0);e.innerHTML=t.outs.content.value,this.firstRender&&(setTimeout((()=>{e.insertAdjacentHTML("beforeend","<div>-end of article-</div>")}),200),this.firstRender=!1)}t.ins.focus.value&&(this.setFocus(),t.ins.focus.setValue(!1,!0))}}onActiveDocument(e,t){e&&(e.setup.language.outs.language.off("value",this.onUpdate,this),this.reader.outs.content.off("value",this.onUpdate,this),this.reader.outs.article.off("value",this.onUpdate,this),this.language=null,this.reader=null),t&&(this.reader=t.setup.reader,this.language=t.setup.language,this.reader.outs.content.on("value",this.onUpdate,this),this.reader.outs.article.on("value",this.onUpdate,this),t.setup.language.outs.language.on("value",this.onUpdate,this))}onKeyDown(e,t){const n=this.reader;if("Space"!==e.code&&"Enter"!==e.code||!n||n.activeArticle){if("Escape"===e.code)e.preventDefault(),n.activeArticle?(n.ins.articleId.setValue(""),n.ins.focus.setValue(!0)):this.dispatchEvent(new CustomEvent("close"));else if("Tab"===e.code)Sf(Mf(this),e);else if(("ArrowUp"===e.code||"ArrowDown"===e.code)&&n&&!n.activeArticle){const t=e.target instanceof Element?e.target:null;if(t){const n="ArrowUp"===e.code?t.previousElementSibling:t.nextElementSibling;n&&(t.setAttribute("tabIndex","-1"),n.setAttribute("tabIndex","0"),n.focus())}}}else e.preventDefault(),this.reader.ins.articleId.setValue(t),this.reader.ins.focus.setValue(!0)}setFocus(){(this.reader.activeArticle?this.getElementsByClassName("sv-nav-button").item(1):this.getElementsByClassName("sv-entry").item(0)).focus()}};Yy=Uy([Ci("sv-reader-view")],Yy);var Vy=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let $y=class extends Fp{get arManager(){return this.system.getMainComponent(_p)}firstConnected(){super.firstConnected()}render(){const e=this.arManager.outs;return!e.isPlaced.value&&e.isPresenting.value?qs`<div class="sv-ar-prompt">
                <div class="sv-content">
                    <div><ff-icon class="ff-off ff-icon sv-ar-icon" name="device-move"}></ff-icon></div>
                    Move the device to place your Smithsonian object!<br><br>**BETA**
                </div>
            </div>`:null}onActiveDocument(e,t){e&&(this.arManager.outs.isPlaced.off("value",this.onUpdate,this),this.arManager.outs.isPresenting.off("value",this.onUpdate,this)),t&&(this.arManager.outs.isPlaced.on("value",this.onUpdate,this),this.arManager.outs.isPresenting.on("value",this.onUpdate,this)),this.requestUpdate()}};$y=Vy([Ci("sv-ar-prompt-container")],$y);const Wy=$y;var Gy=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let qy=class extends Fp{constructor(){super(...arguments),this.documentProps=new Hf("value",this.onUpdate,this),this.shareButtonSelected=!1}get analytics(){return this.system.getMainComponent(Xi)}get arManager(){return this.system.getMainComponent(_p)}firstConnected(){super.firstConnected(),this.classList.add("sv-ar-menu-container")}connected(){super.connected()}disconnected(){super.disconnected()}render(){const e=this.activeDocument;if(!e)return qs``;const t=this.arManager.outs,n=e.setup,r=n.viewer.ins.annotationsVisible.value,s=n.audio.outs.narrationEnabled.value,i=n.audio.outs.narrationPlaying.value;return t.isPlaced.value&&t.isPresenting.value?qs`<div class="sv-ar-menu">
        ${qs`<ff-button icon="comment" title="Show/Hide Annotations"
            ?selected=${r} @click=${this.onToggleAnnotations}></ff-button>`}
        ${s?qs`<ff-button icon="audio" title=${"Play Audio Narration"}
            ?selected=${i} @click=${this.onToggleNarration}></ff-button>`:null}
        </div>`:null}onToggleReader(){const e=this.activeDocument.setup.reader.ins;e.enabled.setValue(!e.enabled.value),this.analytics.sendProperty("Reader.Enabled",e.enabled.value)}onToggleNarration(){const e=this.activeDocument.setup.audio;e.setupAudio(),e.ins.playNarration.set()}onToggleAnnotations(){const e=this.activeDocument.setup.viewer.ins;e.annotationsVisible.setValue(!e.annotationsVisible.value),this.analytics.sendProperty("Annotations.Visible",e.annotationsVisible.value)}onActiveDocument(e,t){if(e&&(this.documentProps.off(),this.arManager.outs.isPlaced.off("value",this.onUpdate,this),this.arManager.outs.isPresenting.off("value",this.onUpdate,this)),t){const e=t.setup;this.documentProps.on(e.viewer.ins.annotationsVisible,e.audio.outs.narrationPlaying),this.arManager.outs.isPlaced.on("value",this.onUpdate,this),this.arManager.outs.isPresenting.on("value",this.onUpdate,this)}this.requestUpdate()}};qy=Gy([Ci("sv-ar-menu")],qy);const Xy=qy;var Ky=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Jy=class extends Fp{constructor(){super(...arguments),this.sceneView=null,this.documentProps=new Hf("value",this.onUpdate,this),this.isMobile=null}get analytics(){return this.system.getMainComponent(Xi)}get assetManager(){return this.system.getMainComponent(Zi)}get reader(){return this.activeDocument?this.activeDocument.setup.reader:null}get tours(){return this.activeDocument?this.activeDocument.setup.tours:null}get renderer(){return this.system.getMainComponent(_r)}get arManager(){return this.system.getMainComponent(_p)}firstConnected(){this.classList.add("sv-content-view"),this.sceneView=new By(this.system),this.isMobile=this.mobileCheck()}connected(){super.connected(),this.assetManager.outs.busy.on("value",this.onUpdate,this)}disconnected(){this.assetManager.outs.busy.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.system,t=this.assetManager.outs.busy.value,n=this.assetManager.initialLoad;let r=!1,s=cc.Overlay,i=!1;const o=this.reader,a=this.tours,l=this.arManager.shadowRoot.querySelector("ff-viewport-overlay");l&&(null===this.arManager.shadowRoot.querySelector("sv-ar-prompt-container")&&l.append(new Wy(this.system)),null===this.arManager.shadowRoot.querySelector("sv-ar-menu")&&l.append(new Xy(this.system))),a&&(i=a.ins.enabled.value&&-1===a.outs.tourIndex.value),o&&(r=!i&&o.ins.enabled.value&&o.ins.visible.value,s=o.ins.position.value,!0===this.isMobile&&(s=cc.Overlay));const c=this.sceneView;if(r&&s===cc.Overlay||i?c.classList.contains("sv-blur")||setTimeout((()=>{c.classList.add("sv-blur"),this.renderer.views[0].render()}),1):c.classList.remove("sv-blur"),!t&&n&&(this.analytics.sendProperty("Loading.Time",this.analytics.getTimerTime()/1e3),this.analytics.resetTimer(),this.assetManager.initialLoad=!1),r){if(s===cc.Right)return qs`<div class="ff-fullsize sv-content-split">
                    <div class="ff-splitter-section" style="flex-basis: 60%">
                        ${c}
                    </div>
                    <ff-splitter direction="horizontal"></ff-splitter>
                        <div class="ff-splitter-section" style="flex-basis: 40%; max-width: 500px;">
                            <div class="sv-reader-container">
                                <sv-reader-view .system=${e} @close=${this.onReaderClose} ></sv-reader-view>
                            </div>
                        </div>
                    </div>
                    <sv-spinner ?visible=${t}></sv-spinner>`;if(s===cc.Overlay)return qs`<div class="ff-fullsize sv-content-stack">${c}
                    <div class="sv-reader-container">
                        <sv-reader-view .system=${e} @close=${this.onReaderClose}></sv-reader-view>
                    </div>
                    <sv-spinner ?visible=${t}></sv-spinner></div>`}return qs`<div class="ff-fullsize sv-content-only">${c}</div>
            <sv-spinner ?visible=${t}></sv-spinner>`}onReaderClose(){this.reader.ins.enabled.setValue(!1),this.reader.ins.closed.set()}onActiveDocument(e,t){e&&this.documentProps.off(),t&&this.documentProps.on(t.setup.reader.ins.position,t.setup.reader.ins.enabled,t.setup.tours.outs.tourIndex),this.requestUpdate()}mobileCheck(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor),e}};Jy=Ky([Ci("sv-content-view")],Jy);const Zy=Jy;var Qy=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let e_=class extends Ti{constructor(){super(),this.mode="radio",this.selectionIndex=-1,this.observer=new MutationObserver(this.onObserver),this.selectedButton=null,this.addEventListener("click",(e=>this.onClick(e)))}firstConnected(){this.classList.add("ff-button-group"),this.parseChildren()}connected(){this.observer.observe(this,{childList:!0})}disconnected(){this.observer.disconnect()}onObserver(e){e.forEach((e=>{"childList"===e.type&&this.parseChildren()}))}onClick(e){let t=e.target;for(;t&&t!==this&&!(t instanceof hu);)t=t.parentElement;t instanceof hu&&(t.selected?"exclusive"===this.mode&&(t.selected=!1,this.selectedButton=null,this.selectionIndex=-1):(this.selectedButton&&(this.selectedButton.selected=!1),this.selectedButton=t,this.selectedButton.selected=!0,this.selectionIndex=this.getButtons().indexOf(t)))}parseChildren(){const e=this.getButtons();this.selectedButton&&(this.selectionIndex=e.indexOf(this.selectedButton),this.selectionIndex<0&&(this.selectedButton.selected=!1,this.selectedButton=null)),(this.selectionIndex<0||this.selectionIndex>=e.length)&&(this.selectionIndex="radio"===this.mode?0:-1),this.selectionIndex>=0&&(this.selectedButton=e[this.selectionIndex],this.selectedButton.selected=!0)}getButtons(){return this.getChildrenArray().filter((e=>e instanceof hu))}};Qy([ai({type:String})],e_.prototype,"mode",void 0),Qy([ai({type:Number})],e_.prototype,"selectionIndex",void 0),e_=Qy([Ci("ff-button-group")],e_);var t_,n_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let r_=t_=class extends Ti{firstConnected(){super.firstConnected(),this.classList.add("sv-logo")}render(){return qs`<div class="sv-short">${t_.sunburst}</div><div class="sv-full">${t_.sunburst}${t_.smithsonian}</div>`}};r_.sunburst=qs`<div class="sv-sunburst"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 158 158"><defs><style>.si-blue{fill:#009cde;}.si-yellow{fill:#ffcd00;}</style></defs><title>si-sunburst</title><circle class="si-blue" cx="79.02" cy="79" r="79.02"/><path class="si-yellow" d="M126.69,95c-5.12-8.8-13.2-8.9-14.2-8.87v0L146.59,79l-34.1-7.1h0a27.63,27.63,0,0,1,16.93-6.32c7.5-.11,14-9.29,9.85-16.35,0,0-1.23,11.09-15.23,7.39-9.84-2.6-15.63,3-16.32,3.77h0l19.09-29.14L97.67,50.32h0a27.47,27.47,0,0,1,7.49-16.44c5.23-5.39,3.33-16.47-4.59-18.53,0,0,7,8.71-5.54,16-8.8,5.13-8.9,13.21-8.88,14.21h0L79,11.43l-7.1,34.11h0a27.53,27.53,0,0,1-6.33-16.93c-.11-7.5-9.29-14-16.35-9.86,0,0,11.09,1.24,7.39,15.23C54,43.85,59.7,49.64,60.4,50.31h0L31.24,31.22h0L46.8,55l3.54,5.39h0a27.55,27.55,0,0,1-16.45-7.5c-5.39-5.22-16.47-3.32-18.53,4.59,0,0,8.71-7,16,5.55,5.14,8.82,13.26,8.89,14.22,8.87h0L11.45,79l34.1,7.11h0a27.56,27.56,0,0,1-16.93,6.32c-7.51.12-14,9.3-9.86,16.35,0,0,1.24-11.08,15.24-7.39,9.88,2.61,15.67-3.1,16.32-3.78l0,0L31.25,126.79,60.38,107.7a27.51,27.51,0,0,1-7.5,16.44c-5.22,5.39-3.32,16.47,4.59,18.53,0,0-7-8.71,5.55-16,8.82-5.14,8.89-13.25,8.87-14.21h0L79,146.57l7.11-34.09h0a27.67,27.67,0,0,1,6.33,16.94c.11,7.5,9.29,14,16.34,9.85,0,0-11.08-1.23-7.39-15.23,2.61-9.86-3.07-15.65-3.77-16.32l0,0,29.13,19.09L116.73,111.4l-9-13.76h0a27.64,27.64,0,0,1,16.45,7.5c5.38,5.23,16.47,3.33,18.53-4.59C142.69,100.55,134,107.52,126.69,95Z"/></svg></div>`,r_.smithsonian=qs`<div class="sv-smithsonian"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 990 158"><defs><style>.si-white{fill:#fff;}</style></defs><title>si-text-neg</title><path class="si-white" d="M67,44.45C63.37,31.73,58.2,18,40.91,18c-15.3,0-22.06,11.13-22.06,21.86,0,14.51,9.54,21.27,25.24,29.42,15.5,8,34.39,17.29,34.39,39.55,0,20.87-17.69,37.57-44.13,37.57a69.28,69.28,0,0,1-19.48-3,67.3,67.3,0,0,1-9.74-4.18C3.54,135.09,1,118-.23,108.46l5.76-1.4c3.18,12.13,12.12,32.2,32.6,32.2C53,139.26,62,129.92,62,115.41,62,100.7,51.05,93.75,36.14,85.8,23.42,79,3.34,69.1,3.34,46.64c0-19.08,15.31-35.38,41-35.38,9.14,0,17.49,2.18,25,4.57.8,7.16,1.79,14.91,3.38,27.43Z"/><path class="si-white" d="M200.32,143.44v-5.17c11.73-1.19,13.91-2,13.91-16.1V89c0-14.12-5-23.06-17.49-23.06-7.15,0-14.71,4-22.26,10.33a46.33,46.33,0,0,1,.6,8.35v38.76c0,12.52,1.79,13.72,12.72,14.91v5.17H145.26v-5.17c12.33-1.19,14.12-2.19,14.12-15.31V88.78c0-14.71-5.17-22.86-17.3-22.86-8,0-15.7,5.37-21.66,10.33V123c0,12.92,1.59,14.12,11.33,15.31v5.17H89.81v-5.17c13.12-1.19,14.9-2.39,14.9-15.31V81.82c0-12.72-.59-13.71-12.12-15.5V61.74c8.75-1.59,18.88-4.17,27.63-8.14V69.7c4.17-2.79,8.55-6.37,14.51-10.14,5.17-3.18,9.94-5.37,16.3-5.37,9.54,0,18.08,6,22.06,16.3a185.42,185.42,0,0,1,16.5-11.13c4.17-2.78,9.34-5.17,14.9-5.17,15.51,0,25.25,10.93,25.25,30.41V123c0,13.32,1.59,14.12,12.92,15.31v5.17Z"/><path class="si-white" d="M253.59,143.44v-5.17c12.52-1.19,13.91-2.39,13.91-15.9V81.42c0-12.32-.6-13.12-12.52-15.1V61.55a125.21,125.21,0,0,0,28.22-7.76v68.58c0,13.51,1.39,14.71,14.12,15.9v5.17ZM264.12,26.76a10.22,10.22,0,0,1,10.14-10.33c5.56,0,9.94,4.37,9.94,10.33A10.18,10.18,0,0,1,274.06,36.9,10.42,10.42,0,0,1,264.12,26.76Z"/><path class="si-white" d="M343.82,143.24a20.14,20.14,0,0,1-8.34,2.58c-12.53,0-19.48-7.95-19.48-23.65V64.33H302.28l-.79-2,5.36-5.76H316V42.07L328.92,29l2.78.4V56.58h22.46c1.79,2,1.19,6.36-1.19,7.75H331.7v51.08c0,16.1,6.56,19.08,11.53,19.08s9.54-2,12.32-3.38l1.79,5.17Z"/><path class="si-white" d="M420,143.44v-5.17c11.53-1.19,13.12-2.39,13.12-15.31V90c0-16.3-6.17-24.45-19.48-24.45-7.56,0-15.11,3.78-20.67,10.14V123c0,12.73,1,14.12,12.72,15.31v5.17H363.5v-5.17c11.92-1,13.71-2.19,13.71-15.31V28.15c0-12.52-.39-13.51-13.51-14.71V8.87a218.64,218.64,0,0,0,29.22-6.95V68.7c6.95-7.15,17.69-14.51,28.42-14.51,16.1,0,27.43,10.14,27.43,34V123c0,13.12,1.39,14.32,13.12,15.31v5.17Z"/><path class="si-white" d="M522.91,80c-3.78-11.73-10.74-19.68-20.48-19.68-7.55,0-12.92,6-12.92,13.72,0,8.94,8,13.51,16.9,17.29,14.91,6.16,25,13.32,25,27,0,18.09-16.89,27.43-32.79,27.43-10.14,0-19.28-3.77-22.86-6.76-1.39-2.78-3.18-16.29-3.18-23.45l5.17-1c3.57,13.11,12.52,24.64,24.45,24.64a13.86,13.86,0,0,0,14.11-13.91c0-8.75-5.77-13.52-15.7-18.09-11.93-5.56-24.85-12.12-24.85-27.43,0-13.91,11.93-25.64,30.21-25.64a46.23,46.23,0,0,1,17.69,3.38c1.59,4.57,3.78,16.3,4.38,21.27Z"/><path class="si-white" d="M633,98.52c0,32-23.45,47.3-43.13,47.3-27.23,0-43.53-21.86-43.53-43.92,0-32.8,25.44-47.71,43.53-47.71C614.54,54.19,633,73.87,633,98.52Zm-68.18-3c0,25,10.94,43.72,27.24,43.72,12.32,0,22.46-9.14,22.46-36.37,0-23.26-9.35-42.14-26.64-42.14C575.58,60.75,564.84,73.07,564.84,95.54Z"/><path class="si-white" d="M700.6,143.44v-5.17c11.73-1.19,13.12-2.78,13.12-16.5V88.58c0-13.72-4.77-22.66-18.09-22.66-8,0-15.7,5-21.66,10.14v46.71c0,13.51,1.19,14.31,12.92,15.5v5.17H643.75v-5.17c13.52-1.39,14.52-2.39,14.52-15.5V81.62c0-12.72-1.2-13.32-11.93-15.3V61.74C655.88,60,665.22,57.57,674,53.6V69.5c4-3,8.34-6,13.31-9.35,5.57-3.57,10.74-6,16.5-6,15.7,0,25.64,10.93,25.64,30.21v38.37c0,13.51,1,14.31,12.52,15.5v5.17Z"/><path class="si-white" d="M753.08,143.44v-5.17c12.52-1.19,13.91-2.39,13.91-15.9V81.42c0-12.32-.6-13.12-12.52-15.1V61.55a125.35,125.35,0,0,0,28.22-7.76v68.58c0,13.51,1.39,14.71,14.11,15.9v5.17ZM763.61,26.76a10.22,10.22,0,0,1,10.14-10.33c5.56,0,9.93,4.37,9.93,10.33A10.18,10.18,0,0,1,773.55,36.9,10.42,10.42,0,0,1,763.61,26.76Z"/><path class="si-white" d="M869.74,145.82a16.26,16.26,0,0,1-9.34-3.77,20.82,20.82,0,0,1-4.77-9c-8,5.37-17.49,12.72-23.45,12.72-14.12,0-23.85-11.72-23.85-24.25,0-9.74,5.16-15.9,16.1-19.67,11.92-4,26.43-9.35,30.8-12.92V85.4c0-14.31-6.75-22.46-16.69-22.46a11.23,11.23,0,0,0-8.95,4c-2.58,2.59-4.37,7-6,13.12a5.53,5.53,0,0,1-5.76,4.57c-3.58,0-8.75-4-8.75-8.54,0-3,2.59-5.17,6.36-8,5.57-4,18.49-11.73,29.82-13.92a25.93,25.93,0,0,1,16.3,5.37c6.95,5.76,8.94,13.91,8.94,24.25v37c0,8.94,3.58,11.92,7,11.92a15.11,15.11,0,0,0,7.15-2.18l2,5.17ZM855.23,95.73c-4.17,2.19-13.71,6.36-17.88,8.35-7.76,3.58-12.13,7.36-12.13,14.51,0,10.34,7.95,15.31,14.11,15.31,5.17-.2,12.13-3.58,15.9-7.16Z"/><path class="si-white" d="M948.66,143.44v-5.17c11.72-1.19,13.12-2.78,13.12-16.5V88.58c0-13.72-4.77-22.66-18.09-22.66-8,0-15.71,5-21.67,10.14v46.71c0,13.51,1.2,14.31,12.92,15.5v5.17H891.81v-5.17c13.52-1.39,14.51-2.39,14.51-15.5V81.62c0-12.72-1.19-13.32-11.92-15.3V61.74C903.93,60,913.28,57.57,922,53.6V69.5c4-3,8.35-6,13.32-9.35,5.56-3.57,10.73-6,16.5-6,15.7,0,25.64,10.93,25.64,30.21v38.37c0,13.51,1,14.31,12.52,15.5v5.17Z"/></svg></div>`,r_=t_=n_([Ci("sv-logo")],r_);var s_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let i_=class extends Ti{constructor(){super(),this.anchor=null,this.portal=null,this.position=void 0,this.align=void 0,this.justify=void 0,this.positionX=0,this.positionY=0,this.offsetX=0,this.offsetY=0,this.keepVisible=!1,this.modal=!1,this._modalPlane=null,this.onResize=this.onResize.bind(this),this.onCaptureEvent=this.onCaptureEvent.bind(this),this.onEatEvent=this.onEatEvent.bind(this)}close(){this.dispatchEvent(new CustomEvent("close"))}connected(){if(this.calculatePosition(),window.addEventListener("resize",this.onResize),this.modal){const e=this._modalPlane=this.createElement("div");e.classList.add("ff-modal-plane"),e.addEventListener("mousedown",this.onEatEvent),e.addEventListener("contextmenu",this.onEatEvent),e.addEventListener("pointerdown",this.onEatEvent),this.parentElement.appendChild(e),setTimeout((()=>e.classList.add("ff-transition")))}else document.addEventListener("mousedown",this.onCaptureEvent,{capture:!0,passive:!0})}disconnected(){window.removeEventListener("resize",this.onResize),this._modalPlane?(this._modalPlane.remove(),this._modalPlane=null):document.removeEventListener("mousedown",this.onCaptureEvent)}firstConnected(){super.firstConnected(),this.setStyle({position:"fixed",zIndex:"1000"}),this.classList.add("ff-popup")}updated(){this.isConnected&&this.calculatePosition()}calculatePosition(){let e,t;const n=this.getBoundingClientRect();let r;if(t=this.portal?this.portal.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight},"center"===this.position)r=this.center(n,t);else if("anchor"===this.position){const s=this.anchor||this.parentElement;s&&(e=s.getBoundingClientRect(),r=this.positionToAnchor(n,e,t))}else r={x:this.positionX,y:this.positionY};this.keepVisible&&"center"!==this.position&&(r=this.keepElementVisible(r,n,t)),this.style.left=Math.round(r.x)+"px",this.style.top=Math.round(r.y)+"px"}center(e,t){return{x:Math.round(.5*(t.width-e.width)),y:Math.round(.5*(t.height-e.height))}}positionToAnchor(e,t,n){const r=this.align,s=this.justify,i=this.offsetX,o=this.offsetY,a={x:0,y:0};switch(r){case"start":a.x="start"!==s&&"end"!==s?t.left-e.width-i:t.left;break;case"end":a.x="start"!==s&&"end"!==s?t.right+i:t.right-e.width;break;case"fixed":a.x=this.positionX;break;default:a.x=t.left+.5*(t.width-e.width)}switch(s){case"start":a.y=t.top-e.height-o;break;case"end":a.y=t.bottom+o;break;case"fixed":a.y=this.positionY;break;default:a.y=t.top+.5*(t.height-e.height)}return a.x+=this.offsetX,a.y+=this.offsetY,a}keepElementVisible(e,t,n){const r=this.offsetX,s=this.offsetY;return t.width>n.width?e.x=.5*(n.width-t.width):e.x<n.left+r?e.x=n.left+r:e.x+t.width+r>n.right&&(e.x=n.right-t.width-r),t.height>n.height?e.y=.5*(n.height-t.height):e.y<n.top+s?e.y=n.top+s:e.y+t.height+s>n.bottom&&(e.y=n.bottom-t.height-s),e}onResize(){this.calculatePosition()}onCaptureEvent(e){e.target instanceof Node&&this.contains(e.target)||this.close()}onEatEvent(e){console.log("Popup.onEatEvent"),e.stopPropagation(),e.preventDefault()}};s_([ai({attribute:!1})],i_.prototype,"anchor",void 0),s_([ai({attribute:!1})],i_.prototype,"portal",void 0),s_([ai({type:String})],i_.prototype,"position",void 0),s_([ai({type:String})],i_.prototype,"align",void 0),s_([ai({type:String})],i_.prototype,"justify",void 0),s_([ai({type:Number})],i_.prototype,"positionX",void 0),s_([ai({type:Number})],i_.prototype,"positionY",void 0),s_([ai({type:Number})],i_.prototype,"offsetX",void 0),s_([ai({type:Number})],i_.prototype,"offsetY",void 0),s_([ai({type:Boolean})],i_.prototype,"keepVisible",void 0),s_([ai({type:Boolean})],i_.prototype,"modal",void 0),i_=s_([Ci("ff-popup")],i_);const o_=i_;var a_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let l_=class extends Ti{constructor(){super(...arguments),this.name="",this.index=0,this.text="",this.placeholder="",this.readonly=!1,this.align="left",this.initialValue=""}get textArea(){return this.getElementsByTagName("textarea").item(0)}select(){const e=this.textArea;e&&e.select()}focus(){const e=this.textArea;e&&e.focus()}blur(){const e=this.textArea;e&&e.blur()}hasFocus(){const e=document.activeElement.shadowRoot?document.activeElement.shadowRoot.activeElement:document.activeElement;return this.textArea===e}firstConnected(){this.classList.add("ff-control","ff-text-edit")}shouldUpdate(e){return!this.hasFocus()&&super.shouldUpdate(e)}render(){var e;return qs`<textarea
            .value=${this.text} placeholder=${this.placeholder} aria-labelledby=${null!==(e=this.getAttribute("aria-labelledby"))&&void 0!==e?e:""}
            @keydown=${this.onKeyDown} @change=${this.onChange} @input=${this.onInput}
            @focus=${this.onFocus} @blur=${this.onBlur} 
            style="text-align: ${this.align};" ?readonly=${this.readonly}></textarea>`}onKeyDown(e){const t=e.target;"Escape"===e.key&&(this.revert(t),t.blur())}onChange(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!1)}onInput(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!0)}onFocus(e){this.initialValue=e.target.value}onBlur(e){this.commit(e.target),this.requestUpdate()}revert(e){e.value=this.initialValue,this.dispatchChangeEvent(e.value,!1)}commit(e){this.initialValue=e.value,this.dispatchChangeEvent(e.value,!1)}dispatchChangeEvent(e,t){this.dispatchEvent(new CustomEvent("change",{detail:{text:e,isEditing:t}}))}};a_([ai({type:String})],l_.prototype,"name",void 0),a_([ai({type:Number})],l_.prototype,"index",void 0),a_([ai({type:String})],l_.prototype,"text",void 0),a_([ai({type:String})],l_.prototype,"placeholder",void 0),a_([ai({type:Boolean})],l_.prototype,"readonly",void 0),a_([ai({type:String})],l_.prototype,"align",void 0),l_=a_([Ci("ff-text-edit")],l_);var c_,d_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let u_=c_=class extends o_{constructor(e){super(),this.language=null,this.needsFocus=!1,this.language=e,this.position="center",this.modal=!0,this.url=window.location.href}static show(e,t){const n=new c_(t);return e.appendChild(n),new Promise(((e,t)=>{n.on("close",(()=>e()))}))}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.classList.add("sv-share-menu"),this.needsFocus=!0}render(){const e=encodeURIComponent(this.url),t=encodeURI("Check out this interactive 3D model with Smithsonian Voyager:"),n=this.language,r=`http://twitter.com/share?text=${t}&url=${e}`,s=`https://www.facebook.com/sharer/sharer.php?u=${e}`,i=`https://www.linkedin.com/shareArticle?url=${e}&mini=true&title=${t}`,o=`<iframe name="Smithsonian Voyager" src="${this.url}" width="800" height="450" allow="xr; xr-spatial-tracking; fullscreen"></iframe>`,a=`mailto:?subject=${t}&body=${e}`,l=n.getLocalizedString("Share Experience");return qs`
        <div role="region" aria-label=${l} @keydown=${e=>this.onKeyDown(e)}>
            <div class="ff-flex-row">
                <div id="shareTitle" class="ff-flex-spacer ff-title">${l}</div>
                <ff-button icon="close" transparent class="ff-close-button" title=${n.getLocalizedString("Close")} @click=${this.close}></ff-button>
            </div>
            <div class="ff-flex-row sv-share-buttons">
                <a href=${r} tabindex="-1" target="_blank" rel="noopener noreferrer"><ff-button class="sv-share-button-twitter" icon="twitter" title="Twitter"></ff-button></a>
                <a href=${s} tabindex="-1" target="_blank" rel="noopener noreferrer"><ff-button class="sv-share-button-facebook" icon="facebook" title="Facebook"></ff-button></a>
                <a href=${i} tabindex="-1" target="_blank" rel="noopener noreferrer"><ff-button class="sv-share-button-linkedin" icon="linkedin" title="LinkedIn"></ff-button></a>
                <a href=${a} tabindex="-1" target="_blank"><ff-button class="sv-share-button-email" icon="email" title=${n.getLocalizedString("Email")}></ff-button></a>
            </div>
            <div class="ff-title" id="embedTitle">${n.getLocalizedString("Embed Link")}</div>
            <div class="ff-flex-row sv-embed-link">
                <ff-text-edit readonly aria-labelledby="embedTitle" text=${o}></ff-text-edit>
                <ff-button icon="copy" title=${n.getLocalizedString("Copy link to Clipboard")} @click=${this.onClickCopy}></ff-button>
            </div>
        </div>
        `}update(e){if(super.update(e),this.needsFocus){this.getElementsByClassName("sv-share-button-twitter").item(0).focus(),this.needsFocus=!1}}onClickCopy(){this.getElementsByTagName("ff-text-edit").item(0).select(),document.execCommand("copy")}onKeyDown(e){"Escape"===e.code?(e.preventDefault(),this.close()):"Tab"===e.code&&Sf(Mf(this),e)}};u_=c_=d_([Ci("sv-share-menu")],u_);const h_=u_;var m_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let p_=class extends Fp{constructor(){super(...arguments),this.documentProps=new Hf("value",this.onUpdate,this),this.shareButtonSelected=!1,this.resizeObserver=null,this.isClipped=!1}get fullscreen(){return this.system.getMainComponent(qi)}get toolProvider(){return this.system.getMainComponent(Vp)}get analytics(){return this.system.getMainComponent(Xi)}get arManager(){return this.system.getMainComponent(_p)}get sceneNode(){return this.system.getComponent(up)}firstConnected(){super.firstConnected(),this.classList.add("sv-main-menu")}connected(){super.connected(),this.fullscreen.outs.fullscreenActive.on("value",this.onUpdate,this),this.toolProvider.ins.visible.on("value",this.onUpdate,this),this.activeDocument.setup.language.outs.language.on("value",this.onUpdate,this),this.activeDocument.setup.audio.outs.narrationEnabled.on("value",this.onUpdate,this),this.activeDocument.setup.tours.ins.closed.on("value",this.setTourFocus,this),this.activeDocument.setup.reader.ins.closed.on("value",this.setReaderFocus,this),this.toolProvider.ins.closed.on("value",this.setToolsFocus,this),this.resizeObserver||(this.resizeObserver=new ResizeObserver((()=>this.onResize()))),this.resizeObserver.observe(this)}disconnected(){this.resizeObserver.disconnect(),this.toolProvider.ins.closed.off("value",this.setToolsFocus,this),this.activeDocument.setup.reader.ins.closed.off("value",this.setReaderFocus,this),this.activeDocument.setup.tours.ins.closed.off("value",this.setTourFocus,this),this.activeDocument.setup.audio.outs.narrationEnabled.off("value",this.onUpdate,this),this.activeDocument.setup.language.outs.language.off("value",this.onUpdate,this),this.toolProvider.ins.visible.off("value",this.onUpdate,this),this.fullscreen.outs.fullscreenActive.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.activeDocument;if(!e)return qs``;const t=!!this.system.getComponent("CVStoryApplication",!0),n=e.setup,r=this.sceneNode,s=n.tours.outs.count.value>0,i=n.tours.ins.enabled.value,o=i&&!t,a=n.reader.articles.length>0,l=n.reader.ins.enabled.value,c=r.getGraphComponents(bp).some((e=>e.hasAnnotations)),d=n.viewer.ins.annotationsVisible.value,u=this.fullscreen,h=u.outs.fullscreenAvailable.value,m=u.outs.fullscreenActive.value,p=n.interface.ins.tools.value,f=this.toolProvider.ins.visible.value,g=n.audio.outs.narrationEnabled.value,v=n.audio.outs.narrationPlaying.value,y=n.language,_=r.getGraphComponents(Tp),b=_[0]?_[0].derivatives.getByQuality(Nd.AR):[],w=this.arManager.outs.available.value&&b.length>0&&_.length>=1;return qs`
            ${w?qs`<ff-button icon="ar" title=${y.getLocalizedString("Enter AR View")}
                @click=${this.onEnterAR}></ff-button>`:null}
            ${g?qs`<ff-button icon="audio" title=${y.getLocalizedString("Play Audio Narration")}
                ?selected=${v} @click=${this.onToggleNarration}></ff-button>`:null}
            ${s?qs`<ff-button id="tour-btn" icon="globe" title=${y.getLocalizedString("Interactive Tours")}
                ?selected=${i} @click=${this.onToggleTours}></ff-button>`:null}
            ${a?qs`<ff-button id="reader-btn" icon="article" title=${y.getLocalizedString("Read Articles")}
                ?selected=${l} ?disabled=${o} @click=${this.onToggleReader}></ff-button>`:null}
            ${c?qs`<ff-button aria-pressed=${d} icon="comment" title=${y.getLocalizedString("Show/Hide Annotations")}
                ?selected=${d} ?disabled=${o} @click=${this.onToggleAnnotations}></ff-button>`:null}
            <ff-button icon="share" id="share-btn" title=${y.getLocalizedString("Share Experience")}
                ?selected=${this.shareButtonSelected} @click=${this.onToggleShare}></ff-button>    
            ${h?qs`<ff-button aria-pressed=${m} icon="expand" title=${y.getLocalizedString("Fullscreen")}
                ?selected=${m} @click=${this.onToggleFullscreen}></ff-button>`:null}
            ${p?qs`<ff-button id="tools-btn" icon="tools" title=${y.getLocalizedString("Tools and Settings")}
                ?selected=${f} ?disabled=${o} @click=${this.onToggleTools}></ff-button>`:null}`}onToggleReader(){const e=this.activeDocument.setup.reader,t=e.ins;t.enabled.setValue(!t.enabled.value),t.focus.setValue(t.enabled.value),t.enabled.value&&t.articleId.setValue(1===e.articles.length?e.articles[0].article.id:""),this.analytics.sendProperty("Reader.Enabled",t.enabled.value)}onToggleTours(){const e=this.activeDocument.setup.tours.ins,t=this.activeDocument.setup.reader.ins;e.enabled.value?e.enabled.setValue(!1):(t.enabled.value&&t.enabled.setValue(!1),e.enabled.setValue(!0),e.tourIndex.setValue(-1)),this.analytics.sendProperty("Tours.Enabled",e.enabled.value)}onToggleAnnotations(){const e=this.toolProvider.ins,t=this.activeDocument.setup.viewer.ins;e.visible.value&&e.visible.setValue(!1),t.annotationsVisible.setValue(!t.annotationsVisible.value),this.analytics.sendProperty("Annotations.Visible",t.annotationsVisible.value)}onToggleShare(){this.shareButtonSelected||(this.shareButtonSelected=!0,this.requestUpdate(),h_.show(this,this.activeDocument.setup.language).then((()=>{this.shareButtonSelected=!1,this.requestUpdate(),this.setElementFocus("share-btn")})),this.analytics.sendProperty("Menu.Share"))}onToggleFullscreen(){this.fullscreen.toggle(),this.analytics.sendProperty("Menu.Fullscreen")}onToggleTools(){const e=this.toolProvider.ins,t=this.activeDocument.setup.viewer.ins;t.annotationsVisible.value&&t.annotationsVisible.setValue(!1),e.visible.setValue(!e.visible.value),this.analytics.sendProperty("Tools.Visible",e.visible.value)}onEnterAR(){this.arManager.ins.enabled.setValue(!0)}onToggleNarration(){const e=this.activeDocument.setup.audio;e.setupAudio(),e.ins.playNarration.set()}setTourFocus(){this.setElementFocus("tour-btn")}setReaderFocus(){this.setElementFocus("reader-btn")}setToolsFocus(){this.setElementFocus("tools-btn")}setElementFocus(e){const t=this.getElementsByTagName("ff-button"),n=Array.from(t).find((t=>t.id===e));void 0!==n?n.focus():console.warn("Can't focus. Element ["+e+"] not found.")}onActiveDocument(e,t){if(e&&this.documentProps.off(),t){const e=t.setup;this.documentProps.on(e.interface.ins.tools,e.reader.ins.enabled,e.reader.outs.count,e.tours.ins.enabled,e.tours.outs.count,e.viewer.ins.annotationsVisible,e.audio.outs.narrationPlaying,this.toolProvider.ins.visible)}this.requestUpdate()}onResize(){const e=this.scrollHeight>this.clientHeight;this.isClipped!==e&&(e&&this.scrollTo({top:this.scrollTop+this.scrollHeight,behavior:"smooth"}),this.isClipped=e)}};p_=m_([Ci("sv-main-menu")],p_);var f_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let g_=class extends Bp{constructor(){super(...arguments),this.needsFocus=!1}get toolProvider(){return this.system.getMainComponent(Vp)}get language(){return this.system.getComponent(Dd)}firstConnected(){super.firstConnected(),this.classList.add("sv-bottom-bar-container","sv-tool-bar"),this.needsFocus=!0}connected(){super.connected(),this.toolProvider.on("active-component",this.onUpdate,this),this.language.outs.language.on("value",this.onUpdate,this)}disconnected(){this.language.outs.language.off("value",this.onUpdate,this),this.toolProvider.off("active-component",this.onUpdate,this),super.disconnected()}render(){const e=this.toolProvider.scopedComponents,t=this.toolProvider.activeComponent,n=this.language,r=(t&&qs`<div>`,e.map((e=>qs`<ff-button class="sv-tool-button" transparent text=${n.getLocalizedString(e.text)} icon=${e.icon}
                ?selected=${e===t} @click=${t=>this.onSelectTool(e)}></ff-button>`)));return qs`<div class="sv-blue-bar"><div id="toolmenu" role="region" aria-label=${t?t.text:null} @close=${this.closeTool} @keydown=${e=>this.onKeyDownTool(e)}>${t?t.createView():null}</div>
            <div id="mainmenu" role="region" @keydown=${e=>this.onKeyDownMain(e)} aria-label="Tools and settings" class="sv-section">
                <ff-button class="sv-section-lead" transparent icon="close" title=${n.getLocalizedString("Close Tools")} @click=${this.onClose}></ff-button>
                <div class="sv-tool-buttons">${r}</div>
                <sv-tool-menu-view .system=${this.system}></sv-tool-menu-view>
            </div></div>`}onSelectTool(e){this.toolProvider.activeComponent=e}onClose(e){this.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}update(e){if(super.update(e),this.needsFocus){this.getElementsByClassName("sv-tool-button").item(0).focus(),this.needsFocus=!1}}onKeyDownMain(e){if("Escape"===e.code)e.preventDefault(),this.dispatchEvent(new CustomEvent("close"));else if("Tab"===e.code){const t=Array.from(this.getElementsByTagName("div")).find((e=>"mainmenu"===e.id));Sf(Mf(t),e)}}onKeyDownTool(e){if("Escape"===e.code)e.preventDefault(),this.closeTool();else if("Tab"===e.code){const t=Array.from(this.getElementsByTagName("div")).find((e=>"toolmenu"===e.id));Sf(Mf(t),e)}}closeTool(){const e=this.getElementsByTagName("ff-button");Array.from(e).find((e=>e.getAttribute("text")===this.language.getLocalizedString(this.toolProvider.activeComponent.text))).focus(),this.toolProvider.activeComponent=null}};g_=f_([Ci("sv-tool-bar")],g_);var v_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let y_=class extends Fp{constructor(){super(...arguments),this.needsFocus=!1,this.firstRender=!0,this.stepTitle=""}firstConnected(){super.firstConnected(),this.classList.add("sv-bottom-bar-container","sv-tour-navigator"),this.needsFocus=!0}render(){const e=this.tours,t=this.language,n=e.activeTour;let r,s;if(e&&n){const n=e.outs.stepIndex.value+1,i=e.outs.stepCount.value;r=i>0?e.stepTitle:e.title,s=i>0?`${t.getLocalizedString("Step")} ${n} ${t.getLocalizedString("of")} ${i}`:t.getLocalizedString("No tour steps defined")}else r=t.getLocalizedString("No tour selected"),s="---";return this.stepTitle=r,qs`<div class="sv-blue-bar" role=region title="Tour Navigation" @keydown=${e=>this.onKeyDown(e)}><div class="sv-section">
            <ff-button class="sv-section-lead" transparent icon="close" title=${t.getLocalizedString("Exit Tour")} ?disabled=${!n} @click=${this.onClickExit}></ff-button>
            <div class="ff-ellipsis sv-content" aria-live="polite" aria-atomic="true" aria-relevant="additions text">
                <div class="ff-ellipsis sv-title">${r}</div>
                <div class="ff-ellipsis sv-text">${s}</div>
            </div>
            <ff-button class="sv-section-trail" transparent icon="bars" title=${t.getLocalizedString("Show Tour Menu")} @click=${this.onClickMenu}></ff-button>
            <ff-button class="sv-section-trail" transparent icon="triangle-left" title=${t.getLocalizedString("Go Backward")} ?disabled=${!n} @click=${this.onClickPrevious}></ff-button>
            <ff-button class="sv-section-trail" transparent icon="triangle-right" title=${t.getLocalizedString("Go Forward")} ?disabled=${!n} @click=${this.onClickNext}></ff-button>
        </div></div>`}updated(e){if(super.updated(e),this.needsFocus){this.getElementsByClassName("sv-section-trail").item(2).focus(),this.needsFocus=!1}const t=this.getElementsByClassName("sv-title").item(0);t&&(t.innerHTML=this.stepTitle,this.firstRender&&(setTimeout((()=>{t.innerHTML=`<div>${this.stepTitle}</div>`}),100),this.firstRender=!1))}onClickExit(){this.tours.ins.enabled.setValue(!1),this.tours.ins.closed.set()}onClickMenu(){this.tours.ins.tourIndex.setValue(-1)}onClickPrevious(){this.tours.ins.previous.set()}onClickNext(){this.tours.ins.next.set()}onActiveDocument(e,t){e&&(this.tours.outs.tourIndex.off("value",this.onUpdate,this),this.tours.outs.stepIndex.off("value",this.onUpdate,this),this.language.outs.language.off("value",this.onUpdate,this)),t&&(this.tours=t.setup.tours,this.language=t.setup.language,this.tours.outs.tourIndex.on("value",this.onUpdate,this),this.tours.outs.stepIndex.on("value",this.onUpdate,this),this.language.outs.language.on("value",this.onUpdate,this)),this.requestUpdate()}onKeyDown(e){"Escape"===e.code?(e.preventDefault(),this.tours.ins.tourIndex.setValue(-1)):"Tab"===e.code&&Sf(Mf(this),e)}};y_=v_([Ci("sv-tour-navigator")],y_);var __=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let b_=class extends Ti{constructor(){super(...arguments),this.needsFocus=!1,this.focusableElements=[]}firstConnected(){super.firstConnected(),this.classList.add("sv-document-overlay","sv-article","sv-tour-menu"),this.needsFocus=!0}renderEntry(e,t){return qs`<div role="option" title="tour entry" tabindex=${0===t?"0":"-1"} @keydown=${e=>this.onKeyDown(e,t)} class="sv-entry" @click=${e=>this.onClickTour(e,t)}>
            <h1>${Object.keys(e.titles).length>0?e.titles[kd[this.activeLanguage]]:e.title}</h1>
            <p>${Object.keys(e.leads).length>0?e.leads[kd[this.activeLanguage]]:e.lead}</p>
        </div>`}render(){const e=this.tours;return 0===e.length?qs`<div class="sv-entry">
                <h1>No tours available.</h1>
            </div>`:qs`<div role="listbox" aria-label="interactive tour menu" class="ff-scroll-y">
            ${e.map(((e,t)=>this.renderEntry(e,t)))}
        </div>`}update(e){if(super.update(e),this.needsFocus){this.getElementsByClassName("sv-entry").item(0).focus(),this.needsFocus=!1}}onClickTour(e,t){e.stopPropagation(),this.dispatchEvent(new CustomEvent("select",{detail:{index:t}}))}onKeyDown(e,t){if("Space"===e.code||"Enter"===e.code)e.preventDefault(),this.dispatchEvent(new CustomEvent("select",{detail:{index:t}}));else if("Escape"===e.code)e.preventDefault(),this.dispatchEvent(new CustomEvent("close",{detail:{index:t}}));else if("Tab"===e.code)0===this.focusableElements.length&&(this.focusableElements=Mf(this)),Sf(this.focusableElements,e);else if("ArrowUp"===e.code||"ArrowDown"===e.code){const t=e.target instanceof Element?e.target:null;if(t){const n="ArrowUp"===e.code?t.previousElementSibling:t.nextElementSibling;n&&(t.setAttribute("tabIndex","-1"),n.setAttribute("tabIndex","0"),n.focus())}}}};__([ai({attribute:!1})],b_.prototype,"tours",void 0),__([ai({attribute:!1})],b_.prototype,"activeLanguage",void 0),b_=__([Ci("sv-tour-menu")],b_);var w_,x_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let M_=w_=class extends o_{constructor(e){super(),this.language=null,this.language=e,this.position="center",this.modal=!0,this.url=window.location.href}static show(e,t){const n=new w_(t);return e.appendChild(n),new Promise(((e,t)=>{n.on("close",(()=>e()))}))}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.classList.add("sv-language-menu","sv-option-menu")}renderEntry(e,t){const n=e.name===this.language.toString();return qs`<div class="sv-entry" role="option" tabindex=${n?"0":"-1"} @click=${e=>this.onClickLanguage(e,t)} @keydown=${e=>this.onKeyDownEntry(e,t)} ?selected=${n}>
            ${e.name}
        </div>`}render(){const e=this.language;return qs`
        <div role="region" aria-label="Language Menu" @keydown=${e=>this.onKeyDownMain(e)}>
            <div class="ff-flex-row">
                <div class="ff-flex-spacer ff-title">${e.getLocalizedString("Set Language")}</div>
                <ff-button icon="close" transparent class="ff-close-button" title=${e.getLocalizedString("Close")} @click=${this.close}></ff-button>
            </div>
            <div class="ff-flex-row">
                <div class="ff-scroll-y sv-scroll-offset" role="listbox">
                    ${e.activeLanguages.map(((e,t)=>this.renderEntry(e,t)))}
                </div>
            </div>
        </div>
        `}firstUpdated(e){super.firstUpdated(e),Array.from(this.getElementsByClassName("sv-entry")).find((e=>"0"===e.getAttribute("tabIndex"))).focus()}onClickLanguage(e,t){const n=this.language;e.stopPropagation(),n.ins.language.setValue(n.activeLanguages[t].id),this.close()}onKeyDownEntry(e,t){const n=this.language;if("Space"===e.code||"Enter"===e.code)e.preventDefault(),e.stopPropagation(),n.ins.language.setValue(n.activeLanguages[t].id),this.close();else if("ArrowUp"===e.code||"ArrowDown"===e.code){const t=e.target instanceof Element?e.target:null;if(t){const n="ArrowUp"===e.code?t.previousElementSibling:t.nextElementSibling;n&&(t.setAttribute("tabIndex","-1"),n.setAttribute("tabIndex","0"),n.focus())}}else"Tab"===e.code&&this.addEventListener("blur",this.tabReset,{once:!0,capture:!0})}onKeyDownMain(e){"Escape"===e.code?this.close():"Tab"===e.code&&Sf(Mf(this),e)}tabReset(e){const t=e.target instanceof Element?e.target:null;if(t){const e=Array.from(t.parentElement.children).find((e=>e.hasAttribute("selected")));e!==t&&(t.setAttribute("tabIndex","-1"),e.setAttribute("tabIndex","0"))}}};M_=w_=x_([Ci("sv-language-menu")],M_);const S_=M_;var T_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let C_=class extends Fp{get activeTags(){return this.viewer?this.viewer.ins.activeTags.value.split(",").map((e=>e.trim())).filter((e=>!!e)):[]}get tagCloud(){return this.viewer?this.viewer.outs.tagCloud.value.split(",").map((e=>e.trim())).filter((e=>!!e)):[]}firstConnected(){super.firstConnected(),this.classList.add("sv-bottom-bar-container","sv-tag-cloud","sv-transition"),setTimeout((()=>this.classList.remove("sv-transition")),1)}render(){const e=this.activeTags,t=this.tagCloud.map((t=>qs`<ff-button class="sv-tag-button" transparent text=${t}
                ?selected=${e.indexOf(t)>=0}
                @click=${e=>this.onSelectTag(t)}></ff-button>`));return qs`<div class="sv-blue-bar"><div class="sv-section">
                <ff-button class="sv-section-lead" transparent icon="close" title="Close Tag Menu" @click=${this.onClickClose}></ff-button>
                <div class="sv-tag-buttons">${t}</div>
        </div></div>`}onClickClose(){this.viewer.ins.annotationsVisible.setValue(!1)}onSelectTag(e){let t=this.activeTags;const n=this.viewer.ins.radioTags.value,r=t.indexOf(e);r>=0&&!n?t.splice(r,1):r<0&&(n?t=[e]:t.push(e)),this.viewer.ins.activeTags.setValue(t.join(", "))}onActiveDocument(e,t){e&&(this.viewer.ins.activeTags.off("value",this.onUpdate,this),this.viewer.outs.tagCloud.off("value",this.onUpdate,this)),t&&(this.viewer=t.setup.viewer,this.viewer.ins.activeTags.on("value",this.onUpdate,this),this.viewer.outs.tagCloud.on("value",this.onUpdate,this))}};C_=T_([Ci("sv-tag-cloud")],C_);var E_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let k_=class extends Fp{constructor(){super(...arguments),this.documentProps=new Hf("value",this.onUpdate,this)}get toolProvider(){return this.system.getMainComponent(Vp)}firstConnected(){this.style.pointerEvents="none",this.setAttribute("pointer-events","none"),this.classList.add("sv-chrome-view")}connected(){super.connected(),this.toolProvider.ins.visible.on("value",this.onUpdate,this),this.activeDocument.setup.language.outs.language.on("value",this.onUpdate,this),this.titleElement=this.createElement("div",null),this.titleElement.classList.add("ff-ellipsis")}disconnected(){this.activeDocument.setup.language.outs.language.off("value",this.onUpdate,this),this.toolProvider.ins.visible.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.activeDocument,t=this.titleElement;if(!e)return qs``;const n=e.setup,r=n.interface.ins.visible.value,s=n.interface.ins.logo.value&&n.interface.isShowing(rm.logo),i=n.interface.ins.menu.value&&n.interface.isShowing(rm.menu),o=n.interface.ins.visibleElements.value&&n.interface.isShowing(rm.title),a=n.reader.ins.enabled.value,l=n.tours.tours,c=n.tours.ins.enabled.value,d=n.tours.outs.tourIndex.value>=0,u=n.language,h=u.activeLanguages,m=u.outs.language.value,p=h.length>1&&n.interface.isShowing(rm.language),f=!!this.system.getComponent("CVStoryApplication",!0)||!c,g=n.viewer.ins.annotationsVisible.value&&n.viewer.outs.tagCloud.value,v=!a&&this.toolProvider.ins.visible.value,y=this.activeDocument.setup.tours.outs.ending.value;if(this.activeDocument.setup.tours.outs.ending.setValue(!1),!r)return qs``;let _;return _=c?d?u.getLocalizedString("Tour")+": "+n.tours.outs.tourTitle.value:u.getLocalizedString("Interactive Tours"):e.outs.title.value||"Missing Title",t.innerHTML=_,qs`${y?qs`<div class="sr-only" role="alert" id="screen-reader-msg">Tour Ending...</div>`:null}
            <div class="sv-chrome-header">
                <div class="sv-main-menu-wrapper">
                    ${i?qs`<sv-main-menu role="region" aria-label="Main toolbar" .system=${this.system}></sv-main-menu>`:null}
                </div>
                <div class="sv-top-bar">
                    ${o?qs`<div role="heading" class="ff-ellipsis sv-main-title">${t}<span class="ff-ellipsis"> </span></div>`:null}
                    ${s?qs`<sv-logo></sv-logo>`:null}
                </div>
            </div>
            <div class="ff-flex-spacer"></div>
            ${c&&d?qs`<sv-tour-navigator @close=${this.closeTours} .system=${this.system}></sv-tour-navigator>`:null}
            ${c&&!d?qs`<sv-tour-menu .tours=${l} .activeLanguage=${m} @close=${this.closeTours} @select=${this.onSelectTour}></sv-tour-menu>`:null}
            ${g&&f?qs`<sv-tag-cloud .system=${this.system}></sv-tag-cloud>`:null}
            ${v&&f?qs`<div class="sv-tool-bar-container"><sv-tool-bar .system=${this.system} @close=${this.closeTools}></sv-tool-bar></div>`:null}
            <div class="sv-chrome-footer">
                <div class="sv-bottom-bar">
                    ${p?qs`<ff-button id="language" text=${n.language.toString()} title=${u.getLocalizedString("Set Language")} class="ff-ellipsis sv-language-display" @click=${this.openLanguageMenu}></ff-button>`:null}
                </div>
            </div>`}onSelectTour(e){this.activeDocument.setup.tours.ins.tourIndex.setValue(e.detail.index)}closeTours(){const e=this.activeDocument.setup.tours;e.ins.enabled.setValue(!1),e.ins.closed.set()}openLanguageMenu(){const e=this.activeDocument.setup.language;e.ins.enabled.value||(e.ins.enabled.setValue(!0),S_.show(this,this.activeDocument.setup.language).then((()=>{e.ins.enabled.setValue(!1),this.getElementsByClassName("sv-language-display")[0].focus()})))}closeTools(){const e=this.toolProvider.ins;e.visible.setValue(!1),e.closed.set()}onActiveDocument(e,t){if(e&&this.documentProps.off(),t){const e=t.setup;this.documentProps.on(t.outs.title,t.outs.assetPath,e.interface.ins.visible,e.interface.ins.logo,e.interface.ins.menu,e.viewer.ins.annotationsVisible,e.reader.ins.enabled,e.tours.ins.enabled,e.tours.outs.tourIndex)}this.requestUpdate()}};k_=E_([Ci("sv-chrome-view")],k_);const L_=k_;var A_=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Ai.add("globe",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"/></svg>`),Ai.add("cog",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"/></svg>`),Ai.add("eye",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M569.354 231.631C512.969 135.949 407.81 72 288 72 168.14 72 63.004 135.994 6.646 231.631a47.999 47.999 0 0 0 0 48.739C63.031 376.051 168.19 440 288 440c119.86 0 224.996-63.994 281.354-159.631a47.997 47.997 0 0 0 0-48.738zM288 392c-75.162 0-136-60.827-136-136 0-75.162 60.826-136 136-136 75.162 0 136 60.826 136 136 0 75.162-60.826 136-136 136zm104-136c0 57.438-46.562 104-104 104s-104-46.562-104-104c0-17.708 4.431-34.379 12.236-48.973l-.001.032c0 23.651 19.173 42.823 42.824 42.823s42.824-19.173 42.824-42.823c0-23.651-19.173-42.824-42.824-42.824l-.032.001C253.621 156.431 270.292 152 288 152c57.438 0 104 46.562 104 104z"/></svg>`),Ai.add("palette",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M128 224c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.4-32-32-32zM418.6 58.1C359.2 9.3 281.3-10 204.6 5 104.9 24.4 24.7 104.2 5.1 203.7c-16.7 84.2 8.1 168.3 67.8 230.6 47.3 49.4 109.7 77.8 167.9 77.8 8.8 0 17.5-.6 26.1-2 24.2-3.7 44.6-18.7 56.1-41.1 12.3-24 12.3-52.7.2-76.6-6.1-12-5.5-26.2 1.8-38 7-11.8 18.7-18.4 32-18.4h72.2c46.4 0 82.8-35.7 82.8-81.3-.2-76.4-34.3-148.1-93.4-196.6zM429.2 288H357c-29.9 0-57.2 15.4-73 41.3-16 26.1-17.3 57.8-3.6 84.9 5.1 10.1 5.1 22.7-.2 32.9-2.6 5-8.7 13.7-20.6 15.6-49.3 7.7-108.9-16.6-152-61.6-48.8-50.9-69-119.4-55.4-188 15.9-80.6 80.8-145.3 161.6-161 62.6-12.3 126.1 3.5 174.3 43.1 48.1 39.5 75.7 97.6 75.9 159.6 0 18.6-15.3 33.2-34.8 33.2zM160 128c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.4-32-32-32zm96-32.1c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32c0-17.6-14.3-32-32-32zm96 32.1c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"/></svg>`),Ai.add("comment",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"/></svg>`),Ai.add("article",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/></svg>`),Ai.add("document",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg>`),Ai.add("share",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg>`),Ai.add("expand",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M241,29V141.53a14,14,0,0,1-14,14h-18.7a14,14,0,0,1-14-14V61.74H114.45a14,14,0,0,1-14-14L100.3,29a14,14,0,0,1,14-14H226.89A14,14,0,0,1,241,29Z"/><path class="cls-1" d="M15,226.67V114.11a14,14,0,0,1,14-14h18.7a14,14,0,0,1,14,14V193.9h79.79a14,14,0,0,1,14,14l.12,18.74a14,14,0,0,1-14,14H29.07A14,14,0,0,1,15,226.67Z"/></svg>`),Ai.add("zoom",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"/></svg>`),Ai.add("tools",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"/></svg>`),Ai.add("environment",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M219.81,14.75H36.19A21.19,21.19,0,0,0,15,35.94V220.06a21.19,21.19,0,0,0,21.19,21.19H219.81A21.19,21.19,0,0,0,241,220.06V35.94A21.19,21.19,0,0,0,219.81,14.75Zm-2.65,205.31H38.84a2.64,2.64,0,0,1-2.65-2.65V38.59a2.64,2.64,0,0,1,2.65-2.65H217.16a2.64,2.64,0,0,1,2.65,2.65V217.41A2.64,2.64,0,0,1,217.16,220.06ZM72.16,71.59A18.32,18.32,0,1,0,90.47,89.91,18.32,18.32,0,0,0,72.16,71.59ZM57.51,198.15H204V141.53l-40.06-40.06a5.49,5.49,0,0,0-7.77,0l-54.72,54.71L83.36,138.09a5.47,5.47,0,0,0-7.76,0L57.51,156.18Z"/></svg>`),Ai.add("bulb",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M44.73 323.21c-7.65 4.42-10.28 14.2-5.86 21.86l8 13.86c4.42 7.65 14.21 10.28 21.86 5.86l93.26-53.84a207.865 207.865 0 0 1-26.83-39.93l-90.43 52.19zM112.46 168H16c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h100.21a210.423 210.423 0 0 1-3.75-48zm127.6 291.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H240.02l.04 43.18zM44.73 60.78l78.98 45.6c5.37-15.29 12.97-29.48 21.64-42.93L68.73 19.21c-7.65-4.42-17.44-1.8-21.86 5.86l-8 13.86c-4.42 7.65-1.79 17.44 5.86 21.85zm550.54 0c7.65-4.42 10.28-14.2 5.86-21.86l-8-13.86c-4.42-7.65-14.21-10.28-21.86-5.86l-76.61 44.23c8.68 13.41 15.76 27.9 21.2 43.19l79.41-45.84zm0 262.43l-90.97-52.52c-7.33 14.23-15.8 27.88-26.36 40.21l93.33 53.88c7.65 4.42 17.44 1.8 21.86-5.86l8-13.86c4.42-7.64 1.79-17.43-5.86-21.85zM624 168h-96.41c.1 2.68.41 5.3.41 8 0 13.54-1.55 26.89-4.12 40H624c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16zM320 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zm0-80C217.72 0 144 82.97 144 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.53-23.43-31.52-53.14-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C479.55 260.85 496 220.37 496 176 496 78.8 417.2 0 320 0z"/></svg>`),Ai.add("tape",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M624 432H362.3c52.1-41 85.7-104.5 85.7-176 0-123.7-100.3-224-224-224S0 132.3 0 256s100.3 224 224 224h400c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16zm-400 0c-97 0-176-79-176-176S127 80 224 80s176 79 176 176-79 176-176 176zm0-272c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96zm0 144c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"/></svg>`),Ai.add("knife",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M566.28 88.57c12.96-12.5 12.96-32.76 0-45.25L531.07 9.37c-12.96-12.5-33.98-12.5-46.94 0L319.99 160 4.76 464.14c-8.25 7.96-5.38 22.16 5.53 25.69C53.72 503.86 102.37 512 150.51 512c75.83 0 150.42-20.19 201.49-69.35l104.4-100.04c12.95-12.41 13.17-33.05.49-45.73L448 288v-80L566.28 88.57zM496 64c8.84 0 16 7.16 16 16s-7.16 16-16 16-16-7.16-16-16 7.16-16 16-16zM318.71 408.07C281.24 444.14 221.5 464 150.51 464c-23.16 0-46.79-2.1-70.07-6.17L319.4 227.28l91.99 91.99-92.68 88.8zM432 160c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.17 16-16 16z"/></svg>`),Ai.add("bars",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>`),Ai.add("triangle-left",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M191.33,31.38V224.62a15,15,0,0,1-25.64,10.62L69.07,138.62a15,15,0,0,1,0-21.24l96.62-96.62A15,15,0,0,1,191.33,31.38Z"/></svg>`),Ai.add("triangle-right",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M64.67,224.62V31.38A15,15,0,0,1,90.31,20.76l96.62,96.62a15,15,0,0,1,0,21.24L90.31,235.24A15,15,0,0,1,64.67,224.62Z"/></svg>`),Ai.add("twitter",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>`),Ai.add("facebook",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg>`),Ai.add("instagram",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>`),Ai.add("linkedin",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448.1 512"><path d="M100.3 448H7.4V148.9h92.9V448zM53.8 108.1C24.1 108.1 0 83.5 0 53.8S24.1 0 53.8 0s53.8 24.1 53.8 53.8-24.1 54.3-53.8 54.3zM448 448h-92.7V302.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V448h-92.8V148.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V448h-.1z"/></svg>`),Ai.add("email",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg>`),Ai.add("copy",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg>`),Ai.add("ar",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.844874 7.2009368"><path d="M 4.1805699,5.4542117 H 2.4801904 L 2.2118585,6.5168507 H 1.1187593 L 2.6807334,0.68408928 h 1.296469 L 5.5391781,6.5168507 H 4.4460774 Z M 2.7513476,4.3720517 H 3.9065883 L 3.3303802,2.0514503 Z"/><path d="m 7.5355365,3.2703464 q 0.3417706,0 0.4886463,-0.1758024 0.1497018,-0.1758024 0.1497018,-0.5781942 0,-0.3984876 -0.1497018,-0.5703858 Q 7.8773071,1.7740658 7.5355365,1.7740658 H 7.0779585 V 3.2703464 Z M 7.0779585,4.309544 V 6.5168507 H 5.9905084 V 0.68408928 h 1.6608338 q 0.8332429,0 1.220205,0.38676692 0.3897887,0.3867669 0.3897887,1.2228084 0,0.5781942 -0.2033672,0.9493362 -0.200543,0.371142 -0.607278,0.5469444 0.2231388,0.070308 0.3982608,0.320355 0.1779472,0.2461266 0.358719,0.7500924 L 9.7980008,6.5168507 H 8.6399351 L 8.1258661,5.0674448 Q 7.970517,4.6298909 7.8095182,4.4697134 7.6513422,4.309544 7.3858347,4.309544 Z"/></svg>`),Ai.add("device-move",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 119.4 57.7"><path d="M47.4,20.7h-34c-0.2,0-0.4-0.1-0.5-0.3l-0.1-0.2l0.1-0.3l9-19.5C21.9,0.2,22.1,0,22.3,0h24.5v1H22.6L14,19.7h33.4V20.7z"/><path d="M103,20.7H71v-1h31.6L95,1H46.8V0h48.3c0.3,0,0.6,0.2,0.7,0.5l7.8,19.2c0.1,0.2,0.1,0.5-0.1,0.7C103.5,20.6,103.2,20.7,103,20.7z M94.9,0.9L94.9,0.9z"/><path d="M49,2.9c-1.1,0-2,0.9-2,2v40c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2v-40c0-1.1-0.9-2-2-2L49,2.9z M49,3.9h3.6l0,0h0l0,0l0,0l0,0l0,0l0,0v0l0,0l0,0l0,0l0,0v0.5c0,0.6,0.4,1,1,1H64c0.6,0,1-0.4,1-1v0l0,0V4.3c0,0,0,0,0-0.1l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0h4c0.6,0,1,0.4,1,1v40c0,0.6-0.4,1-1,1H49c-0.6,0-1-0.4-1-1l0-40.2c0.1-0.5,0-0.8,0.4-1.1C48.5,4,48.8,3.9,49,3.9z"/><path d="M53.3,43.9h11.5c0.3,0,0.6,0.2,0.6,0.5c0,0.3-0.3,0.5-0.6,0.5H53.3c-0.3,0-0.6-0.2-0.6-0.5C52.7,44.1,53,43.8,53.3,43.9z"/><path d="M76,37.8c-0.7,0-1.3,0-2-0.1l0.1-1c1.6,0.2,10,0.7,15.7-5.5c1.8-2,3.1-4.4,3.8-7l1,0.3c-0.7,2.8-2.1,5.3-4,7.5C85.8,37,79.3,37.8,76,37.8z"/><polygon points="96.9,28.6 96,29 93.8,24.6 89.5,27.1 89,26.2 94.3,23.2"/><path d="M42.1,37.4c-3.4,0-9.9-0.8-14.5-6c-1.9-2.1-3.3-4.7-4-7.5l1-0.3c0.7,2.6,1.9,5,3.7,7.1c5.6,6.3,14,5.7,15.7,5.5l0.1,1C43.4,37.4,42.8,37.4,42.1,37.4z"/><polygon points="29,25.8 28.5,26.6 24.3,24.2 22.1,28.6 21.2,28.2 23.8,22.8"/></svg>`),Ai.add("audio",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="50 85 300 275"><path d="M144.800 88.415 C 105.869 89.675,75.661 108.730,58.580 142.800 C 42.479 174.915,49.153 218.126,74.086 243.200 C 82.194 251.354,81.622 247.747,81.571 290.400 C 81.526 327.954,81.532 328.075,83.579 331.303 C 85.932 335.013,81.918 334.725,133.200 334.853 L 178.200 334.965 180.317 334.026 C 184.940 331.975,186.179 329.159,187.004 318.834 C 187.966 306.788,188.179 306.609,201.600 306.579 C 223.132 306.529,231.384 304.069,239.712 295.216 C 246.448 288.055,247.778 282.132,247.527 260.400 C 247.353 245.306,247.496 245.061,256.908 244.337 C 272.369 243.147,279.383 238.170,279.366 228.400 C 279.356 222.955,278.475 220.120,267.737 191.000 C 266.520 187.700,263.126 177.980,260.196 169.400 C 249.024 136.687,242.930 126.187,227.400 112.880 C 209.769 97.774,189.461 89.600,166.600 88.407 C 158.610 87.991,157.887 87.991,144.800 88.415 M205.416 171.240 C 218.099 175.986,216.908 195.403,203.667 199.781 C 192.504 203.472,180.685 190.157,185.674 179.509 C 189.403 171.550,197.349 168.222,205.416 171.240 M311.000 220.715 C 304.366 224.871,305.398 229.213,315.511 239.699 C 325.906 250.478,330.441 259.997,334.191 278.909 C 338.184 299.050,330.538 322.088,313.936 339.938 C 307.475 346.885,307.028 347.548,307.030 350.184 C 307.038 359.089,317.896 358.672,326.406 349.440 C 353.041 320.544,357.609 275.463,337.176 243.154 C 326.661 226.527,316.131 217.500,311.000 220.715 M291.392 243.932 C 286.465 247.613,286.911 251.389,293.068 258.095 C 310.600 277.194,310.622 300.169,293.125 319.139 C 287.742 324.975,286.682 328.672,289.377 332.205 C 294.000 338.266,301.447 335.014,309.224 323.540 C 324.531 300.956,324.654 275.911,309.565 254.525 C 302.386 244.350,295.897 240.567,291.392 243.932 M272.664 267.012 C 268.192 270.357,268.344 272.961,273.453 280.549 C 278.010 287.318,277.882 290.657,272.777 298.232 C 267.556 305.977,269.217 312.622,276.361 312.571 C 288.218 312.486,295.338 289.895,288.227 274.922 C 284.588 267.259,277.292 263.551,272.664 267.012 " fill-rule="evenodd"></path></svg>`);let D_=class extends Ti{constructor(e){super(),this.application=null,e&&(this.application=e),this.addEventListener("focus",this.onFocus)}static get observedAttributes(){return["root"]}get fullscreen(){return this.application.system.getMainComponent(qi)}get arManager(){return this.application.system.getMainComponent(_p)}get viewer(){return this.application.system.getComponent(im)}firstConnected(){if(super.firstConnected(),!this.application){const e={root:this.getAttribute("root"),dracoRoot:this.getAttribute("dracoRoot"),resourceRoot:this.getAttribute("resourceRoot"),document:this.getAttribute("document"),model:this.getAttribute("model"),geometry:this.getAttribute("geometry"),texture:this.getAttribute("texture"),quality:this.getAttribute("quality"),uiMode:this.getAttribute("uiMode"),bgColor:this.getAttribute("bgColor"),bgStyle:this.getAttribute("bgStyle"),controls:this.getAttribute("controls"),reader:this.getAttribute("reader"),lang:this.getAttribute("lang")};this.application=new R_(null,e)}this.attachShadow({mode:"open"});const e=this.shadowRoot;this.arManager.shadowRoot=e;var t=document.createElement("style");t.innerText='/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:normal;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}.ff-fullsize{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box}.ff-container{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden}.ff-fullsize{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box}.ff-caret-down{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #a0a0a0;transform:rotate(180deg);transition:transform 0.05s}.ff-caret-up{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #a0a0a0;transform:rotate(0deg);transition:transform 0.05s}.ff-caret-right{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #a0a0a0;transform:rotate(90deg);transition:transform 0.05s}.ff-caret-left{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #a0a0a0;transform:rotate(270deg);transition:transform 0.05s}html{color:#c8c8c8}button,input{display:block;padding:0;margin:0;border:none;background-color:inherit;color:inherit;font-size:inherit;cursor:inherit}*:focus{outline:1px solid #0089bf;outline-offset:0}*:focus:not(:focus-visible){outline:0}*:focus-visible{outline:1px solid #0089bf;outline-offset:0}.ff-fullscreen{position:fixed;left:0;right:0;top:0;bottom:0}.ff-noselect{user-select:none;-moz-user-select:none;-webkit-user-select:none}.ff-off{user-select:none;-moz-user-select:none;-webkit-user-select:none;pointer-events:none}.ff-on{user-select:auto;-webkit-user-select:none;pointer-events:auto}.ff-focusable{tab-index:0}.ff-flex-row{display:flex}.ff-flex-column{display:flex;flex-direction:column}.ff-flex-wrap{flex-wrap:wrap}.ff-flex-centered{align-items:center}.ff-flex-item-fixed{flex:0 0 auto;position:relative}.ff-flex-item-stretch,.ff-flex-spacer{flex:1 1 auto;position:relative}.ff-scroll-y{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow-y:auto}.ff-position-above{position:absolute;bottom:0}.ff-position-below{position:absolute;top:100%}.ff-position-left{position:absolute;right:0}.ff-position-right{position:absolute;left:100%}.ff-position-above.ff-align-left,.ff-position-below.ff-align-left{left:0}.ff-position-above.ff-align-right,.ff-position-below.ff-align-right{right:0}.ff-position-left.ff-align-top,.ff-position-right.ff-align-top{top:0}.ff-position-left.ff-align-bottom,.ff-position-right.ff-align-bottom{bottom:0}.ff-ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ff-placeholder{flex:1 1 auto;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.ff-splitter-section{flex:1 1 auto;position:relative;box-sizing:border-box;overflow:hidden}.ff-splitter[direction="vertical"]+.ff-splitter-section{border-top:2px solid #1b1b1b}.ff-splitter:not([direction="vertical"])+.ff-splitter-section{border-left:2px solid #1b1b1b}.ff-frame{padding:4px}.ff-frame .ff-control{margin:4px}.ff-icon{display:inline-block;position:relative;height:1rem;fill:#a0a0a0}.ff-icon svg{width:inherit;height:inherit}.ff-button{cursor:pointer}.ff-button[vertical]{flex-direction:column}.ff-button.ff-inline .ff-icon+.ff-text{padding-left:0.5em}.ff-button.ff-inline .ff-icon{display:inline}.ff-button.ff-inline .ff-text{display:inline}.ff-button.ff-transparent{position:relative;display:flex;justify-content:center;align-items:center;flex:0 1 auto;flex-wrap:wrap;padding:5px;background:transparent;fill:#a0a0a0;transition:fill 0.2s}.ff-button.ff-transparent:hover,.ff-button.ff-transparent:focus{fill:#c8c8c8}.ff-button.ff-transparent[selected]{fill:#c8c8c8}.ff-button.ff-transparent>.ff-text{margin:3px;white-space:nowrap}.ff-button.ff-transparent>.ff-icon{margin:3px;height:1.3em}.ff-button.ff-transparent>.ff-caret-down{margin:3px}.ff-button.ff-transparent.ff-disabled{color:gray;fill:#606060;user-select:none;pointer-events:none}.ff-button.ff-control{position:relative;display:flex;justify-content:center;align-items:center;flex:1 1 auto;flex-wrap:wrap;padding:5px;background:#4e4e4e;transition:background-color 0.2s}.ff-button.ff-control:hover,.ff-button.ff-control:focus{background-color:#676767}.ff-button.ff-control[selected]{background-color:#0089bf}.ff-button.ff-control[selected]:hover,.ff-button.ff-control[selected]:focus{background-color:#00a6e8}.ff-button.ff-control>.ff-text{margin:3px;white-space:nowrap}.ff-button.ff-control>.ff-icon{margin:3px;height:1.3em}.ff-button.ff-control>.ff-caret-down{margin:3px}.ff-button.ff-control.ff-disabled{color:gray;fill:#606060;user-select:none;pointer-events:none}.ff-button.ff-control.ff-disabled>.ff-icon{fill:#606060}.ff-menu{background-color:#4e4e4e;z-index:100;display:flex;flex-direction:column}.ff-menu .ff-divider{height:1px;padding:0;background:#a0a0a0}.ff-menu .ff-button{justify-content:flex-start;margin:0;padding:4px 4px}.ff-menu .ff-button .ff-icon{height:1.2em;width:2.2em;margin-right:4px}.ff-dropdown .ff-menu{min-width:100%;margin-top:3px}.ff-modal-plane{position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,0.6);opacity:0;transition:opacity .3s;z-index:990;pointer-events:auto}.ff-modal-plane.ff-transition{opacity:1}ff-dialog{box-sizing:border-box;background:#343434;border:1px solid #4e4e4e;box-shadow:3px 3px 24px rgba(0,0,0,0.4)}ff-title-bar{background:#1b1b1b;padding:2px}ff-title-bar .ff-text{flex:1 1 auto;padding-right:8px}ff-title-bar .ff-icon{padding:2px}ff-popup-button .ff-content{transition:opacity .15s}.ff-line-edit{display:block;overflow:hidden;background-color:#1b1b1b;min-height:1.2em}.ff-line-edit input{padding:2px}.ff-text-edit{box-sizing:border-box;flex:1 1 auto;display:flex;background-color:#1b1b1b}.ff-text-edit textarea{display:block;box-sizing:border-box;width:100%;padding:2px;resize:none;background:transparent;color:inherit;border:none}.ff-color-edit{font-size:0.8rem}.ff-color-edit .ff-control{margin:0}.ff-color-edit .ff-slider-controls{align-items:stretch;flex:1 1 auto}.ff-color-edit .ff-numeric-controls{flex:0 0 auto;align-items:center;margin-top:6px}.ff-color-edit .ff-text{color:#a0a0a0;margin:0 3px}.ff-color-edit .ff-line-edit{flex:4 5 auto}.ff-color-edit .ff-line-edit.ff-wide{flex:5 4 auto}.ff-color-edit .ff-knob{margin:-2px 0 0 -2px;border:2px solid white;box-shadow:0 0 5px rgba(0,0,0,0.5)}.ff-color-edit .ff-vector-slider{flex:1 0 auto;padding:0 10px 10px 0;background-image:linear-gradient(to bottom, transparent, black),linear-gradient(to right, white, red)}.ff-color-edit .ff-vector-slider .ff-knob{width:10px;height:10px}.ff-color-edit .ff-linear-slider{flex:0 0 24px;margin-left:6px;padding-bottom:10px}.ff-color-edit .ff-linear-slider .ff-knob{width:100%;height:10px}.ff-color-edit .ff-hue-slider{background:linear-gradient(to bottom, red, #ff0, lime, cyan, blue, #f0f, red)}.ff-color-edit .ff-alpha-slider{color:#4e4e4e}.ff-quad-splitter .ff-left{box-sizing:border-box;border-right:1px solid #343434}.ff-quad-splitter .ff-top{box-sizing:border-box;border-bottom:1px solid #343434}#ff-notification-stack{position:fixed;z-index:100;bottom:0;right:0;width:30%;min-width:250px;max-width:500px}.ff-notification{position:relative;left:0;display:flex;margin:8px;padding:4px;background:#4e4e4e;box-shadow:0 0 20px rgba(0,0,0,0.35)}.ff-notification.ff-info>.ff-icon{fill:#73adff}.ff-notification.ff-success>.ff-icon{fill:#8ae65c}.ff-notification.ff-warning>.ff-icon{fill:#e6a345}.ff-notification.ff-error>.ff-icon{fill:#e64545}.ff-notification>.ff-icon{height:2em;padding:8px}.ff-notification.ff-out{transition:left 0.5s ease-in;left:100%}.ff-notification .ff-text{flex:1;padding:8px;text-overflow:ellipsis;overflow:hidden}.ff-notification .ff-button{flex:0;padding:8px}.ff-message-box{position:relative;min-width:350px;max-width:450px;width:90%;padding:16px;background:#343434;box-shadow:0 0 20px rgba(0,0,0,0.35);opacity:0;transition:opacity .15s}.ff-message-box.ff-transition{opacity:1}.ff-message-box .ff-title{align-items:flex-start}.ff-message-box .ff-title .ff-type-icon{margin:0 16px 0 0;height:2.5em}.ff-message-box .ff-title .ff-type-icon[name="prompt"]{fill:#e6cf5c}.ff-message-box .ff-title .ff-type-icon[name="info"]{fill:#73adff}.ff-message-box .ff-title .ff-type-icon[name="warning"]{fill:#e6a345}.ff-message-box .ff-title .ff-type-icon[name="error"]{fill:#e64545}.ff-message-box .ff-title .ff-content{flex:1 1 auto;margin:0 0 2em 0}.ff-message-box .ff-title .ff-caption{font-size:1.5em}.ff-message-box .ff-title .ff-text{margin:2em 0 1em 0}.ff-message-box .ff-title .ff-line-edit{margin:0 0 1em 0}.ff-message-box .ff-title .ff-line-edit input{padding:4px}.ff-message-box .ff-title .ff-close-button{margin:0 0 0 16px;padding:0}.ff-message-box .ff-button+.ff-button{margin-left:8px}.ff-popup-options{box-sizing:border-box;background:#343434;border:1px solid #4e4e4e;box-shadow:3px 3px 24px rgba(0,0,0,0.4);min-width:6rem}.ff-popup-options button{padding:4px 8px;text-align:start;user-select:none}.ff-popup-options button+button{margin-top:1px}.ff-popup-options button:hover{background-color:#4e4e4e}.ff-popup-options button:focus{outline:none;background-color:#0089bf}.ff-list{flex:1 1 auto;background-color:#272727}.ff-list .ff-list-item{cursor:pointer;user-select:none;padding:2px}.ff-list .ff-list-item:hover{background-color:#343434}.ff-list .ff-list-item[selected]{background-color:#0089bf}.ff-list .ff-list-item+.ff-list-item{border-top:1px solid #343434}.ff-table{position:relative;box-sizing:border-box;width:100%}.ff-table table{box-sizing:border-box;width:100%;table-layout:fixed;border-collapse:collapse;border-spacing:0}.ff-table tr[selected]{background-color:#0089bf}.ff-table th,.ff-table td{padding:4px}.ff-table th{background-color:#1b1b1b;color:#a0a0a0;text-align:start}.ff-table .ff-table-sort-icon{height:0.8em;margin-left:4px;color:#a0a0a0}.ff-tree{position:relative;overflow-y:auto}.ff-tree .ff-tree-node-container{margin-left:-501px;border-top:1px solid #3e3e3e;border-bottom:1px solid #3e3e3e;margin-bottom:-1px}.ff-tree .ff-tree-node{margin-left:500px}.ff-tree .ff-tree-node.ff-inner{background-color:#2f2f2f}.ff-tree .ff-tree-node.ff-leaf{background-color:#3c3c3c}.ff-tree .ff-tree-node.ff-root{background-color:#272727}.ff-tree .ff-tree-node[selected]{background-color:#0089bf}.ff-tree .ff-tree-node .ff-header{position:relative;cursor:pointer;padding-left:14px}.ff-tree .ff-tree-node .ff-header .ff-text{user-select:none}.ff-tree .ff-tree-node.ff-drop-target>.ff-header{outline:1px dashed #0089bf}.ff-tree .ff-tree-node.ff-inner[expanded]>.ff-header:before{content:\'\';position:absolute;top:0.6em;left:3px;width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid #a0a0a0;transform:rotate(180deg);transition:transform 0.05s}.ff-tree .ff-tree-node.ff-inner:not([expanded])>.ff-header:before{content:\'\';position:absolute;top:0.6em;left:3px;width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid #a0a0a0;transform:rotate(90deg);transition:transform 0.05s}.ff-tree .ff-tree-node.ff-leaf .ff-header{cursor:default}.ff-tree .ff-tree-node .ff-content{margin-left:10px}.ff-tree .ff-tree-node:not([expanded])>.ff-content{display:none}ff-tab-container{background:#343434}ff-tab-container,ff-dock-stack{background:#272727;border:1px solid #1b1b1b}ff-tab-container header,ff-dock-stack header{background:#1b1b1b}ff-tab-header,ff-dock-panel-header{background:#1b1b1b;color:#c8c8c8;padding:1px 3px 2px 2px}ff-tab-header[active],ff-dock-panel-header[active]{background:linear-gradient(#626262, #343434);color:#c8c8c8}ff-tab-header label,ff-dock-panel-header label{pointer-events:none}ff-tab-header .ff-text,ff-dock-panel-header .ff-text{padding:0 1px}ff-tab-header .ff-icon,ff-dock-panel-header .ff-icon{top:1px;height:0.8rem;padding:0 1px}.ff-dock-drop-marker{box-sizing:border-box;background:rgba(0,137,191,0.3);border:1px solid #0089bf}.ff-viewport-overlay{padding:6px;font-size:0.75rem}.ff-viewport-overlay .ff-row{display:flex;justify-content:space-between}.ff-viewport-overlay .ff-labels{display:flex;flex-direction:column}.ff-viewport-overlay .ff-top-left,.ff-viewport-overlay .ff-bottom-left{align-items:flex-start}.ff-viewport-overlay .ff-top-center,.ff-viewport-overlay .ff-bottom-center{align-items:center}.ff-viewport-overlay .ff-top-right,.ff-viewport-overlay .ff-bottom-right{align-items:flex-end}.ff-viewport-overlay .ff-label-box{box-sizing:border-box;padding:1px 8px 2px 8px;background:rgba(0,0,0,0.5);border-radius:2em}.sv-article h1{margin:0.3em 0;font-family:"Amiri", serif;font-size:2.3em;font-weight:normal;color:#e8e8e8}.sv-article h1:before{content:"";position:absolute;top:0;left:0;width:75px;height:5px;background-color:#0089bf}.sv-article p,.sv-article h2,.sv-article h3,.sv-article h4,.sv-article h5,.sv-article h6,.sv-article ul,.sv-article ol,.sv-article li{font-family:"Hind Siliguri", sans-serif;color:#c8c8c8}.sv-article h2,.sv-article h3,.sv-article h4,.sv-article h5,.sv-article h6{font-size:1.3em;margin:1.2em 0 0.8em 0}.sv-article p,.sv-article ul,.sv-article ol{font-size:1.15em;margin:0.8em 0}.sv-article p{line-height:1.55em}.sv-article ul{padding-left:0.5em;list-style:square inside}.sv-article ol{padding-left:0.5em;list-style:decimal inside}.sv-article a:link,.sv-article a:visited,.sv-article a:hover,.sv-article a:active{color:#0089bf}.sv-article img{max-width:100%}.sv-content-view{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:0.85em;line-height:1.35;color:#c8c8c8;background-color:#343434;position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-logo{flex:0 50 180px;min-width:40px;display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;overflow:hidden;height:40px;user-select:none}.sv-logo .sv-short{flex-grow:1;width:0;max-width:40px}.sv-logo .sv-full{flex:1 0 180px;display:flex}.sv-logo .sv-full .sv-sunburst{flex:0 0 14%}.sv-logo .sv-full .sv-smithsonian{flex:0 0 83%;margin-left:3%}.ff-flex-spacer{user-select:none;-moz-user-select:none;-webkit-user-select:none}.sr-only{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}@keyframes spin{100%{transform:rotate(360deg)}}.sv-spinner{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;display:flex;justify-content:center;align-items:center;pointer-events:none}.sv-spinner-wheel{height:120px;width:120px;animation:spin 5s linear infinite}*{scrollbar-color:#676767 #1b1b1b;scrollbar-width:thin}* ::-webkit-scrollbar{width:8px;height:8px}* ::-webkit-scrollbar-track{background-color:#1b1b1b}* ::-webkit-scrollbar-thumb{background-color:#676767;border-radius:8px}voyager-explorer{font-size:16px}.sv-content-only .sv-scene-view,.sv-content-stack .sv-scene-view{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box}.sv-content-only .sv-scene-view:focus,.sv-content-stack .sv-scene-view:focus{border:2px solid #bfedff}.sv-content-only .sv-scene-view:focus:not(:focus-visible),.sv-content-stack .sv-scene-view:focus:not(:focus-visible){border:none;outline:0}.sv-content-only .sv-scene-view:focus-visible,.sv-content-stack .sv-scene-view:focus-visible{border:2px solid #bfedff}.sv-reader-container{overflow-y:auto}.sv-content-stack .sv-reader-container{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;margin-top:52px}.sv-content-stack .sv-reader-view{pointer-events:auto;display:flex;justify-content:center}.sv-content-stack .sv-reader-view .sv-left{flex:0 0 52px}.sv-content-stack .sv-reader-view .sv-article{flex:0 2 720px;background-color:rgba(27,34,38,0.5);padding-bottom:35px}.sv-content-stack .sv-reader-view .sv-right{flex:0 3 16px;background-color:rgba(27,34,38,0.5)}.sv-content-split{display:flex}.sv-content-split .sv-reader-container{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;margin-top:52px}.sv-content-split .sv-scene-view{flex:1 1 60%}.sv-content-split .sv-reader-view{pointer-events:auto;flex:1 1 40%;padding:0 20px}.sv-content-split .sv-reader-view .sv-left{flex:0 0 52px}.sv-content-split .sv-reader-view .sv-article{flex:0 2 720px;background-color:rgba(27,34,38,0.5);padding-bottom:35px;padding-right:16px}.sv-content-split .sv-reader-view .sv-right{flex:0 3 16px;background-color:rgba(27,34,38,0.5)}.sv-article{position:relative;padding:5px 8px 0 16px}.ff-viewport-overlay{font-size:1.0em}.sv-scene-view{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden}.sv-scene-view.sv-blur{filter:brightness(60%) blur(5px);transition:filter 0.5s}.sv-annotation{box-sizing:border-box;position:absolute;z-index:1;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-annotation a:link,.sv-annotation a:visited,.sv-annotation a:hover,.sv-annotation a:active{color:#0089bf}.sv-annotation-img{max-width:100%}.sv-circle-annotation{width:16%;min-width:160px;max-width:260px;padding:4px 8px;background-color:rgba(0,0,0,0.7);border-radius:4px}.sv-circle-annotation.sv-align-right{transform:translateX(-100%)}.sv-circle-annotation.sv-align-bottom{transform:translateY(-100%)}.sv-circle-annotation .sv-title{padding:0 0 2px 0;font-weight:bold}.sv-circle-annotation p{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:0.88em;line-height:1.35;color:#c8c8c8;margin:0.5em 0}.sv-circle-annotation .ff-button{background:rgba(0,0,0,0.01)}.sv-circle-annotation .ff-button .ff-icon{fill:#a0a0a0}.sv-circle-annotation .ff-button:hover{text-decoration:underline}.sv-circle-annotation .sv-content{overflow:hidden;overflow-wrap:break-word}.sv-pin-annotation{padding:0 4px;background-color:rgba(0,0,0,0.5);color:#c8c8c8;transform:translate(-50%, -100%)}.sv-standard-annotation,.sv-extended-annotation{max-width:20%;min-width:min-content;padding:0 4px;background-color:rgba(0,0,0,0.5);color:#c8c8c8;pointer-events:auto;overflow-wrap:normal}.sv-standard-annotation.sv-expanded,.sv-extended-annotation.sv-expanded{width:20%;min-width:180px;background-color:rgba(0,0,0,0.8)}.sv-standard-annotation.sv-q0,.sv-extended-annotation.sv-q0{transform:translate(0, -100%);border-bottom-style:solid;border-bottom-width:1px;text-align:left}.sv-standard-annotation.sv-q1,.sv-extended-annotation.sv-q1{transform:translate(-100%, -100%);border-bottom-style:solid;border-bottom-width:1px;text-align:right}.sv-standard-annotation.sv-q2,.sv-extended-annotation.sv-q2{transform:translate(-100%, 0);border-top-style:solid;border-top-width:1px;text-align:right}.sv-standard-annotation.sv-q3,.sv-extended-annotation.sv-q3{transform:translate(0, 0);border-top-style:solid;border-top-width:1px;text-align:left}.sv-standard-annotation.sv-static-width,.sv-extended-annotation.sv-static-width{width:fit-content}.sv-standard-annotation .sv-title,.sv-extended-annotation .sv-title{padding:1px 0 2px 0;font-weight:bold}.sv-standard-annotation .sv-content,.sv-extended-annotation .sv-content{padding:2px 0;height:0;overflow:hidden;overflow-wrap:break-word;transition:height 0.2s}.sv-standard-annotation p,.sv-extended-annotation p{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:0.88em;line-height:1.35;color:#c8c8c8;margin:0.5em 0}.sv-standard-annotation .ff-button,.sv-extended-annotation .ff-button{background:rgba(0,0,0,0.01)}.sv-standard-annotation .ff-button .ff-icon,.sv-extended-annotation .ff-button .ff-icon{fill:#a0a0a0}.sv-standard-annotation .ff-button:hover,.sv-extended-annotation .ff-button:hover{text-decoration:underline}.sv-extended-annotation .sv-title{cursor:pointer}.sv-standard-annotation{pointer-events:none}.sv-ar-prompt{flex:1 1 auto;display:flex;flex-direction:column;align-items:center;text-align:center;border-radius:20px;margin:30% 0 0 0;overflow:hidden;background-color:rgba(54,61,64,0.6)}.sv-ar-prompt .sv-content{flex:1;width:100%;margin:10px 10px;text-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none}.sv-ar-prompt .sv-content .sv-ar-icon{height:10em}.sv-ar-menu{display:flex;position:absolute;bottom:0px;flex-direction:row;margin:0 0 6px 6px}.sv-ar-menu>.ff-button{box-sizing:border-box;-webkit-tap-highlight-color:transparent;width:38px;height:38px;margin:0 6px 2px 0;background-color:rgba(74,82,87,0.5);border-radius:20px;font-size:17px;transition:all .15s;pointer-events:auto}.sv-ar-menu>.ff-button:hover,.sv-ar-menu>.ff-button:focus{outline:none;background-color:rgba(74,82,87,0.5);fill:#c8c8c8}.sv-ar-menu>.ff-button[selected]{background-color:#0089bf;color:#f0f0f0}.sv-ar-menu>.ff-button[selected]>.ff-icon{filter:drop-shadow(1px 1px 6px #00648c);fill:#c8c8c8}.sv-ar-menu>.ff-button[selected]:hover,.sv-ar-menu>.ff-button[selected]:focus{background-color:#00a6e8}.sv-chrome-view{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:0.85em;line-height:1.35;color:#c8c8c8;position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden;display:flex;flex-direction:column;background:linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.15) 10%, transparent 25%);z-index:1}.sv-chrome-view .ff-button{flex:0 1 auto;box-sizing:border-box}.sv-chrome-view .ff-button:focus{outline:none;box-shadow:0 0 3pt 2pt #bfedff}.sv-chrome-view .ff-button:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-chrome-view .ff-button:focus-visible{outline:none;box-shadow:0 0 3pt 2pt #bfedff}.sv-chrome-view .ff-button:hover{outline:none}.sv-chrome-view .ff-button:hover>.ff-icon{fill:#c8c8c8}.sv-chrome-view .ff-button[selected]{background-color:#0089bf}.sv-chrome-view .ff-button[selected][disabled]{background-color:#4e4e4e}.sv-chrome-view .ff-button[selected]>.ff-icon{filter:drop-shadow(1px 1px 6px #00648c);fill:#c8c8c8}.sv-chrome-header{display:flex;align-items:flex-start;height:100%;position:relative}.sv-chrome-header .sv-top-bar{flex:1 1 auto;display:flex;align-items:flex-start;height:40px;margin:9px 9px 0 0;overflow:hidden}.sv-chrome-header .sv-main-title{flex:1 1 auto;margin:6px 8px;font-family:"Hind Siliguri", sans-serif;font-weight:normal;font-size:1.412em;white-space:pre;color:#e8e8e8;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-chrome-header .sv-main-title span{color:transparent}.sv-chrome-footer{display:block;position:absolute;bottom:0;right:0;z-index:-1}.sv-chrome-footer .sv-bottom-bar{flex:1 1 auto;display:flex;align-items:flex-end;text-align:right;overflow:hidden}.sv-chrome-footer .sv-language-display{flex:1 1 auto;margin:6px 8px;font-family:"Hind Siliguri", sans-serif;font-weight:normal;font-size:1.176em;white-space:pre;color:#e8e8e8;pointer-events:auto;background:rgba(31,36,38,0.8);border-radius:4px;padding:4px 6px;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-chrome-footer .sv-language-display:hover,.sv-chrome-footer .sv-language-display:focus{outline:none;background-color:rgba(74,82,87,0.5);fill:#c8c8c8}.sv-chrome-footer .sv-language-display span{color:transparent}.sv-main-menu-wrapper{position:relative;height:100%;min-width:50px}.sv-main-menu{display:flex;flex-direction:column;padding:6px 9px 6px 6px;height:100%;overflow-y:auto;overflow-x:hidden;pointer-events:auto;position:absolute;box-sizing:border-box;overscroll-behavior-y:contain}.sv-main-menu>.ff-button{box-sizing:border-box;-webkit-tap-highlight-color:transparent;width:38px;height:38px;margin:2px 0;background-color:rgba(31,36,38,0.8);border-radius:20px;font-size:17px;transition:all .15s;pointer-events:auto}.sv-main-menu>.ff-button:focus{outline:none;background-color:rgba(31,36,38,0.8);box-shadow:0 0 3pt 2pt #bfedff}.sv-main-menu>.ff-button:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-main-menu>.ff-button:focus-visible{outline:none;background-color:rgba(31,36,38,0.8);box-shadow:0 0 3pt 2pt #bfedff}.sv-main-menu>.ff-button:hover{background-color:rgba(74,82,87,0.5);fill:#c8c8c8}.sv-main-menu>.ff-button[selected]{background-color:#0089bf;color:#f0f0f0}.sv-main-menu>.ff-button[selected]>.ff-icon{filter:drop-shadow(1px 1px 6px #00648c);fill:#c8c8c8}.sv-main-menu>.ff-button[selected]:hover,.sv-main-menu>.ff-button[selected]:focus{background-color:#00a6e8}.sv-main-menu .sv-scroll-btn{border-radius:2px;font-size:10px;height:19px;background-color:#343434;z-index:2;padding:0px;position:sticky}.sv-main-menu .sv-scroll-btn.up{top:0px;margin-top:0px}.sv-main-menu .sv-scroll-btn.down{bottom:12px;margin-top:12px}.sv-main-menu .sv-scroll-btn:hover{background-color:#676767;fill:#c8c8c8}.sv-main-menu .sv-scroll-btn:focus,.sv-main-menu .sv-scroll-btn:focus-visible{background-color:#343434}.sv-share-menu{position:relative;width:450px;max-width:85%;padding:8px;background:#343434;box-shadow:0 0 20px rgba(0,0,0,0.35);pointer-events:auto}.sv-share-menu .ff-title{margin:0.5em 0 1em 0}.sv-share-menu .ff-button{flex:0 0 auto}.sv-share-menu .ff-text-edit{height:6.5em}.sv-share-menu .sv-share-buttons .ff-button{width:48px;height:48px;border-radius:48px;margin:0 1em 1em 0;padding:0}.sv-share-menu .sv-share-buttons .ff-button .ff-icon{height:30px;fill:#f0f0f0}.sv-share-menu .sv-share-button-twitter{background-color:#00aced}.sv-share-menu .sv-share-button-twitter:focus{outline:none;background-color:#00aced;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-twitter:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-twitter:focus-visible{outline:none;background:#00aced;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-twitter:hover{background-color:#21c2ff}.sv-share-menu .sv-share-button-facebook{background-color:#3c5a99}.sv-share-menu .sv-share-button-facebook:focus{outline:none;background-color:#3c5a99;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-facebook:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-facebook:focus-visible{outline:none;background:#3c5a99;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-facebook:hover{background-color:#4e71ba}.sv-share-menu .sv-share-button-linkedin{background-color:#0077B5}.sv-share-menu .sv-share-button-linkedin:focus{outline:none;background-color:#0077B5;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-linkedin:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-linkedin:focus-visible{outline:none;background:#0077B5;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-linkedin:hover{background-color:#0099e8}.sv-share-menu .sv-share-button-email{background-color:#d28842}.sv-share-menu .sv-share-button-email:focus{outline:none;background-color:#d28842;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-email:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-email:focus-visible{outline:none;background:#d28842;box-shadow:0 0 3pt 2pt #bfedff}.sv-share-menu .sv-share-button-email:hover{background-color:#dca26b}.sv-document-overlay{position:absolute;left:52px;top:52px;right:6px;bottom:0;pointer-events:auto}.sv-tour-menu .sv-article,.sv-reader-view .sv-article{position:relative}.sv-tour-menu .sv-article .sv-nav-button,.sv-reader-view .sv-article .sv-nav-button{float:right;margin:1em 0.5em;padding:2px}.sv-tour-menu .sv-article .sv-nav-button .ff-icon,.sv-reader-view .sv-article .sv-nav-button .ff-icon{height:1.5em}.sv-tour-menu .sv-entry,.sv-reader-view .sv-entry{position:relative;cursor:pointer;padding:5px 0 5px 15px;margin:2px 2px 16px 2px;max-width:960px;background-color:rgba(27,34,38,0.5)}.sv-tour-menu .sv-entry:hover,.sv-reader-view .sv-entry:hover{background-color:rgba(51,59,64,0.5)}.sv-option-menu{position:relative;width:225px;max-width:85%;height:200px;max-height:85%;padding:8px;background:#343434;box-shadow:0 0 20px rgba(0,0,0,0.35);pointer-events:auto}.sv-option-menu .ff-title{margin:0.3em 0 0.3em 0.3em}.sv-option-menu .ff-header{padding:0.3em 0 0.3em 0.3em;background:rgba(31,36,38,0.8)}.sv-option-menu .ff-button{flex:0 0 auto}.sv-option-menu .sv-scroll-offset{top:50px}.sv-option-menu .sv-centered{justify-content:center;padding:0.3em 0 0.3em 0.3em}.sv-option-menu .sv-entry{position:relative;cursor:pointer;padding:5px 0 5px 15px;margin-bottom:2px;max-width:960px;background-color:rgba(27,34,38,0.5);user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-option-menu .sv-entry:focus{outline:2px solid #bfedff;outline-offset:-2px;background-color:rgba(27,34,38,0.5)}.sv-option-menu .sv-entry:focus:not(:focus-visible){outline:0}.sv-option-menu .sv-entry:focus-visible{outline:2px solid #bfedff;outline-offset:-2px;background-color:rgba(27,34,38,0.5)}.sv-option-menu .sv-entry:hover{background-color:rgba(51,59,64,0.5);fill:#c8c8c8}.sv-option-menu .sv-entry[selected]{background-color:#0089bf;color:#f0f0f0}.sv-option-menu .sv-entry[selected]:hover,.sv-option-menu .sv-entry[selected]:focus{background-color:#00a6e8}.sv-bottom-bar-container{position:relative;display:flex;justify-content:center;transition:transform .3s ease-out,opacity .15s ease-out}.sv-bottom-bar-container.sv-transition{transform:translateY(40px);opacity:0}.sv-bottom-bar-container .ff-button{transition:all .15s}.sv-blue-bar{flex:0 1 960px;display:flex;flex-direction:column;background-color:rgba(5,7,8,0.85);border-left:1px solid rgba(0,137,191,0.5);border-right:1px solid rgba(0,137,191,0.5);margin:0 -1px 0 -1px;min-width:0px;pointer-events:auto;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-blue-bar .sv-group{display:flex;flex-direction:column}.sv-blue-bar .sv-section{position:relative;display:flex;flex-direction:row;border-top:1px solid rgba(0,137,191,0.5)}.sv-blue-bar .sv-section-lead,.sv-blue-bar .sv-section-trail{flex:0 0 auto;padding:6px;width:38px}.sv-blue-bar .sv-section-lead:hover,.sv-blue-bar .sv-section-trail:hover{background-color:rgba(74,82,87,0.5)}.sv-blue-bar .sv-section-lead{border-right:1px solid rgba(0,137,191,0.5)}.sv-blue-bar .sv-section-trail{border-left:1px solid rgba(0,137,191,0.5)}.sv-blue-bar .sv-transparent-button{flex:0 1 auto;padding:6px;border-radius:2px}.sv-blue-bar .sv-transparent-button .ff-text{margin:1px 2px}.sv-blue-bar .sv-transparent-button .ff-icon{height:22px;margin:1px 2px}.sv-tour-navigator{color:#c8c8c8}.sv-tour-navigator .sv-content{flex:1;margin:2px 8px;text-align:center}.sv-tour-navigator .sv-title{font-size:1.1em}.sv-tour-navigator .sv-text{font-size:0.9em}.sv-target-navigator .sv-content{flex:1;margin:2px 8px;text-align:center}.sv-target-navigator .sv-title{font-size:1.1em}.sv-tag-cloud .sv-tag-buttons{flex:1 1 auto;display:flex;flex-wrap:wrap;justify-content:center;margin:4px}.sv-tag-cloud .sv-tag-button{flex:0 1 auto;margin:3px 3px;padding:2px 4px;background-color:rgba(31,36,38,0.8);border-radius:3px;font-size:0.88em}.sv-tag-cloud .sv-tag-button:hover{background-color:rgba(74,82,87,0.5)}.sv-tag-cloud .sv-tag-button[selected]{background-color:#0089bf}.sv-tag-cloud .sv-tag-button .ff-text{margin:1px 2px}.sv-tag-cloud .sv-tag-button .ff-icon{height:22px;margin:1px 2px}.sv-tool-bar{color:#c8c8c8;pointer-events:auto}.sv-tool-bar .sv-tool-buttons{flex:1 1 auto;display:flex;margin:4px;overflow-x:auto}.sv-tool-bar .sv-tool-buttons .sv-tool-button:first-child{margin-left:auto}.sv-tool-bar .sv-tool-buttons .sv-tool-button:last-child{margin-right:auto}.sv-tool-bar .sv-tool-button{flex:0 1 auto;margin:2px;padding:1px 2px;border-radius:3px;font-size:0.882em}.sv-tool-bar .sv-tool-button .ff-text{margin:1px 2px}.sv-tool-bar .sv-tool-button .ff-icon{height:22px;margin:1px 2px}.sv-tool-bar-container{position:relative;bottom:0px;width:100%}.sv-tool-controls{flex:1 1 auto;display:flex;justify-content:center;align-items:center;font-size:0.882em}.sv-tool-controls .sv-property-view{flex:0 1 auto;align-self:start;display:flex;flex-direction:column;margin:4px}.sv-tool-controls .sv-property-view label{height:1.25em}.sv-tool-controls .sv-property-view.sv-nogap{margin:4px 0 !important}.sv-tool-controls .sv-property-slider{flex:0 2 180px}.sv-tool-controls .sv-property-slider .ff-linear-slider{height:6px;margin:12px 2px;padding-right:16px;border-radius:2px;background-color:#4e4e4e}.sv-tool-controls .sv-property-slider .ff-linear-slider .ff-knob{width:16px;height:26px;margin:-10px 0 0 0;border-radius:2px;background-color:#0089bf;box-shadow:0 0 6px black}.sv-tool-controls .sv-property-color>.ff-button{width:28px;box-sizing:border-box;border:1px solid #343434}.sv-tool-controls .sv-property-color .ff-color-edit{position:absolute;width:200px;height:180px;right:8px;top:-188px}.sv-tool-controls .sv-options{display:flex}.sv-tool-controls .ff-label{margin:2px}.sv-tool-controls .ff-string{flex:0 1 auto;height:26px;margin:2px;font-size:1.34em}.sv-tool-controls .ff-button{height:26px;margin:2px;padding:0 4px;background:#343434;border-radius:2px}.sv-tool-controls .ff-button:focus{outline:none;background:#343434;box-shadow:0 0 3pt 2pt #bfedff}.sv-tool-controls .ff-button:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-tool-controls .ff-button:focus-visible{outline:none;background:#343434;box-shadow:0 0 3pt 2pt #bfedff}.sv-tool-controls .ff-button:hover{background-color:#676767;fill:#c8c8c8}.sv-view-tool-view .sv-options,.sv-render-tool-view .sv-options,.sv-light-tool-view .sv-options{flex-wrap:wrap}.sv-tape-tool-view .sv-tool-controls,.sv-slice-tool-view .sv-tool-controls,.sv-environment-tool-view .sv-tool-controls{flex-wrap:wrap}\n',e.appendChild(t);const n=this.application.system;e.appendChild(new Zy(n)),e.appendChild(new L_(n));const r=document.createElement("div");r.setAttribute("id",zi.stackId),e.appendChild(r),zi.shadowRootNode=e;const s=document.createElement("div");s.classList.add("sr-only"),s.setAttribute("id","sr-intro"),s.setAttribute("aria-live","polite"),e.appendChild(s)}connected(){this.fullscreen.fullscreenElement=this,this.viewer.rootElement=this}disconnected(){this.fullscreen.fullscreenElement=null,this.viewer.rootElement=null,this.application.dispose(),this.application=null}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),this.application&&"root"===e?(this.application.props.root=this.getAttribute("root"),this.application.evaluateProps()):this.application&&"controls"===e&&this.application.enableNavigation(n)}onFocus(){this.shadowRoot.getElementById("sr-intro").innerText="The Voyager web application allows you to view and interact with a 3D model from the Smithsonian collection. Use the tab key to move through interactive elements, enter or spacebar keys to activate, and the escape key to exit menus."}toggleAnnotations(){this.application&&this.application.toggleAnnotations()}toggleReader(){this.application&&this.application.toggleReader()}toggleTours(){this.application&&this.application.toggleTours()}toggleTools(){this.application&&this.application.toggleTools()}toggleMeasurement(){this.application&&this.application.toggleMeasurement()}enableAR(){this.application&&this.application.enableAR()}getArticles(){if(this.application){return this.application.getArticles()}}getAnnotations(){if(this.application){return this.application.getAnnotations()}}getCameraOrbit(e){if(this.application){return this.application.getCameraOrbit(e||null)}}setCameraOrbit(e,t){this.application&&this.application.setCameraOrbit(e,t)}getCameraOffset(e){if(this.application){return this.application.getCameraOffset(e||null)}}setCameraOffset(e,t,n){this.application&&this.application.setCameraOffset(e,t,n)}setBackgroundColor(e,t){this.application&&this.application.setBackgroundColor(e,t||null)}setBackgroundStyle(e){this.application&&this.application.setBackgroundStyle(e)}setActiveAnnotation(e){this.application&&this.viewer.ins.activeAnnotation.setValue(e)}setTourStep(e,t,n){this.application&&this.application.setTourStep(e,t,void 0===n||n)}setLanguage(e){this.application&&this.application.setLanguage(e)}};D_=A_([Ci("voyager-explorer")],D_);const O_=D_;class R_{constructor(e,t,n){this.props=t||{},console.log(R_.splashMessage);const r=new ls;r.add(Pp),r.add(Ff),this.commander=new J;const s=this.system=new Bi(r),i=s.graph.createCustomNode(Dp);s.graph.createCustomNode(Bf),s.graph.createCustomNode(Rp),this.analytics.startTimer(),e&&new O_(this).appendTo(e),n||(this.documentProvider.createDocument(as),this.evaluateProps());(/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1)&&(window.createImageBitmap=void 0),i.pulse.start()}get assetManager(){return this.system.getMainComponent(Zi)}get assetReader(){return this.system.getMainComponent(Nc)}get documentProvider(){return this.system.getMainComponent(Lp)}get analytics(){return this.system.getMainComponent(Xi)}dispose(){this.assetReader.dispose(),this.documentProvider.activeComponent.clearNodeTree(),this.system.getMainComponent(_r).views.forEach((e=>e.dispose())),this.documentProvider.activeComponent.setup.tape.dispose(),this.documentProvider.activeComponent.setup.floor.dispose(),this.documentProvider.activeComponent.setup.grid.dispose()}setBaseUrl(e){this.assetManager.baseUrl=e}loadDocument(e,t,n){const r=Nd[n];return this.assetReader.getJSON(e).then((n=>(t=void 0===t?!n.lights&&!n.cameras:t,this.documentProvider.amendDocument(n,e,t)))).then((e=>(isFinite(r)&&e.setup.viewer.ins.quality.setValue(r),e)))}loadModel(e,t){return this.documentProvider.appendModel(e,t)}loadGeometry(e,t,n,r,s){return this.documentProvider.appendGeometry(e,t,n,r,s)}evaluateProps(){const e=this.props,t=this.assetManager;e.root=e.root||s("root")||s("r"),e.dracoRoot=e.dracoRoot||s("dracoRoot")||s("dr"),e.resourceRoot=e.resourceRoot||s("resourceRoot")||s("rr"),e.document=e.document||s("document")||s("d"),e.model=e.model||s("model")||s("m"),e.geometry=e.geometry||s("geometry")||s("g"),e.texture=e.texture||s("texture")||s("t"),e.occlusion=e.occlusion||s("occlusion")||s("o"),e.normals=e.normals||s("normals")||s("n"),e.quality=e.quality||s("quality")||s("q"),e.uiMode=e.uiMode||s("uiMode")||s("u"),e.bgColor=e.bgColor||s("bgColor")||s("bc"),e.bgStyle=e.bgStyle||s("bgStyle")||s("bs"),e.controls=e.controls||s("controls")||s("ct"),e.reader=e.reader||s("reader")||s("rdr"),e.lang=e.lang||s("lang")||s("l");const n=e.root||e.document||e.model||e.geometry;if(this.setBaseUrl(new URL(n||".",window.location).href),e.uiMode){let t=0,n=!1;const r=Object.values(rm).filter((e=>"string"==typeof e));e.uiMode.split("|").forEach((e=>{const s=e.toLowerCase();r.includes(s)&&(t+=rm[s],n=!0)})),n&&this.documentProvider.activeComponent.setup.interface.ins.visibleElements.setValue(t)}e.dracoRoot&&this.assetReader.setDracoPath(e.dracoRoot),e.resourceRoot&&this.assetReader.setSystemAssetPath(e.resourceRoot),e.lang&&this.setLanguage(e.lang),e.document?(e.document=e.root?e.document:t.getAssetName(e.document),this.loadDocument(e.document,void 0,e.quality).then((()=>this.postLoadHandler(e))).catch((e=>zi.show(`Failed to load document: ${e.message}`,"error")))):e.model?(e.model=e.root?e.model:t.getAssetName(e.model),this.assetReader.getText(e.model).then((()=>{this.loadModel(e.model,e.quality),this.postLoadHandler(e)})).catch((e=>zi.show(`Bad Model Path: ${e.message}`,"error")))):e.geometry?(e.geometry=e.root?e.geometry:t.getAssetName(e.geometry),e.texture=e.root?e.texture:t.getAssetName(e.texture),e.occlusion=e.root?e.occlusion:t.getAssetName(e.occlusion),e.normals=e.root?e.normals:t.getAssetName(e.normals),this.assetReader.getText(e.geometry).then((()=>{this.loadGeometry(e.geometry,e.texture,e.occlusion,e.normals,e.quality),this.postLoadHandler(e)})).catch((e=>zi.show(`Bad Geometry Path: ${e.message}`,"error")))):e.root&&this.loadDocument("scene.svx.json",void 0).then((()=>this.postLoadHandler(e))).catch((()=>{}))}postLoadHandler(e){if(this.assetManager.ins.baseUrlValid.setValue(!0),e.bgColor){const t=e.bgColor.split(" ");this.setBackgroundColor(t[0],t[1]||null)}e.bgStyle&&this.setBackgroundStyle(e.bgStyle),e.controls&&this.enableNavigation(e.controls),e.reader&&this.enableReader(e.reader)}toggleAnnotations(){const e=this.system.getMainComponent(Lp).activeComponent.setup.viewer.ins,t=this.system.getMainComponent(Vp).ins;t.visible.value&&t.visible.setValue(!1),e.annotationsVisible.setValue(!e.annotationsVisible.value),this.analytics.sendProperty("Annotations.Visible",e.annotationsVisible.value)}toggleReader(){const e=this.system.getMainComponent(Lp).activeComponent.setup.reader,t=e.ins;t.enabled.setValue(!t.enabled.value),t.focus.setValue(t.enabled.value),t.enabled.value&&t.articleId.setValue(1===e.articles.length?e.articles[0].article.id:""),this.analytics.sendProperty("Reader.Enabled",t.enabled.value)}toggleTours(){const e=this.system.getMainComponent(Lp).activeComponent.setup.tours.ins,t=this.system.getMainComponent(Lp).activeComponent.setup.reader.ins;e.enabled.value?e.enabled.setValue(!1):(t.enabled.value&&t.enabled.setValue(!1),e.enabled.setValue(!0),e.tourIndex.setValue(-1)),this.analytics.sendProperty("Tours.Enabled",e.enabled.value)}toggleTools(){const e=this.system.getMainComponent(Vp).ins,t=this.system.getMainComponent(Lp).activeComponent.setup.viewer.ins;t.annotationsVisible.value&&t.annotationsVisible.setValue(!1),e.visible.setValue(!e.visible.value),this.analytics.sendProperty("Tools.Visible",e.visible.value)}toggleMeasurement(){const e=this.system.getMainComponent(Lp).activeComponent.setup.tape.ins;e.visible.setValue(!e.visible.value)}enableAR(){this.system.getMainComponent(_p).ins.enabled.setValue(!0),this.analytics.sendProperty("AR.enabled",!0)}getArticles(){return this.system.getMainComponent(Lp).activeComponent.setup.reader.articles.map((e=>e.article.data))}getAnnotations(){const e=this.system.getComponent(up).getGraphComponents(bp);let t=[];return e.forEach((e=>{t=t.concat(e.getAnnotations())})),t}getCameraOrbit(e){const t=this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins;let n=t.orbit.value;if(e){const r=e.toLowerCase();if("max"===r)n=t.maxOrbit.value;else if("min"===r)n=t.minOrbit.value;else if("active"!==r)return void console.error("Error: getCameraOrbit invalid type param.")}return n.slice(0,2)}setCameraOrbit(e,t){const n=this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins,r=parseFloat(e),s=parseFloat(t);isNaN(r)||isNaN(s)?console.error("Error: setCameraOrbit param is not a number."):n.orbit.setValue([r,s,0])}getCameraOffset(e){const t=this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins;let n=t.offset.value;if(e){const r=e.toLowerCase();if("max"===r)n=t.maxOffset.value;else if("min"===r)n=t.minOffset.value;else if("active"!==r)return void console.error("Error: getCameraOffset invalid type param.")}return n.slice(0,3)}setCameraOffset(e,t,n){const r=this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins;let s=parseFloat(e),i=parseFloat(t),o=parseFloat(n);if(isNaN(s)||isNaN(i)||isNaN(o))console.error("Error: setCameraOffset param is not a number.");else{const e=r.minOffset.value,t=r.maxOffset.value;s=qm(s,e[0],t[0]),i=qm(i,e[1],t[1]),o=qm(o,e[2],t[2]),r.offset.setValue([s,i,o])}}setBackgroundColor(e,t){const n=this.system.getMainComponent(Lp).activeComponent.setup.background.ins,r=document.createElement("div");if(r.id="temp-color",r.style.color=e,document.body.appendChild(r),""!==r.style.color){const e=getComputedStyle(r).color.split("(")[1].split(")")[0].split(",").map((e=>parseInt(e)/255));n.color0.setValue(e)}else console.error("Error: Color0 param is invalid.");if(t)if(r.style.color=t,""!==r.style.color){const e=getComputedStyle(r).color.split("(")[1].split(")")[0].split(",").map((e=>parseInt(e)/255));n.color1.setValue(e)}else console.error("Error: Color1 param is invalid.");document.body.removeChild(r)}setBackgroundStyle(e){const t=this.system.getMainComponent(Lp).activeComponent.setup.background.ins,n=Object.values(ac).filter((e=>"string"==typeof e)).find((t=>t.toLowerCase()===e.toLowerCase()));void 0!==n?t.style.setValue(ac[n]):console.error("Error: Style param is invalid.")}setTourStep(e,t,n){const r=this.system.getMainComponent(Lp).activeComponent.setup.tours.ins,s=this.system.getMainComponent(Lp).activeComponent.setup.tours.outs;let i=parseInt(e),o=parseInt(t);!isNaN(i)&&!isNaN(o)&&i>=0&&o>=0?(r.tourIndex.setValue(i),n?(s.stepIndex.setValue(o-1),r.next.set()):r.stepIndex.setValue(o)):console.error("Error: setTourStep param ["+i+" "+o+"] is not a valid number.")}enableNavigation(e){let t;const n=e.toLowerCase();if("true"===n?t=!0:"false"===n&&(t=!1),null!=t){this.system.getMainComponent(Lp).activeComponent.setup.navigation.ins.pointerEnabled.setValue(t)}else console.error("Error: enableNavigation param is not valid.")}enableReader(e){let t;const n=e.toLowerCase();if("true"===n?t=!0:"false"===n&&(t=!1),null!=t){this.system.getMainComponent(Lp).activeComponent.setup.reader.ins.visible.setValue(t)}else console.error("Error: enableReader param is not valid.")}setLanguage(e){const t=this.system.getMainComponent(Lp).activeComponent.setup.language.ins,n=e.toUpperCase();n in kd?t.language.setValue(kd[n]):console.error("Error: setLanguage param is not a valid language id.")}}R_.splashMessage="\n  _________       .__  __  .__                        .__                ________ ________   \n /   _____/ _____ |__|/  |_|  |__   __________   ____ |__|____    ____   \\_____  \\\\______ \\  \n \\_____  \\ /     \\|  \\   __\\  |  \\ /  ___/  _ \\ /    \\|  \\__  \\  /    \\    _(__  < |    |  \\ \n /        \\  Y Y  \\  ||  | |   Y  \\\\___ (  <_> )   |  \\  |/ __ \\|   |  \\  /       \\|    `   \\\n/_______  /__|_|  /__||__| |___|  /____  >____/|___|  /__(____  /___|  / /______  /_______  /\n        \\/      \\/              \\/     \\/           \\/        \\/     \\/         \\/        \\/ \n    \nVoyager - 3D Explorer and Tool Suite\n3D Foundation Project\n(c) 2022 Smithsonian Institution\n\nhttps://3d.si.edu\nhttps://github.com/smithsonian/dpo-voyager\n\n-----------------------------------------------------\nVersion: Voyager Story v0.24.0  PROD\n-----------------------------------------------------\n    ",window.VoyagerExplorer=R_,"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,t,n){const r=Number(0xffffffffn&t),s=Number(t>>32n);this.setUint32(e+(n?0:4),r,n),this.setUint32(e+(n?4:0),s,n)}});var P_=e=>new DataView(new ArrayBuffer(e)),N_=e=>new Uint8Array(e.buffer||e),I_=e=>Math.min(4294967295,Number(e)),z_=e=>Math.min(65535,Number(e));function B_(e,t,n){if(void 0===t||t instanceof Uint8Array||(t=j_(t)),void 0===n||n instanceof Date||(n=new Date(n)),e instanceof File)return{i:t||j_(e.name),o:n||new Date(e.lastModified),A:e.stream()};if(e instanceof Response){const r=e.headers.get("content-disposition"),s=r&&r.match(/;\s*filename\*?=["']?(.*?)["']?$/i),i=s&&s[1]||new URL(e.url).pathname.split("/").pop(),o=i&&decodeURIComponent(i);return{i:t||j_(o),o:n||new Date(e.headers.get("Last-Modified")||Date.now()),A:e.body}}if(!t||0===t.length)throw new Error("The file must have a name.");if(void 0===n)n=new Date;else if(isNaN(n))throw new Error("Invalid modification date.");if("string"==typeof e)return{i:t,o:n,A:j_(e)};if(e instanceof Blob)return{i:t,o:n,A:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{i:t,o:n,A:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{i:t,o:n,A:N_(e)};if(Symbol.asyncIterator in e)return{i:t,o:n,A:F_(e)};throw new TypeError("Unsupported input format.")}function F_(e){const t="next"in e?e:e[Symbol.asyncIterator]();return new ReadableStream({async pull(e){let n=0;for(;e.desiredSize>n;){const r=await t.next();if(!r.value){e.close();break}{const t=H_(r.value);e.enqueue(t),n+=t.byteLength}}}})}function H_(e){return"string"==typeof e?j_(e):e instanceof Uint8Array?e:N_(e)}function j_(e){return(new TextEncoder).encode(String(e))}var U_=new WebAssembly.Instance(new WebAssembly.Module(Uint8Array.from(atob("AGFzbQEAAAABCgJgAABgAn9/AXwDAwIAAQUDAQACBw0DAW0CAAF0AAABYwABCpUBAkkBA38DQCABIQBBACECA0AgAEEBdiAAQQFxQaCG4u1+bHMhACACQQFqIgJBCEcNAAsgAUECdCAANgIAIAFBAWoiAUGAAkcNAAsLSQEBfyABQX9zIQFBgIAEIQJBgIAEIABqIQADQCABQf8BcSACLQAAc0ECdCgCACABQQh2cyEBIAJBAWoiAiAASQ0ACyABQX9zuAs"),(e=>e.charCodeAt(0))))),{t:Y_,c:V_,m:$_}=U_.exports;Y_();var W_=N_($_).subarray(65536);function G_(e,t=0){for(const n of function*(e){for(;e.length>65536;)yield e.subarray(0,65536),e=e.subarray(65536);e.length&&(yield e)}(e))W_.set(n),t=V_(n.length,t);return t}function q_(e,t,n=0){const r=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,s=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;t.setUint16(n,r,1),t.setUint16(n+2,s,1)}function X_(e){const t=P_(30);return t.setUint32(0,1347093252),t.setUint32(4,754976768),q_(e.o,t,10),t.setUint16(26,e.i.length,1),N_(t)}async function*K_(e){let{A:t}=e;if("then"in t&&(t=await t),t instanceof Uint8Array)yield t,e.u=G_(t,0),e.l=BigInt(t.length);else{e.l=0n;const n=t.getReader();for(;;){const{value:t,done:r}=await n.read();if(r)break;e.u=G_(t,e.u),e.l+=BigInt(t.length),yield t}}}function J_(e,t){const n=P_(16+(t?8:0));return n.setUint32(0,1347094280),n.setUint32(4,e.u,1),t?(n.setBigUint64(8,e.l,1),n.setBigUint64(16,e.l,1)):(n.setUint32(8,I_(e.l),1),n.setUint32(12,I_(e.l),1)),N_(n)}function Z_(e,t,n){const r=P_(46);return r.setUint32(0,1347092738),r.setUint32(4,755182848),r.setUint16(8,2048),q_(e.o,r,12),r.setUint32(16,e.u,1),r.setUint32(20,I_(e.l),1),r.setUint32(24,I_(e.l),1),r.setUint16(28,e.i.length,1),r.setUint16(30,n?28:0,1),r.setUint16(40,33204,1),r.setUint32(42,I_(t),1),N_(r)}function Q_(e,t){const n=P_(28);return n.setUint16(0,1,1),n.setUint16(2,24,1),n.setBigUint64(4,e.l,1),n.setBigUint64(12,e.l,1),n.setBigUint64(20,t,1),N_(n)}class eb{constructor(e){this._loadingManager=e}put(e,t){this._loadingManager.itemStart(t),"string"!=typeof e&&(e=JSON.stringify(e));return fetch(t,{headers:{"Content-Type":"application/json"},method:"PUT",credentials:"same-origin",body:e}).then((e=>{if(!e.ok){const n=`fetch PUT at '${t}', error: ${e.status} - ${e.statusText}`;throw console.warn(n),new Error(n)}this._loadingManager.itemEnd(t)}))}}var tb=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function nb(){var e=this;function t(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.build_tree=function(n){var r,s,i,o=e.dyn_tree,a=e.stat_desc.static_tree,l=e.stat_desc.elems,c=-1;for(n.heap_len=0,n.heap_max=573,r=0;r<l;r++)0!==o[2*r]?(n.heap[++n.heap_len]=c=r,n.depth[r]=0):o[2*r+1]=0;for(;n.heap_len<2;)o[2*(i=n.heap[++n.heap_len]=c<2?++c:0)]=1,n.depth[i]=0,n.opt_len--,a&&(n.static_len-=a[2*i+1]);for(e.max_code=c,r=Math.floor(n.heap_len/2);r>=1;r--)n.pqdownheap(o,r);i=l;do{r=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(o,1),s=n.heap[1],n.heap[--n.heap_max]=r,n.heap[--n.heap_max]=s,o[2*i]=o[2*r]+o[2*s],n.depth[i]=Math.max(n.depth[r],n.depth[s])+1,o[2*r+1]=o[2*s+1]=i,n.heap[1]=i++,n.pqdownheap(o,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(t){var n,r,s,i,o,a,l=e.dyn_tree,c=e.stat_desc.static_tree,d=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,h=e.stat_desc.max_length,m=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(i=l[2*l[2*(r=t.heap[n])+1]+1]+1)>h&&(i=h,m++),l[2*r+1]=i,r>e.max_code||(t.bl_count[i]++,o=0,r>=u&&(o=d[r-u]),t.opt_len+=(a=l[2*r])*(i+o),c&&(t.static_len+=a*(c[2*r+1]+o)));if(0!==m){do{for(i=h-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[h]--,m-=2}while(m>0);for(i=h;0!==i;i--)for(r=t.bl_count[i];0!==r;)(s=t.heap[--n])>e.max_code||(l[2*s+1]!=i&&(t.opt_len+=(i-l[2*s+1])*l[2*s],l[2*s+1]=i),r--)}}(n),function(e,n,r){var s,i,o,a=[],l=0;for(s=1;s<=15;s++)a[s]=l=l+r[s-1]<<1;for(i=0;i<=n;i++)0!==(o=e[2*i+1])&&(e[2*i]=t(a[o]++,o))}(o,e.max_code,n.bl_count)}}function rb(e,t,n,r,s){var i=this;i.static_tree=e,i.extra_bits=t,i.extra_base=n,i.elems=r,i.max_length=s}function sb(e,t,n,r,s){var i=this;i.good_length=e,i.max_lazy=t,i.nice_length=n,i.max_chain=r,i.func=s}nb._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],nb.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],nb.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],nb.d_code=function(e){return e<256?tb[e]:tb[256+(e>>>7)]},nb.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nb.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nb.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nb.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rb.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],rb.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],rb.static_l_desc=new rb(rb.static_ltree,nb.extra_lbits,257,286,15),rb.static_d_desc=new rb(rb.static_dtree,nb.extra_dbits,0,30,15),rb.static_bl_desc=new rb(null,nb.extra_blbits,0,19,7);var ib=[new sb(0,0,0,0,0),new sb(4,4,8,4,1),new sb(4,5,16,8,1),new sb(4,6,32,32,1),new sb(4,4,16,16,2),new sb(8,16,32,32,2),new sb(8,16,128,128,2),new sb(8,32,128,256,2),new sb(32,128,258,1024,2),new sb(32,258,258,4096,2)],ob=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function ab(e,t,n,r){var s=e[2*t],i=e[2*n];return s<i||s==i&&r[t]<=r[n]}function lb(){var e,t,n,r,s,i,o,a,l,c,d,u,h,m,p,f,g,v,y,_,b,w,x,M,S,T,C,E,k,L,A,D,O,R,P,N,I,z,B,F,H,j=this,U=new nb,Y=new nb,V=new nb;function $(){var e;for(e=0;e<286;e++)A[2*e]=0;for(e=0;e<30;e++)D[2*e]=0;for(e=0;e<19;e++)O[2*e]=0;A[512]=1,j.opt_len=j.static_len=0,N=z=0}function W(e,t){var n,r,s=-1,i=e[1],o=0,a=7,l=4;for(0===i&&(a=138,l=3),e[2*(t+1)+1]=65535,n=0;n<=t;n++)r=i,i=e[2*(n+1)+1],++o<a&&r==i||(o<l?O[2*r]+=o:0!==r?(r!=s&&O[2*r]++,O[32]++):o<=10?O[34]++:O[36]++,o=0,s=r,0===i?(a=138,l=3):r==i?(a=6,l=3):(a=7,l=4))}function G(e){j.pending_buf[j.pending++]=e}function q(e){G(255&e),G(e>>>8&255)}function X(e,t){var n,r=t;H>16-r?(q(F|=(n=e)<<H&65535),F=n>>>16-H,H+=r-16):(F|=e<<H&65535,H+=r)}function K(e,t){var n=2*e;X(65535&t[n],65535&t[n+1])}function J(e,t){var n,r,s=-1,i=e[1],o=0,a=7,l=4;for(0===i&&(a=138,l=3),n=0;n<=t;n++)if(r=i,i=e[2*(n+1)+1],!(++o<a&&r==i)){if(o<l)do{K(r,O)}while(0!=--o);else 0!==r?(r!=s&&(K(r,O),o--),K(16,O),X(o-3,2)):o<=10?(K(17,O),X(o-3,3)):(K(18,O),X(o-11,7));o=0,s=r,0===i?(a=138,l=3):r==i?(a=6,l=3):(a=7,l=4)}}function Z(){16==H?(q(F),F=0,H=0):H>=8&&(G(255&F),F>>>=8,H-=8)}function Q(e,t){var n,r,s;if(j.pending_buf[I+2*N]=e>>>8&255,j.pending_buf[I+2*N+1]=255&e,j.pending_buf[R+N]=255&t,N++,0===e?A[2*t]++:(z++,e--,A[2*(nb._length_code[t]+256+1)]++,D[2*nb.d_code(e)]++),0==(8191&N)&&C>2){for(n=8*N,r=b-g,s=0;s<30;s++)n+=D[2*s]*(5+nb.extra_dbits[s]);if(n>>>=3,z<Math.floor(N/2)&&n<Math.floor(r/2))return!0}return N==P-1}function ee(e,t){var n,r,s,i,o=0;if(0!==N)do{n=j.pending_buf[I+2*o]<<8&65280|255&j.pending_buf[I+2*o+1],r=255&j.pending_buf[R+o],o++,0===n?K(r,e):(K((s=nb._length_code[r])+256+1,e),0!==(i=nb.extra_lbits[s])&&X(r-=nb.base_length[s],i),n--,K(s=nb.d_code(n),t),0!==(i=nb.extra_dbits[s])&&X(n-=nb.base_dist[s],i))}while(o<N);K(256,e),B=e[513]}function te(){H>8?q(F):H>0&&G(255&F),F=0,H=0}function ne(e,t,n){X(0+(n?1:0),3),function(e,t,n){te(),B=8,q(t),q(~t),j.pending_buf.set(a.subarray(e,e+t),j.pending),j.pending+=t}(e,t)}function re(t){(function(e,t,n){var r,s,i=0;C>0?(U.build_tree(j),Y.build_tree(j),i=function(){var e;for(W(A,U.max_code),W(D,Y.max_code),V.build_tree(j),e=18;e>=3&&0===O[2*nb.bl_order[e]+1];e--);return j.opt_len+=3*(e+1)+5+5+4,e}(),(s=j.static_len+3+7>>>3)<=(r=j.opt_len+3+7>>>3)&&(r=s)):r=s=t+5,t+4<=r&&-1!=e?ne(e,t,n):s==r?(X(2+(n?1:0),3),ee(rb.static_ltree,rb.static_dtree)):(X(4+(n?1:0),3),function(e,t,n){var r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;r<n;r++)X(O[2*nb.bl_order[r]+1],3);J(A,e-1),J(D,t-1)}(U.max_code+1,Y.max_code+1,i+1),ee(A,D)),$(),n&&te()})(g>=0?g:-1,b-g,t),g=b,e.flush_pending()}function se(){var t,n,r,i;do{if(0==(i=l-x-b)&&0===b&&0===x)i=s;else if(-1==i)i--;else if(b>=s+s-262){a.set(a.subarray(s,s+s),0),w-=s,b-=s,g-=s,r=t=h;do{n=65535&d[--r],d[r]=n>=s?n-s:0}while(0!=--t);r=t=s;do{n=65535&c[--r],c[r]=n>=s?n-s:0}while(0!=--t);i+=s}if(0===e.avail_in)return;t=e.read_buf(a,b+x,i),(x+=t)>=3&&(u=((u=255&a[b])<<f^255&a[b+1])&p)}while(x<262&&0!==e.avail_in)}function ie(e){var t,n,r=S,i=b,l=M,d=b>s-262?b-(s-262):0,u=L,h=o,m=b+258,p=a[i+l-1],f=a[i+l];M>=k&&(r>>=2),u>x&&(u=x);do{if(a[(t=e)+l]==f&&a[t+l-1]==p&&a[t]==a[i]&&a[++t]==a[i+1]){i+=2,t++;do{}while(a[++i]==a[++t]&&a[++i]==a[++t]&&a[++i]==a[++t]&&a[++i]==a[++t]&&a[++i]==a[++t]&&a[++i]==a[++t]&&a[++i]==a[++t]&&a[++i]==a[++t]&&i<m);if(n=258-(m-i),i=m-258,n>l){if(w=e,l=n,n>=u)break;p=a[i+l-1],f=a[i+l]}}}while((e=65535&c[e&h])>d&&0!=--r);return l<=x?l:x}j.depth=[],j.bl_count=[],j.heap=[],A=[],D=[],O=[],j.pqdownheap=function(e,t){for(var n=j.heap,r=n[t],s=t<<1;s<=j.heap_len&&(s<j.heap_len&&ab(e,n[s+1],n[s],j.depth)&&s++,!ab(e,r,n[s],j.depth));)n[t]=n[s],t=s,s<<=1;n[t]=r},j.deflateInit=function(e,y,w,N,z,W){return N||(N=8),z||(z=8),W||(W=0),e.msg=null,-1==y&&(y=6),z<1||z>9||8!=N||w<9||w>15||y<0||y>9||W<0||W>2?-2:(e.dstate=j,o=(s=1<<(i=w))-1,p=(h=1<<(m=z+7))-1,f=Math.floor((m+3-1)/3),a=new Uint8Array(2*s),c=[],d=[],P=1<<z+6,j.pending_buf=new Uint8Array(4*P),n=4*P,I=Math.floor(P/2),R=3*P,C=y,E=W,function(e){return e.total_in=e.total_out=0,e.msg=null,j.pending=0,j.pending_out=0,t=113,r=0,U.dyn_tree=A,U.stat_desc=rb.static_l_desc,Y.dyn_tree=D,Y.stat_desc=rb.static_d_desc,V.dyn_tree=O,V.stat_desc=rb.static_bl_desc,F=0,H=0,B=8,$(),function(){var e;for(l=2*s,d[h-1]=0,e=0;e<h-1;e++)d[e]=0;T=ib[C].max_lazy,k=ib[C].good_length,L=ib[C].nice_length,S=ib[C].max_chain,b=0,g=0,x=0,v=M=2,_=0,u=0}(),0}(e))},j.deflateEnd=function(){return 42!=t&&113!=t&&666!=t?-2:(j.pending_buf=null,d=null,c=null,a=null,j.dstate=null,113==t?-3:0)},j.deflateParams=function(e,t,n){var r=0;return-1==t&&(t=6),t<0||t>9||n<0||n>2?-2:(ib[C].func!=ib[t].func&&0!==e.total_in&&(r=e.deflate(1)),C!=t&&(T=ib[C=t].max_lazy,k=ib[C].good_length,L=ib[C].nice_length,S=ib[C].max_chain),E=n,r)},j.deflateSetDictionary=function(e,n,r){var i,l=r,h=0;if(!n||42!=t)return-2;if(l<3)return 0;for(l>s-262&&(h=r-(l=s-262)),a.set(n.subarray(h,h+l),0),b=l,g=l,u=((u=255&a[0])<<f^255&a[1])&p,i=0;i<=l-3;i++)c[i&o]=d[u=(u<<f^255&a[i+2])&p],d[u]=i;return 0},j.deflate=function(l,m){var S,k,L,A,D,O;if(m>4||m<0)return-2;if(!l.next_out||!l.next_in&&0!==l.avail_in||666==t&&4!=m)return l.msg=ob[4],-2;if(0===l.avail_out)return l.msg=ob[7],-5;if(e=l,A=r,r=m,42==t&&(k=8+(i-8<<4)<<8,(L=(C-1&255)>>1)>3&&(L=3),k|=L<<6,0!==b&&(k|=32),t=113,G((O=k+=31-k%31)>>8&255),G(255&O)),0!==j.pending){if(e.flush_pending(),0===e.avail_out)return r=-1,0}else if(0===e.avail_in&&m<=A&&4!=m)return e.msg=ob[7],-5;if(666==t&&0!==e.avail_in)return l.msg=ob[7],-5;if(0!==e.avail_in||0!==x||0!=m&&666!=t){switch(D=-1,ib[C].func){case 0:D=function(t){var r,i=65535;for(i>n-5&&(i=n-5);;){if(x<=1){if(se(),0===x&&0==t)return 0;if(0===x)break}if(b+=x,x=0,r=g+i,(0===b||b>=r)&&(x=b-r,b=r,re(!1),0===e.avail_out))return 0;if(b-g>=s-262&&(re(!1),0===e.avail_out))return 0}return re(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(m);break;case 1:D=function(t){for(var n,r=0;;){if(x<262){if(se(),x<262&&0==t)return 0;if(0===x)break}if(x>=3&&(r=65535&d[u=(u<<f^255&a[b+2])&p],c[b&o]=d[u],d[u]=b),0!==r&&(b-r&65535)<=s-262&&2!=E&&(v=ie(r)),v>=3)if(n=Q(b-w,v-3),x-=v,v<=T&&x>=3){v--;do{b++,r=65535&d[u=(u<<f^255&a[b+2])&p],c[b&o]=d[u],d[u]=b}while(0!=--v);b++}else b+=v,v=0,u=((u=255&a[b])<<f^255&a[b+1])&p;else n=Q(0,255&a[b]),x--,b++;if(n&&(re(!1),0===e.avail_out))return 0}return re(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(m);break;case 2:D=function(t){for(var n,r,i=0;;){if(x<262){if(se(),x<262&&0==t)return 0;if(0===x)break}if(x>=3&&(i=65535&d[u=(u<<f^255&a[b+2])&p],c[b&o]=d[u],d[u]=b),M=v,y=w,v=2,0!==i&&M<T&&(b-i&65535)<=s-262&&(2!=E&&(v=ie(i)),v<=5&&(1==E||3==v&&b-w>4096)&&(v=2)),M>=3&&v<=M){r=b+x-3,n=Q(b-1-y,M-3),x-=M-1,M-=2;do{++b<=r&&(i=65535&d[u=(u<<f^255&a[b+2])&p],c[b&o]=d[u],d[u]=b)}while(0!=--M);if(_=0,v=2,b++,n&&(re(!1),0===e.avail_out))return 0}else if(0!==_){if((n=Q(0,255&a[b-1]))&&re(!1),b++,x--,0===e.avail_out)return 0}else _=1,b++,x--}return 0!==_&&(n=Q(0,255&a[b-1]),_=0),re(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(m)}if(2!=D&&3!=D||(t=666),0==D||2==D)return 0===e.avail_out&&(r=-1),0;if(1==D){if(1==m)X(2,3),K(256,rb.static_ltree),Z(),1+B+10-H<9&&(X(2,3),K(256,rb.static_ltree),Z()),B=7;else if(ne(0,0,!1),3==m)for(S=0;S<h;S++)d[S]=0;if(e.flush_pending(),0===e.avail_out)return r=-1,0}}return 4!=m?0:1}}function cb(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}function db(e){var t=new cb,n=512,r=new Uint8Array(n),s=e?e.level:-1;void 0===s&&(s=-1),t.deflateInit(s),t.next_out=r,this.append=function(e,s){var i,o=[],a=0,l=0,c=0;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=n,0!=t.deflate(0))throw new Error("deflating: "+t.msg);t.next_out_index&&o.push(t.next_out_index==n?new Uint8Array(r):new Uint8Array(r.subarray(0,t.next_out_index))),c+=t.next_out_index,s&&t.next_in_index>0&&t.next_in_index!=a&&(s(t.next_in_index),a=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return i=new Uint8Array(c),o.forEach((function(e){i.set(e,l),l+=e.length})),i}},this.flush=function(){var e,s,i=[],o=0,a=0;do{if(t.next_out_index=0,t.avail_out=n,1!=(e=t.deflate(4))&&0!=e)throw new Error("deflating: "+t.msg);n-t.avail_out>0&&i.push(new Uint8Array(r.subarray(0,t.next_out_index))),a+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),s=new Uint8Array(a),i.forEach((function(e){s.set(e,o),o+=e.length})),s}}cb.prototype={deflateInit:function(e,t){var n=this;return n.dstate=new lb,t||(t=15),n.dstate.deflateInit(n,e,t)},deflate:function(e){var t=this;return t.dstate?t.dstate.deflate(t,e):-2},deflateEnd:function(){var e=this;if(!e.dstate)return-2;var t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){var n=this;return n.dstate?n.dstate.deflateParams(n,e,t):-2},deflateSetDictionary:function(e,t){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,e,t):-2},read_buf:function(e,t,n){var r=this,s=r.avail_in;return s>n&&(s=n),0===s?0:(r.avail_in-=s,e.set(r.next_in.subarray(r.next_in_index,r.next_in_index+s),t),r.next_in_index+=s,r.total_in+=s,s)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}},self._zipjs_Deflater=db;var ub=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],hb=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],mb=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],pb=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],fb=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],gb=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],vb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function yb(){var e,t,n,r,s,i;function o(e,t,o,a,l,c,d,u,h,m,p){var f,g,v,y,_,b,w,x,M,S,T,C,E,k,L;S=0,_=o;do{n[e[t+S]]++,S++,_--}while(0!==_);if(n[0]==o)return d[0]=-1,u[0]=0,0;for(x=u[0],b=1;b<=15&&0===n[b];b++);for(w=b,x<b&&(x=b),_=15;0!==_&&0===n[_];_--);for(v=_,x>_&&(x=_),u[0]=x,k=1<<b;b<_;b++,k<<=1)if((k-=n[b])<0)return-3;if((k-=n[_])<0)return-3;for(n[_]+=k,i[1]=b=0,S=1,E=2;0!=--_;)i[E]=b+=n[S],E++,S++;_=0,S=0;do{0!==(b=e[t+S])&&(p[i[b]++]=_),S++}while(++_<o);for(o=i[v],i[0]=_=0,S=0,y=-1,C=-x,s[0]=0,T=0,L=0;w<=v;w++)for(f=n[w];0!=f--;){for(;w>C+x;){if(y++,L=(L=v-(C+=x))>x?x:L,(g=1<<(b=w-C))>f+1&&(g-=f+1,E=w,b<L))for(;++b<L&&!((g<<=1)<=n[++E]);)g-=n[E];if(m[0]+(L=1<<b)>1440)return-3;s[y]=T=m[0],m[0]+=L,0!==y?(i[y]=_,r[0]=b,r[1]=x,r[2]=T-s[y-1]-(b=_>>>C-x),h.set(r,3*(s[y-1]+b))):d[0]=T}for(r[1]=w-C,S>=o?r[0]=192:p[S]<a?(r[0]=p[S]<256?0:96,r[2]=p[S++]):(r[0]=c[p[S]-a]+16+64,r[2]=l[p[S++]-a]),g=1<<w-C,b=_>>>C;b<L;b+=g)h.set(r,3*(T+b));for(b=1<<w-1;0!=(_&b);b>>>=1)_^=b;for(_^=b,M=(1<<C)-1;(_&M)!=i[y];)y--,M=(1<<(C-=x))-1}return 0!==k&&1!=v?-5:0}function a(o){var a;for(e||(e=[],t=[],n=new Int32Array(16),r=[],s=new Int32Array(15),i=new Int32Array(16)),t.length<o&&(t=[]),a=0;a<o;a++)t[a]=0;for(a=0;a<16;a++)n[a]=0;for(a=0;a<3;a++)r[a]=0;s.set(n.subarray(0,15),0),i.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(n,r,s,i,l){var c;return a(19),e[0]=0,-3==(c=o(n,0,19,19,null,null,s,r,i,e,t))?l.msg="oversubscribed dynamic bit lengths tree":-5!=c&&0!==r[0]||(l.msg="incomplete dynamic bit lengths tree",c=-3),c},this.inflate_trees_dynamic=function(n,r,s,i,l,c,d,u,h){var m;return a(288),e[0]=0,0!=(m=o(s,0,n,257,pb,fb,c,i,u,e,t))||0===i[0]?(-3==m?h.msg="oversubscribed literal/length tree":-4!=m&&(h.msg="incomplete literal/length tree",m=-3),m):(a(288),0!=(m=o(s,n,r,0,gb,vb,d,l,u,e,t))||0===l[0]&&n>257?(-3==m?h.msg="oversubscribed distance tree":-5==m?(h.msg="incomplete distance tree",m=-3):-4!=m&&(h.msg="empty distance tree with lengths",m=-3),m):0)}}function _b(){var e,t,n,r,s=this,i=0,o=0,a=0,l=0,c=0,d=0,u=0,h=0,m=0,p=0;function f(e,t,n,r,s,i,o,a){var l,c,d,u,h,m,p,f,g,v,y,_,b,w,x,M;p=a.next_in_index,f=a.avail_in,h=o.bitb,m=o.bitk,v=(g=o.write)<o.read?o.read-g-1:o.end-g,y=ub[e],_=ub[t];do{for(;m<20;)f--,h|=(255&a.read_byte(p++))<<m,m+=8;if(0!==(u=(c=n)[M=3*((d=r)+(l=h&y))]))for(;;){if(h>>=c[M+1],m-=c[M+1],0!=(16&u)){for(b=c[M+2]+(h&ub[u&=15]),h>>=u,m-=u;m<15;)f--,h|=(255&a.read_byte(p++))<<m,m+=8;for(u=(c=s)[M=3*((d=i)+(l=h&_))];;){if(h>>=c[M+1],m-=c[M+1],0!=(16&u)){for(u&=15;m<u;)f--,h|=(255&a.read_byte(p++))<<m,m+=8;if(w=c[M+2]+(h&ub[u]),h>>=u,m-=u,v-=b,g>=w)g-(x=g-w)>0&&2>g-x?(o.window[g++]=o.window[x++],o.window[g++]=o.window[x++],b-=2):(o.window.set(o.window.subarray(x,x+2),g),g+=2,x+=2,b-=2);else{x=g-w;do{x+=o.end}while(x<0);if(b>(u=o.end-x)){if(b-=u,g-x>0&&u>g-x)do{o.window[g++]=o.window[x++]}while(0!=--u);else o.window.set(o.window.subarray(x,x+u),g),g+=u,x+=u,u=0;x=0}}if(g-x>0&&b>g-x)do{o.window[g++]=o.window[x++]}while(0!=--b);else o.window.set(o.window.subarray(x,x+b),g),g+=b,x+=b,b=0;break}if(0!=(64&u))return a.msg="invalid distance code",f+=b=m>>3<(b=a.avail_in-f)?m>>3:b,p-=b,m-=b<<3,o.bitb=h,o.bitk=m,a.avail_in=f,a.total_in+=p-a.next_in_index,a.next_in_index=p,o.write=g,-3;l+=c[M+2],u=c[M=3*(d+(l+=h&ub[u]))]}break}if(0!=(64&u))return 0!=(32&u)?(f+=b=m>>3<(b=a.avail_in-f)?m>>3:b,p-=b,m-=b<<3,o.bitb=h,o.bitk=m,a.avail_in=f,a.total_in+=p-a.next_in_index,a.next_in_index=p,o.write=g,1):(a.msg="invalid literal/length code",f+=b=m>>3<(b=a.avail_in-f)?m>>3:b,p-=b,m-=b<<3,o.bitb=h,o.bitk=m,a.avail_in=f,a.total_in+=p-a.next_in_index,a.next_in_index=p,o.write=g,-3);if(l+=c[M+2],0===(u=c[M=3*(d+(l+=h&ub[u]))])){h>>=c[M+1],m-=c[M+1],o.window[g++]=c[M+2],v--;break}}else h>>=c[M+1],m-=c[M+1],o.window[g++]=c[M+2],v--}while(v>=258&&f>=10);return f+=b=m>>3<(b=a.avail_in-f)?m>>3:b,p-=b,m-=b<<3,o.bitb=h,o.bitk=m,a.avail_in=f,a.total_in+=p-a.next_in_index,a.next_in_index=p,o.write=g,0}s.init=function(s,i,o,a,l,c){e=0,u=s,h=i,n=o,m=a,r=l,p=c,t=null},s.proc=function(s,g,v){var y,_,b,w,x,M,S,T=0,C=0,E=0;for(E=g.next_in_index,w=g.avail_in,T=s.bitb,C=s.bitk,M=(x=s.write)<s.read?s.read-x-1:s.end-x;;)switch(e){case 0:if(M>=258&&w>=10&&(s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,v=f(u,h,n,m,r,p,s,g),E=g.next_in_index,w=g.avail_in,T=s.bitb,C=s.bitk,M=(x=s.write)<s.read?s.read-x-1:s.end-x,0!=v)){e=1==v?7:9;break}a=u,t=n,o=m,e=1;case 1:for(y=a;C<y;){if(0===w)return s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);v=0,w--,T|=(255&g.read_byte(E++))<<C,C+=8}if(T>>>=t[1+(_=3*(o+(T&ub[y])))],C-=t[_+1],0===(b=t[_])){l=t[_+2],e=6;break}if(0!=(16&b)){c=15&b,i=t[_+2],e=2;break}if(0==(64&b)){a=b,o=_/3+t[_+2];break}if(0!=(32&b)){e=7;break}return e=9,g.msg="invalid literal/length code",v=-3,s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);case 2:for(y=c;C<y;){if(0===w)return s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);v=0,w--,T|=(255&g.read_byte(E++))<<C,C+=8}i+=T&ub[y],T>>=y,C-=y,a=h,t=r,o=p,e=3;case 3:for(y=a;C<y;){if(0===w)return s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);v=0,w--,T|=(255&g.read_byte(E++))<<C,C+=8}if(T>>=t[1+(_=3*(o+(T&ub[y])))],C-=t[_+1],0!=(16&(b=t[_]))){c=15&b,d=t[_+2],e=4;break}if(0==(64&b)){a=b,o=_/3+t[_+2];break}return e=9,g.msg="invalid distance code",v=-3,s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);case 4:for(y=c;C<y;){if(0===w)return s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);v=0,w--,T|=(255&g.read_byte(E++))<<C,C+=8}d+=T&ub[y],T>>=y,C-=y,e=5;case 5:for(S=x-d;S<0;)S+=s.end;for(;0!==i;){if(0===M&&(x==s.end&&0!==s.read&&(M=(x=0)<s.read?s.read-x-1:s.end-x),0===M&&(s.write=x,v=s.inflate_flush(g,v),M=(x=s.write)<s.read?s.read-x-1:s.end-x,x==s.end&&0!==s.read&&(M=(x=0)<s.read?s.read-x-1:s.end-x),0===M)))return s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);s.window[x++]=s.window[S++],M--,S==s.end&&(S=0),i--}e=0;break;case 6:if(0===M&&(x==s.end&&0!==s.read&&(M=(x=0)<s.read?s.read-x-1:s.end-x),0===M&&(s.write=x,v=s.inflate_flush(g,v),M=(x=s.write)<s.read?s.read-x-1:s.end-x,x==s.end&&0!==s.read&&(M=(x=0)<s.read?s.read-x-1:s.end-x),0===M)))return s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);v=0,s.window[x++]=l,M--,e=0;break;case 7:if(C>7&&(C-=8,w++,E--),s.write=x,v=s.inflate_flush(g,v),M=(x=s.write)<s.read?s.read-x-1:s.end-x,s.read!=s.write)return s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);e=8;case 8:return v=1,s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);case 9:return v=-3,s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v);default:return v=-2,s.bitb=T,s.bitk=C,g.avail_in=w,g.total_in+=E-g.next_in_index,g.next_in_index=E,s.write=x,s.inflate_flush(g,v)}},s.free=function(){}}yb.inflate_trees_fixed=function(e,t,n,r){return e[0]=9,t[0]=5,n[0]=hb,r[0]=mb,0};var bb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function wb(e,t){var n,r=this,s=0,i=0,o=0,a=0,l=[0],c=[0],d=new _b,u=0,h=new Int32Array(4320),m=new yb;r.bitk=0,r.bitb=0,r.window=new Uint8Array(t),r.end=t,r.read=0,r.write=0,r.reset=function(e,t){t&&(t[0]=0),6==s&&d.free(e),s=0,r.bitk=0,r.bitb=0,r.read=r.write=0},r.reset(e,null),r.inflate_flush=function(e,t){var n,s,i;return s=e.next_out_index,(n=((i=r.read)<=r.write?r.write:r.end)-i)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.window.subarray(i,i+n),s),s+=n,(i+=n)==r.end&&(i=0,r.write==r.end&&(r.write=0),(n=r.write-i)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.window.subarray(i,i+n),s),s+=n,i+=n),e.next_out_index=s,r.read=i,t},r.proc=function(e,t){var p,f,g,v,y,_,b,w;for(v=e.next_in_index,y=e.avail_in,f=r.bitb,g=r.bitk,b=(_=r.write)<r.read?r.read-_-1:r.end-_;;)switch(s){case 0:for(;g<3;){if(0===y)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}switch(u=1&(p=7&f),p>>>1){case 0:f>>>=3,f>>>=p=7&(g-=3),g-=p,s=1;break;case 1:var x=[],M=[],S=[[]],T=[[]];yb.inflate_trees_fixed(x,M,S,T),d.init(x[0],M[0],S[0],0,T[0],0),f>>>=3,g-=3,s=6;break;case 2:f>>>=3,g-=3,s=3;break;case 3:return f>>>=3,g-=3,s=9,e.msg="invalid block type",t=-3,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t)}break;case 1:for(;g<32;){if(0===y)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if((~f>>>16&65535)!=(65535&f))return s=9,e.msg="invalid stored block lengths",t=-3,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);i=65535&f,f=g=0,s=0!==i?2:0!==u?7:0;break;case 2:if(0===y)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);if(0===b&&(_==r.end&&0!==r.read&&(b=(_=0)<r.read?r.read-_-1:r.end-_),0===b&&(r.write=_,t=r.inflate_flush(e,t),b=(_=r.write)<r.read?r.read-_-1:r.end-_,_==r.end&&0!==r.read&&(b=(_=0)<r.read?r.read-_-1:r.end-_),0===b)))return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);if(t=0,(p=i)>y&&(p=y),p>b&&(p=b),r.window.set(e.read_buf(v,p),_),v+=p,y-=p,_+=p,b-=p,0!=(i-=p))break;s=0!==u?7:0;break;case 3:for(;g<14;){if(0===y)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if(o=p=16383&f,(31&p)>29||(p>>5&31)>29)return s=9,e.msg="too many length or distance symbols",t=-3,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);if(p=258+(31&p)+(p>>5&31),!n||n.length<p)n=[];else for(w=0;w<p;w++)n[w]=0;f>>>=14,g-=14,a=0,s=4;case 4:for(;a<4+(o>>>10);){for(;g<3;){if(0===y)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}n[bb[a++]]=7&f,f>>>=3,g-=3}for(;a<19;)n[bb[a++]]=0;if(l[0]=7,0!=(p=m.inflate_trees_bits(n,l,c,h,e)))return-3==(t=p)&&(n=null,s=9),r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);a=0,s=5;case 5:for(;!(a>=258+(31&(p=o))+(p>>5&31));){var C,E;for(p=l[0];g<p;){if(0===y)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if((E=h[3*(c[0]+(f&ub[p=h[3*(c[0]+(f&ub[p]))+1]]))+2])<16)f>>>=p,g-=p,n[a++]=E;else{for(w=18==E?7:E-14,C=18==E?11:3;g<p+w;){if(0===y)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if(g-=p,C+=(f>>>=p)&ub[w],f>>>=w,g-=w,(w=a)+C>258+(31&(p=o))+(p>>5&31)||16==E&&w<1)return n=null,s=9,e.msg="invalid bit length repeat",t=-3,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);E=16==E?n[w-1]:0;do{n[w++]=E}while(0!=--C);a=w}}c[0]=-1;var k=[],L=[],A=[],D=[];if(k[0]=9,L[0]=6,0!=(p=m.inflate_trees_dynamic(257+(31&(p=o)),1+(p>>5&31),n,k,L,A,D,h,e)))return-3==p&&(n=null,s=9),t=p,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);d.init(k[0],L[0],h,A[0],h,D[0]),s=6;case 6:if(r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,1!=(t=d.proc(r,e,t)))return r.inflate_flush(e,t);if(t=0,d.free(e),v=e.next_in_index,y=e.avail_in,f=r.bitb,g=r.bitk,b=(_=r.write)<r.read?r.read-_-1:r.end-_,0===u){s=0;break}s=7;case 7:if(r.write=_,t=r.inflate_flush(e,t),b=(_=r.write)<r.read?r.read-_-1:r.end-_,r.read!=r.write)return r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);s=8;case 8:return t=1,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);case 9:return t=-3,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t);default:return t=-2,r.bitb=f,r.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,r.write=_,r.inflate_flush(e,t)}},r.free=function(e){r.reset(e,null),r.window=null,h=null},r.set_dictionary=function(e,t,n){r.window.set(e.subarray(t,t+n),0),r.read=r.write=n},r.sync_point=function(){return 1==s?1:0}}var xb=[0,0,255,255];function Mb(){var e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):-2}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,0},e.inflateInit=function(n,r){return n.msg=null,e.blocks=null,r<8||r>15?(e.inflateEnd(n),-2):(e.wbits=r,n.istate.blocks=new wb(n,1<<r),t(n),0)},e.inflate=function(e,t){var n,r;if(!e||!e.istate||!e.next_in)return-2;for(t=4==t?-5:0,n=-5;;)switch(e.istate.mode){case 0:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.read_byte(e.next_in_index++)))){e.istate.mode=13,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=13,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,r=255&e.read_byte(e.next_in_index++),((e.istate.method<<8)+r)%31!=0){e.istate.mode=13,e.msg="incorrect header check",e.istate.marker=5;break}if(0==(32&r)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,e.istate.mode=3;case 3:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,e.istate.mode=4;case 4:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,e.istate.mode=5;case 5:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.read_byte(e.next_in_index++),e.istate.mode=6,2);case 6:return e.istate.mode=13,e.msg="need dictionary",e.istate.marker=0,-2;case 7:if(-3==(n=e.istate.blocks.proc(e,n))){e.istate.mode=13,e.istate.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,e.istate.blocks.reset(e,e.istate.was),e.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}},e.inflateSetDictionary=function(e,t,n){var r=0,s=n;return e&&e.istate&&6==e.istate.mode?(s>=1<<e.istate.wbits&&(r=n-(s=(1<<e.istate.wbits)-1)),e.istate.blocks.set_dictionary(t,r,s),e.istate.mode=7,0):-2},e.inflateSync=function(e){var n,r,s,i,o;if(!e||!e.istate)return-2;if(13!=e.istate.mode&&(e.istate.mode=13,e.istate.marker=0),0===(n=e.avail_in))return-5;for(r=e.next_in_index,s=e.istate.marker;0!==n&&s<4;)e.read_byte(r)==xb[s]?s++:s=0!==e.read_byte(r)?0:4-s,r++,n--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=n,e.istate.marker=s,4!=s?-3:(i=e.total_in,o=e.total_out,t(e),e.total_in=i,e.total_out=o,e.istate.mode=7,0)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():-2}}function Sb(){}function Tb(){var e=new Sb,t=new Uint8Array(512),n=!1;e.inflateInit(),e.next_out=t,this.append=function(r,s){var i,o,a=[],l=0,c=0,d=0;if(0!==r.length){e.next_in_index=0,e.next_in=r,e.avail_in=r.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.avail_in||n||(e.next_in_index=0,n=!0),i=e.inflate(0),n&&-5===i){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==i&&1!==i)throw new Error("inflating: "+e.msg);if((n||1===i)&&e.avail_in===r.length)throw new Error("inflating: bad input");e.next_out_index&&a.push(512===e.next_out_index?new Uint8Array(t):new Uint8Array(t.subarray(0,e.next_out_index))),d+=e.next_out_index,s&&e.next_in_index>0&&e.next_in_index!=l&&(s(e.next_in_index),l=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return o=new Uint8Array(d),a.forEach((function(e){o.set(e,c),c+=e.length})),o}},this.flush=function(){e.inflateEnd()}}Sb.prototype={inflateInit:function(e){var t=this;return t.istate=new Mb,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){var t=this;return t.istate?t.istate.inflate(t,e):-2},inflateEnd:function(){var e=this;if(!e.istate)return-2;var t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){var e=this;return e.istate?e.istate.inflateSync(e):-2},inflateSetDictionary:function(e,t){var n=this;return n.istate?n.istate.inflateSetDictionary(n,e,t):-2},read_byte:function(e){return this.next_in.subarray(e,e+1)[0]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}},self._zipjs_Inflater=Tb;var Cb,Eb="File format is not recognized.",kb="Error while reading zip file.";try{Cb=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(P_){}function Lb(){this.crc=-1}function Ab(){}function Db(e,t){var n,r;return n=new ArrayBuffer(e),r=new Uint8Array(n),t&&r.set(t,0),{buffer:n,array:r,view:new DataView(n)}}function Ob(){}function Rb(e){var t,n=this;n.size=0,n.init=function(r,s){var i=new Blob([e],{type:"text/plain"});(t=new Nb(i)).init((function(){n.size=t.size,r()}),s)},n.readUint8Array=function(e,n,r,s){t.readUint8Array(e,n,r,s)}}function Pb(e){var t,n=this;n.size=0,n.init=function(r){for(var s=e.length;"="==e.charAt(s-1);)s--;t=e.indexOf(",")+1,n.size=Math.floor(.75*(s-t)),r()},n.readUint8Array=function(n,r,s){var i,o=Db(r),a=4*Math.floor(n/3),l=4*Math.ceil((n+r)/3),c=self.atob(e.substring(a+t,l+t)),d=n-3*Math.floor(a/4);for(i=d;i<d+r;i++)o.array[i-d]=c.charCodeAt(i);s(o.array)}}function Nb(e){var t=this;t.size=0,t.init=function(n){t.size=e.size,n()},t.readUint8Array=function(t,n,r,s){var i=new FileReader;i.onload=function(e){r(new Uint8Array(e.target.result))},i.onerror=s;try{i.readAsArrayBuffer(function(e,t,n){if(t<0||n<0||t+n>e.size)throw new RangeError("offset:"+t+", length:"+n+", size:"+e.size);return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):e.mozSlice?e.mozSlice(t,t+n):e.msSlice?e.msSlice(t,t+n):void 0}(e,t,n))}catch(e){s(e)}}}function Ib(){}function zb(e){var t,n=this;n.init=function(e){t=new Blob([],{type:"text/plain"}),e()},n.writeUint8Array=function(e,n){t=new Blob([t,Cb?e:e.buffer],{type:"text/plain"}),n()},n.getData=function(n,r){var s=new FileReader;s.onload=function(e){n(e.target.result)},s.onerror=r,s.readAsText(t,e)}}function Bb(e){var t=this,n="",r="";t.init=function(t){n+="data:"+(e||"")+";base64,",t()},t.writeUint8Array=function(e,t){var s,i=r.length,o=r;for(r="",s=0;s<3*Math.floor((i+e.length)/3)-i;s++)o+=String.fromCharCode(e[s]);for(;s<e.length;s++)r+=String.fromCharCode(e[s]);o.length>2?n+=self.btoa(o):r=o,t()},t.getData=function(e){e(n+self.btoa(r))}}function Fb(e){var t,n=this;n.init=function(n){t=new Blob([],{type:e}),n()},n.writeUint8Array=function(n,r){t=new Blob([t,Cb?n:n.buffer],{type:e}),r()},n.getData=function(e){e(t)}}function Hb(e,t,n,r,s,i,o,a,l,c){var d,u,h,m=0,p=t.sn;function f(){e.removeEventListener("message",g,!1),a(u,h)}function g(t){var n=t.data,s=n.data,a=n.error;if(a)return a.toString=function(){return"Error: "+this.message},void l(a);if(n.sn===p)switch("number"==typeof n.codecTime&&(e.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(e.crcTime+=n.crcTime),n.type){case"append":s?(u+=s.length,r.writeUint8Array(s,(function(){v()}),c)):v();break;case"flush":h=n.crc,s?(u+=s.length,r.writeUint8Array(s,(function(){f()}),c)):f();break;case"progress":o&&o(d+n.loaded,i);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function v(){(d=524288*m)<=i?n.readUint8Array(s+d,Math.min(524288,i-d),(function(n){o&&o(d,i);var r=0===d?t:{sn:p};r.type="append",r.data=n;try{e.postMessage(r,[n.buffer])}catch(t){e.postMessage(r)}m++}),l):e.postMessage({sn:p,type:"flush"})}u=0,e.addEventListener("message",g,!1),v()}function jb(e,t,n,r,s,i,o,a,l,c){var d,u=0,h=0,m="input"===i,p="output"===i,f=new Lb;!function i(){var g;if((d=524288*u)<s)t.readUint8Array(r+d,Math.min(524288,s-d),(function(t){var r;try{r=e.append(t,(function(e){o&&o(d+e,s)}))}catch(e){return void l(e)}r?(h+=r.length,n.writeUint8Array(r,(function(){u++,setTimeout(i,1)}),c),p&&f.append(r)):(u++,setTimeout(i,1)),m&&f.append(t),o&&o(d,s)}),l);else{try{g=e.flush()}catch(e){return void l(e)}g?(p&&f.append(g),h+=g.length,n.writeUint8Array(g,(function(){a(h,f.get())}),c)):a(h,f.get())}}()}function Ub(e,t,n,r,s,i,o,a,l,c,d){var u="input";Zb.useWebWorkers&&o?Hb(e,{sn:t,codecClass:"_zipjs_NOOP",crcType:u},n,r,s,i,l,a,c,d):jb(new Ab,n,r,s,i,u,l,a,c,d)}function Yb(e){var t,n,r="",s=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(t=0;t<e.length;t++)r+=(n=255&e.charCodeAt(t))>127?s[n-128]:String.fromCharCode(n);return r}function Vb(e){return decodeURIComponent(escape(e))}function $b(e){var t,n="";for(t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n}function Wb(e,t,n,r,s){e.version=t.view.getUint16(n,!0),e.bitFlag=t.view.getUint16(n+2,!0),e.compressionMethod=t.view.getUint16(n+4,!0),e.lastModDateRaw=t.view.getUint32(n+6,!0),e.lastModDate=function(e){var t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}(e.lastModDateRaw),1!=(1&e.bitFlag)?((r||8!=(8&e.bitFlag))&&(e.crc32=t.view.getUint32(n+10,!0),e.compressedSize=t.view.getUint32(n+14,!0),e.uncompressedSize=t.view.getUint32(n+18,!0)),4294967295!==e.compressedSize&&4294967295!==e.uncompressedSize?(e.filenameLength=t.view.getUint16(n+22,!0),e.extraFieldLength=t.view.getUint16(n+24,!0)):s("File is using Zip64 (4gb+ file size).")):s("File contains encrypted entry.")}function Gb(e){return unescape(encodeURIComponent(e))}function qb(e){var t,n=[];for(t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}Lb.prototype.append=function(e){for(var t=0|this.crc,n=this.table,r=0,s=0|e.length;r<s;r++)t=t>>>8^n[255&(t^e[r])];this.crc=t},Lb.prototype.get=function(){return~this.crc},Lb.prototype.table=function(){var e,t,n,r=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;r[e]=n}return r}(),Ab.prototype.append=function(e,t){return e},Ab.prototype.flush=function(){},(Rb.prototype=new Ob).constructor=Rb,(Pb.prototype=new Ob).constructor=Pb,(Nb.prototype=new Ob).constructor=Nb,Ib.prototype.getData=function(e){e(this.data)},(zb.prototype=new Ib).constructor=zb,(Bb.prototype=new Ib).constructor=Bb,(Fb.prototype=new Ib).constructor=Fb;var Xb={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function Kb(e,t,n){if(null===Zb.workerScripts||null===Zb.workerScriptsPath){var r,s,i;if(Zb.workerScripts){if(r=Zb.workerScripts[e],!Array.isArray(r))return void n(new Error("zip.workerScripts."+e+" is not an array!"));s=r,i=document.createElement("a"),r=s.map((function(e){return i.href=e,i.href}))}else(r=Xb[e].slice(0))[0]=(Zb.workerScriptsPath||"")+r[0];var o=new Worker(r[0]);o.codecTime=o.crcTime=0,o.postMessage({type:"importScripts",scripts:r.slice(1)}),o.addEventListener("message",(function e(r){var s=r.data;if(s.error)return o.terminate(),void n(s.error);"importScripts"===s.type&&(o.removeEventListener("message",e),o.removeEventListener("error",a),t(o))})),o.addEventListener("error",a)}else n(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function a(e){o.terminate(),n(e)}}function Jb(e){console.error(e)}const Zb={Reader:Ob,Writer:Ib,BlobReader:Nb,Data64URIReader:Pb,TextReader:Rb,BlobWriter:Fb,Data64URIWriter:Bb,TextWriter:zb,createReader:function(e,t,n){e.init((function(){!function(e,t,n){var r=0;function s(){}s.prototype.getData=function(t,s,i,o){var a=this;function l(e,r){o&&!function(e){var t=Db(4);return t.view.setUint32(0,e),a.crc32==t.view.getUint32(0)}(r)?n("CRC failed."):t.getData((function(e){s(e)}))}function c(e){n(e||"Error while reading file data.")}function d(e){n(e||"Error while writing file data.")}e.readUint8Array(a.offset,30,(function(s){var u,h=Db(s.length,s);1347093252==h.view.getUint32(0)?(Wb(a,h,4,!1,n),u=a.offset+30+a.filenameLength+a.extraFieldLength,t.init((function(){0===a.compressionMethod?Ub(a._worker,r++,e,t,u,a.compressedSize,o,l,i,c,d):function(e,t,n,r,s,i,o,a,l,c,d){var u=o?"output":"none";Zb.useWebWorkers?Hb(e,{sn:t,codecClass:"_zipjs_Inflater",crcType:u},n,r,s,i,l,a,c,d):jb(new Tb,n,r,s,i,u,l,a,c,d)}(a._worker,r++,e,t,u,a.compressedSize,o,l,i,c,d)}),d)):n(Eb)}),c)};var i={getEntries:function(t){var r=this._worker;!function(t){function r(r,s){e.readUint8Array(e.size-r,r,(function(e){for(var n=e.length-22;n>=0;n--)if(80===e[n]&&75===e[n+1]&&5===e[n+2]&&6===e[n+3])return void t(new DataView(e.buffer,n,22));s()}),(function(){n(kb)}))}e.size<22?n(Eb):r(22,(function(){r(Math.min(65558,e.size),(function(){n(Eb)}))}))}((function(i){var o,a;o=i.getUint32(16,!0),a=i.getUint16(8,!0),o<0||o>=e.size?n(Eb):e.readUint8Array(o,e.size-o,(function(e){var i,o,l,c,d=0,u=[],h=Db(e.length,e);for(i=0;i<a;i++){if((o=new s)._worker=r,1347092738!=h.view.getUint32(d))return void n(Eb);Wb(o,h,d+6,!0,n),o.commentLength=h.view.getUint16(d+32,!0),o.directory=16==(16&h.view.getUint8(d+38)),o.offset=h.view.getUint32(d+42,!0),l=$b(h.array.subarray(d+46,d+46+o.filenameLength)),o.filename=2048==(2048&o.bitFlag)?Vb(l):Yb(l),o.directory||"/"!=o.filename.charAt(o.filename.length-1)||(o.directory=!0),c=$b(h.array.subarray(d+46+o.filenameLength+o.extraFieldLength,d+46+o.filenameLength+o.extraFieldLength+o.commentLength)),o.comment=2048==(2048&o.bitFlag)?Vb(c):Yb(c),u.push(o),d+=46+o.filenameLength+o.extraFieldLength+o.commentLength}t(u)}),(function(){n(kb)}))}))},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};Zb.useWebWorkers?Kb("inflater",(function(e){i._worker=e,t(i)}),(function(e){n(e)})):t(i)}(e,t,n)}),n=n||Jb)},createWriter:function(e,t,n,r){r=!!r,e.init((function(){!function(e,t,n,r){var s={},i=[],o=0,a=0;function l(e){n(e||"Error while writing zip file.")}function c(e){n(e||"Error while reading file data.")}var d={add:function(t,d,u,h,m){var p,f,g,v=this._worker;function y(t,n){var r=Db(16);o+=t||0,r.view.setUint32(0,1347094280),void 0!==n&&(p.view.setUint32(10,n,!0),r.view.setUint32(4,n,!0)),d&&(r.view.setUint32(8,t,!0),p.view.setUint32(14,t,!0),r.view.setUint32(12,d.size,!0),p.view.setUint32(18,d.size,!0)),e.writeUint8Array(r.array,(function(){o+=16,u()}),l)}function _(){var u;m=m||{},t=t.trim(),m.directory&&"/"!=t.charAt(t.length-1)&&(t+="/"),s.hasOwnProperty(t)?n("File already exists."):(f=qb(Gb(t)),i.push(t),g=m.lastModDate||new Date,p=Db(26),s[t]={headerArray:p.array,directory:m.directory,filename:f,offset:o,comment:qb(Gb(m.comment||""))},p.view.setUint32(0,335546376),m.version&&p.view.setUint8(0,m.version),r||0===m.level||m.directory||p.view.setUint16(4,2048),p.view.setUint16(6,(g.getHours()<<6|g.getMinutes())<<5|g.getSeconds()/2,!0),p.view.setUint16(8,(g.getFullYear()-1980<<4|g.getMonth()+1)<<5|g.getDate(),!0),p.view.setUint16(22,f.length,!0),(u=Db(30+f.length)).view.setUint32(0,1347093252),u.array.set(p.array,4),u.array.set(f,30),o+=u.array.length,e.writeUint8Array(u.array,(function(){d?r||0===m.level?Ub(v,a++,d,e,0,d.size,!0,y,h,c,l):function(e,t,n,r,s,i,o,a,l){var c="input";Zb.useWebWorkers?Hb(e,{sn:t,options:{level:s},codecClass:"_zipjs_Deflater",crcType:c},n,r,0,n.size,o,i,a,l):jb(new db,n,r,0,n.size,c,o,i,a,l)}(v,a++,d,e,m.level,y,h,c,l):y()}),l))}d?d.init(_,c):_()},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null);var n,r,a,c=0,d=0;for(r=0;r<i.length;r++)c+=46+(a=s[i[r]]).filename.length+a.comment.length;for(n=Db(c+22),r=0;r<i.length;r++)a=s[i[r]],n.view.setUint32(d,1347092738),n.view.setUint16(d+4,5120),n.array.set(a.headerArray,d+6),n.view.setUint16(d+32,a.comment.length,!0),a.directory&&n.view.setUint8(d+38,16),n.view.setUint32(d+42,a.offset,!0),n.array.set(a.filename,d+46),n.array.set(a.comment,d+46+a.filename.length),d+=46+a.filename.length+a.comment.length;n.view.setUint32(d,1347093766),n.view.setUint16(d+8,i.length,!0),n.view.setUint16(d+10,i.length,!0),n.view.setUint32(d+12,c,!0),n.view.setUint32(d+16,o,!0),e.writeUint8Array(n.array,(function(){e.getData(t)}),l)},_worker:null};Zb.useWebWorkers?Kb("deflater",(function(e){d._worker=e,t(d)}),(function(e){n(e)})):t(d)}(e,t,n,r)}),n=n||Jb)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null};var Qb,ew,tw=Zb.TextWriter,nw=Zb.BlobWriter,rw=Zb.Data64URIWriter,sw=Zb.TextReader,iw=Zb.BlobReader,ow=Zb.Data64URIReader,aw=Zb.createReader,lw=Zb.createWriter;function cw(e){var t,n=this;n.size=0,n.init=function(t){n.size=e.uncompressedSize,t()},n.readUint8Array=function(r,s,i,o){!function(r){n.data?r():e.getData(new nw,(function(e){n.data=e,t=new iw(e),r()}),null,n.checkCrc32)}((function(){t.readUint8Array(r,s,i,o)}))}}function dw(e){var t=0;return function e(n){t+=n.uncompressedSize||0,n.children.forEach(e)}(e),t}function uw(e,t,n){var r=0;function s(){++r<e.children.length?i(e.children[r]):t()}function i(e){e.directory?uw(e,s,n):(e.reader=new e.Reader(e.data,n),e.reader.init((function(){e.uncompressedSize=e.reader.size,s()})))}e.children.length?i(e.children[r]):t()}function hw(e){var t=e.parent.children;t.forEach((function(n,r){n.id==e.id&&t.splice(r,1)}))}function mw(e){e.entries=[],e.root=new vw(e)}function pw(e,t,n,r){if(e.directory)return r?new vw(e.fs,t,n,e):new gw(e.fs,t,n,e);throw"Parent entry is not a directory."}function fw(){}function gw(e,t,n,r){var s=this;fw.prototype.init.call(s,e,t,n,r),s.Reader=n.Reader,s.Writer=n.Writer,s.data=n.data,n.getData&&(s.getData=n.getData)}function vw(e,t,n,r){fw.prototype.init.call(this,e,t,n,r),this.directory=!0}function yw(){mw(this)}(cw.prototype=new(0,Zb.Reader)).constructor=cw,cw.prototype.checkCrc32=!1,(fw.prototype={init:function(e,t,n,r){var s=this;if(e.root&&r&&r.getChildByName(t))throw"Entry filename already exists.";n||(n={}),s.fs=e,s.name=t,s.id=e.entries.length,s.parent=r,s.children=[],s.zipVersion=n.zipVersion||20,s.uncompressedSize=0,e.entries.push(s),r&&s.parent.children.push(s)},getFileEntry:function(e,t,n,r,s){var i=this;uw(i,(function(){!function(e,t,n,r,s,i,o){var a=0;t.directory?function e(t,n,r,s,i,l){var c=0;!function d(){var u=n.children[c];u?function(n){function r(t){a+=n.uncompressedSize||0,e(t,n,(function(){c++,d()}),s,i,l)}n.directory?t.getDirectory(n.name,{create:!0},r,i):t.getFile(n.name,{create:!0},(function(e){n.getData(new Zb.FileWriter(e,Zb.getMimeType(n.name)),r,(function(e){s&&s(a+e,l)}),o)}),i)}(u):r()}()}(e,t,n,r,s,i):t.getData(new Zb.FileWriter(e,Zb.getMimeType(t.name)),n,r,o)}(e,i,t,n,r,dw(i),s)}),r)},moveTo:function(e){var t=this;if(!e.directory)throw"Target entry is not a directory.";if(e.isDescendantOf(t))throw"Entry is a ancestor of target entry.";if(t!=e){if(e.getChildByName(t.name))throw"Entry filename already exists.";hw(t),t.parent=e,e.children.push(t)}},getFullname:function(){for(var e=this.name,t=this.parent;t;)e=(t.name?t.name+"/":"")+e,t=t.parent;return e},isDescendantOf:function(e){for(var t=this.parent;t&&t.id!=e.id;)t=t.parent;return!!t}}).constructor=fw,gw.prototype=Qb=new fw,Qb.constructor=gw,Qb.getData=function(e,t,n,r){var s=this;!e||e.constructor==s.Writer&&s.data?t(s.data):(s.reader||(s.reader=new s.Reader(s.data,r)),s.reader.init((function(){e.init((function(){!function(e,t,n,r,s){var i=0;!function o(){var a=524288*i;r&&r(a,e.size),a<e.size?e.readUint8Array(a,Math.min(524288,e.size-a),(function(e){t.writeUint8Array(new Uint8Array(e),(function(){i++,o()}))}),s):t.getData(n)}()}(s.reader,e,t,n,r)}),r)})))},Qb.getText=function(e,t,n,r){this.getData(new tw(r),e,t,n)},Qb.getBlob=function(e,t,n,r){this.getData(new nw(e),t,n,r)},Qb.getData64URI=function(e,t,n,r){this.getData(new rw(e),t,n,r)},vw.prototype=ew=new fw,ew.constructor=vw,ew.addDirectory=function(e){return pw(this,e,null,!0)},ew.addText=function(e,t){return pw(this,e,{data:t,Reader:sw,Writer:tw})},ew.addBlob=function(e,t){return pw(this,e,{data:t,Reader:iw,Writer:nw})},ew.addData64URI=function(e,t){return pw(this,e,{data:t,Reader:ow,Writer:rw})},ew.addFileEntry=function(e,t,n){!function(e,t,n,r){t.isDirectory?function e(t,n,s){!function(e,t){e.isDirectory&&e.createReader().readEntries(t),e.isFile&&t([])}(n,(function(n){var i=0;!function o(){var a=n[i];a?function(n){function s(t){e(t,n,(function(){i++,o()}))}n.isDirectory&&s(t.addDirectory(n.name)),n.isFile&&n.file((function(e){var r=t.addBlob(n.name,e);r.uncompressedSize=e.size,s(r)}),r)}(a):s()}()}))}(e,t,n):t.file((function(r){e.addBlob(t.name,r),n()}),r)}(this,e,t,n)},ew.addData=function(e,t){return pw(this,e,t)},ew.importBlob=function(e,t,n){this.importZip(new iw(e),t,n)},ew.importText=function(e,t,n){this.importZip(new sw(e),t,n)},ew.importData64URI=function(e,t,n){this.importZip(new ow(e),t,n)},ew.exportBlob=function(e,t,n){this.exportZip(new nw("application/zip"),e,t,n)},ew.exportText=function(e,t,n){this.exportZip(new tw,e,t,n)},ew.exportFileEntry=function(e,t,n,r){this.exportZip(new Zb.FileWriter(e,"application/zip"),t,n,r)},ew.exportData64URI=function(e,t,n){this.exportZip(new rw("application/zip"),e,t,n)},ew.importZip=function(e,t,n){var r=this;aw(e,(function(e){e.getEntries((function(e){e.forEach((function(e){var t=r,n=e.filename.split("/"),s=n.pop();n.forEach((function(e){t=t.getChildByName(e)||new vw(r.fs,e,null,t)})),e.directory||pw(t,s,{data:e,Reader:cw})})),t()}))}),n)},ew.exportZip=function(e,t,n,r){var s=this;uw(s,(function(){lw(e,(function(e){!function(e,t,n,r,s){var i=0;!function e(t,n,r,s,o){var a=0;!function l(){var c=n.children[a];c?t.add(c.getFullname(),c.reader,(function(){i+=c.uncompressedSize||0,e(t,c,(function(){a++,l()}),s,o)}),(function(e){s&&s(i+e,o)}),{directory:c.directory,version:c.zipVersion}):r()}()}(e,t,n,r,s)}(e,s,(function(){e.close(t)}),n,dw(s))}),r)}),r)},ew.getChildByName=function(e){var t,n;for(t=0;t<this.children.length;t++)if((n=this.children[t]).name==e)return n},yw.prototype={remove:function(e){hw(e),this.entries[e.id]=null},find:function(e){var t,n=e.split("/"),r=this.root;for(t=0;r&&t<n.length;t++)r=r.getChildByName(n[t]);return r},getById:function(e){return this.entries[e]},importBlob:function(e,t,n){mw(this),this.root.importBlob(e,t,n)},importText:function(e,t,n){mw(this),this.root.importText(e,t,n)},importData64URI:function(e,t,n){mw(this),this.root.importData64URI(e,t,n)},exportBlob:function(e,t,n){this.root.exportBlob(e,t,n)},exportText:function(e,t,n){this.root.exportText(e,t,n)},exportFileEntry:function(e,t,n,r){this.root.exportFileEntry(e,t,n,r)},exportData64URI:function(e,t,n){this.root.exportData64URI(e,t,n)}},Zb.getMimeType=function(){return"application/octet-stream"};var _w={FS:yw,ZipDirectoryEntry:vw,ZipFileEntry:gw};Zb.useWebWorkers=!1;var bw=function(){function e(e,t){this.el=e,this.inputEl=t,this.listeners={drop:[],dropstart:[],droperror:[]},this._onDragover=this._onDragover.bind(this),this._onDrop=this._onDrop.bind(this),this._onSelect=this._onSelect.bind(this),e.addEventListener("dragover",this._onDragover,!1),e.addEventListener("drop",this._onDrop,!1),t.addEventListener("change",this._onSelect)}var t=e.prototype;return t.on=function(e,t){return this.listeners[e].push(t),this},t._emit=function(e,t){return this.listeners[e].forEach((function(e){return e(t)})),this},t.destroy=function(){var e=this.el,t=this.inputEl;e.removeEventListener("dragover",this._onDragover,!1),e.removeEventListener("drop",this._onDrop,!1),t.removeEventListener("change",this._onSelect),delete this.el,delete this.inputEl,delete this.listeners},t._onDrop=function(e){e.stopPropagation(),e.preventDefault(),this._emit("dropstart");var t=Array.from(e.dataTransfer.files||[]),n=Array.from(e.dataTransfer.items||[]);if(0!==t.length||0!==n.length)if(n.length>0){var r=n.map((function(e){return e.webkitGetAsEntry()}));r[0].name.match(/\.zip$/)?this._loadZip(n[0].getAsFile()):this._loadNextEntry(new Map,r)}else 1===t.length&&t[0].name.match(/\.zip$/)&&this._loadZip(t[0]),this._emit("drop",{files:new Map(t.map((function(e){return[e.name,e]})))});else this._fail("Required drag-and-drop APIs are not supported in this browser.")},t._onDragover=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},t._onSelect=function(e){this._emit("dropstart");var t=[].slice.call(this.inputEl.files);if(1===t.length&&this._isZip(t[0]))this._loadZip(t[0]);else{var n=new Map;t.forEach((function(e){return n.set(e.webkitRelativePath||e.name,e)})),this._emit("drop",{files:n})}},t._loadNextEntry=function(e,t){var n=this,r=t.pop();if(r)if(r.isFile)r.file((function(s){e.set(r.fullPath,s),n._loadNextEntry(e,t)}),(function(){return console.error("Could not load file: %s",r.fullPath)}));else if(r.isDirectory){var s=r.createReader();s.readEntries((function r(i){i.length?(t=t.concat(i),s.readEntries(r)):n._loadNextEntry(e,t)}))}else console.warn("Unknown asset type: "+r.fullPath),this._loadNextEntry(e,t);else this._emit("drop",{files:e})},t._loadZip=function(e){var t=this,n=[],r=new Map,s=new _w.FS,i=function e(t){t.directory?t.children.forEach(e):"."!==t.name[0]&&n.push(new Promise((function(e){t.getData(new Zb.BlobWriter,(function(n){n.name=t.name,r.set(t.getFullname(),n),e()}))})))};s.importBlob(e,(function(){i(s.root),Promise.all(n).then((function(){t._emit("drop",{files:r,archive:e})}))}))},t._isZip=function(e){return"application/zip"===e.type||e.name.match(/\.zip$/)},t._fail=function(e){this._emit("droperror",{message:e})},e}();function ww(e){return"/"===e.charAt(0)}function xw(e,t){for(var n=t,r=n+1,s=e.length;r<s;n+=1,r+=1)e[n]=e[r];e.pop()}const Mw=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],s=t&&t.split("/")||[],i=e&&ww(e),o=t&&ww(t),a=i||o;if(e&&ww(e)?s=r:r.length&&(s.pop(),s=s.concat(r)),!s.length)return"/";if(s.length){var l=s[s.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,d=s.length;d>=0;d--){var u=s[d];"."===u?xw(s,d):".."===u?(xw(s,d),c++):c&&(xw(s,d),c--)}if(!a)for(;c--;c)s.unshift("..");!a||""===s[0]||s[0]&&ww(s[0])||s.unshift("");var h=s.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};var Sw=n(4139);const Tw=function(e){if(e.elements){const t={},n=[];e.elements.forEach((e=>{Tw(e),"element"===e.type&&e.name?t[e.name]=e:"text"===e.type&&n.push(e.text)})),e.dict=t,e.texts=n}return e},Cw=function(e){return e.replace(/^[^:]+:/,"")};class Ew{constructor(e){this.rootUrl=e||window.location.href}set rootUrl(e){this._rootUrl=e,this._rootPath=new URL(e).pathname}get rootUrl(){return this._rootUrl}get rootPath(){return this._rootPath}get(e,t){e="object"==typeof e?e.path:e;const n=Mw(e,this.rootUrl),r={headers:{"Content-Type":"text/xml"},method:"PROPFIND"};t||(r.headers.Depth="1");const s=new AbortController,i=setTimeout((()=>s.abort()),8e3);return r.signal=s.signal,fetch(n,r).then((e=>{if(!e.ok)throw new Error(`failed to get content: ${e.status} ${e.statusText}`);return clearTimeout(i),e.text()})).then((e=>Sw.xml2js(e,{elementNameFn:Cw}))).then((e=>Tw(e.elements[0]))).then((e=>this.parseMultistatus(e)))}create(e,t){e="object"==typeof e?e.path:e;let n=Mw(e,this.rootUrl);n=Mw(t,n);return fetch(n,{headers:{"Content-Type":"text/xml"},method:"MKCOL"}).then((e=>{if(!e.ok)throw new Error(`failed to create folder: ${e.status} ${e.statusText}`)}))}delete(e){e="object"==typeof e?e.path:e;const t=Mw(e,this.rootUrl);return fetch(t,{headers:{"Content-Type":"text/xml"},method:"DELETE"}).then((e=>{if(!e.ok)throw new Error(`failed to delete: ${e.status} ${e.statusText}`)}))}rename(e,t){const n=(e="object"==typeof e?e.path:e).split("/");n.pop();const r=n.join("/")+"/"+t;return this.move(e,r)}move(e,t){e="object"==typeof e?e.path:e,t="object"==typeof t?t.path:t;const n={headers:{"Content-Type":"text/xml",Destination:encodeURI(Mw(t,this.rootUrl)),Overwrite:"F"},method:"MOVE"},r=encodeURI(Mw(e,this.rootUrl));return fetch(r,n).then((e=>{if(!e.ok)throw new Error(`failed to move/rename: ${e.status} ${e.statusText}`)}))}exists(e){return this.get(e,!1).then((()=>!0)).catch((()=>!1))}parseMultistatus(e){return"multistatus"!==e.name?null:e.elements.filter((e=>"response"===e.name)).map((e=>this.parseResponse(e)))}parseResponse(e){const t=e.dict.propstat.dict.prop,n=t.dict.resourcetype,r=!(!n||!n.elements)&&!!n.dict.collection,s=t.dict.getcontentlength,i=t.dict.getcontenttype,o={url:decodeURI(e.dict.href.elements[0].text),name:decodeURI(t.dict.displayname.elements?t.dict.displayname.elements[0].text:""),created:t.dict.creationdate.elements[0].text,modified:t.dict.getlastmodified.elements[0].text,folder:r,size:s?s.elements[0].text:0,type:i?i.elements[0].text:""};let a=new URL(o.url,this._rootUrl).pathname;const l=a.indexOf(this._rootPath);return l>=0&&(a=a.substr(l+this._rootPath.length)),o.path=a,o}}class kw extends W{constructor(e,t){super(e,t),this._provider=null,this._assetsByPath={},this._rootAsset=null,this._selection=new Set,this._provider=new Ew}get root(){return this._rootAsset}set root(e){this._rootAsset=e}get rootPath(){return this._provider.rootPath}get rootUrl(){return this._provider.rootUrl}set rootUrl(e){this._provider.rootUrl=e,this.refresh().then((()=>this.rootUrlChanged()))}get selectedAssets(){return Array.from(this._selection.values())}uploadFiles(e,t){const n=Array.from(e).map((e=>{const n=Mw(t.info.path+e.name,this.rootUrl);return fetch(n,{method:"PUT",credentials:"include",body:e})}));return Promise.all(n).then((()=>this.refresh()))}createFolder(e,t){return this._provider.create(e.info,t).then((()=>this.refresh()))}rename(e,t){return this._provider.rename(e.info,t).then((()=>this.refresh()))}exists(e){return this._provider.exists("object"==typeof e?e.info:e)}open(e){this.emit({type:"asset-open",asset:e})}delete(e){return this._provider.delete(e.info).then((()=>this.refresh()))}deleteSelected(){const e=Array.from(this._selection.values()).map((e=>this._provider.delete(e.info)));return Promise.all(e).then((()=>this.refresh()))}moveSelected(e){const t=Array.from(this._selection.values()).map((t=>this._provider.move(t.info,e.info.path+t.info.name)));return Promise.all(t).then((()=>this.refresh()))}select(e,t){const n=this._selection;t&&n.has(e)?n.delete(e):(t||n.clear(),e&&n.add(e)),this.emit({type:"tree-change",root:this._rootAsset})}isSelected(e){return this._selection.has(e)}getAssetURL(e){return Mw(e,this.rootUrl)}getAssetByPath(e){return this._assetsByPath[e]}refresh(){return this._provider.get(".",!0).then((e=>{this._rootAsset=this.createAssetTree(e),this.emit({type:"tree-change",root:this._rootAsset})}))}rootUrlChanged(){return Promise.resolve()}createAssetTree(e){e.sort(((e,t)=>e.url<t.url?-1:e.url>t.url?1:0));const t={info:e[0],expanded:!0,children:[]};for(let n=1,r=e.length;n<r;++n){const r=e[n],s=r.path.split("/").filter((e=>!!e));let i=t;for(let e=0,t=s.length;e<t;++e){const n=s[e];if(e<t-1){if(i=i.children.find((e=>e.info.name===n)),!i)break}else{const e={info:r,expanded:!0,children:[]};this._assetsByPath[decodeURI(r.path)]=e,i.children.push(e)}}}return t}}kw.typeName="CAssetManager",kw.isGraphSingleton=!0;class Lw extends kw{get standaloneFileManager(){return this.getGraphComponent(Pw,!0)}get assetManager(){return this.system.getMainComponent(Zi)}create(){super.create(),this.assetManager.ins.baseUrlValid.on("value",this.refreshRoot,this)}dispose(){this.assetManager.ins.baseUrlValid.off("value",this.refreshRoot,this),super.dispose()}rootUrlChanged(){return this.assetManager.ins.baseUrlValid.value?this.createArticleFolder():Promise.resolve()}createArticleFolder(){const e=Lw.articleFolder;return this.exists(e).then((t=>{if(!t){const t=this.root,n=`folder '${e}' in '${t.info.path}.'`;return this.createFolder(t,e).then((()=>zi.show(`Created ${n}'`))).catch((e=>zi.show(`Failed to create ${n}`)))}}))}getAssetURL(e){return this.assetManager.getAssetUrl(Mw(e,this.rootUrl))}uploadFile(e,t,n){const r=decodeURI(e),s=Mw(n.info.path+r,this.rootUrl);if(this.standaloneFileManager)return this.standaloneFileManager.addFile(Lw.articleFolder+"/"+r,[t]),this.refresh(),Promise.resolve();{const e={method:"PUT",credentials:"include",body:new File([t],r)};return fetch(s,e).then((()=>this.refresh()))}}refresh(){const e=this.standaloneFileManager;if(e){const t=e.getFileInfos();return this.root=this.createAssetTree(t),this.emit({type:"tree-change",root:this.root}),Promise.resolve()}return this.assetManager.ins.baseUrlValid.value?super.refresh():Promise.resolve()}rename(e,t){if(t.split(".").length<=1)return zi.show("New name must include file extension","error"),Promise.reject();const n=this.standaloneFileManager;return n?(n.renameFile(e.info.url,t),this.refresh()):super.rename(e,t)}delete(e){const t=this.standaloneFileManager;return t?(t.deleteFile(e.info.url),this.refresh()):super.delete(e)}deleteSelected(){const e=this.standaloneFileManager;if(e){return this.selectedAssets.forEach((t=>e.deleteFile(t.info.url))),this.refresh()}return super.deleteSelected()}refreshRoot(){this.assetManager.ins.baseUrlValid.value&&super.refresh().then((()=>this.rootUrlChanged()))}}Lw.typeName="CVMediaManager",Lw.articleFolder="articles";var Aw,Dw=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Ow=Aw=class extends o_{constructor(e,t){super(),this.language=null,this.filename="",this.errorString="",this.modelOptions=[],this.qualitySelection=null,this.parentSelection=null,this.language=e,this.filename=t,this.modelOptions=this.modelOptions.concat(e.getGraphComponents(Tp).map((e=>({name:e.node.name,id:e.id})))),this.position="center",this.modal=!0,this.parentSelection=this.modelOptions.length>0?this.modelOptions[0]:{name:"Model"+this.modelOptions.length.toString(),id:"-1"},this.url=window.location.href}static show(e,t,n){const r=new Aw(t,n);return e.appendChild(r),new Promise(((e,t)=>{r.on("confirm",(()=>e([r.qualitySelection,r.parentSelection.name]))),r.on("close",(()=>t()))}))}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}confirm(){null===this.qualitySelection?(this.errorString="Please select derivative quality.",this.requestUpdate()):(this.dispatchEvent(new CustomEvent("confirm")),this.remove())}firstConnected(){super.firstConnected(),this.classList.add("sv-option-menu","sv-import-menu")}renderQualityEntry(e,t){return qs`<div class="sv-entry" @click=${e=>this.onClickQuality(e,t)} ?selected=${e===this.qualitySelection}>
            ${Nd[e]}
        </div>`}renderParentEntry(e,t){return qs`<div class="sv-entry" @click=${e=>this.onClickParent(e,t)} ?selected=${e===this.parentSelection.name}>
            ${e}
        </div>`}render(){const e=this.language;return qs`
        <div>
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-title">${"File: "}<i>${this.filename}</i></div>
                    <ff-button icon="close" transparent class="ff-close-button" title=${e.getLocalizedString("Close")} @click=${this.close}></ff-button>
                </div>
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-header">${e.getLocalizedString("Select Derivative Quality")}:</div>
                </div>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    <div class="ff-scroll-y">
                        ${Object.keys(Nd).filter((e=>"number"==typeof Nd[e])).map(((e,t)=>this.renderQualityEntry(Nd[e],t)))}
                    </div>
                </div>
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-header">${e.getLocalizedString("Select Model")}:</div>
                </div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    ${this.modelOptions.length>0?qs`<div class="ff-scroll-y">
                        ${this.modelOptions.map(((e,t)=>this.renderParentEntry(e.name,t)))}
                    </div>`:qs`<div class="ff-flex-row sv-centered sv-notification" style="height:100%; align-items:center">No Models In Scene</div>`}
                </div>
                <div class="sv-entry" @click=${e=>this.onClickParent(e,-1)} ?selected=${"-1"===this.parentSelection.id}>
                    <div class="ff-flex-row">
                        <label class="ff-label ff-off">${e.getLocalizedString("Add New Model")}:</label>
                        <div class="ff-flex-spacer"></div>
                        <input id="modelName" tabindex="0" class="ff-property-field ff-input" @change=${this.onNameChange} value=${"Model"+this.modelOptions.length.toString()} touch-action="none" style="touch-action: none;" title="Parent.Name [string]"><div class="ff-fullsize ff-off ff-content"></div></input>
                    </div>
                </div>
                <div class="ff-flex-row sv-centered">
                    <ff-button icon="upload" class="ff-button ff-control" text=${e.getLocalizedString("Import Model")} title=${e.getLocalizedString("Import Model")} @click=${this.confirm}></ff-button>
                </div>
                <div class="ff-flex-row sv-centered sv-import-error-msg">
                    <div>${this.errorString}</div>
                </div>
            </div>
        </div>
        `}onClickQuality(e,t){e.stopPropagation(),this.qualitySelection=Nd[Nd[t]],this.requestUpdate()}onClickParent(e,t){e.stopPropagation(),this.parentSelection=this.modelOptions[t]||{name:this.querySelector("#modelName").value,id:"-1"},this.requestUpdate()}onNameChange(){this.parentSelection.name=this.querySelector("#modelName").value}};Ow=Aw=Dw([Ci("sv-import-menu")],Ow);const Rw=Ow;class Pw extends W{constructor(e,t){super(e,t),this.runtimeURLs=[],this.fileMap={},this.rootMap={},this.importQueue=[],this.isConfigured=null,this.documentLoaded=!1}get documentProvider(){return this.getMainComponent(Lp)}get selection(){return this.getMainComponent(Q)}get assetManager(){return this.getMainComponent(Zi)}get mediaManager(){return this.system.getMainComponent(Lw)}create(){super.create(),this.assetManager.outs.completed.on("value",this.cleanupFiles,this),this.fileMap["/"]=null,this.fileMap["articles/"]=null,this.mediaManager.refresh()}dispose(){this.assetManager.outs.completed.off("value",this.cleanupFiles,this),super.dispose()}getFile(e){return this.fileMap[e]}getFiles(){return Object.keys(this.fileMap).map((e=>this.fileMap[e]))}getFilePath(e){return this.rootMap[e]}addFile(e,t=[]){const n=e.lastIndexOf("/"),r=n>-1?e.substr(n+1):e,s=e.replace(r,"");this.rootMap[r]=s,this.fileMap[e]=new File(t,r),this.runtimeURLs[e]&&(this.runtimeURLs[e]=null)}deleteFile(e){delete this.fileMap[e]}renameFile(e,t){const n=this.fileMap[e],r=e.replace(n.name,t);this.addFile(r,[n]),delete this.fileMap[e]}getFileInfos(){return Object.keys(this.fileMap).map((e=>this.createFileInfo(e,this.fileMap[e])))}blobUrlToFileUrl(e){const t=this.runtimeURLs;return Object.keys(t).find((n=>t[n]===e))}update(){if(!this.isConfigured){const e=document.getElementsByClassName("sv-explorer-panel")[0],t=document.querySelector("#fileInput");new bw(e,t).on("drop",(({files:e})=>this.onFileDrop(e))),this.isConfigured=!0}return!1}onFileDrop(e){const t=Array.from(e),n=this.documentLoaded,r=t.findIndex((e=>e[0].toLowerCase().indexOf(".svx.json")>-1)),s=r>-1;s&&(t.push(t.splice(r,1)[0]),n&&this.reload(),this.documentLoaded=!0);const i=s?t[t.length-1][0].replace(t[t.length-1][1].name,""):"";t.forEach((([e,n])=>{const r=decodeURI(n.name),o=r.toLowerCase();if(o.match(/\.(gltf|glb|bin|svx.json|html|jpg|png|usdz)$/)){s||!o.match(/\.(jpg|png)$/)||t.some((e=>e[0].endsWith("gltf")))||(e=Lw.articleFolder+"/"+r);const a=e.split("/").filter((e=>!!e));let l="";for(let e=0,t=a.length-1;e<t;e++)l=l.concat(a[e],"/"),this.fileMap[l]=null;const c=(e=s?e.replace(i,""):e.startsWith("/")?e.substr(1):e).replace(r,"");if(this.rootMap[r]=c,this.fileMap[e]=n,this.assetManager.loadingManager.setURLModifier((e=>{const t=(e=decodeURI(e)).lastIndexOf("/"),n=e.substr(t+1).replace(/^(\.?\/)/,""),r=this.rootMap[n]+n,s=r.startsWith("/")?r.substr(1):r;if(this.runtimeURLs[s])return this.runtimeURLs[s];if(this.fileMap[s]){const e=URL.createObjectURL(this.fileMap[s]);return this.runtimeURLs[s]=e,e}return e})),!s&&o.match(/\.(gltf|glb)$/))this.importQueue.push(e);else if(o.match(/\.(svx.json)$/)){document.getElementsByTagName("voyager-story")[0].app.explorerApp.loadDocument(e),this.documentProvider.refreshDocument()}}else new zi(`Unhandled file: '${r}'`,"warning",4e3)})),this.importQueue.length>0&&this.handleModelImport(this.importQueue.pop()),this.mediaManager.refresh()}cleanupFiles(){this.runtimeURLs.forEach((e=>URL.revokeObjectURL(e)))}createFileInfo(e,t){const n=t?t.name:e.split("/").filter((e=>!!e)).pop()||"",r=n.toLowerCase(),s={url:e,name:t?t.name:n,folder:null===t,size:t?t.size:0};return r.match(/\.(html)$/)?s.type="text/html":r.match(/\.(jpg)$/)?s.type="image/jpeg":r.match(/\.(png)$/)?s.type="image/png":s.type="",s.path=e,s}handleModelImport(e){const t=document.getElementsByTagName("voyager-story")[0],n=this.documentProvider.activeComponent,r=this.importQueue,s=this.fileMap[e].name;Rw.show(t,n.setup.language,s).then((([t,s])=>{const i=this.getSystemComponents(Tp).find((e=>e.node.name===s));if(void 0===i){const r=n.appendModel(e,t),i=s;r.node.name=i,r.ins.name.setValue(i),r.ins.quality.setValue(t),this.selection.selectNode(r.node)}else i.derivatives.remove(Pd.Web3D,t),i.derivatives.createModelAsset(e,t),i.ins.quality.setValue(t),i.outs.updated.set(),this.selection.selectNode(i.node);r.length>0&&this.handleModelImport(r.pop())})).catch((e=>{}))}reload(){this.cleanupFiles(),this.runtimeURLs.length=0,this.fileMap={},this.rootMap={},this.fileMap["/"]=null,this.fileMap["articles/"]=null,this.mediaManager.refresh()}}Pw.typeName="CVStandaloneFileManager",Pw.isSystemSingleton=!0;class Nw extends W{constructor(e,t){super(e,t);const n=this.assetManager.loadingManager;this.jsonWriter=new eb(n)}get assetManager(){return this.getMainComponent(Zi)}get standaloneFileManager(){return this.getGraphComponent(Pw,!0)}putJSON(e,t){const n=this.assetManager.getAssetUrl(t);return this.jsonWriter.put(e,n)}putText(e,t){const n=this.standaloneFileManager;if(n)return n.addFile(t,[e]),Promise.resolve(e);{const n=this.assetManager.getAssetUrl(t);return eo(n,"PUT",e)}}putDocument(e,t,n){const r=this.assetManager.getAssetUrl(n||e.outs.assetPath.value),s=e.deflateDocument(t);return this.jsonWriter.put(s,r)}}Nw.typeName="CVAssetWriter",Nw.text="AssetWriter",Nw.icon="",Nw.isSystemSingleton=!0;var Iw=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};class zw extends Ip{constructor(){super(...arguments),this.ins=this.addInputs(zw.taskIns),this.outs=this.addOutputs(zw.taskOuts),this._isActiveTask=!1,this.configuration={bracketsVisible:void 0,interfaceVisible:void 0,gridVisible:void 0,annotationsVisible:void 0},this._savedConfig={bracketsVisible:void 0,interfaceVisible:void 0,gridVisible:void 0,annotationsVisible:void 0}}get selection(){return this.getMainComponent(os)}get isActiveTask(){return this._isActiveTask}dispose(){this._isActiveTask&&this.deactivateTask(),super.dispose()}createView(){throw new Error("must override")}activateTask(){this._isActiveTask=!0,this.outs.isActive.setValue(!0);const e=this.configuration,t=this._savedConfig;if(void 0!==e.bracketsVisible){const n=this.selection.ins.viewportBrackets;t.bracketsVisible=n.value,n.setValue(!!e.bracketsVisible)}}deactivateTask(){const e=this._savedConfig;void 0!==e.bracketsVisible&&this.selection.ins.viewportBrackets.setValue(e.bracketsVisible),this._isActiveTask=!1,this.outs.isActive.setValue(!1)}onActiveDocument(e,t){const n=this.configuration,r=this._savedConfig;if(e&&(void 0!==r.gridVisible&&e.setup.grid.ins.visible.setValue(r.gridVisible),void 0!==r.annotationsVisible&&e.setup.viewer.ins.annotationsVisible.setValue(r.annotationsVisible),void 0!==r.interfaceVisible&&e.setup.interface.ins.visible.setValue(r.interfaceVisible)),t){if(void 0!==n.gridVisible){const e=t.setup.grid.ins.visible;r.gridVisible=e.value,e.setValue(!!n.gridVisible)}if(void 0!==n.annotationsVisible){const e=t.setup.viewer.ins.annotationsVisible;r.annotationsVisible=e.value,e.setValue(!!n.annotationsVisible)}if(void 0!==n.interfaceVisible){const e=t.setup.interface.ins.visible;r.interfaceVisible=e.value,e.setValue(!!n.interfaceVisible)}}}}zw.typeName="CVTask",zw.text="Task",zw.icon="fa fa-tasks",zw.taskIns={},zw.taskOuts={isActive:O("Task.IsActive")};class Bw extends Hp{constructor(e){super(e.system),this.task=null,this.task=e}firstConnected(){this.classList.add("sv-task-view")}}Iw([ai({attribute:!1})],Bw.prototype,"task",void 0);var Fw=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Hw=class extends hu{constructor(){super(),this.content=null,this.contentParent=this,this.addEventListener("close",(()=>this.selected=!1)),this.onPointerDown=this.onPointerDown.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}connected(){document.addEventListener("pointerdown",this.onPointerDown,{capture:!0,passive:!0}),document.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!0})}disconnected(){document.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("keydown",this.onKeyDown)}update(e){super.update(e),e.has("selected")&&(this.selected?this.showPopup():e.get("selected")&&this.hidePopup())}onPointerDown(e){e.target instanceof Node&&!this.contains(e.target)&&(this.selected=!1)}onKeyDown(e){"Escape"===e.key&&(this.selected=!1)}showPopup(){const e=this.content,t=this.contentParent||this;e&&(t.appendChild(e),setTimeout((()=>e.style.opacity="1.0"),0))}hidePopup(){const e=this.content,t=this.contentParent||this;if(e&&e.parentElement===t){this.focus(),e.style.opacity="0";const n=parseFloat(window.getComputedStyle(e).transitionDuration)||0;setTimeout((()=>t.removeChild(e)),1e3*n)}}};Fw([ai({attribute:!1})],Hw.prototype,"content",void 0),Fw([ai({attribute:!1})],Hw.prototype,"contentParent",void 0),Hw=Fw([Ci("ff-popup-button")],Hw);const jw=Hw;var Uw=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Yw=class extends jw{constructor(){super(...arguments),this.color=new cu,this.alpha=!1,this.numeric=!1,this.popup=null}firstConnected(){super.firstConnected(),this.classList.add("ff-color-button")}showPopup(){const e=new xf;e.color.copy(this.color),e.alpha=this.alpha,e.numeric=this.numeric;const t=this.popup=new o_;t.appendElement(e),this.appendElement(t),t.anchor=this,t.keepVisible=!0,t.align="end",t.justify="end",t.position="anchor"}hidePopup(){this.removeChild(this.popup),this.popup=null}update(e){this.style.backgroundColor=this.color.toString(),super.update(e)}};Uw([ai({attribute:!1})],Yw.prototype,"color",void 0),Uw([ai({type:Boolean})],Yw.prototype,"alpha",void 0),Uw([ai({type:Boolean})],Yw.prototype,"numeric",void 0),Yw=Uw([Ci("ff-color-button")],Yw);const Vw=Yw;var $w,Ww=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Gw=$w=class extends o_{constructor(e){super(),this.onClick=this.onClick.bind(this),this.onClose=this.onClose.bind(this),this.addEventListener("click",this.onClick),this.addEventListener("close",this.onClose),this.options=e||[],this.selectionIndex=-1}firstConnected(){super.firstConnected(),this.classList.add("ff-popup-options"),this.setStyle({display:"flex",flexDirection:"column"})}render(){return qs`
            ${this.options.map(((e,t)=>qs`
                <button>${e}</button>
            `))}
        `}updated(){super.updated();const e=this.selectionIndex>=0?this.selectionIndex:0,t=this.children.item(e);t&&t.focus()}onClick(e){const t=this.getChildrenArray().indexOf(e.target);t>=0&&t<this.options.length&&this.dispatchEvent(new CustomEvent($w.selectEvent,{detail:{index:t,option:this.options[t]}})),this.remove()}onClose(){this.remove()}};Gw.selectEvent="ff-select",Ww([ai({attribute:!1})],Gw.prototype,"options",void 0),Ww([ai({type:Number})],Gw.prototype,"selectionIndex",void 0),Gw=$w=Ww([Ci("ff-popup-options")],Gw);const qw=Gw;var Xw,Kw=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Jw=Xw=class extends Ti{constructor(e){super(),this.index=void 0,this.commitonly=!1,this.value=void 0,this.isActive=!1,this.isDragging=!1,this.startValue=0,this.startX=0,this.startY=0,this.lastX=0,this.lastY=0,this.editElement=null,this.barElement=null,this.buttonElement=null,this.contentElement=null,this.property=e,this.onFocus=this.onFocus.bind(this),this.onClick=this.onClick.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onEditChange=this.onEditChange.bind(this),this.onSelectOption=this.onSelectOption.bind(this),this.addEventListener("focus",this.onFocus),this.addEventListener("click",this.onClick),this.addEventListener("contextmenu",this.onContextMenu),this.addEventListener("pointerdown",this.onPointerDown),this.addEventListener("pointermove",this.onPointerMove),this.addEventListener("pointerup",this.onPointerUp),this.addEventListener("pointercancel",this.onPointerUp)}update(e){this.contentElement&&(this.contentElement.remove(),this.contentElement=null),this.barElement&&(this.barElement.remove(),this.barElement=null),this.buttonElement&&(this.buttonElement.remove(),this.buttonElement=null);const t=this.property,n=t.schema;if(n.event)this.buttonElement=this.appendElement("div"),this.buttonElement.classList.add("ff-off","ff-event-button");else{const{min:e,max:t,bar:r}=n;n.options||void 0===e||void 0===t||void 0===r||(this.barElement=this.appendElement("div"),this.barElement.classList.add("ff-fullsize","ff-off","ff-bar")),this.contentElement=this.appendElement("div"),this.contentElement.classList.add("ff-fullsize","ff-off","ff-content")}const r=this.classList,s=t.isInput();s?(r.add("ff-input"),r.remove("ff-output")):(r.add("ff-output"),r.remove("ff-input"));(s?t.hasInLinks(this.index):t.hasOutLinks(this.index))?r.add("ff-linked"):r.remove("ff-linked"),n.event?r.add("ff-event"):r.remove("ff-event"),n.options?r.add("ff-option"):r.remove("ff-option"),this.setAttribute("title",t.toString()+(this.index>=0?`[${this.index}]`:"")),this.updateElement()}firstConnected(){if(this.tabIndex=0,this.classList.add("ff-property-field"),this.style.touchAction="none",this.setAttribute("touch-action","none"),!this.property)throw new Error("missing property")}connected(){this.property.on("value",this.onPropertyValue,this),this.property.on("change",this.onPropertyChange,this)}disconnected(){this.property.off("value",this.onPropertyValue,this),this.property.off("change",this.onPropertyChange,this)}onFocus(e){}onClick(e){if(this.editElement)return;const t=this.property,n=t.schema;if(n.event)t.set();else if(!this.isDragging)if(n.options)this.showPopupOptions(e);else switch(t.type){case"number":case"string":this.startEditing();break;case"boolean":this.updateProperty(!this.value,!0)}}onContextMenu(e){this.editElement||(this.property.reset(),e.preventDefault())}onPointerDown(e){if(!e.isPrimary||0!==e.button)return;this.isDragging=!1;const t=this.property;"number"!==t.type||t.schema.options||(this.isActive=!0,this.startX=e.clientX,this.startY=e.clientY)}onPointerMove(e){if(e.isPrimary&&this.isActive){if(!this.isDragging){const t=e.clientX-this.startX,n=e.clientY-this.startY;Math.abs(t)+Math.abs(n)>2&&(this.setPointerCapture(e.pointerId),this.isDragging=!0,this.startX=e.clientX,this.startY=e.clientY,this.startValue=this.value)}if(this.isDragging){const t=e.clientX-this.startX-(e.clientY-this.startY),n=this.property.schema;let r=Xw.defaultSpeed;n.speed?r=n.speed:void 0!==n.min&&void 0!==n.max&&(r=(n.max-n.min)/this.clientWidth),r=e.ctrlKey?.1*r:r,r=e.shiftKey?10*r:r;let s=this.startValue+t*r;s=void 0!==n.step?Math.trunc(s/n.step)*n.step:s,s=void 0!==n.min?Math.max(s,n.min):s,s=void 0!==n.max?Math.min(s,n.max):s,this.updateProperty(s,!this.commitonly),e.stopPropagation(),e.preventDefault()}this.lastX=e.clientX,this.lastY=e.clientY}}onPointerUp(e){this.isActive&&e.isPrimary&&(this.isActive=!1,this.isDragging&&(e.stopPropagation(),e.preventDefault(),this.commitonly&&this.property.set()))}onEditChange(e){e.detail.isEditing||this.stopEditing(!0)}startEditing(){const e=this.property,t=e.schema;let n=this.value,r=!1;if("number"===e.type)if(r=!0,isFinite(n)){const e=void 0!==t.precision?t.precision:Xw.defaultEditPrecision;n=this.value.toFixed(e)}else n=this.value===-1/0?"-inf":"inf";const s=this.editElement=this.appendElement(ff);s.classList.add("ff-fullsize"),s.align=r?"right":"left",s.text=n,s.focus(),s.addEventListener("change",this.onEditChange)}stopEditing(e){if(!this.editElement)return;const t=this.editElement;this.editElement=null,this.removeChild(t);const n=this.property.schema,r=t.text;let s=r;if("number"===this.property.type)if(r.toLowerCase().indexOf("inf")>=0)s="-"===r[0]?-1/0:1/0;else{if(s=parseFloat(s)||0,n.precision){const e=Math.pow(10,n.precision);s=Math.round(s*e)/e}s=void 0!==n.min?Math.max(s,n.min):s,s=void 0!==n.max?Math.min(s,n.max):s}this.updateProperty(s,!0)}showPopupOptions(e){const t=this.property,n=new qw;n.options=t.schema.options,n.selectionIndex=t.getValidatedValue(),n.position="anchor",n.anchor=this,n.align="fixed",n.justify="end",n.positionX=e.clientX-10,n.keepVisible=!0,n.addEventListener(qw.selectEvent,this.onSelectOption),document.body.appendChild(n)}onSelectOption(e){const t=e.detail.index;this.updateProperty(t,!0)}onPropertyValue(){this.updateElement()}onPropertyChange(){this.updateElement()}updateElement(){const e=this.property,t=e.schema;if(t.event)return void(e.changed&&(this.buttonElement.classList.remove("ff-event-flash"),setTimeout((()=>this.buttonElement.classList.add("ff-event-flash")),0)));let n=e.value,r="";switch(this.index>=0&&(n=n[this.index]),this.value=n,e.type){case"number":if(t.options)r=e.getOptionText();else if(isFinite(n)){const e=void 0!==t.precision?t.precision:Xw.defaultPrecision;r=t.percent?(100*n).toFixed(e-2)+"%":n.toFixed(e),this.barElement&&(this.barElement.style.width=wr.scaleLimit(n,t.min,t.max,0,100)+"%")}else r=n===-1/0?"-inf":"inf",this.barElement&&(this.barElement.style.width="0");break;case"boolean":r=n?"true":"false";break;case"string":r=n;break;case"object":r=n?"[object]":"[null]"}this.contentElement.innerText=r}updateProperty(e,t){const n=this.property;this.index>=0?n.value[this.index]=e:n.value=e,t?n.set():this.updateElement()}};Jw.defaultPrecision=2,Jw.defaultEditPrecision=5,Jw.defaultSpeed=.1,Kw([ai({attribute:!1})],Jw.prototype,"property",void 0),Kw([ai({attribute:!1})],Jw.prototype,"index",void 0),Kw([ai({type:Boolean})],Jw.prototype,"commitonly",void 0),Jw=Xw=Kw([Ci("ff-property-field")],Jw);var Zw=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const Qw=["X","Y","Z","W"];let ex=class extends Ti{constructor(){super(),this.property=null,this.editButton=null,this.onColorChange=this.onColorChange.bind(this)}firstConnected(){this.classList.add("ff-property-view")}connected(){this.property.on("value",this.onPropertyValue,this)}disconnected(){this.property.off("value",this.onPropertyValue,this)}render(){const e=this.property;if("color"===e.schema.semantic){const t=new Vw;t.selectable=!0,t.numeric=!0,t.color.fromArray(e.value),t.alpha=e.elementCount>3,t.addEventListener("change",this.onColorChange),this.editButton=t}else("number"===e.type&&e.elementCount>1||"string"===e.type&&1===e.elementCount)&&(this.editButton=null);if(e.isArray()){if(e.elementCount>4)return;const t=e.schema.labels||Qw;let n=[];for(let r=0;r<e.elementCount;++r)n.push(qs`
                    <div class="ff-label">${t[r]}</div>
                    <ff-property-field .property=${e} .index=${r}></ff-property-field>
                `);return qs`${n}<div class="ff-edit-button">${this.editButton}</div>`}return qs`<ff-property-field .property=${e}></ff-property-field>
            <div class="ff-edit-button">${this.editButton}</div>`}onColorChange(e){const t=e.detail.color,n=this.property;n.elementCount>3?t.toRGBAArray(n.value):t.toRGBArray(n.value),n.set()}onPropertyValue(e){const t=this.editButton;t instanceof Vw&&(t.color.fromArray(e),t.requestUpdate())}};Zw([ai({attribute:!1})],ex.prototype,"property",void 0),ex=Zw([Ci("ff-property-view")],ex);var tx,nx=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let rx=tx=class extends Ti{constructor(e){super(),this.root=null,this.includeRoot=!1,this.draggable=!1,this._nodeById={},this._idByNode=new Map,this._containerId=i(4),this.root=e}toggleSelected(e){this.setSelected(e,void 0)}setSelected(e,t){const n=this._idByNode.get(e);if(n){const e=document.getElementById(n);void 0===t&&(t=!e.hasAttribute("selected")),t?e.setAttribute("selected",""):e.removeAttribute("selected")}}isSelected(e){const t=this._idByNode.get(e);if(t){return document.getElementById(t).hasAttribute("selected")}return!1}toggleExpanded(e){this.setExpanded(e,void 0)}setExpanded(e,t){const n=this._idByNode.get(e);if(n){const e=document.getElementById(n);void 0===t&&(t=!e.hasAttribute("expanded")),t?e.setAttribute("expanded",""):e.removeAttribute("expanded")}}isExpanded(e){const t=this._idByNode.get(e);if(t){return document.getElementById(t).hasAttribute("expanded")}return!1}firstConnected(){this.classList.add("ff-tree"),this.draggable&&(this.addEventListener("dragstart",this.onDragStart.bind(this)),this.addEventListener("dragover",this.onDragOver.bind(this)),this.addEventListener("dragenter",this.onDragEnter.bind(this)),this.addEventListener("dragleave",this.onDragLeave.bind(this)),this.addEventListener("drop",this.onDrop.bind(this)))}render(){this._nodeById={},this._idByNode.clear();const e=this.root;if(!e)return qs``;if(this.includeRoot){const t=this.getId(e)+this._containerId;return this.renderNode(e,t,0)}{const t=this.getChildren(e);return t.length>0?this.renderNodeChildren(e,t,0):qs``}}getId(e){return e.id||i()}getClasses(e){return""}getChildren(e){return e.children||null}isNodeSelected(e){return!!e.selected}isNodeExpanded(e){return void 0===e.expanded||e.expanded}renderNodeHeader(e){return e.toString()}renderNodeContent(e,t,n){return this.renderNodeChildren(e,t,n)}renderNodeChildren(e,t,n){if(!t||0===t.length)return null;let r;return qs`
            ${wi(t,(e=>r=this.getId(e)+this._containerId),(e=>this.renderNode(e,r,n)))}
        `}renderNode(e,t,n){this._nodeById[t]=e,this._idByNode.set(e,t);const r=this.getChildren(e),s=this.isNodeSelected(e),i=this.isNodeExpanded(e);let o="ff-tree-node "+(r&&r.length>0?"ff-inner ":"ff-leaf ")+(n%2==0?"ff-even ":"ff-odd ")+this.getClasses(e);const a=this.renderNodeHeader(e),l=this.renderNodeContent(e,r,n+1);return qs`
            <div class="ff-tree-node-container">
                <div class=${o} id=${t} ?selected=${s} ?expanded=${i}>
                    <div class="ff-header" draggable="true"
                        @click=${this.onClick} @dblclick=${this.onDblClick}>${a}</div>
                    <div class="ff-content">${l}</div>
                </div>
            </div>
        `}onDragStart(e){const t=this.getNodeFromEventTarget(e);t&&this.onNodeDragStart(e,t)?e.dataTransfer.setData(tx.dragDropMimeType,this.getId(t)):e.preventDefault()}onDragEnter(e){let t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&this.onNodeDragEnter(e,t)}onDragOver(e){const t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&this.onNodeDragOver(e,t)&&e.preventDefault()}onDragLeave(e){const t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&this.onNodeDragLeave(e,t)}onDrop(e){const t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&(this.onNodeDrop(e,t),e.stopPropagation()),e.preventDefault()}onClick(e){const t=this.getNodeFromEventTarget(e);t&&this.onNodeClick(e,t),e.stopPropagation()}onDblClick(e){const t=this.getNodeFromEventTarget(e);t&&this.onNodeDblClick(e,t),e.stopPropagation()}canDrop(e,t){return!!e.dataTransfer.types.find((e=>e===tx.dragDropMimeType))}onNodeDragStart(e,t){return!0}onNodeDragOver(e,t){return!0}onNodeDragEnter(e,t){this.getElementByNode(t).classList.add("ff-drop-target")}onNodeDragLeave(e,t){this.getElementByNode(t).classList.remove("ff-drop-target")}onNodeDrop(e,t){this.getElementByNode(t).classList.remove("ff-drop-target")}onNodeClick(e,t){this.toggleExpanded(t)}onNodeDblClick(e,t){}getNodeFromEventTarget(e){let t=e.target;for(;t&&!t.classList.contains("ff-tree-node");)t=t===this?null:t.parentElement;return t&&this._nodeById[t.id]}getElementByNode(e){const t=this._idByNode.get(e);return t&&document.getElementById(t)}};rx.dragDropMimeType="application/x-ff-tree-node",nx([ai({attribute:!1})],rx.prototype,"root",void 0),nx([ai({type:Boolean})],rx.prototype,"includeRoot",void 0),nx([ai({type:Boolean})],rx.prototype,"draggable",void 0),rx=tx=nx([Ci("ff-tree")],rx);const sx=rx;var ix=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let ox=class extends Bw{render(){const e=this.activeNode;return e?qs`<div class="ff-flex-item-stretch ff-scroll-y">
            <sv-settings-tree .node=${e}></sv-settings-tree>
        </div>`:qs`<div class="sv-placeholder">Please select a node to display its properties.</div>`}onActiveNode(e,t){this.requestUpdate()}};ox=ix([Ci("sv-settings-task-view")],ox);const ax=ox;let lx=class extends sx{constructor(){super(...arguments),this.node=null}firstConnected(){super.firstConnected(),this.classList.add("ff-property-tree","sv-settings-tree")}getClasses(e){return e.classes}update(e){e.has("node")&&(this.root=this.createNodeTreeNode(this.node)),super.update(e)}renderNodeHeader(e){return e.property?qs`<div class="ff-text ff-property-label ff-ellipsis">${e.text}</div>
                <ff-property-view .property=${e.property}></ff-property-view>`:qs`<div class="ff-text ff-label ff-ellipsis">${e.text}</div>`}createNodeTreeNode(e){const t=e.components.getArray().filter((e=>e.settingProperties));return{id:e.id,text:e.displayName,classes:"ff-node",children:t.map((e=>({id:e.id,text:e.displayName,classes:"ff-component",property:null,children:this.createPropertyNodes(e.settingProperties)})))}}createPropertyNodes(e){const t={children:[]};return e.forEach((e=>{const n=e.path.split(".");let r=t;const s=n.length,i=s-1;for(let t=0;t<s;++t){const s=n[t];let o=r.children.find((e=>e.text===s));if(!o){o={id:t===i?e.key:s,text:s,classes:"",children:[],property:t===i?e:null},r.children.push(o)}r=o}})),t.children}};ix([ai({attribute:!1})],lx.prototype,"node",void 0),lx=ix([Ci("sv-settings-tree")],lx);class cx extends zw{constructor(e,t){super(e,t);const n=this.configuration;n.interfaceVisible=!0,n.bracketsVisible=!0}createView(){return new ax(this)}}cx.typeName="CVSettingsTask",cx.text="Settings",cx.icon="eye";var dx=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const ux=["X","Y","Z","W"];let hx=class extends Ti{constructor(){super(...arguments),this.property=null,this.label=void 0,this.showLabel=!0,this.commitonly=!1}firstConnected(){if(!this.property)throw new Error("property not set");this.classList.add("sv-property-view")}render(){const e=this.property,t=void 0!==this.label?this.label:e.path.split(".").pop(),n=this.showLabel?qs`<div class="sv-property-name">${t}</div>`:null;if(e.isArray()){if(e.elementCount>4)return;let t=[];for(let n=0;n<e.elementCount;++n)t.push(this.renderField(n));return qs`${n}<div class="sv-property-value">${t}</div>`}return qs`${n}<div class="sv-property-value">${this.renderField(-1)}</div>`}renderField(e){const t=this.property,n=t.schema.labels||ux,r=e>=0?qs`<div class="sv-field-label">${n[e]}</div>`:null,s=this.commitonly;return qs`<div class="ff-flex-row sv-field-row">
            ${r}
            <ff-property-field .property=${t} .index=${e} ?commitonly=${s}></ff-property-field>
        </div>`}};dx([ai({attribute:!1})],hx.prototype,"property",void 0),dx([ai()],hx.prototype,"label",void 0),dx([ai({type:Boolean})],hx.prototype,"showLabel",void 0),dx([ai({type:Boolean})],hx.prototype,"commitonly",void 0),hx=dx([Ci("sv-property-view")],hx);var mx=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let px=class extends Bw{connected(){super.connected(),this.task.on("update",this.onUpdate,this),this.task.outs.size.on("value",this.onUpdate,this)}disconnected(){this.task.outs.size.off("value",this.onUpdate,this),this.task.off("update",this.onUpdate,this),super.disconnected()}render(){const e=this.activeNode,t=e&&e.model;if(!t)return qs`<div class="sv-placeholder">Please select a model to edit its pose</div>`;const n=this.task.outs.size.value,r=`${n[0].toFixed(2)} x ${n[1].toFixed(2)} x ${n[2].toFixed(2)} ${Ed[t.ins.globalUnits.value]}`,s=this.task.ins.mode,i=this.activeDocument.root.scene.ins.units,o=t.ins.localUnits,a=t.ins.position,l=t.ins.rotation;return qs`
            <div class="sv-commands">
                <ff-button icon="select" text="Select" index=${Mx.Off} selectedIndex=${s.value} @click=${this.onClickMode}></ff-button>
                <ff-button icon="rotate" text="Rotate" index=${Mx.Rotate} selectedIndex=${s.value} @click=${this.onClickMode}></ff-button>
                <ff-button icon="move" text="Move" index=${Mx.Translate} selectedIndex=${s.value} @click=${this.onClickMode}></ff-button>
                <ff-button icon="compress" text="Center" @click=${this.onClickCenter}></ff-button>
                <ff-button icon="expand" text="Zoom Extents" @click=${this.onClickZoomExtents}></ff-button>
            </div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y ff-flex-column sv-detail-view">
                <div class="sv-label-right">${r}</div>
                <sv-property-view .property=${i} label="Global Units"></sv-property-view>    
                <sv-property-view .property=${o} label="Item Units"></sv-property-view>
                <sv-property-view .property=${a}></sv-property-view>
                <sv-property-view .property=${l}></sv-property-view>
            </div></div>`}onClickMode(e){this.task.ins.mode.setValue(e.target.index)}onClickCenter(){this.activeNode.model.ins.center.set()}onClickZoomExtents(){this.activeDocument.setup.navigation.ins.zoomExtents.set()}};px=mx([Ci("sv-pose-task-view")],px);const fx=px,gx=new he,vx=new he,yx=new fe,_x=new ue,bx=new ue,wx=new Me,xx=new he;var Mx;!function(e){e[e.Off=0]="Off",e[e.Translate=1]="Translate",e[e.Rotate=2]="Rotate"}(Mx||(Mx={}));class Sx extends zw{constructor(e,t){super(e,t),this.ins=this.addInputs(Sx.ins),this.outs=this.addOutputs(Sx.outs),this._viewport=null,this._deltaX=0,this._deltaY=0,this.activeModel=null;const n=this.configuration;n.gridVisible=!0,n.annotationsVisible=!1,n.interfaceVisible=!1,n.bracketsVisible=!0}get renderer(){return this.getMainComponent(_r)}createView(){return new fx(this)}activateTask(){this.system.on(["pointer-down","pointer-up","pointer-move"],this.onPointer,this),this.renderer.views.forEach((e=>{e instanceof Ey&&(e.layout=Cy.Quad,e.viewports.forEach((e=>{e.camera&&e.camera.layers.enable(1)})))})),this.startObserving();const e=this.activeDocument.setup;e.reader.ins.enabled.setValue(!1),e.navigation.ins.zoomExtents.set(),super.activateTask()}deactivateTask(){super.deactivateTask(),this.stopObserving(),this.renderer.views.forEach((e=>{e instanceof Ey&&(e.layout=Cy.Single)})),this.system.off(["pointer-down","pointer-up","pointer-move"],this.onPointer,this)}update(e){return this.ins.modelUpdated&&this.activeModel&&(wx.makeEmpty(),wx.expandByObject(this.activeModel.object3D),wx.getSize(xx),xx.toArray(this.outs.size.value),this.outs.size.set()),!0}tick(){if(!this.isActiveTask)return!1;const e=this.ins.mode.value;if(e===Mx.Off||!this.activeModel)return!1;const t=this._deltaX,n=this._deltaY;if(0===t&&0===n)return!1;this._deltaX=this._deltaY=0;const r=this._viewport.camera;if(!r||!r.isOrthographicCamera)return!1;if(r.matrixWorld.decompose(gx,_x,gx),e===Mx.Rotate){const e=.002*(t-n);vx.set(0,0,-1).applyQuaternion(_x),bx.setFromAxisAngle(vx,e),yx.makeRotationFromQuaternion(bx)}else{const e=r.size/this._viewport.height;vx.set(t*e,-n*e,0).applyQuaternion(_x),yx.identity().setPosition(vx)}return yx.multiply(this.activeModel.object3D.matrix),this.activeModel.setFromMatrix(yx),!0}onActiveNode(e,t){this.activeModel&&this.ins.modelUpdated.unlinkFrom(this.activeModel.outs.updated),this.activeModel=t&&t.model,this.activeModel&&(this.ins.modelUpdated.linkFrom(this.activeModel.outs.updated),this.ins.modelUpdated.set(),this.selection.selectComponent(this.activeModel))}onPointer(e){if(this.ins.mode.value!==Mx.Off&&this.activeModel&&1===e.originalEvent.buttons&&"pointer-move"===e.type){const t=e.ctrlKey?.1:e.shiftKey?10:1;this._deltaX+=e.movementX*t,this._deltaY+=e.movementY*t,this._viewport=e.viewport,e.stopPropagation=!0}}}Sx.typeName="CVPoseTask",Sx.text="Pose",Sx.icon="move",Sx.ins={mode:N("Pose.Mode",Mx,Mx.Off),modelUpdated:B("Model.Updated")},Sx.outs={size:E("Model.Size")};const Tx=function(e){const t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(var s=0;s<t.length;s++)r[s]=t.charCodeAt(s);var i=e.split(",")[0].split(":")[1].split(";")[0];return new Blob([n],{type:i})};var Cx=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Ex=class extends Bw{connected(){super.connected(),this.task.outs.ready.on("value",this.onPictureTaken,this)}disconnected(){this.task.outs.ready.off("value",this.onPictureTaken,this),super.disconnected()}render(){if(!this.task.isActiveScene)return qs`<div class="sv-placeholder">Please select a scene to take a picture</div>`;const e=this.task.ins,t=this.task.outs.ready.value,n=this.task.getImageElement(),r=n?qs`<div class="sv-label">Preview</div>
            <div class="sv-image">${n}</div>`:null;return qs`<div class="sv-label">Scene State</div>
            <div class="sv-commands">
                <ff-button text="Capture" icon="camera" @click=${this.onClickTake}></ff-button>
                <ff-button text="Restore" icon="document" @click=${this.onClickRestore}></ff-button>
            </div>
            <div class="sv-label">Thumbnail Images</div>
            <div class="sv-commands">
                <ff-button text="Save" icon="save" ?disabled=${!t} @click=${this.onClickSave}></ff-button>
                <ff-button text="Download" icon="download" ?disabled=${!t} @click=${this.onClickDownload}></ff-button>
            </div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y ff-flex-column sv-detail-view">
                <sv-property-view .property=${e.type}></sv-property-view>
                <sv-property-view .property=${e.quality}></sv-property-view>
                ${r}
            </div></div>`}onClickTake(){this.task.ins.take.set()}onClickSave(){this.task.ins.save.set()}onClickDownload(){this.task.ins.download.set()}onClickRestore(){this.task.ins.restore.set()}onPictureTaken(){this.requestUpdate()}};Ex=Cx([Ci("sv-capture-task-view")],Ex);const kx=Ex,Lx=[Nd.Thumb,Nd.Low,Nd.Medium,Nd.High],Ax={[Nd.Thumb]:[320,320],[Nd.Low]:[640,640],[Nd.Medium]:[1280,1280],[Nd.High]:[2560,2560]};var Dx;!function(e){e[e.JPEG=0]="JPEG",e[e.PNG=1]="PNG"}(Dx||(Dx={}));const Ox={[Dx.JPEG]:"image/jpeg",[Dx.PNG]:"image/png"},Rx={[Dx.JPEG]:"jpg",[Dx.PNG]:"png"};class Px extends zw{constructor(e,t){super(e,t),this.ins=this.addInputs(Px.ins),this.outs=this.addOutputs(Px.outs),this.activeMeta=null,this.activeModel=null,this.isActiveScene=!1,this._imageDataURIs={},this._imageElements={},this._mimeType="",this._extension="";this.configuration.bracketsVisible=!1}get renderer(){return this.getMainComponent(_r)}get assetManager(){return this.getMainComponent(Zi)}get nodeProvider(){return this.getMainComponent(Op)}get setup(){return this.getSystemComponent(cp)}getImageElement(e=Nd.Low){return this._imageElements[e]}createView(){return new kx(this)}activateTask(){this.nodeProvider.activeNode=this.nodeProvider.scopedNodes[0],this.startObserving(),super.activateTask()}deactivateTask(){this.stopObserving(),super.deactivateTask()}create(){super.create(),this.startObserving()}dispose(){this.stopObserving(),super.dispose()}update(){const e=this.ins;if(e.take.changed){const t=e.type.getValidatedValue();this.takePictures(e.quality.value,Ox[t],Rx[t]),this.setup.ins.saveState.set()}return e.save.changed&&this.savePictures(),e.download.changed&&this.downloadPicture(),e.remove.changed&&this.removePictures(),e.restore.changed&&this.restoreState(),!0}takePictures(e,t,n){this._mimeType=t,this._extension=n;const r=this.renderer.views[0];r?(Lx.forEach((n=>{const s=r.renderImage(Ax[n][0],Ax[n][1],t,e);this._imageDataURIs[n]=s;const i=this._imageElements[n]||document.createElement("img");i.src=s,this._imageElements[n]=i})),this.outs.ready.setValue(!0)):console.warn("can't render to image, no view attached")}savePictures(){this.outs.ready.value&&Lx.forEach((e=>{const t=this._imageDataURIs[e],n=this.getImageAssetPath(e,this._extension),r=this.assetManager.getAssetUrl(n),s=this.assetManager.getAssetName(n),i=Tx(t),o=this.graph.getMainComponent(Pw,!0);if(o)o.addFile(n,[i]),this.updateImageMeta(e,this._mimeType,n),new zi(`Saved ${s} to scene package.`,"info",4e3);else{const t=new File([i],s);to(r,"PUT",t).then((()=>{this.updateImageMeta(e,this._mimeType,n),new zi(`Successfully uploaded image to '${r}'`,"info",4e3)})).catch((e=>{new zi(`Failed to upload image to '${r}'`,"error",8e3)}))}}))}downloadPicture(){if(!this.outs.ready.value)return;const e=this._imageDataURIs[Nd.High],t=this.getImageAssetPath(Nd.High,this._extension),n=this.assetManager.getAssetName(t);Bc(e,n)}updateImageMeta(e,t,n){const r=this.activeModel,s=this.activeMeta,i=Math.ceil(this._imageDataURIs[e].length/4*3),o=Ax[e][0],a=Ax[e][1],l=Math.max(o,a);if(r){const s=r.derivatives.getOrCreate(Pd.Image2D,e),o=s.findAsset(Id.Image)||s.createAsset(Id.Image,n);o.data.byteSize=i,o.data.imageSize=l,o.data.mimeType=t,o.update()}if(s){const t=Nd[e];s.images.insert({uri:n,quality:t,byteSize:i,width:o,height:a},t)}this.outs.updated.setValue(!0)}getImageAssetPath(e,t){let n=this.activeDocument.assetBaseName;this.activeNode.model;return`${n}-image-${Nd[e].toLowerCase()}.${t}`}removePictures(){console.warn("CCaptureTask.removePictures - not implemented yet")}onActiveDocument(e,t){super.onActiveDocument(e,t),t&&this.isActiveTask&&this.onActiveNode(this.activeNode,this.activeNode)}onActiveNode(e,t){e&&e.meta&&(this.outs.ready.setValue(!1),this._imageElements={},this._imageDataURIs={}),this.isActiveScene=!(!t||!t.scene);const n=this.activeModel=t&&t.model,r=this.activeMeta=t&&t.meta,s=r&&r.images;s?Lx.forEach((e=>{const t=s.get(Nd[e]);if(t){const n=document.createElement("img");n.src=this.assetManager.getAssetUrl(t.uri),this._imageElements[e]=n}})):n&&Lx.forEach((e=>{const t=n.derivatives.get(Pd.Image2D,e);if(t){const n=t.findAsset(Id.Image);if(n){const t=document.createElement("img");t.src=this.assetManager.getAssetUrl(n.data.uri),this._imageElements[e]=t}}}))}restoreState(){this.setup.ins.restoreState.set()}}Px.typeName="CVCaptureTask",Px.text="Capture",Px.icon="camera",Px.ins={take:B("Picture.Take"),save:B("Picture.Save"),download:B("Picture.Download"),remove:B("Picture.Remove"),type:N("Picture.Type",Dx),quality:C("Picture.Quality",.85),restore:B("State.Restore")},Px.outs={ready:O("Picture.Ready"),updated:O("Picture.Updated",!1)};var Nx=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Ix=class extends Ti{constructor(e){super(),this.data=null,this.data=e,this._itemById=new Map,this._idByItem=new Map,this._containerId=i(4),this.onClickEmpty=this.onClickEmpty.bind(this),this.addEventListener("click",this.onClickEmpty)}setSelected(e,t){const n=this._idByItem.get(e);if(n){const e=document.getElementById(n);void 0===t&&(t=!e.hasAttribute("selected")),t?e.setAttribute("selected",""):e.removeAttribute("selected")}}toggleSelected(e){this.setSelected(e,void 0)}isSelected(e){const t=this._idByItem.get(e);if(t){return document.getElementById(t).hasAttribute("selected")}return!1}firstConnected(){this.setStyle({display:"flex",flexDirection:"column"}),this.classList.add("ff-list")}render(){this._itemById.clear(),this._idByItem.clear();const e=this.data;if(!e)return null;let t;return qs`${wi(e,(e=>t=this.getId(e)+this._containerId),(e=>{this._itemById.set(t,e),this._idByItem.set(e,t);const n=this.isItemSelected(e),r=this.isItemExpanded(e),s="ff-list-item "+this.getClass(e);return qs`<div class=${s} id=${t} ?selected=${n} ?expanded=${r}
                        @click=${this.onClick} @dblclick=${this.onDblClick}>
                    ${this.renderItem(e)}
                </div>`}))}`}renderItem(e){return String(e)}getId(e){return e.id||i()}getClass(e){return""}isItemSelected(e){return void 0!==e.selected&&e.selected}isItemExpanded(e){return void 0===e.expanded||e.expanded}onClick(e){const t=e.currentTarget,n=this._itemById.get(t.id);if(n){const t=this.data.indexOf(n);this.onClickItem(e,n,t)}e.stopPropagation()}onDblClick(e){const t=e.currentTarget,n=this._itemById.get(t.id);if(n){const t=this.data.indexOf(n);this.onDblClickItem(e,n,t)}e.stopPropagation()}onClickItem(e,t,n){}onDblClickItem(e,t,n){}onClickEmpty(e){}};Nx([ai({attribute:!1})],Ix.prototype,"data",void 0),Ix=Nx([Ci("ff-list")],Ix);const zx=Ix;var Bx=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Fx=class extends zx{constructor(){super(...arguments),this.selectedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-annotation-list")}renderItem(e){return qs`<div class="ff-flex-row ff-group"><div class="sv-task-item">${e.data.titles.EN}</div><div class="sv-task-item sv-item-border-l">${e.title}</div></div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t){this.dispatchEvent(new CustomEvent("select",{detail:{annotation:t}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{annotation:null}}))}};Bx([ai({attribute:!1})],Fx.prototype,"selectedItem",void 0),Fx=Bx([Ci("sv-annotation-list")],Fx);var Hx=n(3294),jx=n.n(Hx),Ux=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Yx=class extends Bw{connected(){super.connected(),this.task.on("update",this.onUpdate,this),this.task.ins.language.on("value",this.onUpdate,this)}disconnected(){this.task.ins.language.off("value",this.onUpdate,this),this.task.off("update",this.onUpdate,this),super.disconnected()}render(){const e=this.activeNode,t=e&&e.getComponent(bp,!0);if(!t)return qs`<div class="sv-placeholder">Please select a model to edit its annotations</div>`;const n=t.ins,r=this.task.ins.mode,s=t.getAnnotations(),i=t.activeAnnotation,o=i?qs`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${n.style}></sv-property-view>
            <sv-property-view .property=${n.scale}></sv-property-view>
            <sv-property-view .property=${n.offset}></sv-property-view>
            <sv-property-view .property=${n.color}></sv-property-view>
            <sv-property-view .property=${n.image}></sv-property-view>
            <sv-property-view .property=${n.marker}></sv-property-view>
            <sv-property-view .property=${this.task.ins.language}></sv-property-view>
            <div class="sv-indent">
                <sv-property-view .property=${n.article}></sv-property-view>
                <sv-property-view .property=${n.tags}></sv-property-view>
                <sv-property-view .property=${n.title}></sv-property-view>
                <div class="sv-label">Lead</div>
                <ff-text-edit name="lead" text=${n.lead.value} @change=${this.onTextEdit}></ff-text-edit>
            </div>
        </div>`:null;return qs`<div class="sv-commands">
            <ff-button text="Select" icon="select" index=${Kx.Off} selectedIndex=${r.value} @click=${this.onClickMode}></ff-button>       
            <ff-button text="Move" icon="move" index=${Kx.Move} selectedIndex=${r.value} @click=${this.onClickMode}></ff-button>       
            <ff-button text="Create" icon="create" index=${Kx.Create} selectedIndex=${r.value} @click=${this.onClickMode}></ff-button>       
            <ff-button text="Delete" icon="trash" ?disabled=${!i} @click=${this.onClickDelete}></ff-button>  
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item">${Ld.EN}</div><div class="sv-panel-header sv-task-item sv-item-border-l">${Ld[kd[this.task.ins.language.value]]}</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-annotation-list .data=${s} .selectedItem=${i} @select=${this.onSelectAnnotation}></sv-annotation-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${o}
                </div>
            </div>
        </div>`}onTextEdit(e){const t=this.task.activeAnnotations;if(t){const n=e.target,r=e.detail.text;"lead"===n.name&&t.ins.lead.setValue(jx()(r,{allowedTags:["b","i","em","strong","a"],allowedAttributes:{a:["href"]}}))}}onClickMode(e){this.task.ins.mode.setValue(e.target.index)}onClickDelete(){this.task.removeAnnotation()}onSelectAnnotation(e){this.task.activeAnnotations&&(this.task.activeAnnotations.activeAnnotation=e.detail.annotation)}};Yx=Ux([Ci("sv-annotations-task-view")],Yx);const Vx=Yx,$x=new he,Wx=new he,Gx=new ue,qx=new fe,Xx=new tt;var Kx;!function(e){e[e.Off=0]="Off",e[e.Move=1]="Move",e[e.Create=2]="Create"}(Kx||(Kx={}));class Jx extends zw{constructor(e,t){super(e,t),this.ins=this.addInputs(Jx.ins),this.outs=this.addOutputs(Jx.outs),this._activeAnnotations=null,this._defaultScale=1;const n=this.configuration;n.annotationsVisible=!0,n.gridVisible=!1,n.interfaceVisible=!0,n.bracketsVisible=!1}get activeAnnotations(){return this._activeAnnotations}set activeAnnotations(e){e!==this._activeAnnotations&&(this._activeAnnotations=e,this.emitUpdateEvent())}createView(){return new Vx(this)}activateTask(){this.startObserving(),super.activateTask(),this.synchLanguage()}deactivateTask(){this.stopObserving(),super.deactivateTask()}update(e){const{ins:t,outs:n}=this;if(!this.activeDocument)return!1;const r=this.activeDocument.setup.language;if(t.mode.changed&&this.emitUpdateEvent(),t.language.changed){const e=kd[kd[t.language.value]];return r.addLanguage(e),r.ins.language.setValue(e),n.language.setValue(e),!0}return this.synchLanguage(),!0}removeAnnotation(){const e=this.activeAnnotations;if(e){const t=e.activeAnnotation;t&&e.removeAnnotation(t)}}onPointerUp(e){if(e.isDragging)return;const t=this.activeAnnotations;if(!t)return;const n=t.getComponent(Tp);if(e.component===n){$x.fromArray(n.ins.position.value),Un(n.ins.rotation.value,Tp.rotationOrder,Gx),Wx.setScalar(1),qx.compose($x,Gx,Wx);const t=Xm(n.object3D,e.object3D),r=t.clone().invert(),s=n.localBoundingBox.clone().applyMatrix4(t);qx.copy(qx.multiply(r)),Xx.getNormalMatrix(qx);const i=e.view.pickPosition(e,s).applyMatrix4(qx).toArray(),o=e.view.pickNormal(e).applyMatrix3(Xx).toArray(),a=this.ins.mode.getValidatedValue();a===Kx.Create?(this.createAnnotation(i,o),e.stopPropagation=!0):a===Kx.Move&&(this.moveAnnotation(i,o),e.stopPropagation=!0)}}createAnnotation(e,t){const n=this.activeAnnotations;if(!n)return;const r=n.activeAnnotation;let s;r&&(s=r.toJSON(),s.id=iu.generateId());const i=n.getComponent(Tp),o=new iu(s),a=o.data;a.position=e,a.direction=t,s||(a.scale=this._defaultScale*(1/i.outs.unitScale.value)),n.addAnnotation(o),n.activeAnnotation=o,this.activeDocument.setup.language.ins.language.setValue(kd.EN)}moveAnnotation(e,t){const n=this.activeAnnotations;if(n){const r=n.activeAnnotation;r&&(r.data.position=e,r.data.direction=t,r.update(),n.updateAnnotation(r),this.emitUpdateEvent())}}onActiveDocument(e,t){if(super.onActiveDocument(e,t),e&&e.setup.language.outs.language.off("value",this.update,this),t){const e=t.getInnerComponent(up);this._defaultScale=.05*e.outs.boundingRadius.value,t.setup.language.outs.language.on("value",this.update,this)}}onActiveNode(e,t){const n=e?e.getComponent(bp,!0):null,r=t?t.getComponent(bp,!0):null;n&&(n.off("annotation-update",this.emitUpdateEvent,this),n.off("click",this.onAnnotationClick,this)),r&&(r.on("click",this.onAnnotationClick,this),r.on("annotation-update",this.emitUpdateEvent,this));const s=e?e.getComponent(Tp,!0):null,i=t?t.getComponent(Tp,!0):null;s&&s.off("pointer-up",this.onPointerUp,this),i&&i.on("pointer-up",this.onPointerUp,this),this.activeAnnotations=r}emitUpdateEvent(){this.emit("update")}onAnnotationClick(e){const t=document.getElementsByClassName("ff-text-edit");for(let e of t)e.blur()}synchLanguage(){const{ins:e}=this,t=this.activeDocument.setup.language;e.language.value!==t.outs.language.value&&e.language.setValue(t.outs.language.value,!0)}}Jx.typeName="CVAnnotationsTask",Jx.text="Annotations",Jx.icon="comment",Jx.ins={mode:N("Mode",Kx,Kx.Off),language:I("Task.Language",Object.keys(Ld).map((e=>Ld[e])),Ld[kd.EN])},Jx.outs={language:N("Interface.Language",kd,kd.EN)};var Zx=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let Qx=class extends zx{constructor(){super(...arguments),this.selectedItem=null,this.loadedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-derivative-list")}renderItem(e){const t=e===this.loadedItem;return qs`<ff-icon name=${t?"check":"empty"}></ff-icon>
            <span>${Pd[e.data.usage]} - ${Nd[e.data.quality]}</span>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t){this.dispatchEvent(new CustomEvent("select",{detail:{derivative:t}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{derivative:null}}))}};Zx([ai({attribute:!1})],Qx.prototype,"selectedItem",void 0),Zx([ai({attribute:!1})],Qx.prototype,"loadedItem",void 0),Qx=Zx([Ci("sv-derivative-list")],Qx);var eM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let tM=class extends Bw{render(){const e=this.activeNode,t=e&&e.model;if(!t)return qs`<div class="sv-placeholder">Please select a model node to inspect its derivatives</div>`;const n=t.derivatives.getByUsage(Pd.Web3D),r=t.ins.quality.value,s=t.derivatives.get(Pd.Web3D,r),i=t.outs.quality.value,o=t.derivatives.get(Pd.Web3D,i),a=s?qs``:null;return qs`<div class="ff-flex-row ff-flex-wrap">
        </div>
        <sv-derivative-list .data=${n} .selectedItem=${s} .loadedItem=${o} @select=${this.onSelectDerivative}></sv-derivative-list>
        ${a}`}onSelectDerivative(e){if(e.detail.derivative){this.activeNode.model.ins.quality.setValue(e.detail.derivative.data.quality)}}onActiveNode(e,t){e&&e.model&&(e.model.ins.quality.off("value",this.onUpdate,this),e.model.outs.quality.off("value",this.onUpdate,this),e.model.outs.updated.off("value",this.onUpdate,this)),t&&t.model&&(t.model.ins.quality.on("value",this.onUpdate,this),t.model.outs.quality.on("value",this.onUpdate,this),t.model.outs.updated.on("value",this.onUpdate,this)),super.onActiveNode(e,t)}};tM=eM([Ci("sv-derivatives-task-view")],tM);const nM=tM;class rM extends zw{constructor(e,t){super(e,t),this.ins=this.addInputs(rM.ins);const n=this.configuration;n.interfaceVisible=!1,n.bracketsVisible=!1,n.gridVisible=!1,n.annotationsVisible=!1}createView(){return new nM(this)}}rM.typeName="CVDerivativesTask",rM.text="Derivatives",rM.icon="hierarchy",rM.ins={};var sM,iM=n(9499),oM=n.n(iM),aM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let lM=sM=class extends o_{constructor(e,t,n,r){super(),this.closable=!1,this.value="",this.position="center",this.modal=!0,this.type=n||"info",this.caption=e||"Message",this.text=t||"",this.icon="",this.buttons=r||"ok",this.defaultValue="",this.value=""}static show(e,t,n,r,s,i){const o=new sM(e,t,n,r);return o.defaultValue=s,o.portal=i,(i||document.body).appendChild(o),new Promise(((e,t)=>{o.on("close",(t=>e(t.detail)))}))}close(e){this.dispatchCloseEvent(!1),this.remove()}dispatchCloseEvent(e,t=""){const n={ok:e,cancel:!e,text:t};this.dispatchEvent(new CustomEvent("close",{detail:n}))}firstConnected(){super.firstConnected(),this.classList.add("ff-message-box"),setTimeout((()=>this.classList.add("ff-transition")))}updated(){super.updated();this.getElementsByClassName("ff-default").item(0).focus()}render(){const e=this.icon||this.type,t=this.buttons||"ok",n=[];"ok"!==t&&"ok-cancel"!==t||n.push(qs`<ff-button class="ff-default" text="OK" @click=${this.onOK}></ff-button>`),"ok-cancel"!==t&&"cancel"!==t||n.push(qs`<ff-button text="Cancel" @click=${this.onCancel}></ff-button>`),"yes-no"===t&&(n.push(qs`<ff-button class="ff-default" text="Yes" @click=${this.onOK}></ff-button>`),n.push(qs`<ff-button text="No" @click=${this.onCancel}></ff-button>`));const r="prompt"===this.type?qs`<ff-line-edit class="ff-default" text=${this.defaultValue} @change=${this.onInputChange}></ff-line-edit>`:null;return qs`<div class="ff-flex-row ff-title">
                <ff-icon class="ff-type-icon" name=${e}></ff-icon>
                <div class="ff-content">
                    <div class="ff-caption">${this.caption}</div>
                    <div class="ff-text">${this.text}</div>
                    ${r}
                </div>
                ${this.closable?qs`<ff-button class="ff-close-button" icon="close" transparent @click=${this.onCancel}></ff-button>`:null}
            </div>
            <div class="ff-flex-row ff-buttons"><div class="ff-flex-spacer"></div>${n}</div>`}onOK(){this.dispatchCloseEvent(!0,this.value),this.remove()}onCancel(){this.dispatchCloseEvent(!1),this.remove()}onInputChange(e){this.value=e.detail.text}};aM([ai({type:String})],lM.prototype,"type",void 0),aM([ai({type:String})],lM.prototype,"caption",void 0),aM([ai({type:String})],lM.prototype,"text",void 0),aM([ai({type:String})],lM.prototype,"icon",void 0),aM([ai({type:String})],lM.prototype,"buttons",void 0),aM([ai({type:String})],lM.prototype,"defaultValue",void 0),aM([ai({type:Boolean})],lM.prototype,"closable",void 0),lM=sM=aM([Ci("ff-message-box")],lM);const cM=lM;var dM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let uM=class extends Bw{connected(){super.connected(),this.task.outs.article.on("value",this.onArticleChange,this)}disconnected(){this.task.outs.article.off("value",this.onArticleChange,this),super.disconnected()}render(){const e=this.task,t=e.articles,n=e.activeArticle;if(!t)return qs`<div class="sv-placeholder">Please select a scene or model node to edit its articles.</div>`;const r=e.ins,s=n?qs`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${this.task.ins.language}></sv-property-view>
            <div class="sv-label">Title</div>
            <ff-line-edit name="title" text=${r.title.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">Tags</div>
            <ff-line-edit name="tags" text=${r.tags.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">Lead</div>
            <ff-text-edit name="lead" text=${r.lead.value} @change=${this.onTextEdit}></ff-text-edit>
            <div class="sv-label">URI</div>
            <ff-line-edit name="uri" text=${r.uri.value} @change=${this.onTextEdit}></ff-line-edit>
        </div>`:null;n&&n.uri;return qs`<div class="sv-commands">
            <ff-button text="Create" icon="create" @click=${this.onClickCreate}></ff-button>              
            <ff-button text="Delete" icon="trash" ?disabled=${!n} @click=${this.onClickDelete}></ff-button>  
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item">${Ld.EN}</div><div class="sv-panel-header sv-task-item sv-item-border-l">${Ld[kd[this.task.ins.language.value]]}</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-article-list .data=${t.slice()} .selectedItem=${n} @select=${this.onSelectArticle} @edit=${this.onEditArticle}></sv-article-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${s}
                </div>
            </div>
        </div>`}onClickCreate(){this.task.ins.create.set()}onClickEdit(){this.task.ins.edit.set()}onClickDelete(){cM.show("Delete Article","Are you sure?","warning","ok-cancel").then((e=>{e.ok&&this.task.ins.delete.set()}))}onTextEdit(e){const t=this.task,n=e.target,r=e.detail.text;"title"===n.name&&t.ins.title.setValue(r),"lead"===n.name&&t.ins.lead.setValue(r),"tags"===n.name&&t.ins.tags.setValue(r),"uri"===n.name&&t.ins.uri.setValue(r)}onSelectArticle(e){const t=e.detail.article;this.task.reader.ins.articleId.setValue(t?t.id:"")}onEditArticle(e){this.task.ins.edit.set()}onArticleChange(){this.onUpdate(),this.task.ins.edit.set()}};uM=dM([Ci("sv-articles-task-view")],uM);const hM=uM;let mM=class extends zx{constructor(){super(...arguments),this.selectedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-document-list")}renderItem(e){return qs`<div class="ff-flex-row ff-group"><div class="sv-task-item">${e.defaultTitle}</div><div class="sv-task-item sv-item-border-l">${e.title}</div></div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t){this.dispatchEvent(new CustomEvent("select",{detail:{article:t}}))}onDblClickItem(e,t,n){this.dispatchEvent(new CustomEvent("edit",{detail:{article:t}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{article:null}}))}};dM([ai({attribute:!1})],mM.prototype,"selectedItem",void 0),mM=dM([Ci("sv-article-list")],mM);class pM extends zw{constructor(e,t){super(e,t),this.ins=this.addInputs(pM.ins),this.outs=this.addOutputs(pM.outs),this.meta=null,this.reader=null;const n=this.configuration;n.interfaceVisible=!0,n.bracketsVisible=!0}get articles(){return this.meta&&this.meta.articles.items}get activeArticle(){return this.outs.article.value}get mediaManager(){return this.getMainComponent(Lw)}get assetWriter(){return this.getMainComponent(Nw)}activateTask(){this.startObserving(),super.activateTask(),this.synchLanguage()}deactivateTask(){this.reader.ins.articleId.setValue(""),this.mediaManager.open(null),this.stopObserving(),super.deactivateTask()}update(e){const t=this.ins,n=this.outs,r=this.meta,s=this.activeArticle,i=s?this.mediaManager.getAssetByPath(s.uri):null;if(!this.activeDocument)return!1;const o=this.activeDocument.setup.language;if(t.language.changed){const e=kd[kd[t.language.value]];o.addLanguage(e),o.ins.language.setValue(e)}if(r&&t.create.changed){const e=new Ad,t=Lw.articleFolder;e.uri=`${t}/new-article-${e.id}-${kd.EN}.html`;const n=this.getGraphComponent(Pw,!0);n&&n.addFile(e.uri),r.articles.append(e),this.reader.ins.articleId.setValue(e.id),this.reader.outs.count.setValue(r.articles.length),o.ins.language.setValue(kd.EN)}if(s){if(t.edit.changed&&(i?this.mediaManager.open(i):s.uri&&this.createEditArticle(s)),t.delete.changed&&(this.deleteArticle(s),this.reader.outs.count.setValue(r.articles.length)),t.title.changed&&(s.title=t.title.value,!i)){const e=this.getSafeArticlePath(t.title.value+"-"+kd[t.language.value]);s.uri=e,t.uri.setValue(e,!0)}t.uri.changed&&(s.uri=t.uri.value),(t.lead.changed||t.tags.changed)&&(s.lead=t.lead.value,s.tags=t.tags.value.split(",").map((e=>e.trim())).filter((e=>!!e)))}else t.edit.changed&&this.mediaManager.open(null);return n.article.set(),!0}createView(){return new hM(this)}deleteArticle(e){this.meta.articles.removeItem(e);const t=this.mediaManager.getAssetByPath(e.uri);t&&this.mediaManager.delete(t);this.system.getComponents(bp).forEach((t=>{t.getAnnotations().forEach((n=>{n.data.articleId===e.id&&(n.set("articleId",""),t.updateAnnotation(n))}))}))}createEditArticle(e){const t=e.uri;this.assetWriter.putText(`<h1>${e.title}</h1>`,t).then((()=>this.mediaManager.refresh())).then((()=>{const e=this.mediaManager.getAssetByPath(t);e&&this.mediaManager.open(e)})).catch((e=>cM.show("Error",`Failed to create article at '${t}'`,"error")))}getSafeArticlePath(e){if(!e)return"";const t=oM()(e,{replacement:"-"}).replace(/\s/g,"-").toLowerCase();return Lw.articleFolder+"/"+t+".html"}onActiveDocument(e,t){e&&(e.setup.language.outs.language.off("value",this.onDocumentLanguageChange,this),this.reader.outs.article.off("value",this.onArticleChange,this),this.reader=null),t&&(this.reader=t.setup.reader,this.reader.outs.article.on("value",this.onArticleChange,this),t.setup.language.outs.language.on("value",this.onDocumentLanguageChange,this))}onActiveNode(e,t){e&&(this.meta=null),t&&(t.meta||t.createComponent(Od),this.meta=t.meta),this.onArticleChange()}onArticleChange(){const e=this.ins,t=this.outs,n=this.meta;let r=this.reader.activeArticle;if(n&&r&&n.articles.getById(r.id)){if(r=n.articles.getById(r.id),e.title.setValue(r.title,!0),e.lead.setValue(r.lead,!0),e.tags.setValue(r.tags.join(", "),!0),void 0===r.uri){const t=Lw.articleFolder;r.uri=`${t}/new-article-${r.id}-${kd[e.language.value]}.html`}e.uri.setValue(r.uri,!0),t.article.setValue(r)}else e.title.setValue("",!0),e.lead.setValue("",!0),e.tags.setValue("",!0),e.uri.setValue("",!0),t.article.setValue(null)}onDocumentLanguageChange(){const e=this.activeArticle,{ins:t}=this;if(this.synchLanguage(),e&&void 0===e.uri){const n=Lw.articleFolder;e.uri=`${n}/new-article-${e.id}-${kd[t.language.value]}.html`}}synchLanguage(){const{ins:e}=this,t=this.activeDocument.setup.language;e.language.value!==t.outs.language.value&&e.language.setValue(t.outs.language.value,!0)}}pM.typeName="CVArticlesTask",pM.text="Articles",pM.icon="article",pM.ins={create:B("Articles.Create"),edit:B("Articles.Edit"),delete:B("Articles.Delete"),title:R("Article.Title"),lead:R("Article.Lead"),tags:R("Article.Tags"),uri:R("Article.URI"),language:I("Task.Language",Object.keys(Ld).map((e=>Ld[e])),Ld[kd.EN])},pM.outs={article:z("Article",Ad)};var fM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let gM=class extends Bw{constructor(){super(...arguments),this.featureConfigMode=!1}get snapshots(){return this.activeDocument.setup.snapshots}renderFeatureMenu(){const e=this.snapshots.targetFeatures,t=Object.keys(e).map((t=>{const n=t[0].toUpperCase()+t.substr(1),r=!!e[t];return qs`<ff-button text=${n} name=${t} ?selected=${r} @click=${this.onClickFeature}></ff-button>`}));return qs`<div class="sv-commands">
            <ff-button text="OK" icon="" @click=${this.onFeatureMenuConfirm}></ff-button>
            <ff-button text="Cancel" icon="" @click=${this.onFeatureMenuCancel}></ff-button>
        </div><div class="ff-flex-item-stretch sv-tour-feature-menu">${t}</div>`}render(){const e=this.task,t=e.tours;if(!t)return qs`<div class="sv-placeholder">Please select a document to edit its tours.</div>`;if(!t.ins.enabled.value)return qs`<div class="sv-placeholder">Please activate the tour button in the main menu.</div>`;if(this.featureConfigMode)return this.renderFeatureMenu();const n=t.tours,r=t.activeTour,s=e.ins,i=r?qs`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${this.task.ins.language}></sv-property-view>
            <div class="sv-label">Title</div>
            <ff-line-edit name="title" text=${s.tourTitle.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">Tags</div>
            <ff-line-edit name="tags" text=${s.tourTags.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">Lead</div>
            <ff-text-edit name="lead" text=${s.tourLead.value} @change=${this.onTextEdit}></ff-text-edit>
        </div>`:null;return qs`<div class="sv-commands">
            <ff-button title="Create Tour" icon="create" @click=${this.onClickCreate}></ff-button>
            <ff-button title="Move Tour Up" icon="up" ?disabled=${!r} @click=${this.onClickUp}></ff-button>
            <ff-button title="Move Tour Down" icon="down" ?disabled=${!r} @click=${this.onClickDown}></ff-button>
            <ff-button title="Delete Tour" icon="trash" ?disabled=${!r} @click=${this.onClickDelete}></ff-button>
            <ff-button title="Snapshot Configuration" icon="bars" @click=${this.onClickConfig}></ff-button>
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item">${Ld.EN}</div><div class="sv-panel-header sv-task-item sv-item-border-l">${Ld[kd[this.task.ins.language.value]]}</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-tour-list .data=${n.slice()} .selectedItem=${r} .language=${this.task.ins.language.value} @select=${this.onSelectTour}></sv-tour-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${i}
                </div>
            </div>
        </div>`}onClickCreate(){this.task.ins.createTour.set()}onClickDelete(){this.task.ins.deleteTour.set()}onClickUp(){this.task.ins.moveTourUp.set()}onClickDown(){this.task.ins.moveTourDown.set()}onClickConfig(){this.featureConfigMode=!0,this.requestUpdate()}onSelectTour(e){this.task.tours.ins.tourIndex.setValue(e.detail.index)}onFeatureMenuConfirm(){this.snapshots.updateTargets(),this.featureConfigMode=!1,this.requestUpdate()}onFeatureMenuCancel(){this.featureConfigMode=!1,this.requestUpdate()}onClickFeature(e){const t=this.snapshots.targetFeatures,n=e.target.name;t[n]=!t[n],this.requestUpdate()}onTextEdit(e){const t=this.task,n=e.target,r=e.detail.text;"title"===n.name?t.ins.tourTitle.setValue(jx()(r)):"lead"===n.name?t.ins.tourLead.setValue(r):"tags"===n.name&&t.ins.tourTags.setValue(r)}onActiveDocument(e,t){e&&e.setup.tours.outs.tourIndex.off("value",this.onUpdate,this),t&&t.setup.tours.outs.tourIndex.on("value",this.onUpdate,this),this.requestUpdate()}};gM=fM([Ci("sv-tours-task-view")],gM);const vM=gM;let yM=class extends zx{constructor(){super(...arguments),this.selectedItem=null,this.language=null}firstConnected(){super.firstConnected(),this.classList.add("sv-tour-list")}renderItem(e){const t=this.language;return 0===Object.keys(e.titles).length&&(e.titles.EN=e.title),qs`<div class="ff-flex-row ff-group"><div class="sv-task-item">${e.titles.EN}</div><div class="sv-task-item sv-item-border-l">${e.titles[kd[t]]||"undefined"}</div></div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t,n){this.dispatchEvent(new CustomEvent("select",{detail:{tour:t,index:n}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{tour:null,index:-1}}))}};fM([ai({attribute:!1})],yM.prototype,"selectedItem",void 0),fM([ai({attribute:!1})],yM.prototype,"language",void 0),yM=fM([Ci("sv-tour-list")],yM);let _M=0,bM=0;class wM extends zw{constructor(e,t){super(e,t),this.ins=this.addInputs(wM.ins),this.outs=this.addOutputs(wM.outs),this.tours=null,this.machine=null;this.configuration.bracketsVisible=!1}create(){super.create(),this.startObserving()}dispose(){this.stopObserving(),super.dispose()}update(e){const t=this.ins,n=this.tours,r=this.machine;if(!n||!this.activeDocument)return!1;const s=n.tours,i=n.outs.tourIndex.value,o=s[i],a=this.activeDocument.setup.language;if(t.language.changed){const e=kd[kd[t.language.value]];a.addLanguage(e),a.ins.language.setValue(e)}if(o){const e=o.steps,a=n.outs.stepIndex.value,l=e[a];if(t.createStep.changed){const t=r.setState({values:r.getCurrentValues(),curve:$i.EaseOutQuad,duration:1.5,threshold:.5});return e.splice(a+1,0,{title:"",titles:{},id:t}),e[a+1].titles.EN="New Step #"+bM++,n.ins.stepIndex.setValue(a+1),!0}if(l){if(t.stepTitle.changed||t.stepCurve.changed||t.stepDuration.changed||t.stepThreshold.changed)return n.stepTitle=t.stepTitle.value,r.ins.curve.setValue(t.stepCurve.value),r.ins.duration.setValue(t.stepDuration.value),r.ins.threshold.setValue(t.stepThreshold.value),n.ins.stepIndex.setValue(a),!0;if(t.updateStep.changed)return r.ins.store.set(),!0;if(t.deleteStep.changed)return e.splice(a,1),r.ins.delete.set(),n.ins.stepIndex.setValue(a),!0;if(a>0&&t.moveStepUp.changed)return e[a]=e[a-1],e[a-1]=l,n.ins.stepIndex.setValue(a-1),!0;if(a<e.length-1&&t.moveStepDown.changed)return e[a]=e[a+1],e[a+1]=l,n.ins.stepIndex.setValue(a+1),!0}if(t.tourTitle.changed||t.tourLead.changed||t.tourTags.changed)return n.title=t.tourTitle.value,n.lead=t.tourLead.value,n.taglist=t.tourTags.value.split(",").map((e=>e.trim())).filter((e=>!!e)),n.ins.tourIndex.set(),!0;if(t.deleteTour.changed)return o.steps.forEach((e=>r.deleteState(e.id))),s.splice(i,1),n.ins.tourIndex.setValue(i),n.outs.count.setValue(s.length),!0;if(i>0&&t.moveTourUp.changed)return s[i]=s[i-1],s[i-1]=o,n.ins.tourIndex.setValue(i-1),!0;if(i<s.length-1&&t.moveTourDown.changed)return s[i]=s[i+1],s[i+1]=o,n.ins.tourIndex.setValue(i+1),!0}return!t.createTour.changed||(s.splice(i+1,0,{title:"",titles:{},lead:"",leads:{},tags:[],taglist:{},steps:[]}),s[i+1].titles.EN="New Tour #"+_M++,n.ins.tourIndex.setValue(i+1),n.outs.count.setValue(s.length),a.ins.language.setValue(kd.EN),!0)}createView(){return new vM(this)}activateTask(){super.activateTask(),this.tours&&this.tours.ins.enabled.setValue(!0),this.synchLanguage()}deactivateTask(){this.tours&&0===this.tours.outs.count.value&&this.tours.ins.enabled.setValue(!1),super.deactivateTask()}onActiveDocument(e,t){e&&(this.isActiveTask&&this.tours.ins.enabled.setValue(!1),this.tours.outs.tourIndex.off("value",this.onTourChange,this),this.tours.outs.stepIndex.off("value",this.onStepChange,this),e.setup.language.outs.language.off("value",this.onDocumentLanguageChange,this),this.tours=null,this.machine=null),t&&(this.tours=t.setup.tours,this.machine=this.tours.getComponent(sp),this.tours.outs.tourIndex.on("value",this.onTourChange,this),this.tours.outs.stepIndex.on("value",this.onStepChange,this),t.setup.language.outs.language.on("value",this.onDocumentLanguageChange,this),this.isActiveTask&&this.tours.ins.enabled.setValue(!0)),this.changed=!0}onTourChange(){const e=this.ins,t=this.tours,n=t.activeTour;e.tourTitle.setValue(n?t.title:"",!0),e.tourLead.setValue(n?t.lead:"",!0),e.tourTags.setValue(n?t.taglist.join(", "):"",!0)}onStepChange(){const e=this.ins,t=this.tours.activeStep,n=t?this.machine.getState(t.id):null;e.stepTitle.setValue(t?this.tours.stepTitle:"",!0),e.stepCurve.setValue(n?n.curve:$i.Linear,!0),e.stepDuration.setValue(n?n.duration:1,!0),e.stepThreshold.setValue(n?n.threshold:.5,!0)}onDocumentLanguageChange(){const e=this.tours;this.onTourChange(),this.onStepChange(),e.ins.tourIndex.setValue(e.outs.tourIndex.value),this.synchLanguage()}synchLanguage(){const{ins:e}=this,t=this.activeDocument.setup.language;e.language.value!==t.outs.language.value&&e.language.setValue(t.outs.language.value,!0)}}wM.typeName="CVToursTask",wM.text="Tours",wM.icon="globe",wM.ins={createTour:B("Tours.Create"),deleteTour:B("Tours.Delete"),moveTourUp:B("Tours.MoveUp"),moveTourDown:B("Tours.MoveDown"),tourTitle:R("Tour.Title"),tourLead:R("Tour.Lead"),tourTags:R("Tour.Tags"),updateStep:B("Step.Update"),createStep:B("Step.Create"),deleteStep:B("Step.Delete"),moveStepUp:B("Step.MoveUp"),moveStepDown:B("Step.MoveDown"),stepTitle:R("Step.Title"),stepCurve:N("Step.Curve",$i),stepDuration:S("Step.Duration",1),stepThreshold:C("Step.Threshold",.5),language:I("Task.Language",Object.keys(Ld).map((e=>Ld[e])),Ld[kd.EN])},wM.outs={};var xM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let MM=class extends Bw{constructor(){super(...arguments),this._dragCounter=0,this.selectedIndex=-1,this.optionText=["No","Yes"]}connected(){super.connected(),this.task.on("update",this.onUpdate,this),this.activeDocument.setup.audio.outs.narrationPlaying.on("value",this.onUpdate,this)}disconnected(){this.activeDocument.setup.audio.outs.narrationPlaying.off("value",this.onUpdate,this),this.task.off("update",this.onUpdate,this),super.disconnected()}render(){if(!this.task.audioManager)return;const e=this.task.ins,t=this.task.audioManager.getAudioList(),n=t[this.selectedIndex],r=!e.isNarration.value&&t.some((e=>e.id===this.task.audioManager.narrationId)),s=n?qs`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${e.title}></sv-property-view>
            <sv-property-view .property=${e.language}></sv-property-view>
            <div class="sv-indent">
                <sv-property-view id="filename" .property=${e.filepath} @drop=${this.onDropFile} @dragenter=${this.onDragEnter} @dragover=${this.onDragOver} @dragleave=${this.onDragLeave}></sv-property-view>
                <div class="sv-commands">
                    <sv-property-boolean .property=${e.isNarration} .text=${this.optionText} .customLabelStyle=${"sv-task-option-base-align"} ?disabled=${r}></sv-property-boolean>
                </div>
                <div class="sv-commands">
                    <ff-button text="Play" @click=${this.onClickPlay}></ff-button>
                    <ff-button text="Stop" ?disabled=${!this.task.audioManager.outs.narrationPlaying.value} @click=${this.onClickStop}></ff-button>
                </div>
            </div>
        </div>`:null;return qs`<div class="sv-commands">
            <ff-button text="Create" icon="create" @click=${this.onClickCreate}></ff-button>       
            <ff-button text="Delete" icon="trash" ?disabled=${!n} @click=${this.onClickDelete}></ff-button>  
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item sv-task-item-full">Audio Elements</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-audio-list .data=${t} .selectedItem=${n} @select=${this.onSelectAudio}></sv-annotation-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${s}
                </div>
            </div>
        </div>`}onClickCreate(){this.task.ins.create.set()}onClickDelete(){this.task.ins.delete.set()}onClickPlay(){this.activeDocument.setup.audio.setupAudio(),this.task.ins.play.set()}onClickStop(){this.task.ins.stop.set()}onSelectAudio(e){this.selectedIndex=e.detail.index,this.task.ins.activeId.setValue(e.detail.clip?e.detail.clip.id:"")}onDropFile(e){e.preventDefault();let t="",n=null;if(1===e.dataTransfer.files.length)n=e.dataTransfer.files.item(0),t=n.name;else{const n=e.dataTransfer.getData("text/plain");n.length>0&&(t=n)}if(t.toLowerCase().endsWith(".mp3"))if(null!==n){const e=this.system.getMainComponent(Lw);e.uploadFile(t,n,e.root).then((()=>this.task.ins.filepath.setValue(t))).catch((e=>{zi.show("Audio file upload failed.","warning"),this.task.ins.filepath.setValue("")}))}else this.task.ins.filepath.setValue(t);else zi.show("Unable to load - Only .mp3 audio files are currently supported.","warning");document.getElementById("filename").classList.remove("sv-drop-zone"),this._dragCounter=0}onDragEnter(e){document.getElementById("filename").classList.add("sv-drop-zone"),e.preventDefault(),this._dragCounter++}onDragOver(e){e.preventDefault()}onDragLeave(e){this._dragCounter--;const t=document.getElementById("filename");0===this._dragCounter&&t.classList.remove("sv-drop-zone")}};MM=xM([Ci("sv-audio-task-view")],MM);const SM=MM;let TM=class extends zx{constructor(){super(...arguments),this.selectedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-audio-list")}renderItem(e){return qs`<div class="ff-flex-row ff-group"><div class="sv-task-item">${e.name}</div></div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t,n){this.dispatchEvent(new CustomEvent("select",{detail:{clip:t,index:n}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{clip:null,index:-1}}))}};xM([ai({attribute:!1})],TM.prototype,"selectedItem",void 0),TM=xM([Ci("sv-audio-list")],TM);class CM extends zw{constructor(e,t){super(e,t),this.ins=this.addInputs(CM.ins),this.outs=this.addOutputs(CM.outs),this.audioManager=null}createView(){return new SM(this)}activateTask(){this.startObserving(),super.activateTask(),this.synchLanguage()}deactivateTask(){this.stopObserving(),super.deactivateTask()}update(){const e=this.ins,t=this.audioManager;if(!t)return!1;const n=t.getAudioClip(e.activeId.value),r=this.activeDocument.setup.language;if(e.language.changed){const t=kd[kd[e.language.value]];r.addLanguage(t),r.ins.language.setValue(t)}return e.create.changed?(t.addAudioClip({id:Cd.generateId(),name:"New Audio Element",uris:{}}),!0):e.delete.changed?(t.removeAudioClip(e.activeId.value),!0):e.play.changed?(t.play(e.activeId.value),!0):e.stop.changed?(t.stop(),!0):((e.title.changed||e.filepath.changed)&&(n.name=e.title.value,n.uris[kd[e.language.value]]=e.filepath.value),e.isNarration.changed&&(t.narrationId=e.isNarration.value?n.id:""),!0)}onActiveDocument(e,t){super.onActiveDocument(e,t),e&&(this.ins.activeId.off("value",this.onAudioChange,this),e.setup.language.outs.language.off("value",this.onDocumentLanguageChange,this),this.audioManager=null),t&&(this.audioManager=t.setup.audio,this.ins.activeId.on("value",this.onAudioChange,this),t.setup.language.outs.language.on("value",this.onDocumentLanguageChange,this))}onAudioChange(){const e=this.ins,t=this.audioManager.getAudioClip(e.activeId.value);e.title.setValue(t?t.name:"",!0),e.filepath.setValue(t?t.uris[kd[e.language.value]]:"",!0),e.isNarration.setValue(!!t&&this.audioManager.narrationId===t.id,!0)}onDocumentLanguageChange(){this.onAudioChange(),this.synchLanguage()}synchLanguage(){const{ins:e}=this,t=this.activeDocument.setup.language;e.language.value!==t.outs.language.value&&e.language.setValue(t.outs.language.value,!0)}}var EM;CM.typeName="CVAudioTask",CM.text="Audio",CM.icon="audio",CM.ins={create:B("Audio.Create"),delete:B("Audio.Delete"),play:B("Audio.Play"),stop:B("Audio.Stop"),activeId:R("Audio.ActiveId",""),title:R("Audio.Title",""),filepath:R("Audio.Filepath",null),isNarration:O("Audio.IsNarration",!1),language:I("Task.Language",Object.keys(Ld).map((e=>Ld[e])),Ld[kd.EN])},CM.outs={},function(e){e[e.QC=0]="QC",e[e.Authoring=1]="Authoring",e[e.Edit=2]="Edit",e[e.Expert=3]="Expert",e[e.Standalone=4]="Standalone"}(EM||(EM={}));const kM={[EM.Edit]:[Sx,Px,rM,Jx,pM,wM,CM,cx],[EM.QC]:[Sx,Px,rM,cx],[EM.Authoring]:[Jx,pM,wM,CM,cx],[EM.Expert]:[Sx,Px,rM,Jx,pM,wM,CM,cx],[EM.Standalone]:[Sx,Px,rM,Jx,pM,wM,cx]};class LM extends ji{constructor(e,t){super(e,t),this.ins=this.addInputs(LM.ins),this.scope=Fi.Node}get languageManager(){return this.getSystemComponent(Dd)}get expertMode(){return this.ins.mode.getValidatedValue()===EM.Expert}update(e){const t=this.ins,n=this.languageManager;if(t.mode.changed){this.scopedComponents.forEach((e=>e.dispose()));kM[t.mode.getValidatedValue()].forEach((e=>this.createComponent(e)))}if(t.language.changed){const e=kd[kd[t.language.value]];n&&(n.addLanguage(e),n.ins.language.setValue(e))}return!0}activateComponent(e){e.activateTask()}deactivateComponent(e){e.deactivateTask()}onActiveComponent(e,t){}}LM.typeName="CVTaskProvider",LM.isSystemSingleton=!0,LM.componentType=zw,LM.ins={mode:N("Tasks.Mode",EM),language:I("Task.Language",Object.keys(Ld).map((e=>Ld[e])),Ld[kd.EN])};class AM extends W{constructor(e,t){super(e,t),this.ins=this.addInputs(AM.ins),this.referrer="",this.beforeUnload=this.beforeUnload.bind(this)}get taskProvider(){return this.getMainComponent(LM)}get documentProvider(){return this.getMainComponent(Lp)}get assetManager(){return this.getMainComponent(Zi)}get assetWriter(){return this.getMainComponent(Nw)}get mediaManager(){return this.system.getMainComponent(Lw)}get meta(){return this.system.getComponent(Od)}get standaloneFileManager(){return this.system.getComponent(Pw,!0)}create(){super.create(),window.addEventListener("beforeunload",this.beforeUnload)}dispose(){window.removeEventListener("beforeunload",this.beforeUnload),super.dispose()}update(){const e=this.ins;e.exit.changed&&this.referrer&&location.assign(this.referrer);const t=this.documentProvider.activeComponent;if(t){const n=this.taskProvider.ins.mode.getValidatedValue(),r=n===EM.QC?{model:!0}:null;if(e.save.changed){const e=t.deflateDocument(r),s=JSON.stringify(e,((e,t)=>"number"==typeof t?parseFloat(t.toFixed(7)):t));if(n!==EM.Standalone)this.assetWriter.putJSON(s,t.assetPath).then((()=>new zi(`Successfully uploaded file to '${t.assetPath}'`,"info",4e3))).catch((e=>new zi(`Failed to upload file to '${t.assetPath}'`,"error",8e3)));else{const e=this.standaloneFileManager,n=[],r=this.assetManager.getAssetName(t.assetPath);n.push({name:r,lastModified:new Date,input:s});e.getFiles().filter((e=>null!=e&&!e.name.endsWith(".json"))).forEach((t=>{n.push({name:e.getFilePath(t.name)+t.name,lastModified:new Date,input:t})})),(e=>new Response(F_(async function*(e){const t=[];let n=0n,r=0n,s=0;for await(const i of e){yield X_(i),yield i.i,yield*K_(i);const e=i.l>=0xffffffffn||n>=0xffffffffn;yield J_(i,e),t.push(Z_(i,n,e)),t.push(i.i),e&&(t.push(Q_(i,n)),n+=8n),r++,n+=BigInt(46+i.i.length)+i.l,s||(s=e)}let i=0n;for(const e of t)yield e,i+=BigInt(e.length);if(s||n>=0xffffffffn){const e=P_(76);e.setUint32(0,1347094022),e.setBigUint64(4,BigInt(44),1),e.setUint32(12,755182848),e.setBigUint64(24,r,1),e.setBigUint64(32,r,1),e.setBigUint64(40,i,1),e.setBigUint64(48,n,1),e.setUint32(56,1347094023),e.setBigUint64(64,n+i,1),e.setUint32(72,1,1),yield N_(e)}const o=P_(22);o.setUint32(0,1347093766),o.setUint16(8,z_(r),1),o.setUint16(10,z_(r),1),o.setUint32(12,I_(i),1),o.setUint32(16,I_(n),1),yield N_(o)}(async function*(e){for await(const t of e)t instanceof File||t instanceof Response?yield B_(t):yield B_(t.input,t.name,t.lastModified)}(e))),{headers:{"Content-Type":"application/zip","Content-Disposition":"attachment"}}))(n).blob().then((e=>{const t=URL.createObjectURL(e);Bc(t,"voyager-scene.zip")}))}}if(e.download.changed){const e=t.deflateDocument(r),n=JSON.stringify(e,null,2),s=this.assetManager.getAssetName(t.assetPath);zc(n,s)}}return!1}beforeUnload(e){e.returnValue="x"}}AM.typeName="CVStoryApplication",AM.isSystemSingleton=!0,AM.ins={exit:B("Application.Exit"),save:B("Document.Save"),download:B("Document.Download")};class DM extends ${createComponents(){this.createComponent(Lw),this.createComponent(Nw),this.createComponent(AM)}}DM.typeName="NVoyagerStory";class OM extends ${get taskManager(){return this.getComponent(LM)}createComponents(){this.createComponent(LM)}}OM.typeName="NVTasks";const RM=[AM,Nw,Lw,Pw,LM,cx,Sx,Px,Jx,pM,wM,rM,CM,DM,OM];class PM{constructor(e,t){this.explorer=new R_(null,t,!0),this.props=t||{},this.system=this.explorer.system,this.commander=this.explorer.commander;this.system.registry.add(RM),this.system.graph.createCustomNode(DM,"Story"),this.system.graph.createCustomNode(OM,"Tasks"),this.system.getMainComponent(os).ins.viewportBrackets.setValue(!0),e&&new mT(this).appendTo(e),this.documentProvider.createDocument(as),this.evaluateProps()}get assetReader(){return this.system.getMainComponent(Nc)}get assetManager(){return this.system.getMainComponent(Zi)}get mediaManager(){return this.system.getMainComponent(Lw)}get documentProvider(){return this.system.getMainComponent(Lp)}get explorerApp(){return this.explorer}setBaseUrl(e){this.assetManager.baseUrl=e,this.mediaManager.rootUrl=e}loadDocument(e,t){return this.assetReader.getJSON(e).then((n=>this.documentProvider.amendDocument(n,e,t))).catch((e=>{throw console.warn(`error while loading document: ${e.message}`),e}))}loadModel(e,t){return this.documentProvider.appendModel(e,t)}loadGeometry(e,t,n,r,s){return this.documentProvider.appendGeometry(e,t,n,r,s)}evaluateProps(){const e=this.props;e.referrer=e.referrer||s("referrer"),e.mode=e.mode||s("mode")||"prep",e.expert=void 0!==e.expert?e.expert:"false"!==s("expert");const t=e.mode.toLowerCase();if(t.startsWith("stand")){const t=new URL(window.location.href);t.searchParams.delete("root"),t.searchParams.delete("document"),window.history.replaceState(null,null,t),e.root=null,e.document=null}this.explorer.evaluateProps();const n=this.system.getMainComponent(AM);n.referrer=e.referrer;let r=EM.Edit;t.startsWith("au")?r=EM.Authoring:t.startsWith("qc")?r=EM.QC:t.startsWith("ex")?r=EM.Expert:t.startsWith("stand")&&(r=EM.Standalone,n.createComponent(Pw)),this.mediaManager.rootUrl=this.assetManager.baseUrl;this.system.getMainComponent(LM).ins.mode.setValue(r)}}window.VoyagerStory=PM;var NM,IM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let zM=NM=class extends Ti{constructor(){super(),this.text="Panel",this.closable=!0,this.movable=!0,this.active=!1,this.header=null,this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.addEventListener("dragover",this.onDragOver),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDrop),this.id=i(),this.contentId="",this.dropZone="none"}static getPanelById(e){return document.getElementById(e)}get parentStack(){return this.parentElement}setLayout(e,t){this.text=e.text||"",this.closable=e.closable||!1,this.movable=e.movable||!1,this.contentId=e.contentId;const n=t.get(e.contentId);if(n){const e=n();e.classList.add("ff-fullsize"),this.appendChild(e)}else console.warn(`failed to create content element for id: ${e.contentId}`)}getLayout(){return{contentId:this.contentId,text:this.text,closable:this.closable,movable:this.movable}}movePanel(e,t){const n=NM.getPanelById(e),r=n.parentStack;if(n===this&&1===r.getPanelCount())return;const s=this.parentStack;if("before"===t||"after"===t){if(n===this)return;let e=this;if("after"===t){const t=this.header.nextElementSibling;e=t?t.panel:null}if(n===e)return;r.removePanel(n),s.insertPanel(n,e),s.activatePanel(n)}else{r.removePanel(n);s.parentElement.insertPanel(n,s,t)}setTimeout((()=>window.dispatchEvent(new CustomEvent("resize"))),0)}activatePanel(){this.parentStack.activatePanel(this)}closePanel(){this.parentStack.removePanel(this),setTimeout((()=>window.dispatchEvent(new CustomEvent("resize"))),0)}update(e){super.update(e),this.header&&this.header.requestUpdate(),e.has("active")&&(this.style.display=this.active?"flex":"none")}firstUpdated(){this.setStyle({flex:"1 1 100%",position:"relative",flexDirection:"column",boxSizing:"border-box",overflow:"hidden"})}onDragOver(e){if(Array.from(e.dataTransfer.items).find((e=>e.type===NM.dragDropMimeType))){const t=this.getDropZone(e);t!==this.dropZone&&(this.dropZone=t,this.updateDropMarker()),e.stopPropagation(),e.preventDefault()}}onDragLeave(e){"none"!==this.dropZone&&(this.dropZone="none",this.updateDropMarker())}onDrop(e){if(Array.from(e.dataTransfer.items).find((e=>e.type===NM.dragDropMimeType))){const t=this.dropZone;"none"!==t&&(this.dropZone="none",this.updateDropMarker()),e.stopPropagation();const n=e.dataTransfer.getData(NM.dragDropMimeType);this.movePanel(n,t),this.dispatchEvent(new CustomEvent(QM.changeEvent,{bubbles:!0}))}}getDropZone(e){const t=this.getBoundingClientRect(),n=(e.clientX-t.left)/t.width,r=(e.clientY-t.top)/t.height;let s;return s=n>.33&&n<.67&&r>.33&&r<.67?"after":n<r?n+r<1?"left":"bottom":n+r<1?"top":"right",s}updateDropMarker(){const e=this.dropZone;let t=this.getElementsByClassName("ff-dock-drop-marker").item(0);if(t&&"none"===e)return void this.removeChild(t);t||(t=document.createElement("div"),t.classList.add("ff-dock-drop-marker"),this.appendChild(t));const n=t.style;switch(n.pointerEvents="none",n.zIndex="1",n.position="absolute",n.left="0",n.right="0",n.top="0",n.bottom="0",e){case"left":n.right="50%";break;case"right":n.left="50%";break;case"top":n.bottom="50%";break;case"bottom":n.top="50%"}}};zM.dragDropMimeType="application/x-ff-dock-panel",IM([ai({type:String})],zM.prototype,"text",void 0),IM([ai({type:Boolean})],zM.prototype,"closable",void 0),IM([ai({type:Boolean})],zM.prototype,"movable",void 0),IM([ai({type:Boolean,reflect:!0})],zM.prototype,"active",void 0),zM=NM=IM([Ci("ff-dock-panel")],zM);const BM=zM;var FM,HM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let jM=FM=class extends Ti{constructor(e){super(),this.active=!1,this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.addEventListener("click",this.onClick),this.addEventListener("dragstart",this.onDragStart),this.addEventListener("dragover",this.onDragOver),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDrop),this.panel=e,e.header=this}update(e){super.update(e),this.panel.movable?this.setAttribute("draggable","true"):this.removeAttribute("draggable"),e.has("active")&&(this.panel.active=this.active)}render(){const{text:e,closable:t,movable:n}=this.panel;let r=t?qs`<ff-button inline icon="close" @click=${this.onClickButton}></ff-button>`:n?qs`<ff-icon name="grip"></ff-icon>`:null;return qs`
            <label class="ff-text">${e}</label>
            ${r}
        `}firstUpdated(){this.setStyle({flex:"0 0 auto",display:"block",userSelect:"none",cursor:"pointer"})}onClick(e){this.panel.activatePanel(),this.dispatchEvent(new CustomEvent(QM.changeEvent,{bubbles:!0}))}onClickButton(e){this.dispatchEvent(new CustomEvent(FM.closeEvent,{detail:{panelId:this.panel.id},bubbles:!0})),this.panel.closePanel(),e.stopPropagation(),this.dispatchEvent(new CustomEvent(QM.changeEvent,{bubbles:!0}))}onDragStart(e){this.panel.parentElement.activatePanel(this.panel),e.dataTransfer.setData(BM.dragDropMimeType,this.panel.id),e.dataTransfer.dropEffect="move"}onDragOver(e){this.panel.parentStack.onDragOver(e)}onDragLeave(e){this.panel.parentStack.onDragLeave(e)}onDrop(e){this.panel.parentStack.onDrop(e)}};jM.closeEvent="ff-dock-panel-header-close",HM([ai({type:Boolean,reflect:!0})],jM.prototype,"active",void 0),jM=FM=HM([Ci("ff-dock-panel-header")],jM);const UM=jM;var YM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let VM=class extends Ti{constructor(){super(),this.activeIndex=0,this.activeHeader=null,this.dropMarker=null,this.dropTarget=null,this.dropZone="none",this.isInit=!1,this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.addEventListener("dragover",this.onDragOver),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDrop)}get size(){return.01*parseFloat(this.style.flexBasis)}set size(e){this.style.flexBasis=`${(100*(e||1)).toFixed(3)}%`}activatePanel(e){this.activeHeader&&this.activeHeader.panel===e||(this.activeHeader&&(this.activeHeader.active=!1),this.activeHeader=e.header,this.activeHeader.active=!0)}insertPanel(e,t){this.init(!1),this.appendChild(e);const n=new UM(e);t?this.headers.insertBefore(n,t.header):this.headers.appendChild(n)}removePanel(e){const t=e.header;if(this.headers.removeChild(t),this.removeChild(e),0===this.getPanelCount()){this.parentElement.removeDockElement(this)}else if(this.activeHeader===t){const e=this.headers.firstChild;this.activatePanel(e.panel)}}getPanelCount(){return this.headers.childElementCount}setLayout(e,t){this.init(!1);const n=Array.from(this.children);for(let e of n)e!==this.headers&&this.removeChild(e);this.size=e.size,e.panels.forEach((e=>{const n=new BM;n.setLayout(e,t),this.insertPanel(n)}));const r=this.headers.firstElementChild;r&&this.activatePanel(r.panel)}getLayout(){const e=Array.from(this.getElementsByTagName("ff-dock-panel")),t=e.map((e=>e.getLayout()));let n=-1;for(let t=0,r=e.length;t<r;++t)if(e[t]===this.activeHeader.panel){n=t;break}return{type:"stack",size:this.size,activePanelIndex:n,panels:t}}onDragOver(e){Array.from(e.dataTransfer.items).find((e=>e.type===BM.dragDropMimeType))&&(this.updateDropMarker(e),e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.updateDropMarker(),e.stopPropagation()}onDrop(e){e.stopPropagation(),this.updateDropMarker();const t=e.dataTransfer.getData(BM.dragDropMimeType);this.dropTarget&&"none"!==this.dropZone&&this.dropTarget.movePanel(t,this.dropZone),this.dispatchEvent(new CustomEvent(QM.changeEvent,{bubbles:!0}))}updateDropMarker(e){let t=this.getElementsByClassName("ff-dock-drop-marker").item(0);if(!e)return void(t&&this.removeChild(t));t||(t=document.createElement("div"),t.classList.add("ff-dock-drop-marker"),this.appendChild(t),this.dropTarget=null,this.dropZone="none");const n=t.style;n.pointerEvents="none",n.width="25px",n.position="absolute",n.zIndex="1";let r,s=this.dropTarget,i=this.dropZone;if(e.currentTarget===this){const e=this.headers.lastChild;r=e.getBoundingClientRect(),s=e.panel,i="after"}else if(e.currentTarget instanceof UM){r=e.currentTarget.getBoundingClientRect();const t=(e.clientX-r.left)/r.width;s=e.currentTarget.panel,i=t<.5?"before":"after"}else s=null,i="none";if(s!==this.dropTarget||i!==this.dropZone)if(this.dropTarget=s,this.dropZone=i,s){const e=this.headers.getBoundingClientRect(),t=this.getBoundingClientRect(),s="before"===i?r.left:r.right;n.top=e.top-t.top+"px",n.height=e.height+"px",n.left=s-t.left+"px"}else t.remove()}firstConnected(){this.init(!0)}init(e){if(this.isInit)return;this.isInit=!0,this.setStyle({flex:"1 1 auto",position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"}),this.headers=document.createElement("header");const t=this.headers.style;if(t.flex="1 0 auto",t.flexWrap="wrap",t.display="flex",t.flexDirection="row",t.overflow="hidden",this.insertBefore(this.headers,this.firstChild),e){Array.from(this.children).forEach((e=>{if(e!==this.headers)if(this.removeChild(e),e instanceof BM)this.insertPanel(e);else{const t=new BM;t.appendChild(e),this.insertPanel(t)}}));const e=this.headers.firstElementChild;e&&this.activatePanel(e.panel)}}};YM([ai({type:Number})],VM.prototype,"size",null),YM([ai({type:Number})],VM.prototype,"activeIndex",void 0),VM=YM([Ci("ff-dock-stack")],VM);const $M=VM;var WM,GM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};const qM=e=>e instanceof XM||e instanceof $M;let XM=WM=class extends Ti{constructor(){super(...arguments),this.direction="horizontal",this.isInit=!1}get size(){return.01*parseFloat(this.style.flexBasis)}set size(e){this.style.flexBasis=`${(100*(e||1)).toFixed(3)}%`}insertPanel(e,t,n){const r="left"===n||"right"===n?"horizontal":"vertical",s="left"===n||"top"===n,i=t.size,o=new $M;o.insertPanel(e),o.activatePanel(e);const a=this.getDockElements();a.length<2&&(this.direction=r);let l=t;if(!s)for(let e=0,n=a.length;e<n;++e)if(a[e]===t){l=a[e+1];break}if(r===this.direction)this.insertDockElement(o,l),o.size=t.size=.5*i;else{const e=new WM;this.insertBefore(e,t),e.appendChild(t),e.insertDockElement(o,s?t:null),e.direction=r,e.size=i,t.size=o.size=.5}}insertDockElement(e,t){this.init(!1),this.insertBefore(e,t),this.updateSplitters()}removeDockElement(e){let t=this.getDockElements();if(1!==t.length)if(this.removeChild(e),t=this.getDockElements(),t.length<2&&this.parentElement instanceof WM){const e=this.parentElement,n=t[0];this.removeChild(n),n.size=this.size,e.insertBefore(n,this),e.removeChild(this),e.updateSplitters()}else this.updateSplitters()}getDockElements(){return Array.from(this.children).filter(qM)}setLayout(e,t){for(this.init(!1);this.firstChild;)this.removeChild(this.firstChild);this.size=e.size,this.direction=e.direction,e.elements.forEach(((e,n)=>{let r;switch(e.type){case"strip":r=new WM;break;case"stack":r=new $M}r.setLayout(e,t),this.appendChild(r)})),this.updateSplitters()}getLayout(){const e=Array.from(this.children).filter(qM).map((e=>e.getLayout()));return{type:"strip",size:this.size,direction:this.direction,elements:e}}isHorizontal(){return"horizontal"===this.direction}onSplitterChange(e){e.detail.isDragging||this.dispatchEvent(new CustomEvent(QM.changeEvent,{bubbles:!0}))}firstConnected(){this.init(!0)}update(e){super.update(e),e.has("direction")&&(this.style.flexDirection=this.isHorizontal()?"row":"column",this.updateSplitters())}updateSplitters(){const e=this.getChildrenArray();if(!this.parentElement)return;const t=this.isHorizontal(),n=[],r=[];let s=0;for(let i=0,o=e.length;i<o;++i){const o=e[i],a=o.nextElementSibling;if(o instanceof Dy){if(0===i||!a||a instanceof Dy){this.removeChild(o);continue}o.direction=this.direction}if(!qM(o))continue;const l=o.getBoundingClientRect(),c=t?l.width:l.height;s+=c,n.push(o),r.push(c);const d=o.previousElementSibling;if(d&&!(d instanceof Dy)){const e=new Dy;e.direction=this.direction,e.addEventListener(Dy.changeEvent,this.onSplitterChange),this.insertBefore(e,o)}}for(let e=0,t=n.length;e<t;++e)n[e].style.flexBasis=`${(r[e]/s*100).toFixed(3)}%`}init(e){this.isInit||(this.isInit=!0,this.setStyle({flex:"1 1 auto",display:"flex",alignItems:"stretch",overflow:"hidden"}),e&&Array.from(this.children).forEach((e=>{if(!qM(e)){const t=new $M,n=e.nextSibling;t.appendChild(e),this.insertBefore(t,n)}})))}};GM([ai({type:Number})],XM.prototype,"size",null),GM([ai({type:String})],XM.prototype,"direction",void 0),XM=WM=GM([Ci("ff-dock-strip")],XM);const KM=XM;var JM=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let ZM=class extends Ti{setPanelsMovable(e){const t=this.getElementsByTagName(BM.tagName);for(let n of t)n.movable=e}setPanelsClosable(e){const t=this.getElementsByTagName(BM.tagName);for(let n of t)n.closable=e}setLayout(e,t){for(;this.firstChild;)this.removeChild(this.firstChild);let n;switch(e.type){case"strip":n=new KM;break;case"stack":n=new $M}n.setLayout(e,t),this.appendChild(n),setTimeout((()=>window.dispatchEvent(new CustomEvent("resize"))),0)}getLayout(){const e=this.firstChild;return e&&(e instanceof KM||e instanceof $M)?e.getLayout():null}firstConnected(){this.setStyle({display:"flex",alignItems:"stretch"})}};ZM.changeEvent="ff-dock-view-change",ZM=JM([Ci("ff-dock-view")],ZM);const QM=ZM;class eS extends Bp{constructor(){super(...arguments),this.selection=null}firstConnected(){this.selection=this.system.getComponent(Q)}}var tS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let nS=class extends eS{constructor(e){super(e),this.tree=null,this.addEventListener("click",this.onClick.bind(this)),this.addEventListener("contextmenu",this.onContextMenu.bind(this))}firstConnected(){super.firstConnected(),this.classList.add("ff-hierarchy-tree-view"),this.tree=new sS(this.system)}connected(){super.connected(),this.selection.selectedComponents.on(X,this.onSelectGraph,this),this.selection.on("active-graph",this.onActiveGraph,this)}disconnected(){super.disconnected(),this.selection.selectedComponents.off(X,this.onSelectGraph,this),this.selection.off("active-graph",this.onActiveGraph,this)}render(){const e=this.selection,t=e.activeGraph&&e.activeGraph.parent,n=t?t.displayName:"Main",r=e.hasChildGraph()?qs`<ff-button icon="down" @click=${this.onClickDown}></ff-button>`:null,s=e.hasParentGraph()?qs`<ff-button icon="up" @click=${this.onClickUp}></ff-button>`:null;return qs`<div class="ff-flex-row ff-header">${s}<div class="ff-text">${n}</div>${r}</div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y">${this.tree}</div></div>`}onClick(){this.selection.clearSelection()}onClickUp(e){e.stopPropagation(),this.selection.activateParentGraph()}onClickDown(e){e.stopPropagation(),this.selection.activateChildGraph()}onContextMenu(){}onSelectGraph(e){this.requestUpdate()}onActiveGraph(e){this.requestUpdate()}};nS=tS([Ci("ff-hierarchy-tree-view")],nS);const rS=nS;let sS=class extends sx{constructor(e){super(),this.selection=null,this.rootId=i(),this.system=e}firstConnected(){super.firstConnected(),this.classList.add("ff-hierarchy-tree"),this.selection=this.system.getComponent(Q,!0),this.root=this.selection.activeGraph}connected(){super.connected();const e=this.selection;e.selectedNodes.on($,this.onSelectNode,this),e.selectedComponents.on(W,this.onSelectComponent,this),e.on("active-graph",this.onActiveGraph,this),e.system.nodes.on($,this.onUpdate,this),e.system.components.on(W,this.onUpdate,this),e.system.on("hierarchy",this.onUpdate,this)}disconnected(){super.disconnected();const e=this.selection;e.selectedNodes.off($,this.onSelectNode,this),e.selectedComponents.off(W,this.onSelectComponent,this),e.off("active-graph",this.onActiveGraph,this),e.system.nodes.off($,this.onUpdate,this),e.system.components.off(W,this.onUpdate,this),e.system.off("hierarchy",this.onUpdate,this)}renderNodeHeader(e){if(e instanceof W||e instanceof $)return e instanceof X?qs`<div class="ff-text ff-ellipsis"><b>${e.displayName}</b></div>`:qs`<div class="ff-text ff-ellipsis">${e.displayName}</div>`;{const t=e.parent?e.parent.displayName:"Main";return qs`<div class="ff-text">${t}</div>`}}isNodeSelected(e){const t=this.selection;return e instanceof W?t.selectedComponents.contains(e):e instanceof $&&t.selectedNodes.contains(e)}getId(e){return e.id||this.rootId}getClasses(e){return e instanceof $?"ff-node":e instanceof W?"ff-component":"ff-system"}getChildren(e){if(e instanceof $){let t=e.components.getArray();const n=e.components.get(Tr,!0);return n&&(t=t.concat(n.children.map((e=>e.node)))),t}return e instanceof q?e.findRootNodes():null}onNodeClick(e,t){const n=e.currentTarget.getBoundingClientRect();e.clientX-n.left<30?this.toggleExpanded(t):t instanceof $?this.selection.selectNode(t,e.ctrlKey):t instanceof W&&this.selection.selectComponent(t,e.ctrlKey)}onNodeDblClick(e,t){t instanceof X&&(this.selection.activeGraph=t.innerGraph)}onSelectNode(e){this.setSelected(e.object,e.add)}onSelectComponent(e){this.setSelected(e.object,e.add)}onActiveGraph(e){this.root=this.selection.activeGraph}};tS([ai({attribute:!1})],sS.prototype,"system",void 0),sS=tS([Ci("ff-hierarchy-tree")],sS);var iS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let oS=class extends zx{constructor(){super(...arguments),this.system=null,this.documentProvider=null,this.documents=[]}firstConnected(){super.firstConnected(),this.classList.add("sv-document-list"),this.documentProvider=this.system.getMainComponent(Lp)}connected(){super.connected(),this.setDocuments(this.documentProvider.scopedComponents),this.documentProvider.on("active-component",this.onUpdate,this),this.documentProvider.on("scoped-components",this.onDocumentsEvent,this)}disconnected(){this.documentProvider.off("scoped-components",this.onDocumentsEvent,this),this.documentProvider.off("active-component",this.onUpdate,this),this.setDocuments([]),super.disconnected()}update(e){this.data=this.documents,super.update(e)}renderItem(e){return qs`<div class="ff-flex-row">
            <ff-text class="ff-ellipsis">${e.displayName}</ff-text></div>`}isItemSelected(e){return e===this.documentProvider.activeComponent}onClickItem(e,t){this.documentProvider.activeComponent=t}onDocumentsEvent(){this.setDocuments(this.documentProvider.scopedComponents)}setDocuments(e){this.documents.forEach((e=>e.off("change",this.onUpdate,this))),this.documents=e,this.documents.forEach((e=>e.on("change",this.onUpdate,this)))}};iS([ai({attribute:!1})],oS.prototype,"system",void 0),oS=iS([Ci("sv-document-list")],oS);var aS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let lS=class extends sx{constructor(){super(...arguments),this.documentProvider=null,this.nodeProvider=null}firstConnected(){super.firstConnected(),this.classList.add("sv-node-tree"),this.addEventListener("click",this.onContainerClick.bind(this)),this.documentProvider=this.system.getMainComponent(Lp),this.nodeProvider=this.system.getMainComponent(Op)}connected(){super.connected(),this.documentProvider.on("active-component",this.onUpdate,this),this.nodeProvider.on("active-node",this.onActiveNode,this),this.nodeProvider.on("scoped-nodes",this.onUpdate,this)}disconnected(){this.nodeProvider.off("scoped-nodes",this.onUpdate,this),this.nodeProvider.off("active-node",this.onActiveNode,this),this.documentProvider.off("active-component",this.onUpdate,this),super.disconnected()}update(e){const t=this.documentProvider.activeComponent;this.root=t?{id:"scene",children:[t.root]}:null,super.update(e)}renderNodeHeader(e){let t=[];return e.scene&&t.push(qs`<ff-icon class="sv-icon-scene" name=${e.scene.icon}></ff-icon>`),e.model&&t.push(qs`<ff-icon class="sv-icon-model" name=${e.model.icon}></ff-icon>`),e.light&&t.push(qs`<ff-icon class="sv-icon-light" name=${e.light.icon}></ff-icon>`),e.camera&&t.push(qs`<ff-icon class="sv-icon-camera" name=${e.camera.icon}></ff-icon>`),e.meta&&t.push(qs`<ff-icon class="sv-icon-meta" name=${e.meta.icon}></ff-icon>`),qs`${t}<div class="ff-text ff-ellipsis">${e.displayName}</div>`}isNodeSelected(e){return e===this.nodeProvider.activeNode}getClasses(e){return e.scene?"sv-node-scene":e.model?"sv-node-model":e.light?"sv-node-light":e.camera?"sv-node-camera":void 0}getChildren(e){return e===this.root?super.getChildren(e):e.transform.children.map((e=>e.node)).filter((e=>e.is(Cp)||e.is(Ep)))}onNodeClick(e,t){const n=e.currentTarget.getBoundingClientRect();e.clientX-n.left<30?this.toggleExpanded(t):this.nodeProvider.activeNode=t}onContainerClick(){this.nodeProvider.activeNode=null}onActiveNode(e){e.previous&&(e.previous.off("change",this.onUpdate,this),this.setSelected(e.previous,!1)),e.next&&(this.setSelected(e.next,!0),e.next.on("change",this.onUpdate,this))}};aS([ai({attribute:!1})],lS.prototype,"system",void 0),lS=aS([Ci("sv-node-tree")],lS);var cS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let dS=class extends Bp{get taskProvider(){return this.system.getMainComponent(LM)}firstConnected(){this.classList.add("sv-panel","sv-navigator-panel")}connected(){this.taskProvider.ins.mode.on("value",this.performUpdate,this)}disconnected(){this.taskProvider.ins.mode.off("value",this.performUpdate,this)}render(){const e=this.system,t=this.taskProvider.expertMode?qs`<div class="ff-splitter-section ff-flex-column" style="flex-basis: 30%">
            <div class="sv-panel-header">
                <ff-icon name="document"></ff-icon>
                <div class="ff-text">Documents</div>
            </div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y">
                <sv-document-list .system=${e}></sv-document-list>
            </div></div>
            </div>
            <ff-splitter direction="vertical"></ff-splitter>`:null;return qs`${t}
            <div class="ff-splitter-section ff-flex-column" style="flex-basis: 70%">
                <div class="sv-panel-header">
                    <ff-icon name="hierarchy"></ff-icon>
                    <div class="ff-text">Nodes</div>
                </div>
                <sv-node-tree class="ff-flex-item-stretch" .system=${e}></sv-node-tree>
            </div>`}};dS=cS([Ci("sv-navigator-panel")],dS);const uS=dS;var hS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let mS=class extends Bp{constructor(e){super(e),this.story=null,this.taskProvider=null,this.story=e.getMainComponent(AM),this.taskProvider=e.getMainComponent(LM)}get assetReader(){return this.system.getMainComponent(Nc)}firstConnected(){this.classList.add("sv-task-bar")}connected(){this.taskProvider.on("scoped-components",this.onUpdate,this),this.taskProvider.on("active-component",this.onUpdate,this)}disconnected(){this.taskProvider.off("scoped-components",this.onUpdate,this),this.taskProvider.off("active-component",this.onUpdate,this)}render(){const e=this.taskProvider.scopedComponents,t=this.taskProvider.activeComponent,n=this.taskProvider.ins.mode.value,r=this.taskProvider.ins.mode.getOptionText(),s=n!==EM.Standalone,i=n!==EM.Standalone,o=n!==EM.Standalone?"Save":"Download";return qs`
            <img class="sv-story-logo" src=${this.assetReader.getSystemAssetUrl("images/voyager-75grey.svg")} alt="Logo"/>
            <div class="sv-mode ff-text">${r}</div>
            <div class="sv-spacer"></div>
            <div class="sv-divider"></div>
            <div class="ff-flex-row ff-group" @click=${this.onClickTask}>
                ${e.map(((e,n)=>qs`<ff-button text=${e.text} icon=${e.icon} index=${n} ?selected=${e===t}></ff-button>`))}
            </div>
            <div class="sv-divider"></div>
            <div class="sv-spacer"></div>
            <div class="sv-divider"></div>
            <div class="ff-flex-row ff-group">
                <ff-button text=${o} icon="save" @click=${this.onClickSave}></ff-button>
                ${s?qs`<ff-button text="Download" icon="download" @click=${this.onClickDownload}></ff-button>`:null}
                ${i?qs`<ff-button text="Exit" icon="exit" @click=${this.onClickExit}></ff-button>`:null}
            </div>
        `}onClickTask(e){if(e.target instanceof hu){const t=this.taskProvider.scopedComponents;this.taskProvider.activeComponent=t[e.target.index]}}onClickSave(){this.story.ins.save.set()}onClickDownload(){this.story.ins.download.set()}onClickExit(){this.story.ins.exit.set()}};mS=hS([Ci("sv-task-bar")],mS);const pS=mS;var fS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let gS=class extends Bp{constructor(e){super(),this._explorerElement=null,this._explorerElement=e}firstConnected(){super.firstConnected(),this.classList.add("sv-panel","sv-explorer-lockbar")}disconnected(){super.disconnected()}render(){return qs`<div class="sv-panel-header sv-panel-locks">
            <ff-button-group>
                <ff-button text="Full" @click=${this.unlockAspectRatio}></ff-button>
                <ff-button text="16:9" @click=${e=>this.setAspectRatio(9,16)}></ff-button>
                <ff-button text="20:9" @click=${e=>this.setAspectRatio(9,20)}></ff-button>
                <ff-button text="4:3" @click=${e=>this.setAspectRatio(3,4)}></ff-button>
            </ff-button-group>
        </div>
        `}unlockAspectRatio(){const e=this._explorerElement;e.style.aspectRatio="auto",e.style.width="100%"}setAspectRatio(e,t){const n=this._explorerElement;n.style.removeProperty("width"),n.style.aspectRatio=(e/t).toString()}};gS=fS([Ci("sv-explorer-lockbar")],gS);const vS=gS;var yS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let _S=class extends Ti{constructor(e){if(super(),this.application=e,e.system.getComponent("CVStandaloneFileManager",!0)){this.addEventListener("dragenter",this.onDragEnter),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDragDrop);const e=this.appendElement("input");e.type="file",e.id="fileInput",e.style.display="none"}}firstConnected(){this.classList.add("sv-panel","sv-explorer-panel");const e=this.createElement("div",{position:"relative",flex:"1 1 auto",display:"flex",flexDirection:"row",marginLeft:"auto",marginRight:"auto",width:"100%"});this.appendElement(new vS(e)),this.appendElement(e);const t=document.createElement("div");e.appendChild(t),t.appendChild(new O_(this.application))}onDragEnter(e){e.currentTarget!=this||this.contains(e.relatedTarget)||(e.preventDefault(),this.classList.add("sv-drop-zone"))}onDragLeave(e){e.currentTarget!=this||this.contains(e.relatedTarget)||e.relatedTarget.getRootNode()instanceof ShadowRoot||(e.preventDefault(),this.classList.remove("sv-drop-zone"))}onDragDrop(e){e.preventDefault(),this.classList.remove("sv-drop-zone")}};yS([ai({attribute:!1})],_S.prototype,"application",void 0),_S=yS([Ci("sv-explorer-panel")],_S);const bS=_S;var wS=n(7376),xS=n.n(wS);n(9011),n(5336),n(8010),n(6363),n(2161),n(4114),n(1243);const MS="/**\n* Copyright (c) Tiny Technologies, Inc. All rights reserved.\n* Licensed under the LGPL or a commercial license.\n* For LGPL see License.txt in the project root for license information.\n* For commercial licenses see https://www.tiny.cloud/\n*/\n.mce-content-body .mce-item-anchor{background:transparent url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%2F%3E%3C%2Fsvg%3E%0A\") no-repeat center;cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;-ms-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment{background-color:#fff0b7}.tox-comments-visible .tox-comment--active{background-color:#ffe168}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%234C4C4C%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A\");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A\")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A\"),default}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px 0 2px;position:relative}.mce-preview-object .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected=\"2\"] .mce-shim{display:none}.mce-object{background:transparent url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%2F%3E%3C%2Fsvg%3E%0A\") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected=\"2\"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(255,255,255,.5);content:attr(data-mce-placeholder);position:absolute}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:nth-of-type(1){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed #000;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0,0,0,.75);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A\") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #b4d7ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #b4d7ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #b4d7ff}.mce-content-body.mce-content-readonly [contentEditable=true]:focus,.mce-content-body.mce-content-readonly [contentEditable=true]:hover{outline:0}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#b4d7ff}.mce-content-body .mce-edit-focus{outline:3px solid #b4d7ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid rgba(180,215,255,.7);bottom:-1px;content:'';left:-1px;mix-blend-mode:multiply;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#b4d7ff;opacity:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A\");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A\");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc li{list-style-type:none}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border=\"0\"],.mce-item-table[border=\"0\"] caption,.mce-item-table[border=\"0\"] td,.mce-item-table[border=\"0\"] th,table[style*=\"border-width: 0px\"],table[style*=\"border-width: 0px\"] caption,table[style*=\"border-width: 0px\"] td,table[style*=\"border-width: 0px\"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}",SS="/**\n* Copyright (c) Tiny Technologies, Inc. All rights reserved.\n* Licensed under the LGPL or a commercial license.\n* For LGPL see License.txt in the project root for license information.\n* For commercial licenses see https://www.tiny.cloud/\n*/\nbody{font-family:Hind Siliguri,sans-serif;line-height:1.4;margin:1rem;background-color:#272727;color:#c8c8c8}table{border-collapse:collapse}table td,table th{border:1px solid #ccc;padding:.4rem}figure{display:table;margin:1rem auto}figure figcaption{color:#999;display:block;margin-top:.25rem;text-align:center}hr{border-color:#ccc;border-style:solid;border-width:1px 0 0 0}code{background-color:#e8e8e8;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #ccc;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #ccc;margin-right:1.5rem;padding-right:1rem}h1{margin:.3em 0;font-family:Amiri,serif;font-size:2.3em;font-weight:400;color:#e8e8e8}a:link,a:visited,a:hover,a:active{color:#0089bf;}";var TS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let CS=class extends Bp{constructor(){super(...arguments),this._container=null,this._overlay=null,this._assetPath=""}get mediaManager(){return this.system.getMainComponent(Lw)}get assetManager(){return this.system.getMainComponent(Zi)}get assetReader(){return this.system.getMainComponent(Nc)}get assetWriter(){return this.system.getMainComponent(Nw)}get standaloneFileManager(){return this.system.getMainComponent(Pw,!0)}get articleReader(){return this.system.getComponent(ru)}openArticle(e){return this._assetPath?this.closeArticle().then((()=>this.readArticle(e))):this.readArticle(e)}saveArticle(){this._assetPath&&this.writeArticle()}closeArticle(){return xS().activeEditor.isDirty()&&this._assetPath?cM.show("Close Article","Would you like save your changes?","warning","yes-no").then((e=>e.ok?this.writeArticle().then((()=>this.clearArticle())):this.clearArticle())):this.clearArticle()}readArticle(e){return this.assetReader.getText(e).then((t=>this.parseArticle(t,e))).then((t=>{xS().activeEditor.setContent(t,{format:"raw"}),this._assetPath=e})).then((()=>{xS().activeEditor.setDirty(!1),this._overlay.parentElement===this&&this.removeChild(this._overlay)}))}parseArticle(e,t){e=e.replace(/[\n\r]/g,"");const n=this.assetManager.getAssetBasePath(t);return e=e.replace(/(src=\")(.*?)(\")/g,((e,t,r,s)=>(r.startsWith("/")||r.startsWith("http")||(r=this.assetManager.getAssetUrl(n+r)),t+r+s))),Promise.resolve(e)}writeArticle(){const e=this.assetManager.getAssetBasePath(this._assetPath);let t=xS().activeEditor.getContent({format:"raw"});return t=t.replace(/(src=\")(.*?)(\")/g,((t,n,r,s)=>r.startsWith("blob")?n+(r=this.standaloneFileManager.blobUrlToFileUrl(r))+s:n+this.assetManager.getRelativeAssetPath(r,e)+s)),this.assetWriter.putText(t,this._assetPath).then((()=>{xS().activeEditor.setDirty(!1),this.articleReader.ins.articleId.set(),new zi(`Article successfully written to '${this._assetPath}'`,"info")})).catch((e=>{new zi(`Failed to write article to '${this._assetPath}': ${e.message}`,"error")}))}clearArticle(){return xS().activeEditor.setContent(""),this._assetPath="",xS().activeEditor.setDirty(!1),this.appendChild(this._overlay),Promise.resolve()}firstConnected(){super.firstConnected(),this.classList.add("sv-article-editor"),this._container=this.appendElement("div"),this._container.classList.add("sv-container"),this._container.id="editor_wrapper",this._overlay=this.appendElement("div"),this._overlay.classList.add("sv-overlay"),xS().init({selector:"#editor_wrapper",plugins:"image link lists media",toolbar:"saveButton closeButton | undo redo | link image media | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | styles",menubar:!1,skin:!1,height:"100%",resize:!1,branding:!1,automatic_uploads:!0,images_reuse_filename:!0,link_assume_external_targets:"https",paste_as_text:!0,content_css:!1,content_style:[SS,MS].join("\n"),convert_urls:!1,images_upload_handler:(e,t)=>new Promise(((t,n)=>{const r=e.filename();this.mediaManager.uploadFile(r,e.blob(),this.mediaManager.getAssetByPath(Lw.articleFolder+"/")).then((()=>{t(this.assetManager.getAssetUrl(Lw.articleFolder+"/"+r))}))})),init_instance_callback:e=>{e.editorUpload.addFilter((t=>{const n=e.editorUpload.blobCache.getByUri(t.src);if(n){if(!this.standaloneFileManager)return!0;{const e=n.filename();this.mediaManager.uploadFile(e,n.blob(),this.mediaManager.getAssetByPath(Lw.articleFolder+"/")),t.src=this.assetManager.getAssetUrl(Lw.articleFolder+"/"+e)}}return!1}))},setup:e=>{e.ui.registry.addButton("saveButton",{text:"Save",icon:"save",onAction:e=>{this.saveArticle()}}),e.ui.registry.addButton("closeButton",{text:"Close",icon:"close",onAction:e=>{this.closeArticle()}})}})}connected(){super.connected(),this.mediaManager.on("asset-open",this.onOpenAsset,this)}disconnected(){this.mediaManager.off("asset-open",this.onOpenAsset,this),super.disconnected()}onOpenAsset(e){null===e.asset?this._assetPath&&this.closeArticle():e.asset.info.type.startsWith("text/html")&&this.openArticle(e.asset.info.path)}};CS=TS([Ci("sv-article-editor")],CS);const ES=CS;var kS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let LS=class extends Bp{constructor(e){super(e),this._editor=new ES(e)}get editor(){return this._editor}firstConnected(){super.firstConnected(),this.classList.add("sv-panel","sv-editor-panel"),this.appendElement(this._editor)}};LS=kS([Ci("sv-editor-panel")],LS);const AS=LS;var DS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let OS=class extends Ti{constructor(){super(),this.rows=null,this.selectedRows=null,this.columns=null,this.placeholder="",this.resizable=!1,this._sortedRows=null,this._sortColumnIndex=-1,this._sortReversed=!1,this.onClickHeader=this.onClickHeader.bind(this)}firstConnected(){super.firstConnected(),this.classList.add("ff-table")}getSorter(e){return"function"==typeof e.sortable?e.sortable:(t,n)=>{const r=this.getCellContent(t,e,0),s=this.getCellContent(n,e,0);return"string"!=typeof r?0:r<s?-1:r>s?1:0}}isRowSelected(e){return this.selectedRows&&this.selectedRows instanceof Set?this.selectedRows.has(e):e===this.selectedRows}renderHeader(e,t){const n=e.header,r=1/this.columns.length,s="string"==typeof e.width?e.width:100*(e.width||r)+"%";let i=e.className||"",o=null;if(e.sortable&&(i+=" ff-sortable"),-1===this._sortColumnIndex&&e.sortable&&(this._sortColumnIndex=t),this._sortColumnIndex===t){const t=this.getSorter(e);t&&(this._sortReversed?this._sortedRows.sort(((e,n)=>t(n,e))):this._sortedRows.sort(t),o=qs`<ff-icon class="ff-table-sort-icon" name="${this._sortReversed?"caret-up":"caret-down"}"></ff-icon>`)}return"string"==typeof n?qs`<th class="ff-table-header ${i}" style="width: ${s}" @click=${n=>this.onClickHeader(n,e,t)}>${n}${o}</th>`:n(e,this.onClickHeader)}renderRow(e,t){const n=this.columns,r=this.isRowSelected(e);return qs`<tr ?selected=${r} @click=${n=>this.onClickRow(n,e,t)}>${n.map((n=>this.renderCell(e,n,t,r)))}</tr>`}renderCell(e,t,n,r){const s=this.getCellContent(e,t,n);if("string"==typeof s){const e=t.className||"";return qs`<td class="ff-table-cell ${e}">${s}</td>`}return s}getCellContent(e,t,n){const r=t.cell;return"string"==typeof r?e[r]:r(e,n)}render(){if(!this.rows||!this.columns)return qs`<div class="ff-placeholder"><div class="ff-text">${this.placeholder}</div></div>`;const e=this._sortedRows=this.rows.slice(),t=this.columns;return qs`<table><thead><tr>${t.map(((e,t)=>this.renderHeader(e,t)))}</tr></thead>
            <tbody>${e.map(((e,t)=>this.renderRow(e,t)))}</tbody></table>`}onClickHeader(e,t,n){t.sortable&&(this._sortColumnIndex===n?this._sortReversed=!this._sortReversed:(this._sortColumnIndex=n,this._sortReversed=!1),this.requestUpdate()),this.dispatchEvent(new CustomEvent("colclick",{detail:{column:t}}))}onClickRow(e,t,n){this.dispatchEvent(new CustomEvent("rowclick",{detail:{row:t,index:n}}))}};DS([ai({attribute:!1})],OS.prototype,"rows",void 0),DS([ai({attribute:!1})],OS.prototype,"selectedRows",void 0),DS([ai({attribute:!1})],OS.prototype,"columns",void 0),DS([ai({type:String})],OS.prototype,"placeholder",void 0),DS([ai({type:Boolean})],OS.prototype,"resizable",void 0),OS=DS([Ci("ff-table")],OS);const RS=OS;var PS,NS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let IS=PS=class extends Fp{constructor(){super(...arguments),this.stateTable=null,this.subscriber=null,this.tours=null}get toursTask(){return this.system.getMainComponent(wM,!0)}firstConnected(){super.firstConnected(),this.classList.add("sv-panel","sv-tour-panel"),this.stateTable=new RS,this.stateTable.columns=PS.tableColumns,this.stateTable.placeholder="Start by creating a tour step.",this.stateTable.addEventListener("rowclick",this.onClickTableRow.bind(this)),this.subscriber=new Hf("value",this.onUpdate,this)}connected(){super.connected(),this.system.components.on(wM,this.onToursTask,this);const e=this.toursTask;e&&e.outs.isActive.on("value",this.onUpdate,this)}disconnected(){const e=this.toursTask;e&&e.outs.isActive.off("value",this.onUpdate,this),this.system.components.off(wM,this.onToursTask,this),super.disconnected()}render(){const e=this.toursTask,t=this.tours,n=t.snapshots;if(!e||!t.ins.enabled.value)return qs`<div class="ff-placeholder">Tour edit task not available.</div>`;if(!t.activeTour)return qs`<div class="ff-placeholder">Please create or select a tour to edit.</div>`;const r=t.activeStep,s=r?qs`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${e.ins.stepTitle}></sv-property-view>
            <sv-property-view .property=${e.ins.stepCurve}></sv-property-view>
            <sv-property-view .property=${e.ins.stepDuration} commitonly></sv-property-view>
            <sv-property-view .property=${e.ins.stepThreshold} commitonly></sv-property-view>
        </div>`:qs`<div class="ff-placeholder"><div>Create or select a tour step to edit.</div></div>`;return this.stateTable.rows=t.activeSteps.map((e=>{const t=n.getState(e.id);return{title:e.titles[kd[this.toursTask.ins.language.value]]||"undefined",curve:$i[t.curve],duration:t.duration.toFixed(1)+"s",threshold:(100*t.threshold).toFixed(0)+"%"}})),this.stateTable.selectedRows=this.stateTable.rows[t.outs.stepIndex.value],qs`<div class="sv-panel-header">
            <ff-button text="Update" icon="camera" @click=${this.onClickUpdate}></ff-button>
            <ff-button text="Create" icon="create" @click=${this.onClickCreate}></ff-button>
            <ff-button text="Up" icon="up" ?disabled=${!r} @click=${this.onClickUp}></ff-button>
            <ff-button text="Down" icon="down" ?disabled=${!r} @click=${this.onClickDown}></ff-button>
            <ff-button text="Delete" icon="trash" ?disabled=${!r} @click=${this.onClickDelete}></ff-button>
        </div>
        <div class="ff-flex-item-stretch ff-flex-row">
            <div class="ff-splitter-section" style="flex-basis: 60%">
                <div class="ff-scroll-y ff-flex-column">${this.stateTable}</div>
            </div>
            <ff-splitter></ff-splitter>
            <div class="ff-splitter-section" style="flex-basis: 40%">
                ${s}
            </div>
        </div>`}onClickTableRow(e){this.tours.ins.stepIndex.setValue(e.detail.index)}onClickUpdate(){this.toursTask.ins.updateStep.set()}onClickCreate(){this.toursTask.ins.createStep.set()}onClickDelete(){this.toursTask.ins.deleteStep.set()}onClickUp(){this.toursTask.ins.moveStepUp.set()}onClickDown(){this.toursTask.ins.moveStepDown.set()}onActiveDocument(e,t){e&&this.subscriber.off(),t&&(this.tours=t.setup.tours,this.subscriber.on(this.tours.ins.enabled,this.tours.ins.tourIndex,this.tours.outs.stepIndex)),this.requestUpdate()}onToursTask(e){e.add&&e.object.outs.isActive.on("value",this.onUpdate,this),e.remove&&e.object.outs.isActive.off("value",this.onUpdate,this),this.requestUpdate()}};IS.tableColumns=[{header:"#",width:.05,cell:(e,t)=>t.toString()},{header:"Title",width:.4,cell:"title"},{header:"Curve",width:.25,cell:"curve"},{header:"Duration",width:.15,cell:"duration"},{header:"Threshold",width:.15,cell:"threshold"}],IS=PS=NS([Ci("sv-tour-panel")],IS);const zS=IS;var BS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let FS=class extends Bp{constructor(e){if(super(e),this.taskProvider=null,this.taskProvider=e.getMainComponent(LM),!this.taskProvider)throw new Error("missing task provider")}firstConnected(){this.classList.add("sv-scrollable","sv-panel","sv-task-panel")}connected(){super.connected(),this.taskProvider.on("active-component",this.onUpdate,this)}disconnected(){this.taskProvider.off("active-component",this.onUpdate,this),super.disconnected()}render(){const e=this.taskProvider.activeComponent;if(!e)return qs``;const t=e.createView();return qs`
            <div class="sv-panel-header">
                <ff-icon name=${e.icon}></ff-icon>
                <div class="ff-text">${e.text}</div>
            </div>
            <div class="sv-panel-content">
                ${t}
            </div>
        `}};FS=BS([Ci("sv-task-panel")],FS);const HS=FS;var jS,US=n(8787),YS=n.n(US),VS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let $S=jS=class extends Hp{constructor(e){super(e),this.notes=null,this.activeNote=null,this.noteTable=new RS,this.noteTable.columns=jS.tableColumns,this.noteTable.placeholder="No notes available.",this.noteTable.addEventListener("rowclick",this.onClickTableRow.bind(this))}firstConnected(){this.classList.add("sv-scrollable","sv-panel","sv-notes-panel")}renderNote(e){if(!e)return qs`<div class="ff-placeholder">
                <div>Select or create a note to edit it.</div>
            </div>`;const t=YS()(e.date).format("YYYY-MM-DD HH:mm:ss");return qs`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <div class="sv-note-field">Created on ${t}</div>
            <ff-line-edit text=${e.user} placeholder="User" @change=${this.onEditUser}></ff-line-edit>
            <ff-text-edit text=${e.text} placeholder="Comment" @change=${this.onEditText}></ff-text-edit>
            </div>
        </div>`}render(){const e=this.activeNode;if(!e||!e.scene&&!e.model)return qs`<div class="ff-placeholder">
                <div>Please select a scene or model to display its notes.</div>
            </div>`;this.getNotes();const t=this.activeNote,n=this.noteTable;return n.rows=this.notes||[],n.selectedRows=t,n.requestUpdate(),qs`<div class="sv-panel-header">
            <ff-button text="Add Note" icon="create" @click=${this.onClickCreate}></ff-button>
            <ff-button text="Delete Note" icon="trash" ?disabled=${!t} @click=${this.onClickDelete}></ff-button>
        </div>
        <div class="ff-flex-item-stretch ff-flex-row">
            <div class="ff-splitter-section" style="flex-basis: 60%">
                <div class="ff-scroll-y ff-flex-column">${n}</div>
            </div>
            <ff-splitter></ff-splitter>
            <div class="ff-splitter-section" style="flex-basis: 40%">
                ${this.renderNote(t)}
            </div>
        </div>`}onEditUser(e){this.activeNote.user=e.detail.text,this.requestUpdate()}onEditText(e){this.activeNote.text=e.detail.text,this.requestUpdate()}onClickTableRow(e){this.activeNote=e.detail.row,this.requestUpdate(),setTimeout((()=>this.getElementsByTagName("ff-text-edit").item(0).focus()),0)}onClickCreate(){this.getOrCreateNotes();const e={date:(new Date).toISOString(),user:"",text:""};this.notes.push(e),this.activeNote=e,this.requestUpdate(),setTimeout((()=>this.getElementsByTagName("ff-line-edit").item(0).focus()),0)}onClickDelete(){const e=this.notes.indexOf(this.activeNote);e>=0&&this.notes.splice(e,1),this.activeNote=this.notes[e]||null,this.requestUpdate()}onActiveNode(e,t){this.notes=null,this.activeNote=null,this.requestUpdate()}getNotes(){const e=this.activeNode;if(!e)return;const t=e.meta&&e.meta.process;t&&(this.notes=t.get("notes"),this.notes&&!this.activeNote&&(this.activeNote=this.notes[0]))}getOrCreateNotes(){this.notes=null,this.activeNote=null;const e=this.activeNode;if(!e)return;e.meta||!e.scene&&!e.model||e.createComponent(Od);const t=e.meta&&e.meta.process;t&&(this.notes=t.getOrCreate("notes",[]))}};$S.tableColumns=[{header:"Date",width:.3,cell:e=>YS()(e.date).format("YYYY-MM-DD HH:mm:ss"),sortable:!0},{header:"User",width:.25,cell:"user",sortable:!0},{header:"Text",width:.45,cell:"text",sortable:!0}],$S=jS=VS([Ci("sv-notes-panel")],$S);const WS=$S;var GS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let qS=class extends Bp{constructor(){super(...arguments),this.entries=[],this.logFunction=null}firstConnected(){this.classList.add("sv-scrollable","sv-panel","sv-console-panel")}connected(){}disconnected(){}render(){return qs`<div>${this.entries.map((e=>qs`<div>${e}</div>`))}</div>`}};qS=GS([Ci("sv-console-panel")],qS);const XS=qS;var KS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let JS=class extends sx{constructor(e){super(),this.selection=null,this.includeRoot=!0,this.system=e,this.selection=e.getComponent(Q,!0)}firstConnected(){super.firstConnected(),this.classList.add("ff-property-tree")}connected(){super.connected();const e=this.selection;e.selectedNodes.on($,this.onSelectNode,this),e.selectedComponents.on(W,this.onSelectComponent,this);const t=e.getSelectedNode();if(t)this.root=this.createNodeTreeNode(t);else{const t=e.getSelectedComponent();this.root=t?this.createComponentTreeNode(t):null}}disconnected(){super.disconnected(),this.selection.selectedNodes.off($,this.onSelectNode,this),this.selection.selectedComponents.off(W,this.onSelectComponent,this)}getClasses(e){return e.classes}renderNodeHeader(e){return e.property?qs`<div class="ff-text ff-property-label ff-ellipsis">${e.text}</div>
                <ff-property-view .property=${e.property}></ff-property-view>`:qs`<div class="ff-text ff-label ff-ellipsis">${e.text}</div>`}onSelectNode(e){e.add?this.root=this.createNodeTreeNode(e.object):this.root=null}onSelectComponent(e){e.add?this.root=this.createComponentTreeNode(e.object):this.root=null}createNodeTreeNode(e){return{id:e.id,text:e.displayName,classes:"ff-node",children:e.components.getArray().map((e=>this.createComponentTreeNode(e)))}}createComponentTreeNode(e){const t=e.id,n=t+"i",r=t+"o";return{id:t,text:e.displayName,classes:"ff-component",property:null,children:[this.createGroupNode(n,"Inputs",e.ins),this.createGroupNode(r,"Outputs",e.outs)]}}createGroupNode(e,t,n){const r=n.properties,s={id:e,text:t,classes:n.isInputGroup()?"ff-inputs":"ff-outputs",children:[]};return r.forEach((e=>{const t=e.path.split(".");let n=s;const r=t.length,i=r-1;for(let s=0;s<r;++s){const r=t[s];let o=n.children.find((e=>e.text===r));if(!o){o={id:s===i?e.key:r,text:r,classes:"",children:[],property:s===i?e:null},n.children.push(o)}n=o}})),s}};KS([ai({attribute:!1})],JS.prototype,"system",void 0),JS=KS([Ci("ff-property-tree")],JS);const ZS=JS;var QS=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let eT=class extends Bp{firstConnected(){this.classList.add("ff-scroll-y","sv-panel","sv-inspector-panel"),this.appendChild(new ZS(this.system))}};eT=QS([Ci("sv-inspector-panel")],eT);const tT=eT;var nT=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let rT=class extends sx{constructor(){super(),this.path="",this.assetManager=null,this.includeRoot=!0}firstConnected(){super.firstConnected(),this.classList.add("ff-asset-tree"),this.addEventListener("click",this.onContainerClick.bind(this))}connected(){super.connected(),this.assetManager=this.system.components.get(kw),this.assetManager.on("tree-change",this.onTreeChange,this)}disconnected(){this.assetManager.off("tree-change",this.onTreeChange,this),this.assetManager=null,super.disconnected()}renderNodeHeader(e){const t=e.info.folder;return qs`<ff-icon class=${t?"ff-folder":"ff-file"} name=${t?"folder":"file"}></ff-icon>
            <div class="ff-text ff-ellipsis">${e.info.name}</div>`}getChildren(e){return e.children.sort(((e,t)=>{if(e.info.folder&&!t.info.folder)return-1;if(!e.info.folder&&t.info.folder)return 1;const n=e.info.name.toLowerCase(),r=t.info.name.toLowerCase();return n<r?-1:n>r?1:0}))}getClasses(e){return e.info.folder?"ff-folder":"ff-file"}getId(e){return e.info.path}isNodeExpanded(e){return e.expanded}isNodeSelected(e){return this.assetManager.isSelected(e)}onTreeChange(e){const t=this.path.split("/").filter((e=>""!==e));let n=e.root;for(let e=0;e<t.length&&(n=n.children.find((n=>n.info.name===t[e])),n);++e);this.root=n||e.root,this.requestUpdate()}onContainerClick(){this.assetManager.select(null,!1)}onNodeClick(e,t){const n=e.currentTarget.getBoundingClientRect();e.clientX-n.left<30?this.toggleExpanded(t):this.assetManager.select(t,e.ctrlKey)}onNodeDblClick(e,t){this.assetManager.open(t)}canDrop(e,t){return t.info.folder&&(super.canDrop(e,t)||!!e.dataTransfer.types.find((e=>"Files"===e)))}onNodeDragStart(e,t){this.assetManager.select(t,e.ctrlKey),e.dataTransfer.setData("text/plain",t.info.path);const n=t.info.type;if("image/jpeg"===n||"image/png"===n){const n=this.assetManager.getAssetURL(t.info.path);e.dataTransfer.setData("text/html",`<img src="${n}">`)}return super.onNodeDragStart(e,t)}onNodeDrop(e,t){super.onNodeDrop(e,t);const n=e.dataTransfer.files;n.length>0?this.assetManager.uploadFiles(n,t):this.assetManager.moveSelected(t)}};nT([ai({attribute:!1})],rT.prototype,"system",void 0),nT([ai({type:String})],rT.prototype,"path",void 0),rT=nT([Ci("ff-asset-tree")],rT);var sT=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let iT=class extends Fp{constructor(){super(...arguments),this.basePath=""}get mediaManager(){return this.system.getMainComponent(Lw)}get taskProvider(){return this.system.getMainComponent(LM)}firstConnected(){this.classList.add("sv-panel","sv-asset-panel")}render(){const e=this.taskProvider.ins.mode.value;return this.basePath=e===EM.Expert?"":"articles",qs`<div class="sv-panel-header">
                <ff-button icon="folder" title="Create Folder" @click=${this.onClickFolder}></ff-button>
                <ff-button icon="pen" title="Rename Item" @click=${this.onClickRename}></ff-button>
                <ff-button icon="trash" title="Delete Item" @click=${this.onClickDelete}></ff-button>
                <ff-button icon="redo" title="Refresh View" @click=${this.onClickRefresh}></ff-button>
            </div>
            <ff-asset-tree class="ff-flex-item-stretch" draggable .system=${this.system} path=${this.basePath}>
            </ff-asset-tree>`}onClickFolder(){const e=this.mediaManager.selectedAssets[0]||this.mediaManager.root;e&&e.info.folder&&cM.show("Create Folder","Folder name:","prompt","ok-cancel","New Folder").then((t=>{if(t.ok&&t.text){const n=`folder '${t.text}' in '${e.info.path}'`;this.mediaManager.createFolder(e,t.text).then((()=>zi.show(`Created ${n}`))).catch((e=>zi.show(`Failed to create ${n}`,"error")))}}))}onClickRename(){const e=this.mediaManager.selectedAssets;if(1===e.length){const t=e[0];cM.show("Rename Asset","New name:","prompt","ok-cancel",t.info.name).then((e=>{if(e.ok&&e.text){const n=`asset '${t.info.path}' to '${e.text}.'`;this.mediaManager.rename(t,e.text).then((()=>zi.show(`Renamed ${n}`))).catch((e=>zi.show(`Failed to rename ${n}`,"error")))}}))}}onClickDelete(){cM.show("Delete Assets","Are you sure?","warning","ok-cancel").then((e=>{e.ok&&this.mediaManager.deleteSelected().then((()=>zi.show("Deleted selected assets."))).catch((()=>zi.show("Failed to delete selected assets.","error")))}))}onClickRefresh(){this.mediaManager.refresh()}};iT=sT([Ci("sv-asset-panel")],iT);const oT=iT;var aT=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let lT=class extends Fp{get taskProvider(){return this.system.getMainComponent(LM)}firstConnected(){this.classList.add("sv-panel","sv-collection-panel")}render(){const e=this.taskProvider,t=this.activeDocument.setup.language;return e.ins.language.value!==t.outs.language.value&&e.ins.language.setValue(t.outs.language.value,!0),qs`<div class="sv-panel-header">
                <ff-icon name="document"></ff-icon>
                <div class="ff-text">Collection</div>
            </div>
            <sv-property-view .property=${this.taskProvider.ins.language}></sv-property-view>
            <div class="sv-indent">
                <div class="sv-label">Title</div>
                <ff-line-edit name="title" text=${this.activeDocument.ins.title.value||"Missing Title"} @change=${this.onTextEdit}></ff-line-edit>
            </div>`}onTextEdit(e){const t=this.activeDocument;if(t){const n=e.target,r=e.detail.text;"title"===n.name&&t.ins.title.setValue(jx()(r,{allowedTags:["i"]}))}}onActiveDocument(e,t){e&&(e.setup.language.outs.language.off("value",this.onUpdate,this),e.outs.title.off("value",this.onUpdate,this)),t&&(t.outs.title.on("value",this.onUpdate,this),t.setup.language.outs.language.on("value",this.onUpdate,this))}};lT=aT([Ci("sv-collection-panel")],lT);const cT=lT;var dT,uT=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Ai.add("hierarchy",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M104 272h192v48h48v-48h192v48h48v-57.59c0-21.17-17.22-38.41-38.41-38.41H344v-64h40c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 8.84 3.58 16.84 9.37 22.63S247.16 160 256 160h40v64H94.41C73.22 224 56 241.23 56 262.41V320h48v-48zm168-160V48h96v64h-96zm336 240h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-16 112h-64v-64h64v64zM368 352h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-16 112h-64v-64h64v64zM128 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-16 112H48v-64h64v64z"/></svg>`),Ai.add("select",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"/></svg>`),Ai.add("create",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>`),Ai.add("move",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M360.549 412.216l-96.064 96.269c-4.686 4.686-12.284 4.686-16.971 0l-96.064-96.269c-4.686-4.686-4.686-12.284 0-16.971l19.626-19.626c4.753-4.753 12.484-4.675 17.14.173L230 420.78h2V280H91.22v2l44.986 41.783c4.849 4.656 4.927 12.387.173 17.14l-19.626 19.626c-4.686 4.686-12.284 4.686-16.971 0L3.515 264.485c-4.686-4.686-4.686-12.284 0-16.971l96.269-96.064c4.686-4.686 12.284-4.686 16.97 0l19.626 19.626c4.753 4.753 4.675 12.484-.173 17.14L91.22 230v2H232V91.22h-2l-41.783 44.986c-4.656 4.849-12.387 4.927-17.14.173l-19.626-19.626c-4.686-4.686-4.686-12.284 0-16.971l96.064-96.269c4.686-4.686 12.284-4.686 16.971 0l96.064 96.269c4.686 4.686 4.686 12.284 0 16.971l-19.626 19.626c-4.753 4.753-12.484 4.675-17.14-.173L282 91.22h-2V232h140.78v-2l-44.986-41.783c-4.849-4.656-4.927-12.387-.173-17.14l19.626-19.626c4.686-4.686 12.284-4.686 16.971 0l96.269 96.064c4.686 4.686 4.686 12.284 0 16.971l-96.269 96.064c-4.686 4.686-12.284 4.686-16.971 0l-19.626-19.626c-4.753-4.753-4.675-12.484.173-17.14L420.78 282v-2H280v140.78h2l41.783-44.986c4.656-4.849 12.387-4.927 17.14-.173l19.626 19.626c4.687 4.685 4.687 12.283 0 16.969z"/></svg>`),Ai.add("rotate",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"/></svg>`),Ai.add("compress",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"/></svg>`),Ai.add("camera",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"/></svg>`),Ai.add("save",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"/></svg>`),Ai.add("exit",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"/></svg>`),Ai.add("expert",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg>`),Ai.add("pen",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"/></svg>`),Ai.add("undo",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"/></svg>`),Ai.add("redo",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"/></svg>`),Ai.add("video",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M543.9 96c-6.2 0-12.5 1.8-18.2 5.7L416 170.1v-58.3c0-26.4-23.2-47.8-51.8-47.8H51.8C23.2 64 0 85.4 0 111.8v288.4C0 426.6 23.2 448 51.8 448h312.4c28.6 0 51.8-21.4 51.8-47.8v-58.3l109.7 68.3c5.7 4 12.1 5.7 18.2 5.7 16.6 0 32.1-13 32.1-31.5V127.5C576 109 560.5 96 543.9 96zM368 200v198.9c-.6.4-1.8 1.1-3.8 1.1H51.8c-2 0-3.2-.6-3.8-1.1V113.1c.6-.4 1.8-1.1 3.8-1.1h312.4c2 0 3.2.6 3.8 1.1V200zm160 155.2l-112-69.8v-58.7l112-69.8v198.3z"/></svg>`),Ai.add("upload",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.83 97.98L285.94 14.1c-9-9-21.2-14.1-33.89-14.1H47.99C21.5.1 0 21.6 0 48.09v415.92C0 490.5 21.5 512 47.99 512h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zM255.95 51.99l76.09 76.08h-76.09V51.99zM336 464.01H47.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H336v287.95zM182.98 227.79l-72.31 71.77c-7.6 7.54-2.26 20.52 8.45 20.52H168v84c0 6.63 5.37 12 12 12h24c6.63 0 12-5.37 12-12v-84h48.88c10.71 0 16.05-12.97 8.45-20.52l-72.31-71.77c-4.99-4.95-13.05-4.95-18.04 0z"/></svg>`),Ai.add("download",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M216 236.07c0-6.63-5.37-12-12-12h-24c-6.63 0-12 5.37-12 12v84.01h-48.88c-10.71 0-16.05 12.97-8.45 20.52l72.31 71.77c4.99 4.95 13.04 4.95 18.03 0l72.31-71.77c7.6-7.54 2.26-20.52-8.45-20.52H216v-84.01zM369.83 97.98L285.94 14.1c-9-9-21.2-14.1-33.89-14.1H47.99C21.5.1 0 21.6 0 48.09v415.92C0 490.5 21.5 512 47.99 512h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zM255.95 51.99l76.09 76.08h-76.09V51.99zM336 464.01H47.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H336v287.95z"/></svg>`),Ai.add("trash",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M192 188v216c0 6.627-5.373 12-12 12h-24c-6.627 0-12-5.373-12-12V188c0-6.627 5.373-12 12-12h24c6.627 0 12 5.373 12 12zm100-12h-24c-6.627 0-12 5.373-12 12v216c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12V188c0-6.627-5.373-12-12-12zm132-96c13.255 0 24 10.745 24 24v12c0 6.627-5.373 12-12 12h-20v336c0 26.51-21.49 48-48 48H80c-26.51 0-48-21.49-48-48V128H12c-6.627 0-12-5.373-12-12v-12c0-13.255 10.745-24 24-24h74.411l34.018-56.696A48 48 0 0 1 173.589 0h100.823a48 48 0 0 1 41.16 23.304L349.589 80H424zm-269.611 0h139.223L276.16 50.913A6 6 0 0 0 271.015 48h-94.028a6 6 0 0 0-5.145 2.913L154.389 80zM368 128H80v330a6 6 0 0 0 6 6h276a6 6 0 0 0 6-6V128z"/></svg>`),Ai.add("cube",qs`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M239.1 7.5l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V130.5c0-20-12.4-37.9-31.1-44.9l-208-78C262 3.4 250 3.4 239.1 7.5zm16.9 45l208 78v.3l-208 84.5-208-84.5v-.3l208-78zM48 182.6l184 74.8v190.2l-184-92v-173zm232 264.9V257.4l184-74.8v172.9l-184 92z"/></svg>`);let hT=dT=class extends Ti{constructor(e){if(super(),this.onUnload=this.onUnload.bind(this),e)this.application=e;else{const e={document:this.getAttribute("document"),root:this.getAttribute("root"),dracoRoot:this.getAttribute("dracoRoot"),resourceRoot:this.getAttribute("resourceRoot"),model:this.getAttribute("model"),geometry:this.getAttribute("geometry"),texture:this.getAttribute("texture"),quality:this.getAttribute("quality"),referrer:this.getAttribute("referrer"),mode:this.getAttribute("mode"),expert:this.hasAttribute("expert"),uiMode:this.getAttribute("uiMode")};this.application=new PM(null,e)}window.voyagerStory=this.application,this.dockView=null;const t=this.application.system;t.components.get(LM).ins.mode.on("value",this.onTaskMode,this);const n=this.registry=new Map,r=this.application.explorer;n.set("explorer",(()=>new bS(r))),n.set("tour-editor",(()=>new zS(t))),n.set("task",(()=>new HS(t))),n.set("notes",(()=>new WS(t))),n.set("console",(()=>new XS(t))),n.set("navigator",(()=>new uS(t))),n.set("hierarchy",(()=>new rS(t))),n.set("inspector",(()=>new tT(t))),n.set("assets",(()=>new oT(t))),n.set("article-editor",(()=>new AS(t))),n.set("collection",(()=>new cT(t)));const i=void 0!==s("reset")?null:o.get("voyager-story",dT.stateKey);this.state=i||{regularLayout:dT.regularLayout,expertLayout:dT.expertLayout}}get taskProvider(){return this.application.system.getMainComponent(LM)}get app(){return this.application}firstConnected(){this.setStyle({display:"flex",flexDirection:"column"}),this.appendElement(new pS(this.application.system)),this.dockView=this.appendElement(QM),this.restoreLayout(),window.addEventListener("beforeunload",this.onUnload)}disconnected(){this.storeLayout(),o.set("voyager-story",dT.stateKey,this.state)}onUnload(){this.storeLayout(),o.set("voyager-story",dT.stateKey,this.state)}onTaskMode(e){this.storeLayout(),this.restoreLayout()}storeLayout(){const e=this.state;this.taskProvider.expertMode?e.expertLayout=this.dockView.getLayout():e.regularLayout=this.dockView.getLayout()}restoreLayout(){const e=this.state,t=this.taskProvider.expertMode;this.dockView.setLayout(t?e.expertLayout:e.regularLayout,this.registry),this.dockView.setPanelsMovable(!0)}};hT.stateKey="main-view-2",hT.regularLayout={type:"strip",direction:"horizontal",size:1,elements:[{type:"strip",direction:"vertical",size:.22,elements:[{type:"stack",size:.35,activePanelIndex:0,panels:[{contentId:"navigator",text:"Navigator"},{contentId:"assets",text:"Media"},{contentId:"collection",text:"Collection"}]},{type:"stack",size:.65,activePanelIndex:0,panels:[{contentId:"task",text:"Task"}]}]},{type:"strip",direction:"vertical",size:.78,elements:[{type:"stack",size:.75,activePanelIndex:0,panels:[{contentId:"explorer",text:"Explorer"}]},{type:"stack",size:.25,activePanelIndex:0,panels:[{contentId:"article-editor",text:"Article Editor"},{contentId:"tour-editor",text:"Tour Editor"},{contentId:"notes",text:"Note Editor"}]}]}]},hT.expertLayout={type:"strip",direction:"horizontal",size:1,elements:[{type:"strip",direction:"vertical",size:.2,elements:[{type:"stack",size:.3,activePanelIndex:0,panels:[{contentId:"navigator",text:"Navigator"},{contentId:"assets",text:"Media"},{contentId:"collection",text:"Collection"}]},{type:"stack",size:.7,activePanelIndex:0,panels:[{contentId:"task",text:"Task"}]}]},{type:"strip",direction:"vertical",size:.6,elements:[{type:"stack",size:.8,activePanelIndex:0,panels:[{contentId:"explorer",text:"Explorer"}]},{type:"stack",size:.2,activePanelIndex:0,panels:[{contentId:"article-editor",text:"Article Editor"},{contentId:"tour-editor",text:"Tour Editor"},{contentId:"notes",text:"Note Editor"},{contentId:"console",text:"Console"}]}]},{type:"strip",direction:"vertical",size:.2,elements:[{type:"stack",size:.6,activePanelIndex:0,panels:[{contentId:"hierarchy",text:"Hierarchy"}]},{type:"stack",size:.4,activePanelIndex:0,panels:[{contentId:"inspector",text:"Inspector"}]}]}]},hT=dT=uT([Ci("voyager-story")],hT);const mT=hT},3266:()=>{},764:()=>{},5158:()=>{},8635:()=>{},1464:()=>{},3653:()=>{},4854:()=>{},6602:()=>{},8864:e=>{e.exports={nanoid:(e=21)=>{let t="",n=e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t)=>()=>{let n="",r=t;for(;r--;)n+=e[Math.random()*e.length|0];return n}}},338:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},360:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},9388:e=>{"use strict";e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},2059:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},2184:e=>{"use strict";e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},1542:e=>{"use strict";e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);n(7499)})();